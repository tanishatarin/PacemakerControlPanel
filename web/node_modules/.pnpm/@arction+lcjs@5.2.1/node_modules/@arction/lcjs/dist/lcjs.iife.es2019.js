/* LightningChart JS v5.2.1 */
var lcjs=function(t){"use strict";class i{constructor(){this.o=!0}u(){return this.o}}class s extends i{constructor(t,i){super(),this.S=t,this.o=i}M(t){return t!==this.S&&(this.S=t,this.o=!0),this}_(){return this.S}u(){return super.u()}}const e=(t,i)=>({x:t,y:i}),h=(t,i)=>({x:t,y:i}),r=(t,i,s)=>({position:t,high:i,low:s}),n=(t,i,s)=>({x:t,y:i,z:s}),o=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(e(t.position,t.high)),s.push(e(t.position,t.low))})),[i,s]},a=(t,i)=>({min:t,max:i}),l=(t,i,s,e)=>({x:Math.ceil(t),y:Math.ceil(i),width:Math.ceil(s),height:Math.ceil(e)}),u=(t,i=!0)=>new s(t,i),c=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),d=c,f=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom});var A=32,g=31,v={};function y(t){t&&(t.value=!0)}function m(){}function p(t){return void 0===t.size&&(t.size=t.C(b)),t.size}function S(t,i){if("number"!=typeof i){var s=i>>>0;if(""+s!==i||4294967295===s)return NaN;i=s}return i<0?p(t)+i:i}function b(){return!0}function x(t,i,s){return(0===t&&!C(t)||void 0!==s&&t<=-s)&&(void 0===i||void 0!==s&&i>=s)}function M(t,i){return w(t,i,0)}function _(t,i){return w(t,i,i)}function w(t,i,s){return void 0===t?s:C(t)?i===1/0?i:0|Math.max(0,i+t):void 0===i||i===t?t:0|Math.min(i,t)}function C(t){return t<0||0===t&&1/t==-1/0}var k="@@__IMMUTABLE_ITERABLE__@@";function T(t){return Boolean(t&&t[k])}var F="@@__IMMUTABLE_KEYED__@@";function I(t){return Boolean(t&&t[F])}var P="@@__IMMUTABLE_INDEXED__@@";function D(t){return Boolean(t&&t[P])}function B(t){return I(t)||D(t)}var L=function(t){return T(t)?t:st(t)},R=function(t){function i(t){return I(t)?t:et(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(L),E=function(t){function i(t){return D(t)?t:ht(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(L),O=function(t){function i(t){return T(t)&&!B(t)?t:rt(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(L);L.Keyed=R,L.Indexed=E,L.Set=O;var z="@@__IMMUTABLE_SEQ__@@";function V(t){return Boolean(t&&t[z])}var N="@@__IMMUTABLE_RECORD__@@";function G(t){return Boolean(t&&t[N])}function U(t){return T(t)||G(t)}var W="@@__IMMUTABLE_ORDERED__@@";function Y(t){return Boolean(t&&t[W])}var H="function"==typeof Symbol&&Symbol.iterator,j=H||"@@iterator",$=function(t){this.next=t};function X(t,i,s,e){var h=0===t?i:1===t?s:[i,s];return e?e.value=h:e={value:h,done:!1},e}function Z(){return{value:void 0,done:!0}}function Q(t){return!!Array.isArray(t)||!!q(t)}function J(t){return t&&"function"==typeof t.next}function K(t){var i=q(t);return i&&i.call(t)}function q(t){var i=t&&(H&&t[H]||t["@@iterator"]);if("function"==typeof i)return i}$.prototype.toString=function(){return"[Iterator]"},$.KEYS=0,$.VALUES=1,$.ENTRIES=2,$.prototype.inspect=$.prototype.toSource=function(){return this.toString()},$.prototype[j]=function(){return this};var tt=Object.prototype.hasOwnProperty;function it(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var st=function(t){function i(t){return null==t?ut():U(t)?t.toSeq():function(t){var i,s,e=ft(t);if(e)return(s=q(i=t))&&s===i.entries?e.fromEntrySeq():function(t){var i=q(t);return i&&i===t.keys}(t)?e.toSetSeq():e;if("object"==typeof t)return new ot(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.toSeq=function(){return this},i.prototype.toString=function(){return this.T("Seq {","}")},i.prototype.cacheResult=function(){return!this.F&&this.I&&(this.F=this.entrySeq().toArray(),this.size=this.F.length),this},i.prototype.C=function(t,i){var s=this.F;if(s){for(var e=s.length,h=0;h!==e;){var r=s[i?e-++h:h++];if(!1===t(r[1],r[0],this))break}return h}return this.I(t,i)},i.prototype.P=function(t,i){var s=this.F;if(s){var e=s.length,h=0;return new $((function(){if(h===e)return{value:void 0,done:!0};var r=s[i?e-++h:h++];return X(t,r[0],r[1])}))}return this.D(t,i)},i}(L),et=function(t){function i(t){return null==t?ut().toKeyedSeq():T(t)?I(t)?t.toSeq():t.fromEntrySeq():G(t)?t.toSeq():ct(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.toKeyedSeq=function(){return this},i}(st),ht=function(t){function i(t){return null==t?ut():T(t)?I(t)?t.entrySeq():t.toIndexedSeq():G(t)?t.toSeq().entrySeq():dt(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return i(arguments)},i.prototype.toIndexedSeq=function(){return this},i.prototype.toString=function(){return this.T("Seq [","]")},i}(st),rt=function(t){function i(t){return(T(t)&&!B(t)?t:ht(t)).toSetSeq()}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return i(arguments)},i.prototype.toSetSeq=function(){return this},i}(st);st.isSeq=V,st.Keyed=et,st.Set=rt,st.Indexed=ht,st.prototype[z]=!0;var nt=function(t){function i(t){this.L=t,this.size=t.length}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t,i){return this.has(t)?this.L[S(this,t)]:i},i.prototype.C=function(t,i){for(var s=this.L,e=s.length,h=0;h!==e;){var r=i?e-++h:h++;if(!1===t(s[r],r,this))break}return h},i.prototype.P=function(t,i){var s=this.L,e=s.length,h=0;return new $((function(){if(h===e)return{value:void 0,done:!0};var r=i?e-++h:h++;return X(t,r,s[r])}))},i}(ht),ot=function(t){function i(t){var i=Object.keys(t);this.R=t,this.O=i,this.size=i.length}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t,i){return void 0===i||this.has(t)?this.R[t]:i},i.prototype.has=function(t){return tt.call(this.R,t)},i.prototype.C=function(t,i){for(var s=this.R,e=this.O,h=e.length,r=0;r!==h;){var n=e[i?h-++r:r++];if(!1===t(s[n],n,this))break}return r},i.prototype.P=function(t,i){var s=this.R,e=this.O,h=e.length,r=0;return new $((function(){if(r===h)return{value:void 0,done:!0};var n=e[i?h-++r:r++];return X(t,n,s[n])}))},i}(et);ot.prototype[W]=!0;var at,lt=function(t){function i(t){this.V=t,this.size=t.length||t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.I=function(t,i){if(i)return this.cacheResult().C(t,i);var s=K(this.V),e=0;if(J(s))for(var h;!(h=s.next()).done&&!1!==t(h.value,e++,this););return e},i.prototype.D=function(t,i){if(i)return this.cacheResult().P(t,i);var s=K(this.V);if(!J(s))return new $(Z);var e=0;return new $((function(){var i=s.next();return i.done?i:X(t,e++,i.value)}))},i}(ht);function ut(){return at||(at=new nt([]))}function ct(t){var i=ft(t);if(i)return i.fromEntrySeq();if("object"==typeof t)return new ot(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function dt(t){var i=ft(t);if(i)return i;throw new TypeError("Expected Array or collection object of values: "+t)}function ft(t){return it(t)?new nt(t):Q(t)?new lt(t):void 0}var At="@@__IMMUTABLE_MAP__@@";function gt(t){return Boolean(t&&t[At])}function vt(t){return gt(t)&&Y(t)}function yt(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function mt(t,i){if(t===i||t!=t&&i!=i)return!0;if(!t||!i)return!1;if("function"==typeof t.valueOf&&"function"==typeof i.valueOf){if((t=t.valueOf())===(i=i.valueOf())||t!=t&&i!=i)return!0;if(!t||!i)return!1}return!!(yt(t)&&yt(i)&&t.equals(i))}var pt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,i){var s=65535&(t|=0),e=65535&(i|=0);return s*e+((t>>>16)*e+s*(i>>>16)<<16>>>0)|0};function St(t){return t>>>1&1073741824|3221225471&t}var bt=Object.prototype.valueOf;function xt(t){if(null==t)return Mt(t);if("function"==typeof t.hashCode)return St(t.hashCode(t));var i,s,e,h=(i=t).valueOf!==bt&&"function"==typeof i.valueOf?i.valueOf(i):i;if(null==h)return Mt(h);switch(typeof h){case"boolean":return h?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var i=0|t;for(i!==t&&(i^=4294967295*t);t>4294967295;)i^=t/=4294967295;return St(i)}(h);case"string":return h.length>Bt?(void 0===(e=Et[s=h])&&(e=_t(s),Rt===Lt&&(Rt=0,Et={}),Rt++,Et[s]=e),e):_t(h);case"object":case"function":return function(t){var i;if(Ft&&void 0!==(i=Tt.get(t)))return i;if(void 0!==(i=t[Dt]))return i;if(!Ct){if(void 0!==(i=t.propertyIsEnumerable&&t.propertyIsEnumerable[Dt]))return i;if(void 0!==(i=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return i}if(i=kt(),Ft)Tt.set(t,i);else{if(void 0!==wt&&!1===wt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Ct)Object.defineProperty(t,Dt,{enumerable:!1,configurable:!1,writable:!1,value:i});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Dt]=i;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Dt]=i}}return i}(h);case"symbol":return function(t){var i=It[t];return void 0!==i||(i=kt(),It[t]=i),i}(h);default:if("function"==typeof h.toString)return _t(h.toString());throw new Error("Value type "+typeof h+" cannot be hashed.")}}function Mt(t){return null===t?1108378658:1108378659}function _t(t){for(var i=0,s=0;s<t.length;s++)i=31*i+t.charCodeAt(s)|0;return St(i)}var wt=Object.isExtensible,Ct=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function kt(){var t=++Pt;return 1073741824&Pt&&(Pt=0),t}var Tt,Ft="function"==typeof WeakMap;Ft&&(Tt=new WeakMap);var It=Object.create(null),Pt=0,Dt="__immutablehash__";"function"==typeof Symbol&&(Dt=Symbol(Dt));var Bt=16,Lt=255,Rt=0,Et={},Ot=function(t){function i(t,i){this.N=t,this.G=i,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t,i){return this.N.get(t,i)},i.prototype.has=function(t){return this.N.has(t)},i.prototype.valueSeq=function(){return this.N.valueSeq()},i.prototype.reverse=function(){var t=this,i=Wt(this,!0);return this.G||(i.valueSeq=function(){return t.N.toSeq().reverse()}),i},i.prototype.map=function(t,i){var s=this,e=Ut(this,t,i);return this.G||(e.valueSeq=function(){return s.N.toSeq().map(t,i)}),e},i.prototype.C=function(t,i){var s=this;return this.N.C((function(i,e){return t(i,e,s)}),i)},i.prototype.P=function(t,i){return this.N.P(t,i)},i}(et);Ot.prototype[W]=!0;var zt=function(t){function i(t){this.N=t,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.includes=function(t){return this.N.includes(t)},i.prototype.C=function(t,i){var s=this,e=0;return i&&p(this),this.N.C((function(h){return t(h,i?s.size-++e:e++,s)}),i)},i.prototype.P=function(t,i){var s=this,e=this.N.P(1,i),h=0;return i&&p(this),new $((function(){var r=e.next();return r.done?r:X(t,i?s.size-++h:h++,r.value,r)}))},i}(ht),Vt=function(t){function i(t){this.N=t,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.has=function(t){return this.N.includes(t)},i.prototype.C=function(t,i){var s=this;return this.N.C((function(i){return t(i,i,s)}),i)},i.prototype.P=function(t,i){var s=this.N.P(1,i);return new $((function(){var i=s.next();return i.done?i:X(t,i.value,i.value,i)}))},i}(rt),Nt=function(t){function i(t){this.N=t,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.entrySeq=function(){return this.N.toSeq()},i.prototype.C=function(t,i){var s=this;return this.N.C((function(i){if(i){ti(i);var e=T(i);return t(e?i.get(1):i[1],e?i.get(0):i[0],s)}}),i)},i.prototype.P=function(t,i){var s=this.N.P(1,i);return new $((function(){for(;;){var i=s.next();if(i.done)return i;var e=i.value;if(e){ti(e);var h=T(e);return X(t,h?e.get(0):e[0],h?e.get(1):e[1],i)}}}))},i}(et);function Gt(t){var i=si(t);return i.N=t,i.size=t.size,i.flip=function(){return t},i.reverse=function(){var i=t.reverse.apply(this);return i.flip=function(){return t.reverse()},i},i.has=function(i){return t.includes(i)},i.includes=function(i){return t.has(i)},i.cacheResult=ei,i.I=function(i,s){var e=this;return t.C((function(t,s){return!1!==i(s,t,e)}),s)},i.D=function(i,s){if(2===i){var e=t.P(i,s);return new $((function(){var t=e.next();if(!t.done){var i=t.value[0];t.value[0]=t.value[1],t.value[1]=i}return t}))}return t.P(1===i?0:1,s)},i}function Ut(t,i,s){var e=si(t);return e.size=t.size,e.has=function(i){return t.has(i)},e.get=function(e,h){var r=t.get(e,v);return r===v?h:i.call(s,r,e,t)},e.I=function(e,h){var r=this;return t.C((function(t,h,n){return!1!==e(i.call(s,t,h,n),h,r)}),h)},e.D=function(e,h){var r=t.P(2,h);return new $((function(){var h=r.next();if(h.done)return h;var n=h.value,o=n[0];return X(e,o,i.call(s,n[1],o,t),h)}))},e}function Wt(t,i){var s=this,e=si(t);return e.N=t,e.size=t.size,e.reverse=function(){return t},t.flip&&(e.flip=function(){var i=Gt(t);return i.reverse=function(){return t.flip()},i}),e.get=function(s,e){return t.get(i?s:-1-s,e)},e.has=function(s){return t.has(i?s:-1-s)},e.includes=function(i){return t.includes(i)},e.cacheResult=ei,e.C=function(s,e){var h=this,r=0;return e&&p(t),t.C((function(t,n){return s(t,i?n:e?h.size-++r:r++,h)}),!e)},e.P=function(e,h){var r=0;h&&p(t);var n=t.P(2,!h);return new $((function(){var t=n.next();if(t.done)return t;var o=t.value;return X(e,i?o[0]:h?s.size-++r:r++,o[1],t)}))},e}function Yt(t,i,s,e){var h=si(t);return e&&(h.has=function(e){var h=t.get(e,v);return h!==v&&!!i.call(s,h,e,t)},h.get=function(e,h){var r=t.get(e,v);return r!==v&&i.call(s,r,e,t)?r:h}),h.I=function(h,r){var n=this,o=0;return t.C((function(t,r,a){if(i.call(s,t,r,a))return o++,h(t,e?r:o-1,n)}),r),o},h.D=function(h,r){var n=t.P(2,r),o=0;return new $((function(){for(;;){var r=n.next();if(r.done)return r;var a=r.value,l=a[0],u=a[1];if(i.call(s,u,l,t))return X(h,e?l:o++,u,r)}}))},h}function Ht(t,i,s,e){var h=t.size;if(x(i,s,h))return t;var r=M(i,h),n=_(s,h);if(r!=r||n!=n)return Ht(t.toSeq().cacheResult(),i,s,e);var o,a=n-r;a==a&&(o=a<0?0:a);var l=si(t);return l.size=0===o?o:t.size&&o||void 0,!e&&V(t)&&o>=0&&(l.get=function(i,s){return(i=S(this,i))>=0&&i<o?t.get(i+r,s):s}),l.I=function(i,s){var h=this;if(0===o)return 0;if(s)return this.cacheResult().C(i,s);var n=0,a=!0,l=0;return t.C((function(t,s){if(!a||!(a=n++<r))return l++,!1!==i(t,e?s:l-1,h)&&l!==o})),l},l.D=function(i,s){if(0!==o&&s)return this.cacheResult().P(i,s);if(0===o)return new $(Z);var h=t.P(i,s),n=0,a=0;return new $((function(){for(;n++<r;)h.next();if(++a>o)return{value:void 0,done:!0};var t=h.next();return e||1===i||t.done?t:X(i,a-1,0===i?void 0:t.value[1],t)}))},l}function jt(t,i,s,e){var h=si(t);return h.I=function(h,r){var n=this;if(r)return this.cacheResult().C(h,r);var o=!0,a=0;return t.C((function(t,r,l){if(!o||!(o=i.call(s,t,r,l)))return a++,h(t,e?r:a-1,n)})),a},h.D=function(h,r){var n=this;if(r)return this.cacheResult().P(h,r);var o=t.P(2,r),a=!0,l=0;return new $((function(){var t,r,u;do{if((t=o.next()).done)return e||1===h?t:X(h,l++,0===h?void 0:t.value[1],t);var c=t.value;r=c[0],u=c[1],a&&(a=i.call(s,u,r,n))}while(a);return 2===h?t:X(h,r,u,t)}))},h}function $t(t,i){var s=I(t),e=[t].concat(i).map((function(t){return T(t)?s&&(t=R(t)):t=s?ct(t):dt(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===e.length)return t;if(1===e.length){var h=e[0];if(h===t||s&&I(h)||D(t)&&D(h))return h}var r=new nt(e);return s?r=r.toKeyedSeq():D(t)||(r=r.toSetSeq()),(r=r.flatten(!0)).size=e.reduce((function(t,i){if(void 0!==t){var s=i.size;if(void 0!==s)return t+s}}),0),r}function Xt(t,i,s){var e=si(t);return e.I=function(h,r){if(r)return this.cacheResult().C(h,r);var n=0,o=!1;return function t(a,l){a.C((function(r,a){return(!i||l<i)&&T(r)?t(r,l+1):(n++,!1===h(r,s?a:n-1,e)&&(o=!0)),!o}),r)}(t,0),n},e.D=function(e,h){if(h)return this.cacheResult().P(e,h);var r=t.P(e,h),n=[],o=0;return new $((function(){for(;r;){var t=r.next();if(!1===t.done){var a=t.value;if(2===e&&(a=a[1]),i&&!(n.length<i)||!T(a))return s?t:X(e,o++,a,t);n.push(r),r=a.P(e,h)}else r=n.pop()}return{value:void 0,done:!0}}))},e}function Zt(t,i,s){i||(i=hi);var e=I(t),h=0,r=t.toSeq().map((function(i,e){return[e,i,h++,s?s(i,e,t):i]})).valueSeq().toArray();return r.sort((function(t,s){return i(t[3],s[3])||t[2]-s[2]})).forEach(e?function(t,i){r[i].length=2}:function(t,i){r[i]=t[1]}),e?et(r):D(t)?ht(r):rt(r)}function Qt(t,i,s){if(i||(i=hi),s){var e=t.toSeq().map((function(i,e){return[i,s(i,e,t)]})).reduce((function(t,s){return Jt(i,t[1],s[1])?s:t}));return e&&e[0]}return t.reduce((function(t,s){return Jt(i,t,s)?s:t}))}function Jt(t,i,s){var e=t(s,i);return 0===e&&s!==i&&(null==s||s!=s)||e>0}function Kt(t,i,s,e){var h=si(t),r=new nt(s).map((function(t){return t.size}));return h.size=e?r.max():r.min(),h.C=function(t,i){for(var s,e=this.P(1,i),h=0;!(s=e.next()).done&&!1!==t(s.value,h++,this););return h},h.D=function(t,h){var r=s.map((function(t){return t=L(t),K(h?t.reverse():t)})),n=0,o=!1;return new $((function(){var s;return o||(s=r.map((function(t){return t.next()})),o=e?s.every((function(t){return t.done})):s.some((function(t){return t.done}))),o?{value:void 0,done:!0}:X(t,n++,i.apply(null,s.map((function(t){return t.value}))))}))},h}function qt(t,i){return t===i?t:V(t)?i:t.constructor(i)}function ti(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function ii(t){return I(t)?R:D(t)?E:O}function si(t){return Object.create((I(t)?et:D(t)?ht:rt).prototype)}function ei(){return this.N.cacheResult?(this.N.cacheResult(),this.size=this.N.size,this):st.prototype.cacheResult.call(this)}function hi(t,i){return void 0===t&&void 0===i?0:void 0===t?1:void 0===i?-1:t>i?1:t<i?-1:0}function ri(t,i){i=i||0;for(var s=Math.max(0,t.length-i),e=new Array(s),h=0;h<s;h++)e[h]=t[h+i];return e}function ni(t,i){if(!t)throw new Error(i)}function oi(t){ni(t!==1/0,"Cannot perform this action with an infinite size.")}function ai(t){if(it(t)&&"string"!=typeof t)return t;if(Y(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}zt.prototype.cacheResult=Ot.prototype.cacheResult=Vt.prototype.cacheResult=Nt.prototype.cacheResult=ei;var li=Object.prototype.toString;function ui(t){return"object"==typeof t&&(U(t)||Array.isArray(t)||function(t){if(!t||"object"!=typeof t||"[object Object]"!==li.call(t))return!1;var i=Object.getPrototypeOf(t);if(null===i)return!0;for(var s=i,e=Object.getPrototypeOf(i);null!==e;)s=e,e=Object.getPrototypeOf(s);return s===i}(t))}function ci(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(i){return JSON.stringify(t)}}function di(t,i,s){return U(t)?t.get(i,s):function(t,i){return U(t)?t.has(i):ui(t)&&tt.call(t,i)}(t,i)?"function"==typeof t.get?t.get(i):t[i]:s}function fi(t){if(Array.isArray(t))return ri(t);var i={};for(var s in t)tt.call(t,s)&&(i[s]=t[s]);return i}function Ai(t,i,s,e){e||(e=s,s=void 0);var h=gi(U(t),t,ai(i),0,s,e);return h===v?s:h}function gi(t,i,s,e,h,r){var n=i===v;if(e===s.length){var o=n?h:i,a=r(o);return a===o?i:a}if(!n&&!ui(i))throw new TypeError("Cannot update within non-data-structure value in path ["+s.slice(0,e).map(ci)+"]: "+i);var l=s[e],u=n?v:di(i,l,v),c=gi(u===v?t:U(u),u,s,e+1,h,r);return c===u?i:c===v?function(t,i){if(!ui(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(U(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(i)}if(!tt.call(t,i))return t;var s=fi(t);return Array.isArray(s)?s.splice(i,1):delete s[i],s}(i,l):function(t,i,s){if(!ui(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(U(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(i,s)}if(tt.call(t,i)&&s===t[i])return t;var e=fi(t);return e[i]=s,e}(n?t?ji():{}:i,l,c)}function vi(t,i){return function(t,i,s){return Ai(t,i,v,(function(){return s}))}(this,t,i)}function yi(t){return function(t,i){return Ai(t,i,(function(){return v}))}(this,t)}function mi(t,i,s,e){return Ai(t,[i],s,e)}function pi(t,i,s){return 1===arguments.length?t(this):mi(this,t,i,s)}function Si(t,i,s){return Ai(this,t,i,s)}function bi(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return Mi(this,t)}function xi(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return Mi(this,i,t)}function Mi(t,i,s){for(var e=[],h=0;h<i.length;h++){var r=R(i[h]);0!==r.size&&e.push(r)}return 0===e.length?t:0!==t.toSeq().size||t.U||1!==e.length?t.withMutations((function(t){for(var i=s?function(i,e){mi(t,e,v,(function(t){return t===v?i:s(t,i,e)}))}:function(i,s){t.set(s,i)},h=0;h<e.length;h++)e[h].forEach(i)})):t.constructor(e[0])}function _i(t,i,s){return wi(t,i,function(t){return function i(s,e,h){return ui(s)&&ui(e)&&(r=e,n=st(s),o=st(r),D(n)===D(o)&&I(n)===I(o))?wi(s,[e],i):t?t(s,e,h):e;var r,n,o}}(s))}function wi(t,i,s){if(!ui(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(U(t))return"function"==typeof s&&t.mergeWith?t.mergeWith.apply(t,[s].concat(i)):t.merge?t.merge.apply(t,i):t.concat.apply(t,i);for(var e=Array.isArray(t),h=t,r=e?E:R,n=e?function(i){h===t&&(h=fi(h)),h.push(i)}:function(i,e){var r=tt.call(h,e),n=r&&s?s(h[e],i,e):i;r&&n===h[e]||(h===t&&(h=fi(h)),h[e]=n)},o=0;o<i.length;o++)r(i[o]).forEach(n);return h}function Ci(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return _i(this,t)}function ki(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];return _i(this,i,t)}function Ti(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];return Ai(this,t,ji(),(function(t){return wi(t,i)}))}function Fi(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];return Ai(this,t,ji(),(function(t){return _i(t,i)}))}function Ii(t){var i=this.asMutable();return t(i),i.wasAltered()?i.W(this.U):this}function Pi(){return this.U?this:this.W(new m)}function Di(){return this.W()}function Bi(){return this.Y}var Li=function(t){function i(i){return null==i?ji():gt(i)&&!Y(i)?i:ji().withMutations((function(s){var e=t(i);oi(e.size),e.forEach((function(t,i){return s.set(i,t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return ji().withMutations((function(i){for(var s=0;s<t.length;s+=2){if(s+1>=t.length)throw new Error("Missing value for key: "+t[s]);i.set(t[s],t[s+1])}}))},i.prototype.toString=function(){return this.T("Map {","}")},i.prototype.get=function(t,i){return this.H?this.H.get(0,void 0,t,i):i},i.prototype.set=function(t,i){return $i(this,t,i)},i.prototype.remove=function(t){return $i(this,t,v)},i.prototype.deleteAll=function(t){var i=L(t);return 0===i.size?this:this.withMutations((function(t){i.forEach((function(i){return t.remove(i)}))}))},i.prototype.clear=function(){return 0===this.size?this:this.U?(this.size=0,this.H=null,this.j=void 0,this.Y=!0,this):ji()},i.prototype.sort=function(t){return ms(Zt(this,t))},i.prototype.sortBy=function(t,i){return ms(Zt(this,i,t))},i.prototype.map=function(t,i){var s=this;return this.withMutations((function(e){e.forEach((function(h,r){e.set(r,t.call(i,h,r,s))}))}))},i.prototype.P=function(t,i){return new Ui(this,t,i)},i.prototype.C=function(t,i){var s=this,e=0;return this.H&&this.H.iterate((function(i){return e++,t(i[1],i[0],s)}),i),e},i.prototype.W=function(t){return t===this.U?this:t?Hi(this.size,this.H,t,this.j):0===this.size?ji():(this.U=t,this.Y=!1,this)},i}(R);Li.isMap=gt;var Ri=Li.prototype;Ri[At]=!0,Ri.delete=Ri.remove,Ri.removeAll=Ri.deleteAll,Ri.setIn=vi,Ri.removeIn=Ri.deleteIn=yi,Ri.update=pi,Ri.updateIn=Si,Ri.merge=Ri.concat=bi,Ri.mergeWith=xi,Ri.mergeDeep=Ci,Ri.mergeDeepWith=ki,Ri.mergeIn=Ti,Ri.mergeDeepIn=Fi,Ri.withMutations=Ii,Ri.wasAltered=Bi,Ri.asImmutable=Di,Ri["@@transducer/init"]=Ri.asMutable=Pi,Ri["@@transducer/step"]=function(t,i){return t.set(i[0],i[1])},Ri["@@transducer/result"]=function(t){return t.asImmutable()};var Ei=function(t,i){this.ownerID=t,this.entries=i};Ei.prototype.get=function(t,i,s,e){for(var h=this.entries,r=0,n=h.length;r<n;r++)if(mt(s,h[r][0]))return h[r][1];return e},Ei.prototype.update=function(t,i,s,e,h,r,n){for(var o=h===v,a=this.entries,l=0,u=a.length;l<u&&!mt(e,a[l][0]);l++);var c=l<u;if(c?a[l][1]===h:o)return this;if(y(n),(o||!c)&&y(r),!o||1!==a.length){if(!c&&!o&&a.length>=qi)return function(t,i,s,e){t||(t=new m);for(var h=new Ni(t,xt(s),[s,e]),r=0;r<i.length;r++){var n=i[r];h=h.update(t,0,void 0,n[0],n[1])}return h}(t,a,e,h);var d=t&&t===this.ownerID,f=d?a:ri(a);return c?o?l===u-1?f.pop():f[l]=f.pop():f[l]=[e,h]:f.push([e,h]),d?(this.entries=f,this):new Ei(t,f)}};var Oi=function(t,i,s){this.ownerID=t,this.bitmap=i,this.nodes=s};Oi.prototype.get=function(t,i,s,e){void 0===i&&(i=xt(s));var h=1<<((0===t?i:i>>>t)&g),r=this.bitmap;return 0==(r&h)?e:this.nodes[Ji(r&h-1)].get(t+5,i,s,e)},Oi.prototype.update=function(t,i,s,e,h,r,n){void 0===s&&(s=xt(e));var o=(0===i?s:s>>>i)&g,a=1<<o,l=this.bitmap,u=0!=(l&a);if(!u&&h===v)return this;var c=Ji(l&a-1),d=this.nodes,f=u?d[c]:void 0,y=Xi(f,t,i+5,s,e,h,r,n);if(y===f)return this;if(!u&&y&&d.length>=ts)return function(t,i,s,e,h){for(var r=0,n=new Array(A),o=0;0!==s;o++,s>>>=1)n[o]=1&s?i[r++]:void 0;return n[e]=h,new zi(t,r+1,n)}(t,d,l,o,y);if(u&&!y&&2===d.length&&Zi(d[1^c]))return d[1^c];if(u&&y&&1===d.length&&Zi(y))return y;var m=t&&t===this.ownerID,p=u?y?l:l^a:l|a,S=u?y?Ki(d,c,y,m):function(t,i,s){var e=t.length-1;if(s&&i===e)return t.pop(),t;for(var h=new Array(e),r=0,n=0;n<e;n++)n===i&&(r=1),h[n]=t[n+r];return h}(d,c,m):function(t,i,s,e){var h=t.length+1;if(e&&i+1===h)return t[i]=s,t;for(var r=new Array(h),n=0,o=0;o<h;o++)o===i?(r[o]=s,n=-1):r[o]=t[o+n];return r}(d,c,y,m);return m?(this.bitmap=p,this.nodes=S,this):new Oi(t,p,S)};var zi=function(t,i,s){this.ownerID=t,this.count=i,this.nodes=s};zi.prototype.get=function(t,i,s,e){void 0===i&&(i=xt(s));var h=(0===t?i:i>>>t)&g,r=this.nodes[h];return r?r.get(t+5,i,s,e):e},zi.prototype.update=function(t,i,s,e,h,r,n){void 0===s&&(s=xt(e));var o=(0===i?s:s>>>i)&g,a=h===v,l=this.nodes,u=l[o];if(a&&!u)return this;var c=Xi(u,t,i+5,s,e,h,r,n);if(c===u)return this;var d=this.count;if(u){if(!c&&--d<is)return function(t,i,s,e){for(var h=0,r=0,n=new Array(s),o=0,a=1,l=i.length;o<l;o++,a<<=1){var u=i[o];void 0!==u&&o!==e&&(h|=a,n[r++]=u)}return new Oi(t,h,n)}(t,l,d,o)}else d++;var f=t&&t===this.ownerID,A=Ki(l,o,c,f);return f?(this.count=d,this.nodes=A,this):new zi(t,d,A)};var Vi=function(t,i,s){this.ownerID=t,this.keyHash=i,this.entries=s};Vi.prototype.get=function(t,i,s,e){for(var h=this.entries,r=0,n=h.length;r<n;r++)if(mt(s,h[r][0]))return h[r][1];return e},Vi.prototype.update=function(t,i,s,e,h,r,n){void 0===s&&(s=xt(e));var o=h===v;if(s!==this.keyHash)return o?this:(y(n),y(r),Qi(this,t,i,s,[e,h]));for(var a=this.entries,l=0,u=a.length;l<u&&!mt(e,a[l][0]);l++);var c=l<u;if(c?a[l][1]===h:o)return this;if(y(n),(o||!c)&&y(r),o&&2===u)return new Ni(t,this.keyHash,a[1^l]);var d=t&&t===this.ownerID,f=d?a:ri(a);return c?o?l===u-1?f.pop():f[l]=f.pop():f[l]=[e,h]:f.push([e,h]),d?(this.entries=f,this):new Vi(t,this.keyHash,f)};var Ni=function(t,i,s){this.ownerID=t,this.keyHash=i,this.entry=s};Ni.prototype.get=function(t,i,s,e){return mt(s,this.entry[0])?this.entry[1]:e},Ni.prototype.update=function(t,i,s,e,h,r,n){var o=h===v,a=mt(e,this.entry[0]);return(a?h===this.entry[1]:o)?this:(y(n),o?void y(r):a?t&&t===this.ownerID?(this.entry[1]=h,this):new Ni(t,this.keyHash,[e,h]):(y(r),Qi(this,t,i,xt(e),[e,h])))},Ei.prototype.iterate=Vi.prototype.iterate=function(t,i){for(var s=this.entries,e=0,h=s.length-1;e<=h;e++)if(!1===t(s[i?h-e:e]))return!1},Oi.prototype.iterate=zi.prototype.iterate=function(t,i){for(var s=this.nodes,e=0,h=s.length-1;e<=h;e++){var r=s[i?h-e:e];if(r&&!1===r.iterate(t,i))return!1}},Ni.prototype.iterate=function(t,i){return t(this.entry)};var Gi,Ui=function(t){function i(t,i,s){this.$=i,this.X=s,this.Z=t.H&&Yi(t.H)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.next=function(){for(var t=this.$,i=this.Z;i;){var s=i.node,e=i.index++,h=void 0;if(s.entry){if(0===e)return Wi(t,s.entry)}else if(s.entries){if(e<=(h=s.entries.length-1))return Wi(t,s.entries[this.X?h-e:e])}else if(e<=(h=s.nodes.length-1)){var r=s.nodes[this.X?h-e:e];if(r){if(r.entry)return Wi(t,r.entry);i=this.Z=Yi(r,i)}continue}i=this.Z=this.Z.J}return{value:void 0,done:!0}},i}($);function Wi(t,i){return X(t,i[0],i[1])}function Yi(t,i){return{node:t,index:0,J:i}}function Hi(t,i,s,e){var h=Object.create(Ri);return h.size=t,h.H=i,h.U=s,h.j=e,h.Y=!1,h}function ji(){return Gi||(Gi=Hi(0))}function $i(t,i,s){var e,h;if(t.H){var r={value:!1},n={value:!1};if(e=Xi(t.H,t.U,0,void 0,i,s,r,n),!n.value)return t;h=t.size+(r.value?s===v?-1:1:0)}else{if(s===v)return t;h=1,e=new Ei(t.U,[[i,s]])}return t.U?(t.size=h,t.H=e,t.j=void 0,t.Y=!0,t):e?Hi(h,e):ji()}function Xi(t,i,s,e,h,r,n,o){return t?t.update(i,s,e,h,r,n,o):r===v?t:(y(o),y(n),new Ni(i,e,[h,r]))}function Zi(t){return t.constructor===Ni||t.constructor===Vi}function Qi(t,i,s,e,h){if(t.keyHash===e)return new Vi(i,e,[t.entry,h]);var r,n=(0===s?t.keyHash:t.keyHash>>>s)&g,o=(0===s?e:e>>>s)&g,a=n===o?[Qi(t,i,s+5,e,h)]:(r=new Ni(i,e,h),n<o?[t,r]:[r,t]);return new Oi(i,1<<n|1<<o,a)}function Ji(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function Ki(t,i,s,e){var h=e?t:ri(t);return h[i]=s,h}var qi=8,ts=16,is=8,ss="@@__IMMUTABLE_LIST__@@";function es(t){return Boolean(t&&t[ss])}var hs=function(t){function i(i){var s=cs();if(null==i)return s;if(es(i))return i;var e=t(i),h=e.size;return 0===h?s:(oi(h),h>0&&h<A?us(0,h,5,null,new ns(e.toArray())):s.withMutations((function(t){t.setSize(h),e.forEach((function(i,s){return t.set(s,i)}))})))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.T("List [","]")},i.prototype.get=function(t,i){if((t=S(this,t))>=0&&t<this.size){var s=As(this,t+=this.K);return s&&s.array[t&g]}return i},i.prototype.set=function(t,i){return function(t,i,s){if((i=S(t,i))!=i)return t;if(i>=t.size||i<0)return t.withMutations((function(t){i<0?gs(t,i).set(0,s):gs(t,0,i+1).set(i,s)}));i+=t.K;var e=t.q,h=t.H,r={value:!1};return i>=vs(t.tt)?e=ds(e,t.U,0,i,s,r):h=ds(h,t.U,t.it,i,s,r),r.value?t.U?(t.H=h,t.q=e,t.j=void 0,t.Y=!0,t):us(t.K,t.tt,t.it,h,e):t}(this,t,i)},i.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},i.prototype.insert=function(t,i){return this.splice(t,0,i)},i.prototype.clear=function(){return 0===this.size?this:this.U?(this.size=this.K=this.tt=0,this.it=5,this.H=this.q=this.j=void 0,this.Y=!0,this):cs()},i.prototype.push=function(){var t=arguments,i=this.size;return this.withMutations((function(s){gs(s,0,i+t.length);for(var e=0;e<t.length;e++)s.set(i+e,t[e])}))},i.prototype.pop=function(){return gs(this,0,-1)},i.prototype.unshift=function(){var t=arguments;return this.withMutations((function(i){gs(i,-t.length);for(var s=0;s<t.length;s++)i.set(s,t[s])}))},i.prototype.shift=function(){return gs(this,1)},i.prototype.concat=function(){for(var i=arguments,s=[],e=0;e<arguments.length;e++){var h=i[e],r=t("string"!=typeof h&&Q(h)?h:[h]);0!==r.size&&s.push(r)}return 0===s.length?this:0!==this.size||this.U||1!==s.length?this.withMutations((function(t){s.forEach((function(i){return i.forEach((function(i){return t.push(i)}))}))})):this.constructor(s[0])},i.prototype.setSize=function(t){return gs(this,0,t)},i.prototype.map=function(t,i){var s=this;return this.withMutations((function(e){for(var h=0;h<s.size;h++)e.set(h,t.call(i,e.get(h),h,s))}))},i.prototype.slice=function(t,i){var s=this.size;return x(t,i,s)?this:gs(this,M(t,s),_(i,s))},i.prototype.P=function(t,i){var s=i?this.size:0,e=ls(this,i);return new $((function(){var h=e();return h===as?{value:void 0,done:!0}:X(t,i?--s:s++,h)}))},i.prototype.C=function(t,i){for(var s,e=i?this.size:0,h=ls(this,i);(s=h())!==as&&!1!==t(s,i?--e:e++,this););return e},i.prototype.W=function(t){return t===this.U?this:t?us(this.K,this.tt,this.it,this.H,this.q,t,this.j):0===this.size?cs():(this.U=t,this.Y=!1,this)},i}(E);hs.isList=es;var rs=hs.prototype;rs[ss]=!0,rs.delete=rs.remove,rs.merge=rs.concat,rs.setIn=vi,rs.deleteIn=rs.removeIn=yi,rs.update=pi,rs.updateIn=Si,rs.mergeIn=Ti,rs.mergeDeepIn=Fi,rs.withMutations=Ii,rs.wasAltered=Bi,rs.asImmutable=Di,rs["@@transducer/init"]=rs.asMutable=Pi,rs["@@transducer/step"]=function(t,i){return t.push(i)},rs["@@transducer/result"]=function(t){return t.asImmutable()};var ns=function(t,i){this.array=t,this.ownerID=i};ns.prototype.removeBefore=function(t,i,s){if(s===i?1<<i:0===this.array.length)return this;var e=s>>>i&g;if(e>=this.array.length)return new ns([],t);var h,r=0===e;if(i>0){var n=this.array[e];if((h=n&&n.removeBefore(t,i-5,s))===n&&r)return this}if(r&&!h)return this;var o=fs(this,t);if(!r)for(var a=0;a<e;a++)o.array[a]=void 0;return h&&(o.array[e]=h),o},ns.prototype.removeAfter=function(t,i,s){if(s===(i?1<<i:0)||0===this.array.length)return this;var e,h=s-1>>>i&g;if(h>=this.array.length)return this;if(i>0){var r=this.array[h];if((e=r&&r.removeAfter(t,i-5,s))===r&&h===this.array.length-1)return this}var n=fs(this,t);return n.array.splice(h+1),e&&(n.array[h]=e),n};var os,as={};function ls(t,i){var s=t.K,e=t.tt,h=vs(e),r=t.q;return function t(n,o,a){return 0===o?function(t,n){var o=n===h?r&&r.array:t&&t.array,a=n>s?0:s-n,l=e-n;return l>A&&(l=A),function(){if(a===l)return as;var t=i?--l:a++;return o&&o[t]}}(n,a):function(h,r,n){var o,a=h&&h.array,l=n>s?0:s-n>>r,u=1+(e-n>>r);return u>A&&(u=A),function(){for(;;){if(o){var s=o();if(s!==as)return s;o=null}if(l===u)return as;var e=i?--u:l++;o=t(a&&a[e],r-5,n+(e<<r))}}}(n,o,a)}(t.H,t.it,0)}function us(t,i,s,e,h,r,n){var o=Object.create(rs);return o.size=i-t,o.K=t,o.tt=i,o.it=s,o.H=e,o.q=h,o.U=r,o.j=n,o.Y=!1,o}function cs(){return os||(os=us(0,0,5))}function ds(t,i,s,e,h,r){var n,o=e>>>s&g,a=t&&o<t.array.length;if(!a&&void 0===h)return t;if(s>0){var l=t&&t.array[o],u=ds(l,i,s-5,e,h,r);return u===l?t:((n=fs(t,i)).array[o]=u,n)}return a&&t.array[o]===h?t:(r&&y(r),n=fs(t,i),void 0===h&&o===n.array.length-1?n.array.pop():n.array[o]=h,n)}function fs(t,i){return i&&t&&i===t.ownerID?t:new ns(t?t.array.slice():[],i)}function As(t,i){if(i>=vs(t.tt))return t.q;if(i<1<<t.it+5){for(var s=t.H,e=t.it;s&&e>0;)s=s.array[i>>>e&g],e-=5;return s}}function gs(t,i,s){void 0!==i&&(i|=0),void 0!==s&&(s|=0);var e=t.U||new m,h=t.K,r=t.tt,n=h+i,o=void 0===s?r:s<0?r+s:h+s;if(n===h&&o===r)return t;if(n>=o)return t.clear();for(var a=t.it,l=t.H,u=0;n+u<0;)l=new ns(l&&l.array.length?[void 0,l]:[],e),u+=1<<(a+=5);u&&(n+=u,h+=u,o+=u,r+=u);for(var c=vs(r),d=vs(o);d>=1<<a+5;)l=new ns(l&&l.array.length?[l]:[],e),a+=5;var f=t.q,A=d<c?As(t,o-1):d>c?new ns([],e):f;if(f&&d>c&&n<r&&f.array.length){for(var v=l=fs(l,e),y=a;y>5;y-=5){var p=c>>>y&g;v=v.array[p]=fs(v.array[p],e)}v.array[c>>>5&g]=f}if(o<r&&(A=A&&A.removeAfter(e,0,o)),n>=d)n-=d,o-=d,a=5,l=null,A=A&&A.removeBefore(e,0,n);else if(n>h||d<c){for(u=0;l;){var S=n>>>a&g;if(S!==d>>>a&g)break;S&&(u+=(1<<a)*S),a-=5,l=l.array[S]}l&&n>h&&(l=l.removeBefore(e,a,n-u)),l&&d<c&&(l=l.removeAfter(e,a,d-u)),u&&(n-=u,o-=u)}return t.U?(t.size=o-n,t.K=n,t.tt=o,t.it=a,t.H=l,t.q=A,t.j=void 0,t.Y=!0,t):us(n,o,a,l,A)}function vs(t){return t<A?0:t-1>>>5<<5}var ys,ms=function(t){function i(t){return null==t?Ss():vt(t)?t:Ss().withMutations((function(i){var s=R(t);oi(s.size),s.forEach((function(t,s){return i.set(s,t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.T("OrderedMap {","}")},i.prototype.get=function(t,i){var s=this.st.get(t);return void 0!==s?this.et.get(s)[1]:i},i.prototype.clear=function(){return 0===this.size?this:this.U?(this.size=0,this.st.clear(),this.et.clear(),this.Y=!0,this):Ss()},i.prototype.set=function(t,i){return bs(this,t,i)},i.prototype.remove=function(t){return bs(this,t,v)},i.prototype.C=function(t,i){var s=this;return this.et.C((function(i){return i&&t(i[1],i[0],s)}),i)},i.prototype.P=function(t,i){return this.et.fromEntrySeq().P(t,i)},i.prototype.W=function(t){if(t===this.U)return this;var i=this.st.W(t),s=this.et.W(t);return t?ps(i,s,t,this.j):0===this.size?Ss():(this.U=t,this.Y=!1,this.st=i,this.et=s,this)},i}(Li);function ps(t,i,s,e){var h=Object.create(ms.prototype);return h.size=t?t.size:0,h.st=t,h.et=i,h.U=s,h.j=e,h.Y=!1,h}function Ss(){return ys||(ys=ps(ji(),cs()))}function bs(t,i,s){var e,h,r=t.st,n=t.et,o=r.get(i),a=void 0!==o;if(s===v){if(!a)return t;n.size>=A&&n.size>=2*r.size?(e=(h=n.filter((function(t,i){return void 0!==t&&o!==i}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.U&&(e.U=h.U=t.U)):(e=r.remove(i),h=o===n.size-1?n.pop():n.set(o,void 0))}else if(a){if(s===n.get(o)[1])return t;e=r,h=n.set(o,[i,s])}else e=r.set(i,n.size),h=n.set(n.size,[i,s]);return t.U?(t.size=e.size,t.st=e,t.et=h,t.j=void 0,t.Y=!0,t):ps(e,h)}ms.isOrderedMap=vt,ms.prototype[W]=!0,ms.prototype.delete=ms.prototype.remove;var xs="@@__IMMUTABLE_STACK__@@";function Ms(t){return Boolean(t&&t[xs])}var _s=function(t){function i(t){return null==t?Ts():Ms(t)?t:Ts().pushAll(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.T("Stack [","]")},i.prototype.get=function(t,i){var s=this.ht;for(t=S(this,t);s&&t--;)s=s.next;return s?s.value:i},i.prototype.peek=function(){return this.ht&&this.ht.value},i.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var i=this.size+arguments.length,s=this.ht,e=arguments.length-1;e>=0;e--)s={value:t[e],next:s};return this.U?(this.size=i,this.ht=s,this.j=void 0,this.Y=!0,this):ks(i,s)},i.prototype.pushAll=function(i){if(0===(i=t(i)).size)return this;if(0===this.size&&Ms(i))return i;oi(i.size);var s=this.size,e=this.ht;return i.C((function(t){s++,e={value:t,next:e}}),!0),this.U?(this.size=s,this.ht=e,this.j=void 0,this.Y=!0,this):ks(s,e)},i.prototype.pop=function(){return this.slice(1)},i.prototype.clear=function(){return 0===this.size?this:this.U?(this.size=0,this.ht=void 0,this.j=void 0,this.Y=!0,this):Ts()},i.prototype.slice=function(i,s){if(x(i,s,this.size))return this;var e=M(i,this.size);if(_(s,this.size)!==this.size)return t.prototype.slice.call(this,i,s);for(var h=this.size-e,r=this.ht;e--;)r=r.next;return this.U?(this.size=h,this.ht=r,this.j=void 0,this.Y=!0,this):ks(h,r)},i.prototype.W=function(t){return t===this.U?this:t?ks(this.size,this.ht,t,this.j):0===this.size?Ts():(this.U=t,this.Y=!1,this)},i.prototype.C=function(t,i){var s=this;if(i)return new nt(this.toArray()).C((function(i,e){return t(i,e,s)}),i);for(var e=0,h=this.ht;h&&!1!==t(h.value,e++,this);)h=h.next;return e},i.prototype.P=function(t,i){if(i)return new nt(this.toArray()).P(t,i);var s=0,e=this.ht;return new $((function(){if(e){var i=e.value;return e=e.next,X(t,s++,i)}return{value:void 0,done:!0}}))},i}(E);_s.isStack=Ms;var ws,Cs=_s.prototype;function ks(t,i,s,e){var h=Object.create(Cs);return h.size=t,h.ht=i,h.U=s,h.j=e,h.Y=!1,h}function Ts(){return ws||(ws=ks(0))}Cs[xs]=!0,Cs.shift=Cs.pop,Cs.unshift=Cs.push,Cs.unshiftAll=Cs.pushAll,Cs.withMutations=Ii,Cs.wasAltered=Bi,Cs.asImmutable=Di,Cs["@@transducer/init"]=Cs.asMutable=Pi,Cs["@@transducer/step"]=function(t,i){return t.unshift(i)},Cs["@@transducer/result"]=function(t){return t.asImmutable()};var Fs="@@__IMMUTABLE_SET__@@";function Is(t){return Boolean(t&&t[Fs])}function Ps(t){return Is(t)&&Y(t)}function Ds(t,i){if(t===i)return!0;if(!T(i)||void 0!==t.size&&void 0!==i.size&&t.size!==i.size||void 0!==t.j&&void 0!==i.j&&t.j!==i.j||I(t)!==I(i)||D(t)!==D(i)||Y(t)!==Y(i))return!1;if(0===t.size&&0===i.size)return!0;var s=!B(t);if(Y(t)){var e=t.entries();return i.every((function(t,i){var h=e.next().value;return h&&mt(h[1],t)&&(s||mt(h[0],i))}))&&e.next().done}var h=!1;if(void 0===t.size)if(void 0===i.size)"function"==typeof t.cacheResult&&t.cacheResult();else{h=!0;var r=t;t=i,i=r}var n=!0,o=i.C((function(i,e){if(s?!t.has(i):h?!mt(i,t.get(e,v)):!mt(t.get(e,v),i))return n=!1,!1}));return n&&t.size===o}function Bs(t,i){var s=function(s){t.prototype[s]=i[s]};return Object.keys(i).forEach(s),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(i).forEach(s),t}function Ls(t){if(!t||"object"!=typeof t)return t;if(!T(t)){if(!ui(t))return t;t=st(t)}if(I(t)){var i={};return t.C((function(t,s){i[s]=Ls(t)})),i}var s=[];return t.C((function(t){s.push(Ls(t))})),s}var Rs=function(t){function i(i){return null==i?Ns():Is(i)&&!Y(i)?i:Ns().withMutations((function(s){var e=t(i);oi(e.size),e.forEach((function(t){return s.add(t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.fromKeys=function(t){return this(R(t).keySeq())},i.intersect=function(t){return(t=L(t).toArray()).length?Os.intersect.apply(i(t.pop()),t):Ns()},i.union=function(t){return(t=L(t).toArray()).length?Os.union.apply(i(t.pop()),t):Ns()},i.prototype.toString=function(){return this.T("Set {","}")},i.prototype.has=function(t){return this.st.has(t)},i.prototype.add=function(t){return zs(this,this.st.set(t,t))},i.prototype.remove=function(t){return zs(this,this.st.remove(t))},i.prototype.clear=function(){return zs(this,this.st.clear())},i.prototype.map=function(t,i){var s=this,e=!1,h=zs(this,this.st.mapEntries((function(h){var r=h[1],n=t.call(i,r,r,s);return n!==r&&(e=!0),[n,n]}),i));return e?h:this},i.prototype.union=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return 0===(i=i.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.U||1!==i.length?this.withMutations((function(s){for(var e=0;e<i.length;e++)t(i[e]).forEach((function(t){return s.add(t)}))})):this.constructor(i[0])},i.prototype.intersect=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(0===i.length)return this;i=i.map((function(i){return t(i)}));var e=[];return this.forEach((function(t){i.every((function(i){return i.includes(t)}))||e.push(t)})),this.withMutations((function(t){e.forEach((function(i){t.remove(i)}))}))},i.prototype.subtract=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(0===i.length)return this;i=i.map((function(i){return t(i)}));var e=[];return this.forEach((function(t){i.some((function(i){return i.includes(t)}))&&e.push(t)})),this.withMutations((function(t){e.forEach((function(i){t.remove(i)}))}))},i.prototype.sort=function(t){return he(Zt(this,t))},i.prototype.sortBy=function(t,i){return he(Zt(this,i,t))},i.prototype.wasAltered=function(){return this.st.wasAltered()},i.prototype.C=function(t,i){var s=this;return this.st.C((function(i){return t(i,i,s)}),i)},i.prototype.P=function(t,i){return this.st.P(t,i)},i.prototype.W=function(t){if(t===this.U)return this;var i=this.st.W(t);return t?this.rt(i,t):0===this.size?this.nt():(this.U=t,this.st=i,this)},i}(O);Rs.isSet=Is;var Es,Os=Rs.prototype;function zs(t,i){return t.U?(t.size=i.size,t.st=i,t):i===t.st?t:0===i.size?t.nt():t.rt(i)}function Vs(t,i){var s=Object.create(Os);return s.size=t?t.size:0,s.st=t,s.U=i,s}function Ns(){return Es||(Es=Vs(ji()))}Os[Fs]=!0,Os.delete=Os.remove,Os.merge=Os.concat=Os.union,Os.withMutations=Ii,Os.asImmutable=Di,Os["@@transducer/init"]=Os.asMutable=Pi,Os["@@transducer/step"]=function(t,i){return t.add(i)},Os["@@transducer/result"]=function(t){return t.asImmutable()},Os.nt=Ns,Os.rt=Vs;var Gs,Us=function(t){function i(t,s,e){if(!(this instanceof i))return new i(t,s,e);if(ni(0!==e,"Cannot step a Range by 0"),t=t||0,void 0===s&&(s=1/0),e=void 0===e?1:Math.abs(e),s<t&&(e=-e),this.ot=t,this.ut=s,this.ct=e,this.size=Math.max(0,Math.ceil((s-t)/e-1)+1),0===this.size){if(Gs)return Gs;Gs=this}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this.ot+"..."+this.ut+(1!==this.ct?" by "+this.ct:"")+" ]"},i.prototype.get=function(t,i){return this.has(t)?this.ot+S(this,t)*this.ct:i},i.prototype.includes=function(t){var i=(t-this.ot)/this.ct;return i>=0&&i<this.size&&i===Math.floor(i)},i.prototype.slice=function(t,s){return x(t,s,this.size)?this:(t=M(t,this.size),(s=_(s,this.size))<=t?new i(0,0):new i(this.get(t,this.ut),this.get(s,this.ut),this.ct))},i.prototype.indexOf=function(t){var i=t-this.ot;if(i%this.ct==0){var s=i/this.ct;if(s>=0&&s<this.size)return s}return-1},i.prototype.lastIndexOf=function(t){return this.indexOf(t)},i.prototype.C=function(t,i){for(var s=this.size,e=this.ct,h=i?this.ot+(s-1)*e:this.ot,r=0;r!==s&&!1!==t(h,i?s-++r:r++,this);)h+=i?-e:e;return r},i.prototype.P=function(t,i){var s=this.size,e=this.ct,h=i?this.ot+(s-1)*e:this.ot,r=0;return new $((function(){if(r===s)return{value:void 0,done:!0};var n=h;return h+=i?-e:e,X(t,i?s-++r:r++,n)}))},i.prototype.equals=function(t){return t instanceof i?this.ot===t.ot&&this.ut===t.ut&&this.ct===t.ct:Ds(this,t)},i}(ht);function Ws(t,i,s){for(var e=ai(i),h=0;h!==e.length;)if((t=di(t,e[h++],v))===v)return s;return t}function Ys(t,i){return Ws(this,t,i)}function Hs(){oi(this.size);var t={};return this.C((function(i,s){t[s]=i})),t}L.isIterable=T,L.isKeyed=I,L.isIndexed=D,L.isAssociative=B,L.isOrdered=Y,L.Iterator=$,Bs(L,{toArray:function(){oi(this.size);var t=new Array(this.size||0),i=I(this),s=0;return this.C((function(e,h){t[s++]=i?[h,e]:e})),t},toIndexedSeq:function(){return new zt(this)},toJS:function(){return Ls(this)},toKeyedSeq:function(){return new Ot(this,!0)},toMap:function(){return Li(this.toKeyedSeq())},toObject:Hs,toOrderedMap:function(){return ms(this.toKeyedSeq())},toOrderedSet:function(){return he(I(this)?this.valueSeq():this)},toSet:function(){return Rs(I(this)?this.valueSeq():this)},toSetSeq:function(){return new Vt(this)},toSeq:function(){return D(this)?this.toIndexedSeq():I(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return _s(I(this)?this.valueSeq():this)},toList:function(){return hs(I(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},T:function(t,i){return 0===this.size?t+i:t+" "+this.toSeq().map(this.dt).join(", ")+" "+i},concat:function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return qt(this,$t(this,t))},includes:function(t){return this.some((function(i){return mt(i,t)}))},entries:function(){return this.P(2)},every:function(t,i){oi(this.size);var s=!0;return this.C((function(e,h,r){if(!t.call(i,e,h,r))return s=!1,!1})),s},filter:function(t,i){return qt(this,Yt(this,t,i,!0))},find:function(t,i,s){var e=this.findEntry(t,i);return e?e[1]:s},forEach:function(t,i){return oi(this.size),this.C(i?t.bind(i):t)},join:function(t){oi(this.size),t=void 0!==t?""+t:",";var i="",s=!0;return this.C((function(e){s?s=!1:i+=t,i+=null!=e?e.toString():""})),i},keys:function(){return this.P(0)},map:function(t,i){return qt(this,Ut(this,t,i))},reduce:function(t,i,s){return Qs(this,t,i,s,arguments.length<2,!1)},reduceRight:function(t,i,s){return Qs(this,t,i,s,arguments.length<2,!0)},reverse:function(){return qt(this,Wt(this,!0))},slice:function(t,i){return qt(this,Ht(this,t,i,!0))},some:function(t,i){return!this.every(qs(t),i)},sort:function(t){return qt(this,Zt(this,t))},values:function(){return this.P(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,i){return p(t?this.toSeq().filter(t,i):this)},countBy:function(t,i){return function(t,i,s){var e=Li().asMutable();return t.C((function(h,r){e.update(i.call(s,h,r,t),0,(function(t){return t+1}))})),e.asImmutable()}(this,t,i)},equals:function(t){return Ds(this,t)},entrySeq:function(){var t=this;if(t.F)return new nt(t.F);var i=t.toSeq().map(Ks).toIndexedSeq();return i.fromEntrySeq=function(){return t.toSeq()},i},filterNot:function(t,i){return this.filter(qs(t),i)},findEntry:function(t,i,s){var e=s;return this.C((function(s,h,r){if(t.call(i,s,h,r))return e=[h,s],!1})),e},findKey:function(t,i){var s=this.findEntry(t,i);return s&&s[0]},findLast:function(t,i,s){return this.toKeyedSeq().reverse().find(t,i,s)},findLastEntry:function(t,i,s){return this.toKeyedSeq().reverse().findEntry(t,i,s)},findLastKey:function(t,i){return this.toKeyedSeq().reverse().findKey(t,i)},first:function(t){return this.find(b,null,t)},flatMap:function(t,i){return qt(this,function(t,i,s){var e=ii(t);return t.toSeq().map((function(h,r){return e(i.call(s,h,r,t))})).flatten(!0)}(this,t,i))},flatten:function(t){return qt(this,Xt(this,t,!0))},fromEntrySeq:function(){return new Nt(this)},get:function(t,i){return this.find((function(i,s){return mt(s,t)}),void 0,i)},getIn:Ys,groupBy:function(t,i){return function(t,i,s){var e=I(t),h=(Y(t)?ms():Li()).asMutable();t.C((function(r,n){h.update(i.call(s,r,n,t),(function(t){return(t=t||[]).push(e?[n,r]:r),t}))}));var r=ii(t);return h.map((function(i){return qt(t,r(i))})).asImmutable()}(this,t,i)},has:function(t){return this.get(t,v)!==v},hasIn:function(t){return Ws(this,t,v)!==v},isSubset:function(t){return t="function"==typeof t.includes?t:L(t),this.every((function(i){return t.includes(i)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:L(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(i){return mt(i,t)}))},keySeq:function(){return this.toSeq().map(Js).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Qt(this,t)},maxBy:function(t,i){return Qt(this,i,t)},min:function(t){return Qt(this,t?te(t):se)},minBy:function(t,i){return Qt(this,i?te(i):se,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,i){return qt(this,jt(this,t,i,!0))},skipUntil:function(t,i){return this.skipWhile(qs(t),i)},sortBy:function(t,i){return qt(this,Zt(this,i,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,i){return qt(this,function(t,i,s){var e=si(t);return e.I=function(e,h){var r=this;if(h)return this.cacheResult().C(e,h);var n=0;return t.C((function(t,h,o){return i.call(s,t,h,o)&&++n&&e(t,h,r)})),n},e.D=function(e,h){var r=this;if(h)return this.cacheResult().P(e,h);var n=t.P(2,h),o=!0;return new $((function(){if(!o)return{value:void 0,done:!0};var t=n.next();if(t.done)return t;var h=t.value,a=h[0],l=h[1];return i.call(s,l,a,r)?2===e?t:X(e,a,l,t):(o=!1,{value:void 0,done:!0})}))},e}(this,t,i))},takeUntil:function(t,i){return this.takeWhile(qs(t),i)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.j||(this.j=function(t){if(t.size===1/0)return 0;var i=Y(t),s=I(t),e=i?1:0;return function(t,i){return i=pt(i,3432918353),i=pt(i<<15|i>>>-15,461845907),i=pt(i<<13|i>>>-13,5),i=pt((i=(i+3864292196|0)^t)^i>>>16,2246822507),St((i=pt(i^i>>>13,3266489909))^i>>>16)}(t.C(s?i?function(t,i){e=31*e+ee(xt(t),xt(i))|0}:function(t,i){e=e+ee(xt(t),xt(i))|0}:i?function(t){e=31*e+xt(t)|0}:function(t){e=e+xt(t)|0}),e)}(this))}});var js=L.prototype;js[k]=!0,js[j]=js.values,js.toJSON=js.toArray,js.dt=ci,js.inspect=js.toSource=function(){return this.toString()},js.chain=js.flatMap,js.contains=js.includes,Bs(R,{flip:function(){return qt(this,Gt(this))},mapEntries:function(t,i){var s=this,e=0;return qt(this,this.toSeq().map((function(h,r){return t.call(i,[r,h],e++,s)})).fromEntrySeq())},mapKeys:function(t,i){var s=this;return qt(this,this.toSeq().flip().map((function(e,h){return t.call(i,e,h,s)})).flip())}});var $s=R.prototype;$s[F]=!0,$s[j]=js.entries,$s.toJSON=Hs,$s.dt=function(t,i){return ci(i)+": "+ci(t)},Bs(E,{toKeyedSeq:function(){return new Ot(this,!1)},filter:function(t,i){return qt(this,Yt(this,t,i,!1))},findIndex:function(t,i){var s=this.findEntry(t,i);return s?s[0]:-1},indexOf:function(t){var i=this.keyOf(t);return void 0===i?-1:i},lastIndexOf:function(t){var i=this.lastKeyOf(t);return void 0===i?-1:i},reverse:function(){return qt(this,Wt(this,!1))},slice:function(t,i){return qt(this,Ht(this,t,i,!1))},splice:function(t,i){var s=arguments.length;if(i=Math.max(i||0,0),0===s||2===s&&!i)return this;t=M(t,t<0?this.count():this.size);var e=this.slice(0,t);return qt(this,1===s?e:e.concat(ri(arguments,2),this.slice(t+i)))},findLastIndex:function(t,i){var s=this.findLastEntry(t,i);return s?s[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return qt(this,Xt(this,t,!1))},get:function(t,i){return(t=S(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?i:this.find((function(i,s){return s===t}),void 0,i)},has:function(t){return(t=S(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return qt(this,function(t,i){var s=si(t);return s.size=t.size&&2*t.size-1,s.I=function(s,e){var h=this,r=0;return t.C((function(t){return(!r||!1!==s(i,r++,h))&&!1!==s(t,r++,h)}),e),r},s.D=function(s,e){var h,r=t.P(1,e),n=0;return new $((function(){return(!h||n%2)&&(h=r.next()).done?h:n%2?X(s,n++,i):X(s,n++,h.value,h)}))},s}(this,t))},interleave:function(){var t=[this].concat(ri(arguments)),i=Kt(this.toSeq(),ht.of,t),s=i.flatten(!0);return i.size&&(s.size=i.size*t.length),qt(this,s)},keySeq:function(){return Us(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,i){return qt(this,jt(this,t,i,!1))},zip:function(){var t=[this].concat(ri(arguments));return qt(this,Kt(this,ie,t))},zipAll:function(){var t=[this].concat(ri(arguments));return qt(this,Kt(this,ie,t,!0))},zipWith:function(t){var i=ri(arguments);return i[0]=this,qt(this,Kt(this,t,i))}});var Xs=E.prototype;Xs[P]=!0,Xs[W]=!0,Bs(O,{get:function(t,i){return this.has(t)?t:i},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var Zs=O.prototype;function Qs(t,i,s,e,h,r){return oi(t.size),t.C((function(t,r,n){h?(h=!1,s=t):s=i.call(e,s,t,r,n)}),r),s}function Js(t,i){return i}function Ks(t,i){return[i,t]}function qs(t){return function(){return!t.apply(this,arguments)}}function te(t){return function(){return-t.apply(this,arguments)}}function ie(){return ri(arguments)}function se(t,i){return t<i?1:t>i?-1:0}function ee(t,i){return t^i+2654435769+(t<<6)+(t>>2)|0}Zs.has=js.includes,Zs.contains=Zs.includes,Zs.keys=Zs.values,Bs(et,$s),Bs(ht,Xs),Bs(rt,Zs);var he=function(t){function i(t){return null==t?ae():Ps(t)?t:ae().withMutations((function(i){var s=O(t);oi(s.size),s.forEach((function(t){return i.add(t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.fromKeys=function(t){return this(R(t).keySeq())},i.prototype.toString=function(){return this.T("OrderedSet {","}")},i}(Rs);he.isOrderedSet=Ps;var re,ne=he.prototype;function oe(t,i){var s=Object.create(ne);return s.size=t?t.size:0,s.st=t,s.U=i,s}function ae(){return re||(re=oe(Ss()))}ne[W]=!0,ne.zip=Xs.zip,ne.zipWith=Xs.zipWith,ne.zipAll=Xs.zipAll,ne.nt=ae,ne.rt=oe;var le=function(t,i){var s;!function(t){if(G(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(U(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===t||"object"!=typeof t)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(t);var e=function(r){var n=this;if(r instanceof e)return r;if(!(this instanceof e))return new e(r);if(!s){s=!0;var o=Object.keys(t),a=h.ft={};h.At=i,h.O=o,h.vt=t;for(var l=0;l<o.length;l++){var u=o[l];a[u]=l,h[u]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+de(this)+' with property "'+u+'" since that property name is part of the Record API.'):Ae(h,u)}}return this.U=void 0,this.yt=hs().withMutations((function(t){t.setSize(n.O.length),R(r).forEach((function(i,s){t.set(n.ft[s],i===n.vt[s]?void 0:i)}))})),this},h=e.prototype=Object.create(ue);return h.constructor=e,i&&(e.displayName=i),e};le.prototype.toString=function(){for(var t,i=de(this)+" { ",s=this.O,e=0,h=s.length;e!==h;e++)i+=(e?", ":"")+(t=s[e])+": "+ci(this.get(t));return i+" }"},le.prototype.equals=function(t){return this===t||t&&fe(this).equals(fe(t))},le.prototype.hashCode=function(){return fe(this).hashCode()},le.prototype.has=function(t){return this.ft.hasOwnProperty(t)},le.prototype.get=function(t,i){if(!this.has(t))return i;var s=this.ft[t],e=this.yt.get(s);return void 0===e?this.vt[t]:e},le.prototype.set=function(t,i){if(this.has(t)){var s=this.yt.set(this.ft[t],i===this.vt[t]?void 0:i);if(s!==this.yt&&!this.U)return ce(this,s)}return this},le.prototype.remove=function(t){return this.set(t)},le.prototype.clear=function(){var t=this.yt.clear().setSize(this.O.length);return this.U?this:ce(this,t)},le.prototype.wasAltered=function(){return this.yt.wasAltered()},le.prototype.toSeq=function(){return fe(this)},le.prototype.toJS=function(){return Ls(this)},le.prototype.entries=function(){return this.P(2)},le.prototype.P=function(t,i){return fe(this).P(t,i)},le.prototype.C=function(t,i){return fe(this).C(t,i)},le.prototype.W=function(t){if(t===this.U)return this;var i=this.yt.W(t);return t?ce(this,i,t):(this.U=t,this.yt=i,this)},le.isRecord=G,le.getDescriptiveName=de;var ue=le.prototype;function ce(t,i,s){var e=Object.create(Object.getPrototypeOf(t));return e.yt=i,e.U=s,e}function de(t){return t.constructor.displayName||t.constructor.name||"Record"}function fe(t){return ct(t.O.map((function(i){return[i,t.get(i)]})))}function Ae(t,i){try{Object.defineProperty(t,i,{get:function(){return this.get(i)},set:function(t){ni(this.U,"Cannot set on an immutable record."),this.set(i,t)}})}catch(t){}}ue[N]=!0,ue.delete=ue.remove,ue.deleteIn=ue.removeIn=yi,ue.getIn=Ys,ue.hasIn=js.hasIn,ue.merge=bi,ue.mergeWith=xi,ue.mergeIn=Ti,ue.mergeDeep=Ci,ue.mergeDeepWith=ki,ue.mergeDeepIn=Fi,ue.setIn=vi,ue.update=pi,ue.updateIn=Si,ue.withMutations=Ii,ue.asMutable=Pi,ue.asImmutable=Di,ue[j]=ue.entries,ue.toJSON=ue.toObject=js.toObject,ue.inspect=ue.toSource=function(){return this.toString()};const ge=le({type:"color",r:1,g:1,b:1,a:1});class ve extends ge{constructor(t){super(t)}toUint32(){return void 0!==this.St||(this.St=we(this.getR(),this.getG(),this.getB(),this.getA())),this.St}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.bt||(this.bt=new ve({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.bt}getLighter(){return this.xt||(this.xt=new ve({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.xt}getDarker(){return this.Mt||(this.Mt=new ve({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.Mt}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const ye=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),me=(t,i,s,e=255)=>new ve({r:t/255,g:i/255,b:s/255,a:e/255}),pe=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new ve({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new ve({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new ve({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new ve({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},Se=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),u=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=u,r=a;break;case 1:e=l,h=s,r=a;break;case 2:e=a,h=s,r=u;break;case 3:e=a,h=l,r=s;break;case 4:e=u,h=a,r=s;break;default:e=s,h=a,r=l}return new ve({r:e,g:h,b:r})},be=t=>me(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),xe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Me=new ve({}),_e=me(0,0,0,0),we=(t,i,s,e=255)=>(e<<24|s<<16|i<<8|t)>>>0,Ce=(t,i)=>t.value-i.value,ke=le({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:me(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),Te=t=>{const{steps:i}=t,s=i.length;i.sort(Ce);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class Fe extends ke{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,Te(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(Te({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const i=t,s=i.length,e=i[0].length,h=[...Array(s)].map((()=>Array(e)));for(let t=0;t<s;t+=1)for(let s=0;s<e;s+=1)h[t][s]=this._t(i[t][s]);return h}const i=t,s=i.length,e=Array(s);for(let t=0;t<s;t+=1)e[t]=this._t(i[t]);return e}return this._t(t)}_t(t){const{steps:i}=this,s=i.length;if(0===s)return this.getFallbackColor();if(1===s)return i[0].color||this.color;if(this.interpolate){for(let n=0;n<s-1;n+=1){const s=i[n],o=i[n+1],a=Math.min(s.value,o.value),l=Math.max(s.value,o.value);if(t>=a&&t<=l){if(a===l)return s.color;const i=(t-s.value)/(o.value-s.value);return e=s.color,h=o.color,r=i,new ve({r:e.r+(h.r-e.r)*r,g:e.g+(h.g-e.g)*r,b:e.b+(h.b-e.b)*r,a:e.a+(h.a-e.a)*r})}}return t<i[0].value?i[0].color:i[s-1].color}var e,h,r;for(let e=s-1;e>=0;e-=1)if(t>=i[e].value)return i[e].color;return i[0].color}}const Ie=le({type:"fillstyle",fillType:"empty"});class Pe extends Ie{toString(){return"emptyFill"}}const De=new Pe,Be=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),Le=le({type:"fillstyle",fillType:"solid",color:me(255,255,255)});class Re extends Le{}class Ee extends Re{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return ye(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const Oe=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class ze extends Re{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return ye(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const Ve=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),Ne=le({type:"fillstyle",fillType:"palette",lut:new Fe({steps:[]}),lookUpProperty:"value"}),Ge=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType);var Ue=function(t,i){return Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},Ue(t,i)};function We(t){var i="function"==typeof Symbol&&Symbol.iterator,s=i&&t[i],e=0;if(s)return s.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ye(t,i){var s="function"==typeof Symbol&&t[Symbol.iterator];if(!s)return t;var e,h,r=s.call(t),n=[];try{for(;(void 0===i||i-- >0)&&!(e=r.next()).done;)n.push(e.value)}catch(t){h={error:t}}finally{try{e&&!e.done&&(s=r.return)&&s.call(r)}finally{if(h)throw h.error}}return n}function He(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(Ye(arguments[i]));return t}var je=function(t){function i(s){var e,h="EventError: "+s+"}";return e=t.call(this,h)||this,Object.setPrototypeOf(e,i.prototype),e}return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=t}Ue(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}(i,t),i}(Error),$e=0,Xe=function(t,i){return new je("Event listener with "+t.token+" id does not exist at Eventer with "+i+" id.")},Ze=function(){function t(){this.id=++$e,this.lastEventIndex=0,this.topics=new Map}return t.prototype.on=function(t,i,s){var e,h,r=this.topics.get(t),n=s||{token:(e=this.id)+"-"+(h=++this.lastEventIndex),ownerIndex:e,id:h};return r?r.set(n,i):this.topics.set(t,new Map([[n,i]])),n},t.prototype.has=function(t,i){var s,e;if(i)return(n=this.topics.get(i))?(o=n.get(t))||Xe(t,this.id):new je("Eventer with "+t.ownerIndex+" does not have "+i+".");try{for(var h=We(this.topics),r=h.next();!r.done;r=h.next()){var n,o,a=Ye(r.value,2);if(a[0],o=(n=a[1]).get(t))return o}}catch(t){s={error:t}}finally{try{r&&!r.done&&(e=h.return)&&e.call(h)}finally{if(s)throw s.error}}return Xe(t,this.id)},t.prototype.off=function(t,i){var s,e;if(i)return!(!(n=this.topics.get(i))||!n.delete(t));try{for(var h=We(this.topics),r=h.next();!r.done;r=h.next()){var n,o=Ye(r.value,2);if(o[0],(n=o[1]).delete(t))return!0}}catch(t){s={error:t}}finally{try{r&&!r.done&&(e=h.return)&&e.call(h)}finally{if(s)throw s.error}}return!1},t.prototype.allOff=function(){return this.topics.clear(),this},t.prototype.topicOff=function(t){return this.topics.delete(t)},t.prototype.emit=function(t){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];var e=this.topics.get(t),h=0;if(e){var r=new Map(e);r.forEach((function(t){t.apply(void 0,He(i)),h++}))}return h},t.prototype.listeners=function(t){return this.topics.get(t)||new Map},t}();const Qe={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=rr(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class Je{constructor(t,i,s,e=Qe.linear,h){this.delta=0,this.nextAnimations=new Array,this.wt=!1,this.easing=Qe.linear,this.Ct=new Ze,this.isOver=()=>(this.delta===this.duration||this.wt)&&0===this.nextAnimations.length,this.values=t,this.action=i,this.duration=s,this.easing=e,this.kt=h,this.eases=t.map((([t,i])=>e(t,i,s)))}Tt(){this.Ct.emit("start")}start(){return this.kt.includes(this)||this.kt.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new Je(t,i,s,e,this.kt);return this.nextAnimations.push(h),h}onAnimationStart(t,i){return this.Ct.on("start",t,i)}onAnimationEnd(t,i){return this.Ct.on("end",t,i)}onEveryAnimationEnd(t,i){return this.Ct.on("everyEnd",t,i)}onAllAnimationEnd(t,i){return this.Ct.on("allEnd",t,i)}allOffAnimationEnd(){return this.Ct.topicOff("end"),this}allOffEveryAnimationEnd(){return this.Ct.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.Ct.topicOff("allEnd"),this}offAnimationEnd(t){return this.Ct.off(t,"end")}offEveryAnimationEnd(t){return this.Ct.off(t,"everyEnd")}offAllAnimationEnd(t){return this.Ct.off(t,"allEnd")}finish(t=!0){if(this.wt=!0,this.kt.splice(this.kt.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&(this.Ct.listeners("allEnd").forEach(((t,s)=>i.onAllAnimationEnd(t,s))),this.Ct.listeners("everyEnd").forEach(((t,s)=>i.onEveryAnimationEnd(t,s)))),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.Ct.emit("end",i),this.Ct.emit("everyEnd",i)),i}t&&(this.Ct.emit("end",void 0),this.Ct.emit("everyEnd",void 0),this.Ct.emit("allEnd"))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(Fh):this.values.map(Fh)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}}const Ke=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.Tt(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=Ch.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=Qe.linear)=>(h,r,o=t)=>{const a=new Je(h,r,o,i,s).start();return e||(e=Ch.requestAnimationFrame(n)),a}};var qe,th;t.GradientShape=void 0,(qe=t.GradientShape||(t.GradientShape={})).circle="circle",qe.ellipse="ellipse",t.GradientExtent=void 0,(th=t.GradientExtent||(t.GradientExtent={})).closestSide="closest-side",th.closestCorner="closest-corner",th.farthestSide="farthest-side",th.farthestCorner="farthest-corner";const ih=le({type:"fillstyle",fillType:"radial-gradient",stops:[{color:pe("#f00"),offset:0},{color:pe("#0f0"),offset:1}],position:e(.5,.5),shape:t.GradientShape.ellipse,extent:t.GradientExtent.farthestCorner});class sh extends ih{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const eh=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),hh=le({type:"fillstyle",fillType:"linear-gradient",stops:[{color:pe("#f00"),offset:0},{color:pe("#0f0"),offset:1}],angle:0});class rh extends hh{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?Sn(t):t)}getAngle(t){return t?pn(this.get("angle")):this.get("angle")}}const nh=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType),oh=le({type:"linestyle",lineType:"empty"}),ah=new class extends oh{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}Ft(){return 0}setFillStyle(t){return this}getFillStyle(){return De}},lh=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType);class uh{constructor(t,i,s,e){this.cellIndex=t,this.cellSpan=i,this.cellsAmount=s,this.observedAmount=e,this.x=new ch,this.y=new ch,this.z=new ch,this.Ct=new Ze;const h={...t},r={...i};if(e){const t=t=>{this.cellsAmount.x=t.reduce(jr,0),this.cellIndex.x=t.reduce(((t,i,s)=>s>=h.x?t:t+i),0),this.cellSpan.x=t.reduce(((t,i,s)=>s>=h.x&&s<h.x+r.x?t+i:t),0),this.Ct.emit("cell-resize")},i=e.x.It(t);t(e.x._());const s=t=>{this.cellsAmount.y=t.reduce(jr,0),this.cellIndex.y=t.reduce(((t,i,s)=>s>=h.y?t:t+i),0),this.cellSpan.y=t.reduce(((t,i,s)=>s>=h.y&&s<h.y+r.y?t+i:t),0),this.Ct.emit("cell-resize")},n=e.y.It(s);s(e.y._()),this.Pt=()=>{e.x.Dt(i),e.y.Dt(n)}}}Bt(){return this.Pt&&(this.Pt(),this.Pt=void 0),this}Lt(t){return this.Ct.on("cell-resize",t)}Rt(t){return this.Ct.off(t,"cell-resize")}}class ch extends i{constructor(){super(...arguments),this.Et=0,this.Ot=10,this.zt=1}Vt(){return this.o=!1,this}Nt(){return this.o=!0,this}getInnerStart(){return this.Et}getInnerEnd(){return this.Ot}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}Gt(t,i){return this.Et=t,this.Ot=i,this.Ut(),this}Wt(t){return this.zt=t,this.Ut(),this}Yt(t){return t/this.zt}Ut(){const t=this.Yt(this.Ot-this.Et),i=this.zt;void 0!==this.Ht&&!1!==Dh(t,this.Ht)||(this.o=!0,this.jt=i,this.Ht=t)}$t(){return this.Ht}Xt(){return this.jt}Zt(){return this.Ot<this.Et}Qt(t,i){return!0}}const dh={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).Jt({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new uh({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},fh=(t,i,s)=>i===s?t:s.Kt(i.qt(t)),Ah=(t,i,s)=>{if(i===s)return t;const e=i instanceof Vn?i.x:i.x instanceof Vn?i.x.x:i.x.ti,h=i instanceof Vn?i.y:i.y instanceof Vn?i.y.y:i.y.ti,r=s instanceof Vn?s.x:s.x instanceof Vn?s.x.x:s.x.ti,n=s instanceof Vn?s.y:s.y instanceof Vn?s.y.y:s.y.ti;return{...t,x:fh(t.x,e,r),y:fh(t.y,h,n)}},gh=(t,i,s)=>{if("axes"===i.id&&"world"===s.id)return i.chart.si.ii(t);if("world"===i.id&&"axes"===s.id)return i.chart.si.ei(t);if(i.id===s.id)return t;throw new Error("LC JS translatePoint3D misusage | originCoordinateSystem and targetCoordinateSystem arguments must be either Chart3D.coordsWorld or Chart3D.coordsAxis")},vh=(...t)=>{if(0===t.length)return{remove:Ph};let i=!1;const s=t.map((s=>s.onIntervalChange(((e,h,r)=>((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.hi(e,h,!1,s.getStopped(),"synchronizedAxis"))),i=!1)})(s,h,r)))));let e=!1;const h=t.map((i=>i.onStoppedStateChanged(((s,h)=>((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,h)))));return{remove:()=>{t.forEach(((t,i)=>{t.offIntervalChange(s[i]),t.offStoppedStateChanged(h[i])}))}}},yh=-34028234663852886e22,mh="-340282346638528859811704183484516925440.0";class ph extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,ph.prototype)}}class Sh extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&Ch.alert(e),Object.setPrototypeOf(this,Sh.prototype)}}class bh extends Sh{constructor(t){super(t),Object.setPrototypeOf(this,bh.prototype)}}var xh,Mh,_h,wh;t.UISpace=void 0,(xh=t.UISpace||(t.UISpace={}))[xh.Content=0]="Content",xh[xh.PaddedContent=1]="PaddedContent",xh[xh.PaddedBackground=2]="PaddedBackground",xh[xh.Everything=3]="Everything",t.UIVisibilityModes=void 0,(Mh=t.UIVisibilityModes||(t.UIVisibilityModes={}))[Mh.never=0]="never",Mh[Mh.always=1]="always",Mh[Mh.whenHovered=2]="whenHovered",Mh[Mh.whenDragged=3]="whenDragged",Mh[Mh.whenNotDragged=4]="whenNotDragged",Mh[Mh.whenHoveredOrDragged=5]="whenHoveredOrDragged",t.UIDraggingModes=void 0,(_h=t.UIDraggingModes||(t.UIDraggingModes={}))[_h.notDraggable=0]="notDraggable",_h[_h.draggable=1]="draggable",_h[_h.onlyHorizontal=2]="onlyHorizontal",_h[_h.onlyVertical=3]="onlyVertical",t.UIDirections=void 0,(wh=t.UIDirections||(t.UIDirections={}))[wh.Up=0]="Up",wh[wh.Right=1]="Right",wh[wh.Down=2]="Down",wh[wh.Left=3]="Left";const Ch="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},kh=(t,i)=>t.x===i.x&&t.y===i.y,Th=t=>t!==Or&&t!==zr&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,Fh=t=>t[1],Ih=t=>t.dispose(),Ph=()=>{},Dh=(t,i)=>t===i,Bh=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Lh=t=>Array.prototype.concat.apply([],t),Rh=(t,i)=>void 0!==t?t:i,Eh=t=>t.ri(),Oh=t=>t.ni(),zh=t=>t.oi(),Vh=t=>t.ai(),Nh=t=>t.min.x,Gh=t=>t.max.x,Uh=t=>t.min.y,Wh=t=>t.max.y,Yh=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},Hh=(t,i)=>t.position===i.position&&t.high===i.high&&t.low===i.low,jh=e(0,1),$h=e(1,0),Xh=e(0,-1),Zh=e(-1,0),Qh=e(0,0),Jh=i=>{switch(i){case t.UIDirections.Up:return jh;case t.UIDirections.Right:return $h;case t.UIDirections.Down:return Xh;case t.UIDirections.Left:return Zh;default:return Qh}},Kh=i=>i===t.UIDirections.Left||i===t.UIDirections.Right,qh=t=>{t.stopPropagation(),t.preventDefault()},tr=(t,i)=>{if(!i)return t;const s=t.length,e=new Float32Array(2*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s);e[h+0]=r,e[h+1]=s-r,h+=2}return e},ir=(t,i)=>{if(!i){const i=t.length,s=new Float32Array(2*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,e+=2}return s}const s=t.length,e=new Float32Array(4*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,h+=4}return e},sr=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},er=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},hr=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},rr=t=>{const i=Math.log(t);return t=>Math.log(t)/i},nr=rr(Math.E),or=(t,i)=>{const s=i[t];return s?s():void 0},ar=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>bn(dn(t,s))-bn(dn(i,s))))},lr=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},ur=(t,i,s)=>s<0?t:s>1?i:me(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),t.getA()+s*(i.getA()-t.getA())),cr=t=>255===t.getA()?t:t.setA(255),dr=(()=>{const i=me(0,0,0);return s=>(s=cr(s),new sh({shape:t.GradientShape.circle,extent:t.GradientExtent.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:s},{offset:1,color:ur(s,i,.5)}]}))})(),fr=(()=>{const t=t=>{var i;if(t){if(Oe(t)){if(0===t.getColor().getA())return;return t.getColor()}if(eh(t)||nh(t)){const s=t.getColorStops();return 3===s.length?s[1].color:null===(i=s[0])||void 0===i?void 0:i.color}Ge(t)}};return(i,s,e,h)=>{const r=[];if(h.fill&&r.push(h.fill),h.fill2&&r.push(h.fill2),h.stroke){const t=h.stroke.getFillStyle();t!==De&&r.push(t)}if(h.point3D){const t=h.point3D;r.push(t.getFillStyle())}let n;if(h.behavior&&!0===h.behavior.colorStep){const[i,e]=r.reduce(((i,s)=>{if(i[0]&&i[1])return i;const e=t(s);return e&&(void 0===i[0]?i[0]=e:i[1]=e),i}),[void 0,void 0]);n=i&&e?(o=i)===(a=e)||o.getR()===a.getR()&&o.getG()===a.getG()&&o.getB()===a.getB()?dr(o):(o=cr(o),a=cr(a),new rh({angle:0,stops:[{offset:0,color:a},{offset:.5,color:a},{offset:.5,color:o},{offset:1,color:o}]})):s.uiButtonFillStyle}else{const i=r.reduce(((i,s)=>i||t(s)),void 0);n=i?e?new Ee({color:i}):dr(i):s.uiButtonFillStyle}var o,a;i.setButtonOnFillStyle(n)}})(),Ar=t=>{const i=t;if(Ge(i))return{lut:i.getPalette(),lookUpProperty:i.getLookUpProperty()}},gr=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},vr=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},yr=(t,i)=>"function"==typeof t?t(i):t,mr=t=>t.ctrlKey?Math.sign(t.deltaY)*Math.min(.05*Math.abs(t.deltaY),1):Math.sign(t.deltaY),pr=(t,i)=>i(),Sr=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new Ee({color:me(255,255,255,1)});const br=t=>t===Vr||t.min.x===Vr.min.x&&t.max.x===Vr.max.x&&t.min.y===Vr.min.y&&t.max.y===Vr.max.y,xr=t=>Array.from(new Set(t)),Mr=t=>t.filter((t=>void 0!==t)),_r=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,wr=(t,i,s)=>{i.length<=0||(t.setText(s.label).setOn(i[0].getVisible()),s.style&&t.setButtonOnFillStyle(s.style),s.toggleVisibilityOnClick&&t.onSwitch(((t,s)=>i.forEach((t=>t.setVisible(s))))),t.onMouseEnter((()=>i.forEach((t=>t.setHighlight(!0))))),t.onMouseLeave((()=>i.forEach((t=>t.setHighlight(!1))))),i.forEach((i=>i.onMouseEnter((()=>t.setHighlight(!0))))),i.forEach((i=>i.onMouseLeave((()=>t.setHighlight(!1))))),i.forEach((i=>i.onTouchStart((()=>t.setHighlight(!0))))),i.forEach((i=>i.onTouchEnd((()=>t.setHighlight(!1))))))},Cr=(t,i)=>{throw new Error(i)},kr=()=>{const t=Ke((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||Qe.ease,l=(null==r?void 0:r.durationMs)||1e3;let u;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else u=t(l,a)([[s,e]],(([t])=>{h(t)})),i=u;u.onAnimationEnd((()=>{i=void 0})),n&&u.onAnimationStart(n),o&&u.onAnimationEnd(o)}},Tr=t=>{let i;return()=>i||(i=t(),i)},Fr=t=>{if(t===ah)return 0;const i=t.getThickness();return i<0?1:1*i},Ir=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(e.shouldCrash)throw Ch.alert(h),new Error(h);Ch.console.warn(h)},Pr=(t,i,s,e=0)=>{if(t<s(e)||s(i)<t)return;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e},Dr=()=>{const t=new Map;return{V:i=>(i.setMouseEnterEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.li(i,s,e)})),i.setMouseLeaveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.ui(i,s,e)})),i.setMouseClickEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.ci(i,s,e)})),i.setMouseDoubleClickEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.di(i,s,e)})),i.setMouseDownEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.fi(i,s,e)})),i.setMouseUpEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Ai(i,s,e)})),i.setMouseMoveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.gi(i,s,e)})),i.setMouseDragEventHandler(((i,s,e,h,r,n)=>{const o=n&&t.get(n);o&&o.vi(i,s,e,h,r,n)})),i.setMouseDragStartEventHandler(((i,s,e,h)=>{const r=h&&t.get(h);r&&r.yi(i,s,e,h)})),i.setMouseDragStopEventHandler(((i,s,e,h,r)=>{const n=r&&t.get(r);n&&n.mi(i,s,e,h,r)})),i.setMouseWheelEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.pi(i,s,e)})),i.setTouchStartEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Si(i,s,e)})),i.setTouchMoveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.bi(i,s,e)})),i.setTouchEndEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.xi(i,s,e)})),i),Mi:(i,s)=>{t.set(i,s)},_i:()=>{t.clear()}}},Br={left:0,right:0,top:0,bottom:0},Lr=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),Rr=(t,i,s)=>{i&&i.wi();const e=s();return{Ci:t,wi:()=>{e.forEach((i=>t.ki(i)))}}},Er={add:(t,i)=>n(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>n(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>n(t.x*i,t.y*i,t.z*i),divide:(t,i)=>n(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>Er.divide(t,Er.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>n(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(Er.dot(t,i)/(Er.length(t)*Er.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=Er.dot(i,t),n=Er.cross(i,t);return Er.addVec(Er.multiply(t,e),Er.addVec(Er.multiply(i,(1-e)*r),Er.multiply(n,h)))},lerp:(t,i,s)=>(s=Bh(s,0,1),Er.addVec(Er.multiply(t,1-s),Er.multiply(i,s))),equals:(t,i)=>Dh(t.x,i.x)&&Dh(t.y,i.y)&&Dh(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},Or=Number.MAX_SAFE_INTEGER,zr=-Number.MAX_SAFE_INTEGER,Vr=a(e(Or,Or),e(zr,zr)),Nr=a(n(Or,Or,Or),n(zr,zr,zr)),Gr=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},Ur=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),Wr=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),Yr=(t,i)=>a(e(Math.max(Math.min(t[0].x,t[2].x),Math.min(i[0].x,i[2].x)),Math.max(Math.min(t[0].y,t[2].y),Math.min(i[0].y,i[2].y))),e(Math.min(Math.max(t[0].x,t[2].x),Math.max(i[0].x,i[2].x)),Math.min(Math.max(t[0].y,t[2].y),Math.max(i[0].y,i[2].y)))),Hr=t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(Ur(t[s],t[e]))return!0;return!1},jr=(t,i)=>i+t,$r=(t,i,s)=>{const h=dn(i,t),r=h.x*h.x+h.y*h.y;if(0===r)return t;const n=dn(s,t),o=(n.x*h.x+n.y*h.y)/r;return o<=0?t:o>=1?i:e(t.x+o*h.x,t.y+o*h.y)},Xr=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,Zr=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},Qr=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},Jr=(t,i,s)=>cn(t,un(dn(i,t),s)),Kr=(t,i,s)=>Er.addVec(t,Er.multiply(Er.subtractVec(i,t),s));function qr(t){const i=t.length;if(i>0){let s=t[0].x,h=t[0].x,r=t[0].y,n=t[0].y;for(let e=0;e<i;e+=1){const i=t[e];i.x>s&&(s=i.x),i.x<h&&(h=i.x),i.y>r&&(r=i.y),i.y<n&&(n=i.y)}return a(e(h,n),e(s,r))}return Vr}function tn(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,o=t[0].z,l=t[0].z;for(let n=0;n<i;n+=1){const i=t[n];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>o&&(o=i.z),i.z<l&&(l=i.z)}return a(n(e,r,l),n(s,h,o))}return Nr}const sn=(...t)=>{const i={min:{x:Or,y:Or},max:{x:zr,y:zr}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},en=(t,i)=>a(n(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),n(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function hn(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,l=(e.y-i.y)*h+(i.x-e.x)*r,u=o*(i.x-e.x)+n*(i.y-e.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}function rn(t,i,s){return e(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function nn(t,i){return e(t.x-i.x,t.y-i.y)}function on(t){const i=ln(t);return 0===i?e(0,0):e(t.x/i,t.y/i)}function an(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=on(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function ln(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function un(t,i){return e(t.x*i,t.y*i)}function cn(t,i){return e(t.x+i.x,t.y+i.y)}function dn(t,i){return e(t.x-i.x,t.y-i.y)}function fn(t,i){return e(t.x*i.x,t.y*i.y)}function An(t,i){return e(t.x/i.x,t.y/i.y)}function gn(t){return un(t,-1)}function vn(t,i){return t.x*i.x+t.y*i.y}const yn=(t,i,s)=>{const h=(s.y-i.y)/(s.x-i.x),r=i.y+(t-i.x)*h;return e(t,r)},mn=(t,i,s)=>{const h=(s.y-i.y)/(s.x-i.x),r=i.x+(t-i.y)/h;return e(r,t)};function pn(t){return t*Math.PI/180}function Sn(t){return 180*t/Math.PI}function bn(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function xn(t){return e(Math.cos(t),Math.sin(t))}function Mn(t){let i=-1;const s=Math.cos(t),e=Math.sin(t);return s>0&&s<1&&e>0&&e<1?i=1:s<0&&s>-1&&e>0&&e<1?i=2:s<0&&s>-1&&e<0&&e>-1?i=3:s>0&&s<1&&e<0&&e>-1&&(i=4),i}const _n=(t,i,s,h)=>{let r,n,o,a;if(i.x-t.x!=0||h.x-s.x!=0)return i.x-t.x==0?(o=i.x,n=(h.y-s.y)/(h.x-s.x),a=n*(o-s.x)+s.y):h.x-s.x==0?(o=h.x,r=(i.y-t.y)/(i.x-t.x),a=r*(o-t.x)+t.y):(r=(i.y-t.y)/(i.x-t.x),n=(h.y-s.y)/(h.x-s.x),o=(s.y-n*s.x+r*t.x-t.y)/(r-n),a=r*(o-t.x)+t.y),e(o,a)},wn=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class Cn{constructor(){this.Ti=!0}getInnerStart(){return this.Et}getInnerEnd(){return this.Ot}getInnerInterval(){return Math.abs(this.Ot-this.Et)}Gt(t,i){return this.Ti=t!==this.Et||i!==this.Ot,this.Et=t,this.Ot=i,this}Vt(){return this.Ti=!1,this}Nt(){return this.Ti=!0,this}}class kn extends Cn{constructor(t,i,s,e){if(super(),this.Fi=!0,this.Ii=!0,this.Pi=[0,0],this.Di=!0,this.Bi=t,this.Li=i,this.Ri=s,this.Ei=t,this.Oi=i,e){const t=e.It(this.zi.bind(this));this.zi(e._()),this.Vi=()=>e.Dt(t)}}Wt(t){return this.zt=t,this.Ii=!0,this}Ni(t){return this.Pi=t.map(Math.abs),this.Di=!0,this}Gi(){return this.Bi/this.Ri*this.zt+this.Pi[0]}Ui(){return(this.Bi+this.Li)/this.Ri*this.zt-this.Pi[1]}Wi(){return this.getCellSize()-this.Yi()}Hi(){return this.zt}getCellSize(){return this.ji(this.zt)}Yi(){return this.Pi[0]+this.Pi[1]}$i(){return this.Pi}zi(t){this.Ri=t.reduce(jr,0),this.Bi=t.reduce(((t,i,s)=>s>=this.Ei?t:t+i),0),this.Li=t.reduce(((t,i,s)=>s>=this.Ei&&s<this.Ei+this.Oi?t+i:t),0),this.Fi=!0,this.Xi()}ji(t){return t*this.Li/this.Ri}Vt(){return super.Vt(),this.Ii=!1,this.Di=!1,this.Fi=!1,this}Nt(){return super.Nt(),this.Ii=!0,this.Di=!0,this.Fi=!0,this}}class Tn extends kn{constructor(t,i,s,e){super(t,i,s,e),this.Zi={internal:10,function:Fn(10),number:10},this.zt=1e3,this.Gt(1,1e3),this.Qi=this.Ji()}Qt(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<Pn,n=Math.max(t,i)>Dn;return!r&&!n||!!h&&(i>t?{start:r?Pn:t,end:n?Dn:i}:{start:n?Dn:t,end:r?Pn:i})}qt(t){const i=this.Gi(),s=this.Ui(),e=Math.max(t,Pn);return i+(this.Zi.function(e)-this.Qi.scaleStartLog)/this.Qi.scaleIntervalLog*(s-i)}Kt(t){const i=this.Gi(),s=(t-i)/(this.Ui()-i),e=this.Qi.scaleStartLog+s*this.Qi.scaleIntervalLog;return this.Zi.number**e}Xi(){this.Zi&&this.Ji()}Gt(t,i){return super.Gt(t,i),this.Zi&&this.Ji(),this}Ni(t){return super.Ni(t),this.Zi&&this.Ji(),this}Wt(t){return super.Wt(t),this.Zi&&this.Ji(),this}Ki(t){return this.Zi={internal:t,function:Fn(t),number:In(t)},this}qi(){return this.Zi.internal}ts(t,i){const s=this.qt(t)+i;return this.Kt(s)}ss(){return this.Ii||this.Ti||this.Di||this.Fi}Ji(){const t=this.Zi.function(this.Et),i=this.Zi.function(this.Ot)-t,s=2*this.Gi()/this.zt-1,e=2*this.Ui()/this.zt-1-s;return this.Qi={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.Qi}es(){return this.Qi}}const Fn=t=>"e"===t?nr:rr(t),In=t=>"e"===t?Math.E:t,Pn=.9*10**-4,Dn=1.1*10**25,Bn=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],Ln=(t,i,s)=>{const e=Math.abs(s-i),h=Math.max(2-Gr(e,10),0);return t.toFixed(h)},Rn={Numeric:(t,i)=>Ln(t,i.getInnerStart(),i.getInnerEnd()),NumericUnits:(t,i)=>{const s=Math.abs(i.getInnerEnd()-i.getInnerStart()),e=t<0;t=Math.abs(t);let h="",r="";if(s>=1e3&&t>1e3){let i="";for(const s of Bn){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),r=s.prefix;break}}h=(e?"-":"")+i}else{let i=String(Math.floor(t));const r=Gr(t,1e3);for(let t=1;t<=r;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}h=(e?"-":"")+i+(s<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-Gr(s,10)):"")}return h+=r,h},LogarithmicExponentsRounded:(t,i,s,e=10)=>{const h=Fn(e)(t);return`${e}${En(h)}`},LogarithmicExponents:(t,i,s,e=10)=>{const h=Fn(e),r=Math.floor(h(t)),n=t/In(e)**r;return`${Math.round(n)}${e}${En(r)}`},LogarithmicExtreme:(t,i,s,e=10)=>{const h=Fn(e),r=Math.floor(h(t));return`${(t/In(e)**r).toFixed(2)}${e}${En(r)}`},LogarithmicNoExponents:(t,i,s,e=10)=>{const h=Fn(e);if("e"===e)return`${Math.floor(h(t))}e`;const r=t.toString();if(t>1)return r;const n=Math.floor(h(t));return t.toFixed(Math.abs(n))}},En=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"";case"1":return"";case"2":return"";case"3":return"";case"4":return"";case"5":return"";case"6":return"";case"7":return"";case"8":return"";case"9":return"";case"-":return"";default:return t}})).join("");class On extends kn{constructor(t,i,s,e){super(t,i,s,e),this.hs=!1,this.rs=!1,this.ns=0,this.zt=1e3,this.Gt(0,10),this.Ut()}ss(){return this.rs}Qt(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.hs){const s=((t,i,s)=>{const e=((t,i)=>{if(i<Or&&i>zr&&t<Or&&t>zr){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s})(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(h?o/2:r/2)*(t>i?-1:1);return{start:a-l,end:a+l}}Xi(){this.Ut()}qt(t){return this.Gi()+(t-this.Et)/(this.Ot-this.Et)*(this.Ui()-this.Gi())}Kt(t){return this.Et+(t-this.Gi())/(this.Ui()-this.Gi())*(this.Ot-this.Et)}Gt(t,i){return super.Gt(t,i),this.Ut(),this}Ni(t){return super.Ni(t),this.Ut(),this}Wt(t){return super.Wt(t),this.os=zn(this.Ot-this.Et,this.Pi,this.zt,this.Li,this.Ri),this.Ut(),this}ls(){return this.hs=!0,this}us(){return this.hs}cs(){return Math.abs(this.ds)}fs(){return this.cs()/this.os}As(){return this.ut}gs(){return this.ot}getPixelSize(){return this.os}es(){return this.Qi}Nt(){return super.Nt(),this.rs=!0,this}Vt(){return super.Vt(),this.rs=!1,this}vs(t,i=Rn.Numeric){return i(t,this)}ys(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}ps(t){return zn(t,this.Pi,this.zt,this.Li,this.Ri)}Ut(){let t=this.Et,i=this.Ot,s=0;this.hs&&(t=0,i=this.Ot-this.Et,s=this.Et);const e=i-t,h=zn(e,this.Pi,this.zt,this.Li,this.Ri);this.ot=t-this.Pi[0]*h,this.ut=i+this.Pi[1]*h;const r=this.ut-this.ot,n=r-this.ds,o=Math.abs(n/h),a=e-this.ns,l=Math.abs(a/h);(!this.Qi||o>=.4||l>=.4)&&(this.ns=e,this.ds=r,this.os=h,this.rs=!0);const u=this.ds*this.Ri/(2*this.Li),c=-(this.ot-this.ds*this.Bi/this.Li)-u,d=2*this.Gi()/this.zt-1,f=2*this.Ui()/this.zt-1-d;this.Qi={displacement:c,scaling:u,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}ts(t,i){return t+this.os*i}}const zn=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class Vn{Ss(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}Vt(){return this.x.Vt(),this.y.Vt(),this}Nt(){return this.x.Nt(),this.y.Nt(),this}Wt(t,i){return"object"==typeof t?(this.x.Wt(t.x),this.y.Wt(t.y)):(this.x.Wt(t),this.y.Wt(i)),this}Hi(){return e(this.x.Hi(),this.y.Hi())}bs(t){return this.x.Ni(t),this}xs(t){return this.y.Ni(t),this}Yi(){return e(this.x.Yi(),this.y.Yi())}Ms(t,i){return this.x.Gt(t,i),this}_s(t,i){return this.y.Gt(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.Yi(),y:i-this.y.Yi()}}ws(){return this.x.ss()||this.y.ss()}}class Nn extends Vn{constructor(){super(...arguments),this.Cs="LinearScaleXY"}Jt(t,i,s,e){return this.x=new On(t.x,i.x,s.x,e?e.x:void 0),this.y=new On(t.y,i.y,s.y,e?e.y:void 0),this}us(){return this.x.us()||this.y.us()}ks(){return e(this.x.getPixelSize(),this.y.getPixelSize())}es(){return{x:this.x.es(),y:this.y.es()}}ts(t,i){const s=this.ks();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Ts(t,i,s,e){const h=this.ks(),r=an(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class Gn extends Vn{constructor(){super(...arguments),this.Cs="MixedScaleXY"}us(){return!1}ts(t,i){const s=this.x.qt(t.x),e=this.y.qt(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.Kt(h.x),y:this.y.Kt(h.y)}}Ts(t,i,s,e){const h={x:this.x.qt(t.x),y:this.y.qt(t.y)},r={x:this.x.qt(i.x),y:this.y.qt(i.y)},n=on(dn(r,h)),o=an(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.Kt(a.x),y:this.y.Kt(a.y)}}es(){const t=this.x.es(),i=this.y.es();return{uScaleStart:[this.x.Et,this.y.Et],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const Un=(t,i)=>t instanceof Tn||i instanceof Tn?(new Gn).Ss(t,i):(new Nn).Ss(t,i),Wn=t=>"client"===t,Yn=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),Hn=t=>"relative"===t,jn=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y);var $n;t.HighlightModes=void 0,($n=t.HighlightModes||(t.HighlightModes={}))[$n.noHighlighting=0]="noHighlighting",$n[$n.onHover=1]="onHover";class Xn{constructor(i,s,e,h){this.Fs=!0,this.Is=t.HighlightModes.onHover,this.Ps=!1,this.Ds=!0,this.Bs=!1,this.Ct=new Ze,this.Ls=[],this.Rs=[],this.onMouseEnter=t=>this.Ct.on("mouseEnter",t),this.onMouseLeave=t=>this.Ct.on("mouseLeave",t),this.onMouseClick=t=>this.Ct.on("mouseClick",t),this.onMouseDoubleClick=t=>this.Ct.on("mouseDoubleClick",t),this.onMouseDown=t=>this.Ct.on("mouseDown",t),this.onMouseUp=t=>this.Ct.on("mouseUp",t),this.onMouseMove=t=>this.Ct.on("mouseMove",t),this.offMouseEnter=t=>this.Ct.off(t,"mouseEnter"),this.offMouseLeave=t=>this.Ct.off(t,"mouseLeave"),this.offMouseClick=t=>this.Ct.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.Ct.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.Ct.off(t,"mouseDown"),this.offMouseUp=t=>this.Ct.off(t,"mouseUp"),this.offMouseMove=t=>this.Ct.off(t,"mouseMove"),this.offMouseDragStart=t=>this.Ct.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.Ct.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.Ct.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.Ct.off(t,"mouseWheel"),this.li=(i,s,e)=>{this.Ct.emit("mouseEnter",this,s),this.Bs=!0,this.Is===t.HighlightModes.onHover&&this.setHighlight(!0)},this.ui=(i,s,e)=>{this.Ct.emit("mouseLeave",this,s),this.Bs=!1,this.Is===t.HighlightModes.onHover&&this.setHighlight(!1)},this.gi=(t,i,s)=>{this.Ct.emit("mouseMove",this,i)},this.ci=(t,i,s)=>this.Ct.emit("mouseClick",this,i),this.di=(t,i,s)=>this.Ct.emit("mouseDoubleClick",this,i),this.fi=(t,i,s)=>this.Ct.emit("mouseDown",this,i),this.Ai=(t,i,s)=>this.Ct.emit("mouseUp",this,i),this.yi=(t,i,s,e)=>{this.Ct.emit("mouseDragStart",this,i,s)},this.vi=(t,i,s,e,h,r)=>{this.Ct.emit("mouseDrag",this,i,s,e,h)},this.mi=(t,i,s,e,h)=>{this.Ct.emit("mouseDragStop",this,i,s,e)},this.pi=(t,i,s)=>{this.Ct.emit("mouseWheel",this,i)},this.Si=(i,s,e)=>{this.Ct.emit("touchStart",this,s),this.Bs=!0,this.Is===t.HighlightModes.onHover&&this.setHighlight(!0)},this.bi=(t,i,s)=>{this.Ct.emit("touchMove",this,i)},this.xi=(i,s,e)=>{this.Ct.emit("touchEnd",this,s),this.Bs=!1,this.Is===t.HighlightModes.onHover&&this.setHighlight(!1)},this.Es=i,this.Os=s,this.zs=e,this.Vs=new Map,this.Ns=h,this.Gs=this.Ns.Us(this,{Ws:{themeEffectEnabled:this.zs.effectsText},Ys:{}}),this.Es.$s.js.Hs(this,(t=>{this.Vs.forEach(((i,s)=>s.Xs(t))),this.Rs.forEach((i=>i.setHighlight(t))),this.Ls.forEach((i=>i.Xs(t)))}),{animationEnabled:this.Es.getAnimationsEnabled()})}Zs(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.isText)&&i.isText;this.Vs.set(t,{isText:e});const h=Array.from(this.Vs);this.Gs.Ws.Qs(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.Gs.Ys.Qs(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setMouseInteractions(this.Fs).setVisible(this.Ds).Xs(this.Es.$s.js.Js(this,!0)),s&&t.setMouseEnterEventHandler(this.li).setMouseLeaveEventHandler(this.ui).setMouseClickEventHandler(this.ci).setMouseDoubleClickEventHandler(this.di).setMouseDownEventHandler(this.fi).setMouseUpEventHandler(this.Ai).setMouseMoveEventHandler(this.gi).setMouseDragStartEventHandler(this.yi).setMouseDragEventHandler(this.vi).setMouseDragStopEventHandler(this.mi).setMouseWheelEventHandler(this.pi).setTouchStartEventHandler(this.Si).setTouchMoveEventHandler(this.bi).setTouchEndEventHandler(this.xi);const r=t.onDispose((()=>{t.offDispose(r),this.Vs.delete(t)}))}Ks(t){this.Ls=t;const i=this.Es.$s.js.Js(this,!0);t.forEach((t=>{t.Xs(i).qs(this.Ds)}))}setEffect(t){return this.Gs.Ws.te(t&&this.zs.effectsText),this.Gs.Ys.te(t),this.Es.$s.ie(),this}getEffect(){return this.Gs.Ws.se()||this.Gs.Ys.se()}onHighlight(t){return this.Ct.on("highlight",t)}offHighlight(t){return this.Ct.off(t)}setIcon(t){return this.ee=t,this.Es.$s.ie(),this}getIcon(){return this.ee}setName(t){return this.At=t,this.Rs.forEach((t=>t.setText(this.At))),this}getName(){return this.At}dispose(){return this.Ps||(this.Ps=!0,this.Vs.forEach(((t,i)=>i.dispose())),this.Os(this),this.Rs.forEach((t=>{t.dispose()})),this.Rs.length=0,this.Ct.emit("dispose",this),this.Es.$s.ie()),this}setVisible(t){return t===this.Ds||(this.Ds=t,this.Vs.forEach(((i,s)=>s.setVisible(t))),this.Ls.forEach((i=>i.qs(t))),this.Rs.forEach((i=>i.setOn(t))),this.Ct.emit("visibleStateChanged",this,this.Ds),this.Es.$s.ie()),this}getVisible(){return this.Ds}onVisibleStateChanged(t){return this.Ct.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.Ct.off(t,"visibleStateChanged")}setHighlight(t){return this.Es.$s.js.he(this,t),this.Ct.emit("highlight",this,t),this}getHighlight(){return this.Es.$s.js.Js(this)}setAnimationHighlight(t){return this.Es.$s.js.re(this,t),this}getAnimationHighlight(){return this.Es.$s.js.ne(this)}setMouseInteractions(t){return this.Fs=t,this.Vs.forEach(((i,s)=>s.setMouseInteractions(t))),this.Es.$s.ie(),this}getMouseInteractions(){return this.Fs}getIsUnderMouse(){return this.Bs}setHighlightOnHover(i){return this.Is=i?t.HighlightModes.onHover:t.HighlightModes.noHighlighting,!1===i&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Is!==t.HighlightModes.noHighlighting}attach(t,i=!0,s=!1){return wr(t,[this],{toggleVisibilityOnClick:i,label:this.At,style:void 0}),this.Rs.push(t),t.onDispose((()=>{const i=this.Rs.indexOf(t);i>=0&&this.Rs.splice(i,1)})),this}oe(){return this.ee}onMouseDragStart(t){return this.Ct.on("mouseDragStart",t)}onMouseDrag(t){return this.Ct.on("mouseDrag",t)}onMouseDragStop(t){return this.Ct.on("mouseDragStop",t)}onMouseWheel(t){return this.Ct.on("mouseWheel",t)}onTouchStart(t){return this.Ct.on("touchStart",t)}onTouchMove(t){return this.Ct.on("touchMove",t)}onTouchEnd(t){return this.Ct.on("touchEnd",t)}isDisposed(){return this.Ps}onDispose(t){return this.Ct.on("dispose",t)}offTouchStart(t){return this.Ct.off(t,"touchStart")}offTouchMove(t){return this.Ct.off(t,"touchMove")}offTouchEnd(t){return this.Ct.off(t,"touchEnd")}offDispose(t){return this.Ct.off(t,"dispose")}}class Zn extends Xn{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.ae=t,this.axis=e,this.ti=h,this.le=r,this.ue()}}const Qn=t=>{const i=t.length;if(i>0){let s=0,h=0;for(let e=0;e<i;e+=1)s+=t[e].x,h+=t[e].y;return e(s/i,h/i)}return e(0,0)},Jn=(...t)=>{const i=t.length,s=new Array(i).fill(!1),e=(e,h)=>{for(let r=0;r<i;r+=1){const i=t[r],n=i.ce(e,h);n?i.de(e,h,!0):s[r]&&s[r]&&i.de(e,h,!1),s[r]=n}return!1};return{onTouchStart:e,onTouchMove:e,onTouchEnd:e}},Kn=class{constructor(t,i=300){this.fe=!1,this.Ae=[],this.ge=300,this.ve=t,this.ge=i}ce(t,i){const s=Ch.performance.now();let e=!1;for(let t=0;t<this.Ae.length;t+=1)s-this.Ae[t].time>=this.ge?(this.Ae.splice(t,1),t-=1):this.Ae[t].state&&(e=!0);return this.fe?0===i.interactions.length&&(this.Ae.push({state:!1,time:s}),this.fe=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Ae.push({state:!0,time:s}),e=!0,this.fe=!0),e}de(t,i,s){if(s){const s=this.Ae.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=2&&s.off>=1&&(this.ve(t,i),this.Ae.length=0)}}},qn=class{constructor(t,i,s,e=1,h=100){this.ye=t,this.me=i,this.pe=s,this.Se=e,this.be=h}ce(t,i){const s=i.interactions.length;if(s===this.Se){if(void 0!==this.xe)return!0;if("pointerdown"===i.type&&(1===s||(t=>{const i=t.length;if(i>0){const s=Qn(t);let h=0;for(let r=0;r<i;r+=1)h=Math.max(h,Zr(s,e(t[r].x,t[r].y)));return h}return Or})(i.interactions)<=this.be))return this.xe=Qn(i.interactions),!0}return!1}de(t,i,s){const h=this.Me;if(!s||i.forceTouchEnd||"pointerup"===i.type)this.pe&&this.pe(t,this.xe,h,i),this.xe=void 0,this.Me=void 0;else{const s=Qn(i.interactions);"pointerdown"===i.type?this.ye&&this.ye(t,this.xe,i):"pointermove"===i.type&&this.me&&this.me(t,this.xe,s,e(s.x-h.x,h.y-s.y),i),this.Me=s}}},to=class{constructor(t,i,s){this._e=!1,this.ye=t,this.me=i,this.pe=s}ce(t,i){return this._e?2!==i.interactions.length&&(this._e=!1):2===i.interactions.length&&"pointerdown"===i.type&&(this._e=!0),this._e}de(t,i,s){let h,r;if(s&&"pointerup"!==i.type){if("pointerdown"===i.type){const s=i.interactions;h=s[0],r=s[1],this.ye(t,h,r,i)}else if("pointermove"===i.type){h=i.interactions[0],r=i.interactions[1];const s=this.we,n=this.Ce,o=e(h.x-s.x,s.y-h.y),a=e(r.x-n.x,n.y-r.y);this.me(t,h,r,o,a,i)}}else{const s=i.interactions;this.pe(t,s[0],s[1],i)}this.we=h,this.Ce=r}},io=le({type:"linestyle",lineType:"solid",fillStyle:new Ee({color:me(255,255,255)}),thickness:1});class so extends io{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Ft(){const t=this.getThickness();return t<0?1:t}}const eo=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType);class ho{constructor(t,i){this.ke=t,this.Te=i,this.Fe=i.rows*Ro,this.Ie=i.columns*Eo}}var ro,no;t.OnScreenMenuButtonType=void 0,(ro=t.OnScreenMenuButtonType||(t.OnScreenMenuButtonType={}))[ro.ZoomIn=0]="ZoomIn",ro[ro.ZoomInX=1]="ZoomInX",ro[ro.ZoomInY=2]="ZoomInY",ro[ro.ZoomOut=3]="ZoomOut",ro[ro.ZoomOutX=4]="ZoomOutX",ro[ro.ZoomOutY=5]="ZoomOutY",ro[ro.ZoomToFit=6]="ZoomToFit",ro[ro.ToggleAnimations=7]="ToggleAnimations",t.OnScreenMenuButtonShape=void 0,(no=t.OnScreenMenuButtonShape||(t.OnScreenMenuButtonShape={}))[no.Circle=0]="Circle",no[no.Rectangle=1]="Rectangle",no[no.RoundedRectangle=2]="RoundedRectangle";const oo={x:-43,y:0},ao={x:-65,y:0},lo={x:-86,y:0},uo={x:-107,y:-1},co={x:-128,y:-3},fo={x:-150,y:0},Ao={x:-171,y:0},go={x:-276,y:0},vo={x:-298,y:0},yo={x:0,y:0},mo={x:-21,y:0};class po extends ho{constructor(t,i,s,e){super(t,s),this.Pe=Ch.document.createElement("button"),this.De=Ch.document.createElement("div"),this.Be=Ch.document.createElement("label"),this.Te=s,this.Le=i,this.Es=e}Re(t,i,s,e){this.Ee(t,e),this.Oe(),this.ze(i),this.Ve(),this.Be.textContent=s||"";const h=Ch.document.createElement("div");this.Ne(h),this.Pe.onclick=this.onClick.bind(this),h.appendChild(this.De),h.appendChild(this.Be),this.Pe.appendChild(h)}Ve(){this.Pe.style.cursor="pointer"}Ne(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}ze(t){"string"==typeof t?(this.De.style.backgroundImage=`url(${t})`,this.De.style.backgroundSize="100%",this.De.style.backgroundRepeat="no-repeat",this.De.style.backgroundPosition="center",this.De.style.width="20px",this.De.style.height="20px"):this.applyStyleForSprite(t),this.De.style.margin="auto"}Oe(){switch(this.Le){case t.OnScreenMenuButtonShape.RoundedRectangle:this.Pe.style.borderRadius="10px";break;case t.OnScreenMenuButtonShape.Rectangle:this.Pe.style.borderRadius="0px";break;case t.OnScreenMenuButtonShape.Circle:default:this.Pe.style.borderRadius="31px"}}Ee(t,i){this.Pe.style.width=`${this.Ie.toString()}px`,this.Pe.style.height=`${this.Fe.toString()}px`,this.Pe.style.backgroundColor=t,this.Pe.style.opacity=i||Oo,this.Pe.style.alignItems="center",this.Pe.style.border="2px solid #707070",this.Pe.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.De.style.backgroundImage=`url(${this.ke}/${zo})`,this.De.style.backgroundPositionX=`${t.x}px`,this.De.style.backgroundPositionY=`${t.y}px`,this.De.style.backgroundSize="1600%",this.De.style.backgroundRepeat="no-repeat",this.De.style.width="20px",this.De.style.height="20px"}Ge(t){return t.appendChild(this.Pe),t}Ue(){return this.Pe}}class So extends po{constructor(t,i,s,e){super(t,i,s,e),this.We="",this.Ye="",this.He=!1,this.Es=e}je(){this.$e(),this.onToggledStateAction()}Xe(){this.Ze(),this.onInitialStateAction()}Ze(){this.Qe(this.We)}$e(){this.Qe(this.Ye)}Qe(t){"string"==typeof t?this.De.style.background=t:(this.De.style.backgroundImage=`url(${this.ke}/${zo})`,this.De.style.backgroundPositionX=`${t.x}px`,this.De.style.backgroundPositionY=`${t.y}px`)}onClick(){this.He?this.Xe():this.je(),this.He=!this.He}}class bo extends po{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Es=i;const e=this.Es.getTheme();this.Re(e.onScreenMenuBackgroundColor.toRGBAString(),oo)}onClick(){const t=this.Es.Je();t&&this.Es.zoom(t,{x:-1,y:-1})}}class xo extends po{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Es=i;const e=this.Es.getTheme();this.Re(e.onScreenMenuBackgroundColor.toRGBAString(),uo)}onClick(){const t=this.Es.Je();t&&this.Es.zoom(t,{x:-1,y:0})}}class Mo extends po{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Es=i;const e=this.Es.getTheme();this.Re(e.onScreenMenuBackgroundColor.toRGBAString(),fo)}onClick(){const t=this.Es.Je();t&&this.Es.zoom(t,{x:0,y:-1})}}class _o extends po{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Es=i;const e=this.Es.getTheme();this.Re(e.onScreenMenuBackgroundColor.toRGBAString(),ao)}onClick(){const t=this.Es.Je();t&&this.Es.zoom(t,{x:1,y:1})}}class wo extends po{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Es=i;const e=this.Es.getTheme();this.Re(e.onScreenMenuBackgroundColor.toRGBAString(),co)}onClick(){const t=this.Es.Je();t&&this.Es.zoom(t,{x:1,y:0})}}class Co extends po{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Es=i;const e=this.Es.getTheme();this.Re(e.onScreenMenuBackgroundColor.toRGBAString(),Ao)}onClick(){const t=this.Es.Je();t&&this.Es.zoom(t,{x:0,y:1})}}class ko extends So{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Es=i;const e=this.Es.getTheme();this.We=go,this.Ye=vo,this.Re(e.onScreenMenuBackgroundColor.toRGBAString(),this.We)}onToggledStateAction(){this.Es.setAnimationsEnabled(!1)}onInitialStateAction(){this.Es.setAnimationsEnabled(!0)}}class To extends po{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Es=i;const e=this.Es.getTheme();this.Re(e.onScreenMenuBackgroundColor.toRGBAString(),lo)}onClick(){this.Es.forEachAxis((t=>{t.fit(!0)}))}}class Fo extends po{constructor(t,i,s){super(t,i.shape||Vo,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.Re(h,r,n,o),this.Ke=i.action}onClick(){this.Ke(this.Es)}}class Io extends So{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.Es=s,this.qe=e,this.We=mo,this.Ye=yo,this.Re(No,this.We)}Ze(){this.Qe(this.We),this.Pe.style.backgroundColor=No,this.Pe.style.border="2px solid #707070",this.Pe.style.margin="0px"}$e(){this.Qe(this.Ye),this.Pe.style.background="#FECC00 0% 0% no-repeat padding-box",this.Pe.style.border="10px solid #BCBCBC12",this.Pe.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.qe)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.qe)||void 0===t||t.style.setProperty("display","none")}}var Po;t.MouseStyles=void 0,(Po=t.MouseStyles||(t.MouseStyles={})).Move="move",Po.ResizeColumn="col-resize",Po.ResizeRow="row-resize",Po.Horizontal="ew-resize",Po.Vertical="ns-resize",Po.NorthWest="nw-resize",Po.NorthEast="ne-resize",Po.Copy="copy",Po.CrossHair="crosshair",Po.Default="default",Po.Help="help",Po.Restricted="not-allowed",Po.None="none",Po.Point="pointer",Po.Text="text",Po.Wait="wait",Po.ZoomIn="zoom-in",Po.ZoomOut="zoom-out";const Do={LeftBottom:e(-1,-1),CenterBottom:e(0,-1),RightBottom:e(1,-1),LeftCenter:e(-1,0),Center:e(0,0),RightCenter:e(1,0),LeftTop:e(-1,1),CenterTop:e(0,1),RightTop:e(1,1)},Bo=new Ee({color:me(255,255,255,0)}),Lo=new so({thickness:1,fillStyle:Bo}),Ro=60,Eo=60,Oo="1.0",zo="osm/osm-sprite-transparent.png",Vo=t.OnScreenMenuButtonShape.Circle,No="#363636";var Go;t.OSMPosition=void 0,(Go=t.OSMPosition||(t.OSMPosition={}))[Go.TopRight=0]="TopRight",Go[Go.TopLeft=1]="TopLeft",Go[Go.BottomLeft=2]="BottomLeft",Go[Go.BottomRight=3]="BottomRight";class Uo extends Zn{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.At="Band",this.th=0,this.ih=0,this.sh=this.zs.bandFillStyle,this.eh=this.zs.bandStrokeStyle,this.hh=!0,this.rh=this.ae.lh(this.ti).ah(this.sh).oh(this.eh).Xs(this.getHighlight()),this.Zs(this.rh)}setValueStart(t){return this.th=t,this.Ct.emit("valueChange",this,this.th,this.ih),this.ae.ie(),this}getValueStart(){return this.th}setValueEnd(t){return this.ih=t,this.Ct.emit("valueChange",this,this.th,this.ih),this.ae.ie(),this}getValueEnd(){return this.ih}setFillStyle(t){this.sh="function"==typeof t?t(this.sh):t;const i=this.sh;return this.rh.ah(i),this.ae.ie(),this}getFillStyle(){return this.sh}setStrokeStyle(t){this.eh="function"==typeof t?t(this.eh):t;const i=this.eh;return this.rh.oh(i),this.ae.ie(),this}getStrokeStyle(){return this.eh}onValueChange(t){return this.Ct.on("valueChange",t)}offValueChange(t){return this.Ct.off(t,"valueChange")}uh(){return this.rh.dh(this.le.toVec2(this.th,this.le.getHeight(this.ti).getInnerStart())).Wt(this.le.toVec2(this.ih-this.th,this.le.getHeight(this.ti).getInnerInterval())),this}attach(t,i=!0,s=!1){return super.attach(t,i),fr(t,this.zs,s,{fill:this.sh,stroke:this.eh}),this}fh(t,i){t.Xs(i),this.ae.ie()}setDefaultMouseInteractions(t){return this.hh=t,this}ue(){let i,s;const h=(t,e)=>{if(!this.hh)return;const h=Ah(this.ae.$s.Ah(e.x,e.y),this.ae.$s.ti,this.ti),r=this.le.getWidth(h),n=this.axis.ti.qt(this.th),o=this.axis.ti.qt(this.ih),a=(this.axis.ti.qt(r)-n)/(o-n);i=!(a<.1||a>.9),!1===i&&(s=a<.5)},r=(t,e,h,r,n)=>{if(!this.hh)return;const o=this.le.getWidth(r);i?(this.th=this.axis.ti.ts(this.th,o),this.ih=this.axis.ti.ts(this.ih,o)):s?this.th=this.axis.ti.ts(this.th,o):this.ih=this.axis.ti.ts(this.ih,o),qh(n),this.Ct.emit("valueChange",this,this.th,this.ih),this.ae.ie()};this.onMouseMove(((s,r)=>{if(!this.hh)return;h(0,e(r.clientX,r.clientY));const n=i?t.MouseStyles.Point:this.le.getWidth({x:t.MouseStyles.Horizontal,y:t.MouseStyles.Vertical});this.gh=this.Es.engine.setMouseStyle(n,this.gh)})),this.onMouseLeave((()=>{this.hh&&(this.Es.engine.restoreMouseStyle(this.gh),this.gh=void 0)})),this.onMouseDrag(((t,i,s,e,h)=>{this.hh&&0===s&&r(0,0,0,h,i)}));const n=Jn(new qn(h,r));this.onTouchStart(n.onTouchStart),this.onTouchMove(n.onTouchMove),this.onTouchEnd(n.onTouchEnd)}}class Wo extends Zn{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.At="Constant Line",this.S=0,this.eh=this.zs.constantLineStrokeStyle,this.yh=!0,this.hh=!0,this.mh=this.ae.Sh(this.ti).ph(this.eh).Xs(this.getHighlight()),this.Zs(this.mh)}setValue(t){return this.S=t,this.Ct.emit("valueChange",this,this.S),this.ae.ie(),this}getValue(){return this.S}setStrokeStyle(t){this.eh="function"==typeof t?t(this.eh):t;const i=this.eh;return this.mh.ph(i),this.ae.ie(),this}getStrokeStyle(){return this.eh}setInteractionMoveByDragging(t){return this.yh=t,this}getInteractionMoveByDragging(){return this.yh}onValueChange(t){return this.Ct.on("valueChange",t)}offValueChange(t){return this.Ct.off(t,"valueChange")}uh(){return this.mh.xh(this.le.toVec2(this.S,this.le.getHeight(this.ti).getInnerStart())).bh(this.le.toVec2(this.S,this.le.getHeight(this.ti).getInnerEnd())),this}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{stroke:this.eh}),this}fh(t,i){t.Xs(i),this.ae.ie()}setDefaultMouseInteractions(t){return this.hh=t,this}ue(){const i=(t,i)=>{this.hh&&this.yh&&(this.S=this.axis.ti.ts(this.S,this.le.getWidth(i)),this.Ct.emit("valueChange",this,this.S),this.ae.ie(),qh(t))};this.onMouseMove((()=>{if(this.hh&&this.yh){const i=this.le.getWidth({x:t.MouseStyles.Horizontal,y:t.MouseStyles.Vertical});this.gh=this.Es.engine.setMouseStyle(i,this.gh)}})),this.onMouseLeave((()=>{this.hh&&this.yh&&(this.Es.engine.restoreMouseStyle(this.gh),this.gh=void 0)})),this.onMouseDrag(((t,s,e,h,r)=>{this.hh&&this.yh&&0===e&&i(s,r)}));const s=Jn(new qn(void 0,((t,s,e,h,r)=>i(r,h))));this.onTouchStart(s.onTouchStart),this.onTouchMove(s.onTouchMove),this.onTouchEnd(s.onTouchEnd)}}const Yo={fitting:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?e:s,allowIntervalLengthChange:!0},expansion:{start:(t,i,s,e)=>i>=t?s<t?s:t:e>t?e:t,end:(t,i,s,e)=>i>=t?e>i?e:i:s<i?s:i,allowIntervalLengthChange:!0},progressive:{start:(t,i,s,e)=>i>t?Yo.progressive.end(t,i,s,e)+(t-i):e>t?e:t,end:(t,i,s,e)=>i>t?e>i?e:i:Yo.progressive.start(t,i,s,e)+(i-t),allowIntervalLengthChange:!1},regressive:{start:(t,i,s,e)=>i>t?s<t?s:t:Yo.regressive.end(t,i,s,e)+(t-i),end:(t,i,s,e)=>i>t?Yo.regressive.start(t,i,s,e)+(i-t):s<i?s:i,allowIntervalLengthChange:!1}},Ho={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},jo=t=>void 0!==t.Mh,$o=t=>void 0!==t._h,Xo={wh:Rn.Numeric},Zo=(t,i)=>[t,i],Qo=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){const r=Math.round((t+s*n)*e)/e;r<i&&h.push(r)}return h},Jo=(t,i,s,e,h)=>{Dh(t,0)&&(t=0),Dh(i,0)&&(i=0);const r=[];let n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);for(;n<i&&!1===Dh(n,i);)r.push(n),n+=s,n=Math.round(n*h)/h;return r.push(n),r},Ko=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===Dh(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},qo=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const l=i[h]||1;let u=!1,c=!1,d=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,l,u,c,d)}},ta=(...t)=>{const i=t.length>0?t.length:0;return(s,e,h,r,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},ia=(t,i)=>{if(i.has(t))return i.get(t);const s=qr(t.kh.Ch());if(br(s))return s;const e=t.Th.ts(s.min,{x:-5,y:-5}),h=t.Th.ts(s.min,{x:5,y:5}),r=t.Th.ts(s.max,{x:-5,y:-5}),n=t.Th.ts(s.max,{x:5,y:5}),o={min:{x:Math.min(e.x,h.x,r.x,n.x),y:Math.min(e.y,h.y,r.y,n.y)},max:{x:Math.max(e.x,h.x,r.x,n.x),y:Math.max(e.y,h.y,r.y,n.y)}};return i.set(t,o),o},sa=t=>{const i=new Map;if(t!==Xo){for(const s of t.Fh)i.set(s,new Map);for(const s of t.Ih)i.set(s,new Map)}return i};class ea{constructor(t,i,s,e,h,r,n){this.Ct=new Ze,this.Ph=Xo,this.Dh=Ho.Empty,this.Bh=new Map,this.Lh=new Map,this.Rh=Yo.fitting,this.Eh=!0,this.Oh=Ke((()=>this.chart.$s.ie()))(300,Qe.linear),this.zh=!0,this.Ds=!0,this.Vh=!1,this.Nh=zr,this.Gh=!1,this.Uh=!1,this.Wh=zr,this.Yh=zr,this.Hh=zr,this.jh=!1,this.$h=()=>{this.Vh||void 0===this.Rh||this.chart.$s.ie(!0)},this.Xh={},this.Zh=(t,i,s,e,h,r)=>{const n=[],o=[];for(const a of t){if(a<s||a>e){n.push(a);continue}const t=this.Bh.get(i),l=(t?t.get(a):void 0)||this.Qh(a,i);l.Jh=!1;const u=this.Kh(l,h);r.set(l,u),n.push(a),o.push(l)}return{displayedKeyValues:n,createdTicks:o}},this.qh=(t,i,s,e,h,r,n,o,a,l,u)=>{const c=[];for(let d=0;d<t.length;d+=1){const f=t[d],A=i[d];let g,v,y;if(this.tr(f,s)){const i=ia(f,a);v=[t[d-1],t[d+1]],y=v.concat(l).concat(u).filter((t=>void 0!==t)).filter((i=>i.ir!==s||!!t.find((t=>t===i)))).map((t=>Ur(i,ia(t,a))?t:void 0)),g=y.some((t=>void 0!==t))}else g=!1;if(g){let t=!0;const i=y.filter((t=>void 0!==t));if(t&&i.every((t=>jo(t.ir)))&&(t=!1),t&&s.sr&&s.sr.er&&!1===s.sr.er(A,e,h,r,n,o)&&(t=!1),!1===t)continue;return!0}c.push(f)}return c},this.formatValue=t=>this.Ph.wh(t,this.ti),this.hr=!0,this.rr=!0,this.chart=t,this.nr=i,this.zs=e,this.ar=r,this.ti=s,this.lr=n,"logarithmic"===n.type&&this.setAnimationZoom(Qe.logarithmic(In(n.base))),this.ur=r.numeric,this.cr("Numeric"),this.dr=s.getInnerStart(),this.Ar=s.getInnerEnd(),this.setAnimationsEnabled(h)}setDefaultInterval(t,i){return this.gr=t,!1!==(null==i?void 0:i.applyImmediately)&&(this.jh=!0,this.chart.$s.ie()),this}getDefaultInterval(){return this.gr}getTitle(){return this.yr.vr()}setTitle(t){return this.yr.mr(t),this.chart.$s.ie(),this}getTitleFillStyle(){return this.yr.pr()}setIntervalRestrictions(t){return this.Sr=t,this.chart.$s.ie(),this}getIntervalRestrictions(){return this.Sr}setTitleFillStyle(t){return this.yr.ah(t),this.chart.$s.ie(),this}getTitleFont(){return this.yr.br()}setTitleFont(t){return this.yr.Mr(t),this.chart.$s.ie(),this}setTitleRotation(t){return this.yr._r(t),this.chart.$s.ie(),this}getTitleRotation(){return this.yr.wr()}setTitleEffect(t){return this.Cr.te(t),this.chart.$s.ie(),this}getTitleEffect(){return this.Cr.se()}cr(t,i){if(this.Bh.size>0&&this.kr(),"Empty"===t)this.Ph=Xo,this.Dh=t;else if("Numeric"===t){"Numeric"!==this.Dh&&(this.ur=this.ar.numeric);const s=i||(t=>t);this.ur=s(this.ur),this.Ph=this.ur.Tr(this.lr),this.Dh=t}else if("DateTime"===t){"DateTime"!==this.Dh&&(this.ur=this.ar.datetime);const s=i||(t=>t);this.ur=s(this.ur),this.Ph=this.ur.Tr(this.lr),this.Dh=t}else if("Time"===t){"Time"!==this.Dh&&(this.ur=this.ar.time);const s=i||(t=>t);this.ur=s(this.ur),this.Ph=this.ur.Tr(this.lr),this.Dh=t}return this.Lh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.Lh=sa(this.Ph),this.chart.$s.ie(),this}Fr(){return this.Ph}Ir(t){this.Ph=t,this.Lh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.Lh=sa(this.Ph),this.chart.$s.ie()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.hi(void 0!==i?i:this.dr,void 0!==s?s:this.Ar,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}hi(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n=!0,o=Math.abs(i-t);if(Math.abs(this.Ar-this.dr),void 0!==this.Ph.Pr&&this.Ph.Pr>o){const s=(i+t)/2,e=this.Ph.Pr/2*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.Ph.Dr&&this.Ph.Dr<o){const s=(i+t)/2,e=this.Ph.Dr/2*(t>i?-1:1);r={start:s-e,end:s+e}}const a=this.ti.Qt(r.start,r.end,this.dr,this.Ar,n);if(!1===a)return this;if(!0===a);else if(r=a,"zoomBandChart"===h)return this;let l;switch(h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":l=!0;break;case"zoomBandChart":case"synchronizedAxis":l=!1;break;default:return Cr(0,""),this}if(this.Br&&this.Br.finishAll(!1),this.Oh&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.Br||this.Br.isOver()?this.Oh:this.Br.NextAnimation.bind(this);this.Br=i([[this.dr,r.start],[this.Ar,r.end]],(([t,i])=>{this.Lr(t,i,n)}),t),this.Br.onAnimationEnd((()=>{this.Br=void 0,l&&(this.Hh=Ch.performance.now())})),this.Br.onAnimationEnd((()=>this.setStopped(e)))}else this.Lr(r.start,r.end,n),this.setStopped(e),l&&(this.Hh=Ch.performance.now());return this}getInterval(){return{start:this.dr,end:this.Ar}}setStopped(t){return t===this.Vh||(t&&(this.Br&&this.Br.finishAll(!1),this.Br=void 0),this.Vh=t,this.Ct.emit("stoppedStateChanged",this,this.Vh),this.Nh=Ch.performance.now(),this.chart.$s.ie()),this}getStopped(){return this.Vh}onStoppedStateChanged(t){return this.Ct.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.Ct.off(t,"stoppedStateChanged")}fit(t,i){const s=this.Rr(),e=this.gr||aa,h="function"==typeof e?e({curStart:this.dr,curEnd:this.Ar,dataMin:null==s?void 0:s.min,dataMax:null==s?void 0:s.max}):e;return this.hi(void 0!==h.start?h.start:this.dr,void 0!==h.end?h.end:this.Ar,void 0!==h.animate?h.animate:void 0===t||t,void 0!==h.stopAxisAfter?h.stopAxisAfter:void 0===i||i,"userFit"),this}setScrollStrategy(t){return this.Rh=t,this.chart.$s.ie(),this}getScrollStrategy(){return this.Rh}setAnimationScroll(t){return this.Eh=Boolean(t),this.chart.$s.ie(),this}setAnimationZoom(t,i=300){return this.Br&&(this.Br.finishAll(!1),this.Br=void 0),this.Oh=t?Ke((()=>this.chart.$s.ie()))(i,t):void 0,this}setAnimationsEnabled(t){return this.zh=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Qe.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.zh}setVisible(t){const i=this.Ds!==t;return this.Ds=t,this.yr.setVisible(t),this.Er((i=>{i.kh.setVisible(t)})),i&&this.Ct.emit("visibleStateChanged",this,this.Ds),this}getVisible(){return this.Ds}onIntervalChange(t){return this.Ct.on("scaleChange",t)}offIntervalChange(t){return this.Ct.off(t,"scaleChange")}onVisibleStateChanged(t){return this.Ct.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.Ct.off(t,"visibleStateChanged")}Or(t,i){const s=new Map;if(this.Ph===Xo||!this.Ds)return this.kr(),s;i=i||new Map;const e=this.zr(),h=e.min,r=e.max,n=r-h,o=t.physicalAxisSize;this.Xh.physicalAxisSize=o;const a=ra(this.Ph,h,r,this.dr,this.Ar,o),l=[];if(this.Vr(),l.push(...this.Nr(this.Ph,h,r,a,i,t,s)),this.Gr(this.Ph,h,r,a,i,t,l,s),this.Ur(),a)for(const[t,i]of this.Lh){const s=a.get(t);if(void 0!==s)for(const[t,e]of i)s.includes(t)||(null==e||e.dispose(),i.delete(t))}return this.Xh.min=h,this.Xh.max=r,this.Xh.scaleInterval=n,this.Xh.physicalAxisSize=o,s}Wr(t){const i=t.ir.Yr;t.kh.mr(i(t.S,this.ti)).de()}Hr(t,i){const s=i.jr;t.kh.ah(s.getLabelFillStyle()).Mr(s.getLabelFont())._r(s.getLabelRotation())}Qh(t,i){const s=this.Lh.get(i);let e=s.get(t);e?(s.delete(t),e.ir=i,e.qs(!0)):e=this.$r(t,i);const h=this.Bh.get(i)||new Map;return h.set(t,e),this.Bh.set(i,h),this.Hr(e,i),e}Kh(t,i){const s=this.Xr(t,i);return this.Wr(t),s}Nr(t,i,s,e,h,r,n){const o=[];for(const a of t.Fh){const t=e.get(a);for(const e of t){if(e<i||e>s)continue;const t=this.Bh.get(a),l=(t?t.get(e):void 0)||this.Qh(e,a),u=this.Kh(l,r),c=ia(l,h);o.find((t=>Ur(c,ia(t,h))))&&l.kh.setVisible(!1),l.Jh=!1,n.set(l,u),o.push(l)}}return o}Gr(t,i,s,e,h,r,n,o){let a,l=[];for(const u of t.Ih){const t=e.get(u);if(!t)break;let c;if(void 0===a)c=[{start:i,end:s,keyValues:t}];else{c=[];for(let i=0;i<a.length-1;i+=1){const s=a[i],e=a[i+1],h={start:s,end:e,keyValues:[]};for(const i of t)i>=s&&i<e&&h.keyValues.push(i);c.push(h)}}if(a=t,$o(u))continue;let d=0,f=-1,A=[],g=[];for(let t=0;t<c.length;t+=1){const e=this.Zh(c[t].keyValues,u,i,s,r,o);A=A.concat(e.displayedKeyValues),g=g.concat(e.createdTicks)}let v=g,y=!0;if(u.jr.getLabelFillStyle()!==De){let t=[];for(;++f<c.length;){const e=c[f],r=e.start,o=e.end;let a=e.keyValues;if(d>0){if(void 0===u.sr){y=!1;break}const t=u.sr.Zr;if(a=t(a,d-1,r,o,i,s),void 0===a)break}const v=this.qh(g.filter((t=>a.some((i=>Dh(t.S,i))))),A,u,d,r,o,i,s,h,n,l);!0!==v?t=t.concat(v):(d+=1,f=-1,t=[])}v=t,g.forEach((i=>{t.find((t=>t===i))||this.Qr(i)}))}if(l=v,!y)break}}Qr(t){const i=this.Bh.get(t.ir);null==i||i.delete(t.S);const s=this.Lh.get(t.ir);s&&s.has(t.S)?t.dispose():s&&(t.qs(!1),s.set(t.S,t))}Er(t){for(const i of this.Bh.values())for(const s of i.values())t(s)}Jr(t,i){for(const s of this.Bh.values())for(const e of s.values())i=t(i,e);return i}kr(){this.Bh.forEach(((t,i)=>{t.forEach((t=>this.Qr(t)))})),this.Bh.clear()}Vr(){for(const t of this.Bh.values())for(const i of t.values())i.Jh=!0}Ur(){for(const t of this.Bh.values())for(const[i,s]of t.entries())s.Jh&&(s.dispose(),t.delete(i))}zr(){const t=this.ti.getInnerStart()<this.ti.getInnerEnd()?this.ti.getInnerStart():this.ti.getInnerEnd(),i=this.ti.getInnerEnd()>this.ti.getInnerStart()?this.ti.getInnerEnd():this.ti.getInnerStart();return a(t,i)}tr(t,i){return!(t.Jh||0===t.kh.vr().length||jo(i)&&!0!==i.Kr)}qr(t,i){return this.Ph===Xo||(this.Ph.Fh.forEach((s=>{i=t(i,s.jr)})),this.Ph.Ih.forEach((s=>{(t=>void 0!==t.Yr)(s)&&(i=t(i,s.jr))}))),i}Rr(){let t=this.nr.tn();const i=this.nr.sn();let s;if(void 0!==t&&Th(t)&&void 0!==i&&Th(i)&&("logarithmic"===this.lr.type&&(0===t&&(t=Math.min(1,i)),Math.sign(t)!==Math.sign(i)&&(t=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,t),s.max=Math.max(s.max,i)):s=a(t,i)),s&&Th(s.min)&&Th(s.max))return Dh(s.min,s.max)?{min:s.min-1,max:s.max+1}:s}en(){if(!this.hr)return 0;let t=0;const i=this.nr.hn();return i&&(t=Math.max(t,i)),t}setAutoRegionsEnabled(t){return this.hr=t,this.chart.$s.ie(),this}rn(){var t;const i=this.Gh;let s=!1;if(this.jh&&this.gr){const t=this.Rr(),i="function"==typeof this.gr?this.gr({curStart:this.dr,curEnd:this.Ar,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.gr;this.setInterval(i),this.jh=!1}if(this.Rh&&!this.Vh){const i=this.Rr();if(i){const e=this.dr,h=this.Ar;let r=this.Rh.start(e,h,i.min,i.max),n=this.Rh.end(e,h,i.min,i.max);const o=null===(t=this.Rh.allowIntervalLengthChange)||void 0===t||t,a=oa(this.Sr,i,{start:r,end:n},{start:e,end:h},o);r=a.start,n=a.end;const l=!1===Dh(e,r),u=!1===Dh(h,n);if(r=l?r:e,n=u?n:h,l||u){let t=!1;if(this.Eh&&!this.rr)if(this.Eh){t=!0;const i=l?this.nn(e,r):e,a=u?this.nn(h,n):h;if(!0===this.Lr(i,a,o)&&(l&&!1===Dh(i,r)||u&&!1===Dh(a,n))){this.chart.$s.ie(!0),s=!0;let t=Math.abs(n-r)/Math.abs(i-a);t<1&&(t=1/t),this.Uh=t>=1.4}}else t=!1;t||this.Lr(r,n,o),this.rr=!1}}}return s?(this.Gh!==s&&(this.Gh=s,this.Wh=Ch.performance.now()),this.an&&(clearTimeout(this.an),this.an=void 0)):!0===i&&void 0===this.an&&(this.Uh=!1,this.an=setTimeout((()=>{!1!==this.Gh&&(this.Gh=!1,this.Wh=Ch.performance.now()),this.an=void 0,this.chart.$s.ie()}),200)),this}Lr(t,i,s){let e={start:t,end:i},h=!0;if(this.Sr){const t=this.Rr();e=oa(this.Sr,t,e,{start:this.dr,end:this.Ar},s)}const r=Math.abs(i-t),n=Math.abs(this.Ar-this.dr);if(void 0!==this.Ph.Pr&&this.Ph.Pr>r){const r=(i+t)/2,o=(s?this.Ph.Pr/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}if(void 0!==this.Ph.Dr&&this.Ph.Dr<r){const r=(i+t)/2,o=(s?this.Ph.Dr/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}let o=this.ti.Qt(e.start,e.end,this.dr,this.Ar,s);if(!1===o)return!1;!0!==o&&(e=o);const a=this.en(),l=this.ln(Math.min(e.start,e.end),Math.max(e.start,e.end),a);return o=this.ti.Qt(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min,this.dr,this.Ar,!1),!!o&&(!0===o?this.ti.Gt(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min):this.ti.Gt(e.start,e.end),this.dr=e.start,this.Ar=e.end,this.Ct.emit("scaleChange",this,e.start,e.end),this.Yh=Ch.performance.now(),this.chart.$s.ie(),h)}un(){return this.Gh}cn(){return void 0!==this.Br}}class ha{constructor(t,i,s,e,h=s.An(e).fn(Br).dn(Br).setMouseInteractions(!1)){this.Jh=!1,this.Ps=!1,this.Vs=[],this.ir=t,this.S=i,this.gn=s,this.Th=e,this.kh=h,this.Vs.push(h)}qs(t){this.Vs.forEach((i=>i.setVisible(t)))}dispose(){return this.Ps||(this.Ps=!0,this.Vs.forEach((t=>t.dispose()))),this}}const ra=(t,i,s,e,h,r)=>{const n=new Map;for(const r of t.Fh){let t=r.vn(i,s,e,h);t=na(t),n.set(r,t)}let o;for(const e of t.Ih){let t;if(void 0===o)t=e.vn(i,s,i,s);else{let h=[];const n=o.filter((t=>i<=t&&t<=s)).length;if(n>0){const t=r/(n-1);if(void 0!==e.yn&&e.yn>t)break}for(let t=0;t<o.length-1;t+=1){const r=e.vn(o[t],o[t+1],i,s);h=h.concat(r)}t=h}t=na(t),n.set(e,t),o=t}return n},na=t=>(t=(t=>{const i={},s=[],e=t.length;let h=0;for(let r=0;r<e;r+=1){const e=t[r];1!==i[e]&&(i[e]=1,s[h]=e,h+=1)}return s})(t)).sort(((t,i)=>t-i)),oa=(t,i,s,e,h)=>{const r="function"==typeof t?t({curStart:e.start,curEnd:e.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):t;if(!r)return s;const n={start:s.start,end:s.end};let o=Math.abs(s.end-s.start);if(void 0!==r.intervalMin&&o<r.intervalMin){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMin,n.end=t+.5*Math.sign(s.end-t)*r.intervalMin}if(o=Math.abs(s.end-s.start),void 0!==r.intervalMax&&o>r.intervalMax){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMax,n.end=t+.5*Math.sign(s.end-t)*r.intervalMax}return o=Math.abs(s.end-s.start),void 0!==r.startMin&&(n.start=Math.max(n.start,r.startMin),h||Dh(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.startMax&&(n.start=Math.min(n.start,r.startMax),h||Dh(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMin&&(n.end=Math.max(n.end,r.endMin),h||Dh(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMax&&(n.end=Math.min(n.end,r.endMax),h||Dh(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),n},aa=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const i=t.curEnd>=t.curStart;return{start:i?t.dataMin:t.dataMax,end:i?t.dataMax:t.dataMin,stopAxisAfter:!1}},la=le({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class ua extends la{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const ca=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),da=new ua,fa=new class{getFillStyle(){return De}},Aa=le({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new Ee,wireframeStyle:ah});class ga extends Aa{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const va=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),ya=le({type:"pixelated-points-3d",size:5,fillStyle:new Ee});class ma extends ya{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const pa=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),Sa={Triangulated:ga,Pixelated:ma};class ba{constructor(t){this.mn=new Map,this.$s=t}Hs(t,i,s){const e=s.animationEnabled;this.mn.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=t.onDispose((()=>{this.mn.delete(t),t.offDispose(h)}))}pn(t,i){let s=i.animationEnabled;const e=[],h=t.onDispose((()=>{e.forEach((t=>{this.mn.delete(t)})),t.offDispose(h)}));return{Sn:(t,i)=>{const h={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.mn.set(t,h)},bn:()=>{e.forEach((t=>{this.mn.delete(t)})),e.length=0},xn:t=>{s=t,e.forEach((t=>{this.re(t,s)}))},Mn:()=>s}}he(t,i){const s=this.mn.get(t);s&&(s.curUnanimatedHighlightValue=_r(i),this.$s.ie())}Js(t,i=!1){const s=this.mn.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}re(t,i){const s=this.mn.get(t);s&&(s.animationEnabled=i)}ne(t){const i=this.mn.get(t);return!!i&&i.animationEnabled}de(t){let i=!1;this.mn.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.$s.ie(!0)}}const xa=new Map,Ma=(t,i)=>{const s=t.getSize(),e=t.getFamily(),h=t.getWeight(),r=t.getStyle(),n=t.getVariant(),o=`${r} ${n?"small-caps":"normal"} ${h} ${s}px ${e}`,a=`${o} ${i.toFixed(2)}`;let l=xa.get(a);return l||(l=((t,i,s,e)=>({font:t,properties:i,dpr:s,id:e}))(o,{type:"font",size:s,family:e,style:r,variant:n,weight:h},i,a),xa.set(a,l)),l};var _a,wa;!function(t){t[t.click=0]="click",t[t.dbclick=1]="dbclick",t[t.mouseDown=2]="mouseDown",t[t.mouseUp=3]="mouseUp",t[t.contextmenu=4]="contextmenu",t[t.wheel=5]="wheel"}(_a||(_a={})),function(t){t[t.touchStart=0]="touchStart",t[t.touchMove=1]="touchMove",t[t.touchEnd=2]="touchEnd"}(wa||(wa={}));const Ca=t=>({container:t._n,scale:t.ti,setMouseStyle:(i,s)=>t.wn(i,s),restoreMouseStyle:i=>t.Cn(i),clientLocation2Engine:(i,s)=>t.Ah(i,s),engineLocation2Client:(i,s)=>t.kn(i,s),captureFrame:(i,s,e)=>t.Tn(i,s,e),renderFrame:(i,s,e=!1)=>t.Fn(i,s,e),layout:()=>{t.In(),t.Pn(),t.Bn.Dn(),t.ie()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.Ln(i,s),onRenderFrame:i=>t.Rn(i),offRenderFrame:i=>t.En(i)}),ka=[];let Ta;const Fa=()=>{if(void 0!==Ta){const t=Ch.getComputedStyle(Ch.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));Ta.style.height=Ch.innerHeight-i+"px",(()=>{for(let t=0;t<ka.length;t+=1)ka[t]()})()}},Ia=new Ee({color:me(255,255,255)}),Pa={font:Ma(da,0),fillStyle:Ia,lineStyle:new so({fillStyle:Ia,thickness:1}),pointStyle3D:new Sa.Triangulated};class Da{constructor(t,i,s){this.Ct=new Ze,this.ti=dh.d2({scaleXYConstructor:Nn}),this.On=new Map,this.zn=Ke((()=>this.ie()),60),this.Vn=e(0,0),this.Nn=!1,this.Gn=Ph,this.Un=()=>{},this.Wn=[],this.Yn=-1,this.Hn=[],this.jn=!0,this.Ps=!1,this.$n=!1,this.Pn=()=>{const{bottom:t,left:i}=this._n.getBoundingClientRect();return this.Vn=e(Math.floor(i),Math.floor(t)),this},this.In=()=>{this.Xn&&this.Xn()},this.wn=(t,i)=>{if(!i){this._n.style.cursor=t;const i=this.Yn;return this.Yn+=1,this.Hn.push([i,t]),i}return this.Cn(i),this.wn(t)},this.Cn=t=>{const i=t?this.Hn.findIndex((i=>i[0]===t)):-1;i>=0?(this.Hn.splice(i,1),this.Hn.length>0?this._n.style.cursor=this.Hn[this.Hn.length-1][1]:this._n.style.cursor="default"):(this.Hn.push([0,"default"]),this._n.style.cursor="default")},this.Zn=t=>(this.Qn.M(t),this),this.Jn=()=>this.Qn._(),this.Kn=()=>{this.Gn&&this.Gn(1e3/60),this.qn(),this.io(),this.Un&&this.Un()},this.so=t=>(this.On.set(t.eo(),t),this.On=new Map([...this.On.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.ho=t=>(this.On.delete(t),this),this.Vt=()=>(this.Qn.o=!1,this),this.Nt=()=>(this.Qn.o=!0,this),this.ro=t=>{if(!this.jn)return;const i=this.no,s=i&&i.clientX===t.clientX&&i.clientY===t.clientY,h=this.Ah(t.clientX,t.clientY),r=this.oo(t,{x:t.clientX,y:t.clientY});if(this.ao&&((null==r?void 0:r.entity)!==this.ao.entity||r.collectionMember!==this.ao.collectionMember)&&!this.lo){this.ao.entity.Bs=!1;const i=this.ao.entity.uo;i&&i(this.ao.entity,t,this.ao.collectionMember)}if(r&&r.entity.getMouseInteractions()&&!this.lo)if(r.entity.Bs){if(!s){const i=r.entity.co;i&&i(r.entity,t,r.collectionMember)}}else{r.entity.Bs=!0;const i=r.entity.do;i&&i(r.entity,t,r.collectionMember)}if(this.lo){const s=this.lo.entity.fo,h=i?e(t.clientX-i.clientX,i.clientY-t.clientY):{x:0,y:0};!s||0===h.x&&0===h.y||s(this.lo.entity,t,this.lo.button,this.lo.startLocation,h,this.lo.collectionMember)}this.Ao=t,this.no=t,this.vo=h,this.ao=r},this.yo=t=>{if(this.jn=!1,this.vo=void 0,this.Ao=t,this.ao&&!this.mo&&!this.lo){this.ao.entity.Bs=!1;const i=this.ao.entity.uo;i&&i(this.ao.entity,t,this.ao.collectionMember),this.ao=void 0}},this.po=t=>{if(this.jn=!0,this.Ao=t,this.lo&&t.buttons<=0){const i=this.lo.entity.So;i&&i(this.lo.entity,t,this.lo.button,this.lo.startLocation,this.lo.collectionMember),this.lo=void 0}if(this.mo&&t.buttons<=0){const i=this.mo.entity.bo;i&&i(this.mo.entity,t,this.mo.collectionMember),this.mo=void 0}},this.xo=()=>this.vo,this.Bn=t,this.zs=i.theme,this.Mo=s.Mo,this._o=s._o,this.wo=s.wo,this.Co={ko:i&&i.overrideInteractionMouseButtons?i.overrideInteractionMouseButtons:void 0,ke:i&&void 0!==i.resourcesBaseUrl&&null!==i.resourcesBaseUrl?i.resourcesBaseUrl:`${Ch.location.origin}/resources`,To:!i||!("warnings"in i)||"boolean"!=typeof i.warnings||i.warnings,Fo:(()=>{const t=null==i?void 0:i.pickingPrecision;if("string"==typeof t){const i=t.toLowerCase();if("best"===i)return 1;if("high"===i)return.5;if("low"===i)return 1/8}return 1/4})(),Io:void 0===(null==i?void 0:i.interactable)||i.interactable,Po:void 0===i.textPixelSnappingEnabled||i.textPixelSnappingEnabled};const h=i?i.container:void 0;if(h){if("string"==typeof h){const t=Ch.document.getElementById(h);if(!t)throw new Error(`Container "${h}" doesn't exist.`);this._n=t}else this._n=h;Ch.addEventListener("resize",this.In),this.Wn.push((()=>{Ch.removeEventListener("resize",this.In)}))}else{if(void 0===Ta){const t=Ch.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",Ch.document.body.appendChild(t),Ta=t,Ch.addEventListener("resize",Fa)}let t=1;for(;null!==Ch.document.getElementById(`chart-${t}`);)t+=1;this._n=Ch.document.createElement("div"),this._n.id=`chart-${t}`,this._n.style.flex="1",this._n.style.height="100%",Ta.appendChild(this._n),Fa(),ka.push(this.In),this.Wn.push((()=>{Ta&&Ta.removeChild(this._n),ka.includes(this.In)&&ka.splice(ka.indexOf(this.In),1),0===ka.length&&Ta&&(Ch.document.body.removeChild(Ta),Ta=void 0,Ch.removeEventListener("resize",Fa))}))}if(Ch.ResizeObserver){const t=t=>{for(const i of t)i.target===this._n&&this.In()};this.Do=new Ch.ResizeObserver(t.bind(this)),this.Do.observe(this._n)}""===this._n.style.position&&(this._n.style.position="relative"),this._n.style.boxSizing="content-box",this._n.addEventListener("fullscreenchange",this.In),this._n.addEventListener("webkitfullscreenchange",this.In);const r=i?i.maxFps:void 0;this.Bo=r?-1===r?-1:0!==r?1e3/r:0:0;const n=new Map;let o=!1;const a=(t,i)=>s=>{const e=function(t){return{x:t.clientX,y:t.clientY}}(s);switch(s.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":n.set(s.pointerId,e);break;default:n.delete(s.pointerId),o=!1}switch(s.interactions=Array.from(n.values()),s.pointerType){case"pen":case"mouse":default:t&&t(s);break;case"touch":i&&i(s)}s.defaultPrevented&&(o=!0)};this._n.onwheel=this.Lo(_a.wheel),this._n.oncontextmenu=this.Lo(_a.contextmenu),this._n.onclick=this.Lo(_a.click),this._n.ondblclick=this.Lo(_a.dbclick),this._n.onlostpointercapture=()=>{o=!1},this._n.ontouchmove=t=>{o&&t.preventDefault()},this._n.onpointerover=a(),this._n.onpointerenter=a(this.po),this._n.onpointerdown=a(this.Lo(_a.mouseDown),this.Ro(wa.touchStart)),this._n.onpointermove=a(this.ro,this.Ro(wa.touchMove)),this._n.onpointerup=a(this.Lo(_a.mouseUp),this.Ro(wa.touchEnd)),this._n.onpointercancel=a(),this._n.onpointerout=a(),this._n.onpointerleave=a(this.yo,this.Ro(wa.touchEnd)),Ch.addEventListener("scroll",this.Pn,{passive:!0}),this.Qn=u(new ve({r:0,g:0,b:0,a:0})),this.js=new ba(this)}Eo(t,i){var s,e,h,r;(null===(s=this.ao)||void 0===s?void 0:s.entity)===t.entity&&this.ao.collectionMember===t.collectionMember&&(this.ao=i),(null===(e=this.Oo)||void 0===e?void 0:e.entity)===t.entity&&this.Oo.collectionMember===t.collectionMember&&(this.Oo=i),(null===(h=this.mo)||void 0===h?void 0:h.entity)===t.entity&&this.mo.collectionMember===t.collectionMember&&(this.mo={...i,event:this.mo.event}),(null===(r=this.lo)||void 0===r?void 0:r.entity)===t.entity&&this.lo.collectionMember===t.collectionMember&&(this.lo={...i,button:this.lo.button,startLocation:this.lo.startLocation})}zo(){this.$n=!0,this.Gn=void 0,this.Un=void 0}Rn(t){return this.Ct.on("render",t)}En(t){return this.Ct.off(t)}Vo(){return this.No}Go(){return this.Uo}setBackgroundFillStyle(t){return this.Wo.ah(t),this}getBackgroundFillStyle(){return this.Wo.pr()}setBackgroundStrokeStyle(t){return this.Wo.oh(t),this}getBackgroundStrokeStyle(){return this.Wo.Yo()}Ho(t){return this.Un=t,this}jo(t){return this.Gn=t,this}$o(t){return this.On.get(t)}Xo(){return Array.from(this.On.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}Lo(t){return i=>this.Zo(t,i)}Zo(t,i){if(!this.jn)return;t===_a.contextmenu&&qh(i);const s=this.Ah(i.clientX,i.clientY),h=this.oo(i,{x:i.clientX,y:i.clientY});if(t===_a.mouseUp){if(this.lo){const t=this.lo.entity.So;if(t&&t(this.lo.entity,i,this.lo.button,this.lo.startLocation,this.lo.collectionMember),(null==h?void 0:h.entity)!==this.lo.entity||h.collectionMember!==this.lo.collectionMember){this.lo.entity.Bs=!1;const t=this.lo.entity.uo;t&&t(this.lo.entity,i,this.lo.collectionMember)}this.lo=void 0}if(this.mo){const t=this.mo.entity.getMouseInteractions()&&this.mo.entity.bo;t&&t(this.mo.entity,i,this.mo.collectionMember),this.mo=void 0}}else if(h&&h.entity.getMouseInteractions()){const s=t===_a.click?h.entity.Qo:t===_a.dbclick?h.entity.Jo:t===_a.mouseDown?h.entity.Ko:t===_a.wheel?h.entity.qo:t===_a.contextmenu?h.entity.ta:void 0;if(s&&s(h.entity,i,h.collectionMember),t===_a.mouseDown){this.mo={entity:h.entity,collectionMember:h.collectionMember,event:i};const t=this.mo.event.button,s=h.entity.ia;s&&s(h.entity,i,t,h.collectionMember),this.lo={entity:h.entity,collectionMember:h.collectionMember,button:t,startLocation:e(i.clientX,i.clientY)}}}this.Ao=i,this.vo=s,this.ao=h}Ro(t){return i=>this.sa(t,i)}sa(t,i){const s=i.interactions.length;if(this.ea=i,this.Oo){const e=t===wa.touchMove?this.Oo.entity.ha:t===wa.touchEnd?this.Oo.entity.ra:t===wa.touchStart?this.Oo.entity.na:void 0;e&&e(this.Oo.entity,i,this.Oo.collectionMember),t===wa.touchEnd&&0===s&&(this.Oo.entity.Bs=!1,this.Oo=void 0)}else if(t===wa.touchStart){for(let t=0;t<s&&(this.Oo=this.oo(i,{x:i.interactions[t].x,y:i.interactions[t].y}),!this.Oo);t+=1);if(this.Oo){this.Oo.entity.Bs=!0;const t=this.Oo.entity.na;t&&t(this.Oo.entity,i,this.Oo.collectionMember)}}t===wa.touchEnd?this.vo=void 0:this.vo=this.Ah(i.clientX,i.clientY)}oa(t){return this.Ct.on("resize",t)}aa(t){return this.Ct.off(t,"resize")}la(){return this.Ct.topicOff("resize"),this}ua(t){return this.Ct.on("inViewChange",t)}ca(t){return this.Ct.off(t)}Bt(){if(!this.Ps){if(this.Ps=!0,this.On)for(const t of this.On.values())t.Bt();this.Gn=void 0,this.Un=void 0,Ch.removeEventListener("scroll",this.Pn),this._n.removeEventListener("fullscreenchange",this.In),this._n.removeEventListener("webkitfullscreenchange",this.In),this.Do&&(this.Do.disconnect(),this.Do=void 0),this.Wn.forEach((t=>{t()})),this.Wn.length=0}}Ah(t,i){return e(t-this.Vn.x,this.Vn.y-i)}kn(t,i){return e(t+this.Vn.x,this.Vn.y-i)}da(t){const i=this.Ah(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}fa(t){const i=this.kn(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}}const Ba=(t=1)=>({type:"horizontalProgressive",packager:(i,s,h)=>{if(i.length>1){const r=un(s,h*t),n=Math.abs(r.x),o=i.length,a=[];let l=0,u=0,c=i[0].x+n;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x<c&&u<o){const s=u;let h=t.y,r=t.y;for(;u<o&&i[u].x<=c;)i[u].y>h&&(h=i[u].y),i[u].y<r&&(r=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=e(t,r),a[l+1]=e(t,h),a[l+2]=i[u-1],l+=3}}c+=n}return a}return i.slice()}}),La=(t=1)=>({type:"horizontalRegressive",packager:(i,s,h)=>{if(i.length>1){const r=un(s,h*t),n=Math.abs(r.x),o=i.length,a=[];let l=0,u=0,c=i[0].x-n;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x>c&&u<o){const s=u;let h=t.y,r=t.y;for(;u<o&&i[u].x>=c;)i[u].y>h&&(h=i[u].y),i[u].y<r&&(r=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=e(t,r),a[l+1]=e(t,h),a[l+2]=i[u-1],l+=3}}c-=n}return a}return i.slice()}}),Ra=(t=1)=>({type:"verticalProgressive",packager:(i,s,h)=>{if(i.length>1){const r=un(s,h*t),n=Math.abs(r.y),o=i.length,a=[];let l=0,u=0,c=i[0].y+n;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y<c&&u<o){const s=u;let h=t.x,r=t.x;for(;u<o&&i[u].y<=c;)i[u].x>h&&(h=i[u].x),i[u].x<r&&(r=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=e(r,t),a[l+1]=e(h,t),a[l+2]=i[u-1],l+=3}}c+=n}return a}return i.slice()}}),Ea=(t=1)=>({type:"verticalRegressive",packager:(i,s,h)=>{if(i.length>1){const r=un(s,h*t),n=Math.abs(r.y),o=i.length,a=[];let l=0,u=0,c=i[0].y-n;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y>c&&u<o){const s=u;let h=t.x,r=t.x;for(;u<o&&i[u].y>=c;)i[u].x>h&&(h=i[u].x),i[u].x<r&&(r=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=e(r,t),a[l+1]=e(h,t),a[l+2]=i[u-1],l+=3}}c-=n}return a}return i.slice()}});var Oa;t.PointShape=void 0,(Oa=t.PointShape||(t.PointShape={}))[Oa.Square=0]="Square",Oa[Oa.Circle=1]="Circle",Oa[Oa.Triangle=2]="Triangle",Oa[Oa.Cross=3]="Cross",Oa[Oa.Diamond=4]="Diamond",Oa[Oa.Plus=5]="Plus",Oa[Oa.Minus=6]="Minus",Oa[Oa.Arrow=7]="Arrow",Oa[Oa.Star=8]="Star";const za={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"};var Va;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(Va||(Va={}));const Na=t=>{const i="nearest"===t?Va.Nearest:"nearest-x"===t?Va.NearestX:"nearest-y"===t?Va.NearestY:void 0;return void 0!==i?i:Va.NearestX},Ga=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.length;if(0===u)return;const c=e?1:0,d=u-(h?2:1);if(s===Va.Nearest)return Ua(t,i,r,n,c,d);if(s===Va.NearestX||s===Va.NearestY){if("boolean"==typeof l&&("x"===a&&s===Va.NearestX||"y"===a&&s===Va.NearestY))return Ha(t,Ah(i,n,r),a,l,c,d);if(s===Va.NearestX)return Wa(t,Ah(i,n,r),o,c,d);if(s===Va.NearestY)return Ya(t,Ah(i,n,r),o,c,d)}},Ua=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=Ah(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},Wa=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},Ya=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},Ha=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),v=r,y=-1;for(;;){const i=o-(n?t[g].x:t[g].y);if(i*(e?-1:1)>0)A=Math.min(g+1,v),y=Math.floor((A+v)/2);else{if(0===Math.abs(i))return g;v=Math.max(g-1,A),y=Math.floor((A+v)/2)}if(y===g){const s=g>h?Math.abs(o-(n?t[g-1].x:t[g-1].y)):Or,e=g<r?Math.abs(o-(n?t[g+1].x:t[g+1].y)):Or,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return g-1;case e:return g+1;default:return g}}else g=y}},ja=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),v=r,y=-1;for(;;){const s=o-(n?t[g].x:t[g].y);if(s*(e?-1:1)>0)A=Math.min(g+1,v),y=Math.floor((A+v)/2);else{if(0===Math.abs(s))return{a:g,b:g,lerpAmount:0};v=Math.max(g-1,A),y=Math.floor((A+v)/2)}if(y===g){if(s*(e?-1:1)<0&&g>h){const s=t[g-1],e=t[g];return{a:g-1,b:g,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(g<r){const s=t[g],e=t[g+1];return{a:g,b:g+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:g,b:g,lerpAmount:0}}g=y}};let $a=0;class Xa{constructor(t,i,s){this.Aa=u(!0),this.ga=!1,this.Bs=!1,this.va=!1,this.Ps=!1,this.Ds=!0,this.ya=void 0,this.ma=0,this.Ct=new Ze,this.co=void 0,this.do=void 0,this.uo=void 0,this.Qo=void 0,this.qo=void 0,this.ta=void 0,this.Jo=void 0,this.Ko=void 0,this.bo=void 0,this.ia=void 0,this.fo=void 0,this.So=void 0,this.na=void 0,this.ha=void 0,this.ra=void 0,this.onDispose=t=>this.Ct.on("dispose",t),this.offDispose=t=>this.Ct.off(t,"dispose"),this.$s=t,this.pa=i,this.Sa=s,this.ba=$a,$a+=1,this.xa=t.zs.highlightColorOffset}Ma(t){return void 0!==this.Sa.find((i=>i.type===t))}_a(t,i){var s;return!!this.Ma(t)&&!0===i(null===(s=this.Sa.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.Ps||(this.Bs&&this.uo&&this.uo(this,void 0,void 0),this.Ps=!0,this.pa(this),this.Ct.emit("dispose",this)),this}isDisposed(){return this.Ps}setVisible(t){const i=this.Ds;return this.Ds=t,!t&&i&&(this.Bs&&this.uo&&this.uo(this,void 0,void 0),this.Bs=!1),this}getVisible(){return this.Ds}setMouseInteractions(t){const i=this.Aa._();return this.Aa.M(t),t||(i&&this.Bs&&this.uo&&this.uo(this,void 0,void 0),this.Bs=!1),this}getMouseInteractions(){return this.Aa._()}getIsUnderMouse(){return this.Bs}getIsGrabbed(){return this.va}setMouseMoveEventHandler(t){return this.co=t,this}setMouseEnterEventHandler(t){return this.do=t,this}setMouseLeaveEventHandler(t){return this.uo=t,this}setMouseClickEventHandler(t){return this.Qo=t,this}setMouseDoubleClickEventHandler(t){return this.Jo=t,this}setMouseDownEventHandler(t){return this.Ko=t,this}setMouseUpEventHandler(t){return this.bo=t,this}setMouseWheelEventHandler(t){return this.qo=t,this}setMouseContextMenuEventHandler(t){return this.ta=t,this}setMouseDragEventHandler(t){return this.fo=t,this}setMouseDragStartEventHandler(t){return this.ia=t,this}setMouseDragStopEventHandler(t){return this.So=t,this}setTouchStartEventHandler(t){return this.na=t,this}setTouchMoveEventHandler(t){return this.ha=t,this}setTouchEndEventHandler(t){return this.ra=t,this}wa(t){return this.ya=t,this}Ca(){return this.ya?this.ya:Za}Xs(t){return this.ma=t,this}ka(){return this.ma}Ta(t){return this.xa=t,this}Fa(){return this.xa}}const Za=a(e(0,0),e(0,0));class Qa extends Xa{constructor(t,i,s,e){super(t,s,e),this.Ia=0,this.ae=i,this.ae.Pa=!0}Da(t){return this.Ia===t||(this.Ia=t,this.ae.Pa=!0),this}Ba(){return this.Ia}}class Ja extends Qa{constructor(t,i,s,e,h){super(t,i,e,h),this.La=!0,this.ti=s}}const Ka=(t,i,s)=>{if(s instanceof Nn){const h=s.ks(),r=fn(i,{x:Math.abs(h.x),y:Math.abs(h.y)});return a(e(t.min.x-r.x,t.min.y-r.y),e(t.max.x+r.x,t.max.y+r.y))}return a(s.ts(e(t.min.x,t.min.y),un(i,-1)),s.ts(e(t.max.x,t.max.y),i))},qa=(t,i)=>"function"==typeof i?i(t):i,tl=(t,i)=>!t||t!==i,il=(t,i)=>t===De&&i!==De,sl=t=>t!==De;class el extends Ja{constructor(t,i,s,e,h){super(t,i,s,e,h),this.sh=Pa.fillStyle,this.$s=t}ah(t){return this.sh=qa(this.sh,t),this}pr(){return this.sh}Ra(){return tl(this.Ea,this.sh)}Oa(){return il(this.Ea,this.sh)}za(){return sl(this.sh)}Va(t){this.Ea=t}}class hl extends el{constructor(t,i,s,e,h){super(t,i,s,e,h),this.eh=Pa.lineStyle,this.$s=t}oh(t){return this.eh="function"==typeof t?t(this.eh):t,this}Yo(){return this.eh}Na(){return!this.Ga||this.Ga!==this.eh}Ua(t){return!this.Ga||this.Ga.getThickness()!==t}za(){return this.eh!==ah||super.za()}Oa(){return(this.eh!==ah||this.sh!==De)&&this.Ga===ah&&this.Ea===De}Wa(t){this.Ga=t}}class rl extends el{constructor(t,i,s,e,h,r=u(5)){super(t,i,s,e,h),this.size=u(5),this.size=r}Wt(t){return this.size.M(t),this}}class nl extends el{constructor(t,i,s,h,r,n=u(Pa.font)){super(t,i,s,h,r),this.Ya=u(""),this.Ha=u(e(0,0)),this.ja=u(0),this.$a=u(0),this.Xa=u(e(0,0)),this.Za=u(0),this.Qa=u(da),this.K=e(0,0),this.Pi=u(c(1,1,1,1)),this.Ja=u(d(4,4,4,4)),this.font=u(Pa.font),this.Ka=!1,this.font=n}za(){return sl(this.sh)&&this.Ya._().length>0}Oa(){return!1===this.Ka&&this.za()}mr(t){return this.Ya.M(t),this}vr(){return this.Ya._()}Mr(t){return ca(t)?this.Qa.M(t):this.Qa.M(t(this.Qa._())),this}br(){return this.Qa._()}qa(t){return this.Qa.M(this.Qa._().setFamily(t)),this}tl(){return this.Qa._().getFamily()}il(t){return this.Qa.M(this.Qa._().setSize(t)),this}sl(){return this.Qa._().getSize()}el(t){return this.Qa.M(this.Qa._().setWeight(t)),this}hl(){return this.Qa._().getWeight()}rl(t){return this.Qa.M(this.Qa._().setStyle(t)),this}nl(){return this.Qa._().getStyle()}ol(t){return this.Qa.M(this.Qa._().setVariant(t)),this}al(){return this.Qa._().getVariant()}dh(t){return this.Ha.M(t),this}ll(){return this.Ha._()}_r(t){return this.Za.M(t),this}wr(){return this.Za._()}ul(t,i){return this.Xa.M(e(t,i)),this}cl(){return this.Xa._()}dl(t){return this.$a.M(t),this}fl(){return this.$a._()}Al(t){return this.ja.M(t),this}vl(){return this.ja._()}yl(t){return this.$a.M(t.x),this.ja.M(t.y),this}dn(t){return this.Pi.M(t),this}ml(){return this.Pi._()}fn(t){return this.Ja.M(t),this}pl(){return this.Ja._()}}class ol extends rl{constructor(i,s,e,h,r,n=5){super(i,s,e,h,r,u(n)),this.Sl=[],this.bl=u(t.PointShape.Square),this.Za=u(0),this.xl=u(!1),this.Ml=u(!1),this._l=u(!1),this.wl=Vr,this.Cl=0,this.kl=[],this.Tl=0,this.Fl=Vr,this.Il=Va.Nearest,this.Pl=!1,this.Dl=void 0}Bl(t){return this.Il=t,this}Ll(){return this.kl}Rl(){return this.Sl}El(t){return this.bl.M(t),this}Ol(){return this.bl._()}_r(t){return this.Za.M(t),this}wr(){return this.Za._()}zl(t){return this.xl.M(t),this}Vl(t){return this.Ml.M(t),this}Nl(t){return this._l.M(t),this}Gl(t,i){return Array.isArray(t)||(t=[t]),this.Tl+=t.length,this.kl=lr(this.kl,t,{canReturnB:!0}),this.Fl&&(this.Fl=i?sn(this.Fl,i):void 0),this.Dl=void 0,this}_i(){return this.Pl=!0,this.Sl.length=0,this.Cl=0,this.wl=Vr,this.kl=[],this.Tl=0,this.Dl=void 0,this}Ul(){return this.Cl}Wl(){return this.Tl}}class al extends hl{constructor(t,i,s,h,r){super(t,i,s,h,r),this.Ha=u(e(0,0)),this.zt=u(e(100,100)),this.Za=u(0),this.K=u(e(0,0)),this.Yl=!1}de(){return this.Hl(),this}dh(t){const i=this.Ha._();return t.x===i.x&&t.y===i.y||(this.Ha.M(t),this.Hl()),this}ll(){return this.Ha._()}jl(t){const i=this.Ha._();return t!==i.x&&(this.Ha.M(e(t,i.y)),this.Hl()),this}$l(t){const i=this.Ha._();return t!==i.y&&(this.Ha.M(e(i.x,t)),this.Hl()),this}Wt(t){const i=this.zt._();return t.x===i.x&&t.y===i.y||(this.zt.M(e(t.x,t.y)),this.Hl()),this}Hi(){return this.zt._()}Xl(t){const i=this.zt._();return t!==i.x&&(this.zt.M(e(t,i.y)),this.Hl()),this}Zl(t){const i=this.zt._();return t!==i.x&&(this.zt.M(e(i.x,t)),this.Hl()),this}_r(t){return this.Za.M(t),this}wr(){return this.Za._()}Ql(t){const i=this.K._();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.Yl=!1,this.Hl()):(this.Yl=!0,this.K.M(t))),this}Hl(){if(!this.Yl){const t=this.Ha._(),i=this.zt._(),s=e(t.x+i.x/2,t.y+i.y/2),h=this.K._();s.x===h.x&&s.y===h.y||this.K.M(s)}}}class ll extends hl{constructor(){super(...arguments),this.Sl=[],this.Ha=u(e(0,0)),this.wl=Vr,this.Jl=!1}Kl(t){return t=hr(t),this.Sl=t,this.Jl=!0,this}ql(){return this.Sl}ni(){return this.wl.max.x}ri(){return this.wl.min.x}ai(){return this.wl.max.y}oi(){return this.wl.min.y}tu(){return 0}iu(){return 0}}class ul extends ll{}class cl extends el{constructor(t,i,s,e,h){super(t,i,s,e,h),this.su=new Array,this.eu=new Array,this.hu=u({type:"disabled",packager:(t,i,s)=>t.slice()}),this.wl=Vr,this.ru=0,this.nu=!1,this.kl=[Array(),Array()],this.ou=!1,this.au=(new Ee).setColor(me(42,171,240)),this.Pl=!1,this.lu=!1,this.uu=!1}Gl(t,i){const s=this.ru-1,h=s>0&&!this.ou;let[r,n]=h?[[this.su[s]],[this.eu[s]]]:[[],[]];if(t instanceof Array){const[i,s]=o(t);r=lr(r,i,{canReturnB:!0}),n=lr(n,s,{canReturnB:!0})}else{const i=t.position;r.push(e(i,t.high)),n.push(e(i,t.low))}return this.ou?(this.kl[0]=lr(this.kl[0],r,{canReturnB:!0}),this.kl[1]=lr(this.kl[1],n,{canReturnB:!0})):(this.kl=[r,n],this.ou=!0),this.wl=sn(this.wl,i||sn(qr(r),qr(n))),this}_i(){return this.Pl=!0,this.su.length=0,this.eu.length=0,this.ru=0,this.wl=Vr,this}Rl(){return[this.su,this.eu]}Ll(){return[this.kl[0],this.kl[1]]}cu(t){return this.hu.M(t),this}du(){return this.hu._()}fu(t){return this.au="function"==typeof t?t(this.au):t,this}Au(){return this.au}Ul(){return this.ru-(Number(this.lu)+Number(this.uu))}Wl(){return this.kl.length}gu(t){return this.lu=t,this}vu(){return this.lu}yu(t){return this.uu=t,this}mu(){return this.uu}Oa(){return this.Ea===De&&this.pu===De&&(this.sh!==De||this.au!==De)}Su(t){this.pu=t}za(){return this.au!==De||super.za()}Ra(){return super.Ra()||!this.pu||this.pu!==this.au}}class dl extends hl{constructor(t,i,s,h,r){super(t,i,s,h,r),this.Ha=u(e(0,0)),this.bu=u(0),this.ut=u(360),this.xu=u(100),this.Mu=u(100),this._u=u(0),this.wu=u(void 0),this.Cu=e(0,0),this.ku=e(0,0),this.Tu=e(0,0)}Fu(){return this.xu._()}Iu(){return this.Mu._()}ll(){return this.Ha._()}Pu(){return this.bu._()}As(){return this.ut._()}Du(){return this._u._()}Bu(){return this.wu._()}Lu(){return this.Cu}Ru(){return this.ku}Eu(){return this.Tu}dh(t){return this.Ha.M(t),this}Ou(t){return this.bu.M(t),this}bh(t){return this.ut.M(t),this}zu(t){return this.Mu.M(t),this.xu.M(t),this}Vu(t){return this.xu.M(t),this}Nu(t){return this.Mu.M(t),this}Gu(t){return this._u.M(t<0?0:t),this}Uu(t){return this.wu.M(void 0!==t&&t<=0?void 0:t),this}}var fl;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(fl||(fl={}));const Al=(t,i)=>"function"==typeof i?i(t):i,gl=(t,i)=>!t||t!==i,vl=(t,i)=>!t||t.getThickness()!==i,yl=(t,i)=>t===ah&&i!==ah,ml=t=>t!==ah&&t.getFillStyle()!==De;class pl extends Ja{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Wu=Pa.lineStyle,this.engine=t}ph(t){return this.Wu=Al(this.Wu,t),this}Yu(){return this.Wu}Na(){return gl(this.Hu,this.Wu)}ju(t){return vl(this.Hu,t)}Oa(){return yl(this.Hu,this.Wu)}za(){return ml(this.Wu)}$u(t){this.Hu=t}}class Sl extends pl{constructor(t,i,s,h,r){super(t,i,s,h,r),this.ot=e(0,0),this.ut=e(0,0),this.Xu=!1}M({min:t,max:i}){return t.x===this.ot.x&&t.y===this.ot.y&&i.x===this.ut.x&&i.y===this.ut.y||(this.Xu=!0,this.ot=t,this.ut=i),this}gs(){return this.ot}As(){return this.ut}xh(t){return t.x===this.ot.x&&t.y===this.ot.y||(this.Xu=!0,this.ot=t),this}bh(t){return t.x===this.ut.x&&t.y===this.ut.y||(this.Xu=!0,this.ut=t),this}}class bl extends pl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Zu=void 0,this.Qu=!1}}class xl extends pl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ju=[],this.wl=Vr,this.kl=new Array,this.Cl=0,this.Il=Va.NearestX,this.Pl=!1,this.Ku=u(void 0),this.lu=!1,this.uu=!1}qu(t){return this.Ku.M(t),this}tc(){return this.Ku._()}Ll(){return this.kl}Rl(){return this.Ju}Bl(t){return this.Il=t,this}_i(){return this.Pl=!0,this.Ju.length=0,this.Cl=0,this.kl=[],this.wl=Vr,this}Ul(){return this.Cl-(Number(this.lu)+Number(this.uu))}Wl(){return this.kl.length}gu(t){return this.lu=t,this}vu(){return this.lu}yu(t){return this.uu=t,this}mu(){return this.uu}}const Ml=i=>{const s=i.getDraggingMode();return void 0!==s&&s!==t.UIDraggingModes.notDraggable?s===t.UIDraggingModes.draggable?t.MouseStyles.Move:s===t.UIDraggingModes.onlyHorizontal?t.MouseStyles.Horizontal:t.MouseStyles.Vertical:void 0};class _l{constructor(){this.Ds=!0,this.Ct=new Ze,this.ic=0,this.li=(t,i,s)=>{0===this.ic&&this.Ct.emit("mouseEnter",this,i),this.ic+=1},this.ui=(t,i,s)=>{this.ic-=1,this.ic<1&&(this.Ct.emit("mouseLeave",this,i),this.ic=0)},this.ci=(t,i,s)=>{this.Ct.emit("mouseClick",this,i)},this.di=(t,i,s)=>{this.Ct.emit("mouseDoubleClick",this,i)},this.fi=(t,i,s)=>{this.Ct.emit("mouseDown",this,i)},this.Ai=(t,i,s)=>{this.Ct.emit("mouseUp",this,i)},this.gi=(t,i,s)=>{this.Ct.emit("mouseMove",this,i)},this.yi=(t,i,s,e)=>{this.Ct.emit("mouseDragStart",this,i,s)},this.vi=(t,i,s,e,h,r)=>{this.Ct.emit("mouseDrag",this,i,s,e,h)},this.mi=(t,i,s,e,h)=>{this.Ct.emit("mouseDragStop",this,i,s,e)},this.pi=(t,i,s)=>{this.Ct.emit("mouseWheel",this,i)},this.Si=(t,i)=>{this.ic+=1,this.Ct.emit("touchStart",this,i)},this.bi=(t,i)=>{this.Ct.emit("touchMove",this,i)},this.xi=(t,i)=>{this.ic-=1,this.Ct.emit("touchEnd",this,i)},this.sc=t=>(t instanceof Ja?t.setMouseEnterEventHandler(this.li).setMouseLeaveEventHandler(this.ui).setMouseClickEventHandler(this.ci).setMouseDoubleClickEventHandler(this.di).setMouseDownEventHandler(this.fi).setMouseUpEventHandler(this.Ai).setMouseMoveEventHandler(this.gi).setMouseDragEventHandler(this.vi).setMouseDragStartEventHandler(this.yi).setMouseDragStopEventHandler(this.mi).setMouseWheelEventHandler(this.pi).setTouchStartEventHandler(this.Si).setTouchMoveEventHandler(this.bi).setTouchEndEventHandler(this.xi):(t.onMouseEnter(this.li),t.onMouseLeave(this.ui),t.onMouseClick(this.ci),t.onMouseDoubleClick(this.di),t.onMouseDown(this.fi),t.onMouseUp(this.Ai),t.onMouseMove(this.gi),t.onMouseDrag(this.vi),t.onMouseDragStart(this.yi),t.onMouseDragStop(this.mi),t.onMouseWheel(this.pi),t.onTouchStart(this.Si),t.onTouchMove(this.bi),t.onTouchEnd(this.xi)),t)}onMouseEnter(t){return this.Ct.on("mouseEnter",t)}onMouseLeave(t){return this.Ct.on("mouseLeave",t)}onMouseClick(t){return this.Ct.on("mouseClick",t)}onMouseDoubleClick(t){return this.Ct.on("mouseDoubleClick",t)}onMouseDown(t){return this.Ct.on("mouseDown",t)}onMouseUp(t){return this.Ct.on("mouseUp",t)}onMouseMove(t){return this.Ct.on("mouseMove",t)}onMouseDragStart(t){return this.Ct.on("mouseDragStart",t)}onMouseDrag(t){return this.Ct.on("mouseDrag",t)}onMouseDragStop(t){return this.Ct.on("mouseDragStop",t)}onMouseWheel(t){return this.Ct.on("mouseWheel",t)}onTouchStart(t){return this.Ct.on("touchStart",t)}onTouchMove(t){return this.Ct.on("touchMove",t)}onTouchEnd(t){return this.Ct.on("touchEnd",t)}offMouseEnter(t){return this.Ct.off(t,"mouseEnter")}offMouseLeave(t){return this.Ct.off(t,"mouseLeave")}offMouseClick(t){return this.Ct.off(t,"mouseClick")}offMouseDoubleClick(t){return this.Ct.off(t,"mouseDoubleClick")}offMouseDown(t){return this.Ct.off(t,"mouseDown")}offMouseUp(t){return this.Ct.off(t,"mouseUp")}offMouseMove(t){return this.Ct.off(t,"mouseMove")}offMouseDragStart(t){return this.Ct.off(t,"mouseDragStart")}offMouseDrag(t){return this.Ct.off(t,"mouseDrag")}offMouseDragStop(t){return this.Ct.off(t,"mouseDragStop")}offMouseWheel(t){return this.Ct.off(t,"mouseWheel")}offTouchStart(t){return this.Ct.off(t,"touchStart")}offTouchMove(t){return this.Ct.off(t,"touchMove")}offTouchEnd(t){return this.Ct.off(t,"touchEnd")}getIsUnderMouse(){return this.ic>0}setVisible(t){const i=this.Ds!==t;return this.Ds=t,i&&this.Ct.emit("visibleStateChanged",this,this.Ds),this}getVisible(){return this.Ds}onVisibleStateChanged(t){return this.Ct.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.Ct.off(t,"visibleStateChanged")}}const wl=(i,s,e)=>{const h=i.getDraggingMode();if(h!==t.UIDraggingModes.notDraggable){const r=i.scale.ts(i.getPosition(),{x:h!==t.UIDraggingModes.onlyVertical?s.x:0,y:h!==t.UIDraggingModes.onlyHorizontal?s.y:0}),n=i.scale,o=i.getSize(),a=i.getOrigin(),l=n.ts({x:n.x.getInnerStart(),y:n.y.getInnerStart()},fn({x:(1+a.x)/2,y:(1+a.y)/2},o)),u=n.ts({x:n.x.getInnerEnd(),y:n.y.getInnerEnd()},fn({x:(a.x-1)/2,y:(a.y-1)/2},o)),c={x:Math.min(Math.max(r.x,l.x),u.x),y:Math.min(Math.max(r.y,l.y),u.y)};i.setPosition(c),qh(e)}},Cl=(t,i,s,e,h)=>{wl(t,h,i)},kl=(t,i,s,e,h)=>{wl(t,e,h)};class Tl extends _l{constructor(t,i,s,h,r){super(),this.position=e(50,50),this.origin=e(0,0),this.size=e(0,0),this.Ps=!1,this.hc=void 0,this.rc=void 0,this.nc=Ml,this.oc=void 0,this.Aa=!0,this.ac=()=>{const t="function"==typeof this.nc?this.nc(this):this.nc;t&&(this.rc=this.ae.$s.wn(t))},this.lc=()=>{this.ae.$s.Cn(this.rc)},this.Pi=c(0,0,0,0),this.ae=t,this.renderingScale=i,this.scale=s,this.pa=h,this.zs=r,this.ae.ie(),this.onMouseEnter(this.ac),this.onMouseLeave(this.lc),this.onMouseDrag(Cl);const n=Jn(new qn(Ph,kl,Ph));this.onTouchStart(n.onTouchStart),this.onTouchMove(n.onTouchMove),this.onTouchEnd(n.onTouchEnd),this.zs=r}setMouseInteractions(t){return this.uc().forEach((i=>i.setMouseInteractions(t))),this.Aa=t,this}getMouseInteractions(){return this.Aa}setEffect(t){return this.Gs=this.Gs||this.ae.$s.Gs.Us(this,{cc:{shapes:this.uc()}}),this.Gs.cc.te(t),this}getEffect(){return!!this.Gs&&this.Gs.cc.se()}setAutoDispose(t){return this.oc=t,this.ae.ie(),this}getAutoDispose(){return this.oc}getSize(i=t.UISpace.Everything){return i===t.UISpace.Everything?e(this.size.x+(this.Pi.left+this.Pi.right),this.size.y+(this.Pi.bottom+this.Pi.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.Pi="object"==typeof t?f(this.Pi,t):{left:t,top:t,right:t,bottom:t},this.ae.ie(),this}getMargin(){return this.Pi}uh(){if(this.oc){const t=this.size,i=this.renderingScale.Hi(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.oc.type&&s.x>=this.oc.maxWidth||"max-height"===this.oc.type&&s.y>=this.oc.maxHeight)&&this.dispose()}return this}de(){return this}dispose(){return this.Ps||(this.ae.ie(),this.Ps=!0,this.pa(this),this.Ct.emit("dispose",this),this.uc().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.uc().forEach((i=>i.setVisible(t))),this.ae.ie(),this}isDisposed(){return this.Ps}onDispose(t){return this.Ct.on("dispose",t)}offDispose(t){return this.Ct.off(t,"dispose")}setPosition(t){return this.position=t,this.ae.ie(),this}getPosition(i=this.origin,s=t.UISpace.Everything){const e=this.getSize(t.UISpace.Everything),h=this.scale.ts(this.position,fn({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},e));if(s===t.UISpace.Everything)return this.scale.ts(h,fn({x:(i.x+1)/2,y:(i.y+1)/2},e));const r=this.scale.ts(h,{x:this.Pi.left,y:this.Pi.bottom}),n=this.getSize(t.UISpace.Content);return this.scale.ts(r,fn({x:(i.x+1)/2,y:(i.y+1)/2},n))}setOrigin(t){return this.origin=t,this.ae.ie(),this}getOrigin(){return this.origin}setDraggingMode(i=t.UIDraggingModes.notDraggable){return this.hc=i,this.ae.ie(),this}getDraggingMode(){return void 0!==this.hc?this.hc:t.UIDraggingModes.notDraggable}setMouseStyle(t){return this.nc=t,this}getMouseStyle(){return this.nc}}class Fl extends Tl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ja=c(),this.dc=0,this.ae=t,this.fc=e,this.backgroundElement=new this.fc(this.ae,this.renderingScale,this.scale,Ph,r),this.sc(this.backgroundElement)}uc(){return this.backgroundElement.uc()}onHighlight(t){return this.Ct.on("highlight",t)}offHighlight(t){return this.Ct.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}uh(){return super.uh(),this.Ps||this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,t.UISpace.PaddedBackground)).uh(),this}de(){const i=this.getSize(t.UISpace.PaddedContent);return this.backgroundElement.Ac(i).de(),super.de()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.Ja="object"==typeof t?f(this.Ja,t):{left:t,top:t,right:t,bottom:t},this.ae.ie(),this}getPadding(){return this.Ja}getSize(i=t.UISpace.Everything){let s=super.getSize(i);return i>=t.UISpace.PaddedContent&&(s=e(s.x+this.Ja.left+this.Ja.right,s.y+this.Ja.bottom+this.Ja.top)),i>=t.UISpace.PaddedBackground&&(s=e(s.x+this.backgroundElement.gc()+this.backgroundElement.vc(),s.y+this.backgroundElement.yc()+this.backgroundElement.mc())),s}getPosition(i=this.origin,s=t.UISpace.Everything){if(s===t.UISpace.Everything)return super.getPosition(i,s);const h=super.getPosition(e(-1,-1),t.UISpace.Everything),r=this.getMargin(),n=this.scale.ts(h,{x:r.left,y:r.bottom});if(s===t.UISpace.PaddedBackground){const s=this.getSize(t.UISpace.PaddedBackground);return this.scale.ts(n,fn({x:(i.x+1)/2,y:(i.y+1)/2},s))}const o=this.scale.ts(n,{x:this.backgroundElement.gc(),y:this.backgroundElement.yc()});if(s===t.UISpace.PaddedContent){const s=this.getSize(t.UISpace.PaddedContent);return this.scale.ts(o,fn({x:(i.x+1)/2,y:(i.y+1)/2},s))}const a=this.getPadding(),l=this.scale.ts(o,{x:a.left,y:a.bottom}),u=this.getSize(t.UISpace.Content);return this.scale.ts(l,fn({x:(i.x+1)/2,y:(i.y+1)/2},u))}setMouseInteractions(t){return super.setMouseInteractions(t),this.backgroundElement.setMouseInteractions(t),this}getHighlight(){return this.dc}setHighlight(t){return this.dc=_r(t),this.backgroundElement.setHighlight(t),this.Ct.emit("highlight",this,t),this}}const Il=t=>"setBackground"in t;class Pl extends _l{constructor(t,i,s,e,h,r,n,o,a,l,u){super(),this.S=0,this.Sc=1,this.bc=!0,this.xc=new ua,this.Mc=!0,this.Ps=!1,this.axisScale=e,this.renderingScale=h,this._c=n,this.wc=o,this.Cc=a,this.pa=l,this.kc=i,this.Tc=s,this.Fc=this.sc(this.kc.Sh(this.renderingScale)),this.zs=u,this.Ic=this.sc(this.Cc.Pc(this.Tc,this.renderingScale,r,Ph,this.zs,!1).setOrigin(Jh(this.wc)).setDirection(this.wc)),this.axis=t,this.setMouseInteractions(!1),"major"===this.Ic.Dc?this.Fc.ph(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.Ic.Dc?this.Fc.ph(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.Ic.Dc&&this.Fc.ph(u.cursorGridStrokeStyleX)}setValue(t){return this.S=t,this.Tc.ie(),this.Ct.emit("valueChange",this,this.S),this}getValue(){return this.S}setTextFormatter(t){return this.Bc=t,this.Tc.ie(),this}setTickLength(t){return this.Ic.setPointerLength(t),this.kc.ie(),this}getTickLength(){return this.Ic.getPointerLength()}setTickLabelPadding(t){return this.Ic.setTickLabelPadding(t),this.kc.ie(),this}setTickLabelRotation(t){return this.Ic.setTextRotation(t),this.kc.ie(),this}getTickLabelRotation(){return this.Ic.getTextRotation()}getTickLabelPadding(){return this.Ic.getTickLabelPadding()}setGridStrokeLength(t){return this.Sc=t,this.kc.ie(),this}getGridStrokeLength(){return this.Sc}setGridStrokeStyle(t){return this.Fc.ph(t),this.kc.ie(),this}getGridStrokeStyle(){return this.Fc.Yu()}dispose(){return this.Ps||(this.Ps=!0,this.Fc.dispose(),this.Ic.dispose(),this.pa(this),this.kc.$s.ie(),this.Ct.emit("dispose",this)),this}onDispose(t){return this.Ct.on("dispose",t)}offDispose(t){return this.Ct.off(t,"dispose")}setMarkerVisible(t){return this.bc=t,this.Tc.ie(),this}getMarkerVisible(){return this.bc}setMarker(t){return t(this.Ic),this.Tc.ie(),this}getMarker(){return this.Ic}setMouseInteractions(t){return this.Ic.setMouseInteractions(t),this.Fc.setMouseInteractions(t),this}getMouseInteractions(){return this.Fc.getMouseInteractions()}setAllocatesAxisSpace(t){return this.Mc=t,this.Tc.ie(),this}getAllocatesAxisSpace(){return this.Mc}isInScale(){return Xr(this.S,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.Ct.on("valueChange",t)}offValueChange(t){return this.Ct.off(t,"valueChange")}}class Dl extends Pl{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,u,a,l),this.Lc=!1,this.pa=a,this.kc=i,this.Tc=s}dispose(){return this.Lc=!1,super.dispose()}update(){return this}plot(t,i,s,e,h){if(this.isInScale()&&this.getVisible()&&t){this.Lc=!1;const t=fh(this.S,this.axisScale,this._c.getWidth(this.renderingScale));this.Fc.setVisible(!0).xh(this._c.toPoint(t,i)).bh(this._c.toPoint(t,i-(e+s*this.Sc))),this.bc?(this.Bc&&this.Ic.setText(this.Bc(this.S,this)),this.Ic.setVisible(!0).setPosition(this._c.toPoint(t,h))):this.Ic.setVisible(!1)}else this.Fc.setVisible(!1),this.Ic.setVisible(!1);return this.Ic.de().uh(),this}Rc(){const t=this.Ic.de().getSize();return this._c.getHeight(t)}}const Bl=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),Ll=(t,i)=>(fr(t.setButtonSize(i.uiButtonSize),i,!1,{fill:i.uiButtonFillStyle}),t),Rl=(t,i,s)=>{s&&Il(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},El={uiElement:void 0,stylers:hs(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},Ol={background:void 0,setBackground(t){return{...this,background:t}}},zl={Pc(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return Rl(n,h,r),n}},Vl={Pc(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return Rl(n,h,r),n}};class Nl extends Tl{constructor(){super(...arguments),this.Ec=!0}uh(){return super.uh(),this}setMouseInteractions(t){return this.Ec=t,this}getMouseInteractions(){return this.Ec}uc(){return[]}}class Gl extends Nl{onHighlight(t){return this.Ct.on("highlight",t)}offHighlight(t){return this.Ct.off(t)}Ac(t){return this.size=t,this}gc(){return 0}vc(){return 0}mc(){return 0}yc(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return De}setStrokeStyle(){return this}getStrokeStyle(){return ah}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class Ul extends Tl{constructor(){super(...arguments),this.Ct=new Ze,this.dc=0}onHighlight(t){return this.Ct.on("highlight",t)}offHighlight(t){return this.Ct.off(t)}getHighlight(){return this.dc}setHighlight(t){return this.dc=t,this.uc().forEach((i=>i.Xs(t))),this.Ct.emit("highlight",this,t),this.ae.ie(),this}}class Wl extends Ul{}class Yl extends Wl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ae=t,this.bl=this.ae.Oc(this.renderingScale,fl.Simple).setVisible(!1).ah(De).oh(ah),this.sc(this.bl)}zc(){const t=this.Vc();if(t.length>2){const i=qr(t),s=e(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const h=t.map((t=>{const h=cn(t,un(i.min,-1));return this.scale.ts(this.position,cn(h,fn(un(cn(this.origin,e(1,1)),-.5),s)))})).map((t=>Ah(t,this.scale,this.renderingScale)));this.bl.Kl(h).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.bl&&this.bl.setVisible(!1),this.setContentSize(e(0,0))}uh(){return super.uh(),this.Ps||this.zc(),this}de(){return this.zc(),super.de()}setVisible(t){return super.setVisible(t),this.bl.setVisible(t),this}}const Hl=(t,i,s)=>t*(1-s)+i*s,jl=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),u=Hl(s.value,h.value,r),c=Hl(i.value,e.value,o);return Hl(c,u,l)},$l={warm:t=>i=>Se(60/(t-1)*i,.8,.8),cold:t=>i=>Se(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>Se(360/t*i,.8,.8),reverseSpectrum:t=>i=>Se(360/t*(t-i),.8,.8),flatUI:t=>i=>Se(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return Se(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return Se(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return Se(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return Se(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return Se(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>Se(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return Se(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return Se(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),Se(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return Se(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let l=0;if(o!==a){const t=o-a;switch(o){case h:l=(r-n)/t+(r<n?6:0);break;case r:l=(n-h)/t+2;break;case n:l=(h-r)/t+4;break;default:l=0}return l=l/6*360,Se(l,.8,e)}return Se(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>Se(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>Xl([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>Xl([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>Xl([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>Xl([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>Xl([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>Xl([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},Xl=(t,i,s)=>{const e=Ql(i,s),[h,r]=Jl(e,t),n=Zl(t[h]),o=Zl(t[r]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:Hl(n.h,o.h,a),s:Hl(n.s,o.s,a),v:Hl(n.v,o.v,a)};return Se(l.h,l.s,l.v)},Zl=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,l=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(pe(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},Ql=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},Jl=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class Kl{constructor(){this.type="simple"}}const ql=new Kl;class tu{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=pe("#000"),this.specularColor=pe("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const iu=new tu,su={Simple:Kl,Phong:tu};var eu;t.ImageFitMode=void 0,(eu=t.ImageFitMode||(t.ImageFitMode={}))[eu.Fill=0]="Fill",eu[eu.Fit=1]="Fit",eu[eu.Stretch=2]="Stretch",eu[eu.Center=3]="Center",eu[eu.Tile=4]="Tile";const hu=le({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:me(0,0,0,0),sourceMissingColor:me(0,0,0,0),fitMode:t.ImageFitMode.Fill});class ru extends hu{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return ye(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return ye(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const nu=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),ou={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},au=le({type:"linestyle",lineType:"dashed",pattern:ou.DashedEqual,fillStyle:new Ee({color:me(255,255,255)}),thickness:1,patternScale:3});class lu extends au{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Ft(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const uu=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),cu=le({type:"icon",width:void 0,height:void 0,Nc:void 0,Gc:Ph,Uc:Ph});class du extends cu{constructor(t,i,s,e){super({...e,Nc:t,Gc:i,Uc:s})}dispose(){return this.Uc(this),this}setWidth(t){const i=this.set("width",t);return this.Gc(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.Gc(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.Gc(s),s}Hi(){if(!this.Nc)return{x:0,y:0};const t=this.Nc.width,i=this.Nc.height;if(0===t||0===i)return{x:0,y:0};const s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const fu=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),Au=le({type:"glow",color:me(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class gu extends Au{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}class vu{constructor(t){this.Wc=0,this.Yc=0,this.Hc=0,this.jc=!1,this.$c=!0,this.Xc=!1,this.Zc={warningDisplayed:!1,expandEvents:[]},this.Ct=new Ze,this.$c=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,void 0!==(null==t?void 0:t.dataPattern)&&(this.Qc={userSpecified:null===t.dataPattern?void 0:t.dataPattern}),this.Jc=void 0!==(null==t?void 0:t.lookupValues)&&t.lookupValues,this.Kc=void 0!==(null==t?void 0:t.colors)&&t.colors,this.qc=void 0!==(null==t?void 0:t.ids)&&t.ids,this.td=void 0!==(null==t?void 0:t.sizes)&&t.sizes,this.sd=void 0!==(null==t?void 0:t.rotations)&&t.rotations,this.ed=(null==t?void 0:t.dataStorage)?t.dataStorage:Float64Array,this.hd=!1!==(null==t?void 0:t.allowInputModification)}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,i){return this.appendSamples({xValues:t,yValues:i}),this}appendJSON(t,i={x:"x",y:"y"}){const s=t.length,e=i.x,h=i.y,r=i.lookupValue,n=i.size,o=i.rotation,a=i.color,l=i.id;let u,c,d,f,A,g,v;if(e){u=new this.ed(s);for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[e]}}if(h){c=new this.ed(s);for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[h]}}if(r){d=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];d[i]=s[r]}}if(a){f=[];for(let i=0;i<s;i+=1){const s=t[i];f[i]=s[a]}}if(l){A=new Uint32Array(s);for(let i=0;i<s;i+=1){const s=t[i];A[i]=s[l]}}if(n){g=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];g[i]=s[n]}}if(o){v=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];v[i]=s[o]}}return this.appendSamples({xValues:u,yValues:c,ids:A,colors:f,lookupValues:d,sizes:g,rotations:v,start:i.start,step:i.step}),this}appendSample(t){const{samplesCacheX:i,samplesCacheY:s,samplesCacheColors:e,samplesCacheIDs:h,samplesCacheLookup:r,samplesCacheSize:n,samplesCacheRotation:o,maxSampleCount:a,dataPattern:l}=this.rd({appendCount:1}),u=this.nd(),c=void 0!==t.step?t.step:1,d=void 0!==t.x?t.x:u?u.x+c:0,f=void 0!==t.y?t.y:u?u.y+c:0;if(l&&this.$c&&this.od&&this.ad&&!this.ld(l,d,f)&&!this.Xc)return this.ud(this.od,this.ad,new this.ed([d]),new this.ed([f]),void 0!==t.lookupValue?new Float32Array([t.lookupValue]):void 0,void 0!==t.color?this.dd((t.color,[t.color])):void 0,void 0!==t.id?new Uint32Array([t.id]):void 0,void 0!==t.size?new Float32Array([t.size]):void 0,void 0!==t.rotation?new Float32Array([t.rotation]):void 0,l),this;if(i[this.Wc]=d,s[this.Wc]=f,void 0!==t.lookupValue&&r&&(r[this.Wc]=t.lookupValue),void 0!==t.color&&e){const i=this.dd((t.color,[t.color]));void 0!==i&&(e[this.Wc]=i[0])}return void 0!==t.id&&h&&(h[this.Wc]=t.id),void 0!==t.size&&n&&(n[this.Wc]=t.size),void 0!==t.rotation&&o&&(o[this.Wc]=t.rotation),this.fd(this.Wc,this.Wc),this.Wc+=1,this.Wc>a-1&&(this.Wc=0,this.jc=!0),this.Yc=Math.min(this.Yc+1,a),this.Hc+=1,this}appendSamples(t){const{lookupValues:i,colors:s,ids:e,sizes:h,rotations:r,start:n,step:o}=t;let a=t.offset,l=t.count;const u=t.xValues||t.yValues;if(!u)return this;const c=u.length;if(a=void 0!==a?a:0,l=void 0!==l?l:c-a,l<=0)return this;const d=void 0!==t.offsetLookupValues?t.offsetLookupValues:a,f=void 0!==t.offsetColors?t.offsetColors:a,A=void 0!==t.offsetIds?t.offsetIds:a,g=void 0!==t.offsetSizes?t.offsetSizes:a,v=void 0!==t.offsetRotations?t.offsetRotations:a,[y,m]=this.Ad(l,t.xValues,"x",n,o,a),[p,S]=this.Ad(l,t.yValues,"y",n,o,a),b=this.dd(s),{samplesCacheX:x,samplesCacheY:M,samplesCacheLookup:_,samplesCacheColors:w,samplesCacheIDs:C,samplesCacheSize:k,samplesCacheRotation:T,maxSampleCount:F,dataPattern:I,incomingDataReplacedCache:P}=this.rd({appendCount:l,...0===m&&0===S&&0===a&&0===d&&0===f&&0===A&&0===g&&0===v?{incomingDataX:y,incomingDataY:p,incomingDataLookup:i,incomingDataIDs:e,incomingDataColors:b,incomingDataSize:h,incomingDataRotation:r}:{}});if(!P&&I&&this.$c&&this.od&&this.ad){const t=y[m],s=p[S];if(!this.ld(I,t,s)&&!this.Xc)return this.ud(this.od,this.ad,xu(y,m,m+l),xu(p,S,S+l),xu(i,d,d+l),xu(b,f,f+l),xu(e,A,A+l),xu(h,g,g+l),xu(r,v,v+l),I),this}const D=F-this.Wc,B=Math.min(l,D);if(B>0&&(P||(Su(x,y,m,B,this.Wc),Su(M,p,S,B,this.Wc),i&&_&&Su(_,i,d,B,this.Wc),e&&C&&Su(C,e,A,B,this.Wc),b&&w&&Su(w,b,f,B,this.Wc),h&&k&&Su(k,h,g,B,this.Wc),r&&T&&Su(T,r,v,B,this.Wc)),this.fd(this.Wc,this.Wc+B-1),this.Wc+=B,this.Wc>F-1&&(this.Wc=0,this.jc=!0)),this.Yc=Math.min(this.Yc+B,F),this.Hc+=B,this.gd(),l-B>0){const t={xValues:y?xu(y,m+B,void 0):void 0,yValues:p?xu(p,S+B,void 0):void 0,lookupValues:i?xu(i,d+B,void 0):void 0,ids:e?xu(e,A+B,void 0):void 0,colors:b?xu(b,f+B,void 0):void 0,sizes:h?xu(h,g+B,void 0):void 0,rotations:r?xu(r,v+B,void 0):void 0};this.appendSamples(t)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const i=this.od||this.ad;if(!i)return this;const s=i.length;if(void 0!==t.x&&(this.od=this.od||new this.ed(s),this.od.fill(t.x)),void 0!==t.y&&(this.ad=this.ad||new this.ed(s),this.ad.fill(t.y)),void 0!==t.lookupValue&&(this.vd=this.vd||new Float32Array(s),this.vd.fill(t.lookupValue)),void 0!==t.color){const i=this.dd([t.color]);i&&(this.yd=this.yd||new Uint32Array(s),this.yd.fill(i[0]))}return void 0!==t.size&&(this.md=this.md||new Float32Array(s),this.md.fill(t.size)),void 0!==t.rotation&&(this.pd=this.pd||new Float32Array(s),this.pd.fill(t.rotation)),this.Ct.emit("cleared"),this}alterSamples(t,i){const{xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a}=i;let l=i.offset,u=i.count;const c=s||e||h||r||n||o||a;if(!c)return this;const d=c.length;if(l=void 0!==l?l:0,u=void 0!==u?u:d-l,u<=0)return this;const f=void 0!==i.offsetLookupValues?i.offsetLookupValues:l,A=void 0!==i.offsetColors?i.offsetColors:l,g=void 0!==i.offsetIds?i.offsetIds:l,v=void 0!==i.offsetSizes?i.offsetSizes:l,y=void 0!==i.offsetRotations?i.offsetRotations:l,m=this.dd(r),p=this.Hc-1,S=void 0!==this.Sd?Math.max(this.Hc-this.Sd,0):0,b=t+u-1,x=Math.max(t,S),M=Math.min(b,p),_=M-x+1;if(this.Hc>0&&_>0){const{samplesCacheX:i,samplesCacheY:r,samplesCacheColors:u,samplesCacheIDs:c,samplesCacheLookup:d,samplesCacheSize:p,samplesCacheRotation:b}=this.rd({appendCount:0}),w=i.length;if(void 0!==this.Sd&&this.jc&&this.Hc%this.Sd!=0){const S=this.Hc-this.Hc%this.Sd,_=this.Hc-1,C=this.Hc-this.Yc,k=S-1,T=Math.max(x,C),F=Math.min(M,k)-T+1;if(F>0){const S=T-t,x=yu(T,this.Hc,w,this.Wc);s&&Su(i,s,l+S,F,x),e&&Su(r,e,l+S,F,x),h&&d&&Su(d,h,f+S,F,x),n&&c&&Su(c,n,g+S,F,x),m&&u&&Su(u,m,A+S,F,x),o&&p&&Su(p,o,v+S,F,x),a&&b&&Su(b,a,y+S,F,x)}const I=Math.max(x,S),P=Math.min(M,_)-I+1;if(P>0){const S=I-t,x=yu(I,this.Hc,w,this.Wc);s&&Su(i,s,l+S,P,x),e&&Su(r,e,l+S,P,x),h&&d&&Su(d,h,f+S,P,x),n&&c&&Su(c,n,g+S,P,x),m&&u&&Su(u,m,A+S,P,x),o&&p&&Su(p,o,v+S,P,x),a&&b&&Su(b,a,y+S,P,x)}}else{const t=x-S;s&&Su(i,s,l,_,t),e&&Su(r,e,l,_,t),h&&d&&Su(d,h,f,_,t),n&&c&&Su(c,n,g,_,t),m&&u&&Su(u,m,A,_,t),o&&p&&Su(p,o,v,_,t),a&&b&&Su(b,a,y,_,t)}this.Ct.emit("cleared")}const w=t+u-1-p;if(w>0){const i=M+1-t;this.appendSamples({xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l+i,offsetLookupValues:f+i,offsetColors:A+i,offsetIds:g+i,offsetSizes:v+i,offsetRotations:y+i,count:w})}return this}alterSamplesByID(t,i){if(!this.qc)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const s=t.length,e=this.bd;if(s<=0||!e)return this;const h=(("object"==typeof i.color?this.dd([i.color]):"number"==typeof i.color?[i.color]:[])||[])[0],r=Array.isArray(i.xValues)?new this.ed(i.xValues):i.xValues,n=Array.isArray(i.yValues)?new this.ed(i.yValues):i.yValues,o=Array.isArray(i.yValues)?new Float32Array(i.yValues):i.yValues,a=this.dd(i.colors),l=Array.isArray(i.sizes)?new Float32Array(i.sizes):i.sizes,u=Array.isArray(i.rotations)?new Float32Array(i.rotations):i.rotations,c=e.length,d=this.Yc,f=this.Hc-1,A=Math.max(f-d+1,0);for(let d=0;d<s;d+=1){const s=t[d],g=pu(s,A,f,(t=>e[yu(t,this.Hc,c,this.Wc)])),v=yu(g,this.Hc,c,this.Wc);e[v]===s&&(void 0!==i.x&&this.od&&(this.od[v]=i.x),void 0!==i.y&&this.ad&&(this.ad[v]=i.y),void 0!==i.lookupValue&&this.vd&&(this.vd[v]=i.lookupValue),void 0!==i.size&&this.md&&(this.md[v]=i.size),void 0!==i.rotation&&this.pd&&(this.pd[v]=i.rotation),void 0!==h&&this.yd&&(this.yd[v]=h),r&&this.od&&(this.od[v]=r[d]),n&&this.ad&&(this.ad[v]=n[d]),o&&this.vd&&(this.vd[v]=o[d]),a&&this.yd&&(this.yd[v]=a[d]),l&&this.md&&(this.md[v]=l[d]),u&&this.pd&&(this.pd[v]=u[d]))}return this.Ct.emit("cleared"),this}clear(){return this.Wc=0,this.Yc=0,this.Hc=0,this.jc=!1,this.Ct.emit("cleared"),this}getSampleCount(){return this.Yc}getNextSampleIndex(){return this.Hc}setMaxSampleCount(t){if("object"==typeof t){this.xd&&this.offMaxSampleCountExceeded(this.xd);const i=t.max;this.xd=this.onMaxSampleCountExceeded(((t,s,e,h)=>{if(void 0!==i&&e>=i)return;let r=2*e;void 0!==i&&(r=Math.min(r,i)),this.setMaxSampleCount(r)})),void 0===this.Sd&&this.setMaxSampleCount(1e5)}else if("number"==typeof t){const i=t;if(void 0!==this.Sd&&this.Sd>i)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.od||!this.ad)return this.Sd=i,this;if(i===this.Sd)return this;if(this.jc&&0!==this.Wc)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Sd=i,this.Yc<i?(this.Wc=this.Yc,this.jc=!1):(this.Wc=0,this.jc=!0);const s=new this.ed(this.Sd);s.set(this.od);const e=new this.ed(this.Sd);if(e.set(this.ad),this.od=s,this.ad=e,this.Jc){const t=new Float32Array(this.Sd);this.vd&&t.set(this.vd),this.vd=t}if(this.qc){const t=new Uint32Array(this.Sd);this.bd&&t.set(this.bd),this.bd=t}if(this.Kc){const t=new Uint32Array(this.Sd);this.yd&&t.set(this.yd),this.yd=t}if(this.td){const t=new Float32Array(this.Sd);this.md&&t.set(this.md),this.md=t}if(this.sd){const t=new Float32Array(this.Sd);this.pd&&t.set(this.pd),this.pd=t}}return this}getMaxSampleCount(){return this.Sd}readBack(t){if(!this.od||!this.ad)return{xValues:new this.ed,yValues:new this.ed};const i=this.od.length;let s=[];if(null==t?void 0:t.onlyInRange){const i=this.Md();if(!i)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const e=Math.min(t.onlyInRange.start,t.onlyInRange.end),h=Math.max(t.onlyInRange.start,t.onlyInRange.end),r=mu(e,h,this.od,this.Hc,this.Yc,this.Wc,i,0);if(!r)return{xValues:new this.ed,yValues:new this.ed};s=r.dataRanges}else if(void 0!==this.Sd&&this.jc&&this.Hc%this.Sd!=0){const t=this.Wc,e=i-t,h=this.Wc-1;s.push({offset:t,count:e}),s.push({offset:0,count:h+1})}else s.push({offset:0,count:this.Yc});const e=s.reduce(((t,i)=>t+i.count),0),h=new this.ed(e),r=new this.ed(e),n=this.Kc?new Uint32Array(e):void 0,o=this.Jc?new Float32Array(e):void 0,a=this.qc?new Uint32Array(e):void 0,l=this.td?new Float32Array(e):void 0,u=this.sd?new Float32Array(e):void 0;let c=0;for(const t of s)h.set(this.od.subarray(t.offset,t.offset+t.count),c),r.set(this.ad.subarray(t.offset,t.offset+t.count),c),this.Kc&&n&&this.yd&&n.set(this.yd.subarray(t.offset,t.offset+t.count),c),this.Jc&&o&&this.vd&&o.set(this.vd.subarray(t.offset,t.offset+t.count),c),this.qc&&a&&this.bd&&a.set(this.bd.subarray(t.offset,t.offset+t.count),c),this.td&&l&&this.md&&l.set(this.md.subarray(t.offset,t.offset+t.count),c),this.sd&&u&&this.pd&&u.set(this.pd.subarray(t.offset,t.offset+t.count),c),c+=t.count;return{xValues:h,yValues:r,lookupValues:o,colors:n,ids:a,sizes:l,rotations:u}}onMaxSampleCountExceeded(t){return this.Ct.on("maxSampleCountExceeded",t)}offMaxSampleCountExceeded(t){return this.Ct.off(t)}Ad(t,i,s,e,h,r){if(void 0===i){const i=this.nd();h=void 0!==h?h:1,e=void 0!==e?e:i?i[s]+h:0;const r=new this.ed(t);for(let i=0;i<t;i+=1)r[i]=e+i*h;return[r,0]}return[i,r]}dd(t){if(!t||0===t.length)return;const i=t[0];if(ye(i)){const i=t.length,s=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e],h=255*i.a<<24|255*i.b<<16|255*i.g<<8|255*i.r;s[e]=h}return s}return t}_d(){return{min:0,max:void 0!==this.Sd&&this.jc?this.Sd-1:this.Yc-1}}wd(t){t=Math.min(t,this.Yc),this.Hc-=t,this.Yc-=t,this.Wc-=t,this.Wc<0&&void 0!==this.Sd&&(this.Wc+=this.Sd)}ud(t,i,s,e,h,r,n,o,a,l){var u;const c=s.length,d=s[0],f=s[c-1],A=e[c-1];if(this.ld(l,f,A)){const t=(null===(u=this.nd())||void 0===u?void 0:u.x)||0;let i=0;for(let e=0;e<c;e+=1)if(s[e]>t){i=e;break}const l={xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:i};this.Xc=!0,this.appendSamples(l),this.Xc=!1}else{const l=t.length,u=this.Yc,f=this.Hc-1,A=Math.max(f-u+1,0),g=pu(d,A,f,(i=>t[yu(i,this.Hc,l,this.Wc)])),v=g-1,y=g+1,m=t[yu(g,this.Hc,l,this.Wc)],p=y<=this.Hc-1?t[yu(y,this.Hc,l,this.Wc)]:void 0,S=void 0!==p&&p<d?y+1:m<d?g+1:v+1,b=f-S+1,x=new this.ed(b),M=new this.ed(b),_=this.Jc?new Float32Array(b):void 0,w=this.Kc?new Uint32Array(b):void 0,C=this.qc?new Uint32Array(b):void 0,k=this.td?new Float32Array(b):void 0,T=this.sd?new Float32Array(b):void 0;let F=0;for(let s=S;s<=f;s+=1){const e=yu(s,this.Hc,l,this.Wc);x[F]=t[e],M[F]=i[e],_&&this.vd&&(_[F]=this.vd[e]),w&&this.yd&&(w[F]=this.yd[e]),C&&this.bd&&(C[F]=this.bd[e]),k&&this.md&&(k[F]=this.md[e]),T&&this.pd&&(T[F]=this.pd[e]),F+=1}this.wd(b);const I=new this.ed(c+b);I.set(s),I.set(x,c);const P=new this.ed(c+b);let D,B,L,R,E;P.set(e),P.set(M,c),h&&_&&(D=new Float32Array(c+b),D.set(h),D.set(_,c)),r&&w&&(B=new Uint32Array(c+b),B.set(r),B.set(w,c)),n&&C&&(L=new Uint32Array(c+b),L.set(n),L.set(C,c)),o&&k&&(R=new Float32Array(c+b),R.set(o),R.set(k,c)),a&&T&&(E=new Float32Array(c+b),E.set(a),E.set(T,c)),this.Xc=!0,this.appendSamples({xValues:I,yValues:P,lookupValues:D,colors:B,ids:L,sizes:R,rotations:E}),this.Xc=!1,this.Ct.emit("cleared")}}Md(){return this.gd()}gd(){let t;if(this.Qc&&"userSpecified"in this.Qc)t=this.Qc.userSpecified;else if(this.Qc&&"autoDetectResult"in this.Qc)t=this.Qc.autoDetectResult;else if(this.od&&this.ad&&this.Hc>0){const i=void 0!==this.Sd&&this.jc?this.Wc:0,s=this.Yc-1,e=void 0!==this.Sd&&this.jc?0:void 0,h=void 0!==this.Sd&&this.jc?this.Wc-1:void 0,[r,n]=void 0!==e&&void 0!==h&&Math.abs(h-e)>Math.abs(s-i)?[e,h]:[i,s];if(1+n-r>=2){let i,s,e=this.od[r],h=this.ad[r];for(let t=r+1;t<=n;t+=1){if(!1!==i){const s=this.od[t],h=Math.sign(s-e);0!==h&&i&&i.direction!==h?i=!1:0===h||i||(i={direction:h}),e=s}if(!1!==s){const i=this.ad[t],e=Math.sign(i-h);0!==e&&s&&s.direction!==e?s=!1:0===e||s||(s={direction:e}),h=i}}t=i&&i.direction>0?za.ProgressiveX:i&&i.direction<0?za.RegressiveX:s&&s.direction>0?za.ProgressiveY:s&&s.direction<0?za.RegressiveY:void 0,this.Qc={autoDetectResult:t},t&&Ch.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${t}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nAdd { dataPattern: '${t}'} } to your application when creating series or DataSetXY to get clear this warning.`)}}if(t&&"ProgressiveX"!==t)throw new Error("LightningChart JS New XY rework beta features do not yet support other data patterns than ProgressiveX. This will be introduced in near future.");return t}ld(t,i,s){const e=this.nd();return!e||("ProgressiveX"===t?i>e.x:"RegressiveX"===t?i<e.x:"ProgressiveY"===t?s>e.y:"RegressiveY"!==t||s<e.y)}rd(t){if(t.incomingDataX&&t.incomingDataY&&0===this.Yc&&!this.od&&!this.ad&&(void 0===this.Sd||this.Sd===t.appendCount)&&this.hd)return this.od=bu(t.incomingDataX,this.ed)||new this.ed,this.ad=bu(t.incomingDataY,this.ed)||new this.ed,this.vd=this.Jc?bu(t.incomingDataLookup,Float32Array):void 0,this.bd=this.qc?bu(t.incomingDataIDs,Uint32Array):void 0,this.yd=this.Kc?bu(t.incomingDataColors,Uint32Array):void 0,this.md=this.td?bu(t.incomingDataSize,Float32Array):void 0,this.pd=this.sd?bu(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.gd(),samplesCacheX:this.od,samplesCacheY:this.ad,samplesCacheLookup:this.vd,samplesCacheIDs:this.bd,samplesCacheColors:this.yd,samplesCacheSize:this.md,samplesCacheRotation:this.pd,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(void 0===this.Sd){const i=this.Yc+t.appendCount;if(!this.od||!this.ad)return this.od=new this.ed(i),this.ad=new this.ed(i),this.vd=this.Jc?new Float32Array(i):void 0,this.bd=this.qc?new Uint32Array(i):void 0,this.yd=this.Kc?new Uint32Array(i):void 0,this.md=this.td?new Float32Array(i):void 0,this.pd=this.sd?new Float32Array(i):void 0,{dataPattern:this.gd(),samplesCacheX:this.od,samplesCacheY:this.ad,samplesCacheLookup:this.vd,samplesCacheIDs:this.bd,samplesCacheColors:this.yd,samplesCacheSize:this.md,samplesCacheRotation:this.pd,maxSampleCount:i};const s=this.od.length;if(s<i){if(!this.Zc.warningDisplayed){const s=Ch.performance.now();if(this.Zc.expandEvents=this.Zc.expandEvents.filter((t=>s-t.timestamp<5e3)),i>1e3&&this.Zc.expandEvents.push({timestamp:s}),this.Zc.expandEvents.length>5)return Ch.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.Zc.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.rd(t)}const s=new this.ed(i);s.set(this.od),this.od=s;const e=new this.ed(i);if(e.set(this.ad),this.ad=e,this.Jc){const t=new Float32Array(i);this.vd&&t.set(this.vd),this.vd=t}if(this.qc){const t=new Uint32Array(i);this.bd&&t.set(this.bd),this.bd=t}if(this.Kc){const t=new Uint32Array(i);this.yd&&t.set(this.yd),this.yd=t}if(this.td){const t=new Float32Array(i);this.md&&t.set(this.md),this.md=t}if(this.sd){const t=new Float32Array(i);this.pd&&t.set(this.pd),this.pd=t}return this.Wc=this.Yc,{dataPattern:this.gd(),samplesCacheX:this.od,samplesCacheY:this.ad,samplesCacheLookup:this.vd,samplesCacheIDs:this.bd,samplesCacheColors:this.yd,samplesCacheSize:this.md,samplesCacheRotation:this.pd,maxSampleCount:i}}if(s>4*i){const t=new this.ed(i);t.set(this.od.subarray(0,this.Yc)),this.od=t;const s=new this.ed(i);if(s.set(this.ad.subarray(0,this.Yc)),this.ad=s,this.Jc){const t=new Float32Array(i);this.vd&&t.set(this.vd.subarray(0,this.Yc)),this.vd=t}if(this.qc){const t=new Uint32Array(i);this.bd&&t.set(this.bd.subarray(0,this.Yc)),this.bd=t}if(this.Kc){const t=new Uint32Array(i);this.yd&&t.set(this.yd.subarray(0,this.Yc)),this.yd=t}if(this.td){const t=new Float32Array(i);this.md&&t.set(this.md.subarray(0,this.Yc)),this.md=t}if(this.sd){const t=new Float32Array(i);this.pd&&t.set(this.pd.subarray(0,this.Yc)),this.pd=t}return{dataPattern:this.gd(),samplesCacheX:this.od,samplesCacheY:this.ad,samplesCacheLookup:this.vd,samplesCacheIDs:this.bd,samplesCacheColors:this.yd,samplesCacheSize:this.md,samplesCacheRotation:this.pd,maxSampleCount:i}}return{dataPattern:this.gd(),samplesCacheX:this.od,samplesCacheY:this.ad,samplesCacheLookup:this.vd,samplesCacheIDs:this.bd,samplesCacheColors:this.yd,samplesCacheSize:this.md,samplesCacheRotation:this.pd,maxSampleCount:s}}return t.appendCount+this.Yc>this.Sd&&this.Ct.emit("maxSampleCountExceeded",this,this.Yc,this.Sd,this.Yc+t.appendCount),this.od=this.od||new this.ed(this.Sd),this.ad=this.ad||new this.ed(this.Sd),this.vd=this.vd||(this.Jc?new Float32Array(this.Sd):void 0),this.bd=this.bd||(this.qc?new Uint32Array(this.Sd):void 0),this.yd=this.yd||(this.Kc?new Uint32Array(this.Sd):void 0),this.md=this.md||(this.td?new Float32Array(this.Sd):void 0),this.pd=this.pd||(this.sd?new Float32Array(this.Sd):void 0),{dataPattern:this.gd(),samplesCacheX:this.od,samplesCacheY:this.ad,samplesCacheLookup:this.vd,samplesCacheIDs:this.bd,samplesCacheColors:this.yd,samplesCacheSize:this.md,samplesCacheRotation:this.pd,maxSampleCount:this.Sd}}Cd(){if(!this.od||!this.ad||0===this.Yc)return;if(void 0===this.Sd)return this.Hc>0?{x:this.od[0],y:this.ad[0]}:void 0;if(!this.jc)return{x:this.od[0],y:this.ad[0]};let t=this.Wc-this.Yc;return t<0&&(t+=this.Sd),{x:this.od[t],y:this.ad[t]}}nd(){if(!this.od||!this.ad||0===this.Yc)return;if(void 0===this.Sd){const t=this.Yc-1;return t>=0?{x:this.od[t],y:this.ad[t]}:void 0}let t=this.Wc-1;return t<0&&(t+=this.Sd),{x:this.od[t],y:this.ad[t]}}kd(t,i,s,e){const h=this.gd(),r=this.od,n=this.ad;if(!r||!n)return;const o=t=>({x:r[t],y:n[t],lookupValue:this.Jc&&this.vd?this.vd[t]:void 0,id:this.qc&&this.bd?this.bd[t]:void 0,color:this.Kc&&this.yd?this.yd[t]:void 0,size:this.td&&this.md?this.md[t]:void 0,rotation:this.sd&&this.pd?this.pd[t]:void 0}),a=r.length,l=this.Yc,u=this.Hc-1,c=Math.max(u-l+1,0);if(h){const s=this.Cd(),e=this.nd();if(!(s&&e&&this.od&&this.ad))return;const r="ProgressiveX"===h||"RegressiveX"===h?"x":"y",n="x"===r?"y":"x",l="x"===r?this.od:this.ad,d="x"===n?this.od:this.ad,f=t[r],A=Math.min(s[r],e[r]),g=Math.max(s[r],e[r]);if(f<A||f>g)return;const v=pu(f,c,u,(t=>l[yu(t,this.Hc,a,this.Wc)])),y=yu(v,this.Hc,a,this.Wc);if(!i)return o(y);const m=v-1,p=v+1,S=f>=l[y]&&("ProgressiveX"===h||"ProgressiveY"===h)?p<=u?yu(p,this.Hc,a,this.Wc):void 0:m>=c?yu(m,this.Hc,a,this.Wc):void 0;if(void 0===S)return;const b=l[y],x=d[y],M=l[S],_=d[S],w=Math.min(b,M),C=w===b?x:_,k=Math.max(b,M),T=Hl(C,k===b?x:_,(f-w)/(k-w));return"ProgressiveX"===h||"RegressiveX"===h?{x:f,y:T}:{x:T,y:f}}let d,f=Number.MAX_VALUE;const A=Ah(t,s,e),g=this.Yc-1;for(let t=0;t<=g;t+=1){const i=r[t],h=n[t];if(!Number.isNaN(i)&&!Number.isNaN(h)){const r=fh(i,s.x,e.x),n=fh(h,s.y,e.y),o=(r-A.x)**2+(n-A.y)**2;o<f&&(f=o,d=t)}}return void 0===d?void 0:o(d)}fd(t,i){this.Ct.emit("changed",t,i)}ki(t){return this.Ct.off(t)}Td(t){return this.Ct.on("changed",t)}Fd(t){return this.Ct.on("cleared",t)}}const yu=(t,i,s,e)=>t%s,mu=(t,i,s,e,h,r,n,o)=>{if(0===e||0===h)return;const a=s.length,l=e-1,u=Math.max(l-h+1,0),c=pu(t,u,l,(t=>s[yu(t,e,a)])),d=pu(i,u,l,(t=>s[yu(t,e,a)])),f=Math.max(c-o,u),A=Math.min(d+o,l),g=yu(f,e,a),v=yu(A,e,a);return g>v?{iFirstSample:f,iLastSample:A,iFirstSampleDataArray:g,iLastSampleDataArray:v,dataRanges:[{offset:g,count:a-g},{offset:0,count:v+1}]}:{iFirstSample:f,iLastSample:A,iFirstSampleDataArray:g,iLastSampleDataArray:v,dataRanges:[{offset:g,count:v-g+1}]}},pu=(t,i,s,e)=>{const h=s;for(;i!==s;){const h=Math.ceil((i+s)/2);t<e(h)?s=h-1:i=h}const r=Math.abs(t-e(i));return i<h&&Math.abs(t-e(i+1))<r?i+1:i},Su=(t,i,s,e,h)=>{const r=i.length;if(Array.isArray(i))for(let r=0;r<e;r+=1)t[h+r]=i[s+r];else t.set(r===e?i:i.subarray(s,s+e),h)},bu=(t,i)=>void 0===t?void 0:Array.isArray(t)?new i(t):t instanceof i?t:new i(t),xu=(t,i,s)=>{if(void 0!==t)return Array.isArray(t)?t.slice(i,s):t.subarray(i,s)};class Mu extends Ul{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ya="label",this.bl=this.ae.An(this.renderingScale).mr(this.Ya).ah(De).dn(Br).fn(Br),this.setMargin(5),this.sc(this.bl)}uc(){return[this.bl]}setFillStyle(t){return this.bl.ah(t),this.ae.ie(),this}getFillStyle(){return this.bl.pr()}uh(){const i=this.getPosition(e(0,0),t.UISpace.Content),s=Ah(i,this.scale,this.renderingScale);return this.bl.dh(s),this}de(){this.bl.de();const t=0===this.Ya.length?e(0,0):this.bl.Id();return this.setContentSize(t),super.de()}setText(t){return this.Ya=t,this.bl.mr(this.Ya),this.ae.ie(),this}getText(){return this.Ya}setFont(t){return this.bl.Mr(t),this.ae.ie(),this}getFont(){return this.bl.br()}setTextRotation(t){return this.bl._r(t),this.ae.ie(),this}getTextRotation(){return this.bl.wr()}}const _u={...El,...zl,uiElement:Mu};class wu extends Wl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Pd=!1,this.fitTo=this.Ac.bind(this),this.setSize=this.fitTo,this.bl=this.ae.Oc(i).ah(De).oh(ah),this.sc(this.bl)}uc(){return[this.bl]}setFillStyle(t){return this.bl.ah(t),this.ae.ie(),this}getFillStyle(){return this.bl.pr()}setStrokeStyle(t){return this.bl.oh(t),this.ae.ie(),this}getStrokeStyle(){return this.bl.Yo()}uh(){const i=qr([this.getPosition(e(-1,-1),t.UISpace.Content),this.getPosition(e(1,1),t.UISpace.Content)].map((t=>Ah(t,this.scale,this.renderingScale))));return this.Pd?this.bl.Kl([{x:(i.min.x+i.max.x)/2,y:i.min.y},{x:i.min.x,y:(i.min.y+i.max.y)/2},{x:(i.min.x+i.max.x)/2,y:i.max.y},{x:i.max.x,y:(i.min.y+i.max.y)/2}]):this.bl.Kl([i.min,{x:i.min.x,y:i.max.y},i.max,{x:i.max.x,y:i.min.y}]),this}Ac(t){return this.setContentSize(t),this.ae.ie(),this}gc(){return 0}vc(){return 0}mc(){return 0}yc(){return 0}}class Cu extends Wl{constructor(t,i,s,h,r){super(t,i,s,h,r),this.Dd=e(0,0),this.bl=t.Bd(i).Ou(0).bh(360).ah(De).oh(ah),this.sc(this.bl)}uc(){return[this.bl]}setFillStyle(t){return this.bl.ah(t),this.ae.ie(),this}getFillStyle(){return this.bl.pr()}setStrokeStyle(t){return this.bl.oh(t),this.ae.ie(),this}getStrokeStyle(){return this.bl.Yo()}uh(){const i=this.getSize(t.UISpace.Content).x/2;return this.bl.Vu(i*this.renderingScale.ks().x).Nu(i*this.renderingScale.ks().y).dh(Ah(this.getPosition(e(0,0),t.UISpace.Content),this.scale,this.renderingScale)).Uu(255).de(),this}Ac(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(e(2*i,2*i)),this.Dd=t,this.ae.ie(),this}gc(){return(this.getSize(t.UISpace.Content).x-this.Dd.x)/2}vc(){return(this.getSize(t.UISpace.Content).x-this.Dd.x)/2}mc(){return(this.getSize(t.UISpace.Content).y-this.Dd.y)/2}yc(){return(this.getSize(t.UISpace.Content).y-this.Dd.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(e(i,i)),this.Dd=t,this}}class ku extends Yl{constructor(t,i,s,h,r){super(t,i,s,fl.Simple,h,r),this.Ld=u(e(0,0)),this.Rd=!1,this.ae=t,this.zc()}Vc(){const t=this.Ld._();if(this.Rd){const i=Math.min(t.x,t.y);return[e(0,0),e(i/2,i/2),e(0,i),e(-i/2,i/2)]}const i=2*Math.sqrt(this.Ld._().x*this.Ld._().x/4+this.Ld._().y*this.Ld._().y/4),s=e(Math.cos(Math.PI/4)*i,0),h=e(0,Math.sin(Math.PI/4)*i),r=e(0,0),n=cn(r,cn(s,h)),o=cn(n,cn(h,un(s,-1)));return[r,n,o,dn(o,cn(s,h))]}uc(){return[this.bl]}setFillStyle(t){return this.bl.ah(t),this.ae.ie(),this}getFillStyle(){return this.bl.pr()}setStrokeStyle(t){return this.bl.oh(t),this.ae.ie(),this}getStrokeStyle(){return this.bl.Yo()}Ac(t){return this.Ld.M(t),this.Rd=!1,this.ae.ie(),this}gc(){return this.Rd?0:(this.getSize(t.UISpace.Content).x-this.Ld._().x)/2}vc(){return this.Rd?0:(this.getSize(t.UISpace.Content).x-this.Ld._().x)/2}mc(){return this.Rd?0:(this.getSize(t.UISpace.Content).y-this.Ld._().y)/2}yc(){return this.Rd?0:(this.getSize(t.UISpace.Content).y-this.Ld._().y)/2}fitTo(t){return this.Ld.M(t),this.Rd=!0,this.ae.ie(),this}}class Tu extends Yl{constructor(i,s,h,r,n){super(i,s,h,fl.Simple,r,n),this.Ed=u(e(0,0)),this.Od=u(10),this.zd=u(void 0),this.wc=u(t.UIDirections.Right),this.zc()}uc(){return[this.bl]}setFillStyle(t){return this.bl.ah(t),this.ae.ie(),this}getFillStyle(){return this.bl.pr()}setStrokeStyle(t){return this.bl.oh(t),this.ae.ie(),this}getStrokeStyle(){return this.bl.Yo()}setDirection(t){return this.wc.M(t),this.ae.ie(),this}getDirection(){return this.wc._()}setPointerLength(t){return this.Od.M(t),this.ae.ie(),this}getPointerLength(){return this.Od._()}setPointerAngle(t){return this.zd.M(t),this.ae.ie(),this}getPointerAngle(){let t=this.zd._();if(void 0===t){const i=this.Vd();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}Ac(t){return this.Ed.M(t),this.ae.ie(),this}Nd(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}Gd(){return Kh(this.wc._())?this.Ed._().x:this.Ed._().y}Vd(){return Kh(this.wc._())?this.Ed._().y:this.Ed._().x}gc(){switch(this.wc._()){case t.UIDirections.Right:return 0;case t.UIDirections.Left:return this.getPointerLength();case t.UIDirections.Up:case t.UIDirections.Down:return Math.max(0,this.Nd()-this.Vd());default:return 0}}vc(){switch(this.wc._()){case t.UIDirections.Right:return this.getPointerLength();case t.UIDirections.Left:return 0;case t.UIDirections.Up:case t.UIDirections.Down:return Math.max(0,this.Nd()-this.Vd());default:return 0}}mc(){switch(this.wc._()){case t.UIDirections.Right:case t.UIDirections.Left:return Math.max(0,this.Nd()-this.Vd());case t.UIDirections.Up:return this.getPointerLength();case t.UIDirections.Down:default:return 0}}yc(){switch(this.wc._()){case t.UIDirections.Right:case t.UIDirections.Left:return Math.max(0,this.Nd()-this.Vd());case t.UIDirections.Up:return 0;case t.UIDirections.Down:return this.getPointerLength();default:return 0}}Vc(){const t=Jh(this.wc._()),i=an(e(0,0),t),s=this.getPointerLength(),h=this.Nd(),r=this.Gd(),n=this.Vd();if(!(0!==s&&0!==h||0!==r&&0!==n))return[];const o=e(0,0),a=cn(cn(o,un(t,-s)),un(i,h/2)),l=cn(a,un(i,(n-h)/2)),u=cn(l,un(t,-r)),c=cn(cn(o,un(t,-s)),un(i,-h/2)),d=cn(c,un(i,-(n-h)/2)),f=cn(d,un(t,-r));let A;return A=0===r||0===n?[o,a,c]:0===s||0===h?[l,u,f,d]:Dh(n,h)?[o,a,u,f,c]:[o,a,l,u,f,d,c],A}}class Fu extends Ul{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.Ac.bind(this),this.setSize=this.fitTo,this.Ud=new vu,this.bl=this.ae.jd(i).ph(ah).Hd(De).Yd(De).Wd(this.Ud),this.sc(this.bl)}uc(){return[this.bl]}setShape(t){return this.bl.$d(t),this}getShape(){return this.bl.Xd()}setRotation(t){return this.bl.Zd(t),this}getRotation(){return this.bl.Qd()}setFillStyle(t){return this.bl.Yd(t),this.ae.ie(),this}getFillStyle(){return this.bl.Jd()}uh(){const i=Ah(this.getPosition({x:0,y:0},t.UISpace.Content),this.scale,this.renderingScale),s=Math.max(this.size.x,this.size.y);if(this.Ud.clear(),s>0){const t=this.bl.Xd(),e=this.bl.Jd(),h=fu(t)&&t,r=nu(e)&&e;if(h){const t=s/h.Hi().y;this.bl.Kd(t)}else if(r){const t=r.source;if(t instanceof Image){const i=s/t.height;this.bl.Kd(i)}}else this.bl.Kd(s);this.Ud.appendSample(i)}return this}Ac(t){return this.setContentSize(t),this.ae.ie(),this}gc(){return 0}vc(){return 0}mc(){return 0}yc(){return 0}}const Iu={...El,...zl,uiElement:Fu};class Pu extends Nl{setSize(t){return this.setContentSize(t),this.ae.ie(),this}}class Du extends Fl{constructor(){super(...arguments),this.qd=[],this.tf=0,this.if=t=>{const i=this.qd.indexOf(t);i>=0&&this.qd.splice(i,1)}}getMembers(){return this.qd}getMemberCount(){return this.qd.length}setMinimumSize(t){return this.sf=t,this.ae.ie(),this}getMinimumSize(){return this.sf}addElement(t,i=-1){const s=t.Pc(this.ae,this.renderingScale,this.scale,this.if,this.zs,!1);return s.setMouseInteractions(this.getMouseInteractions()),i>=0?this.qd.splice(i,0,s):this.qd.push(s),s.setVisible(this.getVisible()),this.sc(s),this.Ps&&(pr(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.qd.slice().forEach(Ih),this}setVisible(t){return super.setVisible(t),this.qd.forEach((i=>i.setVisible(t))),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let i=0;i<this.qd.length;i+=1)this.qd[i].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.qd.length;t+=1)if(this.qd[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let s=0;s<this.qd.length;s+=1){const e=this.qd[s];"getHighlight"in(i=e)&&"setHighlight"in i&&e.setHighlight(t)}var i;return this}}class Bu extends Du{uh(){super.uh();const i=this.getPosition(e(-1,1),t.UISpace.Content),s=this.qd.reduce(((t,i)=>t+ +(i instanceof Pu)),0),h=s>0?(this.size.x-this.tf)/s:0;return this.qd.reduce(((t,s)=>s instanceof Pu?this.scale.ts({x:t,y:i.y},{x:h+s.getSize().x,y:0}).x:s.setOrigin(e(-1,1)).setPosition(e(t,i.y)).uh().getPosition(e(1,0)).x),i.x),this}de(){for(let t=0;t<this.qd.length;t+=1){const i=this.qd[t];i instanceof Lu&&i.setMinimumSize(0),i.de()}const t=this.qd.reduce(this.ef.bind(this),h(0,0));this.tf=t.x;const i=void 0===this.sf?t:e(Math.max(t.x,this.sf),t.y);this.setContentSize(i);for(let t=0;t<this.qd.length;t+=1){const s=this.qd[t];s instanceof Lu&&s.setMinimumSize(i.y).de()}return super.de()}ef(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(Ru,i).setSize(e(0,t))}}class Lu extends Du{uh(){super.uh();const i=this.getPosition(e(-1,1),t.UISpace.Content),s=this.qd.reduce(((t,i)=>t+ +(i instanceof Pu)),0),h=s>0?(this.size.y-this.tf)/s:0;return this.qd.reduce(((t,s)=>s instanceof Pu?this.scale.ts({x:i.x,y:t},{x:0,y:-(h+s.getSize().y)}).y:s.setOrigin(e(-1,1)).setPosition(e(i.x,t)).uh().getPosition(e(0,-1)).y),i.y),this}de(){for(let t=0;t<this.qd.length;t+=1){const i=this.qd[t];i instanceof Bu&&i.setMinimumSize(0),i.de()}const t=this.qd.reduce(this.ef.bind(this),h(0,0));this.tf=t.y;const i=void 0===this.sf?t:e(t.x,Math.max(t.y,this.sf));this.setContentSize(i);for(let t=0;t<this.qd.length;t+=1){const s=this.qd[t];s instanceof Bu&&s.setMinimumSize(i.x).de()}return super.de()}ef(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(Ru,i).setSize(e(0,t))}}const Ru={...El,...zl,uiElement:Pu};class Eu extends Lu{constructor(){super(...arguments),this.qd=[]}addRow(){return this.addElement(Vu,void 0)}getRow(t,i=!1){return i&&this.qd.length<=t?(this.addRow(),this.getRow(t,!0)):this.qd[t]}}const Ou={...El,...Ol,...Vl},zu={...Ou,uiElement:Lu,background:wu},Vu={...Ou,uiElement:Bu,background:wu},Nu={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},Gu=(t,i)=>{const s={},e=`stylable${t}s`;return s[e]=i,s[`set${t}FillStyle`]=function(t){return this[e].forEach((i=>i.setFillStyle(t))),this},s[`get${t}FillStyle`]=function(){return this[e][0].getFillStyle()},s[`set${t}Font`]=function(t){return this[e].forEach((i=>i.setFont(t))),this},s[`get${t}Font`]=function(){return this[e][0].getFont()},s[`set${t}Rotation`]=function(t){return this[e].forEach((i=>i.setTextRotation(t))),this},s[`get${t}Rotation`]=function(){return this[e][0].getTextRotation()},s},Uu=Gu("Text",[]),Wu={button:void 0,isLocked:!1,setOn(t){const i=this.button.getOn()!==t;return this.button.setOn(t),i&&this.Ct.emit("switch",t),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},onSwitch(t){return this.Ct.on("switch",(i=>t(this,i)))},offSwitch(t){return this.Ct.off(t,"switch")},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},Yu={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},Hu={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},ju={...El,...Ol,background:wu,Pc(t,i,s,e,h,r){const n=new Bu(t,i,s,this.background,e,h),o=n.addElement(_u,void 0),a=Object.assign(n,Nu,{setTextLabel:o},Uu,{stylableTexts:[o]});return Rl(a,h,r),this.applyStylers(a,h)}}.addStyler(Bl),$u={...El,...Ol,background:Tu,Pc(i,s,e,h,r,n){const o=new Bu(i,s,e,this.background,h,r),a=o.addElement(_u,void 0),l=o.getBackground(),u=Object.assign(o,Nu,{setTextLabel:a},Uu,{stylableTexts:[a]},Hu,{pointable:l},{setTickLabelPadding(i){return this.getDirection()===t.UIDirections.Up?(this.setPadding({top:i}),a.setMargin({top:0})):this.getDirection()===t.UIDirections.Down?(this.setPadding({bottom:i}),a.setMargin({bottom:0})):this.getDirection()===t.UIDirections.Right?(this.setPadding({right:i}),a.setMargin({right:0})):this.getDirection()===t.UIDirections.Left&&(this.setPadding({left:i}),a.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===t.UIDirections.Up?this.getPadding().top:this.getDirection()===t.UIDirections.Down?this.getPadding().bottom:this.getDirection()===t.UIDirections.Right?this.getPadding().right:this.getPadding().left}});return u.Dc="other",u.setPointerLength(r.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(r.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(r.uiTextFont).setTextFillStyle(r.uiTextFillStyle).setBackground((t=>t.setFillStyle(r.uiBackgroundFillStyle).setStrokeStyle(r.uiBackgroundStrokeStyle))),Rl(u,r,n),this.applyStylers(u,r)}};class Xu extends Tl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.fe=!1,this.Ct=new Ze,this.hf=De,this.rf=De,this.getOn=()=>this.fe,this.nf=this.sc(new Fu(this.ae,this.renderingScale,this.scale,Ph,r).setShape(e)),this.rf=r.uiButtonFillStyleHidden||r.uiButtonFillStyle}uc(){return[...this.nf.uc()]}onHighlight(t){return this.Ct.on("highlight",t)}offHighlight(t){return this.Ct.off(t)}setOn(t){return this.fe=t,this.nf.setFillStyle(t?this.hf:this.rf),this.ae.ie(),this}setOffFillStyle(t){return this.rf="function"==typeof t?t(this.rf):t,this.fe||this.nf.setFillStyle(this.rf),this}getOffFillStyle(){return this.rf}setSize(t){return this.nf.fitTo("number"==typeof t?e(t,t):t),this}getSize(){return this.nf.getSize()}setOnFillStyle(t){return this.hf="function"==typeof t?t(this.hf):t,this.fe&&this.nf.setFillStyle(this.hf),this}getOnFillStyle(){return this.hf}setButtonShape(t){return this.nf.setShape(t),this.ae.ie(),this}getButtonShape(){return this.nf.getShape()}uh(){return super.uh(),this.nf.setVisible(this.getVisible()).setPosition(this.getPosition(e(0,0),t.UISpace.Content)).uh(),this}de(){const t=this.nf.de().getSize();return this.setContentSize(t),super.de()}dispose(){return super.dispose(),this.nf.dispose(),this}setMouseInteractions(t){return this.nf.setMouseInteractions(t),this}getMouseInteractions(){return this.nf.getMouseInteractions()}setHighlight(t){const i=_r(t);return this.nf.setHighlight(i),this.Ct.emit("highlight",this,t),this.ae.ie(),this}getHighlight(){return this.nf.getHighlight()}}const Zu={...El,uiElement:Xu,buttonShape:t.PointShape.Circle,setButtonShape(t){return{...this,buttonShape:t}},Pc(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.buttonShape,e,h),h);return Rl(n,h,r),n}},Qu={...El,...Ol,background:wu,buttonBuilder:Zu,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},Pc(i,s,e,h,r,n){const o=new Bu(i,s,e,this.background,h,r),a=o.addElement(zu);a.addGap();const l=a.addElement(this.buttonBuilder);a.addGap();const u=o.addElement(zu);u.addGap();const c=u.addElement(_u);u.addGap(),o.addGap();const d=Object.assign(o,Nu,{setTextLabel:c},Uu,{stylableTexts:[c]},Wu,{button:l},Yu);let f;return d.onMouseClick(((t,i)=>{d.getLocked()||d.setOn(!d.getOn())})),d.onMouseEnter((()=>d.setHighlight(!0))),d.onMouseLeave((()=>d.setHighlight(!1))),d.setMouseStyle(t.MouseStyles.Point),d.setTextFillStyleHidden(r.uiTextFillStyleHidden||r.uiTextFillStyle),d.onSwitch(((t,i)=>{i?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))})),d.setPadding({left:5}),Rl(d,r,n),this.applyStylers(d,r)}}.addStyler(Bl).addStyler(Ll);class Ju extends Tl{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.af=[],this.lf=2,this.uf="",this.cf=(t,i)=>void 0!==t.label?t.label:i.percentageValues?`${(100*t.value).toFixed(0)}%`:Ln(t.value,i.min,i.max),this.df=0,this.ff=0,this.Af=!1,this.ae=t,this.gf=r,this.vf=this.sc(t.lh(i).oh(ah)),this.yf=this.sc(t.An(i).ah(h.uiTextFillStyle).Mr(h.uiTextFont).setMouseInteractions(!1)),"vertical"===r?(this.mf=140,this.pf=25):(this.mf=160,this.pf=15)}uc(){return[this.vf,this.yf]}Sf(t){this.bf=t;const i=tc(t,"vertical"===this.gf?0:90,this.Af);return this.vf.ah(i),this.ae.ie(),this}xf(){return this.bf}Mf(t){return this.mf=t,this.ae.ie(),this}_f(){return this.mf}wf(t){return this.pf=t,this.ae.ie(),this}Cf(){return this.pf}kf(t){return this.uf=t,this.ae.ie(),this}Tf(){return this.uf}Ff(t){return this.cf=t,this.ae.ie(),this}setLUTDisplayProportionalSteps(t){if(this.Af=t,this.bf){const t=tc(this.bf,"vertical"===this.gf?0:90,this.Af);this.vf.ah(t)}return this.ae.ie(),this}getLUTDisplayProportionalSteps(){return this.Af}setFillStyle(t){return this.yf.ah(t),this.ae.ie(),this}getFillStyle(){return this.yf.pr()}setFont(t){return this.yf.Mr(t),this.ae.ie(),this}getFont(){return this.yf.br()}setTextRotation(t){return this.ff=t,this.yf._r(t),this.ae.ie(),this}getTextRotation(){return this.yf.wr()}uh(){var i,s,e,h;if(super.uh(),this.Ps||!this.getVisible())return this;const r=this.bf;if(r){const n=this.renderingScale.ks(),o=r.min,a=r.max;if("vertical"===this.gf){const e=this.getPosition({x:-1,y:-1},t.UISpace.Content),h=cn(e,{x:this.vf.Hi().x+this.lf*n.x,y:0}),l={x:h.x,y:h.y+(this.uf.length>0?this.df*n.y+this.yf.Hi().y:0)+.5*((null===(i=this.af[0])||void 0===i?void 0:i.Hi().y)||0)},u={x:l.x,y:this.getPosition({x:-1,y:1},t.UISpace.Content).y-.5*((null===(s=this.af[this.af.length-1])||void 0===s?void 0:s.Hi().y)||0)};this.vf.dh({x:e.x,y:l.y}),this.yf.yl({x:-1,y:-1}).dh(h),r.getSteps().forEach(((t,i)=>{const s=Jr(l,u,this.Af?!0===r.getInterpolation()?(t.value-o)/(a-o):.9*(t.value-o)/(a-o):!0===r.getInterpolation()?i/(r.getSteps().length-1):i/r.getSteps().length);this.af[i].yl({x:-1,y:0}).dh(s)}))}else{const i=this.getPosition({x:-1,y:-1},t.UISpace.Content),s=this.getPosition({x:1,y:1},t.UISpace.Content),l=this.af.reduce(((t,i)=>Math.max(t,i.Hi().y)),0),u=cn(i,{x:.5*((null===(e=this.af[0])||void 0===e?void 0:e.Hi().x)||0),y:l}),c={x:s.x,y:u.y},d={x:c.x-(.5*((null===(h=this.af[this.af.length-1])||void 0===h?void 0:h.Hi().x)||0)+(this.uf.length>0?this.df*n.x+this.yf.Hi().x:0)),y:u.y},f={x:u.x,y:u.y+this.lf*n.y};this.vf.dh(f),this.yf.yl({x:1,y:1}).dh(c),r.getSteps().forEach(((t,i)=>{const s=Jr(u,d,this.Af?!0===r.getInterpolation()?(t.value-o)/(a-o):.9*(t.value-o)/(a-o):!0===r.getInterpolation()?i/(r.getSteps().length-1):i/r.getSteps().length);this.af[i].yl({x:0,y:1}).dh(s)}))}}return this}de(){if(this.bf&&this.getVisible()){const t=this.bf.getSteps();for(let i=this.af.length;i<t.length;i+=1)this.af.push(this.sc(this.ae.An(this.renderingScale).setMouseInteractions(!1)));for(let i=0;i<t.length;i+=1)this.af[i].ah(this.yf.pr()).Mr(this.yf.br()).mr(this.cf(t[i],this.bf))._r(this.ff);for(let i=t.length;i<this.af.length;i+=1)this.af[i].dispose();if(this.af.length=t.length,this.yf.mr(this.uf),"vertical"===this.gf){const t=this.pf,i=this.mf;this.vf.Wt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=t+Math.max(this.af.reduce(((t,i)=>Math.max(t,i.de().Id().x)),0),this.yf.de().Id().x),e=(this.uf.length>0?this.df+this.yf.de().Id().y:0)+i+.5*this.af[0].de().Id().y+.5*this.af[this.af.length-1].de().Id().y;this.setContentSize({x:s,y:e})}else{const t=this.mf,i=this.pf;this.vf.Wt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.uf.length>0?this.df+this.yf.de().Id().x:0,.5*this.af[this.af.length-1].de().Id().x),e=t+.5*this.af[0].de().Id().x+s,h=i+this.lf+this.af.reduce(((t,i)=>Math.max(t,i.de().Id().y)),0);this.setContentSize({x:e,y:h})}}else this.af.forEach((t=>t.dispose())),this.af.length=0,this.yf.setVisible(!1),this.vf.setVisible(!1),this.setContentSize({x:0,y:0});return super.de()}dispose(){return super.dispose(),this.vf.dispose(),this.af.forEach(Ih),this.yf.dispose(),this}setMouseInteractions(t){return this.vf.setMouseInteractions(t),this}getMouseInteractions(){return this.vf.getMouseInteractions()}}const Ku={lutElement:{},setLUT(t){return this.lutElement.Sf(t),this},getLUT(){return this.lutElement.xf()},setLUTLength(t){return this.lutElement.Mf(t),this},getLUTLength(){return this.lutElement._f()},setLUTThickness(t){return this.lutElement.wf(t),this},getLUTThickness(){return this.lutElement.Cf()},setLookUpUnit(t){return this.lutElement.kf(t),this},getLookUpUnit(){return this.lutElement.Tf()},setLUTStepValueFormatter(t){return this.lutElement.Ff(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},qu={...El,...Ol,background:wu,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},Pc(t,i,s,e,h,r){const n=new Lu(t,i,s,this.background,e,h),o=n.addElement({Pc:()=>new Ju(t,i,s,Ph,h,this.alignment)}),a=Object.assign(n,Uu,{stylableTexts:[o]},Ku,{lutElement:o});return Rl(a,h,r),this.applyStylers(a,h)}}.addStyler(Bl),tc=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new rh({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new rh({angle:i,stops:n})},ic={...El,...Ol,background:wu,buttonBuilder:Zu,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},Pc(i,s,e,h,r){const n=new Lu(i,s,e,this.background,h,r),o=n.addElement(Vu),a=o.addElement(zu);a.addGap();const l=a.addElement(this.buttonBuilder);a.addGap();const u=o.addElement(zu);u.addGap();const c=u.addElement(_u);u.addGap();const d=n.addElement({Pc:()=>new Ju(i,s,e,Ph,r,this.alignment)});"vertical"===this.alignment&&d.setMargin({left:r.uiButtonSize+6});const f=Object.assign(n,Nu,{setTextLabel:c},Uu,{stylableTexts:[c,d]},Gu("LUTText",[d]),Wu,{button:l},Ku,{lutElement:d},Yu);let A;return f.onMouseClick((()=>{f.getLocked()||f.setOn(!f.getOn())})),f.onMouseEnter((()=>f.setHighlight(!0))),f.onMouseLeave((()=>f.setHighlight(!1))),f.setMouseStyle(t.MouseStyles.Point),f.setTextFillStyleHidden(r.uiTextFillStyleHidden||r.uiTextFillStyle),f.onSwitch(((t,i)=>{i?A&&f.setTextFillStyle(A):(A=f.getTextFillStyle(),f.setTextFillStyle(f.getTextFillStyleHidden()))})),f.setPadding({left:5}),this.applyStylers(f,r)}}.addStyler(Bl).addStyler(Ll),sc={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,i){const s=!i||"object"!=typeof i||void 0===i.toggleVisibilityOnClick||i.toggleVisibilityOnClick,e=null==i?void 0:i.matchStyleExactly,h=i&&"object"==typeof i&&void 0!==i.builder?i.builder:void 0;return this.legendBoxDisposed()||(t instanceof Ad?this.addChart(t,s,h,e):"attach"in t?this.addAttachable(t,s,h,e):t&&this.addDashboard(t,s,h,e)),this},addAttachable(t,i,s,e){const h=t.xf&&t.xf(),r=t.oe&&t.oe(),n=void 0!==e&&e;let o=s;if(!o){let t=h?ic.setAlignment(this.alignment):Qu;void 0!==r&&(t=t.setButtonShape(r)),o=t}const a=this.addElement(o);if(h&&"setLUT"in a){a.setLUT(h.lut);const t=h.lut.getUnits(),i=h.lookUpProperty,s=t.length>0?t:"x"===i?"x":"y"===i?"y":"z"===i?"z":"";a.setLookUpUnit(s)}return this.entryStylers.forEach((t=>t(a))),this.entries.push({entry:a,component:t}),t.attach(a,i,n),i||a.setLocked(!0),this},addChart(t,i,s,e){return t.If().forEach((t=>this.addAttachable(t,i,s,e))),this},addDashboard(t,i,s,e){return t.getCells().filter((t=>t.panel instanceof Ad)).forEach((t=>this.addChart(t.panel,i,s,e))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.forEach((i=>t(i.entry,i.component))),this}},ec={alignment:"vertical",layoutBuilder:zu,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?Vu:zu}},getAlignment(){return this.alignment},titleBuilder:ju,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},hc={...El,...Ol,...ec,background:wu,Pc(t,i,s,e,h,r){const n=this.layoutBuilder.setBackground(this.background).Pc(t,i,s,e,h,!1);let o=Object.assign(n,sc,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>n.Ps});o.entries=[];const a=o.addElement("horizontal"===this.alignment?zu:Vu),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(h.legendTitleFillStyle).setTextFont(h.legendTitleFont);return a.addGap(),o=Object.assign(o,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),Rl(o,h,r),this.applyStylers(o,h)}}.addStyler(((t,i)=>t.setPadding(5)));class rc extends Tl{constructor(i,s,e,h,r){super(i,s,e,h,r),this.Pf=10,this.Df=t.UIDirections.Up,this.Bf=0,this.Dc="major",this.Ya=this.sc(i.An(this.renderingScale).dn(Br).fn(Br)),this.mh=this.sc(i.Sh(this.renderingScale))}uc(){return[this.Ya]}uh(){if(super.uh(),this.Ps)return this;const i=Ah(this.getPosition(),this.scale,this.renderingScale),s=this.renderingScale.ts(i,{x:this.Df===t.UIDirections.Right?-this.Pf:this.Df===t.UIDirections.Left?this.Pf:0,y:this.Df===t.UIDirections.Up?-this.Pf:this.Df===t.UIDirections.Down?this.Pf:0}),e=this.renderingScale.ts(s,{x:this.Df===t.UIDirections.Right?-this.Bf:this.Df===t.UIDirections.Left?this.Bf:0,y:this.Df===t.UIDirections.Up?-this.Bf:this.Df===t.UIDirections.Down?this.Bf:0});return this.mh.xh(i).bh(s),this.Ya.dh(e).yl(this.Df===t.UIDirections.Up?{x:0,y:1}:this.Df===t.UIDirections.Down?{x:0,y:-1}:this.Df===t.UIDirections.Right?{x:1,y:0}:{x:-1,y:0}),this}de(){const i=this.mh.Yu().getThickness();return this.size=this.Df===t.UIDirections.Left||this.Df===t.UIDirections.Right?{x:this.Pf+this.Bf+this.Ya.de().Id().x,y:i}:{y:this.Pf+this.Bf+this.Ya.de().Id().y,x:i},super.de()}dispose(){return super.dispose(),this.Ya.dispose(),this.mh.dispose(),this}setVisible(t){return super.setVisible(t),this.Ya.setVisible(t),this.mh.setVisible(t),this}setMouseInteractions(t){return this.Ya.setMouseInteractions(t),this.mh.setMouseInteractions(t),this}getMouseInteractions(){return this.Ya.getMouseInteractions()}getText(){return this.Ya.vr()}setTextFillStyle(t){return this.Ya.ah(t),this.ae.ie(),this}getTextFillStyle(){return this.Ya.pr()}setTextFont(t){return this.Ya.Mr(t),this}setTextRotation(t){return this.Ya._r(t),this}getTextRotation(){return this.Ya.wr()}getTextFont(){return this.Ya.br()}setText(t){return this.Ya.mr(t),this.ae.ie(),this}setDirection(t){return this.Df=t,this.ae.ie(),this}getDirection(){return this.Df}setPointerLength(t){return this.Pf=t,this.ae.ie(),this}getPointerLength(){return this.Pf}setTickLabelPadding(t){return this.Bf=t,this.ae.ie(),this}getTickLabelPadding(){return this.Bf}setTickStyle(t){return this.mh.ph(t),this.ae.ie(),this}getTickStyle(){return this.mh.Yu()}}const nc={...El,Pc(t,i,s,e,h,r){const n=new rc(t,i,s,e,h);return Rl(n,h,r),this.applyStylers(n,h)}}.addStyler(Bl),oc=nc.addStyler(((t,i)=>(t.Dc="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),ac=nc.addStyler(((t,i)=>(t.Dc="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),lc=Qu.addStyler((t=>t.onSwitch(((i,s)=>!0===s?setTimeout((()=>t.setOn(!1)),300):void 0)))),uc=hc.setAlignment("horizontal"),cc=hc.setAlignment("vertical"),dc={TextBox:ju,CheckBox:Qu,ButtonBox:lc,PointableTextBox:$u,AxisTickMajor:oc,AxisTickMinor:ac,LUTRange:qu},fc={HorizontalLegendBox:uc,VerticalLegendBox:cc},Ac=(t,i)=>{if(Yn(t)){const s=i.da(t);return{x:s.engineX,y:s.engineY}}return t},gc=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},vc=(t,i,s,e=1)=>Bh(t+.1*e*(i-t)+.5*e*s.getPixelSize()*Math.sign(i-t),t,i),yc=(t,i,s,e=1)=>{const h=s.qt(t),r=s.qt(i);return Bh(s.Kt(h+.1*e*(r-h)+.5*e*Math.sign(r-h)),t,i)},mc={Lf:0,Rf:1,Ef:2,Of:3,zf:4,Vf:5,Nf:6,Gf:7,Uf:8,Wf:9,Yf:10,Hf:11,jf:12,$f:13,Xf:14,Zf:15,Qf:16,Jf:17,Kf:18,qf:19,tA:20,iA:21,sA:22,eA:23};class pc extends ha{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.hA=h}}class Sc extends ea{constructor(i,s,h,r,n,o,a,l,u,c,d,f,A,g,v,y){var m,p,S;super(c,u,a,g,v,{numeric:u.getWidth({x:g.xAxisNumericTicks,y:g.yAxisNumericTicks}),datetime:u.getWidth({x:g.xAxisDateTimeTicks,y:g.yAxisDateTimeTicks}),time:u.getWidth({x:g.xAxisTimeTicks,y:g.yAxisTimeTicks})},y),this.rA=new Map,this.nA=void 0,this.oA=0,this.aA=[],this.lA=[],this.Rh=Yo.fitting,this.uA=!0,this.cA=8,this.dA=void 0,this.fA=void 0,this.AA=20,this.gA=1,this.vA=!0,this.yA=!0,this.mA=!0,this.pA=!0,this.SA=!0,this.bA=!0,this.xA=!0,this.MA=!0,this._A=!0,this.wA=!0,this.CA=this.nr.defaultDragMouseStyle,this.kA=this.nr.defaultDragMouseStyle,this.TA=this.nr.defaultDragMouseStyle,this.FA=this.nr.defaultDragMouseStyle,this.IA=this.nr.defaultDragMouseStyle,this.Ct=new Ze,this.PA=[],this.DA=t=>{const i=this.lA.indexOf(t);i>=0&&this.lA.splice(i,1)},this.BA=t=>(this.lA.indexOf(t)<0&&this.lA.push(t),this.DA),this.Si=(t,i)=>this.Ct.emit("axisAreaTouch",this,i),this.LA=er(this.PA),this.onAxisInteractionAreaMouseClick=t=>this.Ct.on("axisAreaMouseClick",t),this.onAxisInteractionAreaMouseDoubleClick=t=>this.Ct.on("axisAreaDoubleClick",t),this.onAxisInteractionAreaMouseDown=t=>this.Ct.on("axisAreaMouseDown",t),this.onAxisInteractionAreaMouseUp=t=>this.Ct.on("axisAreaMouseUp",t),this.onAxisInteractionAreaMouseEnter=t=>this.Ct.on("axisAreaMouseEnter",t),this.onAxisInteractionAreaMouseLeave=t=>this.Ct.on("axisAreaMouseLeave",t),this.onAxisInteractionAreaMouseMove=t=>this.Ct.on("axisAreaMouseMove",t),this.onAxisInteractionAreaMouseWheel=t=>this.Ct.on("axisAreaMouseWheel",t),this.onAxisInteractionAreaMouseDragStart=t=>this.Ct.on("axisAreaMouseDragStart",t),this.onAxisInteractionAreaMouseDrag=t=>this.Ct.on("axisAreaMouseDrag",t),this.onAxisInteractionAreaMouseDragStop=t=>this.Ct.on("axisAreaMouseDragStop",t),this.onAxisInteractionAreaTouchStart=t=>this.Ct.on("axisAreaTouchStart",t),this.onAxisInteractionAreaTouch=t=>this.Ct.on("axisAreaTouch",t),this.onAxisInteractionAreaTouchStop=t=>this.Ct.on("axisAreaTouchEnd",t),this.offAxisInteractionAreaMouseClick=t=>this.Ct.off(t,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=t=>this.Ct.off(t,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=t=>this.Ct.off(t,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=t=>this.Ct.off(t,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=t=>this.Ct.off(t,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=t=>this.Ct.off(t,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=t=>this.Ct.off(t,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=t=>this.Ct.off(t,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=t=>this.Ct.off(t,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=t=>this.Ct.off(t,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=t=>this.Ct.off(t,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=t=>this.Ct.off(t,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=t=>this.Ct.off(t,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=t=>this.Ct.off(t,"axisAreaTouchEnd"),this.mf={relative:1},this.RA=0,this.EA=0,this.OA=(t,i)=>i.getAllocatesAxisSpace()?Math.max(t,i.update().Rc()):t,this.zA=t=>{const i=this.aA.indexOf(t);-1!==i&&this.aA.splice(i,1)},this.VA=(t,i)=>{this.Ct.emit("axisAreaDoubleClick",this,i),this.pA&&(this.setStopped(!1),qh(i))},this.NA=t=>{this.Ct.emit("axisAreaMouseEnter",this),(this.yA||this.vA||this.mA||this.pA)&&this.GA(t)},this.UA=t=>{this.WA(t),this.Ct.emit("axisAreaMouseLeave",this)},this.YA=(t,i,s)=>{var h,r;this.Ct.emit("axisAreaMouseDragStart",this,i,s);const n=Rh(null===(h=this.chart.HA.ko)||void 0===h?void 0:h.axisXYZoomMouseButton,0),o=Rh(null===(r=this.chart.HA.ko)||void 0===r?void 0:r.axisXYPanMouseButton,2),a=e(i.clientX,i.clientY);s===o&&this.yA?(this.jA(t),qh(i)):s===n&&this.vA&&(this.$A(t,a),qh(i))},this.XA=(t,i,s,h,r)=>{var n,o;this.Ct.emit("axisAreaMouseDrag",this,i,s,h,r);const a=Rh(null===(n=this.chart.HA.ko)||void 0===n?void 0:n.axisXYZoomMouseButton,0),l=Rh(null===(o=this.chart.HA.ko)||void 0===o?void 0:o.axisXYPanMouseButton,2),u=e(i.clientX,i.clientY);s===l&&this.yA?(this.ZA(t,r),qh(i)):s===a&&this.vA&&(this.QA(t,h,u,r),qh(i))},this.JA=(t,i,s,h)=>{var r,n;this.Ct.emit("axisAreaMouseDragStop",this,i,s,h);const o=Rh(null===(r=this.chart.HA.ko)||void 0===r?void 0:r.axisXYZoomMouseButton,0),a=Rh(null===(n=this.chart.HA.ko)||void 0===n?void 0:n.axisXYPanMouseButton,2),l=e(i.clientX,i.clientY);s===a&&this.yA?(this.KA(t),qh(i)):s===o&&this.vA&&(this.qA(t,h,l),qh(i)),t.getIsUnderMouse()&&(this.yA||this.vA||this.mA||this.pA)&&this.GA(t)},this.tg=(t,i)=>{if(this.Ct.emit("axisAreaMouseWheel",this,i),this.mA){this.setStopped(!0);const t=this.nr.getWidth(this.ig.$s.Ah(i.clientX,i.clientY)),s=this.ti.Kt(t);this.zoom(s,mr(i)),qh(i)}},this.sg=(t,i)=>this.Ct.emit("axisAreaMouseClick",this,i),this.eg=(t,i)=>this.Ct.emit("axisAreaMouseDown",this,i),this.hg=(t,i)=>this.Ct.emit("axisAreaMouseUp",this,i),this.rg=(t,i)=>this.Ct.emit("axisAreaMouseMove",this,i),this.ng=(t,i,s)=>{this.Ct.emit("axisAreaTouchStart",this,s),this.vA&&(this.GA(t),this.$A(t,i),qh(s))},this.og=(t,i,s,e,h)=>{this.Ct.emit("axisAreaTouch",this,h),this.vA&&(this.QA(t,i,s,e),qh(h))},this.ag=(t,i,s,e)=>{this.Ct.emit("axisAreaTouchEnd",this,e),this.vA&&(this.qA(t,i,s),this.WA(t),qh(e))},this.lg=(t,i,s,e)=>{(this.yA||this.mA)&&(this.GA(t),this.jA(t),qh(e))},this.ug=(t,i,s,h,r,n)=>{if(this.yA){const i=e((h.x+r.x)/2,(h.y+r.y)/2);this.ZA(t,i),qh(n)}if(this.mA){const t=this.ig.$s.Ah(i.x,i.y),e=this.ig.$s.Ah(s.x,s.y),o=Math.abs(this.nr.getWidth(dn(t,h))-this.nr.getWidth(dn(e,r)))-Math.abs(this.nr.getWidth(t)-this.nr.getWidth(e)),a=this.ti.ts(this.dr,-o),l=this.ti.ts(this.Ar,o);this.Lr(a,l,!0),qh(n)}},this.cg=(t,i,s,e)=>{(this.yA||this.mA)&&(this.KA(t),this.WA(t),qh(e))},this.dg=(t,i)=>{(this.SA||this.bA)&&this.Ag(t)},this.gg=(t,i)=>{this.vg(t)},this.yg=(t,i,s)=>{const h=e(i.clientX,i.clientY);this.SA&&this.mg(t,h)},this.pg=(t,i,s,h,r)=>{const n=e(i.clientX,i.clientY);this.SA&&this.Sg(t,n,h,r)},this.bg=(t,i,s,h,r)=>{const n=e(i.clientX,i.clientY);this.SA&&this.xg(t,n,h,r)},this.Mg=(t,i,s,h)=>{const r=e(i.clientX,i.clientY);(this.SA||this.bA)&&this._g(t,r,h),(this.SA||this.bA)&&this.Ag(t)},this.wg=(t,i)=>{this.bA&&(this.setStopped(!0),this.zoom(this.dr,mr(i)),qh(i))},this.Cg=(t,i)=>{this.bA&&(this.setStopped(!0),this.zoom(this.Ar,mr(i)),qh(i))},this.kg=(t,i,s)=>{this.SA&&(this.Ag(t),this.mg(t,i),qh(s))},this.Tg=(t,i,s,e,h)=>{this.SA&&(this.Sg(t,i,s,e),qh(h))},this.Fg=(t,i,s,e,h)=>{this.SA&&(this.xg(t,i,s,e),qh(h))},this.Ig=(t,i,s,e)=>{this.SA&&(this._g(t,i,s),this.vg(t),qh(e))},this.Pg=i,this.ig=s,this.Dg=r,this.Bg=n,this.chart=c,this.Lg=f,this.Rg=h,this.Ns=o,"logarithmic"===y.type&&this.chart.$s.Mo(mc.qf),A(this,this.BA),a.Eg=this,this.Og=d,this.zg=this.Og>50?1:-1,this.Vg=(S=this.nr.toPoint(0,-this.zg),Math.abs(S.x)>=Math.abs(S.y)?S.x>=0?t.UIDirections.Right:t.UIDirections.Left:S.y>=0?t.UIDirections.Up:t.UIDirections.Down),this.Ng=l,this.Gg=this.ti instanceof On?(new Nn).Ss(this.nr.toVec2(this.ti,this.Ng)):(new Gn).Ss(this.nr.toVec2(this.ti,this.Ng)),this.Ug=this.chart.pixelScale,this.Wg=(new Nn).Ss(this.nr.toVec2(this.nr.getWidth(this.Ug),this.Ng)),this.Yg=this.ig.Sh(this.Gg).setMouseInteractions(!1),this.Hg=this.ig.Sh(this.Gg).setMouseInteractions(!1),this.jg=this.ig.Sh(this.Gg).setMouseInteractions(!1),this.$g=this.Rg.lh(this.Ug).ah(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).oh(ah).Ta(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Xg=this.Rg.lh(this.Ug).ah(u.getWidth({x:g.xAxisZoomingBandFillStyle,y:g.yAxisZoomingBandFillStyle})).oh(u.getWidth({x:g.xAxisZoomingBandStrokeStyle,y:g.yAxisZoomingBandStrokeStyle})),this.Zg=this.Rg.lh(this.Ug).ah(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).oh(ah).Ta(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Qg=this.Rg.lh(this.Ug).ah(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).oh(ah).Ta(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.yr=this.Rg.An(this.Gg).setMouseInteractions(!1)._r(this.nr.getTitleTextRotation(this.zg)).fn(Br).dn(Br),this.chart.$s.js.Hs(this.$g,(t=>this.$g.Xs(t)),{animationEnabled:this.zh}),this.chart.$s.js.Hs(this.Zg,(t=>this.Zg.Xs(t)),{animationEnabled:this.zh}),this.chart.$s.js.Hs(this.Qg,(t=>this.Qg.Xs(t)),{animationEnabled:this.zh});const b=Jn(new qn(this.ng,this.og,this.ag,1),new to(this.lg,this.ug,this.cg),new Kn(this.VA)),x=Jn(new qn(this.kg,this.Tg,this.Ig)),M=Jn(new qn(this.kg,this.Fg,this.Ig));this.$g.setMouseEnterEventHandler(this.NA).setMouseLeaveEventHandler(this.UA).setMouseDragStartEventHandler(this.YA).setMouseDragEventHandler(this.XA).setMouseDragStopEventHandler(this.JA).setMouseWheelEventHandler(this.tg).setMouseDoubleClickEventHandler(this.VA).setMouseClickEventHandler(this.sg).setMouseDownEventHandler(this.eg).setMouseUpEventHandler(this.hg).setMouseMoveEventHandler(this.rg).setTouchStartEventHandler(b.onTouchStart).setTouchMoveEventHandler(b.onTouchMove).setTouchEndEventHandler(b.onTouchEnd),this.Zg.setMouseEnterEventHandler(this.dg).setMouseLeaveEventHandler(this.gg).setMouseDragStartEventHandler(this.yg).setMouseDragEventHandler(this.pg).setMouseDragStopEventHandler(this.Mg).setMouseWheelEventHandler(this.wg).setTouchStartEventHandler(x.onTouchStart).setTouchMoveEventHandler(x.onTouchMove).setTouchEndEventHandler(x.onTouchEnd),this.Qg.setMouseEnterEventHandler(this.dg).setMouseLeaveEventHandler(this.gg).setMouseDragStartEventHandler(this.yg).setMouseDragEventHandler(this.bg).setMouseDragStopEventHandler(this.Mg).setMouseWheelEventHandler(this.Cg).setTouchStartEventHandler(M.onTouchStart).setTouchMoveEventHandler(M.onTouchMove).setTouchEndEventHandler(M.onTouchEnd),this.Yg.ph(u.getWidth({x:g.xAxisStrokeStyle,y:g.yAxisStrokeStyle})),this.Hg.ph(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.jg.ph(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.yr.ah(u.getWidth({x:g.xAxisTitleFillStyle,y:g.yAxisTitleFillStyle})).Mr(u.getWidth({x:g.xAxisTitleFont,y:g.yAxisTitleFont})),this.Gs=o.Us(this,{}),this.Cr=this.Gs.Jg([this.yr]).te(g.effectsText),this.Kg=null!==(m=u.getWidth({x:g.xAxisMarginAfterTicks,y:g.yAxisMarginAfterTicks}))&&void 0!==m?m:7,this.qg=null!==(p=u.getWidth({x:g.xAxisMarginAfterTitle,y:g.yAxisMarginAfterTitle}))&&void 0!==p?p:7}un(){return this.Gh}cn(){return void 0!==this.Br}setTickStrategy(t,i){return super.cr(t,i)}getTickStrategy(){return this.Dh}addBand(t=!0){const i=t?this.Bg:this.Dg,s=new Uo(i,this.chart,this.LA,this,this.Gg,this.nr,this.zs,this.Ns);return this.PA.push(s),s}addConstantLine(t=!0){const i=t?this.Bg:this.Dg,s=new Wo(i,this.chart,this.LA,this,this.Gg,this.nr,this.zs,this.Ns);return this.PA.push(s),s}tv(t){this.PA.forEach(t)}sv(t){return this.PA.map(t)}getHighlighters(){return this.PA}setThickness(t){return"number"==typeof t?(this.ev=t,this.hv=t):"object"==typeof t&&(this.ev=t.min,this.hv=t.max),this.chart.$s.ie(),this}getThickness(){return{min:this.ev,max:this.hv}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}rv(){return this.lA}$r(t,i){return new pc(i,t,this.ig,this.Gg,this.Gg)}kr(){if(this.rA){for(const t of this.rA)t[1].grid.dispose(),t[1].tick.dispose();this.rA.clear()}super.kr()}Xr(t,i){const{tickStart:s}=i,e=t.ir.jr,h=s+e.getTickLength()*this.zg+e.getTickPadding()*this.zg;t.kh.dh(this.nr.toPoint(t.S,h)).yl(this.nr.toPoint(e.getLabelAlignment(),-this.zg))._r(e.labelRotation).setVisible(this.getVisible())}nv(t,i){const{startPosition:s,gridStrokeLen:e,gridStrokeStart:h,tickStart:r}=i,n=t.ir.jr,o=s-e*n.getGridStrokeLength(),a=r+n.getTickLength()*this.zg;return{gridStroke:{start:this.nr.toPoint(t.S,h),end:this.nr.toPoint(t.S,o)},tickStroke:{start:this.nr.toPoint(t.S,r),end:this.nr.toPoint(t.S,a)}}}nn(t,i){return"linear"===this.lr.type?vc(t,i,this.ti):yc(t,i,this.ti)}ov(t,i){return i instanceof On?vc:yc}ln(t,i,s){if("logarithmic"!==this.lr.type){const e=this.ti.ps(i-t);return{min:t-s*e,max:i+s*e}}const e=this.ti;return{min:e.ts(t,-s),max:e.ts(i,s)}}de(){if(!this.Ds)return{av:0,lv:0,pf:0};const t=!(this.Bh.size>0),i=this.yr&&this.yr.vr().length>0&&this.getTitleFillStyle()!==De,s=this.nr.getHeight(i?this.chart.$s.cv.uv(this.getTitle(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0})+(i?this.qg:0),e=this.Ph===Xo?new Map:ra(this.Ph,Math.min(this.dr,this.Ar),Math.max(this.dr,this.Ar),this.dr,this.Ar,0),h=this.ti;let r=0;e.forEach(((i,s)=>{if((t=>void 0!==t.jr&&void 0!==t.Yr)(s)){const e=Math.max(...i.map((i=>{if(!Xr(i,this.dr,this.Ar))return 0;const e=this.chart.$s.cv.uv(s.Yr(i,h),s.jr.labelFont,s.jr.labelRotation);return t||!e.isEstimate?this.nr.getHeight(e):0})))+s.jr.tickLength+s.jr.tickPadding+s.jr.labelPadding;r=Math.max(r,e)}}));const n=this.aA.reduce(this.OA,0);r=Math.max(r,n),r+=this.Kg;const o=Bh(s+r,void 0!==this.ev?this.ev:0,void 0!==this.hv?this.hv:Or);return this.oA=o,{av:r,lv:s,pf:o}}uh(t){const i=this.getVisible()&&t.dv>0;this.fv=t;const s=this.Yg.Yu(),e=this.ti.getInnerStart()<this.ti.getInnerEnd()?this.ti.getInnerStart():this.ti.getInnerEnd(),h=this.ti.getInnerEnd()>this.ti.getInnerStart()?this.ti.getInnerEnd():this.ti.getInnerStart(),r=s.getThickness()*this.zg/2,n=this.Ng.getInnerInterval(),o=this.Og/100*n,a=o+t.Av,l=n*this.zg,u=a+r;if(i||this.kr(),this.Ph!==Xo&&i){const t=this.ti.Wi();this.Or({physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});for(const[i,s]of this.Bh){let e=this.rA.get(i);if(!e)if(i.Mh)e={grid:this.Pg[0].gv(this.Gg).setMouseInteractions(!1),tick:this.Pg[0].gv(this.Gg).setMouseInteractions(!1)};else if("vv"in i){const t=Array.from(this.Bh.keys()).filter((t=>"vv"in t)).reverse().indexOf(i),s=this.Pg[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");e={grid:s.gv(this.Gg).setMouseInteractions(!1),tick:s.gv(this.Gg).setMouseInteractions(!1)}}if(e){e.grid._i(),e.tick._i();for(const[i,h]of s){const i=this.nv(h,{physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});e.grid.Sn().yv(i.gridStroke.start,i.gridStroke.end),e.tick.Sn().yv(i.tickStroke.start,i.tickStroke.end)}e.grid.ph(i.jr.getGridStrokeStyle()),e.tick.ph(i.jr.getTickStyle()),this.rA.set(i,e)}}}const c=u,d=c+this.zg*t.mv,f=this.SA||this.bA?Math.min(this.AA,.25*t.dv):0,A={start:this.nr.toVec2(this.ti.ts(this.ti.getInnerStart(),f),c),end:this.nr.toVec2(this.ti.ts(this.ti.getInnerEnd(),-f),d)},g=Ah(this.nr.toVec2(this.ti.getInnerStart(),d),this.Gg,this.Ug),v=Ah(A.start,this.Gg,this.Ug),y=Ah(A.end,this.Gg,this.Ug),m=Ah(this.nr.toVec2(this.ti.getInnerEnd(),c),this.Gg,this.Ug);this.Yg.xh(this.nr.toPoint(e,a)).bh(this.nr.toPoint(h,a)).setVisible(i),this.Hg.xh(this.nr.toPoint(this.ti.ts(this.ti.getInnerStart(),this.cA),a)).bh(this.nr.toPoint(this.ti.getInnerStart(),a)).setVisible(i),this.jg.xh(this.nr.toPoint(this.ti.ts(this.ti.getInnerEnd(),-this.cA),a)).bh(this.nr.toPoint(this.ti.getInnerEnd(),a)).setVisible(i);const p=a+t.av*this.zg;if(this.yr.dh(this.nr.toPoint(this.nr.getWidth(Ah(un(cn(g,m),.5),this.Ug,this.Gg)),p)).yl(this.nr.toPoint(0,-1*this.zg)).setVisible(i),this.nA){const i=this.Og/100*n+t.Av,s=-this.zg*n-t.Av,e={start:this.nr.toVec2(this.nA.min,u+this.zg*this.oA),end:this.nr.toVec2(this.nA.max,i+s)},h=Ah(e.start,this.Gg,this.Ug),r=Ah(e.end,this.Gg,this.Ug);this.Xg.dh(h).Wt(dn(r,h)).setVisible(!0)}else this.Xg.setVisible(!1);this.$g.dh(v).Wt(dn(y,v)).setVisible(i),this.Zg.dh(g).Wt(dn(v,g)).setVisible(i),this.Qg.dh(y).Wt(dn(m,y)).setVisible(i);for(const s of this.aA)s.update().plot(i,a,l,t.Av,u);for(const t of this.PA)t.uh()}setLength(t){return this.mf=t,this.chart.$s.ie(),this}getLength(){return this.mf}setMargins(t,i){return this.RA=t,this.EA=i,this.chart.$s.ie(),this}getMargins(){return{start:this.RA,end:this.EA}}getStackIndex(){var t,i;return null!==(i=null===(t=[...this.chart.pv,...this.chart.Sv,...this.chart.bv,...this.chart.xv].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==i?i:0}getParallelIndex(){var t,i;return null!==(i=null===(t=[...this.chart.pv,...this.chart.Sv,...this.chart.bv,...this.chart.xv].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==i?i:0}Mv(){const t=this.fv;if(!t)return;const i=this.getVisible()&&t.dv>0,s=this.Yg.Yu().getThickness()*this.zg/2,e=this.Ng.getInnerInterval(),h=this.Og/100*e+t.Av,r=e*this.zg,n=h+s;for(const s of this.aA)s.update().plot(i,h,r,t.Av,n);for(const t of this.PA)t.uh()}_v(){return this.oA}wv(t,i){i=i||dc.AxisTickMajor;const s=new Dl(this,t?this.Pg[0]:this.Rg,this.Rg,this.ti,this.Wg,this.Wg,this.nr,this.Vg,this.zA,this.zs,i).setTextFormatter(this.formatValue);return this.aA.push(s),s}GA(t){this.chart.$s.js.he(t,1),this.dA=t.$s.wn(this.CA,this.dA)}WA(t){this.chart.$s.js.he(t,0),t.$s.Cn(this.dA)}jA(t){this.setStopped(!0),t.$s.Cn(this.dA)}ZA(t,i){const s=-this.nr.getWidth(i);this.pan(s),this.dA=t.$s.wn(this.kA,this.dA)}pan(t){const i=this.dr,s=this.Ar,e=this.ti.ts(i,t),h=this.ti.ts(s,t);this.Lr(e,h,!1)}zoom(t,i){const s=this.ti.qt(this.dr),e=this.ti.qt(this.Ar),h=this.ti.qt(t),r=Bh((h-s)/(e-s),0,1),n=.2*this.ti.Wi(),o=r*this.gA*n*-i,a=(1-r)*this.gA*n*i,l=this.ti.ts(this.dr,o),u=this.ti.ts(this.Ar,a);this.Lr(l,u,!0)}KA(t){this.nA=void 0,t.$s.Cn(this.dA)}$A(t,i){this.setStopped(!0),t.$s.Cn(this.dA),this.chart.$s.js.he(this.$g,0)}QA(t,i,s,e){const h=Ah(this.ig.$s.Ah(s.x,s.y),this.ig.$s.ti,this.Gg),r=Bh(this.nr.getWidth(h),this.dr,this.Ar),n=this.nr.getWidth(Ah(this.ig.$s.Ah(i.x,i.y),this.ig.$s.ti,this.Gg));Math.abs(this.ti.qt(r)-this.ti.qt(n))>10?(this.nA=a(Math.min(r,n),Math.max(r,n)),this.dA=t.$s.wn(this.TA,this.dA)):(this.nA=void 0,this.dA=t.$s.wn(this.CA,this.dA)),this.ig.ie()}qA(t,i,s){if(this.nA){const t=this.nA.min,i=this.nA.max,s=this.Ar<this.dr;this.hi(s?i:t,s?t:i,!0,!0,"interactionSetInterval")}this.nA=void 0,t.$s.Cn(this.dA)}Ag(t){this.chart.$s.js.he(t,1),this.fA=t.$s.wn(this.FA,this.fA)}vg(t){this.chart.$s.js.he(t,0),t.$s.Cn(this.fA)}mg(t,i){this.setStopped(!0),this.fA=t.$s.wn(this.IA,this.fA)}Sg(t,i,s,e){const h=this.nr.getWidth(e);this.Lr(this.ti.ts(this.dr,h),this.Ar,!0)}xg(t,i,s,e){const h=this.nr.getWidth(e);this.Lr(this.dr,this.ti.ts(this.Ar,h),!0)}_g(t,i,s){t.$s.Cn(this.fA),t.getIsUnderMouse()&&(this.fA=t.$s.wn(this.FA)),this.ig.ie()}addCustomTick(t){return this.wv(!0,t)}getUiPosition(){return this.Og}setStrokeStyle(t){return this.Yg.ph(t),this.ig.ie(),this}getStrokeStyle(){return this.Yg.Yu()}getOverlayStyle(){return this.$g.pr()}setOverlayStyle(t){return this.$g.ah(t),this.ig.ie(),this}setAxisInteractionZoomByDragging(t){return this.vA=t,this}getAxisInteractionZoomByDragging(){return this.vA}setAxisInteractionPanByDragging(t){return this.yA=t,this}getAxisInteractionPanByDragging(){return this.yA}setAxisInteractionZoomByWheeling(t){return this.mA=t,this}getAxisInteractionZoomByWheeling(){return this.mA}setAxisInteractionReleaseByDoubleClicking(t){return this.pA=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.pA}setAxisMouseHoverStyle(t=this.nr.defaultDragMouseStyle){return this.CA=t,this}getAxisMouseHoverStyle(){return this.CA}setAxisMousePanStyle(t=this.nr.defaultDragMouseStyle){return this.kA=t,this}getAxisMousePanStyle(){return this.kA}setAxisMouseZoomStyle(t=this.nr.defaultDragMouseStyle){return this.TA=t,this}getAxisMouseZoomStyle(){return this.TA}setAnimationHighlight(t){return this.chart.$s.js.re(this.$g,t),this.chart.$s.js.re(this.Zg,t),this.chart.$s.js.re(this.Qg,t),this}getAnimationHighlight(){return this.chart.$s.js.ne(this.$g)}getTitleMargin(){return this.getMarginAfterTicks()}setTitleMargin(t){return this.setMarginAfterTicks(t)}getMarginAfterTicks(){return this.Kg}setMarginAfterTicks(t){return this.Kg=t,this.ig.ie(),this}getMarginAfterTitle(){return this.qg}setMarginAfterTitle(t){return this.qg=t,this.ig.ie(),this}getNibLength(){return this.cA}setNibLength(t){return this.cA=t,this.ig.ie(),this}getNibStyle(){return this.Hg.Yu()}setNibStyle(t){return this.Hg.ph(t),this.jg.ph(t),this.ig.ie(),this}getNibOverlayStyle(){return this.Zg.pr()}setNibOverlayStyle(t){return this.Zg.ah(t),this.Qg.ah(t),this.ig.ie(),this}setNibMousePickingAreaSize(t){return this.AA=t,this.ig.ie(),this}getNibMousePickingAreaSize(){return this.AA}setNibInteractionScaleByDragging(t){return this.SA=t,this}getNibInteractionScaleByDragging(){return this.SA}setNibInteractionScaleByWheeling(t){return this.bA=t,this}getNibInteractionScaleByWheeling(){return this.bA}setNibMouseHoverStyle(t=this.nr.defaultDragMouseStyle){return this.FA=t,this}getNibMouseHoverStyle(){return this.FA}setNibMouseScaleStyle(t=this.nr.defaultDragMouseStyle){return this.IA=t,this}getNibMouseScaleStyle(){return this.IA}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.xA=t,this}getChartInteractionPanByDrag(){return this.xA}setChartInteractionZoomByWheel(t){return this.MA=t,this}getChartInteractionZoomByWheel(){return this.MA}setChartInteractionZoomByDrag(t){return this._A=t,this}getChartInteractionZoomByDrag(){return this._A}setChartInteractionFitByDrag(t){return this.wA=t,this}getChartInteractionFitByDrag(){return this.wA}Vt(){return this.ti.Vt(),this}Nt(){return this.ti.Nt(),this}dispose(){this.Hg.dispose(),this.jg.dispose(),this.Yg.dispose(),this.$g.dispose(),this.Xg.dispose(),this.Zg.dispose(),this.Qg.dispose(),this.yr.dispose(),this.Er(Ih);for(const t of this.rA.values())t.grid.dispose(),t.tick.dispose();return this.lA.slice().forEach(Ih),this.PA.slice().forEach(Ih),this.Lg(this),this.Ct.emit("dispose",this),this}onDispose(t){return this.Ct.on("dispose",t)}offDispose(t){return this.Ct.off(t,"dispose")}setVisible(t){this.Hg.setVisible(t),this.jg.setVisible(t),this.Yg.setVisible(t),this.yr.setVisible(t),this.$g.setVisible(t),this.Zg.setVisible(t),this.Qg.setVisible(t),this.Er((i=>{i.qs(t)}));for(const i of this.rA.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.chart.$s.ie(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.zh),this}}const bc={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>e(t,i)},xc={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>e(i,t)},Mc=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof Sc&&"y"in t&&t.y instanceof Sc),_c=le({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new so,tickLength:7,tickStyle:new so,tickPadding:0,labelFont:new ua,labelFillStyle:new Ee,labelPadding:0,labelAlignment:0,labelRotation:0});class wc extends _c{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelPadding(t){return this.set("labelPadding",t)}getLabelPadding(){return this.get("labelPadding")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const Cc=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),kc=new wc({labelFillStyle:De,gridStrokeStyle:ah,tickStyle:ah}),Tc=t=>Cc(t)&&Be(t.labelFillStyle)&&lh(t.gridStrokeStyle)&&lh(t.tickStyle),Fc=(t,i,s,e,h)=>(r,n)=>o=>{const a=new Date(o+r),l={year:n?a.getUTCFullYear():a.getFullYear(),monthIndex:n?a.getUTCMonth():a.getMonth(),day:n?a.getUTCDate():a.getDate(),hours:n?a.getUTCHours():a.getHours(),minutes:n?a.getUTCMinutes():a.getMinutes(),seconds:n?a.getUTCSeconds():a.getSeconds(),millis:n?a.getUTCMilliseconds():a.getMilliseconds()},u=e?e(l):void 0;if(0===t&&!0===u)return o;const c=l[i];h.includes("year")&&(l.year=Math.floor(l.year/s)*s),h.includes("monthIndex")&&(l.monthIndex=0),h.includes("day")&&(l.day=1),h.includes("hours")&&(l.hours=0),h.includes("minutes")&&(l.minutes=0),h.includes("seconds")&&(l.seconds=0),h.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*s;return-1===t&&!1===u&&(d=0),0!==d&&(l[i]=s*(d>0?Math.floor((c+d)/s):Math.ceil((c+d)/s))),n?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-r:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-r},Ic=(t,i,s,...e)=>Fc(-1,t,i,s,e),Pc=(t,i,s,...e)=>Fc(-1,t,i,s,e),Dc=(t,i,s,...e)=>Fc(0,t,i,s,e),Bc=(t,i,...s)=>Fc(1,t,i,void 0,s),Lc=t=>(i,s)=>e=>{const h=new Date(e+i),r=s?h.getUTCDay():h.getDay(),n=1===r&&0===(s?h.getUTCHours():h.getHours())&&0===(s?h.getUTCMinutes():h.getMinutes())&&0===h.getSeconds()&&0===h.getMilliseconds();if(0===t&&!0===n)return e;let o=s?h.getUTCDate():h.getDate();return-1===t&&1===r&&!1===n||(-1===t?o-=r>=2?r-1:r+6:o+=r>0?8-r:1),s?Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),o,0,0,0,0)-i:new Date(h.getFullYear(),h.getMonth(),o,0,0,0,0).getTime()-i},Rc=[{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:qo({ignore:"first"},2,5)},minorTicks:{amount:4,fitFunction:qo(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:Ic("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:ta(5,10,15,30)},minorTicks:{amount:4,fitFunction:qo(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:Ic("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:ta(5,10,15,30)},minorTicks:{amount:12,fitFunction:qo(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:Ic("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:ta(3,6,12)},minorTicks:{amount:8,fitFunction:qo(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:Ic("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:qo({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:qo({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:Lc(-1),getNextKeyValueIncludingRef:Lc(0),getNextKeyValue:Lc(1),greatTicks:!0,majorTicks:{fitFunction:qo(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:Pc("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Dc("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:Bc("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:qo(void 0,2,3)},minorTicks:{fitFunction:qo(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:Pc("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Dc("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Bc("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:qo({ignore:"first"},2,5)},minorTicks:{fitFunction:qo(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:Pc("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Dc("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Bc("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:qo(void 0,2,4)},minorTicks:{fitFunction:qo(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:Pc("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Dc("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Bc("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:Pc("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Dc("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Bc("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],Ec=(t,i,s)=>{let e=((t,i,s,e,h)=>{const r=i-t;let n;for(let t=0;t<Rc.length;t+=1){const i=r/Rc[t].unit;if(i<=1){n=Rc[t];break}}return n})(i,s);if(void 0!==e&&0===Rc.indexOf(e)&&(e=Rc[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=Rc[Rc.indexOf(e)-h];return void 0===r?Rc[0]:r},Oc=(t,i,s)=>(e,h,r,n)=>{const o=Ec("great",e,h);if(void 0===o)return[];if("Decade"===o.label||"Century"===o.label||"Millennium"===o.label)return[];const a=n>r?e:h,l=(e+h)/2,u=n>r?h:e;if(Rc.indexOf(o)<=Rc.findIndex((t=>"Hour"===t.label)))return"left"===s?[a]:[];let c;if(!0===o.irregular)c=Ko(e,h,o.getPrevKeyValue(t,i),o.getNextKeyValue(t,i));else{const s=o.greatTicks.getReferenceKeyValue(t,i)(e);c=Jo(e,h,o.unit,s,1)}const d=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(e,h,c);return"left"===s?void 0===d||Xr(d,l,u)?[a]:[d]:void 0!==d&&Xr(d,l,u)?[d]:[u]},zc=(t,i,s)=>(e,h,r,n)=>{const o=Ec(t,r,n);let a;if(void 0===o)return[];if("great"===t&&void 0!==o.greatTicks)if(!0===o.irregular)a=Ko(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s));else{const t=o.greatTicks.getReferenceKeyValue(i,s)(e);a=Jo(e,h,o.unit,t,1)}else if("major"===t&&void 0!==o.majorTicks)a=!0===o.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s)):((t,i,s)=>{const e=[];let h=t,r=0;for(;h<i;)if(e.push(h),h+=s,r+=1,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(e,h,o.unit);else{if("minor"!==t||void 0===o.minorTicks)return[];if(!0===o.irregular)a=((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(e,h,o.getNextKeyValueIncludingRef(i,s),o.getNextKeyValue(i,s));else{const t=(t=>{if(void 0!==t)return Rc[Rc.indexOf(t)+1]})(o);if(void 0===t)return[];a=Qo(e,h,t.unit/o.minorTicks.amount,1)}}return a},Vc=t=>(i,s,e,h,r,n)=>{const o=Ec(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},Nc=le({type:"date-time-ticks",utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new wc,majorTickStyle:new wc,minorTickStyle:new wc,formatOptionsMajorCentury:{year:"numeric"},formatOptionsMinorDecade:{year:"numeric"},formatOptionsMajorDecade:{year:"numeric"},formatOptionsMinorYear:{year:"numeric"},formatOptionsMajorYear:{year:"numeric"},formatOptionsMinorMonth:{month:"short"},formatOptionsGreatYear:{year:"numeric"},formatOptionsMajorMonth:{month:"long"},formatOptionsMinorWeek:{day:"numeric"},formatOptionsGreatMonth:{year:"numeric",month:"long"},formatOptionsMajorWeek:{day:"numeric",weekday:"short"},formatOptionsMinorDay:{day:"numeric",weekday:"short"},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long"}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric"},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},formatOptionsMajorSecond:{second:"2-digit"},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return`${(i.getSeconds()+i.getUTCMilliseconds()/1e3).toFixed(2)}`},formatOptionsGreatSecond:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsMajorMilliSecond:t=>{const i=new Date(t);return`${(i.getSeconds()+i.getUTCMilliseconds()/1e3).toFixed(1)}`}});class Gc extends Nc{Tr(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>Rc.map((i=>{const s=((t,i,s)=>{switch(s.label){case"MilliSecond100":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorMilliSecond:t.formatOptionsMinorMillisecond;case"Second":return"Great"===i?t.formatOptionsGreatSecond:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;Ch.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r+i;const a=n.getInnerStart(),l=n.getInnerEnd(),u=a>l,c=Ec(t,u?l:a,u?a:l);if(void 0===c)return h(o);if("great"===t){const t=Dh(r,"left"===s?a:l);let e;if(e=!1===t?r:!1===c.irregular?"left"===s&&!1===u||"right"===s&&!0===u?c.greatTicks.getReferenceKeyValue(i,this.utc)(r):c.greatTicks.getReferenceKeyValue(i,this.utc)(r+1*c.unit):"left"===s&&!1===u||"right"===s&&!0===u?c.getPrevKeyValue(i,this.utc)(r):c.getNextKeyValue(i,this.utc)(r),o=e+i,"right"===s&&!0===t)return""}const d=e.get(t);if(void 0===d)return h(o);const f=d[Rc.indexOf(c)];return void 0===f?"":"function"==typeof f?f(o,n,this.locale):f.format(o)},n=[],o=[{kh:"Great ticks (directive)",vv:0,_h:!0,vn:zc("great",i,this.utc),yn:void 0},{kh:"Major ticks",vv:1,jr:this.majorTickStyle,Yr:r("major"),vn:zc("major",i,this.utc),sr:{Zr:Vc("major")},yn:void 0}];Tc(this.greatTickStyle)||(n.push({kh:"Great ticks (left)",jr:this.greatTickStyle.setLabelAlignment(-1),Yr:r("great","left"),vn:Oc(i,this.utc,"left"),Mh:!0,Kr:!1}),n.push({kh:"Great ticks (right)",jr:this.greatTickStyle.setLabelAlignment(1),Yr:r("great","right"),vn:Oc(i,this.utc,"right"),Mh:!0,Kr:!1})),Tc(this.minorTickStyle)||o.push({kh:"Minor ticks",vv:2,jr:this.minorTickStyle,Yr:r("minor"),vn:zc("minor",i,this.utc),sr:{Zr:Vc("minor"),er:(t,i,s,e,h,r)=>{const n=Ec("minor",h,r);return!n||"Week"!==n.label}},yn:void 0});const a=this.cursorFormatter;return{Fh:n,Ih:o,wh:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=new Date(i+t);return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric",minute:"2-digit",hour:"2-digit"}).format(h)} `},Pr:1e3,Dr:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return this.set("greatTickStyle",t(i))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsGreatSecond",t||this.formatOptionsGreatSecond).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMajorMilliSecond",i||this.formatOptionsMajorMilliSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const Uc=(t,i)=>(s,e)=>{const h=e-s;if(i){const i=Math.log10(h/2);let r=10**Math.floor(i-t);const n=1/r;r=Math.round(r*n)/n;const o=Math.round(Math.floor(s/(10*r))*r*10*n)/n;return Jo(o,e,r,void 0,n)}const r=Math.log10(h);let n=10**Math.round(r-t);const o=1/n;return n=Math.round(n*o)/o,Qo(s,e,n,o)},Wc=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):void 0,Yc=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%3==0)):2===i?t.filter(((t,i)=>i%4==0)):3===i?t.filter(((t,i)=>i%5==0)):void 0,Hc=qo(void 0,2,5),jc=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,$c=(t,i)=>{const s=Fn(t),e=In(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,l=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},Xc=le({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new wc,majorTickStyle:new wc,minorTickStyle:new wc,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class Zc extends Xc{Tr(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(i,s)=>Rn.LogarithmicNoExponents(i,s,void 0,t.base):Rn.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Rn.LogarithmicNoExponents(i,s,void 0,t.base):Rn.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Rn.LogarithmicNoExponents(i,s,void 0,t.base):Rn.Numeric),r=[],n=[];Tc(this.extremeTickStyle)||r.push({kh:"Extreme ticks",jr:this.extremeTickStyle,Yr:void 0===i?s:(t,e,h)=>s(i+t,e,h),vn:Zo,Mh:!0,Kr:!0}),n.push({kh:"Major ticks",vv:0,jr:this.majorTickStyle,Yr:void 0===i?e:(t,s,h)=>e(i+t,s,h),vn:"logarithmic"===t.type?$c(t.base,!0):Uc(0,!0),sr:"logarithmic"===t.type?{Zr:Yc}:{Zr:Wc},yn:void 0}),Tc(this.minorTickStyle)||n.push({kh:"Minor ticks",vv:1,jr:this.minorTickStyle,Yr:void 0===i?h:(t,s,e)=>h(i+t,s,e),vn:"logarithmic"===t.type?$c(t.base,!1):Uc(1,!1),sr:"logarithmic"===t.type?{Zr:jc}:{Zr:Hc},yn:50});const o=this.cursorFormatter?this.cursorFormatter:Rn.Numeric;return{Fh:r,Ih:n,wh:void 0===i?o:(t,s,e)=>o(i+t,s,e),Pr:1e-9,Dr:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(i))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const i=this.setMajorTickStyle(t).setMinorTickStyle(t);return i.extremeTickStyle!==kc?i.setExtremeTickStyle(t):i}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const Qc=1e6,Jc=le({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new wc,minorTickStyle:new wc,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),Kc=36e5,qc=6e4,td=1e3,id=1e-6,sd=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=Kc?"MajorHours":s>=6e5?"MajorMinutes15":s>=9e4?"MajorMinutes":s>=10500?"MajorSeconds15":s>=td?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},ed={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/Kc);i%=Kc;const h=Math.floor(i/qc);i%=qc;const r=Math.floor(i/td);return`${s}${vr(e,2)}:${vr(h,2)}:${vr(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/Kc);i%=Kc;const h=Math.floor(i/qc);i%=qc;const r=Math.floor(i/td);i%=td;const n=Math.floor(i/1);return`${s}${vr(e,2)}:${vr(h,2)}:${vr(r,2)}.${vr(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/Kc),h=Math.floor(i/qc)%60,r=Math.floor(i/td)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${vr(e,2)}:${vr(h,2)}:${vr(r,2)}.${vr(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/Kc),h=Math.floor(i/qc)%60,r=Math.floor(i/td)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${vr(e,2)}:${vr(h,2)}:${vr(r,2)}.${vr(n,3)}${o}`}},hd={MajorHours12:{major:{format:ed.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,Jo(t,i,h,void 0,Qc)},fitKeyValues:qo({ignore:"first"},2,4)},minor:{format:ed.hhmmss,getKeyValues:(t,i,s,e)=>Qo(t,i,36e5,Qc),fitKeyValues:qo({},2,3,4,6)},defaultValueFormatter:ed.hhmmss},MajorHours:{major:{format:ed.hhmmss,getKeyValues:(t,i,s,e)=>{const h=Kc;return t=Math.floor(t/(12*h))*h*12,Jo(t,i,h,void 0,Qc)},fitKeyValues:qo({ignore:"first"},2,6,12)},minor:{format:ed.hhmmss,getKeyValues:(t,i,s,e)=>Qo(t,i,3e5,Qc),fitKeyValues:qo({},2,4,6)},defaultValueFormatter:ed.hhmmss},MajorMinutes15:{major:{format:ed.hhmmss,getKeyValues:(t,i,s,e)=>(t=Math.floor(t/Kc)*Kc,Jo(t,i,9e5,void 0,Qc)),fitKeyValues:qo({ignore:"first"},2)},minor:{format:ed.hhmmss,getKeyValues:(t,i,s,e)=>Qo(t,i,6e4,Qc),fitKeyValues:qo({},3,5)},defaultValueFormatter:ed.hhmmss},MajorMinutes:{major:{format:ed.hhmmss,getKeyValues:(t,i,s,e)=>{const h=qc;return t=Math.floor(t/6e5)*h*10,Jo(t,i,h,void 0,Qc)},fitKeyValues:qo({ignore:"first"},2,5)},minor:{format:ed.hhmmss,getKeyValues:(t,i,s,e)=>Qo(t,i,5e3,Qc),fitKeyValues:qo({},2,3,4,6)},defaultValueFormatter:ed.hhmmss},MajorSeconds15:{major:{format:ed.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,Jo(t,i,h,void 0,Qc)},fitKeyValues:qo({ignore:"first"},2,4)},minor:{format:ed.hhmmss,getKeyValues:(t,i,s,e)=>Qo(t,i,1e3,Qc),fitKeyValues:qo({},3,5)},defaultValueFormatter:ed.hhmmss},MajorSeconds:{major:{format:ed.hhmmssmmm,getKeyValues:(t,i,s,e)=>{const h=td;return t=Math.floor(t/1e4)*h*10,Jo(t,i,h,void 0,Qc)},fitKeyValues:qo({ignore:"first"},2,5)},minor:{format:ed.hhmmssmmm,getKeyValues:(t,i,s,e)=>Qo(t,i,100,Qc),fitKeyValues:qo({},2,3,5)},defaultValueFormatter:ed.hhmmssmmm},MajorMilliseconds100:{major:{format:ed.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,Jo(t,i,100,void 0,Qc)),fitKeyValues:qo({ignore:"first"},2,5)},minor:{format:ed.hhmmssmmm,getKeyValues:(t,i,s,e)=>Qo(t,i,10,Qc),fitKeyValues:qo({},2,3,5)},defaultValueFormatter:ed.hhmmssmmm},MajorMilliseconds10:{major:{format:ed.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,Jo(t,i,10,void 0,Qc)),fitKeyValues:qo({ignore:"first"},2,5)},minor:{format:ed.hhmmssmmm,getKeyValues:(t,i,s,e)=>Qo(t,i,1,Qc),fitKeyValues:qo({},2,3,5)},defaultValueFormatter:ed.hhmmssmmm},MajorMilliseconds:{major:{format:ed.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,Jo(t,i,1,void 0,Qc)),fitKeyValues:qo({ignore:"first"},2,5)},minor:{format:ed.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Qo(t,i,.1,Qc),fitKeyValues:qo({},2)},defaultValueFormatter:ed.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:ed.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,Jo(t,i,.1,void 0,Qc)),fitKeyValues:qo({ignore:"first"},2,5)},minor:{format:ed.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Qo(t,i,.01,Qc),fitKeyValues:qo({},2,3,5)},defaultValueFormatter:ed.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:ed.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,Jo(t,i,h,void 0,Qc)},fitKeyValues:qo({ignore:"first"},2,5)},minor:{format:ed.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Qo(t,i,.001,Qc),fitKeyValues:qo({},2,3,5)},defaultValueFormatter:ed.hhmmssmmmuuu},MajorMicroseconds:{major:{format:ed.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,Jo(t,i,h,void 0,Qc)},fitKeyValues:qo({ignore:"first"},2,5)},minor:{format:ed.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Qo(t,i,100*id,Qc),fitKeyValues:qo({},2,3,5)},defaultValueFormatter:ed.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:ed.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*id;return t=Math.floor(t/.001)*h*10,Jo(t,i,h,void 0,Qc)},fitKeyValues:qo({ignore:"first"},2,5)},minor:{format:ed.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Qo(t,i,10*id,Qc),fitKeyValues:qo({},2,3,5)},defaultValueFormatter:ed.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class rd extends Jc{Tr(t){const i=this.timeOrigin||0,s=[{kh:"Major ticks",vv:0,jr:this.majorTickStyle,Yr:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const h=sd(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,hd[h].major.format)(t+i,s,e)},vn:(t,i,s,e)=>{const h=sd(s,e);return(0,hd[h].major.getKeyValues)(t,i,s,e)},sr:{Zr:(t,i,s,e,h,r)=>{const n=sd(h,r),o=hd[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},yn:void 0}];return Cc(this.minorTickStyle)&&s.push({kh:"Minor ticks",vv:1,jr:this.minorTickStyle,Yr:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const h=sd(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,hd[h].minor.format)(t+i,s,e)},vn:(t,i,s,e)=>{const h=sd(s,e);return(0,hd[h].minor.getKeyValues)(t,i,s,e)},sr:{Zr:(t,i,s,e,h,r)=>{const n=sd(h,r),o=hd[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},yn:void 0}),{Fh:[],Ih:s,wh:this.cursorFormatter||((t,s,e)=>{const h=sd(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return hd[h].defaultValueFormatter(t+i,s,e)}),Pr:1e-4,Dr:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const nd=(t,i,s="image/png",e)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(Ch.navigator.msSaveBlob)Ch.navigator.msSaveBlob(h,i);else{const t=Ch.document.createElement("a");Ch.document.body.appendChild(t);const s=Ch.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{Ch.URL.revokeObjectURL(s),Ch.document.body.removeChild(t)}),0)}},od=(i,s,e,h,r,n)=>{const o=i.Pc(s,e,h,r,n,!0);return o.setDraggingMode(t.UIDraggingModes.draggable),o},ad=(t,i)=>{if("relative"===t)return i;if(t instanceof Vn)return t;const s=t.x instanceof ea?t.x.ti:t.x.x,e=t.y instanceof ea?t.y.ti:t.y.y;return Un(s,e)},ld=(t,i,s,e,h)=>{if(s){const r=t,n=i,o=Mc(n)?n:Hn(n)?e:void 0;if(o&&Wn(s)){const t=Ah(r,o,h.ti);return h.fa({engineX:t.x,engineY:t.y})}if(o&&Hn(s))return Ah(r,o,e);if(o&&Mc(s))return Ah(r,o,s)}else{const s=t;if(Hn(i)){const t=h.da(s);return Ah({x:t.engineX,y:t.engineY},h.ti,e)}if(Mc(i)){const t=i,e=h.da(s);return Ah({x:e.engineX,y:e.engineY},h.ti,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class ud{constructor(t,i,s,h,r,n,o,a){this.coordsRelative="relative",this.coordsClient="client",this.Cv=[],this.kv=[],this.Ct=new Ze,this.Tv=void 0,this.Fv=void 0,this.Iv=void 0,this.Pi=c(0,0,0,0),this.Pv=!1,this.Ps=!1,this.Dv=()=>{this.Bv=!0,this.Lv.ie()},this.Rv=t=>i=>{const s=this.Cv.indexOf(i);-1!==s&&this.Cv.splice(s,1),this.$s.ie(),t.Bt()},this.Ev=t=>{const i=this.kv.indexOf(t);-1!==i&&this.kv.splice(i,1),this.$s.ie()},this.Bv=!0,this.onInViewChange=t=>this.Ct.on("inViewChange",t),this.offInViewChange=t=>this.Ct.off(t,"inViewChange"),this.HA=t,this.Ov=s,this.Lv=h,this.removePanel=r,this.zs=i.$s.zs;const l=i.$s.Hi();if(this.uiScale=s.d2({scaleXYConstructor:Nn}).Ms(0,100)._s(0,100).Wt(l),this.pixelScale=s.d2({scaleXYConstructor:Nn}).Ms(0,this.uiScale.x.getCellSize())._s(0,this.uiScale.y.getCellSize()).Wt(l),this.engine=i.$s.zv,this.$s=i.$s.Vv,this.Gs=this.$s.Gs.Us(this,{}),this.Nv=()=>i.Gv("unidentified ui"),this.Uv=i.Wv(),this.Yv=this.Lv.lh(this.uiScale).dh(e(0,0)).Wt(e(100,100)).ah(n).oh(o).setMouseMoveEventHandler(((t,i)=>this.Ct.emit("mouseMovePanelBackground",this,i))).setMouseEnterEventHandler(((t,i)=>this.Ct.emit("mouseEnterPanelBackground",this,i))).setMouseLeaveEventHandler(((t,i)=>this.Ct.emit("mouseLeavePanelBackground",this,i))).setMouseDownEventHandler(((t,i)=>this.Ct.emit("mouseDownPanelBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.Ct.emit("mouseUpPanelBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.Ct.emit("mouseClickPanelBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.Ct.emit("mouseDoubleClickPanelBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.Ct.emit("mouseWheelPanelBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.Ct.emit("mouseDragStartPanelBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.Ct.emit("mouseDragPanelBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.Ct.emit("mouseDragStopPanelBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.Ct.emit("touchStartPanelBackground",this,i))).setTouchMoveEventHandler(((t,i)=>this.Ct.emit("touchMovePanelBackground",this,i))).setTouchEndEventHandler(((t,i)=>this.Ct.emit("touchEndPanelBackground",this,i))),a){const t=a.on(this.Dv);this.Hv=()=>a.off(t)}else{const t=i.$s.oa(this.Dv);this.jv=i.$s.aa.bind(i.$s,t)}const u=i.$s.ua((t=>{this.Pv=t,this.Ct.emit("inViewChange",this,t)}));this.$v=i.$s.ca.bind(i.$s,u),this.Tv=r}getTheme(){return this.zs}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.Yv.ah(t),this.Lv.ie(),this}getBackgroundFillStyle(){return this.Yv.pr()}setBackgroundStrokeStyle(t){return this.Yv.oh(t),this.Lv.ie(),this}getBackgroundStrokeStyle(){return this.Yv.Yo()}translateCoordinate(t,i,s){return ld(t,i,s,this.pixelScale,this.$s)}Xv(t){return this.Cv.push(t),this.$s.ie(),t}Zv(t){return this.kv.push(t),this.$s.ie(),t}addUIElement(t=ju,i=this.uiScale){i=ad(i,this.pixelScale);const s=this.Nv();return this.Xv(od(t,s,this.uiScale,i,this.Rv(s),this.zs))}addLegendBox(i=hc,s=this.uiScale){s=ad(s,this.pixelScale);const e=this.Zv(od(i,this.Uv,this.uiScale,s,this.Ev,this.zs));return e.setDraggingMode(t.UIDraggingModes.notDraggable),void 0!==s&&s!==this.uiScale||(void 0===i||"vertical"===i.getAlignment()?e.setOrigin(Do.RightCenter).setPosition({x:100,y:50}):e.setOrigin(Do.CenterBottom).setPosition(this.uiScale.ts({x:50,y:0},{x:0,y:3}))),e}getLegendBoxes(){return this.kv}dispose(){return this.Ps||(this.Ps=!0,this.jv&&this.jv(),this.Hv&&this.Hv(),cd(this.uiScale),cd(this.pixelScale),this.$v&&this.$v(),this.Fv&&this.Fv(),this.Lv.Bt(),this.Uv.Bt(),this.Cv.slice().forEach((t=>{t.dispose()})),this.kv.slice().forEach((t=>{t.dispose()})),this.$s.ie(),this.Tv&&this.Tv(this),this.Ct.emit("dispose",this)),this}isDisposed(){return this.Ps}onDispose(t){return this.Ct.on("dispose",t)}offDispose(t){return this.Ct.off(t,"dispose")}saveToFile(t,i,s){return nd(this.engine,t,i,s),this}dn(t){this.Pi=t,this.Dv()}Vt(){return this.pixelScale.Vt(),this.uiScale.Vt(),this}Nt(){return this.pixelScale.Nt(),this.uiScale.Nt(),this}uh(t){if(this.Bv){const t=this.Lv.$s.Hi(),i=t.x,s=t.y;this.uiScale.Wt(i,s),this.pixelScale.Wt(i,s);const e=[this.Pi.left,this.Pi.right],h=[this.Pi.bottom,this.Pi.top];this.uiScale.bs(e),this.uiScale.xs(h);const r=this.uiScale.getInnerIntervalPixels();this.pixelScale.Ms(0,r.x).bs(e)._s(0,r.y).xs(h),this.Ct.emit("resize",this,r.x,r.y,i,s)}this.Bv=!1}Qv(){for(let t=0;t<this.Cv.length;t+=1)this.Cv[t].de().uh();for(let t=0;t<this.kv.length;t+=1)this.kv[t].de().uh();this.Iv&&this.Iv()}Jv(t,i){if(t){const s=t(i);this.onResize(s.de.bind(s)),this.Fv=s.Bt.bind(s),this.Iv=s.de.bind(s)}}onBackgroundMouseEnter(t){return this.Ct.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.Ct.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.Ct.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.Ct.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.Ct.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.Ct.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.Ct.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.Ct.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.Ct.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.Ct.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.Ct.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.Ct.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.Ct.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.Ct.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.Ct.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.Ct.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.Ct.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.Ct.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.Ct.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.Ct.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.Ct.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.Ct.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.Ct.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.Ct.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.Ct.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.Ct.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.Ct.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.Ct.off(t,"touchEndPanelBackground")}onResize(t){return this.Ct.on("resize",t)}offResize(t){return this.Ct.off(t,"resize")}getIsInView(){return this.Pv}}const cd=t=>{t.Vi&&t.Vi()};class dd extends ud{constructor(t,i,s,e,h,r){super(t,i,s,i.Kv("uipanel bg",0),e,i.$s.zs.uiPanelBackgroundFillStyle,i.$s.zs.uiPanelBackgroundStrokeStyle,r),this.Jv(h,this.pixelScale)}setMinimumSize(t){return this.sf=t,this.$s.ie(),this}getMinimumSize(){return this.sf}uh(t){super.uh(t),super.Qv()}}const fd=c(10,10,10,10);class Ad extends ud{constructor(t,i,s,h,r,n,o,a,l,u){super(t,i,s,h,r,n,o,u),this.qv={},this.Ja=fd,this.zh=!0,this.ty=i.iy("chart internal ui",0),this.sy=this.ty.An(this.uiScale).mr("Chart").dh(e(50,100)).yl(e(0,1)).Mr(a).ah(l).setMouseInteractions(!1),this.ey=this.Gs.Jg([this.sy]).te(this.zs.effectsText)}setAnimationsEnabled(t){return this.zh=t,this}getAnimationsEnabled(){return this.zh}setTitle(t){return this.sy.mr(t),this.$s.ie(),this}getTitle(){return this.sy.vr()}getTitleSize(){return this.sy.de().Id()}setTitleFillStyle(t){return this.sy.ah(t),this.Dv(),this}getTitleFillStyle(){return this.sy.pr()}setTitleFont(t){return this.sy.Mr(t),this.Dv(),this}getTitleFont(){return this.sy.br()}setTitleRotation(t){return this.sy._r(t),this.$s.ie(),this}getTitleRotation(){return this.sy.wr()}setTitleEffect(t){return this.ey.te(t),this.$s.ie(),this}getTitleEffect(){return this.ey.se()}setTitleMargin(t){var i,s;return this.qv="object"==typeof t?this.qv?(i=this.qv,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.Dv(),this}getTitleMargin(){return this.qv}setPadding(t){return this.Ja="object"==typeof t?f(this.Ja,t):{left:t,top:t,right:t,bottom:t},this.Dv(),this}getPadding(){return this.Ja}hy(t){const i=t.ny(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.ty.Bt(),this}}const gd={oy:(t,i)=>t.pr()!==De&&0!==t.vr().length&&t.getVisible()?t.de().Id().y:0,ly(t,i){t.dh(e(50,100)).dn({top:void 0!==i.top?i.top:10,right:i.right||0,left:i.left||0,bottom:i.bottom||0})}};var vd;t.AutoCursorModes=void 0,(vd=t.AutoCursorModes||(t.AutoCursorModes={}))[vd.disabled=0]="disabled",vd[vd.snapToClosest=1]="snapToClosest",vd[vd.onHover=2]="onHover";const yd={uy(i,s,e,h,r,n){let o;const a=i.getAutoCursorMode();if(!e&&a!==t.AutoCursorModes.disabled){const e=i.$s.xo(),l=h.find((t=>t.getIsUnderMouse()));a===t.AutoCursorModes.snapToClosest&&r?(s||void 0!==l)&&(o=e&&r(e)):void 0===l||l.getCursorEnabled&&!l.getCursorEnabled()||(o=e&&n(l,e))}o?i.Ay.pointAt(o).setVisible(!0):i.Ay.setVisible(!1),i.Ay.de().uh()},kd(t,i,s){if(i.x<t.uiScale.x.Gi()||i.x>t.uiScale.x.Ui()||i.y<t.uiScale.y.Gi()||i.y>t.uiScale.y.Ui())return;let e,h=Number.MAX_VALUE;for(const r of s)if(r.getCursorEnabled()&&r.getVisible()){const s=r.kd(i);if(s){const r=Ah(s.location,s.scale,t.engine.scale),n=Zr(i,r);Number.isNaN(n)||e&&!(n<h)||(e=s,h=n)}}return e||void 0},gy(i){i.onSeriesBackgroundMouseEnter((()=>{i.getAutoCursorMode()!==t.AutoCursorModes.disabled&&i.$s.ie()})),i.onSeriesBackgroundMouseMove((()=>{i.getAutoCursorMode()!==t.AutoCursorModes.disabled&&i.$s.ie()})),i.onSeriesBackgroundMouseLeave((()=>{i.getAutoCursorMode()!==t.AutoCursorModes.disabled&&i.$s.ie()})),i.onSeriesBackgroundTouchStart((()=>{i.getAutoCursorMode()!==t.AutoCursorModes.disabled&&i.$s.ie()})),i.onSeriesBackgroundTouchMove((()=>{i.getAutoCursorMode()!==t.AutoCursorModes.disabled&&i.$s.ie()})),i.onSeriesBackgroundTouchEnd((()=>{i.getAutoCursorMode()!==t.AutoCursorModes.disabled&&i.$s.ie()}))},vy(i,s){s.onMouseEnter(((s,e)=>{i.getAutoCursorMode()!==t.AutoCursorModes.disabled&&i.$s.ie()})),s.onMouseMove(((s,e)=>{i.getAutoCursorMode()!==t.AutoCursorModes.disabled&&i.$s.ie()})),s.onMouseLeave((()=>{i.getAutoCursorMode()!==t.AutoCursorModes.disabled&&i.$s.ie()}))}};class md{constructor(t,i){this.yy=t,this.my=i}alter(t){this.py=void 0!==this.py?this.py:this.my(),this.Sy=t,this.yy(t)}resetValue(){void 0!==this.Sy&&(void 0!==this.py&&this.isAltered()&&this.yy(this.py),this.py=void 0,this.Sy=void 0)}getNormalValue(){return void 0!==this.py?this.py:this.my()}isAltered(){return void 0!==this.Sy&&this.my()===this.Sy}}class pd{constructor(t,i){this.by=[],this.xy=t,this.ti=i}update(){return this.xy.getVisible()?!(this.My()&&(!this._y()||(this.resetTable(),this.xy.de(),this.My()))&&(this.wy(),this.xy.de(),this.My()&&(this.resetTable(),this.xy.de(),1))):(this._y()&&this.resetTable(),!0)}_y(){for(let t=0;t<this.by.length;t+=1)if(this.by[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.by.length;t+=1)this.by[t].resetValue();return this}My(){return((i,s)=>{const h=Ah(i.getPosition(e(-1,-1),t.UISpace.PaddedBackground),i.scale,s),r=Ah(i.getPosition(e(1,1),t.UISpace.PaddedBackground),i.scale,s);return h.x<s.x.getInnerStart()||r.x>s.x.getInnerEnd()||h.y<s.y.getInnerStart()||r.y>s.y.getInnerEnd()})(this.xy,this.ti)}Cy(){return((i,s)=>{const h=Ah(i.getPosition(e(-1,-1),t.UISpace.PaddedBackground),i.scale,s),r=Ah(i.getPosition(e(1,1),t.UISpace.PaddedBackground),i.scale,s);return h.x<s.x.getInnerStart()||r.x>s.x.getInnerEnd()})(this.xy,this.ti)}ky(){return((i,s)=>{const h=Ah(i.getPosition(e(-1,-1),t.UISpace.PaddedBackground),i.scale,s),r=Ah(i.getPosition(e(1,1),t.UISpace.PaddedBackground),i.scale,s);return h.y<s.y.getInnerStart()||r.y>s.y.getInnerEnd()})(this.xy,this.ti)}Ty(t){return this.by.push(t),t}}class Sd extends pd{constructor(){super(...arguments),this.K=this.Ty(new md((t=>this.xy.setOrigin(t)),(()=>this.xy.getOrigin())))}wy(){const t=this.K.getNormalValue(),i=e(this.Cy()?-t.x:t.x,this.ky()?-t.y:t.y);this.K.alter(i)}}class bd extends pd{constructor(t,i,s,e){super(t,i),this.Fy=this.Ty(new md((t=>this.xy.setTextFont((i=>i.setSize(t)))),(()=>this.xy.getTextFont().getSize()))),this.Iy=s,this.Py=e}wy(){const t=this.Fy.getNormalValue(),i=this.Iy;if(i<t)for(let s=1;s<=this.Py;s+=1){const e=t-(t-i)*(s/this.Py);if(this.Fy.alter(e),this.xy.de(),!this.My())return}}}const xd={Flip:(t,i)=>new Sd(t,i),FontSize:(t=5,i=5)=>(s,e)=>new bd(s,e,t,i)};class Md{constructor(){this.Dy=[]}addRow(...t){return this.Dy.push(t),this}}class _d extends Md{Pc(){const t=this.Dy;return this.Dy=[],t}By(){return this.Dy.length=0,this}}class wd extends Eu{constructor(){super(...arguments),this.xc=this.zs.cursorResultTableTextFont,this.ff=0,this.Ly=this.zs.cursorResultTableTextFillStyle}setContent(t){for(let i=0;i<t.length;i+=1){const s=t[i];let e=!1;for(let t=0;t<s.length;t+=1){const i=s[t],h="object"==typeof i&&"text"in i?i.text:"string"==typeof i?i:void 0,r="object"==typeof i&&"icon"in i?i.icon:fu(i)?i:void 0;if((void 0===h||0===h.length)&&!r){e=!0;break}}e||(s.unshift(""),s.push(""))}this.Ry();const i=t.length;let s=this.getMembers().length;for(let e=0;e<Math.max(i,s);e+=1){const h=this.getRow(e,!0);if(e>=i)this.getMembers()[e].dispose(),e-=1,s-=1;else{const i=t[e].length;let s=h.getMembers().length;for(let r=0;r<Math.max(i,s);r+=1){const n=t[e][r],o="object"==typeof n&&"font"in n?n.font:void 0,a="object"==typeof n&&"fillStyle"in n?n.fillStyle:void 0,l="object"==typeof n&&"text"in n?n.text:"string"==typeof n?n:void 0,u="object"==typeof n&&"icon"in n?n.icon:fu(n)?n:void 0,c=h.getMembers();if(r>=i)h.getMembers()[r].dispose(),r-=1,s-=1;else if(void 0!==l&&l.length>0||u){for(let t=c.length;t<r;t+=1)h.addGap(void 0,void 0);const t=o?this.xc.withMutations((t=>{for(const i of Object.keys(o)){const s=o[i];t.set(i,s)}return t})):this.xc,i=a||this.Ly,s=c[r];if(l){let e;s&&s instanceof Mu?e=s:(s&&s.dispose(),e=h.addElement(_u,r)),e.setFont(t).setFillStyle(i).setText(l).setTextRotation(this.ff)}else if(u){let e;s&&s instanceof Fu?e=s:(s&&s.dispose(),e=h.addElement(Iu,r)),e.setFillStyle(i).setShape(u).setSize({y:t.size,x:t.size}),e.setMargin(5)}}else{for(let t=c.length;t<r;t+=1)h.addGap(void 0,void 0);const t=c[r];t&&t instanceof Pu||(t&&t.dispose(),h.addGap(void 0,r))}}}}return this.ae.ie(),this}setTextFillStyle(t){this.Ly="function"==typeof t?t(this.Ly):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof Mu&&s.setFillStyle(this.Ly)}}return this.ae.ie(),this}getTextFillStyle(){return this.Ly}setTextFont(t){return ca(t)?this.xc=t:this.xc=t(this.xc),this.ae.ie(),this}getTextFont(){return this.xc}setTextRotation(t){return this.ff=t,this.ae.ie(),this}getTextRotation(){return this.ff}Ry(){for(let t=0;t<this.qd.length;t+=1)for(let i=0;i<this.qd[t].getMembers().length;i+=1)this.qd[t].getMembers()[i].dispose()}de(){for(let t=0;t<this.qd.length;t+=1)this.qd[t].setMinimumSize(void 0);super.de();for(let t=0;t<this.qd.length;t+=1)this.qd[t].setMinimumSize(this.size.x);return super.de(),this}}class Cd{constructor(t,i,s,h,r){this.Ey=!0,this.Oy=!0,this.Pv=!1,this.Ha=e(0,0),this.Ds=!0,this.ae=t,this.renderingScale=i,this.scale=s,this.zy=h,this.Vy=new Fu(this.ae,this.renderingScale,this.scale,Ph,r).setMouseInteractions(!1).setFillStyle(r.cursorPointMarkerFillStyle).setSize(r.cursorPointMarkerSize).setShape(r.cursorPointMarkerShape),this.xy=new wd(this.ae,this.renderingScale,this.scale,this.zy,Ph,r).setMouseInteractions(!1).setBackground((t=>t.setFillStyle(r.cursorResultTableFillStyle).setStrokeStyle(r.cursorResultTableStrokeStyle))).setTextFillStyle(r.cursorResultTableTextFillStyle).setTextFont(r.cursorResultTableTextFont),this.Ny=xd.Flip(this.xy,this.scale)}dispose(){return this.Vy.dispose(),this.xy.dispose(),this}pointAt(t){return this.Ha=t.scale===this.scale?t.location:Ah(t.location,t.scale,this.scale),this.Vy.setPosition(this.Ha),this.xy.setPosition(this.Ha).setContent(t.resultTableContent),this.ae.ie(),this}getPosition(){return this.Ha}setVisible(t){return this.Ds=t,this.ae.ie(),this}getVisible(){return this.Ds}setPointMarkerVisible(t){return this.Ey=t,this.ae.ie(),this}getPointMarkerVisible(){return this.Ey}setPointMarker(t){return t(this.Vy),this.ae.ie(),this}getPointMarker(){return this.Vy}setResultTableVisible(t){return this.Oy=t,this.ae.ie(),this}getResultTableVisible(){return this.Oy}setResultTable(t){return t(this.xy),this.ae.ie(),this}getResultTable(){return this.xy}setAutoFitStrategy(t){return this.Ny&&this.Ny.resetTable(),this.Ny=t?t(this.xy,this.ae.$s.ti):void 0,this.ae.ie(),this}getAutoFitStrategy(){return void 0!==this.Ny}uh(){return this.Ny&&this.Ny.update(),this.xy.setVisible(this.Pv&&this.Ds&&this.Oy),this.Vy.setVisible(this.Pv&&this.Ds&&this.Ey),this.Vy.uh(),this.xy.uh(),this}de(){return this.Vy.de(),this.xy.de(),this.Pv=((t,i,s=i)=>{const e=i!==s?Ah(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(this.Ha,this.scale),this}}class kd extends Cd{constructor(){super(...arguments),this.Gy=!1}pointAt(t){return this.Uy(t.fillStyle),super.pointAt(t)}Uy(t){t&&this.Gy&&this.xy.setTextFillStyle(t)}setResultTableAutoTextStyle(t){return this.Gy=t,this.ae.ie(),this}getResultTableAutoTextStyle(){return this.Gy}}class Td extends Cd{setPosition(t){return this.Ha=t,this.Vy.setPosition(t),this.xy.setPosition(t),this.ae.ie(),this}}class Fd{constructor(t,i=[]){this.Wy=[],this.Yy=(t,i)=>(this.Wy.forEach((s=>s(t,i))),t),this.zy=t,this.Wy=i}}class Id extends Fd{constructor(){super(...arguments),this.Hy=(t,i,s,e)=>this.Yy(new kd(t,i,s,this.zy,e),e),this.addStyler=t=>new Id(this.zy,this.Wy.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Id(t,this.Wy.map((t=>t)))}}class Pd extends Fd{constructor(){super(...arguments),this.jy=(t,i,s,e)=>this.Yy(new Td(t,i,s,this.zy,e),e),this.addStyler=t=>new Pd(this.zy,this.Wy.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Pd(t,this.Wy.map((t=>t)))}}const Dd=t=>t.setResultTable((t=>t.setEffect(!0).setOrigin(e(-1,-1)).setMargin(5))),Bd=(t,i)=>t.setPointMarker((t=>t.setFillStyle(i.chartMarkerPointMarkerFillStyle).setSize(i.chartMarkerPointMarkerSize).setShape(i.chartMarkerPointMarkerShape))).setResultTable((t=>t.setEffect(!0).setBackground((t=>t)).setOrigin(e(-1,-1)).setMargin(10))),Ld=new Id(wu,[Dd]),Rd=new Id(Tu,[Dd,i=>i.setPointMarkerVisible(!1).setResultTable((i=>i.setOrigin(e(0,-1)).setMargin(0).setBackground((i=>{i instanceof Tu&&i.setDirection(t.UIDirections.Down).setPointerLength(10).setPointerAngle(60)}))))]),Ed=Ld,Od=Ld,zd=Rd,Vd=new Pd(wu,[Bd,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(Do.LeftBottom)))]),Nd=(t,i,s,e,h)=>({location:t,scale:i,resultTableContent:s,owner:e,fillStyle:h});var Gd;t.SliceLabelIndices=void 0,(Gd=t.SliceLabelIndices||(t.SliceLabelIndices={}))[Gd.LabelsInsideSlices=0]="LabelsInsideSlices",Gd[Gd.LabelsOnSides=1]="LabelsOnSides";const Ud={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>t.getAnimatedValue()-i.getAnimatedValue(),SortByValueDescending:(t,i)=>i.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},Wd={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`},Yd=(t,i,s,e)=>t.addRow(s.getName()).addRow(s.getAnimatedValue().toString());class Hd extends Xn{constructor(){super(...arguments),this.At="Slice",this.S=0}}const jd=(t,i)=>{qh(i),t.setExploded(!t.getExploded())};class $d extends Hd{}class Xd extends $d{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.$y=!1,this.Xy=De,this.Zy=De,this.Qy=this.S,this.Jy=this.$y?1:0,this.Ky=this.getVisible(),this.qy=Ke((()=>this.Es.$s.ie())),this.tm=Ke((()=>this.Es.$s.ie())),this.im=()=>{this.sm=void 0},this.hm=()=>{this.rm=void 0},this.index=t,this.Es=e,this.scale=h,this.Os=r,this.nm=i.Bd(h).Xs(this.getHighlight()),this.Zs(this.nm),this.kh=s.An(h).Xs(this.getHighlight()),this.Zs(this.kh,{isText:!0}),this.onMouseClick(jd),this.onTouchEnd(jd)}setValue(t){return this.Es.getAnimationsEnabled()?this.Ky&&this.om(this.Qy,t):this.Qy=t,this.S=t,this.Es.$s.ie(),this}getValue(){return this.S}setExploded(t){if(t&&!1===this.Es.getMultipleSliceExplosion()){const t=this.Es.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.Es.getAnimationsEnabled()?(this.rm&&this.rm.finish(),this.rm=this.tm(300,Qe.ease)([[this.Jy,t?1:0]],(([t])=>{this.Jy=t,this.Es.$s.ie()})),this.rm.onEveryAnimationEnd(this.hm),this.$y=!this.$y):!1!==this.Es.getMultipleSliceExplosion()||t?(this.Jy=this.$y?0:1,this.$y=!this.$y):(this.Jy=0,this.$y=!this.$y),this.Es.$s.ie(),this}getExploded(){return this.$y}setVisible(t){return this.Ky=t,!1===t?this.Es.getAnimationsEnabled()&&this.Qy>0?(this.sm&&(this.sm.finish(!1),this.sm=void 0),this.om(this.Qy,0,(()=>super.setVisible(!1)))):(this.Qy=0,super.setVisible(!1)):this.Es.getAnimationsEnabled()?(this.sm&&(this.sm.finish(!1),this.sm=void 0),super.setVisible(!0),this.om(this.Qy,this.S)):(this.Qy=this.S,super.setVisible(!0)),this}om(t,i,s){this.sm=this.qy(300,Qe.ease)([[t,i]],(([t])=>{this.Qy=t,this.Es.$s.ie()})),this.sm.onEveryAnimationEnd(this.im),s&&this.sm.onAnimationEnd(s)}setStyle(t,i,s,e){this.Xy=t,this.Zy=s,this.nm.ah(this.Xy).oh(i),this.kh.ah(this.Zy).Mr(e);for(let t=0;t<this.Rs.length;t+=1)this.styleAttachedEntry(this.Rs[t])}getAnimatedValue(){return this.Qy}getAnimatedExplosion(){return this.Jy}attach(t,i=!0,s=!1){return super.attach(t,i,s),this.styleAttachedEntry(t,i,s),this}styleAttachedEntry(t,i=!0,s=!1){fr(t,this.zs,s,{fill:this.Xy,stroke:this.nm.Yo()})}}const Zd=(t,i,s)=>cn(i,un(xn(.5*(t.Pu()+t.As())*Math.PI/180),s)),Qd=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],u=o-360*i[a],c=l.getAnimatedExplosion();if(0===c||1===n)l.nm.dh(s);else{const t=cn(s,un(xn(.5*(o+u)*Math.PI/180),r*c));l.nm.dh(t)}l.nm.Ou(o).bh(u).Vu(e).Nu(e).Gu(h),o=u}},Jd=t=>{const i=t.getSlices();for(let t=0;t<i.length;t+=1)i[t].setExploded(!1)};class Kd extends Ad{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Kv("pieChart bg",0),h,s.$s.zs.pieChartBackgroundFillStyle,s.$s.zs.pieChartBackgroundStrokeStyle,s.$s.zs.pieChartTitleFont,s.$s.zs.pieChartTitleFillStyle,n),this.am=[],this.lm=Ud.SortByName,this._u=0,this.um=this.zs.pieChartSliceFillStylePalette,this.dm=this.zs.pieChartSliceStrokeStyle,this.fm=!0,this.Am=this.zs.pieChartSliceLabelFont,this.gm=this.zs.pieChartSliceLabelFillStyle,this.vm=0,this.ym=!1,this.pm=20,this.Sm=!0,this.bm=!0,this.xm=t.AutoCursorModes.onHover,this.Mm=Yd,this._m=t=>{const i=this.am.indexOf(t);i>=0&&(this.am.splice(i,1),this.wm())},this.$s.Mo(mc.Uf),this.Cm=s.km("pieChart bottom",0),this.Tm=s.km("pieChart top",1),this.sy.mr("Pie Chart"),this.Jv(r,this.pixelScale),this.onBackgroundMouseDoubleClick(Jd);const a=Jn(new Kn(Jd));this.onBackgroundTouchStart(a.onTouchStart),this.onBackgroundTouchMove(a.onTouchMove),this.onBackgroundTouchEnd(a.onTouchEnd),this.Fm=s.Im();const l=Rh(o?o.autoCursorBuilder:void 0,Od);this.Ay=l.Hy(this.Fm,this.uiScale,this.uiScale,this.zs),this.setAnimationsEnabled(!0!==(null==o?void 0:o.disableAnimations)&&!1!==(null==o?void 0:o.animationsEnabled))}setAutoCursor(t){return this.Ay&&t(this.Ay),this.$s.ie(),this}getAutoCursor(){return this.Ay}setAutoCursorMode(t){return this.xm=t,this.$s.ie(),this}getAutoCursorMode(){return this.xm}setCursorResultTableFormatter(t){return this.Mm=t,this.$s.ie(),this}addSlice(t,i){const s=new Xd(this.vm,this.Cm,this.Tm,this,this.pixelScale,this._m,this.zs,this.$s.Gs);this.vm+=1,s.setName(t);const e=this.zh;return this.zh=!1,s.setValue(i),this.zh=e,s.setEffect(this.Sm),this.Pm(s),this.am.push(s),this.wm(),s.setHighlightOnHover(this.fm),s.onMouseMove((()=>{this.xm&&this.$s.ie()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.am}setMultipleSliceExplosion(t){return this.ym=t,this}getMultipleSliceExplosion(){return this.ym}setInnerRadius(t){return this._u=t,this.$s.ie(),this}getInnerRadius(){return this._u}setSliceExplosionOffset(t){return this.pm=t,this.$s.ie(),this}getSliceExplosionOffset(){return this.pm}setLUT(t){return this.bf=t,this.$s.ie(),this}setSliceFillStyle(t){this.um=t;for(let t=0;t<this.am.length;t+=1)this.Pm(this.am[t]);return this.$s.ie(),this}getSliceFillStyle(){return this.um}setSliceStrokeStyle(t){this.dm="function"==typeof t?t(this.dm):t;for(let t=0;t<this.am.length;t+=1)this.Pm(this.am[t]);return this.$s.ie(),this}getSliceStrokeStyle(){return this.dm}setSliceEffect(t){return this.Sm=t,this.am.forEach((i=>i.Gs.Ys.te(t))),this.$s.ie(),this}getSliceEffect(){return this.Sm}setSliceSorter(t){return this.lm=t,this.am=this.am.sort(this.lm),this.$s.ie(),this}getSliceSorter(){return this.lm}setLabelFillStyle(t){this.gm="function"==typeof t?t(this.gm):t;for(let t=0;t<this.am.length;t+=1)this.Pm(this.am[t]);return this.$s.ie(),this}getLabelFillStyle(){return this.gm}setLabelFont(t){this.Am="function"==typeof t?t(this.Am):t;for(let t=0;t<this.am.length;t+=1)this.Pm(this.am[t]);return this.$s.ie(),this}getLabelFont(){return this.Am}setLabelEffect(t){return this.bm=t,this.am.forEach((i=>i.Gs.Ws.te(t))),this.$s.ie(),this}getLabelEffect(){return this.bm}setLabelFormatter(t){return this.Dm=t,this.$s.ie(),this}getLabelFormatter(){return this.Dm}setSliceHighlightOnHover(t){return this.fm=t,this.am.forEach((i=>i.setHighlightOnHover(t))),this}uh(t){super.uh(t),gd.ly(this.sy,this.qv),super.Qv();const i=gd.oy(this.sy,this.qv),s=e(this.pixelScale.x.getInnerInterval()-(this.Ja.left+this.Ja.right),this.pixelScale.y.getInnerInterval()-(this.Ja.bottom+this.Ja.top+i)),h=e(this.Ja.left+s.x/2,this.Ja.bottom+s.y/2);if(this.bf){const t=this.bf;this.am.forEach((i=>{this.Pm(i,new Ee({color:t.getColors(i.getAnimatedValue())}))}))}for(let t=0;t<this.am.length;t+=1){const i=this.am[t].getAnimatedValue()>0;this.am[t].nm.setVisible(i),this.am[t].kh.setVisible(i)}this.am=this.am.sort(this.lm);const r=this.am.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<r.length;t+=1)n+=r[t].getAnimatedValue();const o=[];for(let t=0;t<r.length;t+=1)o.push((a=r[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<r.length;t+=1){const i=r[t];i.kh.mr(this.Dm(i,o[t])).de()}yd.uy(this,!1,!1,this.am,void 0,((t,i)=>Nd(i,this.engine.scale,this.Mm(new _d,this,t,o[r.indexOf(t)]||0).Pc(),t,void 0))),this.Bm(r,o,h,s)}Pm(t,i=this.um(t.index,t)){t.setStyle(i,this.dm,this.gm,this.Am)}wm(){this.am=this.am.sort(this.lm),this.$s.ie()}If(){return this.am}dispose(){return super.dispose(),this.am.slice().forEach((t=>t.dispose())),this.Ay.dispose(),this.Tm.Bt(),this.Cm.Bt(),this.Fm.Bt(),this}}const qd={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},tf=(...t)=>{const i=[];return t.forEach((t=>{var s;t&&"object"==typeof(s=t)&&s&&"pattern"in s&&i.push({type:"DataPattern",args:t})})),i};class sf extends Kd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.Dm=Wd.NamePlusValue,this.Lm=[],this.Rm=40,this.Em=5,this.Om=10,this.zm=this.zs.pieChartConnectorStrokeStyle,this.setPadding({bottom:50})}setLabelConnectorStyle(t){this.zm=t;for(let t=0;t<this.Lm.length;t+=1)this.Lm[t].ph(this.zm);return this.$s.ie(),this}getLabelConnectorStyle(){return this.zm}setLabelSliceOffset(t){return this.Rm=t,this.$s.ie(),this}getLabelSliceOffset(){return this.Rm}setLabelConnectorGapStart(t){return this.Em=t,this.$s.ie(),this}getLabelConnectorGapStart(){return this.Em}setLabelConnectorEndLength(t){return this.Om=t,this.$s.ie(),this}getLabelConnectorEndLength(){return this.Om}Bm(t,i,s,e){const h=this.Am.getSize(),r=this.Rm,n=this.Om,o=this.Em,a=Math.min(this.pm,r-o);let l=0;if(1===t.length)l=t[0].kh.Id().x;else for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].kh.Id().x);const u=Math.max(.5*(Math.min(e.x-2*l-2*n,e.y-2*h)-2*r),0);Qd(t,i,s,u,this._u,a);let c=90;const d=t.map(((t,e)=>{const h=360*i[e],o=c-h,a=xn(pn(.5*(c+o))),l=a.x>=0?-1:1,d=cn(cn(s,un(a,u+r)),{x:l*-n,y:0});c=o;const f={x:l,y:0};t.kh.dh(d).yl(f),t.kh.de();const A=qr(t.kh.Ch());return{position:d,alignment:f,shape:t.kh,boundaries:A,sliceAngleVec:a,slice:t}})),f=[];for(let t=0;t<d.length;t+=1){const i=d[t],s=f[f.length-1];s&&!1!==Hr([s.boundaries,i.boundaries])?i.shape.setVisible(!1):(f.push(i),i.shape.setVisible(!0))}for(let t=0;t<this.Lm.length;t+=1)this.Lm[t].setVisible(!1);f.forEach(((t,i)=>{const e=t.slice.nm,h=Zd(e,s,u+o+a*t.slice.getAnimatedExplosion()),r=mn(t.position.y,h,s),n=t.position;this.Vm([h,r,n])}))}getMinimumSize(){return e(500,300)}Vm(t){let i;for(let t=0;t<this.Lm.length;t+=1)if(!this.Lm[t].getVisible()){i=this.Lm[t].setVisible(!0);break}void 0===i&&(i=this.Tm.Nm(this.pixelScale,void 0,[qd.InternalUI]).ph(this.zm).setMouseInteractions(!1),this.Lm.push(i)),i._i().Gl(t)}}class ef extends Kd{constructor(){super(...arguments),this.Dm=Wd.Name,this.Gm=.5}Bm(t,i,s,e){const h=this.pm,r=Math.max(0,.5*Math.min(e.x,e.y)-h);Qd(t,i,s,r,this._u,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.nm,o=e.kh,a=this._u/100,l=((1-a)*this.Gm+a)*r+e.getAnimatedExplosion()*h,u=Zd(n,s,l);o.dh(u).dl(0).Al(0)}}getMinimumSize(){return e(200,200)}setLabelPosition(t){return this.Gm=t,this.$s.ie(),this}getLabelPosition(){return this.Gm}}const hf={LabelsOnSides:sf,LabelsInsideSlices:ef},rf=t=>{if(eo(t)){const i=t.getThickness(),s=t.getFillStyle();if(Oe(s))return 1===i?fa:new ga({size:i,fillStyle:s,shape:"sphere"})}return fa};class nf{constructor(t,i,s,e){this.Um=[],this.Wm=new Map,this.Ym=t,this.Hm=i,this.jm=s,this.$m=e}Xm(){this.jm&&this.jm();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];let s=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const e=this.Um.slice(),h=[];i.forEach((t=>{let i=e.pop();i||(i=this.Ym(),this.Um.push(i));const r=[],n=i.Zm().slice();t.instances.forEach(((t,i)=>{const s=n.shift();r.push({...t,existingMember:s})}));const o=this.Hm(i,r,t.sharedProperties);s=lr(s,o,{canReturnB:!0});for(let s=0;s<t.instances.length;s+=1)h.push({ba:t.instances[s].ba,collection:i,member:o[s]});n.forEach((t=>{null==i||i.if(t)}))})),e.forEach((t=>{t.dispose();const i=this.Um.indexOf(t);i<0?pr(0,(()=>{})):this.Um.splice(i,1)})),h.forEach((t=>{const i=this.Wm.get(t.ba);i&&t.collection.$s.Eo({entity:i.collection,collectionMember:i.member},{entity:t.collection,collectionMember:t.member})})),this.Wm.clear(),h.forEach((t=>{this.Wm.set(t.ba,t)})),this.$m&&this.$m(this.Um,s)}}}Qm(){this.Um.forEach((t=>{t.dispose()})),this.Um.length=0}}class of{constructor(t){this.Jm=[],this.Km=t}Xm(){return this.qm(),{add:()=>this.Ol(),finishPlot:()=>{this.tp()}}}Ol(){let t=this.Jm.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.Km()},this.Jm.push(t)),t.isFree=!1,t.shape}qm(){this.Jm.forEach((t=>{t.isFree=!0}))}tp(){this.Jm.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.Jm.splice(this.Jm.indexOf(t),1)}))}Qm(){this.Jm.forEach((t=>t.shape.dispose())),this.Jm.length=0}}class af{constructor(t,i,s,e,h,r,n,o,a,l){this.Ct=new Ze,this.S=0,this.Ds=!0,this.Ps=!1,this.ie=t,this.ip=i,this.sp=s,this.ep=e,this.hp=h,this.rp=r,this.ff=n,this.Ly=o,this.np=a,this.Bc=l}setValue(t){return t===this.S||(this.S=t,this.ie(),this.Ct.emit("valueChange",this,this.S)),this}getValue(){return this.S}setTickStyle(t){return this.sp="function"==typeof t?t(this.sp):t,this.ie(),this}getTickStyle(){return this.sp}setTickLength(t){return this.ep=t,this.ie(),this}getTickLength(){return this.ep}setGridStrokeStyle(t){return this.hp="function"==typeof t?t(this.hp):t,this.ie(),this}getGridStrokeStyle(){return this.hp}setTextPadding(t){return this.rp=t,this.ie(),this}getTextPadding(){return this.rp}setTextRotation(t){return this.ff=t,this.ie(),this}getTextRotation(){return this.ff}setTextFillStyle(t){return this.Ly="function"==typeof t?t(this.Ly):t,this.ie(),this}getTextFillStyle(){return this.Ly}setTextFont(t){return this.np="function"==typeof t?t(this.np):t,this.ie(),this}getTextFont(){return this.np}setTextFormatter(t){return this.Bc=t,this.ie(),this}onValueChange(t){return this.Ct.on("valueChange",t)}offValueChange(t){return this.Ct.off(t,"valueChange")}dispose(){return this.Ps||(this.Ps=!0,this.ip(),this.ie(),this.Ct.emit("dispose",this)),this}isDisposed(){return this.Ps}onDispose(t){return this.Ct.on("dispose",t)}offDispose(t){return this.Ct.off(t,"dispose")}setVisible(t){const i=this.Ds!==t;return this.Ds=t,i&&(this.Ct.emit("visibleStateChanged",this,this.Ds),this.ie()),this}getVisible(){return this.Ds}onVisibleStateChanged(t){return this.Ct.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.Ct.off(t,"visibleStateChanged")}}class lf extends ea{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.op({x:t.$s.zs.xAxis3DNumericTicks,y:t.$s.zs.yAxis3DNumericTicks,z:t.$s.zs.zAxis3DNumericTicks}),datetime:i.op({x:t.$s.zs.xAxis3DDateTimeTicks,y:t.$s.zs.yAxis3DDateTimeTicks,z:t.$s.zs.zAxis3DDateTimeTicks}),time:i.op({x:t.$s.zs.xAxis3DTimeTicks,y:t.$s.zs.yAxis3DTimeTicks,z:t.$s.zs.zAxis3DTimeTicks})},{type:"linear"}),this.aA=[],this.ap=()=>{},this.lp=()=>{},this.up=()=>{},this.cp=()=>{},this.chart=t,this.si=h,this.dp=r,this.fp=n,this.Ap=this.si.ti;const l=this.nr.op({x:this.zs.xAxis3DStrokeStyle,y:this.zs.yAxis3DStrokeStyle,z:this.zs.zAxis3DStrokeStyle});this.gp=this.si.Nm([qd.InternalUI]).ph(l).vp(rf(l)).setMouseInteractions(!1),this.yr=this.dp.An(this.fp).setMouseInteractions(!1).ah(i.op({x:t.$s.zs.xAxis3DTitleFillStyle,y:t.$s.zs.yAxis3DTitleFillStyle,z:t.$s.zs.zAxis3DTitleFillStyle})).Mr(i.op({x:t.$s.zs.xAxis3DTitleFont,y:t.$s.zs.yAxis3DTitleFont,z:t.$s.zs.zAxis3DTitleFont})),this.yp=new of((()=>this.dp.An(this.fp))),this.mp=new nf((()=>this.si.gv().setMouseInteractions(!1)),((t,i,s)=>(t._i().ph(s.lineStyle),i.map((({positions:i,existingMember:s})=>s||t.Gl(i)))))),this.Gs=a,this.Cr=this.Gs.Jg([this.yr]).te(e.effectsText),this.gp.setMouseEnterEventHandler(this.ap).setMouseLeaveEventHandler(this.lp).setMouseDragEventHandler(this.up).setMouseDragStopEventHandler(this.cp),s.Eg=this}setTickStrategy(t,i){return super.cr(t,i)}getTickStrategy(){return this.Dh}addCustomTick(){const t=new af((()=>this.chart.$s.ie()),(()=>{const i=this.aA.indexOf(t);i>=0&&this.aA.splice(i,1)}),this.zs.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.zs.xAxis3DNumericTicks.majorTickStyle.tickLength,this.zs.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.zs.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.zs.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.zs.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.zs.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)));return this.aA.push(t),this.chart.$s.ie(),t}setStrokeStyle(t){return this.gp.ph(t).vp(rf(this.gp.Yu())),this.chart.$s.ie(),this}getStrokeStyle(){return this.gp.Yu()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.gp.setVisible(t),!1===t&&(this.mp.Qm(),this.yp.Qm()),this.dp.ie(),this}rv(){return this.chart.getSeries()}pp(t){return Math.abs(this.ti.Yt(t)*this.si.Sp(1))}ln(t,i,s){const e=Math.abs(this.ti.Yt(i-t)*this.si.Sp(1));return{min:t-s*e,max:i+s*e}}$r(t,i){return new uf(i,t,this.dp,this.fp,this.si)}Xr(t,i){const s=this.bp(i,t.S,t.ir.jr.tickLength,t.ir.jr.tickPadding);return t.kh.dh(s.labelPosition).yl(s.labelAlignment),s}bp(t,i,s,h){const{wuSize:r,start:n,end:o,tickDirection3D:a,tickDirection2D:l}=t,u=(i-this.ti.getInnerStart())/(this.ti.getInnerEnd()-this.ti.getInnerStart()),c=Er.addVec(Kr(n,o,u),Er.multiplyVec(Er.multiply(a,this.si.Sp(.5*this.gp.Yu().getThickness())),r)),d=Er.addVec(c,Er.multiplyVec(Er.multiply(a,this.si.Sp(s)),r)),f=this.si.xp(d)||e(0,0);return{labelPosition:cn(Ah(f,this.chart.engine.scale,this.fp),un(l,h)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:u}}Mp(t,i,s){const{wuSize:h,start:r,end:n,tickDirection3D:o}=i,a=(t-this.ti.getInnerStart())/(this.ti.getInnerEnd()-this.ti.getInnerStart()),l=Er.addVec(Kr(r,n,a),Er.multiplyVec(Er.multiply(o,this.si.Sp(.5*this.gp.Yu().getThickness())),h)),u=Er.addVec(l,Er.multiplyVec(Er.multiply(o,this.si.Sp(10)),h)),c=this.si.xp(l)||e(0,0),d=this.si.xp(u)||e(0,0);return this.dp.Sh(this.fp).xh(c).bh(d).ph(new so({fillStyle:new Ee({color:Se(120*s)}),thickness:1}))}nn(t,i){return cf(t,i,this.ti)}uh(t){if(!this.Ds)return;const i=Math.min(this.dr,this.Ar),s=Math.max(this.dr,this.Ar),h=this.Ap,r=n(h.x.$t(),h.y.$t(),h.z.$t());let o,a;this._p()?(o=n(h.x.getInnerEnd(),h.y.getInnerStart(),h.z.getInnerStart()),a=n(h.x.getInnerEnd(),h.y.getInnerStart(),h.z.getInnerEnd())):(o=n(h.x.getInnerStart(),h.y.getInnerStart(),h.z.getInnerStart()),a=this.nr.wp(n(h.x.getInnerEnd(),h.y.getInnerEnd(),h.z.getInnerEnd()),o));const l=this.nr.Df,u=this.si.xp(o)||e(0,0),c=this.si.xp(a)||e(0,0),d=Kr(o,a,.5),f=Er.addVec(d,Er.multiplyVec(Er.multiply(l,-1),r)),A=this.si.xp(d)||e(0,0),g=this.si.xp(f)||e(0,0),v=on(dn(Ah(A,this.chart.engine.scale,this.fp),Ah(g,this.chart.engine.scale,this.fp)));this.gp._i().Gl([o,a]);const{gridlinePositionA:y,gridlinePositionB:m,gridlinePositionC:p}=this.nr.Cp(t),S=t=>({x:-1===t.x?this.Ap.x.getInnerStart():1===t.x?this.Ap.x.getInnerEnd():0,y:-1===t.y?this.Ap.y.getInnerStart():1===t.y?this.Ap.y.getInnerEnd():0,z:-1===t.z?this.Ap.z.getInnerStart():1===t.z?this.Ap.z.getInnerEnd():0}),b=S(y),x=S(m),M=S(p),_={physicalAxisSize:ln(dn(u,c)),wuSize:r,start:o,end:a,tickDirection3D:l,tickDirection2D:v,gridlinePositionA:b,gridlinePositionB:x,gridlinePositionC:M},w=this.Or(_),C=this.mp.Xm();for(const[t,i]of this.Bh)for(const[,s]of i){const i=w.get(s);if(!i)continue;const e=this.kp(_,i);C.add({ba:0,positions:[e.tickStroke.start,e.tickStroke.end]},{lineStyle:t.jr.tickStyle}),e.gridStroke&&C.add({ba:0,positions:e.gridStroke},{lineStyle:t.jr.gridStrokeStyle})}const k=this.yp.Xm(),T={x:0,y:0};this.aA.forEach((t=>{if(!t.Ds||t.S<i||t.S>s)return;const e=this.bp(_,t.S,t.ep,t.rp),h=this.kp(_,e),r=k.add().dh(e.labelPosition).yl(e.labelAlignment).ah(t.Ly).Mr(t.np).mr(t.Bc(t.S))._r(t.ff).de().Hi();T.x=Math.max(T.x,r.x),T.y=Math.max(T.y,r.y),C.add({ba:0,positions:[h.tickStroke.start,h.tickStroke.end]},{lineStyle:t.sp}),h.gridStroke&&C.add({ba:0,positions:h.gridStroke},{lineStyle:t.hp})})),k.finishPlot(),C.finishPlot();const F=this.Jr(((t,i)=>{const s=i.kh.Hi();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:T.x,y:T.y}),I=Math.atan((c.y-u.y)/(c.x-u.x));this.yr.yl({x:0,y:0})._r(180*-I/Math.PI);const P=Er.addVec(d,Er.multiplyVec(Er.multiply(l,this.si.Sp(.5*this.gp.Yu().getThickness()+this.qr(((t,i)=>Math.max(t,i.tickLength)),0))),r)),D=this.si.xp(P)||e(0,0),B=cn(Ah(D,this.chart.engine.scale,this.fp),cn(cn(fn(F,v),un(v,this.qr(((t,i)=>Math.max(t,i.labelPadding)),0))),fn(un(this.yr.de().Hi(),.5),v)));this.yr.dh(B),this.gp.Tp={overrideFollowing:!1,skipMousePicking:!1}}kp(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:h}=t,r=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return Dh(o,0)||Dh(o,1)||(a=[this.Fp()?{...s,x:r.x}:this.Ip()?{...s,y:r.y}:this._p()?{...s,z:r.z}:{x:0,y:0,z:0},this.Fp()?{...e,x:r.x}:this.Ip()?{...e,y:r.y}:this._p()?{...e,z:r.z}:{x:0,y:0,z:0},this.Fp()?{...h,x:r.x}:this.Ip()?{...h,y:r.y}:this._p()?{...h,z:r.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:r,end:n}}}kr(){super.kr(),this.mp.Qm(),this.yp.Qm()}Fp(){return this.nr.Fp()}Ip(){return this.nr.Ip()}_p(){return this.nr._p()}}class uf extends ha{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Pp=h}}const cf=(t,i,s)=>Bh(t+.1*(i-t)+Math.abs(s.$t())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),df=(t,i,s,e)=>({tn:()=>{const s=t();let e;for(const t of s){if(!t.Dp())continue;const s=i(t);e=void 0===s?e:void 0!==e?Math.min(e,s):s}return e},sn:()=>{const i=t();let e;for(const t of i){if(!t.Dp())continue;const i=s(t);e=void 0===i?e:void 0!==e?Math.max(e,i):i}return e},hn:()=>{const i=t();let s;for(const t of i){if(!t.Dp())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),ff=t=>({...df(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.hn().y)),op:t=>t.y,wp:(t,i)=>({x:i.x,y:t.y,z:i.z}),Df:n(-1,0,0),Cp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:n(i.x,0,i.z),gridlinePositionB:n(i.x,0,-i.z),gridlinePositionC:n(-i.x,0,-i.z)}},Fp:()=>!1,Ip:()=>!0,_p:()=>!1}),Af=t=>({...df(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.hn().z)),op:t=>t.z,wp:(t,i)=>({x:i.x,y:i.y,z:t.z}),Df:n(1,0,0),Cp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:n(i.x,-i.y,0),gridlinePositionB:n(i.x,i.y,0),gridlinePositionC:n(-i.x,i.y,0)}},Fp:()=>!1,Ip:()=>!1,_p:()=>!0});class gf extends Xn{constructor(t,i,s,e,h){super(t,i,e,h),this.Bp=iu,this.Lp=!0,this.Rp=!0,this.Es=t,this.si=s,this.Vs=new Map,this.onMouseWheel(this.Es.Ep),this.onMouseDrag(this.Es.Op),this.onTouchStart(this.Es.zp.onTouchStart),this.onTouchMove(this.Es.zp.onTouchMove),this.onTouchEnd(this.Es.zp.onTouchEnd)}setAutoScrollingEnabled(t){return this.Lp=t,this.Es.$s.ie(),this}getAutoScrollingEnabled(){return this.Lp}setColorShadingStyle(t){return this.Bp=t,this.Vs.forEach(((i,s)=>s.Vp(t))),this.si.ie(),this}getColorShadingStyle(){return this.Bp}setDepthTestEnabled(t){return this.Rp=t,this.Vs.forEach(((i,s)=>s.Np(t))),this.si.ie(),this}getDepthTestEnabled(){return this.Rp}Gp(){}uh(){}$m(){}getXMax(){const t=this.bl;return t?t.ni():void 0}getXMin(){const t=this.bl;return t?t.ri():void 0}getYMax(){const t=this.bl;return t?t.ai():void 0}getYMin(){const t=this.bl;return t?t.oi():void 0}getZMax(){const t=this.bl;return t?t.Wp():void 0}getZMin(){const t=this.bl;return t?t.Yp():void 0}hn(){const t=this.bl;return t?n(t.tu(),t.iu(),t.Hp()):n(0,0,0)}}class vf extends gf{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.At="Box Series 3D",this.jp=.25,this.$p=!1,this.xf=()=>Ar(this.sh),this.sh=yr(this.zs.boxSeries3DFillStyle,h),this.bl=this.si.Zp().Np(this.Rp).ah(this.sh).Xp(this.jp).Xs(this.getHighlight()),this.Zs(this.bl)}invalidateData(t){const i=t.length;if(0===i)return this;this.$p&&this.Es.$s.Mo(mc.tA);const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.bl.Qp(e.slice()),this.Es.$s.ie(),this.$p=!0,this}setFillStyle(t){return this.sh="function"==typeof t?t(this.sh):t,this.bl.ah(t),this.Es.$s.ie(),this}getFillStyle(){return this.sh}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.jp=void 0!==t?Bh(t,0,1):void 0,this.bl.Xp(this.jp),this.si.ie(),this}getRoundedEdges(){return this.jp}Dp(){return this.Lp&&this.getVisible()}fh(t,i){t.Xs(i),this.Es.$s.ie()}uh(){super.uh(),this.bl.de(!1)}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{fill:this.sh}),this}}class yf extends gf{constructor(t,i,s,e,h){super(t,i,s,e,h),this.$p=!1,this.xf=()=>Ar(this.Wu.getFillStyle())}setStrokeStyle(t){this.Wu="function"==typeof t?t(this.Wu):t;const i=this.Wu;return this.bl.ph(i),this.si.ie(),this}getStrokeStyle(){return this.Wu}add(t){return this.$p&&this.Es.$s.Mo(mc.tA),this.$p=!0,(t=Array.isArray(t)?t:[t])?(this.bl.Gl(t.slice()),this.si.ie(),this):this}clear(){return this.bl._i(),this}getPointAmount(){const t=this.bl;return t.Ul()+t.Wl()}Dp(){return this.Lp&&this.getPointAmount()>0&&this.getVisible()}fh(t,i){t.Xs(i),this.si.ie()}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{stroke:this.Wu}),this}}class mf extends yf{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.At="Line Series 3D",this.Wu=yr(e.lineSeries3DStrokeStyle,h),this.Jp=Pa.pointStyle3D,this.Kp(this.Wu),this.bl=this.si.Nm([qd.UserSeries]).Np(this.Rp).ph(this.Wu).vp(this.Jp).Xs(this.getHighlight()),this.Zs(this.bl)}setStrokeStyle(t){super.setStrokeStyle(t),this.Kp(this.Wu);const i=this.Jp;return this.bl.vp(i),this}Kp(t){const i=new Sa.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.Jp=i}}class pf extends yf{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.At="Point Line Series 3D",this.xf=()=>Ar(this.Wu.getFillStyle())||Ar(this.Jp.getFillStyle()),this.Jp=yr(e.pointLineSeries3DPointStyle,h),this.Wu=yr(e.lineSeries3DStrokeStyle,h),this.qp(),this.bl=this.si.Nm([qd.UserSeries]).Np(this.Rp).ph(this.Wu).vp(this.Jp).Xs(this.getHighlight()),this.Zs(this.bl)}setPointStyle(t){return this.Jp="function"==typeof t?t(this.Jp):t,this.qp(),this.bl.vp(this.Jp),this.si.ie(),this}getPointStyle(){return this.Jp}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.Wu,s=Math.abs(i.getThickness()),e=this.Jp,h=e.getSize();s>("object"==typeof h?Math.max(h.x,h.y,h.z):h)&&(this.Jp=e.setSize(s)),this.qp();const r=this.Jp;return this.bl.vp(r),this.si.ie(),this}qp(){const t=this.Jp,i=t.getSize();this.Jp=t.setSize(i)}fh(t,i){t.Xs(i),this.si.ie()}}class Sf extends gf{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.$p=!1,((null==r?void 0:r.individualPointSizeAxisEnabled)||(null==r?void 0:r.individualPointSizeEnabled))&&this.Es.$s.Mo(mc.iA)}add(t){return this.$p&&this.Es.$s.Mo(mc.tA),this.$p=!0,(t=Array.isArray(t)?t:[t])?(this.bl.Gl(t.slice()),this.si.ie(),this):this}clear(){return this.bl._i(),this}getPointAmount(){const t=this.bl;return t.Ul()+t.Wl()}Dp(){return this.Lp&&this.getPointAmount()>0&&this.getVisible()}fh(t,i){t.Xs(i),this.si.ie()}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{point3D:this.tS}),this}}class bf extends Sf{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.At="Point Series 3D",this.xf=()=>Ar(this.tS.getFillStyle());const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.Es.getSeries().length;this.tS=yr(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.bl=this.si.sS(o).Np(this.Rp).iS(this.tS).Xs(this.getHighlight()),this.Zs(this.bl)}setPointStyle(t){this.tS="function"==typeof t?t(this.tS):t;const i=this.tS;return this.bl.iS(i),this.si.ie(),this}getPointStyle(){return this.tS}}class xf extends Sf{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.At="Point Cloud Series 3D",this.xf=()=>Ar(this.tS.getFillStyle());const n=this.Es.getSeries().length;this.tS=yr(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.bl=this.si.sS(o).iS(this.tS).Xs(this.getHighlight()),this.Zs(this.bl)}setPointStyle(t){this.tS="function"==typeof t?t(this.tS):t;const i=this.tS;return this.bl.iS(i),this.si.ie(),this}getPointStyle(){return this.tS}}const Mf={Triangulated:bf,Pixelated:xf};class _f extends Ad{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.eS=[],this.hS=0,this.rS=t=>{const i=this.eS.indexOf(t);i>=0&&(this.eS.splice(i,1),this.Ct.emit("seriesDispose",this,t))},this.nS=()=>{this.hS+=1},this.oS=()=>{this.hS-=1},this.onSeriesBackgroundMouseEnter=t=>this.Ct.on("mouseEnterSeriesBackground",t),this.onSeriesBackgroundMouseLeave=t=>this.Ct.on("mouseLeaveSeriesBackground",t),this.onSeriesBackgroundMouseMove=t=>this.Ct.on("mouseMoveSeriesBackground",t),this.onSeriesBackgroundMouseDown=t=>this.Ct.on("mouseDownSeriesBackground",t),this.onSeriesBackgroundMouseUp=t=>this.Ct.on("mouseUpSeriesBackground",t),this.onSeriesBackgroundMouseClick=t=>this.Ct.on("mouseClickSeriesBackground",t),this.onSeriesBackgroundMouseDoubleClick=t=>this.Ct.on("mouseDoubleClickSeriesBackground",t),this.onSeriesBackgroundMouseDragStart=t=>this.Ct.on("mouseDragStartSeriesBackground",t),this.onSeriesBackgroundMouseDrag=t=>this.Ct.on("mouseDragSeriesBackground",t),this.onSeriesBackgroundMouseDragStop=t=>this.Ct.on("mouseDragStopSeriesBackground",t),this.onSeriesBackgroundMouseWheel=t=>this.Ct.on("mouseWheelSeriesBackground",t),this.onSeriesBackgroundTouchStart=t=>this.Ct.on("touchStartSeriesBackground",t),this.onSeriesBackgroundTouchMove=t=>this.Ct.on("touchMoveSeriesBackground",t),this.onSeriesBackgroundTouchEnd=t=>this.Ct.on("touchEndSeriesBackground",t),this.offSeriesBackgroundMouseEnter=t=>this.Ct.off(t,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=t=>this.Ct.off(t,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=t=>this.Ct.off(t,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=t=>this.Ct.off(t,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=t=>this.Ct.off(t,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=t=>this.Ct.off(t,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=t=>this.Ct.off(t,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=t=>this.Ct.off(t,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=t=>this.Ct.off(t,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=t=>this.Ct.off(t,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=t=>this.Ct.off(t,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=t=>this.Ct.off(t,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=t=>this.Ct.off(t,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=t=>this.Ct.off(t,"touchEndSeriesBackground"),this.aS=this.Gs.Jg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.eS.forEach((i=>i.setAnimationHighlight(t))),this}lS(t,i){this.aS.Qs([i]),t.setMouseMoveEventHandler(((t,i)=>{this.Ct.emit("mouseMoveSeriesBackground",this,i)})).setMouseEnterEventHandler(((t,i)=>{this.Ct.emit("mouseEnterSeriesBackground",this,i)})).setMouseLeaveEventHandler(((t,i)=>{this.Ct.emit("mouseLeaveSeriesBackground",this,i)})).setMouseDownEventHandler(((t,i)=>this.Ct.emit("mouseDownSeriesBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.Ct.emit("mouseUpSeriesBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.Ct.emit("mouseClickSeriesBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.Ct.emit("mouseDoubleClickSeriesBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.Ct.emit("mouseWheelSeriesBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.Ct.emit("mouseDragStartSeriesBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.Ct.emit("mouseDragSeriesBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.Ct.emit("mouseDragStopSeriesBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>{this.Ct.emit("touchStartSeriesBackground",this,i)})).setTouchMoveEventHandler(((t,i)=>{this.Ct.emit("touchMoveSeriesBackground",this,i)})).setTouchEndEventHandler(((t,i)=>{this.Ct.emit("touchEndSeriesBackground",this,i)}))}setSeriesBackgroundFillStyle(t){return this.uS.ah(t),this.$s.ie(),this}getSeriesBackgroundFillStyle(){return this.uS.pr()}setSeriesBackgroundStrokeStyle(t){return this.cS.oh(t),this.$s.ie(),this}getSeriesBackgroundStrokeStyle(){return this.cS.Yo()}setSeriesBackgroundEffect(t){return this.aS.te(t),this.$s.ie(),this}getSeriesBackgroundEffect(){return this.aS.se()}dS(t){this.eS.push(t),t.onMouseEnter(this.nS),t.onMouseLeave(this.oS),void 0!==this.fS&&t.setHighlightOnHover(this.fS),this.Ct.emit("seriesAdded",this,t)}If(){return this.eS}AS(){return this.hS}setSeriesHighlightOnHover(t){return this.fS=t,this.eS.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.eS.slice().forEach(Ih),super.dispose()}gS(t){return this.Ct.on("seriesAdded",t)}vS(t){return this.Ct.off(t)}yS(t){return this.Ct.on("seriesDispose",t)}mS(t){return this.Ct.off(t)}}const wf=Er.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class Cf{constructor(t,i,s,e){this.pS=!0,this.SS=!0,this.bS=2*-Math.PI/2160,this.xS=2*Math.PI/2160,this.MS=.1,this._S=1*Math.PI/180,this.wS=t,this.CS=i,this.kS=s,this.xp=e}getDefaultCameraConfiguration(t){const i={direction:wf,location:Er.multiply(wf,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:i.direction,cameraLocation:i.location})||i}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.TS(s,t):"wheel-zoom"===t.type?s=this.FS(s,t):"rotate+zoom"===t.type?s=this.IS(s,t):"fixed-rotate"===t.type?s=this.PS(s,t):"move"===t.type&&(s=this.DS(s,t))})),this.pS?s=this.BS(t.boundingBox,s):this.SS&&(s=this.LS(t.boundingBox,s)),s}TS(t,i){const{rotation:s}=i,e=t.location,h=Er.multiply(Er.normalize(t.location),-1),{Right:r,Up:n}=this.RS(h);let o=e;const a=this.ES(h),l=s.x*this.bS*a;o=Er.rotateAroundAxis(o,n,l);const u=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.xS,a-this._S);return 0!==u&&(o=Er.rotateAroundAxis(o,r,u)),{location:o,direction:Er.multiply(Er.normalize(o),-1)}}FS(t,i){const{deltaY:s}=i;this.pS&&this.OS(!1);const e=t.location,h=Er.multiply(Er.normalize(e),-1),r=s*this.MS,n=Er.length(e)*-r;return{direction:h,location:Er.addVec(e,Er.multiply(h,n))}}IS(t,i){const{rotation:s,cameraDistance:e}=i;this.pS&&this.OS(!1);let h=this.TS(t,{type:"rotate",rotation:s});const r=h.location,n=Er.multiply(Er.normalize(r),-1),o=Er.multiply(n,-e);return h={direction:Er.multiply(Er.normalize(o),-1),location:o},h}PS(t,i){this.pS&&this.OS(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.RS(h),o=s.x*this.bS;let a=Er.normalize(Er.rotateAroundAxis(h,n,o));const l=s.y*this.xS;return a=Er.normalize(Er.rotateAroundAxis(a,r,l)),{location:e,direction:a}}DS(t,i){this.pS&&this.OS(!1),this.SS=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.RS(r);return{location:Er.addVec(h,Er.multiply(r,.01*e),Er.multiply(n,.01*s)),direction:r}}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:Er.multiply(Er.normalize(t.cameraLocation),-1)};return this.pS?this.BS(t.boundingBox,i):this.LS(t.boundingBox,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:Er.multiply(Er.normalize(t.cameraLocation),-1)};return this.pS?this.BS(t.boundingBox,i):this.LS(t.boundingBox,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:Er.multiply(Er.normalize(t.cameraLocation),-1)};if(this.pS)return this.BS(t.boundingBox,i)}BS(t,i,s){let e=i;s=void 0!==s?s:0,e=this.zS(t,e,100,20,1,s,5);const h=this.ES(e.direction);return e=this.VS(e,this.NS(t,e,100,1),h),e}zS(t,i,s,e,h,r,n){return kf(r,n,(t=>({direction:i.direction,location:Er.multiply(i.direction,-t)})),(i=>this.GS(t,i)),s,h,"linear",e)}NS(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.RS(i.direction),a=this.US(t,!1,i);let l=i;const u=e,c=.1;return Math.abs(a.bottom-a.top)>u&&(l=a.bottom<a.top?Tf(0,c,(t=>({location:l.location,direction:Er.normalize(Er.lerp(l.direction,o,t))})),(i=>this.WS(t,i)),0,u,!0,s):Tf(0,c,(t=>({location:l.location,direction:Er.normalize(Er.lerp(l.direction,n,t))})),(i=>this.WS(t,i)),0,u,!0,s)),Math.abs(a.left-a.right)>u&&(l=a.left<a.right?Tf(0,c,(t=>({location:l.location,direction:Er.normalize(Er.lerp(l.direction,r,t))})),(i=>this.YS(t,i)),0,u,!0,s):Tf(0,c,(t=>({location:l.location,direction:Er.normalize(Er.lerp(l.direction,h,t))})),(i=>this.YS(t,i)),0,u,!0,s)),l}GS(t,i){const s=this.US(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}YS(t,i){const s=this.US(t,!1,i);return Math.abs(s.left-s.right)}WS(t,i){const s=this.US(t,!1,i);return Math.abs(s.top-s.bottom)}US(t,i,s){const e=qr(this.HS(t,i,s).map((t=>Ah(t,this.wS,this.CS))));return{left:e.min.x,right:this.CS.x.getInnerEnd()-e.max.x,top:this.CS.y.getInnerEnd()-e.max.y,bottom:e.min.y}}HS(t,i,s){const e=this.kS,h=n(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=n(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),o=[],a=i?16:4,l=(h.x+r.x)/2,u=(h.z+r.z)/2,c=Math.sqrt(2)*(r.x-l),d=Math.sqrt(2)*(r.z-u);return[h.y,r.y].forEach((t=>{for(let i=0;i<a;i+=1){const s=Math.PI/4+2*Math.PI*i/a,e=l+Math.cos(s)*c,h=u+Math.sin(s)*d;o.push({x:e,y:t,z:h})}})),o.map((t=>this.xp(t,s))).filter((t=>void 0!==t))}LS(t,i){const s=Er.length(i.location),e=this.jS(t);return s<e?{direction:i.direction,location:Er.multiply(i.direction,-e)}:i}jS(t){return.8*Math.sqrt(t.x**2+t.y**2+t.z**2)}RS(t){const i=n(0,1,0),s=Er.normalize(Er.cross(i,Er.multiply(t,-1)));let e=Er.cross(s,t);return e.y=Math.abs(e.y),e=Er.normalize(e),{Right:s,Up:e,Down:Er.multiply(e,-1),Left:Er.multiply(s,-1)}}ES(t){const i={x:0,y:1,z:0},s=Er.angle(t,i),e=Er.angle(t,Er.multiply(i,-1));return Math.min(s,e)}VS(t,i,s){return{location:Er.lerp(t.location,i.location,s),direction:Er.normalize(Er.lerp(t.direction,i.direction,s))}}OS(t){return this.pS=t,this}$S(){return this.pS}}const kf=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=(i+t)/2;do{const o=s(u);if(a={value:u,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const c=a.score>h;c&&"linear"===n||!c&&"reversed"===n?(u=(a.value+t)/2,i=a.value):(u=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},Tf=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=t;do{const c=s(u),d=e(c);if(void 0===a||Math.abs(d-h)<Math.abs(a.score-h)){if(a={value:u,result:c,score:e(c)},Math.abs(a.score-h)<=r)break}else if(n)break;l+=1,u+=1/(o-1)*(i-t)}while(l<o);return a.result};class Ff extends gf{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.At="Surface Grid Series 3D",this.XS={},this.$p=!1,this.xf=()=>Ar(this.sh),this.Bp=ql;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.Es.getSeries().length;this.sh=yr(this.zs.surfaceGridSeries3DFillStyle,n),this.ZS=yr(this.zs.surfaceGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows};this.Co=o,this.bl=this.si.JS(o).ah(this.sh).QS(this.ZS).Vp(this.Bp).Xs(this.getHighlight()),this.Zs(this.bl),e.start&&this.setStart(e.start),e.end&&this.setEnd(e.end),e.step&&this.setStep(e.step)}KS(){const t=this.XS.start||{x:0,z:0};let i;i=this.XS.end?{x:(this.XS.end.x-t.x)/this.Co.columns,z:(this.XS.end.z-t.z)/this.Co.rows}:this.XS.step?this.XS.step:{x:1,z:1},this.bl.qS(t,i),this.Es.$s.ie()}setStart(t){return this.XS.start=t,this.KS(),this}getStart(){return this.bl.tb().start}setStep(t){return this.XS.step=t,this.KS(),this}getStep(){return this.bl.tb().step}setEnd(t){return this.XS.end=t,this.KS(),this}getEnd(){return this.bl.tb().end}setFillStyle(t){return this.sh="function"==typeof t?t(this.sh):t,this.bl.ah(this.sh),this.si.ie(),this}getFillStyle(){return this.sh}setWireframeStyle(t){return this.ZS="function"==typeof t?t(this.ZS):t,this.bl.QS(this.ZS),this.si.ie(),this}getWireframeStyle(){return this.bl.ib()}setIntensityInterpolation(t){return t=t||"disabled",this.bl.sb(t),this.si.ie(),this}getIntensityInterpolation(){return this.bl.eb()}invalidateIntensityValues(t){if(this.$p&&this.Es.$s.Mo(mc.tA),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Co.dataOrder?t.length:t[0].length,rows:"rows"===this.Co.dataOrder?t.length:t[0].length},s="columns"===this.Co.dataOrder?this.Co.columns:this.Co.rows,e="columns"===this.Co.dataOrder?this.Co.rows:this.Co.columns;if(i.x>s||i.y>e){if(!0===this.Es.HA.To){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Co.columns}x${this.Co.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Ch.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.bl.hb({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Co.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Co.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Co.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Co.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Co.dataOrder?this.Co.columns:this.Co.rows)-1,o=("columns"===this.Co.dataOrder?this.Co.rows:this.Co.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.Es.HA.To){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Co.columns}x${this.Co.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Ch.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.bl.hb({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.si.ie(),this.$p=!0,this}invalidateHeightMap(t){if(this.$p&&this.Es.$s.Mo(mc.tA),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Co.dataOrder?t.length:t[0].length,rows:"rows"===this.Co.dataOrder?t.length:t[0].length},s="columns"===this.Co.dataOrder?this.Co.columns:this.Co.rows,e="columns"===this.Co.dataOrder?this.Co.rows:this.Co.columns;if(i.x>s||i.y>e){if(!0===this.Es.HA.To){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Co.columns}x${this.Co.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Ch.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.bl.rb({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Co.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Co.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Co.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Co.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Co.dataOrder?this.Co.columns:this.Co.rows)-1,o=("columns"===this.Co.dataOrder?this.Co.rows:this.Co.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.Es.HA.To){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Co.columns}x${this.Co.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Ch.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.bl.rb({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.si.ie(),this.$p=!0,this}setCullMode(t){return this.bl.nb("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.bl.ob()}Gp(){}uh(){}$m(){}Dp(){return this.Lp&&this.getVisible()}fh(t,i){t.Xs(i),this.si.ie()}}class If extends gf{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.At="Surface Grid Series 3D",this.XS={},this.xf=()=>Ar(this.sh),this.Es.$s.Mo(mc.tA),this.Bp=ql;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.Es.getSeries().length;this.sh=yr(this.zs.surfaceScrollingGridSeries3DFillStyle,n),this.ZS=yr(this.zs.surfaceScrollingGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows};this.Co=o,this.bl=this.si.ab(o).ah(this.sh).QS(this.ZS).Vp(this.Bp).Xs(this.getHighlight()),this.Zs(this.bl),e.start&&this.setStart(e.start),e.step&&this.setStep(e.step)}KS(){const t=this.XS.start||{x:0,z:0};let i;i=this.XS.step?this.XS.step:{x:1,z:1},this.bl.qS(t,i),this.Es.$s.ie()}setStart(t){return this.XS.start=t,this.KS(),this}getStart(){return this.bl.tb().start}setStep(t){return this.XS.step=t,this.KS(),this}getStep(){return this.bl.tb().step}setFillStyle(t){return this.sh="function"==typeof t?t(this.sh):t,this.bl.ah(this.sh),this.si.ie(),this}getFillStyle(){return this.sh}setWireframeStyle(t){return this.ZS="function"==typeof t?t(this.ZS):t,this.bl.QS(this.ZS),this.si.ie(),this}getWireframeStyle(){return this.bl.ib()}setIntensityInterpolation(t){return t=t||"disabled",this.bl.sb(t),this.si.ie(),this}getIntensityInterpolation(){return this.bl.eb()}clear(){return this.bl._i(),this.si.ie(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),i){const t=i[0].length,s=0+t-1,e="columns"===this.Co.scrollDimension?this.Co.rows:this.Co.columns;if(s>e-1){if(!0===this.Es.HA.To){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.Co.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ch.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.Co.scrollDimension?this.Co.rows:this.Co.columns;if(i>e-1){if(!0===this.Es.HA.To){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.Co.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ch.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.Es.HA.To){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;Ch.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.bl.lb({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this.si.ie(),this}setCullMode(t){return this.bl.nb("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.bl.ob()}Gp(){}uh(){}$m(){}Dp(){return this.Lp&&this.getVisible()}fh(t,i){t.Xs(i),this.si.ie()}}const Pf=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof Rf),Df=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z),Bf={translation:(t,i,s)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,i,s,1],xRotation(t){const i=Math.cos(t),s=Math.sin(t);return[1,0,0,0,0,i,s,0,0,-s,i,0,0,0,0,1]},yRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,0,-s,0,0,1,0,0,s,0,i,0,0,0,0,1]},zRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,s,0,0,-s,i,0,0,0,0,1,0,0,0,0,1]},scaling:(t,i,s)=>[t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],translate:(t,i,s,e)=>Bf.multiply(t,Bf.translation(i,s,e)),xRotate:(t,i)=>Bf.multiply(t,Bf.xRotation(i)),yRotate:(t,i)=>Bf.multiply(t,Bf.yRotation(i)),zRotate:(t,i)=>Bf.multiply(t,Bf.zRotation(i)),rotateXYZ(t,i){let s=Bf.xRotate(t,i.x);return s=Bf.yRotate(s,i.y),s=Bf.zRotate(s,i.z),s},scale:(t,i,s,e)=>Bf.multiply(t,Bf.scaling(i,s,e)),multiply(t,i){const s=i[0],e=i[1],h=i[2],r=i[3],n=i[4],o=i[5],a=i[6],l=i[7],u=i[8],c=i[9],d=i[10],f=i[11],A=i[12],g=i[13],v=i[14],y=i[15],m=t[0],p=t[1],S=t[2],b=t[3],x=t[4],M=t[5],_=t[6],w=t[7],C=t[8],k=t[9],T=t[10],F=t[11],I=t[12],P=t[13],D=t[14],B=t[15],L=[];return L[0]=s*m+e*x+h*C+r*I,L[1]=s*p+e*M+h*k+r*P,L[2]=s*S+e*_+h*T+r*D,L[3]=s*b+e*w+h*F+r*B,L[4]=n*m+o*x+a*C+l*I,L[5]=n*p+o*M+a*k+l*P,L[6]=n*S+o*_+a*T+l*D,L[7]=n*b+o*w+a*F+l*B,L[8]=u*m+c*x+d*C+f*I,L[9]=u*p+c*M+d*k+f*P,L[10]=u*S+c*_+d*T+f*D,L[11]=u*b+c*w+d*F+f*B,L[12]=A*m+g*x+v*C+y*I,L[13]=A*p+g*M+v*k+y*P,L[14]=A*S+g*_+v*T+y*D,L[15]=A*b+g*w+v*F+y*B,L},inverse(t){const i=[],s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],A=t[12],g=t[13],v=t[14],y=t[15],m=d*y,p=v*f,S=a*y,b=v*l,x=a*f,M=d*l,_=h*y,w=v*r,C=h*f,k=d*r,T=h*l,F=a*r,I=u*g,P=A*c,D=n*g,B=A*o,L=n*c,R=u*o,E=s*g,O=A*e,z=s*c,V=u*e,N=s*o,G=n*e,U=m*o+b*c+x*g-(p*o+S*c+M*g),W=p*e+_*c+k*g-(m*e+w*c+C*g),Y=S*e+w*o+T*g-(b*e+_*o+F*g),H=M*e+C*o+F*c-(x*e+k*o+T*c),j=1/(s*U+n*W+u*Y+A*H);return i[0]=j*U,i[1]=j*W,i[2]=j*Y,i[3]=j*H,i[4]=j*(p*n+S*u+M*A-(m*n+b*u+x*A)),i[5]=j*(m*s+w*u+C*A-(p*s+_*u+k*A)),i[6]=j*(b*s+_*n+F*A-(S*s+w*n+T*A)),i[7]=j*(x*s+k*n+T*u-(M*s+C*n+F*u)),i[8]=j*(I*l+B*f+L*y-(P*l+D*f+R*y)),i[9]=j*(P*r+E*f+V*y-(I*r+O*f+z*y)),i[10]=j*(D*r+O*l+N*y-(B*r+E*l+G*y)),i[11]=j*(R*r+z*l+G*f-(L*r+V*l+N*f)),i[12]=j*(D*d+R*v+P*a-(L*v+I*a+B*d)),i[13]=j*(z*v+I*h+O*d-(E*d+V*v+P*h)),i[14]=j*(E*a+G*v+B*h-(N*v+D*h+O*a)),i[15]=j*(N*d+L*h+V*a-(z*a+G*d+R*h)),i},projectionPerspective(t,i,s,e){const h=1/Math.tan(t*Math.PI/180/2),r=1/(s-e);return[h/i,0,0,0,0,h,0,0,0,0,(s+e)*r,-1,0,0,s*e*r*2,0]},projectionOrthographic:(t,i,s,e,h,r)=>[2/(i-t),0,0,-(i+t)/(i-t),0,2/(e-s),0,-(e+s)/(e-s),0,0,-2/(r-h),-(r+h)/(r-h),0,0,0,1]};class Lf extends gf{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.At="Mesh Model 3D",this.ub=new Float32Array,this.ti={x:1,y:1,z:1},this.cb={x:0,y:0,z:0},this.fb={x:0,y:0,z:0},this.Ab={x:0,y:0,z:0},this.gb={x:0,y:0,z:0},this.wl=Nr,this.xf=()=>Ar(this.getFillStyle());const n=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.Es.getSeries().length;this.bl=this.si.vb().Np(this.Rp).ah(yr(this.zs.meshModel3DFillStyle||this.zs.pointSeriesFillStyle,n)).Xs(this.getHighlight()),this.Zs(this.bl)}setModelGeometry(t){const{indices:i,vertices:s,normals:e}=t;let h=zr,r=Or,n=zr,o=Or,a=zr,l=Or;for(let t=0;t<s.length;t+=3){const i=s[t],e=s[t+1],u=s[t+2];h=Math.max(h,i),r=Math.min(r,i),n=Math.max(n,e),o=Math.min(o,e),a=Math.max(a,u),l=Math.min(l,u)}this.wl={min:{x:r,y:o,z:l},max:{x:h,y:n,z:a}};for(let t=0;t<s.length;t+=3)s[t]-=this.wl.min.x,s[t+1]-=this.wl.min.y,s[t+2]-=this.wl.min.z;return this.gb={x:this.wl.max.x-this.wl.min.x,y:this.wl.max.y-this.wl.min.y,z:this.wl.max.z-this.wl.min.z},this.ub=s instanceof Float32Array?s:new Float32Array(s),this.checkedNormals=e&&!Number.isNaN(e[0])?e instanceof Float32Array?e:new Float32Array(e):void 0,this.checkedNormals||this.setColorShadingStyle(ql),this.bl.yb({vertices:this.ub,normals:this.checkedNormals,indices:i instanceof Uint16Array?i:new Uint16Array(i),modelSize:this.gb}),this.Es.$s.ie(),this}setVertexValues(t){const i=this.fb,s=this.cb,e=this.ti,h=this.gb,r=this.Ab,n=gh(i,this.Es.axes,this.Es.world);let o;if(this.mb)o=t(this.mb);else{const i=[],a=Bf.projectionOrthographic(-1,1,-1,1,1,-1);let l=Bf.translate(a,h.x/2,h.y/2,h.z/2);l=Bf.rotateXYZ(l,r),l=Bf.translate(l,-h.x/2,-h.y/2,-h.z/2);const u=(s.x+1)*(h.x/2),c=(s.y+1)*(h.y/2),d=(s.z+1)*(h.z/2);for(let t=0;t<this.ub.length;t+=3){const s=Bf.multiply(l,[this.ub[t],this.ub[t+1],this.ub[t+2],1]),h={x:n.x+(s[0]-u)*e.x,y:n.y+(s[1]-c)*e.y,z:n.z+(s[2]-d)*e.z};i.push(h)}this.mb=i,o=t(i)}return 0===o.length||(o.length!==this.mb.length&&!0===this.Es.$s.Co.To&&Ch.console.warn("LightningChart JS warning - MeshModel3D.setVertexValues returned array length is not equal to vertex locations array length.\nThis is most likely an application error."),this.bl.pb(o instanceof Float32Array?o:new Float32Array(o)),this.Es.$s.ie()),this}setScale(t){const i={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.ti=i,this.mb=void 0,this.bl.Sb(i),this.Es.$s.ie(),this}getScale(){return this.ti}setModelLocation(t){return this.fb=t,this.mb=void 0,this.bl.bb(t),this.Es.$s.ie(),this}getModelLocation(){return this.fb}setModelAlignment(t){return this.cb=t,this.mb=void 0,this.bl.xb(t),this.Es.$s.ie(),this}getModelAlignment(){return this.cb}setModelRotation(t){const i={x:pn(t.x),y:pn(t.y),z:pn(t.z)};return this.Ab=i,this.mb=void 0,this.bl.Mb(this.Ab),this.Es.$s.ie(),this}getModelRotation(){return this.Ab}setBackfaceCullingMode(t){return this.bl._b(t),this.Es.$s.ie(),this}getBackfaceCullingMode(){return this.bl.wb()}setFillStyle(t){return this.bl.ah(t),this.Es.$s.ie(),this}getFillStyle(){return this.bl.pr()}setColorShadingStyle(t){return this.checkedNormals||t!==iu?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new su.Simple))}Dp(){return!1}fh(t,i){t.Xs(i),this.Es.$s.ie()}attach(t,i=!0,s=!1){return super.attach(t,i),fr(t,this.zs,s,{fill:this.getFillStyle()}),this}}class Rf extends _f{constructor(t,i,s,h,r,o,a){var l;let u;super(t,i,s,i.Kv("chart3D bg",0),h,i.$s.zs.chart3DBackgroundFillStyle,i.$s.zs.chart3DBackgroundStrokeStyle,i.$s.zs.chart3DTitleFont,i.$s.zs.chart3DTitleFillStyle,o),this.Cb=1,this.kb=[],this.Tb=2,this.Fb=!0,this.Ib=!0,this.Pb=!0,this.Db=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.axes={id:"axes",chart:this},this.world={id:"world",chart:this},this.Wn=[],this.Xn=()=>{const t=this.si.Bb();this.Rb.Lb(t),this.Eb.Lb(t);const i=this.Ob.viewportChanged(this.zb());i&&this.Vb(i),this.$s.ie()},this.Op=(t,i,s,e,h)=>{if(this.Pb){const t=h;this.kb.push({type:"rotate",rotation:t}),this.$s.ie(),qh(i)}},this.Ep=(t,i)=>{if(this.Ib){if(this.Fb)Math.sign(this.Db)!==Math.sign(i.deltaY)?this.Db=mr(i):this.Db+=mr(i);else{const t=mr(i);this.kb.push({type:"wheel-zoom",deltaY:t})}this.$s.ie(),qh(i)}},this.$s.Mo(mc.jf),this.sy.mr("Chart3D"),this.Nb=s.d3(),this.Nb.x.Gt(-1,1),this.Nb.y.Gt(-1,1),this.Nb.z.Gt(-1,1),this.si=i.Gb("chart3D layer3D",0,this.Nb),this.Rb=i.Ub("chart3D series bg",0),this.Eb=i.km("chart3D axis ui",1),this.Wb={x:new lf(this,(l=()=>this.eS,{...df(l,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.hn().x)),op:t=>t.x,wp:(t,i)=>({x:t.x,y:i.y,z:i.z}),Df:n(0,-1,0),Cp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:n(0,i.y,i.z),gridlinePositionB:n(0,i.y,-i.z),gridlinePositionC:n(0,-i.y,-i.z)}},Fp:()=>!0,Ip:()=>!1,_p:()=>!1}),this.Nb.x,this.zs,this.si,this.Eb,this.pixelScale,!1,this.Gs),y:new lf(this,ff((()=>this.eS)),this.Nb.y,this.zs,this.si,this.Eb,this.pixelScale,!1,this.Gs),z:new lf(this,Af((()=>this.eS)),this.Nb.z,this.zs,this.si,this.Eb,this.pixelScale,!1,this.Gs)},this.Yb=this.si.Nm([qd.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.zs.chart3DBoundingBoxStrokeStyle),this.uS=this.Rb.Oc(this.engine.scale,fl.Simple).ah(this.zs.chart3DSeriesBackgroundFillStyle).oh(ah).setMouseInteractions(!0),this.cS=this.Rb.Oc(this.engine.scale,fl.Simple).ah(De).oh(this.zs.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.lS(this.uS,this.cS),this.Hb({x:1,y:1,z:1},!0),this.Ob=new Cf(this.engine.scale,this.pixelScale,this.Nb,((t,i)=>(i&&this.Vb(i),this.si.xp(t)))),this.jb=this.Ob.getDefaultCameraConfiguration(this.$b(this.Xb)),this.Vb(this.jb),this.zp=Jn(new to(((t,i,s)=>{u={locationOne:i,locationTwo:s,cameraLocation:this.si.getCameraLocation()}}),((t,i,s,h,r,n)=>{if(!this.Pb&&!this.Ib)return;const o=(u.locationOne.x-u.locationTwo.x)**2+(u.locationOne.y-u.locationTwo.y)**2,a=(i.x-s.x)**2+(i.y-s.y)**2,l=Er.length(u.cameraLocation),c=o/a*l,d=e((h.x+r.x)/2,(h.y+r.y)/2);this.kb.push({type:"rotate+zoom",rotation:this.Pb?d:{x:0,y:0},cameraDistance:this.Ib?c:l}),this.$s.ie(),qh(n)}),(t=>{})),new qn((t=>{}),((t,i,s,e,h)=>{if(this.Pb){const t=e;this.kb.push({type:"rotate",rotation:t}),this.$s.ie(),qh(h)}}),(t=>{}))),this.onBackgroundTouchStart(this.zp.onTouchStart),this.onBackgroundTouchMove(this.zp.onTouchMove),this.onBackgroundTouchEnd(this.zp.onTouchEnd),this.onSeriesBackgroundTouchStart(this.zp.onTouchStart),this.onSeriesBackgroundTouchMove(this.zp.onTouchMove),this.onSeriesBackgroundTouchEnd(this.zp.onTouchEnd),this.onBackgroundMouseDrag(this.Op),this.onBackgroundMouseWheel(this.Ep),this.onBackgroundMouseDown(((t,i)=>{qh(i)})),this.onSeriesBackgroundMouseDrag(this.Op),this.onSeriesBackgroundMouseWheel(this.Ep),this.onSeriesBackgroundMouseDown(((t,i)=>{qh(i)})),this.setAnimationsEnabled(!0!==(null==a?void 0:a.disableAnimations)&&!1!==(null==a?void 0:a.animationsEnabled)),this.onResize(this.Xn),this.Xn(),this.Jv(r,this.pixelScale)}addPointSeries(t){const i=new(t&&t.type||bf)(this,this.rS,this.si,this.zs,this.$s.Gs,t);return this.dS(i),i}addLineSeries(t){const i=new mf(this,this.rS,this.si,this.zs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length,this.$s.Gs);return this.dS(i),i}addPointLineSeries(t){const i=new pf(this,this.rS,this.si,this.zs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length,this.$s.Gs);return this.dS(i),i}addSurfaceGridSeries(t){const i=new Ff(this,this.rS,this.si,t,this.zs,this.$s.Gs);return this.dS(i),i}addSurfaceScrollingGridSeries(t){const i=new If(this,this.rS,this.si,t,this.zs,this.$s.Gs);return this.dS(i),i}addBoxSeries(t){const i=new vf(this,this.rS,this.si,this.zs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length,this.$s.Gs);return this.dS(i),i}addMeshModel(t){const i=new Lf(this,this.rS,this.si,this.zs,t,this.$s.Gs);return this.dS(i),i}translateCoordinate(t,i,s){if(Pf(i)||Pf(s)||Df(t)){if(Pf(i)&&Pf(s)&&Df(t)){if("axes"===i.id&&"world"===s.id)return this.si.ii(t);if("world"===i.id&&"axes"===s.id)return this.si.ei(t);if(i.id===s.id)return t}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return ld(t,i,s,this.pixelScale,this.$s)}getDefaultAxisX(){return this.Wb.x}getDefaultAxisY(){return this.Wb.y}getDefaultAxisZ(){return this.Wb.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.Wb.x,this.Wb.y,this.Wb.z]}setCameraLocation(t){let i={location:t,direction:Er.normalize(Er.multiply(t,-1))};const s=this.Ob.cameraLocationChanged(this.zb(i));return s&&(i=s),this.Vb(i),this.$s.ie(),this}getCameraLocation(){return this.si.getCameraLocation()}getCameraDirection(){return this.si.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.Ob.OS(t);const i=this.Ob.cameraLocationChanged(this.zb());return i&&this.Vb(i),this}getCameraAutomaticFittingEnabled(){return this.Ob.$S()}onCameraChange(t){return this.Ct.on("cameraChange",t)}offCameraChange(t){return this.Ct.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.Yb.ph(t).vp(rf(this.Yb.Yu())),this.si.ie(),this}getBoundingBoxStrokeStyle(){return this.Yb.Yu()}setBoundingBox(t){return this.Hb(t,!1),this}Hb(t,i){this.Xb=t;const s=this.$b(t);if(this.Nb.x.Wt(s.x),this.Nb.y.Wt(s.y),this.Nb.z.Wt(-s.z),!i){const t=this.Ob.boundingBoxChanged(this.zb());t&&this.Vb(t)}this.$s.ie()}getBoundingBox(){return this.Xb}uh(t){if(gd.ly(this.sy,this.qv),0!==this.Db){const i=this.Db*t*.006;this.kb.push({type:"wheel-zoom",deltaY:i}),this.Db=Math.sign(this.Db)*Math.max(Math.abs(this.Db)-.01*t,0),0!==this.Db&&this.$s.ie(!0)}const i=this.getCameraDirection();if(this.kb.length>0){const t=this.Ob.applyCameraInteractions(this.zb(),this.kb);t&&this.Vb(t),this.kb.length=0}this.Zb&&Er.equals(this.Zb.location,this.jb.location)&&Er.equals(this.Zb.direction,this.jb.direction)||this.Ct.emit("cameraChange",this,this.getCameraLocation()),this.Zb=this.jb,super.uh(t);for(let t=0;t<this.eS.length;t+=1)this.eS[t].Gp();for(let t=0;t<this.eS.length;t+=1)this.eS[t].uh();this.Wb.x.rn(),this.Wb.y.rn(),this.Wb.z.rn(),this.Wb.x.uh(i),this.Wb.y.uh(i),this.Wb.z.uh(i),super.Qv();const s=this.Nb,e=n(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),h=n(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd());this.Yb._i().Gl([n(h.x,e.y,e.z),n(h.x,h.y,e.z),n(h.x,h.y,h.z),n(h.x,e.y,h.z),n(e.x,e.y,h.z),n(e.x,h.y,h.z),n(h.x,h.y,h.z),n(h.x,h.y,e.z),n(e.x,h.y,e.z),n(e.x,h.y,h.z),n(e.x,e.y,h.z),n(e.x,e.y,e.z)]);const r=[n(e.x,e.y,e.z),n(h.x,e.y,e.z),n(e.x,h.y,e.z),n(h.x,h.y,e.z),n(e.x,e.y,h.z),n(h.x,e.y,h.z),n(e.x,h.y,h.z),n(h.x,h.y,h.z)].map((t=>this.si.xp(t))),o=this.si.xp(n((e.x+h.x)/2,(e.y+h.y)/2,(e.z+h.z)/2)),a=ar(r,o),l=[];for(let t=0;t<a.length;t+=1){const i=a[t];hn(i,o,a[t>0?t-1:a.length-1],a[t<a.length-1?t+1:0])||l.push(i)}const u=ar(l,o);this.uS.Kl(u),this.cS.Kl(u);for(let t=0;t<this.eS.length;t+=1)this.eS[t].$m()}dispose(){return this.Wn.forEach((t=>{t()})),this.Wn.length=0,this.Nb.Bt(),this.si.Bt(),this.Eb.Bt(),this.Rb.Bt(),super.dispose()}Vt(){return this.Nb.x.Vt(),this.Nb.y.Vt(),this.Nb.z.Vt(),super.Vt()}Nt(){return super.Nt()}Vb(t){this.si.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(Er.addVec(t.location,Er.multiply(t.direction,-this.Tb))),this.jb=t,this.$s.ie()}$b(t){return Er.divide(t,Er.length(t)/this.Cb)}zb(t=this.jb){return{boundingBox:this.$b(this.Xb),cameraLocation:t.location,cameraDirection:t.direction}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.Ib=t,this}getMouseInteractionZoom(){return this.Ib}setMouseInteractionRotate(t){return this.Pb=t,this}getMouseInteractionRotate(){return this.Pb}forEachAxis(t){return t(this.Wb.x),t(this.Wb.y),t(this.Wb.z),this}getSeries(){return this.eS}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.Fb=!!t,this}getAnimationZoom(){return this.Fb}}const Ef={Column:zu,Row:Vu};class Of extends dd{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Qb=new Map,this.Jb=this.addUIElement(Ef.Row).setPosition({x:0,y:100}).setOrigin(Do.LeftTop).setBackground((t=>t.setFillStyle(De).setStrokeStyle(ah)))}add(t,i){return(t instanceof Ad?[t]:t instanceof Ky?t.getCells().filter((t=>t.panel instanceof Ad)).map((t=>t.panel)):[]).forEach((t=>{const s=this.Jb.addElement(fc.VerticalLegendBox).setBackground((t=>t.setFillStyle(De).setStrokeStyle(ah))).add(t,i).setTitle(t.getTitle());this.Qb.set(t,s)})),this.$s.ie(),this}setLegendBoxes(t){return this.Qb.forEach(((i,s)=>t(i,s))),this}getMinimumSize(){return super.getMinimumSize()||this.Jb.getSize()}}const zf={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},Vf=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),Nf=(t,i)=>{let s=i.geometry;return s=Gf(t,i,s),s=Uf(t,i,s),s},Gf=(t,i,s)=>{if(t===zf.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},Uf=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===zf.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=qr(Lh(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},Wf={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},Yf={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class Hf extends Ad{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Kv("mapChart bg",0),h,s.$s.zs.mapChartBackgroundFillStyle,s.$s.zs.mapChartBackgroundStrokeStyle,s.$s.zs.mapChartTitleFont,s.$s.zs.mapChartTitleFillStyle,o),this.Kb=[],this.ti=this.Ov.d2({scaleXYConstructor:Nn}),this.Fs=!0,this.qb=this.zs.mapChartSeparateRegionFillStyle,this.tx=this.zs.mapChartSeparateRegionStrokeStyle,this.ix=t.AutoCursorModes.onHover,this.Mm=jf,this.zh=!0,this.sx=0,this.hx=!0,this.nx=new Map,this.onMouseEnter=t=>this.Ct.on("mouseEnter",t),this.onMouseLeave=t=>this.Ct.on("mouseLeave",t),this.onMouseClick=t=>this.Ct.on("mouseClick",t),this.onMouseDoubleClick=t=>this.Ct.on("mouseDoubleClick",t),this.onMouseDown=t=>this.Ct.on("mouseDown",t),this.onMouseUp=t=>this.Ct.on("mouseUp",t),this.onMouseMove=t=>this.Ct.on("mouseMove",t),this.offMouseEnter=t=>this.Ct.off(t,"mouseEnter"),this.offMouseLeave=t=>this.Ct.off(t,"mouseLeave"),this.offMouseClick=t=>this.Ct.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.Ct.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.Ct.off(t,"mouseDown"),this.offMouseUp=t=>this.Ct.off(t,"mouseUp"),this.offMouseMove=t=>this.Ct.off(t,"mouseMove"),this.offMouseDragStart=t=>this.Ct.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.Ct.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.Ct.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.Ct.off(t,"mouseWheel"),this.onMapDataReady=t=>{const i=this.Ct.on("mapDataReady",t);return this.ox&&Ch.setTimeout((()=>t())),i},this.onViewChange=t=>this.Ct.on("viewChange",t),this.lx=(t,i,s,e,h)=>{this.ti.x.Wt(e).Ni([this.Pi.left+this.Ja.left,this.Pi.right+this.Ja.right]),this.ti.y.Wt(h).Ni([this.Pi.bottom+this.Ja.bottom,this.Pi.top+this.Ja.top+gd.oy(this.sy,this.qv)]),this.ux&&this.Ax(this.gx,this.ti,this.ux)},this.li=(i,s)=>{const e=s;if(!e||!this.ox)return;const{iRegion:h,region:r}=this.vx(this.ox,e);this.ix!==t.AutoCursorModes.disabled&&(this.yx(r,h),qh(i)),this.hx&&this.$s.js.he(r,!0),this.mx=r,this.Ct.emit("mouseEnter",this,i)},this.ui=(t,i)=>{const s=i;if(!s||!this.ox)return;const{iRegion:e,region:h}=this.vx(this.ox,s);this.Sx(h,e),this.hx&&this.$s.js.he(h,!1),this.mx=void 0,this.Ct.emit("mouseLeave",this,t),t&&qh(t)},this.gi=(i,s)=>{const e=s;if(!e||!this.ox)return;const{iRegion:h,region:r}=this.vx(this.ox,e);this.ix!==t.AutoCursorModes.disabled&&(this.yx(r,h),qh(i)),this.mx=r,this.Ct.emit("mouseMove",this,i)},this.ci=(t,i)=>this.Ct.emit("mouseClick",this,t),this.di=(t,i)=>this.Ct.emit("mouseDoubleClick",this,t),this.fi=(t,i)=>this.Ct.emit("mouseDown",this,t),this.Ai=(t,i)=>this.Ct.emit("mouseUp",this,t),this.yi=(t,i,s)=>{this.Ct.emit("mouseDragStart",this,t,i)},this.vi=(t,i,s,e,h)=>{this.Ct.emit("mouseDrag",this,t,i,s,e)},this.mi=(t,i,s,e)=>{this.Ct.emit("mouseDragStop",this,t,i,s)},this.pi=(t,i)=>{this.Ct.emit("mouseWheel",this,t)},this.Si=(t,i)=>{const s=i;if(!s||!this.ox)return;const{iRegion:e,region:h}=this.vx(this.ox,s);this.bx=this.engine.clientLocation2Engine(t.clientX,t.clientY),this.yx(h,e),this.hx&&this.$s.js.he(h,!0),this.mx=h,this.Ct.emit("touchStart",this,t),qh(t)},this.bi=(t,i)=>{const s=i;if(!s||!this.ox)return;const{iRegion:e,region:h}=this.vx(this.ox,s);this.bx=this.engine.clientLocation2Engine(t.clientX,t.clientY),this.yx(h,e),this.mx=h,this.Ct.emit("touchMove",this,t),qh(t)},this.xi=(t,i)=>{const s=i;if(!s||!this.ox)return;const{iRegion:e,region:h}=this.vx(this.ox,s);this.bx=void 0,this.Sx(h,e),this.hx&&this.$s.js.he(h,!1),this.mx=void 0,this.Ct.emit("touchEnd",this,t),qh(t)},this.$s.Mo(mc.Xf),this.zh=!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled),this.xx=s.km("mapChart plotting",0),this.onResize(this.lx),this.sy.mr("Map Chart");const a=Rh(n?n.autoCursorBuilder:void 0,Vd);this.Mx=a.jy(s.Im(),this.ti,this.ti,this.zs).setVisible(!1),this._x=this.Gs.Jg(),this.Jv(r,this.uiScale),this.wx=this.xx.Cx(this.ti).setMouseInteractions(this.Fs).setMouseEnterEventHandler(((t,i,s)=>this.li(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this.ui(i,s))).setMouseClickEventHandler(((t,i,s)=>this.ci(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.di(i,s))).setMouseDownEventHandler(((t,i,s)=>this.fi(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Ai(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.gi(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.yi(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.vi(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.mi(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.pi(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Si(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.bi(i,s))).setTouchEndEventHandler(((t,i,s)=>this.xi(i,s))).ah(this.zs.mapChartFillStyle).oh(this.zs.mapChartStrokeStyle),this.kx=this.xx.Cx(this.ti).setMouseInteractions(this.Fs).ah(this.zs.mapChartOutlierRegionFillStyle).oh(this.zs.mapChartOutlierRegionStrokeStyle);const l=Rh(n&&n.type,zf.World);this.gx=l,this.Tx(l).then((()=>{this.Ct.emit("mapDataReady")}))}getRegionUnderMouse(){return this.mx}setFillStyle(t){return this.wx.ah(t),this.$s.ie(),this}getFillStyle(){return this.wx.pr()}setStrokeStyle(t){return this.wx.oh(t),this.$s.ie(),this}getStrokeStyle(){return this.wx.Yo()}setEffect(t){return this._x.te(t),this.$s.ie(),this}getEffect(){return this._x.se()}setOutlierRegionFillStyle(t){return this.kx.ah(t),this.$s.ie(),this}getOutlierRegionFillStyle(){return this.kx.pr()}setOutlierRegionStrokeStyle(t){return this.kx.oh(t),this.$s.ie(),this}getOutlierRegionStrokeStyle(){return this.kx.Yo()}setSeparateRegionFillStyle(t){return this.qb="function"==typeof t?t(this.qb):t,this.Kb.forEach((t=>t.ah(this.qb))),this.$s.ie(),this}getSeparateRegionFillStyle(){return this.qb}setSeparateRegionStrokeStyle(t){return this.tx="function"==typeof t?t(this.tx):t,this.Kb.forEach((t=>t.oh(this.tx))),this.$s.ie(),this}getSeparateRegionStrokeStyle(){return this.tx}invalidateRegionValues(t){if(!this.ox||!this.Fx)return this.Ix=this.Ix||[],this.Ix.push(t),this;if("function"==typeof t)for(let i=0;i<this.ox.regions.length;i+=1){const s=this.ox.regions[i],e=this.Fx[i],h=t({...s,geometry:void 0},e);if(void 0!==h&&h!==e){this.Fx[i]=h;const t=this.nx.get(s);null==t||t.forEach((t=>{t.Px(h)}))}}else for(const i of t)if(i)for(let t=0;t<this.ox.regions.length;t+=1){const s=this.ox.regions[t],e=this.Fx[t];if(void 0!==i.value&&i.value!==e&&Vf(s,i)){this.Fx[t]=i.value;const e=this.nx.get(s);null==e||e.forEach((t=>{t.Px(i.value)}))}}return this.$s.ie(),this}setAutoCursor(t){return this.Mx&&t(this.Mx),this.$s.ie(),this}getAutoCursor(){return this.Mx}setAutoCursorMode(t){return this.ix=t,this.$s.ie(),this}getAutoCursorMode(){return this.ix}setCursorResultTableFormatter(t){return this.Mm=t,this.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}onMouseDragStart(t){return this.Ct.on("mouseDragStart",t)}onMouseDrag(t){return this.Ct.on("mouseDrag",t)}onMouseDragStop(t){return this.Ct.on("mouseDragStop",t)}onMouseWheel(t){return this.Ct.on("mouseWheel",t)}onTouchStart(t){return this.Ct.on("touchStart",t)}onTouchMove(t){return this.Ct.on("touchMove",t)}onTouchEnd(t){return this.Ct.on("touchEnd",t)}offTouchStart(t){return this.Ct.off(t,"touchStart")}offTouchMove(t){return this.Ct.off(t,"touchMove")}offTouchEnd(t){return this.Ct.off(t,"touchEnd")}setMouseInteractions(t){return this.Fs=t,this.wx.setMouseInteractions(t),this}getMouseInteractions(){return this.Fs}setHighlight(t){var i;return t=_r(t),this.sx=t,null===(i=this.ox)||void 0===i||i.regions.forEach((i=>{this.$s.js.he(i,t)})),this.Ct.emit("highlight",this,t),this}getHighlight(){return this.sx}setAnimationHighlight(t){var i;return null===(i=this.ox)||void 0===i||i.regions.forEach((i=>{this.$s.js.re(i,t)})),this}getAnimationHighlight(){var t;return this.$s.js.ne(null===(t=this.ox)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.hx=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.hx}onHighlight(t){return this.Ct.on("highlight",t)}offHighlight(t){return this.Ct.off(t)}offMapDataReady(t){return this.Ct.off(t,"mapDataReady")}offViewChange(t){return this.Ct.off(t,"viewChange")}async Tx(t){const i=await((t,i)=>{let s;if(t===zf.World)s="countries_world.json";else if(t===zf.NorthAmerica)s="countries_northAmerica.json";else if(t===zf.SouthAmerica)s="countries_southAmerica.json";else if(t===zf.Africa)s="countries_africa.json";else if(t===zf.Europe)s="countries_europe.json";else if(t===zf.Asia)s="countries_asia.json";else if(t===zf.USA)s="states_usa.json";else if(t===zf.Canada)s="territoriesProvinces_canada.json";else{if(t!==zf.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw Ch.alert(i),new Error(i)}s="territories_australia.json"}const e=`${i}/maps/${s}`;return Ch.fetch(e).then((t=>t.json())).catch((t=>{Ir(i,e,"Map Chart",{shouldCrash:!0})}))})(t,this.HA.ke);this.Fx=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=Wf[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.kx.Sn().Kl(i);if(t===zf.USA){const t=25.8,i=29.7;this.Kb.push(this.xx.lh(this.ti).setMouseInteractions(!1).ah(this.qb).oh(this.tx).dh({x:-126,y:t}).Wt({x:10,y:i-t}),this.xx.lh(this.ti).setMouseInteractions(!1).ah(this.qb).oh(this.tx).dh({x:-113,y:t}).Wt({x:7,y:i-t}))}const e=this.$s.js.pn(this.wx,{animationEnabled:this.zh});for(let s=0;s<i.regions.length;s+=1){const h=i.regions[s],r=Nf(t,h),n=[];for(const t of r)t.length<3||n.push(this.wx.Sn().Kl(t));this.nx.set(h,n),e.Sn(h,(t=>{n.forEach((i=>i.Xs(t)))}))}if(this._x.Qs([this.wx]),this.ux=s,this.Ax(t,this.ti,s),this.ox=i,this.Ix){for(const t of this.Ix)this.invalidateRegionValues(t);this.Ix=void 0}this.$s.ie()}Ax(t,i,s){const e=Yf[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.Gt(n.min.x,n.max.x),i.y.Gt(n.min.y,n.max.y);const o=this.ti.x.$i(),a=this.ti.y.$i();this.Ct.emit("viewChange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}yx(t,i){this.Dx={region:t,iRegion:i},this.$s.ie()}Sx(t,i){this.Dx&&t===this.Dx.region&&(this.Dx=void 0,this.$s.ie())}vx(t,i){const s=Array.from(this.nx.entries()).findIndex((([t,s])=>s.includes(i)));return{iRegion:s,region:null==t?void 0:t.regions[s]}}setAnimationsEnabled(t){return this.zh=!t,this}getAnimationsEnabled(){return this.zh}getMinimumSize(){}If(){return[this]}uh(t){super.uh(t),super.Qv(),gd.ly(this.sy,this.qv);const i=l(this.ti.x.Gi(),this.ti.y.Gi(),this.ti.x.Wi(),this.ti.y.Wi());this.xx.Lb(i);const s=this.$s.xo()||this.bx;if(this.Dx&&s){const t=this.Fx&&this.Fx[this.Dx.iRegion];let i=Ah(s,this.engine.scale,this.ti);i={x:Bh(i.x,this.ti.x.getInnerStart(),this.ti.x.getInnerEnd()),y:Bh(i.y,this.ti.y.getInnerStart(),this.ti.y.getInnerEnd())};let e=i.x,h=i.y;const r=this.Dx.region.transform;this.Dx.region.outlier&&r&&(e=(e-r.translate.x-r.vertexBoundaries.min.x)/r.scale.x+r.vertexBoundaries.min.x,h=(h-r.translate.y-r.vertexBoundaries.min.y)/r.scale.y+r.vertexBoundaries.min.y),this.Mx.setPosition(i).setVisible(!0).getResultTable().setContent(this.Mm(new _d,this.Dx.region,t,e,h,this).Pc())}else this.Mx.setVisible(!1);return this.Mx.de().uh(),this}dispose(){return this.xx.Bt(),this.Mx.dispose(),cd(this.ti),super.dispose()}Vt(){return super.Vt(),this.ti.Vt(),this}Nt(){return super.Nt(),this.ti.Nt(),this}xf(){return Ar(this.getFillStyle())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.onMouseEnter((()=>{this.setHighlight(!0)})),t.onMouseLeave((()=>{this.setHighlight(!1)})),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),fr(t,this.zs,s,{fill:this.getFillStyle()}),this}}const jf=(t,i,s,e,h,r)=>(t.addRow(`${i.name}`).addRow($f(e,h)),void 0!==s&&t.addRow(`Region value: ${s.toFixed(1)}`),t),$f=(t,i)=>{const s=t>0,e=i>0;return`${[vr(Math.abs(0|t),2)," ",vr(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[vr(Math.abs(0|i),2)," ",vr(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`};class Xf extends ea{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.Bx(s),e,h,{numeric:i.Lx({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.Lx({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.Lx({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.Rx=r,this.Ex=n,this.Ox=o,this.Gs=a,this.zx=s,this.Vx=i.Lx({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.yr=o.An(s).setMouseInteractions(!1).Mr(i.Lx({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).ah(i.Lx({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.Cr=this.Gs.Jg([this.yr]).te(e.effectsText)}setTickStrategy(t,i){return super.cr(t,i)}setStrokeStyle(t){return this.Vx="function"==typeof t?t(this.Vx):t,this.Ex.ie(),this}getStrokeStyle(){return this.Vx}$r(t,i){return new Zf(i,t,this.zx,this.Ox,this.Nx(this.Rx,this.zx),this.Ox.Sh(this.zx).setMouseInteractions(!1))}Xr(t,i){const s=this.Gx(this.zx,t);this.Ux&&!1===this.Ux(t)?t.kh.setVisible(!1):t.kh.setVisible(!0).dh(cn(this.Wx(this.zx,t.S),s.padding)).yl(s.alignment)._r(s.rotation).ul(s.offset.x,s.offset.y),this.Yx(this.zx,t.Hx,t.jx,t)}setMouseInteractions(t){return this}uh(){this.Or({physicalAxisSize:0});const t=this.Jr(((t,i)=>{const s=i.ir.jr,e=.5*this.Vx.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.kh.de().Id().y)+s.labelPadding;return Math.max(t,e)}),0);return this.$x(this.zx,this.Vx,t),this.Xx(this.zx,this.yr,t),t}}class Zf extends ha{constructor(t,i,s,e,h,r,n){super(t,i,e,s,n),this.Hx=h,this.jx=r,h.setMouseInteractions(!1),this.Vs.push(h,r)}}class Qf extends Xf{constructor(t,i,s,e,h,r,n,o,a){super(t,Jf((()=>this.rv())),i,s,e,h,r,n,o),this.gp=this.Ex.Sh(this.zx).setMouseInteractions(!1),this.Zx=a,this.setScrollStrategy(Yo.expansion),this.setTickStrategy(Ho.Numeric),this.setTitle("Amplitude")}rv(){return this.Zx()}nn(t,i){return vc(t,i,this.zx.y)}ln(t,i,s){const e=2*(i-t),h=this.zx.x.ps(e);return{min:t-s*h,max:i+s*h}}Wx(t,i){return{x:t.Qx()?i-t.Jx().start:t.Jx().start-i,y:0}}Nx(t,i){return t.Bd(i)}Yx(t,i,s,e){const h=e.ir.jr,r=t.Qx()?e.S-t.Jx().start:t.Jx().start-e.S;Dh(e.S,t.Jx().start)||Dh(e.S,t.Jx().end)?i.setVisible(!1):i.setVisible(!0).Ou(0).bh(360).Uu(void 0).Gu(0).zu(r).Uu(60).ah(De).oh(h.gridStrokeStyle);const n=.5*this.Vx.getThickness();s.xh({x:r,y:-n*t.ks().y}).bh({x:r,y:-(n+h.tickLength)*t.ks().y}).ph(h.tickStyle)}Gx(t,i){const s=i.ir.jr;return{alignment:{x:0,y:1},padding:{x:0,y:t.ks().y*-(.5*this.Vx.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}$x(t,i,s){const e=t.Qx()?t.Jx().end-t.Jx().start:t.Jx().start-t.Jx().end;this.gp.xh({x:0,y:0}).bh({x:e,y:0}).ph(i)}Xx(t,i,s){const e=t.Qx()?(t.Jx().start+t.Jx().end)/2-t.Jx().start:t.Jx().start-(t.Jx().start+t.Jx().end)/2;i.yl({x:0,y:1}).dh({x:e,y:-s*t.ks().y})}}const Jf=t=>({...df(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),Bx:t=>({getInnerStart:()=>t.Jx().start,getInnerEnd:()=>t.Jx().end,Gt:(i,s)=>t.Kx(i,s),Qt:(i,s,e,h,r)=>t.y.Qt(i,s,e,h,r)}),Lx:t=>t.amplitude});class Kf extends Xf{constructor(t,i,s,e,h,r,n,o){super(t,tA,i,s,e,h,r,n,o),this.qx=90,this.tM=12,this.iM=qf,this.gp=this.Ex.Bd(this.zx).setMouseInteractions(!1),this.Ux=t=>{let i=180*(t.S-this.zx.sM())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;if(i>=0&&i<=20||i>=340&&i<=360)return!1},this.Rh=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.qx)}setTickStyle(t){return this.eM="function"==typeof t?t(this.eM):t,this.hM(),this.Ex.ie(),this}getTickStyle(){return this.eM}setTickFormattingFunction(t){return this.iM=t,this.hM(),this.Ex.ie(),this}getTickFormattingFunction(){return this.iM}setClockwise(t){this.zx.rM(t);const i=this.qx*Math.PI/180;return t?this.zx.nM(i+Math.PI/2):this.zx.nM(i-Math.PI/2),this.Ex.ie(),this}getClockwise(){return!this.zx.oM()}setNorth(t){for(;t<0;)t+=360;t%=360,this.qx=t;const i=t*Math.PI/180;return this.getClockwise()?this.zx.nM(i+Math.PI/2):this.zx.nM(i-Math.PI/2),this.Ex.ie(),this}getNorth(){return 180*this.zx.sM()/Math.PI}setDivision(t){return this.tM=t,this.hM(),this.Ex.ie(),this}getDivision(){return this.tM}rv(){return[]}nn(t,i){return i}ln(t,i,s){return{min:t,max:i}}Wx(t,i){const s=t.oM()?1:-1,e=t.sM(),h=t.Qx()?t.Jx().end-t.Jx().start:t.Jx().start-t.Jx().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}Nx(t,i){return t.Sh(i)}Yx(t,i,s,e){const h=this.eM,r=t.oM()?1:-1,n=t.sM(),o=(e.S-n)*r,a=Math.cos(o),l=Math.sin(o),u=t.Qx()?t.Jx().end-t.Jx().start:t.Jx().start-t.Jx().end,c={x:a*u,y:l*u};i.xh({x:0,y:0}).bh(c);const d={x:c.x+a*h.tickLength*t.ks().x,y:c.y+l*h.tickLength*t.ks().y};s.xh(c).bh(d),i.ph(h.gridStrokeStyle),s.ph(h.tickStyle)}Gx(t,i){const s=this.eM,e=t.oM()?1:-1,h=t.sM();let r,n=(i.S-h)*e;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const o=s.tickLength+s.tickPadding,a=Math.cos(n)*o*t.ks().x,l=Math.sin(n)*o*t.ks().y;return{alignment:{x:0,y:0},padding:{x:a,y:l},rotation:180*r/Math.PI,offset:{x:a,y:l}}}$x(t,i,s){const e=t.Qx()?t.Jx().end-t.Jx().start:t.Jx().start-t.Jx().end;this.gp.Ou(0).bh(360).Gu(0).zu(e+.5*i.getThickness()*t.ks().x).Uu(360).ah(De).oh(i)}Xx(t,i,s){const e=t.sM(),h=this.Gx(t,{S:0+e}),r=t.Qx()?t.Jx().end-t.Jx().start:t.Jx().start-t.Jx().end;i.yl(h.alignment)._r(h.rotation).ul(h.offset.x,h.offset.y).dh(cn({x:r,y:0},h.padding))}hM(){this.Ir({Fh:[],Ih:[{kh:"Radial ticks",vv:0,jr:this.eM,Yr:this.iM,vn:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.tM;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},sr:{Zr:()=>{},er:()=>!1},yn:void 0}],wh:qf,Pr:void 0,Dr:void 0})}}const qf=(t,i,s)=>(180*t/Math.PI).toFixed(0),tA={tn:()=>{},sn:()=>{},hn:()=>{},Bx:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,Gt:(t,i)=>{},Qt:(i,s,e,h,r)=>t.x.Qt(i,s,e,h,r)}),Lx:t=>t.radial},iA=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),sA=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class eA extends Xn{constructor(t,i,s,e,h,r){super(i,s,h,r),this.At="Sector",this.aM=0,this.lM=1*Math.PI/2,this.uM=void 0,this.cM=void 0,this.ae=t,this.zx=e,this.nm=this.ae.Bd(this.zx).Xs(this.getHighlight()),this.Zs(this.nm),this.sh=h.polarSectorFillStyle,this.eh=h.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.aM=Bh(t,0,360),this.ae.ie(),this}getAngleStart(){return this.aM}setAngleEnd(t){return this.lM=Bh(t,0,360),this.ae.ie(),this}getAngleEnd(){return this.lM}setAmplitudeStart(t){return this.uM=t,this.ae.ie(),this}getAmplitudeStart(){return this.uM}setAmplitudeEnd(t){return this.cM=t,this.ae.ie(),this}getAmplitudeEnd(){return this.cM}setFillStyle(t){return this.sh="function"==typeof t?t(this.sh):t,this.ae.ie(),this}getFillStyle(){return this.sh}setStrokeStyle(t){return this.eh="function"==typeof t?t(this.eh):t,this.ae.ie(),this}getStrokeStyle(){return this.eh}uh(){const t=this.zx.Jx(),i=180*this.zx.sM()/Math.PI,s=void 0!==this.uM?Bh(this.uM,t.start,t.end):t.start,e=void 0!==this.cM?Bh(this.cM,t.start,t.end):t.end,h=this.zx.Qx()?s-t.start:t.start-s,r=this.zx.Qx()?e-t.start:t.start-e,n=Math.min(h,r),o=Math.max(h,r),a=this.zx.oM()?1:-1,l=Math.abs(this.lM-this.aM);this.nm.Ou((this.aM-i)*a).bh((this.lM-i)*a).Gu(100*n/o).zu(o).ah(this.sh).oh(this.eh).Uu(Math.ceil(l/2))}fh(t,i){t.Xs(i),this.ae.ie()}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{fill:this.sh,stroke:this.eh}),this}}class hA extends Xn{constructor(){super(...arguments),this.Lp=!0,this.dM=!0}setAutoScrollingEnabled(t){return this.Lp=t,this.Es.$s.ie(),this}getAutoScrollingEnabled(){return this.Lp}Gp(){}uh(){}$m(){}setCursorEnabled(t){return this.dM=t,this}getCursorEnabled(){return this.dM}}class rA extends hA{constructor(t,i,s,e,h,r){super(i,s,h,r),this.ae=t,this.Es=i,this.scale=e}getAmplitudeMin(){return this.fM?this.fM.min:void 0}getAmplitudeMax(){return this.fM?this.fM.max:void 0}}const nA=(t,i,s,e,h)=>{const r=i.getIcon();return r?t.addRow(r,i.getName()):t.addRow(i.getName()),t.addRow("Angle:","",Math.round(s).toString()).addRow("Amplitude","",h(e))},oA=(t,i)=>{const s=[],e=i.Jx().start,h=i.Jx().end,r=i.Qx(),n=i.oM()?1:-1,o=i.sM(),a=Math.abs(h-e),l=Math.min(e,h)+.001*a,u=Math.max(e,h)-.001*a;for(const i of t){const t=Bh(i.amplitude,l,u),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),c=Math.sin(h*n)*(r?t-e:e-t),d=i.color;s.push({x:a,y:c,color:d})}return s},aA=t=>{const i={min:Or,max:zr};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},lA=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),uA=(t,i)=>{let s=bn(t);for(i.oM()||(s*=-1),s+=180*i.sM()/Math.PI;s<0;)s+=360;s%=360;const e=ln(t),h=i.Jx(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:Hl(h.start,h.end,e/r)}};class cA extends rA{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.At="Heatmap Series",this.AM=!0,this.$p=!1,this.Mm=dA,this.xf=()=>Ar(this.sh);const o=this.Es.getSeries().length;this.sh=yr(this.zs.polarHeatmapSeriesFillStyle||this.zs.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,u={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.Co=u,this.gM=t.vM(e,[],u).ah(this.sh).Xs(this.getHighlight()),this.Zs(this.gM);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),d=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.fM={min:c,max:d},this.setHighlightOnHover(!1)}invalidateIntensityValues(t){if(this.$p&&this.Es.$s.Mo(mc.tA),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.Co.dataOrder?t[0].length:t.length,annuli:"annuli"===this.Co.dataOrder?t.length:t[0].length},s="annuli"===this.Co.dataOrder?this.Co.annuli:this.Co.sectors,e="annuli"===this.Co.dataOrder?this.Co.sectors:this.Co.annuli;if(i.x>s||i.y>e){if(!0===this.Es.HA.To){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ch.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);if(0===(t=h).length||0===t[0].length)return this}this.gM.hb({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.Co.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.Co.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.Co.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,h="annuli"===this.Co.dataOrder?t.iSector:t.iAnnulus,r=h+i.secondary-1,n="annuli"===this.Co.dataOrder?this.Co.annuli-1:this.Co.sectors-1,o="annuli"===this.Co.dataOrder?this.Co.sectors-1:this.Co.annuli-1;if(s<0||h<0){if(!0===this.Es.HA.To){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;Ch.console.warn(i)}return this}if(e>n||r>o){if(!0===this.Es.HA.To){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${h}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Ch.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,u=Math.max(r-o,0),c=[];for(let i=0;i<l;i+=1)c[i]=t.values[i].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.gM.hb({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.ae.ie(),this.$p=!0,this}setFillStyle(t){return this.sh="function"==typeof t?t(this.sh):t,this.gM.ah(this.sh),this.ae.ie(),this}getFillStyle(){return this.sh}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}clear(){return this.gM._i(),this.ae.ie(),this}setCursorInterpolationEnabled(t){return this.AM=t,this.ae.$s.ie(),this}getCursorInterpolationEnabled(){return this.AM}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.gM.sb(t),this.ae.ie(),this}getIntensityInterpolation(){return this.gM.eb()}Dp(){return this.Lp&&this.getVisible()}fh(t,i){t.Xs(i),this.ae.ie()}kd(t,i){const s=Ah(t,this.Es.engine.scale,this.scale),e=uA(s,this.scale),h=this.AM?this.gM.yM(e):this.gM.kd(e);if(h)return Nd(oA([h],this.scale)[0],this.scale,this.Mm(new _d,this,{angleDeg:h.angle,amplitude:h.amplitude,intensity:h.cellValue,iAnnulus:h.iAnnulus,iSector:h.iSector},this.Es.getAmplitudeAxis().formatValue).Pc(),this,this.sh)}solveNearestFromScreen(t){return this.kd(Ac(t,this.Es.$s),!1)}uh(){}attach(t,i=!0,s=!1){return super.attach(t,i),fr(t,this.zs,s,{fill:this.sh}),this}}const dA=(t,i,s,e)=>{const h=i.getIcon();return h?t.addRow(h,i.getName()):t.addRow(i.getName()),t.addRow("Angle:","",Math.round(s.angleDeg).toString()).addRow("Amplitude","",e(s.amplitude)).addRow("Intensity","",s.intensity.toFixed(1))};class fA extends rA{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.At="Line Series",this.mM=[],this.pM=!1,this.SM=!1,this.Mm=nA,this.Wu=yr(this.zs.polarLineSeriesStrokeStyle,r),this.bM=t.Nm(e,void 0,[qd.UserSeries]).ph(this.Wu).Xs(this.getHighlight()).Bl(Va.Nearest),this.Zs(this.bM)}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}setData(t){return 0!==this.mM.length&&this.Es.$s.Mo(mc.tA),this.mM=lA(t),this.pM=!0,this.fM=aA(this.mM),this.ae.ie(),this}setStrokeStyle(t){this.Wu="function"==typeof t?t(this.Wu):t;const i=this.Wu;return this.bM.ph(i),this.ae.ie(),this}getStrokeStyle(){return this.Wu}setConnectDataAutomaticallyEnabled(t){return this.SM=t,this.ae.ie(),this}getConnectDataAutomaticallyEnabled(){return this.SM}Dp(){return this.Lp&&this.mM.length>0&&this.getVisible()}fh(t,i){t.Xs(i),this.ae.ie()}kd(t,i){return this.xM(t,this.bM)}solveNearestFromScreen(t){return this.xM(Ac(t,this.Es.$s),this.bM)}xM(t,i){const s=i.MM(t);if(!s)return;const{angle:e,amplitude:h}=uA(s,this.scale);return Nd(s,this.scale,this.Mm(new _d,this,e,h,this.Es.getAmplitudeAxis().formatValue).Pc(),this,this.Wu.getFillStyle())}uh(){if(this.pM||this.scale._M()){const t=oA(this.mM,this.scale),i=qr(t);this.SM?(t.push({...t[0]}),this.bM.yu(!0)):this.bM.yu(!1),this.bM._i().Gl(t).wa(i),this.pM=!1,this.bM.de()}}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{stroke:this.Wu}),this}}class AA extends rA{constructor(i,s,e,h,r,n,o){super(i,s,e,h,r,o),this.At="Point Line Series",this.mM=[],this.pM=!1,this.SM=!1,this.wM=3,this.Za=0,this.CM=t.PointShape.Circle,this.Mm=nA,this.sh=yr(this.zs.polarPointLineSeriesFillStyle,n),this.Wu=yr(this.zs.polarPointLineSeriesStrokeStyle,n),this.bM=i.Nm(h,void 0,[qd.UserSeries]).ph(this.Wu).Xs(this.getHighlight()).Bl(Va.Nearest),this.Zs(this.bM),this.kM=i.sS(h).ah(this.sh).El(this.CM).Wt(this.wM).Xs(this.getHighlight()).Bl(Va.Nearest),this.Zs(this.kM)}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}setData(t){return 0!==this.mM.length&&this.Es.$s.Mo(mc.tA),this.mM=lA(t),this.pM=!0,this.fM=aA(this.mM),this.ae.ie(),this}setStrokeStyle(t){this.Wu="function"==typeof t?t(this.Wu):t;const i=this.Wu;return this.bM.ph(i),this.ae.ie(),this}getStrokeStyle(){return this.Wu}setPointFillStyle(t){this.sh="function"==typeof t?t(this.sh):t;const i=this.sh;return this.kM.ah(i),this.ae.ie(),this}getPointFillStyle(){return this.sh}setPointSize(t){return this.wM=t,this.kM.Wt(t),this.ae.ie(),this}getPointSize(){return this.wM}setPointShape(t){return this.CM=t,this.kM.El(this.CM),this}getPointShape(){return this.CM}setPointRotation(t){return this.Za=t,this.kM._r(t),this.ae.ie(),this}getPointRotation(){return this.Za}setConnectDataAutomaticallyEnabled(t){return this.SM=t,this.ae.ie(),this}getConnectDataAutomaticallyEnabled(){return this.SM}Dp(){return this.Lp&&this.mM.length>0&&this.getVisible()}fh(t,i){t.Xs(i),this.ae.ie()}kd(t,i){return this.xM(t,this.bM)}solveNearestFromScreen(t){return this.xM(Ac(t,this.Es.$s),this.bM)}xM(t,i){const s=i instanceof ol?i.kd(t):i.MM(t);if(!s)return;const{angle:e,amplitude:h}=uA(s,this.scale);return Nd(s,this.scale,this.Mm(new _d,this,e,h,this.Es.getAmplitudeAxis().formatValue).Pc(),this,"color"in s&&Ve(this.sh)?new Ee({color:s.color}):this.sh)}uh(){if(this.pM||this.scale._M()){const t=oA(this.mM,this.scale),i=qr(t);this.SM?(t.push({...t[0]}),this.bM.yu(!0)):this.bM.yu(!1),this.bM._i().Gl(t).wa(i),this.kM._i().Gl(t).wa(i),this.pM=!1,this.bM.de(),this.kM.de()}}oe(){return this.ee||this.CM}}class gA extends _l{constructor(t,i,s,e,h,r,n,o,a){super(),this.ba=Lr(),this.Ct=new Ze,this.Ps=!1,this.TM=e,this.FM=h,this.IM=r,this.PM=n,this.DM=o,this.ae=t,this.scale=i,this.BM=s,this.zs=a}onHighlight(t){return this.Ct.on("highlight",t)}offHighlight(t){return this.Ct.off(t)}dispose(){return this.BM&&this.BM(this),this.ae.$s.ie(),this.Ct.emit("dispose",this),this.Ps=!0,this}setVisible(t){return super.setVisible(t),this.IM(),this.ae.$s.ie(),this}isDisposed(){return this.Ps}onDispose(t){return this.Ct.on("dispose",t)}offDispose(t){return this.Ct.off(t,"dispose")}setMouseInteractions(t){return this.PM(this,t),this}getMouseInteractions(){return this.DM(this)}}class vA extends gA{constructor(t,i,s,e,h,r,n,o,l,u,c,d,f,A,g,v,y){super(t,i,s,e,h,r,n,o,y),this.LM=1,this.RM=1,this.ae=t,this.scale=i,this.dimensionStrategy=l,this.start=u,this.end=c,this.lowerExtreme=d,this.lowerQuartile=f,this.median=A,this.upperQuartile=g,this.upperExtreme=v,this.boundaries=a(this.dimensionStrategy.toPoint(u,d),this.dimensionStrategy.toPoint(c,v)),this.EM=this.zs.boxSeriesBodyFillStyle,this.OM=this.zs.boxSeriesBodyStrokeStyle,this.Wu=this.zs.boxSeriesStrokeStyle,this.zM=this.zs.boxSeriesMedianStrokeStyle,this.de()}getBoundaries(){return this.boundaries}setBodyWidth(t){return this.LM=t,this.de(),this}getBodyWidth(){return this.LM}setBodyFillStyle(t){return this.EM="function"==typeof t?t(this.EM):t,this.FM(),this}getBodyFillStyle(){return this.EM}setBodyStrokeStyle(t){return this.OM="function"==typeof t?t(this.OM):t,this.FM(),this}getBodyStrokeStyle(){return this.OM}setTailWidth(t){return this.RM=t,this.de(),this}getTailWidth(){return this.RM}setStrokeStyle(t){return this.Wu="function"==typeof t?t(this.Wu):t,this.FM(),this}getStrokeStyle(){return this.Wu}setMedianStrokeStyle(t){return this.zM="function"==typeof t?t(this.zM):t,this.FM(),this}getMedianStrokeStyle(){return this.zM}de(){this.TM()}getDominantStyle(){return this.getBodyFillStyle()}}const yA=(t,i,s)=>{const h=i.ti,r=s.ti;let n=(t.x-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart()),o=(t.y-r.getInnerStart())/(r.getInnerEnd()-r.getInnerStart());return 1===s.zg&&(n=1-n),1===i.zg&&(o=1-o),e(o,n)};class mA extends Td{constructor(t,i,s,e,h,r,n,o){super(t,i,Un(s.ti,e.ti),h,o),this.VM=!1,this.NM=!1,this.GM=!0,this.UM=!0,this.WM=!1,this.YM=!1,this.setGridStrokeYStyle=t=>(this.HM.setGridStrokeStyle(t),this),this.getGridStrokeYStyle=()=>this.HM.getGridStrokeStyle(),this.axisX=s,this.axisY=e,this.jM=r,this.$M=n,this.XM=this.axisX.wv(!1,this.jM).setMouseInteractions(!1).setAllocatesAxisSpace(!1),this.HM=this.axisY.wv(!1,this.$M).setMouseInteractions(!1).setAllocatesAxisSpace(!1)}dispose(){return super.dispose(),this.XM.dispose(),this.HM.dispose(),this}pointAt(t){return super.pointAt(t),this.setPosition(Ah(t.location,t.scale,this.scale)),this}setPosition(t){super.setPosition(t),this.XM.setValue(t.x),this.HM.setValue(t.y);const i=yA(e(this.XM.getValue(),this.HM.getValue()),this.axisX,this.axisY);return this.XM.setGridStrokeLength(this.WM?i.x:1),this.HM.setGridStrokeLength(this.YM?i.y:1),this}uh(){this.XM.setVisible(this.Ds&&this.Pv).setMarkerVisible(this.Ds&&this.Pv&&this.VM),this.HM.setVisible(this.Ds&&this.Pv).setMarkerVisible(this.Ds&&this.Pv&&this.NM);const t=yA(e(this.XM.getValue(),this.HM.getValue()),this.axisX,this.axisY);return this.XM.setGridStrokeLength(this.WM?t.x:1),this.HM.setGridStrokeLength(this.YM?t.y:1),super.uh()}setGridStrokeXCut(t){return this.WM=t,this.ae.ie(),this}getGridStrokeXCut(){return this.WM}setGridStrokeYCut(t){return this.YM=t,this.ae.ie(),this}getGridStrokeYCut(){return this.YM}setGridStrokeXStyle(t){return this.XM.setGridStrokeStyle(t),this}getGridStrokeXStyle(){return this.XM.getGridStrokeStyle()}setTickMarkerXVisible(t){return this.VM=t,this.ae.ie(),this}getTickMarkerXVisible(){return this.VM}setTickMarkerYVisible(t){return this.NM=t,this.ae.ie(),this}getTickMarkerYVisible(){return this.NM}setTickMarkerX(t){return this.XM.setMarker(t),this}setTickMarkerY(t){return this.HM.setMarker(t),this}getTickMarkerX(){return this.XM.getMarker()}getTickMarkerY(){return this.HM.getMarker()}}class pA extends kd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,n),this.WM=!1,this.YM=!1,this.ZM=!1,this.QM=!1,this.JM=new Map,this.KM=new Map,this.VM=!0,this.NM=!0,this.zy=e,this.jM=h,this.$M=r,this.qM=n.cursorGridStrokeStyleX,this.t_=n.cursorGridStrokeStyleY}dispose(){return super.dispose(),this.JM.forEach((t=>t.dispose())),this.KM.forEach((t=>t.dispose())),this.i_=void 0,this.s_=void 0,this}uh(){return this.i_&&this.i_.setVisible(this.Ds&&this.Pv).setMarkerVisible(this.Ds&&this.Pv&&this.VM),this.s_&&this.s_.setVisible(this.Ds&&this.Pv).setMarkerVisible(this.Ds&&this.Pv&&this.NM),super.uh()}pointAt(t){const{location:i}=t,s=t.owner instanceof DA&&t.owner;if(!s)return this;const{axisX:h}=s,{axisY:r}=s,n=this.Qh(h,!0),o=this.Qh(r,!1);n!==this.i_&&this.i_&&this.i_.setVisible(!1),o!==this.s_&&this.s_&&this.s_.setVisible(!1),n.setValue(i.x),o.setValue(i.y);const a=yA(e(i.x,i.y),h,r);return n.setGridStrokeLength(this.WM?a.x:1),o.setGridStrokeLength(this.YM?a.y:1),this.i_=n,this.s_=o,super.pointAt(t)}Uy(t){if(super.Uy(t),t){const i=i=>i.setTextFillStyle(t);this.i_&&this.ZM&&this.i_.setMarker(i),this.s_&&this.QM&&this.s_.setMarker(i)}}Qh(t,i){let s=(i?this.JM:this.KM).get(t);return s||(i?(s=t.wv(!1,this.jM),this.JM.set(t,s)):(s=t.wv(!1,this.$M),this.KM.set(t,s)),this.Hr(s,i),s.setMouseInteractions(!1).setAllocatesAxisSpace(!1)),s}Hr(t,i){const s=i?this.qM:this.t_;return t.setGridStrokeStyle(s),t.setMouseInteractions(!1),(i?this.VM:this.NM)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.WM=t,this.ae.ie(),this}getGridStrokeXCut(){return this.WM}setGridStrokeYCut(t){return this.YM=t,this.ae.ie(),this}getGridStrokeYCut(){return this.YM}setGridStrokeXStyle(t){return this.qM=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.JM.forEach((t=>t.setGridStrokeStyle(this.qM))),this}getGridStrokeXStyle(){return this.qM}setGridStrokeYStyle(t){return this.t_=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.KM.forEach((t=>t.setGridStrokeStyle(this.t_))),this}getGridStrokeYStyle(){return this.t_}setTickMarkerXVisible(t){return this.VM=t,this.ae.ie(),this}getTickMarkerXVisible(){return this.VM}setTickMarkerYVisible(t){return this.NM=t,this.ae.ie(),this}getTickMarkerYVisible(){return this.NM}setTickMarkerX(t){return this.JM.forEach((i=>i.setMarker(t))),this.jM=this.jM.addStyler(t),this.ae.ie(),this}setTickMarkerY(t){return this.KM.forEach((i=>i.setMarker(t))),this.$M=this.$M.addStyler(t),this.ae.ie(),this}setTickMarkerXAutoTextStyle(t){return this.ZM=t,this.ae.ie(),this}getTickMarkerXAutoTextStyle(){return this.ZM}setTickMarkerYAutoTextStyle(t){return this.QM=t,this.ae.ie(),this}getTickMarkerYAutoTextStyle(){return this.QM}}class SA extends Fd{constructor(t,i,s,e){super(t,e),this.zy=t,this.jM=i,this.$M=s,this.Wy=e}}class bA extends SA{constructor(){super(...arguments),this.Hy=(t,i,s,e)=>this.Yy(new pA(t,i,s,this.zy,this.jM,this.$M,e),e),this.addStyler=t=>new bA(this.zy,this.jM,this.$M,this.Wy.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new bA(t,this.jM,this.$M,this.Wy.map((t=>t)))}}class xA extends SA{constructor(){super(...arguments),this.jy=(t,i,s,e,h)=>this.Yy(new mA(t,i,s,e,this.zy,this.jM,this.$M,h),h),this.addStyler=t=>new xA(this.zy,this.jM,this.$M,this.Wy.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new xA(t,this.jM,this.$M,this.Wy.map((t=>t)))}}const MA=new bA(wu,dc.PointableTextBox,dc.PointableTextBox,[(t,i)=>{Dd(t),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Il(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Il(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),_A=new xA(wu,dc.PointableTextBox,dc.PointableTextBox,[(t,i)=>{Bd(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Il(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Il(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),wA=new xA(wu,dc.PointableTextBox,dc.PointableTextBox,[(t,i)=>{((t,i)=>{t.setPointMarker((t=>t.setFillStyle(i.seriesMarkerPointMarkerFillStyle).setSize(i.seriesMarkerPointMarkerSize).setShape(i.seriesMarkerPointMarkerShape))).setResultTable((t=>t.setEffect(!0).setBackground((t=>t)).setOrigin(e(-1,-1)).setMargin(10)))})(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Il(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Il(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),CA=(i,s,e)=>{switch(i){case t.UIVisibilityModes.always:return!0;case t.UIVisibilityModes.never:return!1;case t.UIVisibilityModes.whenDragged:return e;case t.UIVisibilityModes.whenHovered:return s&&!e;case t.UIVisibilityModes.whenHoveredOrDragged:return e||s;case t.UIVisibilityModes.whenNotDragged:return!e;default:return!1}},kA=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class TA{constructor(i,s,h,r,n,o){this.e_=t.UIVisibilityModes.always,this.h_=t.UIVisibilityModes.always,this.Aa=!0,this.Ps=!1,this.r_=!1,this.n_=!1,this.Ha=e(0,0),this.hc=t.UIDraggingModes.draggable,this.rc=void 0,this.Ct=new Ze,this.Ds=!0,this.o_=(i,s,e)=>{this.r_=!0,this.ae.ie();const h=this.hc===t.UIDraggingModes.notDraggable?this.hc:e||this.hc;this.rc=this.ae.$s.wn(h===t.UIDraggingModes.notDraggable?t.MouseStyles.Restricted:h===t.UIDraggingModes.draggable?t.MouseStyles.Move:h===t.UIDraggingModes.onlyHorizontal?t.MouseStyles.Horizontal:t.MouseStyles.Vertical)},this.a_=()=>{this.r_=!1,this.ae.ie(),this.ae.$s.Cn(this.rc)},this.l_=(t,i)=>{this.n_=!0,qh(i),this.ae.ie()},this.u_=(i,s)=>{if(this.hc!==t.UIDraggingModes.notDraggable){const h=s||this.hc,r=Ah(this.ae.$s.Ah(i.x,i.y),this.ae.$s.ti,this.scale),n=e(h!==t.UIDraggingModes.onlyVertical?kA(r.x,this.scale.x):this.Ha.x,h!==t.UIDraggingModes.onlyHorizontal?kA(r.y,this.scale.y):this.Ha.y);return this.setPosition(n),!0}return!1},this.c_=(t,i)=>{this.n_=!1,qh(i),this.ae.ie()},this.onDispose=t=>this.Ct.on("dispose",t),this.offDispose=t=>this.Ct.off(t,"dispose"),this.ae=i,this.renderingScale=s,this.scale=h,this.Mx=r,this.d_=n,this.zs=o;const a=r.getPointMarker().setMouseInteractions(!0);a.onMouseEnter(((t,i)=>this.o_(t,i))),a.onMouseLeave(this.a_),a.onMouseDragStart(this.l_),a.onMouseDrag(((t,i)=>this.u_(e(i.clientX,i.clientY))&&qh(i))),a.onMouseDragStop(this.c_),a.onTouchStart(this.l_),a.onTouchMove(((t,i)=>this.u_(e(i.clientX,i.clientY))&&qh(i))),a.onTouchEnd(this.c_),r.getResultTable().setMouseInteractions(!0),this.setPosition(this.Ha)}setPosition(t){return this.Ha=t,this.Mx.setPosition(t),this.Ct.emit("positionChange",this,this.Ha),this}getPosition(){return this.Ha}onPositionChange(t){return this.Ct.on("positionChange",t)}offPositionChange(t){return this.Ct.off(t,"positionChange")}setPointMarkerVisibility(t){return this.e_=t,this.ae.ie(),this}getPointMarkerVisibility(){return this.e_}setResultTableVisibility(t){return this.h_=t,this.ae.ie(),this}getResultTableVisibility(){return this.h_}setMouseInteractions(t){return this.Aa=t,this.Mx.getPointMarker().setMouseInteractions(t),this.Mx.getResultTable().setMouseInteractions(t),this}getMouseInteractions(){return this.Aa}setAutoFitStrategy(t){return this.Mx.setAutoFitStrategy(t),this}getAutoFitStrategy(){return this.Mx.getAutoFitStrategy()}isAttached(){return!0}uh(){const t=this.isAttached();return CA(this.e_,this.r_,this.n_)?this.Mx.setPointMarkerVisible(!0):this.Mx.setPointMarkerVisible(!1),t&&CA(this.h_,this.r_,this.n_)?this.Mx.setResultTableVisible(!0):this.Mx.setResultTableVisible(!1),this.Mx.uh(),this}de(){return this.Mx.de(),this}pointAt(t){return this.Mx.pointAt(t),this}dispose(){return this.Ps||(this.Ps=!0,this.d_(this),this.Mx.dispose(),this.Ct.emit("dispose")),this}isDisposed(){return this.Ps}setVisible(t){const i=this.Ds!==t;return this.Ds=t,this.Mx.setVisible(t),i&&this.Ct.emit("visibleStateChanged",this,this.Ds),this}getVisible(){return this.Ds}onVisibleStateChanged(t){return this.Ct.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.Ct.off(t,"visibleStateChanged")}setPointMarker(t){return this.Mx.setPointMarker(t),this}getPointMarker(){return this.Mx.getPointMarker()}setResultTable(t){return this.Mx.setResultTable(t),this}getResultTable(){return this.Mx.getResultTable()}setDraggingMode(i=t.UIDraggingModes.notDraggable){return this.hc=i,this.ae.ie(),this}getDraggingMode(){return this.hc}}class FA extends TA{constructor(i,s,h,r,n,o,a){super(i,s,Un(h.ti,r.ti),n.jy(i,s,h,r,a),o,a),this.f_=t.UIVisibilityModes.always,this.A_=t.UIVisibilityModes.always,this.g_=t.UIVisibilityModes.always,this.v_=t.UIVisibilityModes.always,this.gridStrokeStyleX=this.Mx.getGridStrokeXStyle(),this.gridStrokeStyleY=this.Mx.getGridStrokeYStyle(),this.ae=i,this.axisX=h,this.axisY=r,this.d_=o;const l=this.Mx.getTickMarkerX().setMouseInteractions(!0);l.onMouseEnter(((i,s)=>this.o_(i,s,t.UIDraggingModes.onlyHorizontal))),l.onMouseLeave(this.a_),l.onMouseDragStart(this.l_),l.onMouseDrag(((i,s)=>this.u_(e(s.clientX,s.clientY),t.UIDraggingModes.onlyHorizontal)&&qh(s))),l.onMouseDragStop(this.c_),l.onTouchStart(this.l_),l.onTouchMove(((i,s)=>this.u_(e(s.clientX,s.clientY),t.UIDraggingModes.onlyHorizontal)&&qh(s)));const u=this.Mx.getTickMarkerY().setMouseInteractions(!0);u.onMouseEnter(((i,s)=>this.o_(i,s,t.UIDraggingModes.onlyVertical))),u.onMouseLeave(this.a_),u.onMouseDragStart(this.l_),u.onMouseDrag(((i,s)=>this.u_(e(s.clientX,s.clientY),t.UIDraggingModes.onlyVertical)&&qh(s))),u.onMouseDragStop(this.c_),u.onTouchStart(this.l_),u.onTouchMove(((i,s)=>this.u_(e(s.clientX,s.clientY),t.UIDraggingModes.onlyVertical)&&qh(s)))}uh(){const t=this.isAttached();return this.Ds&&t&&CA(this.g_,this.r_,this.n_)?this.Mx.setTickMarkerXVisible(!0):this.Mx.setTickMarkerXVisible(!1),this.Ds&&t&&CA(this.v_,this.r_,this.n_)?this.Mx.setTickMarkerYVisible(!0):this.Mx.setTickMarkerYVisible(!1),this.Mx.setGridStrokeXStyle(this.Ds&&t&&CA(this.f_,this.r_,this.n_)?this.gridStrokeStyleX:ah),this.Mx.setGridStrokeYStyle(this.Ds&&t&&CA(this.A_,this.r_,this.n_)?this.gridStrokeStyleY:ah),super.uh()}setGridStrokeXVisibility(t){return this.f_=t,this.ae.ie(),this}getGridStrokeXVisibility(){return this.f_}setGridStrokeYVisibility(t){return this.A_=t,this.ae.ie(),this}getGridStrokeYVisibility(){return this.A_}setTickMarkerXVisibility(t){return this.g_=t,this.ae.ie(),this}getTickMarkerXVisibility(){return this.g_}setTickMarkerYVisibility(t){return this.v_=t,this.ae.ie(),this}getTickMarkerYVisibility(){return this.v_}setGridStrokeXCut(t){return this.Mx.setGridStrokeXCut(t),this}getGridStrokeXCut(){return this.Mx.getGridStrokeXCut()}setGridStrokeYCut(t){return this.Mx.setGridStrokeYCut(t),this}getGridStrokeYCut(){return this.Mx.getGridStrokeYCut()}setGridStrokeXStyle(t){return this.gridStrokeStyleX="function"==typeof t?t(this.gridStrokeStyleX):t,this}getGridStrokeXStyle(){return this.Mx.getGridStrokeXStyle()}setGridStrokeYStyle(t){return this.gridStrokeStyleY="function"==typeof t?t(this.gridStrokeStyleY):t,this}getGridStrokeYStyle(){return this.Mx.getGridStrokeYStyle()}setTickMarkerX(t){return this.Mx.setTickMarkerX(t),this}getTickMarkerX(){return this.Mx.getTickMarkerX()}setTickMarkerY(t){return this.Mx.setTickMarkerY(t),this}getTickMarkerY(){return this.Mx.getTickMarkerY()}setMouseInteractions(t){return super.setMouseInteractions(t),this.Mx.getTickMarkerX().setMouseInteractions(t),this.Mx.getTickMarkerY().setMouseInteractions(t),this}}class IA extends FA{}class PA extends IA{constructor(t,i,s,e,h,r){super(t,i,s.axisX,s.axisY,e,h,r),this.y_=!1,this.ae=t,this.owningSeries=s}setPosition(t){return super.setPosition(t),this.y_=!1,this.ae.ie(),this}de(){if(!this.y_){const t=this.owningSeries.solveNearestFromScreen(Ah(this.Ha,this.scale,this.ae.$s.ti));t?(this.Ha=Ah(t.location,this.owningSeries.scale,this.scale),this.Mx.pointAt(t),this.y_=!0):this.Mx.setPosition(this.Ha)}return super.de()}isAttached(){return this.y_}}class DA extends hA{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,a,l),this.m_=[],this.addMarker=(t=wA)=>{const i=new PA(this.p_(),this.Es.uiScale,this,t,this.removeMarker,this.zs);return this.m_.push(i),i},this.removeMarker=t=>{const i=this.m_.indexOf(t);-1!==i&&this.m_.splice(i,1)},this.Vs=new Map,this.chart=t,this.ae=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.p_=o,this.scale=Un(e.ti,h.ti),this.S_=t.b_,t.b_+=1,this.x_(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.M_),this.onMouseLeave(this.chart.__),this.onMouseWheel(this.chart.Ep),this.onMouseDragStart(this.chart.w_),this.onMouseDrag(this.chart.Op),this.onMouseDragStop(this.chart.C_),this.onTouchStart(this.chart.zp.onTouchStart),this.onTouchMove(this.chart.zp.onTouchMove),this.onTouchEnd(this.chart.zp.onTouchEnd)}get xAxis(){return this.axisX}get yAxis(){return this.axisY}attacheAxis(){this.k_=this.axisXAttachHandler(this),this.T_=this.axisYAttachHandler(this)}uh(){super.uh();for(let t=0;t<this.m_.length;t+=1)this.m_[t].de().uh()}Zs(t,i){super.Zs(t,i),t.Da(this.S_)}setDrawOrder(t){return this.S_=t.seriesDrawOrderIndex,this.Vs.forEach(((t,i)=>{i.Da(this.S_)})),this.Es.$s.ie(),this}dispose(){return super.dispose(),this.m_.slice().forEach((t=>t.dispose())),this.k_(this),this.T_(this),this}F_(){for(let t=0;t<this.m_.length;t+=1)this.m_[t].setPosition(this.m_[t].getPosition());this.ae.ie()}getBoundaries(){return a(e(this.getXMin()||0,this.getYMin()||0),e(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const BA=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}},LA=(t,i=(t=>t))=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.Rl()),n=e.Ll(),o=n?i(n):[];let a=!1,l=!1;"vu"in e&&(a=e.vu(),l=e.mu()),s.push.apply(s,r.slice(a?1:0,r.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(l?1:0)))}return s},RA=(t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:e+i*s,y:t[s]};return h},EA=(t,i,s,e)=>{const h=i.getIcon();return h?t.addRow(h,i.getName()):t.addRow(i.getName()),t.addRow("X","",i.axisX.formatValue(s)).addRow("Y","",i.axisY.formatValue(e))};class OA extends DA{constructor(i,s,e,h,r,n,o,a,l,u,c){super(i,s,e,h,r,n,o,a,u,c),this.I_=[],this.Ju=[],this.P_=0,this.Bs=!1,this.Is=t.HighlightModes.onHover,this.Mm=EA,this.Es.$s.Mo(mc.Qf),this.D_=l}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.P_=void 0!==i&&i>0?i:0,this.ae.ie(),this}add(t){if(0!==this.I_.length&&this.Es.$s.Mo(mc.tA),Array.isArray(t)?this.B_(t):this.B_([t]),this.Ju.length>0){const t=this.Ju[this.Ju.length-1];this.L_={x:t.x,y:t.y}}return this}addArrayX(t,i=1,s){let e=s;return e||(e=this.L_?this.L_.y+i:0),this.add(((t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:t[s],y:e+i*s};return h})(t,i,e)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.L_?this.L_.x+i:0),this.add(RA(t,i,e)),this}addArraysXY(t,i){if(t.length!==i.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,i)=>{const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]={x:t[e],y:i[e]};return s})(t,i)),this}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}getPointAmount(){return this.I_.reduce(((t,i)=>t+i.Ul()+i.Wl()),this.Ju.length)}clear(){this.R_=void 0;for(let t=0;t<this.I_.length;t+=1)this.I_[t]._i();return this.Ju.length=0,this.L_=void 0,this.ae.ie(),this.Ct.emit("dataClear",this),this}getLastPoint(){return this.L_}Dp(){return this.Lp&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.D_.getXMax(this.I_,this.R_)||0}getXMin(){return this.D_.getXMin(this.I_,this.R_)||0}getYMax(){return this.D_.getYMax(this.I_,this.R_)||0}getYMin(){return this.D_.getYMin(this.I_,this.R_)||0}hn(){const t=e(0,0);for(const i of this.I_)t.x=Math.max(t.x,i.tu()),t.y=Math.max(t.y,i.iu());return t}E_(t,i,s,e){this.D_.E_(t,i,s,e,this.scale,(t=>{}))}Gp(){super.Gp();const t=this.I_.length;this.O_&&this.E_(this.I_,this.getPointAmount(),this.O_,this.P_),t!==this.I_.length&&this.F_()}uh(){super.uh();const t=this.getBoundaries();this.Ju.length>0&&(this.z_(this.Ju),this.Ju=[]);for(const i of this.I_)i.wa(t);return super.uh()}$m(){super.$m(),this.R_=void 0,this.Ju.length=0}B_(t){0!==t.length&&(this.R_?this.R_=sn(this.R_,qr(t)):this.R_=qr(t),this.Ct.emit("dataAdd",this,t,this.R_),this.Ju=lr(this.Ju,t,{canReturnB:!1}),this.ae.ie())}V_(){return LA(this.I_)}N_(t){return this.Ct.on("dataAdd",t)}G_(t){return this.Ct.off(t)}U_(t){return this.Ct.on("dataClear",t)}W_(t){return this.Ct.off(t)}}const zA=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===h||i<n)&&(h=l,r=a,n=i)}}return h&&r?[h,r]:void 0};class VA extends DA{constructor(){super(...arguments),this.Y_=[],this.H_=void 0,this.j_=!1,this.BM=t=>{const i=this.Y_.findIndex((i=>i===t));i>=0&&this.Y_.splice(i,1),this.j_=!0,this.H_=void 0,this.ae.ie()},this.TM=()=>{this.H_=void 0,this.j_=!0,this.Es.$s.ie()},this.FM=()=>{this.j_=!0,this.Es.$s.ie()},this.IM=()=>{this.H_=void 0,this.j_=!0,this.chart.$s.ie()},this.PM=(t,i)=>{this.setMouseInteractions(i)},this.X_=t=>this.getMouseInteractions()}uh(){super.uh(),this.j_&&(this.Z_(this.Y_),this.j_=!1)}clear(){return this.Y_.slice().forEach(Ih),this.Y_.length=0,this.j_=!0,this.H_=void 0,this.ae.ie(),this}Q_(t,i){void 0!==i?this.Y_.splice(i,0,t):this.Y_.push(t),this.j_=!0,this.J_&&this.J_(t),t.onMouseEnter(((t,i)=>this.li(t,i))),t.onMouseLeave(((t,i)=>this.ui(t,i))),t.onMouseClick(((t,i)=>this.ci(t,i))),t.onMouseDoubleClick(((t,i)=>this.di(t,i))),t.onMouseDown(((t,i)=>this.fi(t,i))),t.onMouseUp(((t,i)=>this.Ai(t,i))),t.onMouseMove(((t,i)=>this.gi(t,i))),t.onMouseDragStart(((t,i,s)=>this.yi(t,i,s))),t.onMouseDrag(((t,i,s,e,h)=>this.vi(t,i,s,e,h))),t.onMouseDragStop(((t,i,s,e)=>this.mi(t,i,s,e))),t.onMouseWheel(((t,i)=>this.pi(t,i))),t.onTouchStart(((t,i)=>this.Si(t,i))),t.onTouchMove(((t,i)=>this.bi(t,i))),t.onTouchEnd(((t,i)=>this.xi(t,i))),this.ae.ie()}Dp(){return this.Lp&&this.Y_.length>0&&this.getVisible()}setDefaultStyle(t){this.J_=t,this.Y_.forEach(t),t(this.K_);for(let t=0;t<this.Rs.length;t+=1)this.q_(this.Rs[t]);return this.j_=!0,this.Es.$s.ie(),this}kd(t,i){const s=zA(t,i?this.Y_.filter((t=>t.getVisible()&&t.getIsUnderMouse())):this.Y_.filter((t=>t.getVisible())),this.tw,Zr);if(void 0!==s)return{location:Ah(s[0],this.ae.$s.ti,this.scale),scale:this.scale,resultTableContent:this.Mm(new _d,this,s[1]).Pc(),owner:this,fillStyle:s[1].getDominantStyle(),figure:s[1]}}solveNearestFromScreen(t){return this.kd(Ac(t,this.Es.$s),!1)}getXMax(){return this.H_||(this.H_=this.iw()),this.H_.max.x}getXMin(){return this.H_||(this.H_=this.iw()),this.H_.min.x}getYMax(){return this.H_||(this.H_=this.iw()),this.H_.max.y}getYMin(){return this.H_||(this.H_=this.iw()),this.H_.min.y}hn(){return e(0,0)}iw(){const t=a(h(Or,Or),h(zr,zr));for(let i=0;i<this.Y_.length;i+=1)if(this.Y_[i].getVisible()){const s=this.Y_[i].getBoundaries();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}attach(t,i=!0,s=!1){return super.attach(t,i),this.q_(t,i,s),this}q_(t,i=!0,s=!1){fr(t,this.zs,s,{fill:this.Y_.length>0?this.Y_[0].getDominantStyle():this.K_.getDominantStyle()})}}const NA=(t,i,s)=>t.addRow(i.getName()).addRow("Lower extreme","",s.lowerExtreme.toFixed(2)).addRow("Lower quartile","",s.lowerQuartile.toFixed(2)).addRow("Median","",s.median.toFixed(2)).addRow("Upper quartile","",s.upperQuartile.toFixed(2)).addRow("Upper extreme","",s.upperExtreme.toFixed(2));class GA extends VA{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.At="Box Series",this.Mm=NA,this.sw=Dr(),this.tw=t=>Ah(this.le.toPoint((t.start+t.end)/2,t.median),this.scale,this.ae.$s.ti),this.Es.$s.Mo(mc.Kf),this.le=a,this.K_=new vA(this.ae,this.scale,this.BM,Ph,Ph,Ph,Ph,(t=>!1),this.le,0,0,0,0,0,0,0,this.zs).dispose(),this.ew=new nf((()=>{const t=this.ae.gv(this.scale);return this.Zs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.ph(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Sn();return s.yv(i.start,i.end),s}))))),this.hw=new nf((()=>{const t=this.sw.V(this.ae.Cx(this.scale));return this.Zs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.ah(s.fillStyle).oh(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Sn();return s.Kl(i.vertices),this.sw.Mi(s,i.figure),s})))),(()=>{this.sw._i()}),((t,i)=>{this.Ks(i)}))}x_(t){if(!(t instanceof Nn||t instanceof Gn))throw new Error("BoxSeries only supports Linear Axes")}Z_(t){const i=this.hw.Xm(),s=this.ew.Xm();t.forEach((t=>{if(!t.getVisible())return;const e=this.le.toPoint((t.start+t.end-t.LM*(t.end-t.start))/2,t.lowerQuartile),h=this.le.toPoint((t.end-t.start)*t.LM,t.upperQuartile-t.lowerQuartile),r=this.le.toPoint((t.start+t.end)/2,t.lowerQuartile),n=this.le.toPoint((t.start+t.end)/2,t.lowerExtreme),o=this.le.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.le.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.le.toPoint((t.start+t.end-t.RM*(t.end-t.start))/2,t.lowerExtreme),u=this.le.toPoint((t.start+t.end+t.RM*(t.end-t.start))/2,t.lowerExtreme),c=this.le.toPoint((t.start+t.end-t.RM*(t.end-t.start))/2,t.upperExtreme),d=this.le.toPoint((t.start+t.end+t.RM*(t.end-t.start))/2,t.upperExtreme),f=this.le.toPoint((t.start+t.end-t.LM*(t.end-t.start))/2,t.median),A=this.le.toPoint((t.start+t.end+t.LM*(t.end-t.start))/2,t.median);i.add({ba:t.ba,vertices:[{x:e.x,y:e.y},{x:e.x,y:e.y+h.y},{x:e.x+h.x,y:e.y+h.y},{x:e.x+h.x,y:e.y}],figure:t},{fillStyle:t.EM,strokeStyle:t.OM}),s.add({ba:0,start:r,end:n,figure:t},{strokeStyle:t.Wu}),s.add({ba:0,start:o,end:a,figure:t},{strokeStyle:t.Wu}),s.add({ba:0,start:l,end:u,figure:t},{strokeStyle:t.Wu}),s.add({ba:0,start:c,end:d,figure:t},{strokeStyle:t.Wu}),s.add({ba:0,start:f,end:A,figure:t},{strokeStyle:t.zM})})),i.finishPlot(),s.finishPlot()}add(t){const i=new vA(this.ae,this.scale,this.BM,this.TM,this.FM,this.IM,this.PM,this.X_,this.le,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.zs);return this.Q_(i),this.j_=!0,this.Es.$s.ie(),i}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}}class UA extends gA{constructor(t,i,s,h,r,n,o,l,u,c){super(t,i,s,h,r,n,o,l,u),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.wl=a(e(0,0),e(0,0)),this.ae=t,this.scale=i,this.sh=yr(u.ellipseSeriesFillStyle,c),this.eh=yr(u.ellipseSeriesStrokeStyle,c)}getBoundaries(){return this.wl}setDimensions(t){return this.dimensions=t,this.wl=a(e(t.x-t.radiusX,t.y-t.radiusY),e(t.x+t.radiusX,t.y+t.radiusY)),this.TM(),this.ae.ie(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.sh="function"==typeof t?t(this.sh):t,this.FM(),this}getFillStyle(){return this.sh}setStrokeStyle(t){return this.eh="function"==typeof t?t(this.eh):t,this.FM(),this}getStrokeStyle(){return this.eh}getDominantStyle(){return this.sh}}class WA extends VA{constructor(t,i,s,h,r,n,o,a,l,u,c){super(t,i,s,h,r,n,o,a,l,u),this.At="Ellipse Series",this.Mm=(t,i,s)=>t.addRow(i.At).addRow("X","",i.axisX.formatValue(s.getDimensions().x)).addRow("Y","",i.axisY.formatValue(s.getDimensions().y)).addRow("Radius X","",i.axisX.formatValue(s.getDimensions().radiusX)).addRow("Radius Y","",i.axisY.formatValue(s.getDimensions().radiusY)),this.sw=Dr(),this.tw=t=>{const i=t.getDimensions(),s=e(i.x,i.y);return Ah(s,this.scale,this.ae.$s.ti)},this.Es.$s.Mo(mc.Kf),this.rw=c,this.K_=new UA(this.ae,this.scale,Ph,Ph,Ph,Ph,Ph,(t=>!1),this.zs,this.rw).dispose(),this.hw=new nf((()=>{const t=this.sw.V(this.ae.Cx(this.scale));return this.Zs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.ah(s.fillStyle).oh(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Sn();return s.Kl(i.vertices),this.sw.Mi(s,i.figure),s})))),(()=>{this.sw._i()}),((t,i)=>{this.Ks(i)}))}x_(t){if(!(t instanceof Nn||t instanceof Gn))throw new Error("EllipseSeries only supports Linear Axes")}Z_(t){const i=this.hw.Xm();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=[],h=void 0!==s.drawSteps?s.drawSteps:72;for(let t=0;t<=h;t+=1){const i=t/h*2*Math.PI,r=s.x+s.radiusX*Math.cos(i),n=s.y+s.radiusY*Math.sin(i);e.push({x:r,y:n})}const r=t.getFillStyle(),n=t.getStrokeStyle();i.add({ba:t.ba,vertices:e,figure:t},{fillStyle:r,strokeStyle:n})})),i.finishPlot()}add(t){const i=new UA(this.ae,this.scale,this.BM,this.TM,this.FM,this.IM,this.PM,this.X_,this.zs,this.rw).setDimensions(t);return this.Q_(i),this.j_=!0,this.Es.$s.ie(),i}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}}class YA extends gA{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a),this.nw=[],this.wl=Vr,this.ae=t,this.scale=i,this.sh=yr(a.polygonSeriesFillStyle,l),this.eh=yr(a.polygonSeriesStrokeStyle,l)}getBoundaries(){return this.wl}setDimensions(t){return this.nw=t,this.wl=qr(this.nw),this.TM(),this.ae.ie(),this}getDimensions(){return this.nw}setFillStyle(t){return this.sh="function"==typeof t?t(this.sh):t,this.FM(),this}getFillStyle(){return this.sh}setStrokeStyle(t){return this.eh="function"==typeof t?t(this.eh):t,this.FM(),this}getStrokeStyle(){return this.eh}getDominantStyle(){return this.sh}}class HA extends VA{constructor(t,i,s,h,r,n,o,a,l,u,c){super(t,i,s,h,r,n,o,a,l,u),this.At="Polygon Series",this.Mm=(t,i,s)=>t.addRow(i.getName()),this.sw=Dr(),this.tw=t=>{const i=t.getBoundaries(),s=e((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return Ah(s,this.scale,this.ae.$s.ti)},this.Es.$s.Mo(mc.Kf),this.rw=c,this.K_=new YA(this.ae,this.scale,Ph,Ph,Ph,Ph,Ph,(t=>!1),this.zs,this.rw).dispose(),this.hw=new nf((()=>{const t=this.sw.V(this.ae.Cx(this.scale));return this.Zs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.ah(s.fillStyle).oh(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Sn();return s.Kl(i.vertices),this.sw.Mi(s,i.figure),s})))),(()=>{this.sw._i()}),((t,i)=>{this.Ks(i)}))}x_(t){}Z_(t){const i=this.hw.Xm();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({ba:t.ba,vertices:s,figure:t},{fillStyle:e,strokeStyle:h})})),i.finishPlot()}add(t){const i=new YA(this.ae,this.scale,this.BM,this.TM,this.FM,this.IM,this.PM,this.X_,this.zs,this.rw).setDimensions(t);return this.Q_(i),this.j_=!0,this.Es.$s.ie(),i}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}}class jA extends gA{constructor(t,i,s,h,r,n,o,l,u,c){super(t,i,s,h,r,n,o,l,u),this.ow={x:0,y:0,width:0,height:0},this.aw={x1:0,y1:0,x2:0,y2:0},this.wl=a(e(0,0),e(0,0)),this.sh=yr(u.rectangleSeriesFillStyle,c),this.ae=t,this.scale=i,this.eh=yr(u.rectangleSeriesStrokeStyle,c)}getBoundaries(){return this.wl}setDimensions(t){return"x"in t?(this.ow=t,this.aw={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.aw=t,this.ow={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.wl=qr([this.ow,e(this.ow.x+this.ow.width,this.ow.y+this.ow.height)]),this.TM(),this.ae.ie(),this}getDimensionsPositionAndSize(){return this.ow}getDimensionsTwoPoints(){return this.aw}setFillStyle(t){return this.sh="function"==typeof t?t(this.sh):t,this.FM(),this}getFillStyle(){return this.sh}setStrokeStyle(t){return this.eh="function"==typeof t?t(this.eh):t,this.FM(),this}getStrokeStyle(){return this.eh}getDominantStyle(){return this.sh}}class $A extends VA{constructor(t,i,s,h,r,n,o,a,l,u,c){super(t,i,s,h,r,n,o,a,l,u),this.At="Rectangle Series",this.Mm=(t,i,s)=>{const e=s.getDimensionsPositionAndSize();return t.addRow(i.At).addRow("X","",i.axisX.formatValue(e.x)).addRow("Y","",i.axisX.formatValue(e.y)).addRow("Width","",i.axisX.formatValue(e.width)).addRow("Height","",i.axisX.formatValue(e.height))},this.sw=Dr(),this.tw=t=>{const i=t.getDimensionsPositionAndSize(),s=e(i.x+i.width/2,i.y+i.height/2);return Ah(s,this.scale,this.ae.$s.ti)},this.Es.$s.Mo(mc.Kf),this.rw=c,this.K_=new jA(this.ae,this.scale,Ph,Ph,Ph,Ph,Ph,(t=>!1),this.zs,this.rw).dispose(),this.hw=new nf((()=>{const t=this.sw.V(this.ae.Cx(this.scale));return this.Zs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.ah(s.fillStyle).oh(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Sn();return s.Kl(i.vertices),this.sw.Mi(s,i.figure),s})))),(()=>{this.sw._i()}),((t,i)=>{this.Ks(i)}))}x_(t){}Z_(t){const i=this.hw.Xm();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensionsTwoPoints(),e=[{x:s.x1,y:s.y1},{x:s.x1,y:s.y2},{x:s.x2,y:s.y2},{x:s.x2,y:s.y1}],h=t.getFillStyle(),r=t.getStrokeStyle();i.add({ba:t.ba,vertices:e,figure:t},{fillStyle:h,strokeStyle:r})})),i.finishPlot()}add(t){const i=new jA(this.ae,this.scale,this.BM,this.TM,this.FM,this.IM,this.PM,this.X_,this.zs,this.rw).setDimensions(t);return this.Q_(i),this.j_=!0,this.Es.$s.ie(),i}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}}class XA extends gA{constructor(t,i,s,h,r,n,o,l,u,c){super(t,i,s,h,r,n,o,l,u),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.wl=a(e(0,0),e(0,0)),this.zs=u,this.ae=t,this.scale=i,this.eh=yr(u.segmentSeriesStrokeStyle,c)}getBoundaries(){return this.wl}setDimensions(t){return this.dimensions=t,this.wl=a(e(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),e(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.TM(),this.ae.ie(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.eh="function"==typeof t?t(this.eh):t,this.FM(),this}getStrokeStyle(){return this.eh}getDominantStyle(){const t=this.eh;return t!==ah?t.getFillStyle():De}}class ZA extends VA{constructor(t,i,s,h,r,n,o,a,l,u,c){super(t,i,s,h,r,n,o,a,l,u),this.At="Segment Series",this.Mm=(t,i,s)=>t.addRow(i.At).addRow("Start",i.axisX.formatValue(s.getDimensions().startX),",",i.axisY.formatValue(s.getDimensions().startY)).addRow("End",i.axisX.formatValue(s.getDimensions().endX),",",i.axisY.formatValue(s.getDimensions().endY)),this.lw=Dr(),this.tw=t=>{const i=t.getDimensions(),s=e((i.startX+i.endX)/2,(i.startY+i.endY)/2);return Ah(s,this.scale,this.ae.$s.ti)},this.Es.$s.Mo(mc.Kf),this.rw=c,this.K_=new XA(this.ae,this.scale,Ph,Ph,Ph,Ph,Ph,(t=>!1),this.zs,this.rw).dispose(),this.ew=new nf((()=>{const t=this.lw.V(this.ae.gv(this.scale));return this.Zs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.ph(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Sn();return s.yv(i.start,i.end),this.lw.Mi(s,i.figure),s})))),(()=>{this.lw._i()}),((t,i)=>{this.Ks(i)}))}x_(t){}Z_(t){const i=this.ew.Xm();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e={x:s.startX,y:s.startY},h={x:s.endX,y:s.endY},r=t.getStrokeStyle();i.add({ba:t.ba,start:e,end:h,figure:t},{strokeStyle:r})})),i.finishPlot()}add(t){const i=new XA(this.ae,this.scale,this.BM,this.TM,this.FM,this.IM,this.PM,this.X_,this.zs,this.rw).setDimensions(t);return this.Q_(i),this.j_=!0,this.Es.$s.ie(),i}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}}const QA=(t,i,s)=>{const e=i.getIcon();return e?t.addRow(e,i.getName()):t.addRow(i.getName()),t.addRow("X:","",i.axisX.formatValue(s.x)).addRow("Y:","",i.axisY.formatValue(s.y)).addRow("Intensity:","",s.intensity.toFixed(1))};class JA extends DA{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.At="Heatmap Grid Series",this.Mm=QA,this.AM=!1,this.XS={},this.Es.$s.Mo(mc.Jf),this.uw=a,this.zs=l;const d=c;this.sh=yr(l.heatmapGridSeriesFillStyle,d),this.ZS=yr(this.zs.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows};this.Co=f,this.cw=this.ae.dw(this.scale,[],f).ah(this.sh).QS(this.ZS).Xs(this.getHighlight()),this.Zs(this.cw),a.start&&this.setStart(a.start),a.end&&this.setEnd(a.end),a.step&&this.setStep(a.step),this.setHighlightOnHover(!1)}KS(){const t=this.XS.start||{x:0,y:0};let i;i=this.XS.end?{x:(this.XS.end.x-t.x)/this.Co.columns,y:(this.XS.end.y-t.y)/this.Co.rows}:this.XS.step?this.XS.step:{x:1,y:1},this.cw.qS(t,i),this.Es.$s.ie()}setStart(t){return this.XS.start=t,this.KS(),this}getStart(){return this.cw.tb().start}setStep(t){return this.XS.step=t,this.KS(),this}getStep(){return this.cw.tb().step}setEnd(t){return this.XS.end=t,this.KS(),this}getEnd(){return this.cw.tb().end}clear(){return this.cw._i(),this.ae.ie(),this.Ct.emit("dataClear",this),this}setWireframeStyle(t){return this.ZS="function"==typeof t?t(this.ZS):t,this.cw.QS(this.ZS),this.ae.ie(),this.Ct.emit("styleChange",this),this}getWireframeStyle(){return this.ZS}setCursorInterpolationEnabled(t){return this.AM=t,this.ae.$s.ie(),this}getCursorInterpolationEnabled(){return this.AM}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.cw.sb(t),this.ae.ie(),this.Ct.emit("styleChange",this),this}getIntensityInterpolation(){return this.cw.eb()}Dp(){return this.Lp&&this.getVisible()}xf(){return Ar(this.sh)}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{fill:this.sh}),this}fw(t){this.cw.fw().forEach((i=>{t.cw.hb(i)}))}W_(t){return this.Ct.off(t)}U_(t){return this.Ct.on("dataClear",t)}Aw(t){return this.Ct.on("styleChange",t)}gw(t){return this.Ct.off(t)}kd(t,i,s=this.AM){const e=Ah(t,this.ae.$s.ti,this.scale),h=i?this.cw.getIsUnderMouse()?this.cw:void 0:this.cw;if(!h)return;const r=s?h.yM(e):h.kd(e);if(r){const t={x:r.x,y:r.y,column:r.column,row:r.column,intensity:r.cellValue};return{location:t,scale:this.scale,resultTableContent:this.Mm(new _d,this,t).Pc(),owner:this}}}solveNearestFromScreen(t,i=this.AM){return this.kd(Ac(t,this.Es.$s),!1,i)}getXMax(){const t=this.cw;return t?t.ni():void 0}getXMin(){const t=this.cw;return t?t.ri():void 0}getYMax(){const t=this.cw;return t?t.ai():void 0}getYMin(){const t=this.cw;return t?t.oi():void 0}hn(){const t=e(0,0);return t.x=Math.max(t.x,this.cw.tu()),t.y=Math.max(t.y,this.cw.iu()),t}x_(t){if(!(t instanceof Nn))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Nn&&t.us())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}fh(t,i){t.Xs(i),this.ae.ie()}uh(){return super.uh(),this.cw.wa(this.getBoundaries()),this}}class KA extends JA{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.$p=!1,this.Mm=QA}invalidateIntensityValues(t){if(this.$p&&this.Es.$s.Mo(mc.tA),Array.isArray(t)){if(0===t.length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Co.dataOrder?t.length:t[0].length,rows:"rows"===this.Co.dataOrder?t.length:t[0].length},s="columns"===this.Co.dataOrder?this.Co.columns:this.Co.rows,e="columns"===this.Co.dataOrder?this.Co.rows:this.Co.columns;if(i.x>s||i.y>e){if(!0===this.chart.HA.To){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Co.columns}x${this.Co.rows}, input ${i.columns}x${i.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ch.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.cw.hb({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Co.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Co.dataOrder?t.values.length:t.values[0].length},s="columns"===this.Co.dataOrder?t.iColumn:t.iRow,e=s+i.primary-1,h="columns"===this.Co.dataOrder?t.iRow:t.iColumn,r=h+i.secondary-1,n=("columns"===this.Co.dataOrder?this.Co.columns:this.Co.rows)-1,o=("columns"===this.Co.dataOrder?this.Co.rows:this.Co.columns)-1;if(s<0||h<0){if(!0===this.chart.HA.To){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Ch.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.HA.To){const s=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Co.columns}x${this.Co.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Ch.console.warn(s)}const s=Math.max(e-n,0),h=i.primary-s,a=Math.max(r-o,0),l=[];for(let i=0;i<h;i+=1)l[i]=t.values[i].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.cw.hb({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Ct.emit("invalidateIntensity",this,t),this.ae.ie(),this.$p=!0,this}setFillStyle(t){return this.sh="function"==typeof t?t(this.sh):t,this.cw.ah(this.sh),this.Ct.emit("styleChange",this),this.ae.ie(),this}getFillStyle(){return this.sh}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}yw(t){return this.Ct.on("invalidateIntensity",t)}mw(t){return this.Ct.off(t)}}class qA extends DA{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.At="Scrolling Heatmap Grid Series",this.Mm=QA,this.AM=!1,this.XS={},this.Es.$s.Mo(mc.Jf),this.Es.$s.Mo(mc.tA);const d=c;this.sh=yr(l.heatmapScrollingGridSeriesFillStyle,d),this.ZS=yr(this.zs.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.Co=f,this.pw=this.ae.Sw(this.scale,[],f).ah(this.sh).QS(this.ZS).Xs(this.getHighlight()),this.Zs(this.pw),a.start&&this.setStart(a.start),a.step&&this.setStep(a.step),this.setHighlightOnHover(!1)}KS(){const t=this.XS.start||{x:0,y:0};let i;i=this.XS.step?this.XS.step:{x:1,y:1},this.pw.qS(t,i),this.Es.$s.ie()}setStart(t){return this.XS.start=t,this.KS(),this}getStart(){return this.pw.tb().start}setStep(t){return this.XS.step=t,this.KS(),this}getStep(){return this.pw.tb().step}clear(){return this.pw._i(),this.ae.ie(),this}setWireframeStyle(t){return this.ZS="function"==typeof t?t(this.ZS):t,this.pw.QS(this.ZS),this.ae.ie(),this}getWireframeStyle(){return this.ZS}setPixelInterpolationMode(t){return t=t||"disabled",this.pw.sb(t),this.ae.ie(),this}getPixelInterpolationMode(){return this.pw.eb()}setCursorInterpolationEnabled(t){return this.AM=t,this.ae.$s.ie(),this}getCursorInterpolationEnabled(){return this.AM}setCursorEnabled(t){return super.setCursorEnabled(t)}setDataCleaning(t){return this.pw.qu(t),this.ae.ie(),this}Dp(){return this.Lp&&this.getVisible()}xf(){return Ar(this.sh)}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{fill:this.sh}),this}ah(t){return this.sh="function"==typeof t?t(this.sh):t,this.pw.ah(this.sh),this.ae.ie(),this}kd(t,i,s=this.AM){const e=Ah(t,this.ae.$s.ti,this.scale),h=i?this.pw.getIsUnderMouse()?this.pw:void 0:this.pw;if(!h)return;const r=s?h.yM(e):h.kd(e);return r?Nd(r,this.scale,this.Mm(new _d,this,{x:r.x,y:r.y,column:r.column,row:r.column,intensity:r.cellValue}).Pc(),this):void 0}solveNearestFromScreen(t,i=this.AM){return this.kd(Ac(t,this.Es.$s),!1,i)}x_(t){if(!(t instanceof Nn))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Nn&&t.us())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.pw.ni()||0}getXMin(){return this.pw.ri()||0}getYMax(){return this.pw.ai()||0}getYMin(){return this.pw.oi()||0}hn(){const t=e(0,0);return t.x=Math.max(t.x,this.pw.tu()),t.y=Math.max(t.y,this.pw.iu()),t}fh(t,i){t.Xs(i),this.ae.ie()}}class tg extends qA{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.Mm=QA}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.Co.scrollDimension?t.length:t[0].length,"rows"===this.Co.scrollDimension?t.length:t[0].length,0+s-1),h=this.Co.resolution-1;if(e>h){if(!0===this.chart.HA.To){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.Co.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ch.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.pw.lb(t),this.ae.ie(),this}invalidateIntensityValues(t){return this.pw.hb(t.iSample,t.values),this.ae.ie(),this}getSampleCount(){return this.pw.bw()}setFillStyle(t){return this.ah(t),this}getFillStyle(){return this.sh}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}}class ig extends DA{constructor(){super(...arguments),this.I_=[],this.Ju=[],this.xw=[],this.Mw=[],this.O_=1e3,this.P_=0,this.Is=t.HighlightModes.onHover,this.hu={type:"disabled",packager:(t,i,s)=>t.slice()},this.AM=!0,this._w=[],this.ww=[],this.Cw=!1,this.xf=()=>Ar(this.kw)||Ar(this.Tw),this.Fw=t=>{const i=t.length;if(this.I_.length>0){const s=this.I_.length-1,h=this.I_[s];if(i>0){const[i,s]=h.Rl(),[n,o]=h.Ll();if((n?i.length+n.length:i.length)>=this.O_){const l=n&&n.length>0?n[n.length-1]:i[i.length-1],u=o&&o.length>0?o[o.length-1]:s[i.length-1],c=(l.x+t[0].position)/2,d=yn(c,l,e(t[0].position,t[0].high)).y,f=yn(c,u,e(t[0].position,t[0].low)).y,A=r(c,d,f);h.Gl(A,a(e(c,f),e(c,d))).yu(!0),this.Iw([A].concat(t)).gu(!0)}else h.Gl(t)}}else i>0&&this.Iw(t)},this.Pw=t=>{const i=this._w,s=t.length;if(this._w.length>0){if(s>0){const s=i[i.length-1],h=s.Rl(),r=s.Ll();if(h.length+r.length>=this.O_){const n=r.length>0?r[r.length-1]:h[h.length-1],o=(n.x+t[0].x)/2,l=yn(o,n,e(t[0].x,t[0].y)).y,u=e(o,l);s.Gl(u,a(e(o,l),e(o,l))).yu(!0),i.push(this.Dw([u].concat(t),this.R_).gu(!0))}else s.Gl(t)}}else s>0&&i.push(this.Dw(t))},this.Bw=t=>{const i=this.ww,s=t.length;if(this.ww.length>0){if(s>0){const s=i[i.length-1],h=s.Rl(),r=s.Ll();if(h.length+r.length>=this.O_){const n=r.length>0?r[r.length-1]:h[h.length-1],o=(n.x+t[0].x)/2,l=yn(o,n,e(t[0].x,t[0].y)).y,u=e(o,l);s.Gl(u,a(e(o,l),e(o,l))).yu(!0),i.push(this.Lw([u].concat(t)).gu(!0))}else s.Gl(t)}}else s>0&&i.push(this.Lw(t))},this.Rw=(t,i)=>{const s=t.MM(i);if(s)return[Ah(s[0],this.scale,this.ae.$s.ti),Ah(s[1],this.scale,this.ae.$s.ti)]},this.Ew=(t,i)=>{const s=t.Ow(i);if(s)return[Ah(s[0],this.scale,this.ae.$s.ti),Ah(s[1],this.scale,this.ae.$s.ti)]}}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.P_=void 0!==i&&i>0?i:0,this.ae.ie(),this}clear(){for(let t=0;t<this.I_.length;t+=1)this.I_[t].dispose();for(let t=0;t<this._w.length;t+=1)this._w[t].dispose();for(let t=0;t<this.ww.length;t+=1)this.ww[t].dispose();return this.Ju.length=0,this.xw.length=0,this.Mw.length=0,this.R_=void 0,this.I_.length=0,this._w.length=0,this.ww.length=0,this.ae.ie(),this.Ct.emit("dataClear",this),this}getPointAmount(){return this.I_.reduce(((t,i)=>t+i.Ul()+i.Wl()),this.Ju.length)}setCursorInterpolationEnabled(t){return this.AM=t,this.ae.$s.ie(),this}getCursorInterpolationEnabled(){return this.AM}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}setCursorEnabled(t){return super.setCursorEnabled(t)}getCursorResultTableFormatter(){return this.Mm}getXMax(){return Yh(this.I_,Oh,Math.max,Gh,this.R_)||0}getXMin(){return Yh(this.I_,Eh,Math.min,Nh,this.R_)||0}getYMax(){return Yh(this.I_,Vh,Math.max,Wh,this.R_)||0}getYMin(){return Yh(this.I_,zh,Math.min,Uh,this.R_)||0}hn(){const t=e(0,0);for(const i of this.I_)t.x=Math.max(t.x,i.tu()),t.y=Math.max(t.y,i.iu());return t}Dp(){return this.Lp&&this.getPointAmount()>0&&this.getVisible()}x_(t){}B_(t,i,s){this.Ju=lr(this.Ju,t,{canReturnB:!1}),this.xw=lr(this.xw,i,{canReturnB:!1}),this.Mw=lr(this.Mw,s,{canReturnB:!1}),this.ae.ie()}zw(t,i,s,e){this.Vw(i,s,e),this.B_(Array.isArray(t)?t:[t],i,s)}Vw(t,i,s){const e=sn(qr(t),qr(i));this.R_?this.R_=sn(this.R_,e):this.R_=e,s&&(this.R_=sn(this.R_,s))}Nw(){const t=this.I_.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.ts(this.I_[e].ni(),this.I_[e].tu())<i&&(s+=1);return s}E_(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}Gw(t){const i=this.I_.length>0?this.I_[this.I_.length-1]:void 0,s=i?i.Rl()[0].length+(i.Ll()[0]?i.Ll()[0].length:0):void 0;BA(t,s,this.O_,this.Fw)}Uw(t){const i=this._w.length>0?this._w[this._w.length-1].Rl().length+this._w[this._w.length-1].Ll().length:void 0;BA(t,i,this.O_,this.Pw)}Ww(t,i){const s=this._w.length>0?this._w[this._w.length-1].Rl().length+this._w[this._w.length-1].Ll().length:void 0;BA(t,s,this.O_,this.Pw),BA(i,s,this.O_,this.Bw)}Iw(t,i){const s=this.ae.Yw(this.scale).Gl(t,i).ah(this.kw).fu(this.Tw).cu(this.hu).Xs(this.getHighlight());return this.I_.push(s),this.Zs(s),s}Hw(t,i,s){const e=this.ae.Nm(this.scale,void 0,[qd.UserSeries]).Gl(t,s).setMouseInteractions(!1).ph(i).Xs(this.getHighlight());return this.Zs(e),e}Dw(t,i){return this.Hw(t,this.jw,i)}Lw(t,i){return this.Hw(t,this.$w,i)}Xw(t){this.kw="function"==typeof t?t(this.kw):t;const i=this.kw;for(let t=0;t<this.I_.length;t+=1)this.I_[t].ah(i);this.ae.ie()}Zw(t){this.Tw="function"==typeof t?t(this.Tw):t;const i=this.Tw;for(let t=0;t<this.I_.length;t+=1)this.I_[t].fu(i);this.ae.ie()}Qw(){return this.kw}Au(){return this.Tw}Jw(t){this.jw="function"==typeof t?t(this.jw):t;const i=this.jw;for(let t=0;t<this._w.length;t+=1)this._w[t].ph(i);this.ae.ie()}Kw(t){this.$w="function"==typeof t?t(this.$w):t;const i=this.$w;for(let t=0;t<this.ww.length;t+=1)this.ww[t].ph(i);this.ae.ie()}qw(){return this.jw}tC(){return this.$w}fh(t,i){t.Xs(i),this.iC(i),this.ae.ie()}iC(t){for(let i=0;i<this._w.length;i+=1)this._w[i].Xs(t);for(let i=0;i<this.ww.length;i+=1)this.ww[i].Xs(t)}Gp(){if(super.Gp(),this.Cw=!1,this.P_>0){const t=this.I_.length,i=this.Nw();this.E_(this.I_,this.O_,this.P_,i);const s=this.I_.length;this._w.length>0&&this.E_(this._w,this.O_,this.P_,i),this.ww.length>0&&this.E_(this.ww,this.O_,this.P_,i),t!==s&&this.F_(),this.Cw=!0}}uh(){if(super.uh(),this.Ju.length>0&&(this.Gw(this.Ju),this.sC(this.xw,this.Mw),this.Cw=!0),this.Cw){const t=this.getBoundaries();for(const i of this.I_)i.wa(t);for(const i of this._w)i.wa(t);for(const i of this.ww)i.wa(t)}}$m(){this.R_=void 0,this.Ju.length=0,this.xw.length=0,this.Mw.length=0}kd(t,i,s=this.AM){const e=((t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=Zr(t,a[0]),s=Zr(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0})(t,i?this.I_.filter((t=>t.getIsUnderMouse())):this.I_,s?this.Ew:this.Rw);if(void 0!==e&&void 0!==e[0]){const t=Ah(e[0][0],this.ae.$s.ti,this.scale),i=Ah(e[0][1],this.ae.$s.ti,this.scale);return Nd(t,this.scale,this.Mm(new _d,this,t.x,t.y,i.y).Pc(),this,e[1].pr())}}solveNearestFromScreen(t,i=this.AM){return this.kd(Ac(t,this.Es.$s),!1,i)}}const sg=(t,i,s,e,h)=>{const r=i.getIcon();return r?t.addRow(r,i.getName()):t.addRow(i.getName()),t.addRow("Position","",i.axisX.formatValue(s)).addRow("Value","",i.axisY.formatValue(e)).addRow("Base","",i.axisY.formatValue(h))};class eg extends ig{constructor(t,i,s,e,h,r,n,o,a=0,l,u){super(t,i,s,e,h,r,n,o,l,u),this.At="Area Series",this.Mm=sg,this.Es.$s.Mo(mc.Qf),this.eC=a}add(t){0!==this.I_.length&&this.Es.$s.Mo(mc.tA);const i=Array.isArray(t)?t:[t];if(i.length>0){const t=this.hC(i),[s,h]=this.rC(t);this.zw(t,s,h,a(e(Or,this.eC),e(zr,this.eC)));const r=this.Ju[this.Ju.length-1];this.L_=r?{position:r.position,high:r.high,low:r.low}:void 0,this.Ct.emit("dataAdd",this,i,this.R_)}return this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.L_?this.L_.position+i:0),this.add(RA(t,i,e)),this}N_(t){return this.Ct.on("dataAdd",t)}G_(t){return this.Ct.off(t)}U_(t){return this.Ct.on("dataClear",t)}W_(t){return this.Ct.off(t)}}class hg extends eg{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.kw=yr(this.zs.areaSeriesBipolarHighFillStyle,c),this.jw=yr(this.zs.areaSeriesBipolarHighStrokeStyle,c),this.Tw=yr(this.zs.areaSeriesBipolarLowFillStyle,c),this.$w=yr(this.zs.areaSeriesBipolarLowStrokeStyle,c)}hC(t){return this.nC(t)}sC(t,i){return this.Ww(t,i)}nC(t){let i=0;const s=[],e=t.length,h=this.eC;return e>0&&(this.oC&&(this.oC.y<=h&&h<=t[0].y||this.oC.y>=h&&h>=t[0].y)&&(s[i]=r(.5*(this.oC.x+t[0].x),h,h),i+=1),this.oC=t[e-1],1===e?this.aC(t[0],s,i):this.lC(t,s)),s}aC(t,i,s=0){return i[s]=r(t.x,t.y,this.eC),s+1}lC(t,i){let s=0,e=0;const h=t.length-1,n=this.eC;for(;e<h;){const h=t[e],o=t[e+=1],a=r(h.x,h.y,n);if(0!==s&&Hh(i[s-1],a)||(i[s]=a,s+=1),h.y<=n&&n<=o.y||h.y>=n&&n>=o.y){const t=h.y,e=o.y,a=n,l=t===e?o.x:Hl(h.x,o.x,(a-t)/(e-t));i[s]=r(l,n,n),s+=1}i[s]=r(o.x,o.y,n),s+=1}return s}rC(t){const i=t.length,s=Array(i),h=Array(i),r=this.eC;for(let n=0;n<i;n+=1){const i=t[n];i.high>r?(s[n]=e(i.position,i.high),h[n]=e(i.position,r)):i.high<r?(s[n]=e(i.position,r),h[n]=e(i.position,i.high)):(s[n]=e(i.position,i.high),h[n]=e(i.position,i.high))}return[s,h]}V_(){return LA(this.I_,(t=>t[0]))}setPositiveFillStyle(t){return this.Xw(t),this}setNegativeFillStyle(t){return this.Zw(t),this}setPositiveStrokeStyle(t){return this.Jw(t),this}setNegativeStrokeStyle(t){return this.Kw(t),this}getPositiveFillStyle(){return this.Qw()}getNegativeFillStyle(){return this.Au()}getPositiveStrokeStyle(){return this.qw()}getNegativeStrokeStyle(){return this.tC()}attach(t,i=!0,s=!1){return fr(t,this.zs,s,{fill:this.kw,fill2:this.Tw,behavior:{colorStep:!0}}),super.attach(t,i,s)}}class rg extends eg{constructor(){super(...arguments),this.$w=ah}sC(t){return this.Uw(t)}rC(t){const i=t.length,s=Array(i);for(let h=0;h<i;h+=1){const i=t[h];s[h]=e(i.position,i.high)}return[s,[]]}setStrokeStyle(t){return this.Jw(t),this}getStrokeStyle(){return this.qw()}}class ng extends rg{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.kw=De,this.Tw=yr(this.zs.areaSeriesNegativeFillStyle,c),this.jw=yr(this.zs.areaSeriesNegativeStrokeStyle,c)}hC(t){return this.uC(t)}uC(t){const i=[];return 1===t.length?this.aC(t[0],i):this.lC(t,i),i}aC(t,i,s=0){const e=this.eC;return i[s]=t.y>e?r(t.x,e,e):r(t.x,t.y,e),s+1}lC(t,i,s=0){let h=0;const n=t.length-1,o=this.eC;for(;h<n;){const n=t[h],a=t[h+=1];if(n.y<=o){const t=r(n.x,n.y,o);if(0!==s&&Hh(i[s-1],t)||(i[s]=t,s+=1),a.y>o){const t=_n(e(zr,o),e(Or,o),n,a);t&&(i[s]=r(t.x,t.y,o),s+=1),i[s]=r(a.x,o,o),s+=1}else i[s]=r(a.x,a.y,o),s+=1}else{const t=r(n.x,o,o);if(0!==s&&Hh(i[s-1],t)||(i[s]=t,s+=1),a.y<=o){const t=_n(e(zr,o),e(Or,o),n,a);t&&(i[s]=r(t.x,t.y,o),s+=1),i[s]=r(a.x,a.y,o),s+=1}else i[s]=r(a.x,o,o),s+=1}}return s}V_(){return LA(this.I_,(t=>t[1]))}setFillStyle(t){return this.Zw(t),this}getFillStyle(){return this.Au()}attach(t,i=!0,s=!1){return fr(t,this.zs,s,{fill:this.Tw,stroke:this.jw}),super.attach(t,i,s)}}class og extends rg{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u);const d=c;this.kw=yr(this.zs.areaSeriesPositiveFillStyle,d),this.Tw=De,this.jw=yr(this.zs.areaSeriesPositiveStrokeStyle,d)}hC(t){return this.cC(t)}cC(t){const i=[];return 1===t.length?this.aC(t[0],i):this.lC(t,i),i}aC(t,i,s=0){const e=this.eC;return i[s]=t.y<e?r(t.x,e,e):r(t.x,t.y,e),s+1}lC(t,i,s=0){let h=0;const n=t.length-1,o=this.eC;for(;h<n;){const n=t[h],a=t[h+=1];if(n.y>=o){const t=r(n.x,n.y,o);if(0!==s&&Hh(i[s-1],t)||(i[s]=t,s+=1),a.y<o){const t=_n(e(zr,o),e(Or,o),n,a);t&&(i[s]=r(t.x,t.y,o),s+=1),i[s]=r(a.x,o,o),s+=1}else i[s]=r(a.x,a.y,o),s+=1}else{const t=r(n.x,o,o);if(0!==s&&Hh(i[s-1],t)||(i[s]=t,s+=1),a.y>=o){const t=_n(e(zr,o),e(Or,o),n,a);t&&(i[s]=r(t.x,t.y,o),s+=1),i[s]=r(a.x,a.y,o),s+=1}else i[s]=r(a.x,o,o),s+=1}}return s}V_(){return LA(this.I_,(t=>t[0]||[]))}setFillStyle(t){return this.Xw(t),this}getFillStyle(){return this.Qw()}attach(t,i=!0,s=!1){return fr(t,this.zs,s,{fill:this.kw,stroke:this.jw}),super.attach(t,i,s)}}const ag={Positive:og,Negative:ng,Bipolar:hg},lg=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Position","",i.axisX.formatValue(s)).addRow("High","",i.axisY.formatValue(e)).addRow("Low","",i.axisY.formatValue(h));class ug extends ig{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.At="Area Range Series",this.Mm=lg,this.Es.$s.Mo(mc.Qf);const c=u;this.kw=yr(this.zs.areaRangeSeriesFillStyle,c),this.jw=yr(this.zs.areaRangeSeriesStrokeStyle,c),this.Tw=yr(this.zs.areaRangeSeriesFillStyleInverted,c),this.$w=yr(this.zs.areaRangeSeriesStrokeStyleInverted,c)}add(t){const i=Array.isArray(t)?t:[t],[s,e]=o(i);this.zw(t,s,e);const h=this.Ju[this.Ju.length-1];return this.L_=h?{position:h.position,high:h.high,low:h.low}:void 0,this.Ct.emit("dataAdd",this,i,this.R_),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.L_?this.L_.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}sC(t,i){this.Ww(t,i)}setHighFillStyle(t){return this.Xw(t),this}setLowFillStyle(t){return this.Zw(t),this}setHighStrokeStyle(t){return this.Jw(t),this}setLowStrokeStyle(t){return this.Kw(t),this}getHighFillStyle(){return this.Qw()}getLowFillStyle(){return this.Au()}getHighStrokeStyle(){return this.qw()}getLowStrokeStyle(){return this.tC()}V_(){return LA(this.I_,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}N_(t){return this.Ct.on("dataAdd",t)}G_(t){return this.Ct.off(t)}U_(t){return this.Ct.on("dataClear",t)}W_(t){return this.Ct.off(t)}attach(t,i=!0,s=!1){return fr(t,this.zs,s,{fill:this.kw,fill2:this.Tw,behavior:{colorStep:!0}}),super.attach(t,i,s)}}var cg;t.StepOptions=void 0,(cg=t.StepOptions||(t.StepOptions={}))[cg.before=0]="before",cg[cg.middle=.5]="middle",cg[cg.after=1]="after";const dg=(t,i)=>{const s=[],h=t.length,r=i;if(h>0){let i=0,n=t[0];s[i]=n,i+=1;for(let o=1;o<h;o+=1){const h=t[o];if(r<=0)s[i]=e(n.x,h.y),i+=1;else{const t=n.x*(1-r)+h.x*r;s[i]=e(t,n.y),i+=1,s[i]=e(t,h.y),i+=1}s[i]=h,i+=1,n=h}}return s},fg=(t,i)=>{const s=t*t,h=s*t,r=1-t,n=r*r,o=n*r;return e(o*i[0].x+3*t*n*i[1].x+3*s*r*i[2].x+h*i[3].x,o*i[0].y+3*t*n*i[1].y+3*s*r*i[2].y+h*i[3].y)},Ag=(t,i=32)=>{if(2===t.length)return[t[0],t[1]];const s=(t=>{const i=1e-5,s=t.length-1,h=Array(s);if(s>1){let r=e(0,0),n=e(0,0),o=e(0,0),a=on(dn(t[1],t[0]));const l=3;let u=0,c=0;for(let d=0;d<s;d+=1){const f=Array(4);if(f[0]=t[d],f[1]=t[d],f[3]=t[d+1],f[2]=t[d+1],o=a,r=n,d+1<s?(a=t[d+2]===t[d+1]?e(0,0):on(dn(t[d+2],t[d+1])),n=on(cn(o,a))):n=e(0,0),t[d+1].y===t[d].y)u=0,c=0;else{const s=t[d+1].x-t[d].x;u=Math.abs(r.x)>i?Math.abs(s/(l*r.x)):1,c=Math.abs(n.x)>i?Math.abs(s/(l*n.x)):1}f[1]=cn(un(r,u),f[1]),f[2]=dn(f[2],un(n,c)),h[d]=f}}return h.length>0?h:[]})(t),h=s.length,r=Array(h*i);let n=0;for(let t=0;t<h;t+=1)for(let e=0;e<=i;e+=1)r[n]=fg(e/i,s[t]),n+=1;return r};class gg extends OA{constructor(t,i,s,h,r,n,o,l,u,c,d,f,A,g,v){super(t,i,s,h,r,n,o,l,u,d,f),this.I_=[],this.At="Point Line series",this.O_=1e5,this.wM=5,this.Za=0,this.xl=!1,this.Ml=!1,this._l=!1,this.AM=!0,this.dC="nearest-x",this.fC=1,this.AC=[],this.gC=t=>{if(this.I_.length>0){const i=this.I_[this.I_.length-1];if(t.length>0){const s=i.Rl(),h=i.Ll(),r=s.length+h.length-+i.vu();if(r>=this.O_){const n=h.length>0?h[h.length-1]:s[i.vu()?r:r-1],o=e((n.x+t[0].x)/2,(n.y+t[0].y)/2);i.Gl(o,a(e(o.x,o.y),e(o.x,o.y))).yu(!0),this.vC([o].concat(t)).gu(!0)}else i.Gl(t,this.R_)}}else t.length>0&&this.vC(t)},this.yC=t=>{if(this.AC.length>0){const i=this.AC[this.AC.length-1];t.length>0&&((i.Rl().length+i.Ll().length)*this.fC>=this.O_?this.mC(t):i.Gl(t))}else t.length>0&&this.mC(t)},this.pC=(t,i)=>{const s=t.kd(i);if(s)return Ah(s,this.scale,this.ae.$s.ti)},this.SC=(t,i)=>{const s=t.Ow(i);if(s)return Ah(s,this.scale,this.ae.$s.ti)},this.Co=v,this.CM=c,this.bC=A,this.xC=yr(d.pointLineSeriesFillStyle,g),this.Wu=yr(this.zs.pointLineSeriesStrokeStyle,g)}add(t){return super.add(t),this}V_(){return LA(this.AC)}setStrokeStyle(t){this.Wu="function"==typeof t?t(this.Wu):t;const i=this.Wu;for(let t=0;t<this.I_.length;t+=1)this.I_[t].ph(i);return this.ae.ie(),this}getStrokeStyle(){return this.Wu}setPointFillStyle(t){this.xC="function"==typeof t?t(this.xC):t;const i=this.xC;for(let t=0;t<this.AC.length;t+=1)this.AC[t].ah(i);return this.ae.ie(),this}getPointFillStyle(){return this.xC}setPointSize(t){this.wM=t;for(let i=0;i<this.AC.length;i+=1)this.AC[i].Wt(t);return this.ae.ie(),this}getPointSize(){return this.wM}getPointShape(){return this.CM}setPointRotation(t){this.Za=t;for(let i=0;i<this.AC.length;i+=1)this.AC[i]._r(t);return this.ae.ie(),this}getPointRotation(){return this.Za}setIndividualPointSizeEnabled(t){this.xl=t,t&&this.Es.$s.Mo(mc.iA);for(let i=0;i<this.AC.length;i+=1)this.AC[i].zl(t);return this.ae.ie(),this}getIndividualPointSizeEnabled(){return this.xl}setIndividualPointRotationEnabled(t){this.Ml=t;for(let i=0;i<this.AC.length;i+=1)this.AC[i].Vl(t);return this.ae.ie(),this}getIndividualPointRotationEnabled(){return this.Ml}setIndividualPointValueEnabled(t){this._l=t;for(let i=0;i<this.AC.length;i+=1)this.AC[i].Nl(t);return this.ae.ie(),this}getIndividualPointValueEnabled(){return this._l}setVisible(t){return super.setVisible(t),this.AC.forEach((i=>i.setVisible(t))),this}setCursorInterpolationEnabled(t){return this.AM=t,this.ae.$s.ie(),this}getCursorInterpolationEnabled(){return this.AM}setCursorSolveBasis(t){return this.dC=t,this.I_.forEach((i=>i.Bl(Na(t)))),this.AC.forEach((i=>i.Bl(Na(t)))),this.ae.ie(),this}getCursorSolveBasis(){return this.dC}xf(){return Ar(this.xC)||Ar(this.Wu.getFillStyle())}oe(){return this.ee||this.CM}x_(t){}fh(t,i){t.Xs(i),this.ae.ie()}z_(t){const i=this.I_.length>0?this.I_[this.I_.length-1].Rl().length+this.I_[this.I_.length-1].Ll().length-+this.I_[this.I_.length-1].vu():void 0;BA(t,i,this.O_,this.gC),BA(t,i,this.O_,this.yC)}mC(t,i){const s=this.ae.sS(this.scale).Gl(t,i).setMouseInteractions(this.Fs).ah(this.xC).El(this.CM).Wt(this.wM)._r(this.Za).zl(this.xl).Vl(this.Ml).Nl(this._l).Bl(Na(this.dC)).Xs(this.getHighlight());return this.Zs(s),this.AC.push(s),s}vC(t,i){const s=this.ae.Nm(this.scale,void 0,[qd.UserSeries,...this.bC]).Gl(t,i).setMouseInteractions(this.Fs).ph(this.Wu).Bl(Na(this.dC)).Xs(this.getHighlight());return this.Zs(s),this.I_.push(s),s}attach(t,i=!0,s=!1){return fr(t,this.zs,s,{stroke:this.Wu,fill:this.xC}),super.attach(t,i,s)}getPointAmount(){return this.AC.reduce(((t,i)=>t+i.Ul()+i.Wl()),this.Ju.length)}clear(){super.clear();for(let t=0;t<this.I_.length;t+=1)this.I_[t].dispose();this.I_.length=0;for(let t=0;t<this.AC.length;t+=1)this.AC[t].dispose();return this.AC.length=0,this}E_(t,i,s,e){super.E_(t,i,s,e),this.D_.E_(this.AC,i,s,e,this.scale,(t=>{}))}kd(t,i,s=this.AM){const e=s?zA(t,i?this.I_.filter((t=>t.getIsUnderMouse())):this.I_,this.SC,"nearest-x"===this.dC?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.dC?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2):zA(t,i?this.AC.filter((t=>t.getIsUnderMouse())):this.AC,this.pC,"nearest-x"===this.dC?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.dC?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==e){const t=Ah(e[0],this.ae.$s.ti,this.scale),i=e[1]instanceof xl?e[1].Yu():e[1].pr(),s=e[1]instanceof ol?e[1].pr():void 0,h=e[1]instanceof xl?e[1].Yu().getFillStyle():void 0,r=Ve(i)?e[0].color?new Ee({color:e[0].color}):new Ee({color:i.getFallbackColor()}):void 0;return Nd(t,this.scale,this.Mm(new _d,this,t.x,t.y,t).Pc(),this,h||r||s)}}solveNearestFromScreen(t,i=this.AM){return this.kd(Ac(t,this.Es.$s),!1,i)}}const vg=32,yg=(t,i)=>t.Ll().length>=i?t.Ll().slice(-i):Array.prototype.concat(t.Rl(),t.Ll()).slice(-i),mg=(t,i,s)=>{const e=Array.prototype.concat(t.Rl(),t.Ll()).slice(0,-s-1).concat(i.slice(s+1,2*s+2));t._i().Gl(e).de()};class pg extends gg{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A){super(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A),this.At="Spline Series",this.fC=vg,this.O_=8e3,this.MC=t=>{if(0===t.length)return;const i=this.AC.length;if(i>0){const s=i>1,e=this.AC[i-1];if(s){const s=Array.prototype.concat(e.Rl(),e.Ll()),h=s.length;if(h*vg>=this.O_){const s=yg(e,3),h=Array.prototype.concat(s,t),r=Ag(h,vg);mg(this.I_[i-1],r,vg),this.vC(r.slice(66))}else if(h<5){const e=this.AC[i-2],h=yg(e,3),r=Array.prototype.concat(h,s,t),n=Ag(r,vg),o=this.I_[i-1],a=n.slice(66);o._i().Gl(a).de()}else{const s=this.I_[i-1],h=Array.prototype.concat(s.Rl(),s.Ll()),r=yg(e,4),n=Array.prototype.concat(r,t),o=Ag(n,vg),a=h.slice(0,-66).concat(o.slice(33));s._i().Gl(a).de()}}else{const s=Array.prototype.concat(e.Rl(),e.Ll()),h=s.length,r=this.I_[i-1];if(h*vg>=this.O_){const i=yg(e,3),s=Array.prototype.concat(i,t),h=Ag(s,vg);mg(this.I_[0],h,vg),this.vC(h.slice(66))}else if(h+t.length>1){const i=Array.prototype.concat(s,t),e=Ag(i,vg);r._i().Gl(e).de()}else r.Gl(t)}}else{const i=t.length>0?Ag(t,vg):t,s=qr(i);this.vC(i,s)}this.yC(t)}}setCursorInterpolationEnabled(t){return super.setCursorInterpolationEnabled(t)}z_(t){const i=this.AC.length,s=this.AC.length>0?this.AC[i-1].Rl().length+this.AC[i-1].Ll().length:void 0;BA(t,s,Math.ceil(this.O_/this.fC),this.MC)}solveNearestFromScreen(t,i=this.AM){if(i)return super.solveNearestFromScreen(Ac(t,this.Es.$s),i);const s=zA(Ac(t,this.Es.$s),this.AC,this.pC,"nearest-x"===this.dC?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.dC?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==s){const t=Ah(s[0],this.ae.$s.ti,this.scale);return Nd(t,this.scale,this.Mm(new _d,this,t.x,t.y,t).Pc(),this,s[1].pr())}}}class Sg{constructor(){this.Cs="FreeformPattern",this.hu={type:"disabled",packager:(t,i,s)=>t.slice()}}E_(t,i,s,e,h,r){if(e>0){const h=Math.trunc((i-e)/s);if(h>0&&t.length>1){const i=t.splice(0,h);for(let t=0;t<i.length;t+=1)r(i[t]),i[t].dispose()}}}_C(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}getXMax(t=[],i){return Yh(t,Oh,Math.max,Gh,i)}getXMin(t=[],i){return Yh(t,Eh,Math.min,Nh,i)}getYMax(t=[],i){return Yh(t,Vh,Math.max,Wh,i)}getYMin(t=[],i){return Yh(t,zh,Math.min,Uh,i)}}const bg=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},xg=le({hu:{type:"disabled",packager:(t,i,s)=>t.slice()}});class Mg extends xg{E_(t,i,s,e,h,r){if(e>0){const i=Math.ceil(e/s),n=t.length-i;if(n>0){const i=this.Nw(t,h);if(i>0){const s=n-i>0?i:n;if(s>0){for(let i=0;i<s;i+=1)r(t[i]),t[i].dispose();t.splice(0,s)}}}}}}const _g=(t,i)=>{const s=i.oi();return t?Math.min(s,t):s},wg=(t,i)=>{const s=i.ai();return t?Math.max(s,t):s};class Cg extends Mg{_C(t,i){return Math.abs(t.x-i.x)}getYMax(t=[],i){return t.reduce(wg,i?i.max.y:void 0)}getYMin(t=[],i){return t.reduce(_g,i?i.min.y:void 0)}}const kg=(t,i)=>{const s=i.ri();return t?Math.min(s,t):s},Tg=(t,i)=>{const s=i.ni();return t?Math.max(s,t):s};class Fg extends Mg{_C(t,i){return Math.abs(t.y-i.y)}getXMax(t=[],i){return t.reduce(Tg,i?i.max.x:void 0)}getXMin(t=[],i){return t.reduce(kg,i?i.min.x:void 0)}}const Ig={horizontalProgressive:new class extends Cg{constructor(){super({hu:Ba()}),this.Cs="HorizontalProgressivePattern"}Nw(t,i){const s=t.length,e=Math.min(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.x.ts(t[r].ni(),t[r].tu())<e&&(h+=1);return h}getXMax(t=[],i){return void 0!==i?i?i.max.x:void 0:t.length>0?t[t.length-1].ni():void 0}getXMin(t=[],i){return t.length>0&&t[0].Ul()>0?t[0].ri():i?i.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",Ba(bg(t)))}},horizontalRegressive:new class extends Cg{constructor(){super({hu:La()}),this.Cs="HorizontalRegressivePattern"}Nw(t,i){const s=t.length,e=Math.max(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.x.ts(t[r].ri(),-t[r].tu())&&(h+=1);return h}getXMax(t=[],i){return t.length>0&&t[0].Ul()>0?t[0].ni():i?i.max.x:void 0}getXMin(t=[],i){return void 0!==i?i?i.min.x:void 0:t.length>0?t[t.length-1].ri():void 0}setPrecision(t){return this.set("_columnPackaging",La(bg(t)))}},verticalProgressive:new class extends Fg{constructor(){super({hu:Ra()}),this.Cs="VerticalProgressivePattern"}Nw(t,i){const s=t.length,e=Math.min(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.y.ts(t[r].ai(),t[r].iu())<e&&(h+=1);return h}getYMax(t=[],i){return void 0!==i?i?i.max.y:void 0:t.length>0?t[t.length-1].ai():void 0}getYMin(t=[],i){return t.length>0&&t[0].Ul()>0?t[0].oi():i?i.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",Ra(bg(t)))}},verticalRegressive:new class extends Fg{constructor(){super({hu:Ea()}),this.Cs="VerticalRegressivePattern"}Nw(t,i){const s=t.length,e=Math.max(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.y.ts(t[r].oi(),-t[r].iu())&&(h+=1);return h}getYMax(t=[],i){return t.length>0&&t[0].Ul()>0?t[0].ai():i?i.max.y:void 0}getYMin(t=[],i){return void 0!==i?i?i.min.y:void 0:t.length>0?t[t.length-1].oi():void 0}setPrecision(t){return this.set("_columnPackaging",Ea(bg(t)))}},freeform:new Sg};class Pg extends gg{constructor(t,i,s,h,r,n,o,l,u,c,d,f,A,g,v){super(t,i,s,h,r,n,o,l,Ig.horizontalProgressive,u,d,f,A,g,v),this.At="Step Series",this.gC=t=>{const i=this.I_.length>0?this.I_[this.I_.length-1].Rl().length+this.I_[this.I_.length-1].Ll().length:void 0;BA(t,i,this.O_,this.wC)},this.wC=t=>{const i=t.length;if(this.I_.length>0){const s=this.I_[this.I_.length-1];if(i>0){const i=s.Rl(),h=s.Ll(),r=h.length>0?h[h.length-1]:i[i.length-1],n=dg([r].concat(t),this.ct);n.shift();const o=e((r.x+n[0].x)/2,(r.y+n[0].y)/2),l=Array.prototype.concat(o,n);(h.length>0?i.length+h.length:i.length)>=this.O_?(s.Gl(o,a(e(o.x,o.y),e(o.x,o.y))).yu(!0),this.vC(l).gu(!0),this.mC(t)):s.Gl(l)}}else i>0&&this.vC(dg(t,this.ct));this.yC(t)},this.ct=c,void 0===this.bC.find((t=>"DataPattern"===t.type))&&this.bC.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class Dg extends DA{constructor(t,i,s,e,r,n,o,l,u,c){super(t,i,s,e,r,n,o,l,u,c),this.At="OHLC Series",this.CC=t=>t[4]>=t[1],this.H_=a(h(Or,Or),h(zr,zr)),this.kC=[],this.TC=!1,this.FC=-1,this.IC=[],this.PC=!0,this.DC=!1,this.BC=4,this.Mm=(t,i,s)=>(t.addRow(i.getName()).addRow("Time","",i.axisX.formatValue(s.position)).addRow("Open","",s.open.toFixed(3)).addRow("High","",s.high.toFixed(3)).addRow("Low","",s.low.toFixed(3)).addRow("Close","",s.close.toFixed(3)),t),this.LC=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.Es.$s.Mo(mc.Nf)}V_(){return this.IC}N_(t){return this.Ct.on("dataAdd",t)}G_(t){return this.Ct.off(t)}U_(t){return this.Ct.on("dataClear",t)}W_(t){return this.Ct.off(t)}Dp(){return this.Lp&&this.IC.length>0&&this.getVisible()}RC(t){if(!(this.IC.length<1))return[this.IC[t][0],this.IC[t][1],this.IC[t][2],this.IC[t][3],this.IC[t][4]]}kd(t){if(0===this.IC.length)return;const i=Ah(t,this.ae.$s.ti,this.scale).x,s=void 0!==this.getPackDataState();let h,r,n,o,a;if(s){const t=this.EC;if(!t)return;const s=Pr(i,t.length-1,(i=>t[i][0])),e=void 0!==s&&t[s];if(!e)return;o=e[3],n=e[2],r=e[1],a=e[4],h=e[0]}else{const t=Pr(i,this.IC.length-1,(t=>this.IC[t][0])),s=void 0!==t&&this.IC[t];if(!s)return;h=s[0],r=s[1],n=s[2],o=s[3],a=s[4]}const l={position:h,open:r,high:n,low:o,close:a,isPacked:s};return{location:e(l.position,l.close),scale:this.scale,resultTableContent:this.Mm(new _d,this,l).Pc(),owner:this,isPacked:s,position:h,open:r,high:n,low:o,close:a}}x_(t){if(!(t.x instanceof On))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.OC=t.x}hn(){return e(5,5)}Cw(t){const i=t.length-1;if(i<0)return this;for(let s=0;s<=i;s+=1)t[s][3]<this.H_.min.y&&(this.H_.min.y=t[s][3]),this.H_.max.y<t[s][2]&&(this.H_.max.y=t[s][2]);return this.H_.min.x=Math.min(this.H_.min.x,t[0][0]),this.H_.max.x=Math.max(this.H_.max.x,t[i][0]),this}getXMax(){return this.H_.max.x}getXMin(){return this.H_.min.x}getYMax(){return this.H_.max.y}getYMin(){return this.H_.min.y}add(t){this.IC.length>0&&this.Es.$s.Mo(mc.tA);const i=Array.isArray(t[0])?t:[t[0]];if(i.length>0){this.TC=!0;const t=this.IC.length,s=this.kC.length,e=i.length;this.IC.length=t+e,this.kC.length=s+e;for(let h=0;h<e;h+=1)this.IC[t+h]=i[h],this.kC[s+h]=this.IC[t+h];this.Cw(i),this.Ct.emit("dataAdd",this,i,void 0),this.ae.ie()}return this}setPackData(t){return t!==this.PC&&(this.DC=!0,this.PC=t,this.Es.$s.ie()),this}getPackData(){return this.PC}getPackDataState(){const t=this.FC;if(!(t<0||void 0===this.EC||this.EC.length===this.IC.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.zC=t,this.Es.$s.ie(),this}getFigureWidth(){return this.zC}setFigureMinimumGap(t){return this.BC=t,this.Es.$s.ie(),this}getFigureMinimumGap(){return this.BC}solveNearestFromScreen(t){return this.kd(Ac(t,this.Es.$s))}clear(){return this.IC=[],this.kC=[],this.EC=void 0,this.VC(),this.H_.min.x=Or,this.H_.min.y=Or,this.H_.max.x=zr,this.H_.max.y=zr,this.Ct.emit("dataClear",this),this}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}NC(t){return this.OC.getPixelSize()*t/1e3}GC(){const t=this.LC.length-1,i=this.NC(this.zC+this.BC);let s=Pr(i,t,(t=>this.LC[t]));return void 0===s?s=i<this.LC[0]?0:this.LC[t]<i?t:this.LC.length/2:this.LC[s]<i&&(s+=1),this.LC.length<=s&&(s=t),1e3*this.LC[s]}uh(){if(super.uh(),!this.PC){this.EC=void 0;let t=null;if(this.DC?(this.DC=!1,t=this.IC,this.VC()):t=this.kC,t.length>=1){for(let i=0;i<t.length;i+=1){const s=t[i],e=s[0];this.CC(s)?this.UC(e,s):this.WC(e,s)}this.kC.length=0,this.TC=!1,this.FC=-1}}}$m(){super.$m();const t=this.GC();if(this.PC&&this.IC.length>=1&&(t!==this.FC||this.TC||this.DC)){this.DC=!1,this.FC=t,this.TC=!1,this.VC(),this.EC=[];const i=this.IC.length;let s=this.IC[0][0]-this.IC[0][0]%(t/2)+t,e=0;for(;e<i;){let h=this.RC(e);if(void 0===h)break;let r=h[3],n=h[2];const o=e;for(e+=1;e<i&&this.IC[e][0]<s;)h=this.IC[e],this.IC[e][3]<r&&(r=this.IC[e][3]),n<this.IC[e][2]&&(n=this.IC[e][2]),e+=1;const a=e-1;let l=h[0];o<a&&(l=this.IC[a][0],h=[l,this.IC[o][1],n,r,this.IC[a][4]]),h[1]<h[4]?this.UC(l,h):this.WC(l,h),this.EC.push(h),s+=t}}}}class Bg extends Dg{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.YC=1175494351e-14,this.zC=this.zs.ohlcCandleThicknessPixels||5,this.HC=this.zs.ohlcCandleTailStrokeStylePositive,this.jC=this.zs.ohlcCandleTailStrokeStyleNegative,this.$C=this.zs.ohlcCandleBodyFillStylePositive,this.XC=this.zs.ohlcCandleBodyFillStyleNegative,this.ZC=s.gv(this.scale).ph(new so({thickness:this.zC,fillStyle:this.$C})),this.ZC.Qu=!0,this.ZC.Zu={x:0,y:1},this.QC=s.gv(this.scale).ph(new so({thickness:this.zC,fillStyle:this.XC})),this.QC.Qu=!0,this.QC.Zu={x:0,y:-1},this.JC=s.gv(this.scale).ph(this.HC),this.JC.Qu=!0,this.KC=s.gv(this.scale).ph(this.jC),this.KC.Qu=!0,this.Zs(this.ZC),this.Zs(this.QC),this.Zs(this.JC),this.Zs(this.KC)}setBodyThickness(t){return this.zC=t,this.ZC.ph(new so({thickness:this.zC,fillStyle:this.$C})),this.QC.ph(new so({thickness:this.zC,fillStyle:this.XC})),this.Es.$s.ie(),this}getBodyThickness(){return this.zC}setBodyFillStylePositive(t){return this.$C="function"==typeof t?t(this.$C):t,this.ZC.ph(new so({thickness:this.zC,fillStyle:this.$C})),this.Es.$s.ie(),this}getBodyFillStylePositive(){return this.$C}setBodyFillStyleNegative(t){return this.XC="function"==typeof t?t(this.XC):t,this.QC.ph(new so({thickness:this.zC,fillStyle:this.XC})),this.Es.$s.ie(),this}getBodyFillStyleNegative(){return this.XC}setTailStrokeStylePositive(t){return this.HC="function"==typeof t?t(this.HC):t,this.JC.ph(this.HC),this.Es.$s.ie(),this}getTailStrokeStylePositive(){return this.HC}setTailStrokeStyleNegative(t){return this.jC="function"==typeof t?t(this.jC):t,this.KC.ph(this.jC),this.Es.$s.ie(),this}getTailStrokeStyleNegative(){return this.jC}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{fill:this.$C,fill2:this.XC,behavior:{colorStep:!0}}),this}VC(){return this.JC._i(),this.KC._i(),this.ZC._i(),this.QC._i(),this}UC(t,i){return Math.abs(i[1]-i[4])<this.YC?this.ZC.Sn().yv({x:t,y:i[1]-this.YC},{x:t,y:i[1]+this.YC}):this.ZC.Sn().yv({x:t,y:i[1]},{x:t,y:i[4]}),i[4]<i[2]&&this.JC.Sn().yv({x:t,y:i[4]},{x:t,y:i[2]}),i[3]<i[1]&&this.JC.Sn().yv({x:t,y:i[3]},{x:t,y:i[1]}),this}WC(t,i){return Math.abs(i[1]-i[4])<this.YC?this.QC.Sn().yv({x:t,y:i[1]-this.YC},{x:t,y:i[1]+this.YC}):this.QC.Sn().yv({x:t,y:i[1]},{x:t,y:i[4]}),i[3]<i[4]&&this.KC.Sn().yv({x:t,y:i[3]},{x:t,y:i[4]}),i[1]<i[2]&&this.KC.Sn().yv({x:t,y:i[1]},{x:t,y:i[2]}),this}}class Lg extends Dg{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.zC=this.zs.ohlcBarThicknessPixels||10,this.qC=this.zs.ohlcBarStrokeStylePositive,this.tk=this.zs.ohlcBarStrokeStyleNegative,this.ik=s.gv(this.scale).ph(this.qC),this.ik.Qu=!0,this.Zs(this.ik),this.sk=s.gv(this.scale).ph(this.qC),this.sk.Qu=!0,this.sk.Zu={x:-this.zC/2,y:0},this.Zs(this.sk),this.ek=s.gv(this.scale).ph(this.qC),this.ek.Qu=!0,this.ek.Zu={x:this.zC/2,y:0},this.Zs(this.ek),this.hk=s.gv(this.scale).ph(this.tk),this.hk.Qu=!0,this.Zs(this.hk),this.rk=s.gv(this.scale).ph(this.tk),this.rk.Qu=!0,this.rk.Zu={x:-this.zC/2,y:0},this.Zs(this.rk),this.nk=s.gv(this.scale).ph(this.tk),this.nk.Qu=!0,this.nk.Zu={x:this.zC/2,y:0},this.Zs(this.nk)}setStrokeStylePositive(t){return this.qC="function"==typeof t?t(this.qC):t,this.ik.ph(this.qC),this.sk.ph(this.qC),this.ek.ph(this.qC),this.Es.$s.ie(),this}getStrokeStylePositive(){return this.qC}setStrokeStyleNegative(t){return this.tk="function"==typeof t?t(this.tk):t,this.hk.ph(this.tk),this.rk.ph(this.tk),this.nk.ph(this.tk),this.Es.$s.ie(),this}getStrokeStyleNegative(){return this.tk}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{fill:this.qC.getFillStyle(),fill2:this.tk.getFillStyle(),behavior:{colorStep:!0}}),this}setFigureWidth(t){return super.setFigureWidth(t),this.sk.Zu={x:-t/2,y:0},this.rk.Zu={x:-t/2,y:0},this.ek.Zu={x:t/2,y:0},this.nk.Zu={x:t/2,y:0},this}VC(){return this.hk._i(),this.ik._i(),this.rk._i(),this.sk._i(),this.nk._i(),this.ek._i(),this}UC(t,i){return this.ik.Sn().yv({x:t,y:i[3]},{x:t,y:i[2]}),this.sk.Sn().yv({x:t,y:i[1]},{x:t,y:i[1]}),this.ek.Sn().yv({x:t,y:i[4]},{x:t,y:i[4]}),this}WC(t,i){return this.hk.Sn().yv({x:t,y:i[3]},{x:t,y:i[2]}),this.rk.Sn().yv({x:t,y:i[1]},{x:t,y:i[1]}),this.nk.Sn().yv({x:t,y:i[4]},{x:t,y:i[4]}),this}}const Rg={Candlesticks:Bg,Bars:Lg},Eg=i=>({defaultDragMouseStyle:t.MouseStyles.Horizontal,getTitleTextRotation:()=>0,...df(i,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.hn().x))}),Og=i=>({defaultDragMouseStyle:t.MouseStyles.Vertical,getTitleTextRotation:t=>90*t,...df(i,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.hn().y))});class zg extends OA{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f){super(t,i,s,e,h,r,n,o,a,l,u),this.I_=[],this.At="Line Series",this.AM=!0,this.O_=void 0,this.dC="nearest-x",this.Ku=void 0,this.xf=()=>Ar(this.Wu.getFillStyle()),this.ak=(t,i)=>{const s=t.MM(i);if(s)return Ah(s,this.scale,this.ae.$s.ti)},this.SC=(t,i)=>{const s=t.Ow(i);if(s)return Ah(s,this.scale,this.ae.$s.ti)},this.bC=c,this.Co=f,this.Wu=yr(this.zs.lineSeriesStrokeStyle,d),this.lk={individualLookupValuesEnabled:void 0!==(null==f?void 0:f.individualLookupValuesEnabled)&&f.individualLookupValuesEnabled}}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.Wu="function"==typeof t?t(this.Wu):t;const i=this.Wu;for(let t=0;t<this.I_.length;t+=1)this.I_[t].ph(i);return this.ae.ie(),this}getStrokeStyle(){return this.Wu}setDataCleaning(t){return this.Ku=t,this.I_.forEach((t=>t.qu(this.Ku))),this.ae.ie(),this}setCursorInterpolationEnabled(t){return this.AM=t,this.ae.$s.ie(),this}getCursorInterpolationEnabled(){return this.AM}setCursorSolveBasis(t){return this.dC=t,this.I_.forEach((i=>i.Bl(Na(t)))),this.ae.ie(),this}getCursorSolveBasis(){return this.dC}x_(t){}z_(t){let i=this.I_[0];i||(i=this.vC(),this.I_.push(i),this.Zs(i)),i.Gl(t,this.R_)}vC(){return this.ae.Nm(this.scale,this.lk,[qd.UserSeries,...this.bC]).ph(this.Wu).qu(this.Ku).Bl(Na(this.dC)).Xs(this.getHighlight())}attach(t,i=!0,s=!1){return fr(t,this.zs,s,{stroke:this.Wu}),super.attach(t,i,s)}fh(t,i){t.Xs(i),this.ae.ie()}E_(t,i,s,e){}kd(t,i,s=this.AM){const e=zA(t,i?this.I_.filter((t=>t.getIsUnderMouse())):this.I_,s?this.SC:this.ak,"nearest-x"===this.dC?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.dC?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==e){const t=Ah(e[0],this.ae.$s.ti,this.scale),i=e[1].Yu();return Nd(t,this.scale,this.Mm(new _d,this,t.x,t.y,t).Pc(),this,i.getFillStyle())}}solveNearestFromScreen(t,i=this.AM){return this.kd(Ac(t,this.Es.$s),!1,i)}}class Vg extends OA{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,new Sg,l,u),this.I_=[],this.At="Point series",this.wM=5,this.Za=0,this.xl=!1,this.Ml=!1,this._l=!1,this.O_=void 0,this.pC=(t,i)=>{const s=t.kd(i);if(s)return Ah(s,this.scale,this.ae.$s.ti)},this.Co=d,this.CM=a,this.sh=yr(l.pointSeriesFillStyle,c)}add(t){return super.add(t),this}xf(){return Ar(this.sh)}oe(){return this.ee||this.CM}x_(t){}attach(t,i=!0,s=!1){return fr(t,this.zs,s,{fill:this.sh}),super.attach(t,i)}fh(t,i){t.Xs(i),this.ae.ie()}setPointFillStyle(t){this.sh="function"==typeof t?t(this.sh):t;const i=this.sh;for(let t=0;t<this.I_.length;t+=1)this.I_[t].ah(i);return this.ae.ie(),this}getPointFillStyle(){return this.sh}setPointSize(t){this.wM=t;for(let i=0;i<this.I_.length;i+=1)this.I_[i].Wt(t);return this.ae.ie(),this}getPointSize(){return this.wM}getPointShape(){return this.CM}setPointRotation(t){this.Za=t;for(let i=0;i<this.I_.length;i+=1)this.I_[i]._r(t);return this.ae.ie(),this}getPointRotation(){return this.Za}setIndividualPointSizeEnabled(t){this.xl=t,t&&this.Es.$s.Mo(mc.iA);for(let i=0;i<this.I_.length;i+=1)this.I_[i].zl(t);return this.ae.ie(),this}getIndividualPointSizeEnabled(){return this.xl}setIndividualPointRotationEnabled(t){this.Ml=t;for(let i=0;i<this.I_.length;i+=1)this.I_[i].Vl(t);return this.ae.ie(),this}getIndividualPointRotationEnabled(){return this.Ml}setIndividualPointValueEnabled(t){this._l=t;for(let i=0;i<this.I_.length;i+=1)this.I_[i].Nl(t);return this.ae.ie(),this}getIndividualPointValueEnabled(){return this._l}z_(t){let i=this.I_[0];i||(i=this.vC()),i.Gl(t,this.R_)}vC(){const t=this.ae.sS(this.scale).El(this.CM).Wt(this.wM)._r(this.Za).zl(this.xl).Vl(this.Ml).Nl(this._l).ah(this.sh).Xs(this.getHighlight());return this.I_.push(t),this.Zs(t),t}kd(t,i){const s=zA(t,i?this.I_.filter((t=>t.getIsUnderMouse())):this.I_,this.pC,Zr);if(void 0!==s){const t=Ah(s[0],this.ae.$s.ti,this.scale),i=s[1].pr(),e=Ve(i)?s[0].color?new Ee({color:s[0].color}):new Ee({color:i.getFallbackColor()}):i;return Nd(t,this.scale,this.Mm(new _d,this,t.x,t.y,t).Pc(),this,e)}}solveNearestFromScreen(t){return this.kd(Ac(t,this.Es.$s),!1)}setCursorResultTableFormatter(t){return super.setCursorResultTableFormatter(t)}}class Ng{constructor(t,i,s,e){this.uk=!1,this.Ct=new Ze,this.chart=s,this.ck=e,this.ke=t.ke,this.Le=e||Vo,this.dk=Ch.document.createElement("div"),this.dk.style.position="absolute",this.dk.style.pointerEvents="none",Ch.document.body.append(this.dk);const h=()=>{const t=s.engine.container.getBoundingClientRect();this.dk.style.left=`${t.left}px`,this.dk.style.top=`${t.top}px`,this.dk.style.width=`${t.width}px`,this.dk.style.height=`${t.height}px`};h(),s.onResize(h),this.fk(this.dk),this.Ak(),this.gk(),this.vk(),this.yk(i),this.chart.mk().push(this)}fk(t){this.pk=Ch.document.createElement("div"),this.pk.style.pointerEvents="all",t.append(this.pk),this.Sk=Ch.document.createElement("div"),this.bk=new Io(this.ke,this.Le,this.chart,this.Sk),this.xk=Ch.document.createElement("table"),this.xk.style.borderSpacing="0",this.pk.appendChild(this.bk.Ue()),this.pk.appendChild(this.Sk),this.Sk.appendChild(this.xk)}gk(){let t=0,i=0,s=0,e=0,h=!1;this.uk=!1,this.pk.onmousedown=r=>{r=r||Ch.event,s=r.clientX,e=r.clientY,h=!0,Ch.document.onmouseup=t=>{this.uk?this.pk.addEventListener("click",qh,!0):this.pk.removeEventListener("click",qh,!0),h=!1,this.uk=!1,Ch.document.onmouseup=null,Ch.document.onmousemove=null},Ch.document.onmousemove=r=>{r=r||Ch.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.uk=!0,this.pk.style.top=this.pk.offsetTop-i+"px",this.pk.style.left=this.pk.offsetLeft-t+"px",this.pk.style.removeProperty("right"),this.pk.style.removeProperty("bottom"))}}}vk(){let t=0,i=0,s=0,e=0,h=!1;this.pk.ontouchstart=r=>{r=r||Ch.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.pk.ontouchend=()=>{h=!1,Ch.document.ontouchend=null,Ch.document.ontouchmove=null},this.pk.ontouchmove=r=>{h&&(qh(r),r=r||Ch.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.pk.style.top=this.pk.offsetTop-i+"px",this.pk.style.left=this.pk.offsetLeft-t+"px",this.pk.style.removeProperty("right"),this.pk.style.removeProperty("bottom"))}}}Ak(){this.pk.style.setProperty("top","10px"),this.pk.style.setProperty("left","10px"),this.pk.style.position="absolute",this.pk.style.display="flex",this.pk.style.alignItems="flex-start",this.Sk.style.setProperty("display","none")}removePositionProperty(){this.pk.style.removeProperty("top"),this.pk.style.removeProperty("left"),this.pk.style.removeProperty("bottom"),this.pk.style.removeProperty("right")}setPositionProperty(i){switch(this.removePositionProperty(),i){case t.OSMPosition.BottomLeft:this.pk.style.setProperty("bottom","10px"),this.pk.style.setProperty("left","10px");break;case t.OSMPosition.TopLeft:this.pk.style.setProperty("top","10px"),this.pk.style.setProperty("left","10px");break;case t.OSMPosition.BottomRight:this.pk.style.setProperty("bottom","10px"),this.pk.style.setProperty("right","10px");break;case t.OSMPosition.TopRight:default:this.pk.style.setProperty("top","10px"),this.pk.style.setProperty("right","10px")}}yk(t){for(let i=0;i<t.length;i+=1){const s=this.xk.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.Mk(r,h):this.addCustomButton(r,h)}}}Mk(i,s){switch(i){case t.OnScreenMenuButtonType.ZoomIn:this._k(new bo(this.ke,this.chart,this.Le),s);break;case t.OnScreenMenuButtonType.ZoomInX:this._k(new xo(this.ke,this.chart,this.Le),s);break;case t.OnScreenMenuButtonType.ZoomInY:this._k(new Mo(this.ke,this.chart,this.Le),s);break;case t.OnScreenMenuButtonType.ZoomOut:this._k(new _o(this.ke,this.chart,this.Le),s);break;case t.OnScreenMenuButtonType.ZoomOutX:this._k(new wo(this.ke,this.chart,this.Le),s);break;case t.OnScreenMenuButtonType.ZoomOutY:this._k(new Co(this.ke,this.chart,this.Le),s);break;case t.OnScreenMenuButtonType.ZoomToFit:this._k(new To(this.ke,this.chart,this.Le),s);break;case t.OnScreenMenuButtonType.ToggleAnimations:this._k(new ko(this.ke,this.chart,this.Le),s);break;default:console.error(`No predefined button like "${t.OnScreenMenuButtonType[i]}" exists.`)}}_k(t,i){i.rowSpan=t.Te.rows,i.colSpan=t.Te.columns,t.Ge(i)}addCustomButton(t,i){const s=new Fo(this.ke,t,this.chart);return this._k(s,i),this}dispose(){this.dk.remove(),this.Ct.emit("dispose",this)}onDispose(t){return this.Ct.on("dispose",t)}offDispose(t){return this.Ct.off(t,"dispose")}}class Gg extends DA{constructor(t,i,s,e,h,r,n,o,a,l,u,c){var d;super(t,i,s,e,h,r,n,o,a,l),this.At="Point Line Area Series",this.Mm=Ug,this.AM=!1,this.wk=0,this.Co=c,this.bl=this.ae.jd(this.scale).ph(yr(this.zs.lineSeriesStrokeStyle,u)).Yd(yr(this.zs.pointSeriesFillStyle,u)).Hd(yr(this.zs.areaSeriesPositiveFillStyle,u)).Ck(void 0).Kd(7),this.bl.kk=!1!==(null===(d=this.Co)||void 0===d?void 0:d.allowDataGrouping),this.Zs(this.bl)}setDataSet(t){var i;return t===(null===(i=this.Ud)||void 0===i?void 0:i.Ci)||(t.Kc&&this.Es.$s.Mo(mc.sA),t.td&&this.Es.$s.Mo(mc.iA),this.Ud=Rr(t,this.Ud,(()=>[t.Td((()=>{this.wk+=1,this.wk>1&&this.Es.$s.Mo(mc.tA),this.Es.$s.ie()})),t.Fd((()=>this.Es.$s.ie()))])),this.bl.Wd(t),this.chart.$s.ie()),this}getDataSet(){return this.Tk()}setStrokeStyle(t){return this.bl.ph(t),this.ae.ie(),this}getStrokeStyle(){return this.bl.Yu()}setAreaFillStyle(t){return this.bl.Hd(t),this.ae.ie(),this}getAreaFillStyle(){return this.bl.Fk()}setPointFillStyle(t){return this.bl.Yd(t),this.ae.ie(),this}getPointFillStyle(){return this.bl.Jd()}setPointSize(t){return this.bl.Kd(t),this.ae.ie(),this}getPointSize(){return this.bl.Ik()}setPointShape(t){return this.bl.$d(t),this.ae.ie(),this}getPointShape(){return this.bl.Xd()}setPointRotation(t){return this.bl.Zd(t),this.ae.ie(),this}getPointRotation(){return this.bl.Qd()}setPointAlignment(t){return this.bl.Pk(t),this.Es.$s.ie(),this}getPointAlignment(){return this.bl.Dk()}setCurvePreprocessing(t){return this.bl.Ck(t),this.ae.ie(),this}getCurvePreprocessing(){return this.bl.Bk()}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}setCursorInterpolationEnabled(t){return this.AM=t,this.ae.$s.ie(),this}getCursorInterpolationEnabled(){return this.AM}add(t){return this.Tk().add(t),this.ae.ie(),this}addArraysXY(t,i){return this.Tk().addArraysXY(t,i),this.ae.ie(),this}appendJSON(t,i){return this.Tk().appendJSON(t,i),this.ae.ie(),this}appendSample(t){return this.Tk().appendSample(t),this.ae.ie(),this}appendSamples(t){return this.Tk().appendSamples(t),this.ae.ie(),this}fill(t){return this.Tk().fill(t),this.ae.ie(),this}setSamples(t){return this.Tk().setSamples(t),this.ae.ie(),this}alterSamples(t,i){return this.Tk().alterSamples(t,i),this.ae.ie(),this}alterSamplesByID(t,i){return this.Tk().alterSamplesByID(t,i),this.ae.ie(),this}getSampleCount(){return this.Tk().getSampleCount()}getNextSampleIndex(){return this.Tk().getNextSampleIndex()}clear(){return this.Tk().clear(),this.ae.ie(),this}setMaxSampleCount(t){return this.Tk().setMaxSampleCount(t),this.ae.ie(),this}getMaxSampleCount(){return this.Tk().getMaxSampleCount()}readBack(t){return this.Tk().readBack(t)}onMaxSampleCountExceeded(t){return this.Tk().onMaxSampleCountExceeded(t)}offMaxSampleCountExceeded(t){return this.Tk().offMaxSampleCountExceeded(t)}Lk(){return this.Tk()}xf(){return Ar(this.getPointFillStyle())||Ar(this.getStrokeStyle().getFillStyle())||Ar(this.getAreaFillStyle())}Dp(){var t;const i=null===(t=this.Ud)||void 0===t?void 0:t.Ci;return this.getAutoScrollingEnabled()&&void 0!==i&&i.Hc>0}x_(t){}getXMax(){return this.bl.ni()}getXMin(){return this.bl.ri()}getYMax(){return this.bl.ai()}getYMin(){return this.bl.oi()}hn(){return{x:this.bl.tu(),y:this.bl.iu()}}Tk(){if(!this.Ud){const t=new vu(this.Co);t.Kc&&this.Es.$s.Mo(mc.sA),t.td&&this.Es.$s.Mo(mc.iA),this.Ud=Rr(t,this.Ud,(()=>[t.Td((()=>{this.wk+=1,this.wk>1&&this.Es.$s.Mo(mc.tA),this.Es.$s.ie()})),t.Fd((()=>{this.Es.$s.ie()}))])),this.bl.Wd(t)}return this.Ud.Ci}attach(t,i=!0,s=!1){super.attach(t,i,s);const e=this.getPointFillStyle(),h=this.getAreaFillStyle();return fr(t,this.zs,s,{stroke:this.getStrokeStyle(),fill:e!==De?e:h}),super.attach(t,i)}oe(){return this.ee||this.getPointShape()}fh(t,i){t.Xs(i),this.ae.ie()}kd(t,i,s=this.AM){void 0!==this.getCurvePreprocessing()&&(s=!1);const e=this.Lk(),h=Ah(t,this.Es.$s.ti,this.scale),r=!i||this.bl.getIsUnderMouse()?e.kd(h,s,this.scale,this.Es.pixelScale):void 0;if(void 0!==r){const t=[this.getStrokeStyle().getFillStyle(),this.getPointFillStyle(),this.getAreaFillStyle()];return Nd(r,this.scale,this.Mm(new _d,this,r).Pc(),this,t.filter((t=>!Be(t)))[0])}}solveNearestFromScreen(t,i=!1){return this.kd(Ac(t,this.Es.$s),!1,i)}}const Ug=(t,i,s)=>{const e=i.getIcon();return e?t.addRow(e,i.getName()):t.addRow(i.getName()),t.addRow("X","",i.axisX.formatValue(s.x)).addRow("Y","",i.axisY.formatValue(s.y)),void 0!==s.lookupValue&&t.addRow("Value","",s.lookupValue.toFixed(1)),t},Wg=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.axis.ti.Wt(i),t.axis.Ng.Wt(s)})))),Yg=e(10,10);var Hg;t.AxisPosition=void 0,(Hg=t.AxisPosition||(t.AxisPosition={}))[Hg.Top=0]="Top",Hg[Hg.Bottom=1]="Bottom",Hg[Hg.Left=2]="Left",Hg[Hg.Right=3]="Right";const jg=new Set([t.AxisPosition.Top,t.AxisPosition.Bottom,t.AxisPosition.Left,t.AxisPosition.Right]),$g=t=>t.setStopped(!0),Xg=t=>t.getChartInteractionFitByDrag()?t.fit(!0):void 0,Zg=(t,i)=>{const s="linear-highPrecision"===t.lr.type||"linear-highPrecision"===i.lr.type,e="logarithmic"===t.lr.type||"logarithmic"===i.lr.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.lr.type}, y: ${i.lr.type})`;throw new Error(s)}};var Qg,Jg,Kg;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(Qg||(Qg={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(Jg||(Jg={}));class qg extends _f{constructor(i,s,h,r,n,o,a){super(i,s,h,s.Kv("chartXY bg",0),r,s.$s.zs.chartXYBackgroundFillStyle,s.$s.zs.chartXYBackgroundStrokeStyle,s.$s.zs.chartXYTitleFont,s.$s.zs.chartXYTitleFillStyle,a),this.Rk=this.Ov.d2({scaleXYConstructor:Nn}),this.pv=[],this.Sv=[],this.xv=[],this.bv=[],this.Ek=new Map,this.Ok=!0,this.zk=!0,this.Vk=!0,this.gA=2,this.Nk=!0,this.Gk=!0,this.Uk=[],this.Wk=this.ty.lh(this.Rk).ah(De).oh(ah).setMouseInteractions(!1),this.Yk=this.ty.Sh(this.Rk).ph(ah).setMouseInteractions(!1),this.Hk=this.ty.Sh(this.Rk).ph(ah).setMouseInteractions(!1),this.jk=this.zs.chartXYZoomingRectangleFillStyle,this.$k=this.zs.chartXYZoomingRectangleStrokeStyle,this.Xk=this.zs.chartXYFittingRectangleFillStyle,this.Zk=this.zs.chartXYFittingRectangleStrokeStyle,this.Qk=t.MouseStyles.Default,this.Jk=t.MouseStyles.Move,this.Kk=t.MouseStyles.ZoomIn,this.qk=t.MouseStyles.Default,this.tT=void 0,this.iT=tv,this.b_=0,this.xm=t.AutoCursorModes.snapToClosest,this.sT=Wg(this.Sv,this.pv),this.eT=Wg(this.xv,this.bv),this.hT=(t,i,s,e,h)=>{this.sT(e,h),this.eT(h,e),this.Rk.Wt(e,h),this.$s.ie()},this.rT=(t,i)=>{this.Ek.set(t,i)},this.Lg=t=>{const i=this.Sv.findIndex((i=>i.axis===t)),s=this.pv.findIndex((i=>i.axis===t)),e=this.xv.findIndex((i=>i.axis===t)),h=this.bv.findIndex((i=>i.axis===t));i>=0&&this.Sv.splice(i,1),s>=0&&this.pv.splice(s,1),e>=0&&this.xv.splice(e,1),h>=0&&this.bv.splice(h,1),this.Ek.delete(t),this.$s.ie()},this.addAreaSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(i,s);const e=t&&t.baseline?t.baseline:0,h=new(t&&t.type?t.type:ag.Positive)(this,this.rS,this.xx,i,s,this.nT(i),this.nT(s),this.Nv,e,this.zs,this.$s.Gs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length);return this.dS(h),h},this.addAreaRangeSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(i,s);const e=new ug(this,this.rS,this.xx,i,s,this.nT(i),this.nT(s),this.Nv,this.zs,this.$s.Gs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length);return this.dS(e),e},this.oT=!1,this.aT=!1,this.M_=()=>{(this.Ok||this.zk)&&(this.tT=this.engine.setMouseStyle(this.Qk))},this.__=()=>{this.oT=!1,this.engine.restoreMouseStyle(this.tT)},this.w_=(t,i,s)=>{var e,h;const r=Rh(null===(e=this.HA.ko)||void 0===e?void 0:e.chartXYRectangleZoomFitMouseButton,0),n=Rh(null===(h=this.HA.ko)||void 0===h?void 0:h.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.tT);const o=this.ty.$s.Ah(i.clientX,i.clientY);s===r&&(this.Ok||this.zk)?(this.lT(t,o),qh(i)):s===n&&this.Nk&&(this.tT=this.engine.setMouseStyle(this.Jk),this.aT=!0,qh(i))},this.Op=(t,i,s,h,r)=>{var n,o;const a=e(i.clientX,i.clientY),l=Rh(null===(n=this.HA.ko)||void 0===n?void 0:n.chartXYRectangleZoomFitMouseButton,0),u=Rh(null===(o=this.HA.ko)||void 0===o?void 0:o.chartXYPanMouseButton,2);s===l&&(this.Ok||this.zk)?(this.uT(t,h,a),qh(i)):s===u&&this.Nk&&(this.cT(un(r,-1)),qh(i)),this.$s.ie()},this.C_=(t,i,s,h)=>{var r,n;const o=Rh(null===(r=this.HA.ko)||void 0===r?void 0:r.chartXYRectangleZoomFitMouseButton,0),a=Rh(null===(n=this.HA.ko)||void 0===n?void 0:n.chartXYPanMouseButton,2);if(s===o&&(this.Ok||this.zk)){const s=e(i.clientX,i.clientY);this.dT(t,h,s),qh(i)}else s===a&&this.Nk&&qh(i);this.engine.restoreMouseStyle(this.tT),this.uS.getIsUnderMouse()&&(this.tT=this.engine.setMouseStyle(this.Qk)),this.oT=!1,this.aT=!1},this.Ep=(t,i)=>{if(this.Vk){const t=this.ty.$s.Ah(i.clientX,i.clientY);this.fT(t,e(mr(i),mr(i))),qh(i)}},this.AT=(t,i,s,e)=>{},this.gT=(t,i,s,h,r,n)=>{if(this.Nk){const t=e(-(h.x+r.x)/2,-(h.y+r.y)/2);this.cT(t),qh(n),this.aT=!0}if(this.Vk){const t=this.engine.clientLocation2Engine(i.x,i.y),o=this.engine.clientLocation2Engine(s.x,s.y),a=dn(e(Math.abs(t.x-h.x-(o.x-r.x)),Math.abs(t.y-h.y-(o.y-r.y))),e(Math.abs(t.x-o.x),Math.abs(t.y-o.y)));this.forEachAxisX((t=>{t.getChartInteractionZoomByWheel()&&t.hi(t.ti.ts(t.getInterval().start,-a.x),t.ti.ts(t.getInterval().end,a.x),!1,!0,"interactionZoom")})),this.forEachAxisY((t=>{t.getChartInteractionZoomByWheel()&&t.hi(t.ti.ts(t.getInterval().start,-a.y),t.ti.ts(t.getInterval().end,a.y),!1,!0,"interactionZoom")})),qh(n),this.oT=!0}},this.vT=(t,i,s,e)=>{this.aT=!1,this.oT=!1},this.yT=(t,i,s)=>{(this.zk||this.Ok)&&(this.lT(t,i),qh(s))},this.mT=(t,i,s,e,h)=>{(this.zk||this.Ok)&&(this.uT(t,i,s),qh(h))},this.pT=(t,i,s,e)=>{(this.zk||this.Ok)&&(this.dT(t,i,s),qh(e))},this.$s.Mo(mc.Zf),this.setPadding({right:24}),this.ST=s.Ub("chartXY series bg",Qg.seriesBackground),this.bT=[Qg.gridLine0,Qg.gridLine1,Qg.gridLine2].map((t=>s.xT(`chartXY gridline #${t}`,t))),this.Dg=s.xT("chartXY highlighters below",Qg.highlightersBelow),this.xx=s.km("chartXY plotting",Jg.plotting),this.Bg=s.km("chartXY highlighters above",Jg.highlightersAbove),this.ig=s.km("chartXY fg",Jg.fg),this.Rk.x.Gt(0,this.uiScale.x.getCellSize()-(this.Pi.left+this.Pi.right+this.Ja.left+this.Ja.right)),this.Rk.y.Gt(0,this.uiScale.y.getCellSize()-(this.Pi.bottom+this.Pi.top+this.Ja.bottom+this.Ja.top)),this.Rk.Wt(this.uiScale.Hi().x,this.uiScale.Hi().y),this.uS=this.ST.lh(this.Rk).ah(this.zs.chartXYSeriesBackgroundFillStyle).oh(ah),this.cS=this.ig.lh(this.Rk).ah(De).oh(this.zs.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.lS(this.uS,this.cS),this.setSeriesBackgroundEffect(!1),this.Fm=s.Im();const l=Rh(o?o.autoCursorBuilder:void 0,MA);this.Ay=l.Hy(this.Fm,this.Rk,this.Rk,this.zs),yd.gy(this),this.gS(((t,i)=>{yd.vy(this,i)})),this.addAxisX(o&&o.defaultAxisX),this.addAxisY(o&&o.defaultAxisY),this.onResize(this.hT),this.sy.mr("ChartXY"),this.zp=Jn(new qn(this.yT,this.mT,this.pT,1),new to(this.AT,this.gT,this.vT)),this.onSeriesBackgroundMouseEnter(this.M_),this.onSeriesBackgroundMouseLeave(this.__),this.onSeriesBackgroundMouseWheel(this.Ep),this.onSeriesBackgroundMouseDragStart(this.w_),this.onSeriesBackgroundMouseDrag(this.Op),this.onSeriesBackgroundMouseDragStop(this.C_),this.onSeriesBackgroundTouchStart(this.zp.onTouchStart),this.onSeriesBackgroundTouchMove(this.zp.onTouchMove),this.onSeriesBackgroundTouchEnd(this.zp.onTouchEnd),this.setAnimationsEnabled(!0!==(null==o?void 0:o.disableAnimations)&&!1!==(null==o?void 0:o.animationsEnabled)),this.Jv(n,this.Rk)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.eS}setAutoCursor(t){return this.Ay&&t(this.Ay),this.$s.ie(),this}getAutoCursor(){return this.Ay}setAutoCursorMode(t){return this.xm=t,this.$s.ie(),this}getAutoCursorMode(){return this.xm}solveNearest(t){const i=t||this.$s.xo();if(i)return yd.kd(this,Ac(i,this.$s),this.eS)}getMinimumSize(){const t={x:0,y:0};t.x+=this.Pi.left+this.Pi.right+this.Ja.left+this.Ja.right,t.y+=this.Pi.top+this.Pi.bottom+this.Ja.top+this.Ja.bottom;const i=this.sy.de().Id(),s=f(iv(this.iT||tv),this.qv);return t.x+=i.x+s.left+s.right,t.y+=i.y+s.top+s.bottom,this.MT&&(t.x+=this.MT.left,t.x+=this.MT.right,t.y+=this.MT.top,t.y+=this.MT.bottom),t.x+=Yg.x,t.y+=Yg.y,t}addChartMarkerXY(t=_A,i,s){const e=this.Nv(),h=new IA(e,this.uiScale,i||this.getDefaultAxisX(),s||this.getDefaultAxisY(),t,this.Rv(e),this.zs);return this.Xv(h),h}addAxisX(t){var i,s;const{opposite:e,type:h}=gc(t);let r;r="linear"===h.type?this.Ov.d1({dimension:"x",scale1DConstructor:On}):"linear-highPrecision"===h.type?this.Ov.d1({dimension:"x",scale1DConstructor:On}).ls():this.Ov.d1({dimension:"x",scale1DConstructor:Tn}).Ki(h.base),r.Wt(this.Rk.x.Hi());const n=e?this.pv:this.Sv,o=new Sc(this.bT,this.ig,this.ty,this.Dg,this.Bg,this.$s.Gs,r,this.Rk.y,(a=()=>o.rv(),{...bc,...Eg(a)}),this,e?100:0,this.Lg,this.rT,this.zs,this.zh,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iStack:u,iParallel:l}),this.$s.ie(),o}addAxisY(t){var i,s;const{opposite:e,type:h}=gc(t);let r;r="linear"===h.type?this.Ov.d1({dimension:"y",scale1DConstructor:On}):"linear-highPrecision"===h.type?this.Ov.d1({dimension:"y",scale1DConstructor:On}).ls():this.Ov.d1({dimension:"y",scale1DConstructor:Tn}).Ki(h.base),r.Wt(this.Rk.y.Hi());const n=e?this.bv:this.xv,o=new Sc(this.bT,this.ig,this.ty,this.Dg,this.Bg,this.$s.Gs,r,this.Rk.x,(a=()=>o.rv(),{...xc,...Og(a)}),this,e?100:0,this.Lg,this.rT,this.zs,this.zh,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iParallel:l,iStack:u}),this.$s.ie(),o}swapAxes(t,i){const s=[this.Sv,this.xv,this.bv,this.pv],e=s.find((i=>void 0!==i.find((i=>i.axis===t)))),h=s.find((t=>void 0!==t.find((t=>t.axis===i))));if(!e||!h)return this;if(e!==h)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const r=e.find((i=>i.axis===t)),n=e.find((t=>t.axis===i));if(!r||!n)return this;const o=r.iParallel,a=r.iStack;return r.iParallel=n.iParallel,r.iStack=n.iStack,n.iParallel=o,n.iStack=a,this.$s.ie(),this}dispose(){return this.Ay.dispose(),this.ST.Bt(),this.xx.Bt(),this.ig.Bt(),this.bT.forEach((t=>t.Bt())),this.Bg.Bt(),this.Dg.Bt(),this.Fm.Bt(),this.mk().forEach((t=>t.dispose())),cd(this.Rk),this.Sv.slice().forEach((t=>t.axis.dispose())),this.xv.slice().forEach((t=>t.axis.dispose())),this.bv.slice().forEach((t=>t.axis.dispose())),this.pv.slice().forEach((t=>t.axis.dispose())),this.eS.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.Sv,...this.pv].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.xv,...this.bv].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...i){const s=i&&i.length>0?new Set(i):jg;return Lh(Array.from(s).map((i=>{switch(i){default:case t.AxisPosition.Top:return this.pv.map((t=>t.axis));case t.AxisPosition.Bottom:return this.Sv.map((t=>t.axis));case t.AxisPosition.Left:return this.xv.map((t=>t.axis));case t.AxisPosition.Right:return this.bv.map((t=>t.axis))}})))}_T(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.Sv.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.pv.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}forEachAxisY(t){this.xv.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.bv.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}setTitlePosition(t){return this.iT=t,this.$s.ie(),this}getTitlePosition(){return this.iT}wT(t,i,s,e){const h=this.iT||tv;let r,n=f(iv(h),this.qv);this.getTitleFillStyle()===De||0===this.getTitle().length?(r={x:0,y:0},n={left:0,top:0,right:0,bottom:0}):r=this.sy.de().Id();const o=Math.abs(e)+this.Ja.bottom+this.Pi.bottom,a=Math.abs(s)+this.Ja.top+this.Pi.top,l={left:Math.abs(t)+this.Ja.left+this.Pi.left,right:Math.abs(i)+this.Ja.right+this.Pi.right,top:a,bottom:o},u=this.uiScale.ks(),{horizontalAlignment:c,verticalAlignment:d,position:A,marginsWithTitle:g}=sv(h,u,l,r,n,this.Ja);return this.sy.dh(A).dl(c).Al(d),g}uh(t){super.uh(t);for(const t of this.eS)t.Gp();for(const t of this.eS)t.uh();const i=this.xv.map((t=>t.axis.rn().de())),s=this.Sv.map((t=>t.axis.rn().de())),h=this.pv.map((t=>t.axis.rn().de())),r=this.bv.map((t=>t.axis.rn().de()));let n=!1;this.forEachAxis((t=>{(t.un()||t.cn())&&(n=!0)}));const o=this.oT||this.aT||!this.Gk&&n;yd.uy(this,this.uS.getIsUnderMouse(),o,this.eS,(t=>yd.kd(this,t,this.eS)),((t,i)=>t.kd(i,!0)));const a=ev(this.xv,i),u=ev(this.Sv,s),c=ev(this.pv,h),d=ev(this.bv,r),f=this.wT(a.thicknessTotal,d.thicknessTotal,c.thicknessTotal,u.thicknessTotal),A=this.Rk.x.getCellSize()-(f.left+f.right),g=this.Rk.y.getCellSize()-(f.bottom+f.top),v=[f.left,f.right],y=[f.bottom,f.top];this.Rk.x.Gt(0,A),this.Rk.y.Gt(0,g),this.Rk.x.Ni(v),this.Rk.y.Ni(y);const m=(t,i,s,e)=>{let h=0;t.groups.forEach((t=>{let r=0;const n=t.stacks.reduce(((t,i)=>Math.max(t,i.av)),0),o=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()?i.axis.RA+i.axis.EA:0)),0),a=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"pixels"in i.axis.mf?i.axis.mf.pixels:0)),0),l=i-o-a;t.stacks.forEach((e=>{const o=e.axis,a=o.getVisible(),u=Math.max(i-r,0),c=Math.min(a?"pixels"in o.mf?o.mf.pixels:o.mf.relative/t.sumRelativeSize*l:0,u),d=a?s[0]+r+o.RA:0,f=a?s[1]+(i-r)-c-o.RA:0;o.ti.Ni([d,f]),o.uh({av:n,lv:e.lv,dv:c,CT:r,mv:n+e.lv,Av:h}),a&&(r+=c+o.RA+o.EA)})),h+=e*t.thicknessMax}))};m(a,g,y,-1),m(d,g,y,1),m(u,A,v,-1),m(c,A,v,1),this.MT={left:a.thicknessTotal,top:c.thicknessTotal,right:d.thicknessTotal,bottom:u.thicknessTotal},this.uS.dh(e(0,0)).Wt(e(A,g)),this.cS.dh(e(0,0)).Wt(e(A,g));const p=l(this.Rk.x.Gi(),this.Rk.y.Gi(),this.Rk.x.Wi(),this.Rk.y.Wi());this.xx.Lb(p),this.Dg.Lb(p),this.Bg.Lb(p),this.Iv&&this.Iv(),this.Sv.forEach((t=>t.axis.Mv())),this.pv.forEach((t=>t.axis.Mv())),this.xv.forEach((t=>t.axis.Mv())),this.bv.forEach((t=>t.axis.Mv())),super.Qv();for(const t of this.eS)t.$m()}Vt(){for(let t=0;t<this.Sv.length;t+=1)this.Sv[t].axis.Vt();for(let t=0;t<this.pv.length;t+=1)this.pv[t].axis.Vt();for(let t=0;t<this.xv.length;t+=1)this.xv[t].axis.Vt();for(let t=0;t<this.bv.length;t+=1)this.bv[t].axis.Vt();return super.Vt()}nT(t){if(this.Ek.has(t))return this.Ek.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(i,s);let e=Ig.freeform;t&&t.dataPattern&&(e="ProgressiveX"===t.dataPattern.pattern?Ig.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Ig.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Ig.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Ig.verticalRegressive:Ig.freeform);const h=new zg(this,this.rS,this.xx,i,s,this.nT(i),this.nT(s),this.Nv,e,this.zs,this.$s.Gs,tf(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length,t);return this.dS(h),h}addPointLineAreaSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(i,s);const e=new Gg(this,this.rS,this.xx,i,s,this.nT(i),this.nT(s),this.Nv,this.zs,this.$s.Gs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length,t);return this.dS(e),e}addPointSeries(i){const s=(null==i?void 0:i.axisX)||(null==i?void 0:i.xAxis)||this.getDefaultAxisX(),e=(null==i?void 0:i.axisY)||(null==i?void 0:i.yAxis)||this.getDefaultAxisY();Zg(s,e);const h=i&&i.pointShape&&Object.values(t.PointShape).includes(i.pointShape)?"string"==typeof i.pointShape?t.PointShape[i.pointShape]:i.pointShape:t.PointShape.Square,r=new Vg(this,this.rS,this.xx,s,e,this.nT(s),this.nT(e),this.Nv,h,this.zs,this.$s.Gs,void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.eS.length,i);return this.dS(r),r}addPointLineSeries(i){const s=(null==i?void 0:i.axisX)||(null==i?void 0:i.xAxis)||this.getDefaultAxisX(),e=(null==i?void 0:i.axisY)||(null==i?void 0:i.yAxis)||this.getDefaultAxisY();Zg(s,e);const h=i&&i.pointShape&&Object.values(t.PointShape).includes(i.pointShape)?"string"==typeof i.pointShape?t.PointShape[i.pointShape]:i.pointShape:t.PointShape.Square;let r=Ig.freeform;i&&i.dataPattern&&(r="ProgressiveX"===i.dataPattern.pattern?Ig.horizontalProgressive:"ProgressiveY"===i.dataPattern.pattern?Ig.verticalProgressive:"RegressiveX"===i.dataPattern.pattern?Ig.horizontalRegressive:"RegressiveY"===i.dataPattern.pattern?Ig.verticalRegressive:Ig.freeform);const n=new gg(this,this.rS,this.xx,s,e,this.nT(s),this.nT(e),this.Nv,r,h,this.zs,this.$s.Gs,tf(i&&i.dataPattern),void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.eS.length,i);return this.dS(n),n}addStepSeries(i){const s=(null==i?void 0:i.axisX)||(null==i?void 0:i.xAxis)||this.getDefaultAxisX(),e=(null==i?void 0:i.axisY)||(null==i?void 0:i.yAxis)||this.getDefaultAxisY();Zg(s,e);const h=i&&i.pointShape?i.pointShape:t.PointShape.Square,r=i&&i.mode?i.mode:t.StepOptions.before,n=new Pg(this,this.rS,this.xx,s,e,this.nT(s),this.nT(e),this.Nv,h,r,this.zs,this.$s.Gs,tf(i&&i.dataPattern),void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.eS.length,i);return this.dS(n),n}addSplineSeries(i){const s=(null==i?void 0:i.axisX)||(null==i?void 0:i.xAxis)||this.getDefaultAxisX(),e=(null==i?void 0:i.axisY)||(null==i?void 0:i.yAxis)||this.getDefaultAxisY();Zg(s,e);const h=i&&i.pointShape?i.pointShape:t.PointShape.Square;let r=Ig.freeform;i&&i.dataPattern&&(r="ProgressiveX"===i.dataPattern.pattern?Ig.horizontalProgressive:"RegressiveX"===i.dataPattern.pattern?Ig.horizontalRegressive:Ig.freeform);const n=new pg(this,this.rS,this.xx,s,e,this.nT(s),this.nT(e),this.Nv,r,h,this.zs,this.$s.Gs,tf(i&&i.dataPattern),void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.eS.length,i);return this.dS(n),n}addRectangleSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(i,s);const e=new $A(this,this.rS,this.xx,i,s,this.nT(i),this.nT(s),this.Nv,this.zs,this.$s.Gs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length);return this.dS(e),e}addPolygonSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),e=new HA(this,this.rS,this.xx,i,s,this.nT(i),this.nT(s),this.Nv,this.zs,this.$s.Gs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length);return this.dS(e),e}addSegmentSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(i,s);const e=new ZA(this,this.rS,this.xx,i,s,this.nT(i),this.nT(s),this.Nv,this.zs,this.$s.Gs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length);return this.dS(e),e}addEllipseSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(i,s);const e=new WA(this,this.rS,this.xx,i,s,this.nT(i),this.nT(s),this.Nv,this.zs,this.$s.Gs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length);return this.dS(e),e}addBoxSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(i,s);const e=t&&t.dimensionStrategy?t.dimensionStrategy:bc,h=new GA(this,this.rS,this.xx,i,s,this.nT(i),this.nT(s),this.Nv,e,this.zs,this.$s.Gs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length);return this.dS(h),h}addHeatmapGridSeries(t){const i=t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t.yAxis?t.yAxis:this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new KA(this,this.rS,this.xx,i,s,this.nT(i),this.nT(s),this.Nv,t,this.zs,this.$s.Gs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length),this.dS(e),e}addHeatmapScrollingGridSeries(t){const i=t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t.yAxis?t.yAxis:this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new tg(this,this.rS,this.xx,i,s,this.nT(i),this.nT(s),this.Nv,t,this.zs,this.$s.Gs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length),this.dS(e),e}addOHLCSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(i,s);const e=new(t&&t.type?t.type:Rg.Candlesticks)(this,this.rS,this.xx,i,s,this.nT(i),this.nT(s),this.Nv,this.zs,this.$s.Gs);return this.dS(e),e}addOnScreenMenu(t,i){return new Ng(this.HA,t,this,i)}setMouseBackgroundStyle(i=t.MouseStyles.Default){return this.Qk=i,this}setMouseZoomStyle(i=t.MouseStyles.ZoomIn){return this.Kk=i,this}setMouseFitStyle(i=t.MouseStyles.Default){return this.qk=i,this}setMousePanStyle(i=t.MouseStyles.Move){return this.Jk=i,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.Ok=t,this}getMouseInteractionRectangleZoom(){return this.Ok}setMouseInteractionRectangleFit(t){return this.zk=t,this}getMouseInteractionRectangleFit(){return this.zk}setMouseInteractionPan(t){return this.Nk=t,this}getMouseInteractionPan(){return this.Nk}setMouseInteractionWheelZoom(t){return this.Vk=t,this}getMouseInteractionWheelZoom(){return this.Vk}setZoomingRectangleFillStyle(t){return this.jk="function"==typeof t?t(this.jk):t,this.$s.ie(),this}getZoomingRectangleFillStyle(){return this.jk}setZoomingRectangleStrokeStyle(t){return this.$k="function"==typeof t?t(this.$k):t,this.$s.ie(),this}getZoomingRectangleStrokeStyle(){return this.$k}setFittingRectangleFillStyle(t){return this.Xk="function"==typeof t?t(this.Xk):t,this.$s.ie(),this}getFittingRectangleFillStyle(){return this.Xk}setFittingRectangleStrokeStyle(t){return this.Zk="function"==typeof t?t(this.Zk):t,this.$s.ie(),this}getFittingRectangleStrokeStyle(){return this.Zk}addLegendBox(t,i){const s=super.addLegendBox(t,i);if(void 0===i||i===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(Do.RightCenter).setPosition({x:this.uiScale.x.Kt(this.uiScale.x.Ui()-this.Ja.right),y:fh(this.Rk.y.Kt(this.Rk.y.Gi()+this.Rk.y.Wi()/2),this.Rk.y,this.uiScale.y)});else{const t=this.iT||tv,i=sv(t,this.uiScale.ks(),this.Ja,this.getTitleFillStyle()===De||0===this.getTitle().length?{x:0,y:0}:this.sy.de().Id(),f(iv(t),this.qv),this.Ja).marginsWithTitle.top;s.setOrigin(Do.RightTop).setPosition(Ah({x:this.pixelScale.x.getInnerEnd()-this.Ja.right,y:this.pixelScale.y.getInnerEnd()-i},this.pixelScale,this.uiScale))}return s}lT(t,i){this.forEachAxis($g);const s=Ah(this.engine.clientLocation2Engine(i.x,i.y),this.ty.$s.ti,this.Rk);this.Wk.dh(s).Wt(e(0,0))}uT(t,i,s){const h=Ah(this.engine.clientLocation2Engine(i.x,i.y),this.ty.$s.ti,this.Rk),r=Ah(this.engine.clientLocation2Engine(s.x,s.y),this.ty.$s.ti,this.Rk),n=Xr(r.x,this.Rk.x.getInnerStart(),this.Rk.x.getInnerEnd())&&Xr(r.y,this.Rk.y.getInnerStart(),this.Rk.y.getInnerEnd()),o=e(Math.min(h.x,r.x),Math.min(h.y,r.y)),a=e(Math.max(h.x,r.x),Math.max(h.y,r.y));this.Wk.dh(o).Wt(dn(a,o));const l=Math.min(a.x-o.x,a.y-o.y)>=10;n&&l&&a.x===h.x&&this.zk?(this.oT=!0,this.Wk.ah(this.Xk).oh(this.Zk),this.Yk.ph(this.Zk).xh(h).bh(r),this.Hk.ph(this.Zk).xh(e(h.x,r.y)).bh(e(r.x,h.y)),this.tT=this.engine.setMouseStyle(this.qk,this.tT)):n&&l&&(this.Ok||this.zk)?(this.oT=!0,this.Wk.ah(this.jk).oh(this.$k),this.Yk.ph(ah),this.Hk.ph(ah),this.tT=this.engine.setMouseStyle(this.Kk,this.tT)):(this.oT=!1,this.Wk.oh(ah).ah(De),this.Yk.ph(ah),this.Hk.ph(ah),this.engine.restoreMouseStyle(this.tT)),this.$s.ie()}dT(t,i,s){if(this.oT){const t=Ah(this.engine.clientLocation2Engine(s.x,s.y),this.ty.$s.ti,this.Rk),e=Xr(t.x,this.Rk.x.getInnerStart(),this.Rk.x.getInnerEnd())&&Xr(t.y,this.Rk.y.getInnerStart(),this.Rk.y.getInnerEnd()),h=s.x>=i.x||!this.zk?"zoom":"fit",r=this.Wk.ll(),n=cn(r,this.Wk.Hi()),o=Math.min(this.Wk.Hi().x,this.Wk.Hi().y)>=10;e&&o&&"zoom"===h&&this.Ok?(this.forEachAxisX((t=>{if(t.getChartInteractionZoomByDrag()){const i=Ah(r,this.Rk,t.Gg).x,s=Ah(n,this.Rk,t.Gg).x;t.hi(i,s,!0,!0,"interactionSetInterval")}})),this.forEachAxisY((t=>{if(t.getChartInteractionZoomByDrag()){const i=Ah(r,this.Rk,t.Gg).y,s=Ah(n,this.Rk,t.Gg).y;t.hi(i,s,!0,!0,"interactionSetInterval")}}))):e&&o&&"fit"===h&&this.zk&&this.forEachAxis(Xg)}this.Wk.oh(ah).ah(De),this.Yk.ph(ah),this.Hk.ph(ah),this.$s.ie()}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}cT(t){this.forEachAxisX((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis($g),this.forEachAxisX((s=>{s.zoom(s.ti.Kt(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.ti.Kt(t.y),i.y)}))}fT(t,i){this.forEachAxisX((s=>{s.getChartInteractionZoomByWheel()&&($g(s),s.zoom(s.ti.Kt(t.x),i.x))})),this.forEachAxisY((s=>{s.getChartInteractionZoomByWheel()&&($g(s),s.zoom(s.ti.Kt(t.y),i.y))}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}If(){const t=[];return this.forEachAxis((i=>i.tv((i=>t.push(i))))),super.If().concat(t)}mk(){return this.Uk}Je(){return this.hy(this.xx)}setAutoCursorEnabledDuringAxisAnimation(t){return this.Gk=t,this}getAutoCursorEnabledDuringAxisAnimation(){return this.Gk}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,h=i,r=Mc(h)?h:Hn(h)?this.pixelScale:void 0;if(r&&Wn(s)){const t=Ah(e,r,this.engine.scale);return this.$s.fa({engineX:t.x,engineY:t.y})}if(r&&Hn(s))return Ah(e,r,this.pixelScale);if(r&&Mc(s))return Ah(e,r,s)}else{const s=t;if(Hn(i)){const t=this.$s.da(s);return Ah({x:t.engineX,y:t.engineY},this.engine.scale,this.pixelScale)}if(Mc(i)){const t=i,e=this.$s.da(s);return Ah({x:e.engineX,y:e.engineY},this.engine.scale,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}t.ChartXYTitlePositionOptions=void 0,(Kg=t.ChartXYTitlePositionOptions||(t.ChartXYTitlePositionOptions={})).CenterTop="center-top",Kg.RightTop="right-top",Kg.LeftTop="left-top",Kg.CenterBottom="center-bottom",Kg.RightBottom="right-bottom",Kg.LeftBottom="left-bottom",Kg.SeriesCenterTop="series-center-top",Kg.SeriesRightTop="series-right-top",Kg.SeriesLeftTop="series-left-top",Kg.SeriesCenterBottom="series-center-bottom",Kg.SeriesRightBottom="series-right-bottom",Kg.SeriesLeftBottom="series-left-bottom";const tv=t.ChartXYTitlePositionOptions.CenterTop,iv=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return Cr(0,`Unexpected ChartXY title position selection ${t}`)},sv=(t,i,s,e,h,r)=>{e.x,h.left,h.right;const n=e.y+h.bottom+h.top,o=(h.left-h.right)*i.x,a=(h.bottom-h.top)*i.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(r.top+h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:s.left*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-s.right*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:s.left*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-s.right*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s}}return Cr(0,`Unexpected ChartXY title position selection ${t}`)},ev=(t,i)=>{const s=[];t.forEach(((t,e)=>{const h=i[e],r=s.find((i=>i.iParallel===t.iParallel));r?(r.stacks.push({...t,...h}),r.stacks.sort(((t,i)=>t.iStack-i.iStack))):s.push({iParallel:t.iParallel,stacks:[{...t,...h}]})}));const e=s.map((t=>{const i=t.stacks.reduce(((t,i)=>Math.max(t,i.av)),0),s=t.stacks.reduce(((t,i)=>Math.max(t,i.lv)),0),e=t.stacks.reduce(((t,i)=>Math.max(t,i.pf)),0),h=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"relative"in i.axis.mf?i.axis.mf.relative:0)),0);return{...t,ticksSizeMax:i,titleSizeMax:s,sumRelativeSize:h,thicknessMax:e}}));return e.sort(((t,i)=>t.iParallel-i.iParallel)),{groups:e,thicknessTotal:e.reduce(((t,i)=>t+i.thicknessMax),0)}};class hv{constructor(i,s,e,h,r,n,o){this.coordsRelative="relative",this.coordsClient="client",this.Ct=new Ze,this.kT=[],this.TT=new Map,this.eS=new Map,this.FT=(t,i,s)=>{0!==this.eS.size&&void 0!==[...this.eS.values()].find((({series:t})=>!0===t.getVisible()))||this.IT.hi(i,s,!1,!1,"zoomBandChart"),this.PT.$s.ie()},s.$s.Mo(mc.$f),this.HA=i,this.DT=(null==n?void 0:n.orientation)||"x",this.BT=void 0!==(null==n?void 0:n.useSharedValueAxis)&&n.useSharedValueAxis,this.LT=h,this._c="x"===this.DT?bc:xc;const a={...n,defaultAxisX:this._c.getWidth({x:null==n?void 0:n.defaultAxis,y:void 0}),defaultAxisY:this._c.getHeight({x:null==n?void 0:n.defaultAxis,y:void 0})};this.PT=new qg(i,s,e,Ph,r,a,o).setTitle("Zoom Band Chart").setMouseInteractions(!1).setAutoCursorMode(t.AutoCursorModes.disabled),this.engine=this.PT.engine;const l=this.PT.getDefaultAxisX().setMouseInteractions(!1),u=this.PT.getDefaultAxisY().setMouseInteractions(!1);this.IT=this._c.getWidth({x:l,y:u}).setScrollStrategy(Yo.fitting).setAnimationScroll(!1).setStrokeStyle(ah).setTickStrategy(Ho.Empty),(null==n?void 0:n.useSharedValueAxis)?this.RT=this._c.getHeight({x:l,y:u}):this._c.getHeight({x:l,y:u}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new Ee({color:this.getTheme().isDark?me(0,0,0,180):me(255,255,255,180)});this.ET=[this.PT.ig.lh(this.IT.Gg).ah(c).oh(ah),this.PT.ig.lh(this.IT.Gg).ah(c).oh(ah)];const d=this.PT.ig.gv(this.IT.Gg).ph(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.OT={collection:d,members:new Array(5).fill(0).map((t=>d.Sn()))};const f=this.getTheme(),A="function"==typeof f.zoomBandChartKnobFillStyle?f.zoomBandChartKnobFillStyle(this.HA.ke):f.zoomBandChartKnobFillStyle||De;this.zT=[this.PT.ig.lh(this.PT.pixelScale).ah(A).oh(ah),this.PT.ig.lh(this.PT.pixelScale).ah(A).oh(ah)],this.VT=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.NT()}add(t){var i,s,e,h,r;const n=this.kT.map((t=>t.axis)),o="x"===this.DT?t.axisX:t.axisY;if(!n.includes(o)){const t=o.onIntervalChange(this.FT);this.kT.push({axis:o,deattach:()=>{o.offIntervalChange(t)}}),this.IT.Ir(o.Fr()),this.GT&&this.GT.remove(),this.GT=vh(...this.kT.map((t=>t.axis)))}const a=this._c.getHeight({x:t.axisX,y:t.axisY});let l;if(this.BT)l=this.RT;else{const t=this.TT.get(a);t?l=t:(l=this._c.getHeight({x:this.PT.addAxisX.bind(this.PT),y:this.PT.addAxisY.bind(this.PT)})(),this.UT(l)),this.TT.set(a,l)}const u=this._c.getWidth({x:this.IT,y:l}),c=this._c.getHeight({x:this.IT,y:l});let d;const f=[],A=(t,i)=>{const s=t=>{if(0!==t.length)if("x"in t[0]){const s=t;i.add(s)}else{const s=t,e=[];for(let t=0;t<s.length;t+=1){const i=s[t];e.push({x:i[0],y:i[4]})}i.add(e)}},e=t.V_();s(e);const h=t.N_(((t,i)=>s(i)));f.push((()=>t.G_(h)));const r=t.U_((()=>i.clear()));f.push((()=>{t.W_(r)}))};if(t instanceof Gg)d=this.PT.addPointLineAreaSeries({...t.Co,xAxis:u,yAxis:c}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setCurvePreprocessing(t.getCurvePreprocessing()),d.setDataSet(t.Lk());else if(t instanceof zg||t instanceof Dg){const s=this.PT.addLineSeries({xAxis:u,yAxis:c,dataPattern:t instanceof zg?null===(i=t.Co)||void 0===i?void 0:i.dataPattern:void 0});if(t instanceof zg)s.setStrokeStyle(t.getStrokeStyle());else{const i=rv(t);i&&s.setStrokeStyle(i)}A(t,s),d=s}else if(t instanceof rg){const i=this.PT.addAreaSeries({xAxis:u,yAxis:c,baseline:t.eC}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());A(t,i),d=i}else if(t instanceof Vg){const i=this.PT.addPointSeries({xAxis:u,yAxis:c,pointShape:null===(s=t.Co)||void 0===s?void 0:s.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Pg){const i=this.PT.addStepSeries({xAxis:u,yAxis:c,pointShape:null===(e=t.Co)||void 0===e?void 0:e.pointShape,mode:t.ct}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof pg){const i=this.PT.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(h=t.Co)||void 0===h?void 0:h.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof gg){const i=this.PT.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(r=t.Co)||void 0===r?void 0:r.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof ug){const i=this.PT.addAreaRangeSeries({xAxis:u,yAxis:c}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.V_()),s=t.N_(((t,s)=>i.add(s)));f.push((()=>t.G_(s))),d=i;const e=t.U_((()=>i.clear()));f.push((()=>{t.W_(e)}))}else{if(!(t instanceof JA))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const i=this.PT.addHeatmapGridSeries({xAxis:u,yAxis:c,...t.uw}),s=()=>{i.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};s(),d=i,t.fw(d);const e=t.yw(((t,s)=>i.invalidateIntensityValues(s))),h=t.Aw(s);f.push((()=>{t.mw(e),t.gw(h)}));const r=t.U_((()=>i.clear()));f.push((()=>{t.W_(r)}))}}d.setMouseInteractions(!1);const g=t.onVisibleStateChanged(((t,i)=>{d.setVisible(i)}));f.push((()=>{t.offVisibleStateChanged(g)}));const v=t.onHighlight(((t,i)=>d.setHighlight(i)));f.push((()=>{t.offHighlight(v)}));const y=t.onDispose((()=>{this.disposeSeries(t)}));return f.push((()=>{t.offDispose(y)})),this.eS.set(t,{series:d,clearReferences:()=>f.forEach((t=>t()))}),d}disposeSeries(t){const i=this.eS.get(t);if(i){const{clearReferences:s}=i;s(),this.eS.delete(t),i.series.dispose();const e=this._c.getHeight({x:t.axisX,y:t.axisY}),h=this.TT.get(e);h&&0===h.rv().length&&(this.TT.delete(e),h.dispose())}const s="x"===this.DT?t.axisX:t.axisY;if(!Array.from(this.eS.keys()).find((t=>s===("x"===this.DT?t.axisX:t.axisY)))){const t=this.kT.findIndex((t=>t.axis===s));this.kT[t].deattach(),this.kT.splice(t,1)}return this}setDefocusOverlayFillStyle(t){return this.ET.forEach((i=>i.ah(t))),this.PT.$s.ie(),this}getDefocusOverlayFillStyle(){return this.ET[0].pr()}setSplitterStrokeStyle(t){return this.OT.collection.ph(t),this.PT.$s.ie(),this}getSplitterStrokeStyle(){return this.OT.collection.Yu()}setKnobFillStyle(t){return this.zT.forEach((i=>i.ah(t))),this.PT.$s.ie(),this}getKnobFillStyle(){return this.zT[0].pr()}setKnobStrokeStyle(t){return this.zT.forEach((i=>i.oh(t))),this.PT.$s.ie(),this}getKnobStrokeStyle(){return this.zT[0].Yo()}setKnobSize(t){return this.VT=t,this.PT.$s.ie(),this}getKnobSize(){return this.VT}getDefaultAxisX(){return this.PT.getDefaultAxisX()}getDefaultAxisY(){return this.PT.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}UT(t){t.setTickStrategy(Ho.Empty).setMouseInteractions(!1).setNibStyle(ah).setStrokeStyle(ah)}NT(){let i;const s=(t,i,s)=>{var e,h;const r="x"===this.DT?null===(e=Array.from(this.eS.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.eS.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.IT.getInterval();Math.abs(this.IT.ti.qt(t)-this.IT.ti.qt(i))<10||Math.sign(i-t)!==Math.sign(n.end-n.start)||Math.min(t,i)<Math.min(o.start,o.end)||Math.max(t,i)>Math.max(o.start,o.end)&&Math.max(n.start,n.end)<Math.max(t,i)||r.hi(t,i,s,!0,"zoomBandChart")};this.zT.forEach(((e,h)=>{e.setMouseEnterEventHandler((()=>{i=this.engine.setMouseStyle(this._c.getWidth({x:t.MouseStyles.Horizontal,y:t.MouseStyles.Vertical}),i)})),e.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(i)}));const r=t=>{var i,e;const r="x"===this.DT?null===(i=Array.from(this.eS.keys())[0])||void 0===i?void 0:i.axisX:null===(e=Array.from(this.eS.keys())[0])||void 0===e?void 0:e.axisY;if(!r)return;const n=this._c.getWidth(this.PT.translateCoordinate(t,this.PT.coordsAxis)),o=r.getInterval(),a=0===h?n:o.start,l=1===h?n:o.end;s(a,l,!1),qh(t)};e.setMouseDragEventHandler(((t,i,s,e,h)=>r(i)));const n=Jn(new qn(void 0,((t,i,s,e,h)=>r(h))));e.setTouchStartEventHandler(n.onTouchStart),e.setTouchMoveEventHandler(n.onTouchMove),e.setTouchEndEventHandler(n.onTouchEnd)})),this.PT.onSeriesBackgroundMouseEnter((()=>{i=this.engine.setMouseStyle(t.MouseStyles.Move,i)})),this.PT.onSeriesBackgroundMouseLeave((()=>{this.engine.restoreMouseStyle(i)}));const e=(t,i)=>{var e,h;const r="x"===this.DT?null===(e=Array.from(this.eS.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.eS.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.IT.ti.ts(n.start,this._c.getWidth(t)),a=this.IT.ti.ts(n.end,this._c.getWidth(t));s(o,a,!1),qh(i)};this.PT.onSeriesBackgroundMouseDrag(((t,i,s,h,r)=>e(r,i)));const h=Jn(new qn(void 0,((t,i,s,h,r)=>e(h,r))));this.PT.onSeriesBackgroundMouseWheel(((t,i)=>{var e,h;const r="x"===this.DT?null===(e=Array.from(this.eS.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.eS.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.IT.getInterval(),a=this._c.getWidth(this.PT.translateCoordinate(i,this.PT.coordsAxis)),l=this.IT.ti.qt(n.start),u=this.IT.ti.qt(n.end),c=this.IT.ti.qt(a),d=Bh((c-l)/(u-l),0,1),f=.2*Math.abs(u-l)*r.gA,A=d*f*-Math.sign(i.deltaY),g=(1-d)*f*Math.sign(i.deltaY),v=Bh(this.IT.ti.ts(n.start,A),o.start,o.end),y=Bh(this.IT.ti.ts(n.end,g),o.start,o.end);s(v,y,!1),qh(i)})),this.PT.onSeriesBackgroundTouchStart(h.onTouchStart),this.PT.onSeriesBackgroundTouchMove(h.onTouchMove),this.PT.onSeriesBackgroundTouchEnd(h.onTouchEnd),this.ET.forEach(((e,h)=>{e.setMouseEnterEventHandler((()=>{i=this.engine.setMouseStyle(t.MouseStyles.Point,i)})),e.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(i)}));const r=t=>{var i,e;const h="x"===this.DT?null===(i=Array.from(this.eS.keys())[0])||void 0===i?void 0:i.axisX:null===(e=Array.from(this.eS.keys())[0])||void 0===e?void 0:e.axisY;if(!h)return;const r=this._c.getWidth(this.PT.translateCoordinate(t,this.PT.coordsAxis)),n=h.getInterval(),o=this.IT.getInterval(),a=Bh(r-(n.end-n.start)/2,Math.min(o.start,o.end),Math.max(o.start,o.end)-Math.abs(n.end-n.start)),l=a+(n.end-n.start);s(a,l,!0),qh(t)};e.setMouseClickEventHandler(((t,i)=>r(i)));const n=Jn(new class{constructor(t,i=300){this.fe=!1,this.Ae=[],this.ge=300,this.ve=t,this.ge=i}ce(t,i){const s=Ch.performance.now();let e=!1;for(let t=0;t<this.Ae.length;t+=1)s-this.Ae[t].time>=this.ge?(this.Ae.splice(t,1),t-=1):this.Ae[t].state&&(e=!0);return this.fe?0===i.interactions.length&&(this.Ae.push({state:!1,time:s}),this.fe=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Ae.push({state:!0,time:s}),e=!0,this.fe=!0),e}de(t,i,s){if(s&&!this.fe){const s=this.Ae.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=1&&s.off>=1&&(this.ve(t,i),this.Ae.length=0)}}}(((t,i)=>r(i))));e.setTouchStartEventHandler(n.onTouchStart),e.setTouchMoveEventHandler(n.onTouchMove),e.setTouchEndEventHandler(n.onTouchEnd)}))}getSizePixels(){return this.PT.getSizePixels()}onResize(t){return this.PT.onResize(((i,s,e,h,r)=>t(this,s,e,h,r)))}offResize(t){return this.PT.offResize(t)}dn(t){this.PT.dn(t)}getMinimumSize(){return this.PT.getMinimumSize()}Vt(){return this.PT.Vt()}Nt(){return this.PT.Nt()}uh(t){var i,s,e,h;const r=xr(Array.from(this.eS.keys()).map((t=>t.chart))),n="x"===this.DT?null===(i=Array.from(this.eS.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this.eS.keys())[0])||void 0===s?void 0:s.axisY;if("x"===this.DT){const t=r.reduce(((t,i)=>{let s=0;return i.forEachAxisY((t=>{s+=0===t.Og?t._v():0})),Math.max(t,s)}),0),i=r.reduce(((t,i)=>{let s=0;return i.forEachAxisY((t=>{s+=100===t.Og?t._v():0})),Math.max(t,s)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=r.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);null===(e=this.getDefaultAxisY())||void 0===e||e.setThickness(t),this.PT.setPadding({left:s+(0===r.length?10:0),right:h+i+(0===r.length?10:0)})}else{const t=r.reduce(((t,i)=>{let s=0;return i.forEachAxisX((t=>{s+=0===t.Og?t._v():0})),Math.max(t,s)}),0),i=r.reduce(((t,i)=>{let s=0;return i.forEachAxisX((t=>{s+=100===t.Og?t._v():0})),Math.max(t,s)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),e=r.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);null===(h=this.getDefaultAxisX())||void 0===h||h.setThickness(t),this.PT.setPadding({bottom:s+(0===r.length?10:0),top:e+i+(0===r.length?10:0)})}this.PT.uh(t);const o=this.IT.getInterval().start,a=this.IT.getInterval().end,l=Bh(n?n.getInterval().start:o,o,a),u=Bh(n?n.getInterval().end:a,o,a),c=this._c.getHeight(this.PT.Rk.getInnerIntervalPixels());this.ET[0].dh(this._c.toPoint(o,0)).Wt(this._c.toPoint(l-o,c)),this.ET[1].dh(this._c.toPoint(u,0)).Wt(this._c.toPoint(a-u,c)),this.OT.members[0].yv(this._c.toPoint(o,c),this._c.toPoint(l,c)),this.OT.members[1].yv(this._c.toPoint(l,c),this._c.toPoint(l,0)),this.OT.members[2].yv(this._c.toPoint(l,0),this._c.toPoint(u,0)),this.OT.members[3].yv(this._c.toPoint(u,0),this._c.toPoint(u,c)),this.OT.members[4].yv(this._c.toPoint(u,c),this._c.toPoint(a,c));const d=Ah(this._c.toPoint(l,c/2),this.IT.Gg,this.PT.pixelScale),f=Ah(this._c.toPoint(u,c/2),this.IT.Gg,this.PT.pixelScale),A=this.VT;this.zT[0].dh({x:d.x-A.x/2,y:d.y-A.y/2}).Wt({x:A.x,y:A.y})._r(this._c.getWidth({x:0,y:90})),this.zT[1].dh({x:f.x-A.x/2,y:f.y-A.y/2}).Wt({x:A.x,y:A.y})._r(this._c.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.PT.setSeriesBackgroundFillStyle(t),this.PT.$s.ie(),this}getSeriesBackgroundFillStyle(){return this.PT.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.PT.setSeriesBackgroundStrokeStyle(t),this.PT.$s.ie(),this}getSeriesBackgroundStrokeStyle(){return this.PT.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.PT.setSeriesBackgroundEffect(t),this.PT.$s.ie(),this}getSeriesBackgroundEffect(){return this.PT.getSeriesBackgroundEffect()}getTheme(){return this.PT.getTheme()}setTitle(t){return this.PT.setTitle(t),this}getTitle(){return this.PT.getTitle()}setTitleFillStyle(t){return this.PT.setTitleFillStyle(t),this}getTitleFillStyle(){return this.PT.getTitleFillStyle()}setTitleFont(t){return this.PT.setTitleFont(t),this}getTitleFont(){return this.PT.getTitleFont()}setTitleMargin(t){return this.PT.setTitleMargin(t),this}getTitleMargin(){return this.PT.getTitleMargin()}setPadding(t){return this.PT.setPadding(t),this}getPadding(){return this.PT.getPadding()}setBackgroundFillStyle(t){return this.PT.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.PT.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.PT.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.PT.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return ld(t,i,s,this.PT.pixelScale,this.PT.$s)}addUIElement(t,i){return this.PT.addUIElement(t,i)}addLegendBox(t,i){return this.PT.addLegendBox(t,i)}getLegendBoxes(){return this.PT.getLegendBoxes()}saveToFile(t,i,s){return this.PT.saveToFile(t,i,s),this}dispose(){return this.PT.dispose(),this.TT.clear(),this.eS.clear(),this.LT(this),this}isDisposed(){return this.PT.isDisposed()}onDispose(t){return this.PT.onDispose((()=>t(this)))}offDispose(t){return this.PT.offDispose(t)}}const rv=t=>{if("getStrokeStyle"in t)return t.getStrokeStyle();const i=(t=>t instanceof zg||t instanceof rg?t.getStrokeStyle().getFillStyle():t instanceof Vg||t instanceof gg?t.getPointFillStyle():void 0)(t);return i?new so({thickness:2,fillStyle:i}):void 0};class nv extends rA{constructor(i,s,e,h,r,n,o){super(i,s,e,h,r,o),this.At="Point Series",this.mM=[],this.pM=!1,this.wM=3,this.Za=0,this.Mm=nA,this.sh=yr(this.zs.polarPointSeriesFillStyle,n),this.Ud=new vu({dataPattern:null}),this.bl=i.jd(h).ph(ah).Hd(De).Yd(this.sh).$d(t.PointShape.Circle).Kd(this.wM).Xs(this.getHighlight()).Wd(this.Ud),this.Zs(this.bl)}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}setData(t){return 0!==this.mM.length&&this.Es.$s.Mo(mc.tA),this.mM=lA(t),this.pM=!0,this.fM=aA(this.mM),this.ae.ie(),this}setPointAlignment(t){return this.bl.Pk(t),this.Es.$s.ie(),this}getPointAlignment(){return this.bl.Dk()}setPointFillStyle(t){this.sh="function"==typeof t?t(this.sh):t;const i=this.sh;return this.bl.Yd(i),this.ae.ie(),this}getPointFillStyle(){return this.sh}setPointSize(t){return this.wM=t,this.bl.Kd(t),this.ae.ie(),this}getPointSize(){return this.wM}setPointShape(t){return this.bl.$d(t),this.Es.$s.ie(),this}getPointShape(){return this.bl.Xd()}setPointRotation(t){return this.Za=t,this.bl.Zd(t),this.ae.ie(),this}getPointRotation(){return this.Za}Dp(){return this.Lp&&this.mM.length>0&&this.getVisible()}fh(t,i){t.Xs(i),this.ae.ie()}kd(t,i){const s=Ah(t,this.Es.$s.ti,this.scale),e=this.Ud.kd(s,!1,this.scale,this.Es.pixelScale);if(!e)return;const{angle:h,amplitude:r}=uA(e,this.scale);return Nd(e,this.scale,this.Mm(new _d,this,h,r,this.Es.getAmplitudeAxis().formatValue).Pc(),this,"color"in e&&void 0!==e.color&&Ve(this.sh)?new Ee({color:be(e.color)}):this.sh)}solveNearestFromScreen(t){return this.kd(Ac(t,this.Es.$s),!1)}uh(){if(this.pM||this.scale._M()){const t=oA(this.mM,this.scale),i=qr(t);this.Ud.clear().add(t),this.bl.wa(i),this.pM=!1,this.bl.de()}}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{fill:this.sh}),this}oe(){return this.ee||this.getPointShape()}}class ov{constructor(t,i,s,e){this.Ct=new Ze,this.WT=!1,this.Es=t,this.YT=i,this.eS=s,this.bl=e}setGeometry(t){return this.HT=t,this.WT=!0,this.Es.$s.ie(),this}getGeometry(){return this.HT}setMouseInteractions(t){return this.bl.setMouseInteractions(t),this}dispose(){return this.bl.dispose(),this.YT(this),this.Ct.emit("dispose",this),this}onDispose(t){return this.Ct.on("dispose",t)}offDispose(t){return this.Ct.off(t,"dispose")}setVisible(t){const i=this.bl.getVisible()!==t;return this.bl.setVisible(t),i&&this.Ct.emit("visibleStateChanged",this,t),this.Es.$s.ie(),this}getVisible(){return this.bl.getVisible()}onVisibleStateChanged(t){return this.Ct.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.Ct.off(t,"visibleStateChanged")}}class av extends rA{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.At="Polygon Series",this.jT=[],this.$T=[],this.Mm=nA,this.XT=t=>{const i=this.$T.indexOf(t);i>=0&&this.$T.splice(i,1);const s=this.jT.findIndex((i=>i===t.bl));s>=0&&this.jT.splice(s,1),this.ae.ie()},this.sh=yr(this.zs.polarPolygonSeriesFillStyle,r),this.eh=yr(this.zs.polarPolygonSeriesStrokeStyle,r)}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}addPolygon(){const t=new ov(this.Es,this.XT,this,this.ZT());return this.$T.push(t),t}setFillStyle(t){this.sh="function"==typeof t?t(this.sh):t;const i=this.sh;for(const t of this.jT)t.ah(i);return this.ae.ie(),this}getFillStyle(){return this.sh}setStrokeStyle(t){this.eh="function"==typeof t?t(this.eh):t;const i=this.eh;for(const t of this.jT)t.oh(i);return this.ae.ie(),this}getStrokeStyle(){return this.eh}Dp(){return this.Lp&&void 0!==this.$T.find((t=>void 0!==t.QT))&&this.getVisible()}uh(){this.$T.forEach((t=>{(t.WT||this.scale._M())&&t.JT&&(t.bl.Kl(oA(t.JT,this.scale)),t.WT=!1,t.bl.de())}))}Gp(){super.Gp();const t=a(Or,zr);this.$T.forEach((i=>{if(!i.HT)return;const s=!i.WT&&i.JT?i.JT:lA(i.HT);i.JT=s;const e=!i.WT&&i.QT?i.QT:aA(s);i.QT=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.fM=t}fh(t,i){t.Xs(i),this.ae.ie()}kd(t,i){const s=zA(t,this.jT,((t,i)=>{const s=t.kd(i);if(s)return Ah(s,this.scale,t.$s.ti)}),Zr);if(!s)return;const e=Ah(s[0],s[1].$s.ti,this.scale),h=this.KT(s[1]);if(!h)return;const{angle:r,amplitude:n}=uA(e,this.scale);return{location:e,scale:this.scale,resultTableContent:this.Mm(new _d,this,r,n,this.Es.getAmplitudeAxis().formatValue).Pc(),owner:this,fillStyle:this.sh,polarPolygon:h}}solveNearestFromScreen(t){return this.kd(Ac(t,this.Es.$s),!1)}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{fill:this.sh,stroke:this.eh}),this}ZT(){const t=this.ae.Oc(this.scale,fl.Simple).ah(this.sh).oh(this.eh).Xs(this.getHighlight());return this.jT.push(t),this.Zs(t),t}KT(t){return this.$T.find((i=>i.bl===t))}}class lv extends rA{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.At="Area Series",this.mM=[],this.pM=!1,this.SM=!1,this.qT=!1,this.Mm=nA,this.sh=yr(this.zs.polarAreaSeriesFillStyle,r),this.eh=yr(this.zs.polarAreaSeriesStrokeStyle,r)}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}setData(t){0!==this.mM.length&&this.Es.$s.Mo(mc.tA);const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(Dh(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.qT&&(console.warn(`${this.At} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.qT=!0),this.mM=i.progressivePoints,this.pM=!0,this.fM=aA(this.mM),this.ae.ie(),this}setFillStyle(t){return this.sh="function"==typeof t?t(this.sh):t,this.ae.ie(),this}getFillStyle(){return this.sh}setStrokeStyle(t){return this.eh="function"==typeof t?t(this.eh):t,this.ae.ie(),this}getStrokeStyle(){return this.eh}setConnectDataAutomaticallyEnabled(t){return this.SM=t,this.ae.ie(),this}getConnectDataAutomaticallyEnabled(){return this.SM}Dp(){return this.Lp&&this.mM.length>0&&this.getVisible()}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{fill:this.sh,stroke:this.eh}),this}}class uv extends lv{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.tF=this.ae.Oc(this.scale,fl.Simple).Xs(this.getHighlight()),this.Zs(this.tF)}uh(){if(this.pM||this.scale._M()){const t=this.mM,i=!0===this.SM?oA(t.concat((t=>{if(0===t.length)return t;const i=t[0],s=t[t.length-1];if(Dh(i.angle,s.angle))return t;const e=1*Math.sign(s.angle-i.angle);let h=0;const r=[];for(let t=s.angle+e;!Dh(t%360,i.angle%360);t+=e)if(r.push({angle:t,amplitude:0}),h+=1,h>360)return[];for(let t=0;t<r.length;t+=1)r[t].amplitude=Hl(s.amplitude,i.amplitude,(t+1)/(r.length+1));return r})(t)),this.scale):[...oA(t,this.scale),{x:0,y:0}];this.tF.Kl(i).ah(this.sh).oh(this.eh),this.pM=!1,this.tF.de()}}fh(t,i){t.Xs(i),this.ae.ie()}kd(t,i){const s=this.tF.kd(t);if(!s)return;const{angle:e,amplitude:h}=uA(s,this.scale);return Nd(s,this.scale,this.Mm(new _d,this,e,h,this.Es.getAmplitudeAxis().formatValue).Pc(),this,this.sh)}solveNearestFromScreen(t){return this.kd(Ac(t,this.Es.$s),!1)}}class cv extends Vn{constructor(){super(...arguments),this.Cs="RadialScale",this.iF={start:0,end:1},this.sF=!1,this.eF=0,this.zt=e(0,0),this.hF=[0,0],this.rF=[0,0],this.o=!0,this.rs=!0,this.nF=!0,this.oF=!0,this.aF={x:0,y:0},this.Qi={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}Kx(t,i){return t===this.iF.start&&i===this.iF.end||(this.iF={start:t,end:i},this.nF=!0,this.lF()),this}Jx(){return this.iF}Qx(){return this.iF.end>=this.iF.start}rM(t){this.sF=t,this.oF=!0}oM(){return!1===this.sF}nM(t){this.eF=t,this.oF=!0}sM(){return this.eF}ss(){return this.rs}us(){return!1}Jt(t,i,s,e){return this.x=new On(t.x,i.x,s.x,e?e.x:void 0),this.y=new On(t.y,i.y,s.y,e?e.y:void 0),this}es(){return this.Qi}_M(){return this.nF}uF(){return this.oF}ks(){return this.aF}Vt(){return this.o=!1,this.rs=!1,this.nF=!1,this.oF=!1,this}Nt(){return this.o=!0,this.rs=!0,this.nF=!0,this.oF=!0,this}Wt(t,i){return"object"==typeof t?(this.zt.x=t.x,this.zt.y=t.y):(this.zt.x=t,this.zt.y=i),this.lF(),this}bs(t){return this.hF=t,this.lF(),this}xs(t){return this.rF=t,this.lF(),this}Yi(){return e(this.hF[0]+this.hF[1],this.rF[0]+this.rF[1])}Hi(){return this.zt}lF(){const t=this.iF,i=e(this.x.ji(this.zt.x),this.y.ji(this.zt.y)),s=this.hF[0]+this.hF[1],h=this.rF[0]+this.rF[1],r=Math.max(i.x-s,0),n=Math.max(i.y-h,0),o=.5*(r>n?n:r),a=[this.hF[0]+Math.max((r-2*o)/2,0),this.hF[1]+Math.max((r-2*o)/2,0)],l=[this.rF[0]+Math.max((n-2*o)/2,0),this.rF[1]+Math.max((n-2*o)/2,0)],u=Math.abs(t.end-t.start);this.x.Wt(this.zt.x).Ni(a).Gt(-u,u),this.y.Wt(this.zt.y).Ni(l).Gt(-u,u),this.aF={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.Qi={x:this.x.es(),y:this.y.es()},this.Nt()}ts(t,i){const s=this.ks();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Ts(t,i,s,e){const h=this.ks(),r=an(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class dv extends _f{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Kv("polarChart bg",0),h,s.$s.zs.polarChartBackgroundFillStyle,s.$s.zs.polarChartBackgroundStrokeStyle,s.$s.zs.polarChartTitleFont,s.$s.zs.polarChartTitleFillStyle,o),this.coordsClient="client",this.PA=[],this.Aa=!0,this.xm=t.AutoCursorModes.onHover,this.cF=(t,i,s,e,h)=>{this.zx.Wt(e,h)},this.LA=er(this.PA),this.dF=t=>{this.PA.push(t)},this.fF=()=>this.eS,this.$s.Mo(mc.Hf),this.ST=s.Ub("polarChart series bg",0),this.AF=s.km("polarChart axis gridlines",0),this.gF=s.km("polarChart series",1),this.vF=s.km("polarChart axis lines",2),this.yF=s.km("polarChart axis ticks",3),this.zx=e.d2({scaleXYConstructor:cv}),this.onResize(this.cF),this.sy.mr("Polar Chart"),this.uS=this.ST.Bd(this.zx).ah(this.zs.polarChartSeriesBackgroundFillStyle).oh(ah).Ou(0).bh(360).Gu(0),this.cS=this.ST.Bd(this.zx).ah(De).oh(this.zs.polarChartSeriesBackgroundStrokeStyle).Ou(0).bh(360).Gu(0),super.lS(this.uS,this.cS),this.Jv(r,this.pixelScale),this.mF=new Qf(this,this.zx,this.zs,!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled),this.AF,this.vF,this.yF,this.Gs,this.fF),this.pF=new Kf(this,this.zx,this.zs,!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled),this.AF,this.vF,this.yF,this.Gs),this.coordsAxis={axisAmplitude:this.mF,axisRadial:this.pF},this.Fm=s.Im();const a=Rh(n?n.autoCursorBuilder:void 0,zd);this.Ay=a.Hy(this.Fm,this.uiScale,this.uiScale,this.zs),yd.gy(this),this.gS(((t,i)=>{yd.vy(this,i)})),this.setAnimationsEnabled(!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled))}getSeries(){return this.eS}setAutoCursor(t){return this.Ay&&t(this.Ay),this.$s.ie(),this}getAutoCursor(){return this.Ay}setAutoCursorMode(t){return this.xm=t,this.$s.ie(),this}getAutoCursorMode(){return this.xm}solveNearest(t){const i=t||this.$s.xo();if(i)return yd.kd(this,Ac(i,this.$s),this.eS)}translateCoordinate(t,i,s){if(s){const i=t,e=this.pixelScale,h=s;if(Wn(h)){const t=Ah(i,e,this.engine.scale);return this.$s.fa({engineX:t.x,engineY:t.y})}if(Hn(h))return i;if(iA(h)){const t=Ah(i,e,this.zx);return uA(t,this.zx)}}else{const s=t,e=i;if(Yn(s)){if(iA(e)){const t=this.$s.da(s),i=Ah({x:t.engineX,y:t.engineY},this.engine.scale,this.zx);return uA(i,this.zx)}if(Wn(e))return s;if(Hn(e)){const t=this.$s.da(s);return Ah({x:t.engineX,y:t.engineY},this.$s.ti,this.pixelScale)}}else if(sA(s)){if(iA(e))return s;const t=oA([s],this.zx)[0];if(Wn(e)){const i=Ah(t,this.zx,this.engine.scale),s={engineX:i.x,engineY:i.y};return this.$s.fa(s)}if(Hn(e))return Ah(t,this.zx,this.pixelScale)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new fA(this.gF,this,this.rS,this.zx,this.zs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length,this.$s.Gs);return this.dS(i),i}addPointSeries(t){const i=new nv(this.gF,this,this.rS,this.zx,this.zs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length,this.$s.Gs);return this.dS(i),i}addPointLineSeries(t){const i=new AA(this.gF,this,this.rS,this.zx,this.zs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length,this.$s.Gs);return this.dS(i),i}addAreaSeries(t){const i=new uv(this.gF,this,this.rS,this.zx,this.zs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length,this.$s.Gs);return this.dS(i),i}addPolygonSeries(t){const i=new av(this.gF,this,this.rS,this.zx,this.zs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.eS.length,this.$s.Gs);return this.dS(i),i}addHeatmapSeries(t){const i=new cA(this.gF,this,this.rS,this.zx,this.zs,this.$s.Gs,t);return this.dS(i),i}addSector(){const t=new eA(this.gF,this,this.LA,this.zx,this.zs,this.$s.Gs);return this.dF(t),t}getAmplitudeAxis(){return this.mF}get amplitudeAxis(){return this.mF}get axisAmplitude(){return this.mF}getRadialAxis(){return this.pF}get radialAxis(){return this.radialAxis}get axisRadial(){return this.radialAxis}uh(t){var i,s;super.uh(t),gd.ly(this.sy,this.qv);for(const t of this.eS)t.Gp();this.mF.rn(),this.pF.rn();for(const t of this.eS)t.uh();for(let t=1;t<=2;t+=1){const i=this.mF.uh(),s=this.pF.uh(),e=gd.oy(this.sy,this.qv),h=[this.Ja.left+s,this.Ja.right+s],r=[this.Ja.bottom+s,this.Ja.top+s+e];this.zx.bs(h).xs(r);const n=4;if(!(!this.SF||Math.abs(this.SF.amplitude-i)>=n||Math.abs(this.SF.radial-s)>=n)||1!==t){this.SF={amplitude:i,radial:s};break}}const e=this.zx.Jx().start,h=this.zx.Jx().end,r=this.zx.Qx()?((null===(i=this.SF)||void 0===i?void 0:i.radial)||0)*this.zx.x.getPixelSize()+h-e:((null===(s=this.SF)||void 0===s?void 0:s.radial)||0)*this.zx.x.getPixelSize()+e-h;this.uS.zu(r).Uu(360),this.cS.zu(r).Uu(360);for(const t of this.PA)t.uh();yd.uy(this,this.uS.getIsUnderMouse(),!1,this.eS,(t=>yd.kd(this,t,this.eS)),((t,i)=>t.kd(i,!0)));for(const t of this.eS)t.$m();return super.Qv(),this.bF(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.mF.setAnimationsEnabled(t),this.pF.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Aa=t,this}getMouseInteractions(){return this.Aa}getMinimumSize(){return e(fv,fv)}bF(){}forEachAxis(t){return t(this.mF),t(this.pF),this}dispose(){return this.PA.slice().forEach((t=>t.dispose())),this.Ay.dispose(),this.ST.Bt(),this.AF.Bt(),this.gF.Bt(),this.vF.Bt(),this.yF.Bt(),this.Fm.Bt(),super.dispose()}If(){return[...this.eS,...this.PA]}}const fv=300;class Av extends Hd{}class gv extends Av{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.At="Slice",this.S=0,this.$y=!1,this.xF=De,this.Zy=De,this.Qy=this.S,this.qy=Ke((()=>this.Es.$s.ie())),this.im=()=>{this.sm=void 0},this.index=t,this.Es=e,this.scale=h,this.Os=r,this.tF=i.Oc(h,fl.Simple).Xs(this.getHighlight()),this.Zs(this.tF),this.kh=s.An(h).Xs(this.getHighlight()),this.Zs(this.kh,{isText:!0})}setValue(t){return this.Es.getAnimationsEnabled()?this.getVisible()&&this.om(this.Qy,t):this.Qy=t,this.S=t,this.Es.$s.ie(),this}getValue(){return this.S}setVisible(t){return!1===t?this.Es.getAnimationsEnabled()&&this.Qy>0?(this.sm&&(this.sm.finish(!1),this.sm=void 0),this.om(this.Qy,0,(()=>super.setVisible(!1)))):(this.Qy=0,super.setVisible(!1)):this.Es.getAnimationsEnabled()?(this.sm&&(this.sm.finish(!1),this.sm=void 0),super.setVisible(!0),this.om(this.Qy,this.S)):(this.Qy=this.S,super.setVisible(!0)),this}om(t,i,s){this.sm=this.qy(300,Qe.ease)([[t,i]],(([t])=>{this.Qy=t,this.Es.$s.ie()})),this.sm.onEveryAnimationEnd(this.im),s&&this.sm.onAnimationEnd(s)}setStyle(t,i,s,e){this.xF=t,this.Zy=s,this.tF.ah(this.xF).oh(i),this.kh.ah(this.Zy).Mr(e);for(let t=0;t<this.Rs.length;t+=1)this.styleAttachedEntry(this.Rs[t])}getAnimatedValue(){return this.Qy}fh(t,i){return t.Xs(i),this.Es.$s.ie(),this}attach(t,i=!0,s=!1){return super.attach(t,i,s),this.styleAttachedEntry(t,i,s),this}styleAttachedEntry(t,i=!0,s=!1){fr(t,this.zs,s,{fill:this.xF,stroke:this.tF.Yo()})}}var vv;t.FunnelSliceModes=void 0,(vv=t.FunnelSliceModes||(t.FunnelSliceModes={}))[vv.VariableHeight=0]="VariableHeight",vv[vv.VariableWidth=1]="VariableWidth";const yv=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},mv=(i,s,e,h,r,n=0,o=t.FunnelSliceModes.VariableHeight,a)=>{s=yv(s,h.x),e=yv(e,h.x);const l=i.length;let u=0,c=0;u=i.reduce(((t,i)=>t+i.getAnimatedValue()),0);let d={x:a-s/2,y:h.y+r.bottom},f={x:a+s/2,y:h.y+r.bottom},A={x:0,y:r.bottom},g={x:0,y:r.bottom},v=0,y=0;if(n)for(let s=0;s<i.length;s+=1){const e=10;y+=i[s].getAnimatedValue();const a=o===t.FunnelSliceModes.VariableWidth?(h.y-n*l)/l:h.y+r.bottom-y/u*h.y;if(o===t.FunnelSliceModes.VariableWidth){n=a-n<e?Math.max(20,a-e):n;break}0!==v&&v-a-n<e&&(n=Math.max(0,v-a-e)),v=a}const m=(s-e)/2/h.y;for(let v=0;v<l;v+=1){const y=i[v];c+=y.getAnimatedValue();const p=o===t.FunnelSliceModes.VariableWidth?(h.y-n*l)/l:h.y+r.bottom-c/u*h.y;let S=0;v>0&&(d={x:A.x+m*n,y:A.y-n},f={x:g.x-m*n,y:g.y-n}),S=(s+c/u*(e-s))/2,A={x:a-S,y:parseInt(`${o===t.FunnelSliceModes.VariableWidth?d.y-p:p}`,10)},g={x:a+S,y:parseInt(`${o===t.FunnelSliceModes.VariableWidth?f.y-p:p}`,10)},f.x>=d.x&&g.x>A.x&&y.tF.Kl([A,d,f,g])}};class pv extends Ad{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Kv("funnelChart bg",0),h,s.$s.zs.funnelChartBackgroundFillStyle,s.$s.zs.funnelChartBackgroundStrokeStyle,s.$s.zs.funnelChartTitleFont,s.$s.zs.funnelChartTitleFillStyle,n),this.am=[],this.lm=Ud.None,this.fm=!0,this.vm=0,this.MF=80,this._F=20,this.wF=0,this.CF=t.FunnelSliceModes.VariableHeight,this.Sm=!0,this.xm=t.AutoCursorModes.onHover,this.Mm=Yd,this._m=t=>{const i=this.am.indexOf(t);i>=0&&(this.am.splice(i,1),this.wm())},this.$s.Mo(mc.Uf),this.bm=this.zs.effectsText,this.Cm=s.km("funnelChart bottom",0),this.Tm=s.km("funnelChart top",1),this.sy.mr("Funnel Chart"),this.um=this.zs.funnelChartSliceFillStylePalette,this.dm=this.zs.funnelChartSliceStrokeStyle,this.Am=this.zs.funnelChartSliceLabelFont,this.gm=this.zs.funnelChartSliceLabelFillStyle,this.Fm=s.Im();const a=Rh(o?o.autoCursorBuilder:void 0,Od);this.Ay=a.Hy(this.Fm,this.uiScale,this.uiScale,this.zs),this.setAnimationsEnabled(!0!==(null==o?void 0:o.disableAnimations)&&!1!==(null==o?void 0:o.animationsEnabled)),this.Jv(r,this.pixelScale)}setAutoCursor(t){return this.Ay&&t(this.Ay),this.$s.ie(),this}getAutoCursor(){return this.Ay}setAutoCursorMode(t){return this.xm=t,this.$s.ie(),this}getAutoCursorMode(){return this.xm}setCursorResultTableFormatter(t){return this.Mm=t,this.$s.ie(),this}addSlice(t,i){const s=new gv(this.vm,this.Cm,this.Tm,this,this.pixelScale,this._m,this.zs,this.$s.Gs);return this.vm+=1,s.setName(t),s.setValue(i),s.Gs.Ws.te(this.bm),s.Gs.Ys.te(this.Sm),this.am.push(s),this.$s.ie(),s.setHighlightOnHover(this.fm),s.onMouseMove((()=>{this.xm&&this.$s.ie()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.am}setHeadWidth(t){return this.MF=t,this.$s.ie(),this}getHeadWidth(){return this.MF}setNeckWidth(t){return this._F=t,this.$s.ie(),this}getNeckWidth(){return this._F}setSliceGap(t){return this.wF=Math.min(Math.max(t,0),20),this.$s.ie(),this}setSliceMode(t){return this.CF=t,this.$s.ie(),this}getFunnelSliceMode(){return this.CF}setLUT(t){return this.bf=t,this.$s.ie(),this}setSliceFillStyle(t){return this.um=t,this.$s.ie(),this}getSliceFillStyle(){return this.um}setSliceStrokeStyle(t){return this.dm="function"==typeof t?t(this.dm):t,this.$s.ie(),this}getSliceStrokeStyle(){return this.dm}setSliceEffect(t){return this.Sm=t,this.am.forEach((i=>i.Gs.Ys.te(t))),this.$s.ie(),this}getSliceEffect(){return this.Sm}setSliceSorter(t){return this.lm=t,this.am=this.am.sort(this.lm),this.$s.ie(),this}getSliceSorter(){return this.lm}setLabelFillStyle(t){return this.gm="function"==typeof t?t(this.gm):t,this.$s.ie(),this}getLabelFillStyle(){return this.gm}setLabelFont(t){return this.Am="function"==typeof t?t(this.Am):t,this.$s.ie(),this}getLabelFont(){return this.Am}setLabelEffect(t){return this.bm=t,this.am.forEach((i=>i.Gs.Ws.te(t))),this.$s.ie(),this}getLabelEffect(){return this.bm}setLabelFormatter(t){return this.Dm=t,this.$s.ie(),this}getLabelFormatter(){return this.Dm}setSliceHighlightOnHover(t){return this.fm=t,this.am.forEach((i=>i.setHighlightOnHover(t))),this}uh(t){super.uh(t),gd.ly(this.sy,this.qv),super.Qv();const i=gd.oy(this.sy,this.qv),s=e(this.pixelScale.x.getInnerInterval()-(this.Ja.left+this.Ja.right),this.pixelScale.y.getInnerInterval()-(this.Ja.bottom+this.Ja.top+i)),h=e(this.Ja.left+s.x/2,this.Ja.bottom+s.y/2);this.am=this.am.sort(this.lm);for(let t=0,{length:i}=this.am;t<i;t+=1)this.Pm(this.am[t],t);const r=this.am.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<r.length;t+=1)n+=r[t].getAnimatedValue();const o=[];for(let t=0;t<r.length;t+=1)o.push((a=r[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<r.length;t+=1){const i=r[t];i.kh.mr(this.Dm(i,o[t])).de()}o.push(n),yd.uy(this,!1,!1,this.am,void 0,((t,i)=>Nd(i,this.engine.scale,this.Mm(new _d,this,t,o[r.indexOf(t)]||0).Pc(),t,void 0))),this.Bm(r,o,h,s)}Pm(t,i){t.setStyle(this.bf?new Ee({color:this.bf.getColors(t.getAnimatedValue())}):this.um(i,t),this.dm,this.gm,this.Am)}wm(){this.am=this.am.sort(this.lm),this.$s.ie()}If(){return this.am}dispose(){return this.am.slice().forEach((t=>t.dispose())),this.Ay.dispose(),this.Cm.Bt(),this.Tm.Bt(),this.Fm.Bt(),super.dispose()}}const Sv=(i,s,e)=>{const h=i.ql();if(h.length>0){let i;const r=(h[1].y-h[0].y)/2+h[0].y;return i=s===t.FunnelLabelSide.Left?(h[0].x-h[1].x)/2+h[1].x-e:(h[2].x-(4===h.length?h[3].x:h[1].x))/2+(4===h.length?h[3].x:h[1].x)+e,{x:i,y:r}}},bv=t=>{const i=t.ql();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class xv extends pv{constructor(){super(...arguments),this.Dm=Wd.NamePlusValue,this.kF=10,this.TF=t.FunnelLabelSide.Left,this.FF=t.SliceLabelIndices.LabelsOnSides,this.Lm=[],this.zm=this.zs.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.zm=t;for(let t=0;t<this.Lm.length;t+=1)this.Lm[t].ph(this.zm);return this.$s.ie(),this}getLabelConnectorStyle(){return this.zm}setLabelConnectorGap(t){return this.kF=t,this.$s.ie(),this}getLabelConnectorGap(){return this.kF}setLabelSide(t){return this.TF=t,this.$s.ie(),this}getLabelSide(){return this.TF}Bm(i,s,h,r){const n=this.kF;let o=0;for(let t=0;t<i.length;t+=1)o=Math.max(o,i[t].kh.Hi().x);const a=r.x+this.Ja.left+this.Ja.right,l=this.TF===t.FunnelLabelSide.Right?(this.Ja.left+(a-(this.Ja.right+o)))/2:(this.Ja.left+o+(a-this.Ja.right))/2,u=r.x-o,c=e(u,r.y);mv(i,this.MF,this._F,c,this.Ja,this.wF,this.CF,l),this.IF(i,this.TF===t.FunnelLabelSide.Left?-1:1,-1,h,r);for(let t=0;t<this.Lm.length;t+=1)this.Lm[t].setVisible(!1);for(let t=0;t<i.length;t+=1)i[t].getVisible()&&this.Vm(this.PF(i[t],-1,h,n))}getMinimumSize(){return e(500,300)}IF(t,i,s,h,r){if(0===t.length)return;const n=h.x+i*r.x*.5,o=1===s?Math.max:Math.min;let a;for(let h=0;h<t.length;h+=1){const r=t[h];if(0===r.tF.ql().length)r.kh.setVisible(!1);else{let t;r.kh.setVisible(!0),a&&(t=a.kh.ll().y+s*(a.kh.Hi().y+10));const h=(Sv(r.tF,this.TF,0)||e(0,0)).y,l=void 0===t?h:o(h,t);r.kh.dh(e(n,l)).dl(i).Al(0),a=r}}}PF(i,s,h,r){const n=i.tF,o=i.kh,a=Sv(n,this.TF,r);if(a){const i={x:yn(this.TF===t.FunnelLabelSide.Left?o.ll().x-s*(r+o.Hi().x):o.ll().x+s*(r+o.Hi().x),a,h).x,y:mn(o.ll().y,a,h).y};return[a,i,e(this.TF===t.FunnelLabelSide.Left?o.ll().x-s*(r+o.Hi().x):o.ll().x+s*(r+o.Hi().x),i.y)]}}Vm(t){if(t){let i;for(let t=0;t<this.Lm.length;t+=1)if(!this.Lm[t].getVisible()){i=this.Lm[t].setVisible(!0);break}void 0===i&&(i=this.Tm.Nm(this.pixelScale,void 0,[qd.InternalUI]).ph(this.zm),this.Lm.push(i)),i._i().Gl(t)}}}class Mv extends pv{constructor(){super(...arguments),this.Dm=Wd.Name,this.FF=t.SliceLabelIndices.LabelsInsideSlices}Bm(t,i,s,e){const h=this.Ja.left+e.x/2;mv(t,this.MF,this._F,e,this.Ja,this.wF,this.CF,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.tF,h=s.kh,r=bv(e);r&&h.dh(r).dl(0).Al(0)}}getMinimumSize(){return e(200,200)}}const _v={LabelsOnSides:xv,LabelsInsideSlices:Mv};var wv,Cv;t.FunnelLabelSide=void 0,(wv=t.FunnelLabelSide||(t.FunnelLabelSide={}))[wv.Right=0]="Right",wv[wv.Left=1]="Left";class kv extends Ad{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Kv("gaugeChart bg",0),e,i.$s.zs.gaugeChartBackgroundFillStyle,i.$s.zs.gaugeChartBackgroundStrokeStyle,i.$s.zs.gaugeChartTitleFont,i.$s.zs.gaugeChartTitleFillStyle,r),this.am=[],this._m=t=>{const i=this.am.indexOf(t);i>=0&&this.am.splice(i,1)},this.$s.Mo(mc.Wf),this.ae=i.km("gaugeChart layer",0),this.Tm=i.km("gaugeChart top layer",1),this.sy.mr("Gauge Chart"),this.Jv(h,this.pixelScale);const o=Jn();this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd),this.setAnimationsEnabled(void 0===n||n)}dispose(){return this.ae.Bt(),this.Tm.Bt(),this.am.slice().forEach((t=>t.dispose())),super.dispose()}}class Tv extends kv{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.ku=90,this.Tu=-270,this.DF={min:this.ku,max:this.Tu},this.BF=Ke((()=>this.ae.ie())),this.LF=()=>{this.RF=void 0},this.EF=i.km("radialGaugeChart bg arc",2),this.OF=this.ae.Bd(this.pixelScale).ah(this.zs.gaugeChartEmptyGaugeFillStyle).oh(this.zs.gaugeChartEmptyGaugeStrokeStyle)}setAngleInterval(t,i){t===i?i-=360:Math.abs(i-t)>360&&(i-=(i-t)%360);const s=this.ku,e=this.Tu,h=this.DF;return this.getAnimationsEnabled()?this.zF(h,{min:t,max:i}):(h.min=t,h.max=i,this.ku=t,this.Tu=i),this.Ct.emit("angleIntervalChange",this,{min:s,max:e},{min:t,max:i}),this.$s.ie(),this}getAngleInterval(){return{min:this.ku,max:this.Tu}}setGaugeFillStyle(t){return this.OF.ah(t),this.$s.ie(),this}setGaugeStrokeStyle(t){return this.OF.oh(t),this.$s.ie(),this}zF(t,i,s){this.RF=this.BF(1e3,Qe.ease)([[t.min,i.min],[t.max,i.max]],(([t,i])=>{this.DF={min:t,max:i},this.ku=t,this.Tu=i,this.ae.ie()})),this.RF.onEveryAnimationEnd(this.LF),s&&this.RF.onAnimationEnd(s)}onAngleIntervalChange(t){return this.Ct.on("angleIntervalChange",t)}offAngleIntervalChange(t){return this.Ct.off(t,"angleIntervalChange")}dispose(){return super.dispose(),this.EF.Bt(),this}}class Fv extends Hd{VF(t){return this.Ct.on("valueChange",t)}NF(t){return this.Ct.on("valueIntervalChange",t)}offValueChange(t){return this.Ct.off(t,"valueChange")}offIntervalChange(t){return this.Ct.off(t,"valueIntervalChange")}attach(t,i=!0,s=!1){return super.attach(t,i,s),this.styleAttachedEntry(t,i,s),this}styleAttachedEntry(t,i=!0,s=!1){fr(t,this.zs,s,{fill:this.GF})}}class Iv extends Fv{onValueChange(t){return this.VF(t)}onIntervalChange(t){return this.NF(t)}}class Pv extends Iv{constructor(t,i,s,e,h,r,n){super(s,h,r,n),this.ku=0,this.Tu=0,this.UF=0,this.WF=0,this.YF=0,this.HF=100,this.jF=!0,this.Qy=this.S,this.Ky=this.getVisible(),this.qy=kr(),this.$F=t=>{this.Qy=t,this.Es.$s.ie()},this.XF=t,this.gn=i,this.Es=s,this.scale=e,this.GF=this.zs.gaugeChartGaugeFillStyle,this.nm=t.Bd(e).ah(this.GF).oh(ah).Xs(this.getHighlight()),this.Zs(this.nm),this.ZF=i.An(e).Xs(this.getHighlight()),this.Zs(this.ZF,{isText:!0}),this.QF=i.An(e).Xs(this.getHighlight()),this.Zs(this.QF,{isText:!0}),this.kh=i.An(e).Xs(this.getHighlight()),this.Zs(this.kh,{isText:!0}),this.ZF.ah(r.gaugeChartIntervalLabelsFillStyle).Mr(r.gaugeChartIntervalLabelsFont),this.QF.ah(r.gaugeChartIntervalLabelsFillStyle).Mr(r.gaugeChartIntervalLabelsFont),this.kh.ah(r.gaugeChartValueLabelFillStyle).Mr(r.gaugeChartValueLabelFont),this.setName("Gauge Slice")}uh(){const t=this.Es.getDataLabelFormatter(),i=this.ku/90<this.Tu/90?1:-1;let s=this.Es.getAnimationsEnabled()?this.Qy:this.S;const[e,h]=this.YF<this.HF?[this.YF,this.HF]:[this.HF,this.YF];s<e?s=e:s>h&&(s=h);const r=this.Tu-i*this.WF,n=this.ku+i*this.UF,o=this.HF-this.YF,a=(0!==o?(r-n)/o:1/0)*(s-this.YF);this.nm.Ou(n).bh(n+a);const l="function"==typeof t?t(s,{getInnerStart:()=>e,getInnerEnd:()=>h}):t.format(s);this.kh.mr(l)}JF(){const t=this.Es.getIntervalLabelFormatter(),i="function"==typeof t?t(this.YF,{getInnerStart:()=>this.YF,getInnerEnd:()=>this.HF}):t.format(this.YF);return this.ZF.mr(i).de(),this.ZF.Hi()}KF(){const t=this.Es.getIntervalLabelFormatter(),i="function"==typeof t?t(this.HF,{getInnerStart:()=>this.YF,getInnerEnd:()=>this.HF}):t.format(this.HF);return this.QF.mr(i).de(),this.QF.Hi()}setName(t){return super.setName(t),this.Es.$s.ie(),this}setValue(t){const i=this.S;return this.Es.getAnimationsEnabled()?this.Ky&&this.qy(i,t,this.$F):this.Qy=t,this.S=t,this.Ct.emit("valueChange",this,i,t),this.Es.$s.ie(),this}getValue(){return this.S}setVisible(t){return this.Ky=t,!1===t?this.Es.getAnimationsEnabled()&&this.Qy>0?this.qy(this.Qy,0,this.$F,{onCompleted:()=>super.setVisible(!1)}):(this.Qy=0,super.setVisible(!1)):this.Es.getAnimationsEnabled()?(super.setVisible(!0),this.qy(this.Qy,this.S,this.$F)):(this.Qy=this.S,super.setVisible(!0)),this}setInterval(t,i){const s=this.YF,e=this.HF;return this.Ct.emit("valueIntervalChange",this,{min:s,max:e},{min:t,max:i}),this.YF=t,this.HF=i,this.Es.$s.ie(),this}setIntervalLabelsFont(t){return this.ZF.Mr(t),this.QF.Mr(t),this.Es.$s.ie(),this}getIntervalLabelsFont(){return this.ZF.br()}setIntervalLabelsFillStyle(t){return this.ZF.ah(t),this.QF.ah(t),this.Es.$s.ie(),this}getIntervalLabelsFillStyle(){return this.ZF.pr()}setIntervalLabelsVisible(t){return t?(this.ZF.setVisible(!0),this.QF.setVisible(!0)):(this.ZF.setVisible(!1),this.QF.setVisible(!1)),this.jF=t,this}getIntervalLabelsVisible(){return this.jF}setAngleInterval(t,i){return this.ku=t,this.Tu=i,this.Es.$s.ie(),this}setMinAngle(t){return this.ku=t,this.Es.$s.ie(),this}setMaxAngle(t){return this.Tu=t,this.Es.$s.ie(),this}setMarginInDegrees(t=this.UF,i=this.WF){return t!==this.UF&&(this.UF=t),i!==this.WF&&(this.WF=i),this.Es.$s.ie(),this}setFillStyle(t){this.GF="function"==typeof t?t(this.GF):t;const i=this.GF;this.nm.ah(i);for(let t=0;t<this.Rs.length;t+=1)this.styleAttachedEntry(this.Rs[t]);return this.Es.$s.ie(),this}qF(t){return this.kh.ah(t),this.gn.ie(),this}tI(){return this.kh.pr()}getAnimatedValue(){return this.Qy}}function Dv(t,i,s,h,r,n=Math.floor(Math.sqrt(h>r?25*h:25*r))){const o=Array(n+2),a=Math.PI;let l=0,u=0;const c=i*a/180,d=(s*a/180-c)/n;for(o[l]=e(t.x,t.y),l+=1;l<=n+1;)o[l]=e(t.x+h*Math.cos(c+u*d),t.y+r*Math.sin(c+u*d)),l+=1,u+=1;return[o,n]}class Bv extends Tv{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.pf=20,this.iI=new Intl.NumberFormat,this.sI=new Intl.NumberFormat,this.eI=!1,this.hI=5;const o=new Pv(this.ae,this.Tm,this,this.pixelScale,this._m,this.zs,this.$s.Gs);this.rI=o,this.am.push(o),this.setPadding(10)}uh(t){super.uh(t),gd.ly(this.sy,this.qv),super.Qv();const i=gd.oy(this.sy,this.qv),s=qr([this.rI.JF(),this.rI.KF()]),h=e(this.pixelScale.x.getInnerInterval()-(this.Ja.left+this.Ja.right+2*s.max.x),this.pixelScale.y.getInnerInterval()-(this.Ja.bottom+this.Ja.top+1*s.max.y+i)),r=Math.max(.5*Math.min(h.x,h.y),0),n=e(this.Ja.left+s.max.x+.5*h.x,this.Ja.bottom+s.max.y+.5*h.y),o=this.eI?this.nI(n,r):n,a=this.OF.eh.getThickness(),l=r-.5*a,u=r-this.pf;let c=u/r*100;c=c>100||c<0?99:c;const d=100*(1-(this.pf-a)/r);this.oI(o,u)&&(this.OF.zu(r).Gu(c),this.rI.nm.zu(l).Gu(d));const f=.5*(A=r,(g=this.Tu-this.ku)/(2*Math.PI*A*(g/360))*a);var A,g;this.OF.Ou(this.ku).bh(this.Tu).dh(o),this.rI.nm.dh(o),this.rI.kh.dh(o),this.bf&&this.rI.setFillStyle(new Ee({color:this.bf.getColors(this.rI.getAnimatedValue())})),this.rI.setMinAngle(this.ku).setMaxAngle(this.Tu).setMarginInDegrees(f,f).uh();const v=this.OF.Fu();if(this.rI.getIntervalLabelsVisible()){this.aI(this.ku,this.Tu,o,v+this.hI);const t=this.rI.ZF.de().Ch(),i=this.rI.QF.de().Ch();Wr(t,i)&&this.lI(t,i,o,v+this.hI)}}oI(t,i){const s=un(this.rI.kh.de().Hi(),.5),e=t.x+i,h=t.x-i,r=t.y+i,n=t.y-i;return!(t.x+s.x>e||t.x-s.x<h||t.y+s.y>r||t.y-s.y<n)}lI(t,i,s,h){const r=Yr(t,i),[n,o]=[Mn(pn(this.ku)),Mn(pn(this.Tu))],[a,l]=n!==o||1!==n&&3!==n?[dn(r.min,s),dn(r.max,s)]:[dn(e(r.min.x,r.max.y),s),dn(e(r.max.x,r.min.y),s)],u=a.x*l.x+a.y*l.y,c=ln(a)*ln(l),d=.7*Sn(Math.acos(u/c)),[f,A]=this.uI();this.aI(this.ku-f*d,this.Tu-A*d,s,h)}uI(){const t=this.Tu-this.ku,i=Math.sign(t);let s=Math.sign(this.ku),e=Math.sign(this.Tu);return s===e&&(i>=0?s=-e:e=-s),[s,e]}nI(t,i){const[s]=Dv(t,this.ku,this.Tu,i,i),h=qr(s),r=.5*(h.max.x-h.min.x),n=.5*(h.max.y-h.min.y);return cn(dn(t,e(h.min.x+r,h.min.y+n)),t)}aI(t,i,s,h){const r=pn(t),n=pn(i);this.rI.ZF.dh(rn(e(s.x+h,s.y),s,-r)),this.rI.QF.dh(rn(e(s.x+h,s.y),s,-n)),this.rI.ZF.yl(e(-Math.cos(r),-Math.sin(r))),this.rI.QF.yl(e(-Math.cos(n),-Math.sin(n)))}getDefaultSlice(){return this.rI}setAutoScaling(t){return this.eI=t,this.$s.ie(),this}getAutoScaling(){return this.eI}setDataLabelFormatter(t){return this.sI=t,this.$s.ie(),this}getDataLabelFormatter(){return this.sI}setIntervalLabelFormatter(t){return this.iI=t,this.$s.ie(),this}getIntervalLabelFormatter(){return this.iI}setIntervalLabelPadding(t){return this.hI=t,this.$s.ie(),this}getIntervalLabelPadding(){return this.hI}setThickness(t){return this.pf=t,this}setLUT(t){return this.bf=t,this.$s.ie(),this}setDataLabelFont(t){return this.rI.kh.Mr(t),this.$s.ie(),this}getDataLabelFont(){return this.rI.kh.br()}getMinimumSize(){return e(500,300)}setDataLabelFillStyle(t){return this.rI.qF(t),this.$s.ie(),this}getDataLabelFillStyle(){return this.rI.tI()}If(){return this.am}dispose(){return this.rI.dispose(),super.dispose()}}class Lv extends Hd{}class Rv extends Lv{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.At="Slice",this.S=0,this.$y=!1,this.xF=De,this.Zy=De,this.Qy=this.S,this.qy=Ke((()=>this.Es.$s.ie())),this.im=()=>{this.sm=void 0},this.index=t,this.Es=e,this.scale=h,this.Os=r,this.tF=i.Oc(h,fl.Simple).Xs(this.getHighlight()),this.Zs(this.tF),this.kh=s.An(h).Xs(this.getHighlight()),this.Zs(this.kh,{isText:!0})}setValue(t){return this.Es.getAnimationsEnabled()?this.getVisible()&&this.om(this.Qy,t):this.Qy=t,this.S=t,this.Es.$s.ie(),this}getValue(){return this.S}setVisible(t){return!1===t?this.Es.getAnimationsEnabled()&&this.Qy>0?(this.sm&&(this.sm.finish(!1),this.sm=void 0),this.om(this.Qy,0,(()=>super.setVisible(!1)))):(this.Qy=0,super.setVisible(!1)):this.Es.getAnimationsEnabled()?(this.sm&&(this.sm.finish(!1),this.sm=void 0),super.setVisible(!0),this.om(this.Qy,this.S)):(this.Qy=this.S,super.setVisible(!0)),this}om(t,i,s){this.sm=this.qy(300,Qe.ease)([[t,i]],(([t])=>{this.Qy=t,this.Es.$s.ie()})),this.sm.onEveryAnimationEnd(this.im),s&&this.sm.onAnimationEnd(s)}setStyle(t,i,s,e){this.xF=t,this.Zy=s,this.tF.ah(this.xF).oh(i),this.kh.ah(this.Zy).Mr(e);for(let t=0;t<this.Rs.length;t+=1)this.styleAttachedEntry(this.Rs[t])}getAnimatedValue(){return this.Qy}attach(t,i=!0,s=!1){return super.attach(t,i,s),this.styleAttachedEntry(t,i,s),this}styleAttachedEntry(t,i=!0,s=!1){fr(t,this.zs,s,{fill:this.xF,stroke:this.tF.Yo()})}}t.PyramidSliceModes=void 0,(Cv=t.PyramidSliceModes||(t.PyramidSliceModes={}))[Cv.VariableHeight=0]="VariableHeight",Cv[Cv.VariableWidth=1]="VariableWidth";const Ev=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Ov=(i,s,e,h,r,n=0,o=t.PyramidSliceModes.VariableHeight,a)=>{s=Ev(s,h.x),e=Ev(e,h.x);const l=i.length;let u=0,c=0;u=i.reduce(((t,i)=>t+i.getAnimatedValue()),0);let d={x:a-s/2,y:h.y+r.bottom},f={x:a+s/2,y:h.y+r.bottom},A={x:0,y:r.bottom},g={x:0,y:r.bottom},v=0,y=0;if(n)for(let s=0;s<i.length;s+=1){const e=10;y+=i[s].getAnimatedValue();const a=o===t.PyramidSliceModes.VariableWidth?(h.y-n*l)/l:h.y+r.bottom-y/u*h.y;if(o===t.PyramidSliceModes.VariableWidth){n=a-n<e?Math.max(20,a-e):n;break}0!==v&&v-a-n<e&&(n=Math.max(0,v-a-e)),v=a}const m=(s-e)/2/h.y;for(let v=0;v<l;v+=1){const y=i[v];c+=y.getAnimatedValue();const p=o===t.PyramidSliceModes.VariableWidth?(h.y-n*l)/l:h.y+r.bottom-c/u*h.y;let S=0;v>0&&(d={x:A.x+m*n,y:A.y-n},f={x:g.x-m*n,y:g.y-n}),S=(s+c/u*(e-s))/2,A={x:a-S,y:parseInt(`${o===t.PyramidSliceModes.VariableWidth?d.y-p:p}`,10)},g={x:a+S,y:parseInt(`${o===t.PyramidSliceModes.VariableWidth?f.y-p:p}`,10)},f.x>=d.x&&g.x>=A.x&&y.tF.Kl([A,d,f,g])}};class zv extends Ad{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Kv("pyramidChart bg",0),h,s.$s.zs.pyramidChartBackgroundFillStyle,s.$s.zs.pyramidChartBackgroundStrokeStyle,s.$s.zs.pyramidChartTitleFont,s.$s.zs.pyramidChartTitleFillStyle,n),this.am=[],this.lm=Ud.None,this.um=this.zs.pyramidChartSliceFillStylePalette,this.dm=this.zs.pyramidChartSliceStrokeStyle,this.fm=!0,this.Am=this.zs.pyramidChartSliceLabelFont,this.gm=this.zs.pyramidChartSliceLabelFillStyle,this.vm=0,this.MF=0,this._F=80,this.wF=0,this.CF=t.PyramidSliceModes.VariableHeight,this.Sm=!0,this.xm=t.AutoCursorModes.onHover,this.Mm=Yd,this._m=t=>{const i=this.am.indexOf(t);i>=0&&(this.am.splice(i,1),this.wm())},this.$s.Mo(mc.Uf),this.bm=this.zs.effectsText,this.Cm=s.km("pyramidChart bottom",0),this.Tm=s.km("pyramidChart top",1),this.sy.mr("Pyramid Chart"),this.Fm=s.Im();const a=Rh(o?o.autoCursorBuilder:void 0,Od);this.Ay=a.Hy(this.Fm,this.uiScale,this.uiScale,this.zs),this.Jv(r,this.pixelScale),this.setAnimationsEnabled(!0!==(null==o?void 0:o.disableAnimations)&&!1!==(null==o?void 0:o.animationsEnabled))}setAutoCursor(t){return this.Ay&&t(this.Ay),this.$s.ie(),this}getAutoCursor(){return this.Ay}setAutoCursorMode(t){return this.xm=t,this.$s.ie(),this}getAutoCursorMode(){return this.xm}setCursorResultTableFormatter(t){return this.Mm=t,this.$s.ie(),this}addSlice(t,i){const s=new Rv(this.vm,this.Cm,this.Tm,this,this.pixelScale,this._m,this.zs,this.$s.Gs);return this.vm+=1,s.setName(t),s.setValue(i),s.Gs.Ws.te(this.bm),s.Gs.Ys.te(this.Sm),this.am.push(s),this.$s.ie(),s.onMouseMove((()=>{this.xm&&this.$s.ie()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.am}setNeckWidth(t){return this._F=t,this.$s.ie(),this}getNeckWidth(){return this._F}setSliceGap(t){return this.wF=Math.min(Math.max(t,0),20),this.$s.ie(),this}setSliceMode(t){return this.CF=t,this.$s.ie(),this}getPyramidSliceMode(){return this.CF}setLUT(t){return this.bf=t,this.$s.ie(),this}setSliceFillStyle(t){return this.um=t,this.$s.ie(),this}getSliceFillStyle(){return this.um}setSliceStrokeStyle(t){return this.dm="function"==typeof t?t(this.dm):t,this.$s.ie(),this}getSliceStrokeStyle(){return this.dm}setSliceEffect(t){return this.Sm=t,this.am.forEach((i=>i.Gs.Ys.te(t))),this.$s.ie(),this}getSliceEffect(){return this.Sm}setSliceSorter(t){return this.lm=t,this.am=this.am.sort(this.lm),this.$s.ie(),this}getSliceSorter(){return this.lm}setLabelFillStyle(t){return this.gm="function"==typeof t?t(this.gm):t,this.$s.ie(),this}getLabelFillStyle(){return this.gm}setLabelFont(t){return this.Am="function"==typeof t?t(this.Am):t,this.$s.ie(),this}getLabelFont(){return this.Am}setLabelEffect(t){return this.bm=t,this.am.forEach((i=>i.Gs.Ws.te(t))),this.$s.ie(),this}getLabelEffect(){return this.bm}setLabelFormatter(t){return this.Dm=t,this.$s.ie(),this}getLabelFormatter(){return this.Dm}setSliceHighlightOnHover(t){return this.fm=t,this.am.forEach((i=>i.setHighlightOnHover(t))),this}uh(t){super.uh(t),gd.ly(this.sy,this.qv),super.Qv();const i=gd.oy(this.sy,this.qv),s=e(this.pixelScale.x.getInnerInterval()-(this.Ja.left+this.Ja.right),this.pixelScale.y.getInnerInterval()-(this.Ja.bottom+this.Ja.top+i)),h=e(this.Ja.left+s.x/2,this.Ja.bottom+s.y/2);this.am=this.am.sort(this.lm);for(let t=0,{length:i}=this.am;t<i;t+=1)this.Pm(this.am[t],t);const r=this.am.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<r.length;t+=1)n+=r[t].getAnimatedValue();const o=[];for(let t=0;t<r.length;t+=1)o.push((a=r[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<r.length;t+=1){const i=r[t];i.kh.mr(this.Dm(i,o[t])).de()}o.push(n),yd.uy(this,!1,!1,this.am,void 0,((t,i)=>Nd(i,this.engine.scale,this.Mm(new _d,this,t,o[r.indexOf(t)]||0).Pc(),t,void 0))),this.Bm(r,o,h,s)}Pm(t,i){t.setStyle(this.bf?new Ee({color:this.bf.getColors(t.getAnimatedValue())}):this.um(i,t),this.dm,this.gm,this.Am)}wm(){this.am=this.am.sort(this.lm),this.$s.ie()}If(){return this.am}dispose(){return this.am.slice().forEach((t=>t.dispose())),this.Ay.dispose(),this.Cm.Bt(),this.Tm.Bt(),this.Fm.Bt(),super.dispose()}}const Vv=(i,s,e)=>{const h=i.ql();if(h.length>0){let i;const r=(h[1].y-h[0].y)/2+h[0].y;return i=s===t.PyramidLabelSide.Left?(h[0].x-h[1].x)/2+h[1].x-e:(h[2].x-(4===h.length?h[3].x:h[1].x))/2+(4===h.length?h[3].x:h[1].x)+e,{x:i,y:r}}},Nv=t=>{const i=t.ql();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Gv extends zv{constructor(){super(...arguments),this.Dm=Wd.NamePlusValue,this.kF=10,this.TF=t.PyramidLabelSide.Left,this.FF=t.SliceLabelIndices.LabelsOnSides,this.Lm=[],this.zm=this.zs.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.zm=t;for(let t=0;t<this.Lm.length;t+=1)this.Lm[t].ph(this.zm);return this.$s.ie(),this}getLabelConnectorStyle(){return this.zm}setLabelConnectorGap(t){return this.kF=t,this.$s.ie(),this}getLabelConnectorGap(){return this.kF}setLabelSide(t){return this.TF=t,this.$s.ie(),this}getLabelSide(){return this.TF}Bm(i,s,h,r){const n=this.kF;let o=0;for(let t=0;t<i.length;t+=1)o=Math.max(o,i[t].kh.Hi().x);const a=r.x+this.Ja.left+this.Ja.right,l=this.TF===t.PyramidLabelSide.Right?(this.Ja.left+(a-(this.Ja.right+o)))/2:(this.Ja.left+o+(a-this.Ja.right))/2,u=r.x-o,c=e(u,r.y);Ov(i,this.MF,this._F,c,this.Ja,this.wF,this.CF,l),this.IF(i,this.TF===t.PyramidLabelSide.Left?-1:1,-1,h,r);for(let t=0;t<this.Lm.length;t+=1)this.Lm[t].setVisible(!1);for(let t=0;t<i.length;t+=1)if(i[t].getVisible()){const s=this.PF(i[t],-1,h,n);s&&this.Vm(s)}}getMinimumSize(){return e(500,300)}IF(t,i,s,h,r){if(0===t.length)return;const n=h.x+i*r.x*.5,o=1===s?Math.max:Math.min;let a;for(let h=0;h<t.length;h+=1){const r=t[h];let l;0===r.tF.ql().length?r.kh.setVisible(!1):r.kh.setVisible(!0),a&&(l=a.kh.ll().y+s*(a.kh.Hi().y+10));const u=Vv(r.tF,this.TF,0);if(u){const t=u.y,s=void 0===l?t:o(t,l);r.kh.dh(e(n,s)).dl(i).Al(0)}a=r}}PF(i,s,h,r){const n=i.tF,o=i.kh,a=Vv(n,this.TF,r);if(a){const i={x:yn(this.TF===t.PyramidLabelSide.Left?o.ll().x-s*(r+o.Hi().x):o.ll().x+s*(r+o.Hi().x),a,h).x,y:mn(o.ll().y,a,h).y};return[a,i,e(this.TF===t.PyramidLabelSide.Left?o.ll().x-s*(r+o.Hi().x):o.ll().x+s*(r+o.Hi().x),i.y)]}}Vm(t){let i;for(let t=0;t<this.Lm.length;t+=1)if(!this.Lm[t].getVisible()){i=this.Lm[t].setVisible(!0);break}void 0===i&&(i=this.Tm.Nm(this.pixelScale,void 0,[qd.InternalUI]).ph(this.zm),this.Lm.push(i)),i._i().Gl(t)}}class Uv extends zv{constructor(){super(...arguments),this.Dm=Wd.Name,this.FF=t.SliceLabelIndices.LabelsInsideSlices}Bm(t,i,s,e){const h=this.Ja.left+e.x/2;Ov(t,this.MF,this._F,e,this.Ja,this.wF,this.CF,h);for(let i=0;i<t.length;i+=1){const s=t[i].tF,e=t[i].kh,h=Nv(s);h&&e.dh(h).dl(0).Al(0)}}getMinimumSize(){return e(200,200)}}const Wv={LabelsOnSides:Gv,LabelsInsideSlices:Uv};var Yv;t.PyramidLabelSide=void 0,(Yv=t.PyramidLabelSide||(t.PyramidLabelSide={}))[Yv.Right=0]="Right",Yv[Yv.Left=1]="Left";const Hv=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),jv=(t,i,s,e,h,r,n,o)=>{if(0===i)return t.paddingX=o,t.alignmentX=-1,t};var $v;t.SpiderWebMode=void 0,($v=t.SpiderWebMode||(t.SpiderWebMode={}))[$v.Normal=0]="Normal",$v[$v.Circle=1]="Circle";class Xv{constructor(t,i,s,e,h,r,n,o){this.Ct=new Ze,this.cI=t,this.gn=i,this.scale=s,this.chart=e,this.tag=h,this.axisScale=r,this.dI=n,this.fI=o,this.AI=this.cI.Sh(this.scale).setMouseInteractions(!1),this.gI=this.gn.An(this.scale).mr(this.tag).setMouseInteractions(!1),this.vI=this.dI(this,this.cI.Nm(this.scale,void 0,[qd.InternalUI])).ph(this.chart.getNibStyle()),this.fI.Qs([this.gI])}Bm(i,s,h,r,n,o,a){const l=s.length,u=s[h>0?h-1:l-1],c=s[h],d=s[h<l-1?h+1:0],f=this.chart.getNibLength();this.AI.xh(i).bh(c).ph(this.chart.getAxisStyle()),this.vI._i().Gl(o===t.SpiderWebMode.Normal?[Jr(c,u,Bh(.5*f/ln(dn(u,c)),0,1)),c,Jr(c,d,Bh(.5*f/ln(dn(d,c)),0,1))]:((t,i,s,h,r=2)=>{const n=h/s,o=[];for(let a=-h/2;a<=h/2;a+=r){const r=n*(a/h)+i,l=e(t.x+Math.cos(r)*s,t.y+Math.sin(r)*s);o.push(l)}return o})(i,r,n,f)),a?this.gI.setVisible(!0).dh(cn(c,e(a.paddingX,a.paddingY))).dl(a.alignmentX).Al(a.alignmentY):this.gI.setVisible(!1)}getLabelSize(){return this.gI.Mr(this.chart.getAxisLabelFont()).ah(this.chart.getAxisLabelStyle()).de().Hi()}dispose(){this.AI&&this.AI.dispose(),this.gI&&this.gI.dispose(),this.vI&&this.vI.dispose()}}const Zv=(t,i,s,e,h)=>{const r=i.getIcon();return r?t.addRow(r,i.getName()):t.addRow(i.getName()),t.addRow("Axis:","",e).addRow("Value:","",h(s))};class Qv extends hA{constructor(i,s,e,h,r,n,o,a,l,u,c,d){super(i,l,u,d),this.At="Spider Series",this.Ju=new Map,this.Is=t.HighlightModes.onHover,this.Mm=Zv,this.wM=8,this.Za=0,this.yI=kr(),this.mI={},this.pI={},this.Ky=this.getVisible(),this.SI=1,this.bI=((t,i)=>{const s=Ke((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const l=(null==a?void 0:a.easing)||Qe.ease,u=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r?(e=s(u,l)([[r,0]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0,i(!1)}))):(r=0,i(!1)):o?(i(!0),e=s(u,l)([[r,1]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.SI=t,this.ae.$s.ie()}),(t=>{super.setVisible(t)})),this.Es=i,this.ae=s,this.CM=h,this.xI=r,this.Wb=n,this.MI=o,this._I=a,this.scale=e,this.wI=yr(u.spiderSeriesFillStyle,c),this.CI=yr(u.spiderSeriesStrokeStyle,c),this.kI=yr(u.spiderSeriesPointFillStyle,c)}Dp(){return this.Lp&&this.Ju.size>0&&this.getVisible()}addPoints(...t){this.Ju.size>0&&this.Es.$s.Mo(mc.tA),t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1)this.xI(t[i].axis);if(this.Es.getAnimationsEnabled()&&void 0!==this.mI){const i=new Map;let s;t.forEach((t=>i.set(t.axis,t.value))),this.yI(0,1,(t=>{i.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.Ju.set(e,h+t*(i-h)),this.ae.$s.ie()}))}),{easing:this.mI.easing,durationMs:this.mI.durationMs,onStart:()=>{s=new Map(this.Ju)}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.Ju.set(s,t[i].value)}return this.ae.ie(),this}getValue(t,i=!1){const s=this.Ju.get(t),e=this.Es.getOriginValue();if(void 0!==s)return i?e+this.SI*(s-e):s}setAnimationAddPoints(t,i){return this.mI=t?{easing:t,durationMs:i}:void 0,this.ae.ie(),this}setVisibleStateChangedAnimation(t,i){return this.pI=t?{easing:t,durationMs:i}:void 0,this.ae.ie(),this}setCursorResultTableFormatter(t){return this.Mm=t,this.Es.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}setCursorEnabled(t){return super.setCursorEnabled(t)}setFillStyle(t){return this.wI="function"==typeof t?t(this.wI):t,this.tF&&(this.tF.ah(this.wI),this.ae.ie()),this}getFillStyle(){return this.wI}setStrokeStyle(t){return this.CI="function"==typeof t?t(this.CI):t,this.tF&&(this.tF.oh(this.CI),this.ae.ie()),this}getStrokeStyle(){return this.CI}setPointFillStyle(t){return this.kI="function"==typeof t?t(this.kI):t,this.kM&&(this.kM.ah(this.kI),this.ae.ie()),this}getPointFillStyle(){return this.kI}setPointSize(t){return this.wM=t,this.kM&&this.kM.Wt(t),this}getPointSize(){return this.wM}getPointShape(){return this.CM}setPointRotation(t){return this.Za=t,this.kM&&this.kM._r(t),this.ae.ie(),this}getPointRotation(){return this.Za}uh(){if(super.uh(),!this.Ps){const t=new Array(this.Wb.length),i=this.Es.getOriginValue();for(let s=0;s<this.Wb.length;s+=1){const e=this.Ju.get(this.Wb[s].tag);t[s]=void 0!==e?this.MI(this.Wb[s].tag,i+this.SI*(e-i)):this.MI(this.Wb[s].tag,i)}hr(t),t.length>=3&&(this.tF||(this.tF=this.ae.Oc(this.scale,fl.Simple).oh(this.CI).ah(this.wI).Xs(this.getHighlight()),this.Zs(this.tF)),this.tF.Kl(t),this.kM||(this.kM=this.ae.sS(this.scale).Wt(this.wM).El(this.CM)._r(this.Za).ah(this.kI).Xs(this.getHighlight()),this.Zs(this.kM)),this.kM._i().Gl(t))}}attach(t,i=!0,s=!1){return super.attach(t,i,s),fr(t,this.zs,s,{fill:this.wI,stroke:this.CI}),this}oe(){return this.ee||this.CM}TI(){for(let t=0;t<this.Rs.length;t+=1)fr(this.Rs[t],this.zs,!1,{fill:this.wI,stroke:this.CI})}kd(t,i){if(this.tF){const i=this._I(t);if(void 0!==i&&this.Ju.has(i.tag)){const t=this.Ju.get(i.tag),s=this.MI(i.tag,t);return Nd(s,this.scale,this.Mm(new _d,this,t,i.tag,this.Es.formatValue).Pc(),this,this.wI)}}}solveNearestFromScreen(t){return this.kd(Ac(t,this.Es.$s),!1)}fh(t,i){return t.Xs(i),this.ae.ie(),this}setVisible(t){var i,s;return this.Ky=t,this.bI(t,this.Es.getAnimationsEnabled()&&void 0!==this.pI,{easing:null===(i=this.pI)||void 0===i?void 0:i.easing,durationMs:null===(s=this.pI)||void 0===s?void 0:s.durationMs}),this}}const Jv=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},Kv=t=>qr(t.gI.Ch()),qv=t=>qr(t.Ch()),ty=(i,s,e,h)=>i.Gu(0).dh(e).Ou(90).bh(-270).Uu(s===t.SpiderWebMode.Circle?void 0:h.length),iy={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},sy={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},ey=()=>{sy.alignmentX=0,sy.alignmentY=0,sy.paddingX=0,sy.paddingY=0};class hy extends _f{constructor(i,s,h,r,n,o,l){super(i,s,h,s.Kv("spiderChart bg",0),r,s.$s.zs.spiderChartBackgroundFillStyle,s.$s.zs.spiderChartBackgroundStrokeStyle,s.$s.zs.spiderChartTitleFont,s.$s.zs.spiderChartTitleFillStyle,l),this.Ja=c(20,20,20,20),this.axisScale=dh.d1({scale1DConstructor:On,dimension:"x"}).Gt(0,1),this.Wb=[],this.FI=[],this.II=[],this.DI=Yo.expansion,this.BI=!0,this.LI=jv,this.RI=Hv,this.Aa=!0,this.EI=t.SpiderWebMode.Normal,this.OI=4,this.zI=this.zs.spiderChartWebStyle,this.VI=this.zs.spiderChartScaleLabelFillStyle,this.NI=this.zs.spiderChartScaleLabelFont,this.GI=5,this.UI=this.zs.spiderChartAxisLabelFillStyle,this.WI=this.zs.spiderChartAxisLabelFont,this.YI=5,this.HI=this.zs.spiderChartAxisStrokeStyle,this.jI=this.zs.spiderChartAxisNibStrokeStyle,this.cA=10,this.$I=c(),this.xm=t.AutoCursorModes.onHover,this.hasAxis=t=>this.Wb.reduce(((i,s)=>i||s.tag===t),!1),this.formatValue=t=>this.axisScale.vs(t,Rn.Numeric),this.XI=()=>{const t=this.Wb.map(Kv).concat(this.II.map(qv));return Hr(t)},this.ZI=()=>this.QI.Bd(this.pixelScale).setMouseInteractions(!1),this.JI=t=>t.dispose(),this.KI=()=>this.ig.An(this.pixelScale).setMouseInteractions(!1),this.qI=t=>t.dispose(),this.tP=t=>this.formatValue(this.axisScale.getInnerStart()+t*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.iP=(t,i)=>{let s,h;const r=()=>{void 0!==this.sP&&this.sP.finish(),s=a(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),h=this.DI,this.DI=void 0},n=(i,h,r,n,o)=>{const a=e(r.x-h.x,h.y-r.y),l=this.Wb.findIndex((i=>i===t));if(l>=0&&void 0!==s){const i=Jv(l,this.Wb.length),h=e(Math.cos(i),Math.sin(i)),r=a.x*h.x+a.y*h.y,n=ln(dn(t.AI.gs(),t.AI.As())),u=s.min+(s.max-s.min)*Math.max(1+r/n,.01);this.axisScale.Gt(s.min,u),qh(o),this.$s.ie()}},o=()=>{if(s=void 0,void 0!==h)if(this.zh){const t=a(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),i=this.eP(),s=h;if(void 0!==i){const e=s.start(t.min,t.max,i.min,i.max),h=s.end(t.min,t.max,i.min,i.max);this.sP=this.Lv.$s.zn(300,Qe.ease)([[0,1]],(([i])=>{this.axisScale.Gt(t.min+i*(e-t.min),t.max+i*(h-t.max))})),this.sP.onAnimationEnd((()=>{this.sP=void 0,this.DI=s}))}else this.DI=h}else this.DI=h;h=void 0};i.setMouseEnterEventHandler(this.hP).setMouseLeaveEventHandler(this.rP).setMouseDragStartEventHandler(r).setMouseDragEventHandler(((t,i,s,h,r)=>n(0,e(i.clientX,i.clientY),h,0,i))).setMouseDragStopEventHandler(o);const l=Jn(new qn(((t,i,s)=>{this.hP(t),r(),qh(s)}),n,((t,i,s,e)=>{this.rP(t),o(),qh(e)})));return i.setTouchStartEventHandler(l.onTouchStart).setTouchMoveEventHandler(l.onTouchMove).setTouchEndEventHandler(l.onTouchEnd)},this.nP=t=>{this.BI&&!this.hasAxis(t)&&this.addAxis(t)},this.MI=(t,i)=>{for(const s of this.Wb)if(s.tag===t){const t=Math.max(Math.min((i-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return Jr(s.AI.gs(),s.AI.As(),t)}},this._I=t=>{if(0===this.Wb.length)return;const i=dn(Ah(t,this.engine.scale,this.pixelScale),this.Wb[0].AI.gs()),s=Math.atan2(i.y,i.x);let e,h=Or;for(const t of this.Wb){const i=dn(t.AI.As(),t.AI.gs()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this.hP=t=>{this.Aa&&(t.ph(this.jI),this.$s.ie())},this.rP=t=>{t.ph(this.jI),this.$s.ie()},this.$s.Mo(mc.Yf),this.ST=s.Ub("spiderChart series bg",0),this.QI=s.km("spiderChart web shapes",0),this.oP=s.km("spiderChart axis bg",1),this.xx=s.km("spiderChart plotting",2),this.ig=s.km("spiderChart fg",3),this.fI=this.Gs.Jg().te(this.zs.effectsText),this.sy.mr("Spider Chart"),this.uS=this.ST.Bd(this.pixelScale).ah(this.zs.spiderChartSeriesBackgroundFillStyle).oh(ah).Ou(90).bh(-270).Gu(0),this.cS=this.ST.Bd(this.pixelScale).ah(De).oh(this.zs.spiderChartSeriesBackgroundStrokeStyle).Ou(90).bh(-270).Gu(0),super.lS(this.uS,this.cS),this.Fm=s.Im();const u=Rh(o?o.autoCursorBuilder:void 0,Rd);this.Ay=u.Hy(this.Fm,this.uiScale,this.uiScale,this.zs),yd.gy(this),this.gS(((t,i)=>{yd.vy(this,i)})),this.setAnimationsEnabled(!0!==(null==o?void 0:o.disableAnimations)&&!1!==(null==o?void 0:o.animationsEnabled)),this.Jv(n,this.pixelScale)}getSeries(){return this.eS}setAutoCursor(t){return this.Ay&&t(this.Ay),this.$s.ie(),this}getAutoCursor(){return this.Ay}setAutoCursorMode(t){return this.xm=t,this.$s.ie(),this}getAutoCursorMode(){return this.xm}solveNearest(t){const i=t||this.$s.xo();if(i)return yd.kd(this,Ac(i,this.$s),this.eS)}addAxis(t){if("string"==typeof t){if(!this.hasAxis(t)){const i=new Xv(this.oP,this.ig,this.pixelScale,this,t,this.axisScale,this.iP,this.fI);this.Wb.push(i)}}else t&&this.Wb.push(t);return this.fI.Qs(this.Wb.map((t=>t.gI))),this.$s.ie(),this}addSeries(i){const s="object"==typeof i?i.pointShape?i.pointShape:t.PointShape.Circle:i||t.PointShape.Circle,e="object"==typeof i&&i.automaticColorIndex?i.automaticColorIndex:this.eS.length,h=new Qv(this,this.xx,this.pixelScale,s,this.nP,this.Wb,this.MI,this._I,this.rS,this.zs,e,this.$s.Gs);return this.dS(h),h}getSeriesCount(){return this.eS.length}setWebMode(t){return this.EI=t,this.$s.ie(),this}getWebMode(){return this.EI}setWebCount(t){return this.OI=t,this.$s.ie(),this}getWebCount(){return this.OI}setWebStyle(t){return this.zI="function"==typeof t?t(this.zI):t,this.$s.ie(),this}getWebStyle(){return this.zI}setScaleLabelStyle(t){return this.VI="function"==typeof t?t(this.VI):t,this.$s.ie(),this}getScaleLabelStyle(){return this.VI}setScaleLabelFont(t){return this.NI="function"==typeof t?t(this.NI):t,this.$s.ie(),this}getScaleLabelFont(){return this.NI}setScaleLabelPadding(t){return this.GI=t,this.$s.ie(),this}getScaleLabelPadding(){return this.GI}setScaleLabelStrategy(t){return this.LI=t,this.$s.ie(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.$s.ie(),this}setAxisLabelStyle(t){return this.UI="function"==typeof t?t(this.UI):t,this.$s.ie(),this}getAxisLabelStyle(){return this.UI}setAxisLabelFont(t){return this.WI="function"==typeof t?t(this.WI):t,this.$s.ie(),this}getAxisLabelFont(){return this.WI}setAxisLabelEffect(t){return this.fI.te(t),this.$s.ie(),this}getAxisLabelEffect(){return this.fI.se()}setAxisLabelPadding(t){return this.YI=t,this.$s.ie(),this}getAxisLabelPadding(){return this.YI}setAxisLabelStrategy(t){return this.RI=t,this.$s.ie(),this}setAxisStyle(t){return this.HI="function"==typeof t?t(this.HI):t,this.$s.ie(),this}getAxisStyle(){return this.HI}setNibStyle(t){return this.jI="function"==typeof t?t(this.jI):t,this.$s.ie(),this}getNibStyle(){return this.jI}setNibLength(t){return this.cA=t,this.$s.ie(),this}getNibLength(){return this.cA}setAutoAxis(t){return this.BI=t,this}getAutoAxis(){return this.BI}setMouseInteractions(t){return this.Aa=t,this}getMouseInteractions(){return this.Aa}setAxisScrollStrategy(t){return this.DI=t,this.$s.ie(),this}getAxisScrollStrategy(){return this.DI}setAxisInterval(t,i=0){return this.axisScale.Gt(i,t),this.$s.ie(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}uh(t){super.uh(t),gd.ly(this.sy,this.qv);const i=this.Wb.length,s=gd.oy(this.sy,this.qv),h=e(this.pixelScale.x.getInnerInterval()-(this.Ja.left+this.Ja.right),this.pixelScale.y.getInnerInterval()-(this.Ja.bottom+this.Ja.top+s)),r=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.RI){const t=Math.min(h.x,h.y)/2;for(let s=0;s<i;s+=1){const h=Jv(s,i),n=Math.cos(h),o=Math.sin(h),a=this.Wb[s].getLabelSize();ey();const l=this.RI(sy,s,i,this.Wb[s].tag,h,this.YI),u=e(n*t+l.paddingX,o*t+l.paddingY);n>0?r.right=Math.max(r.right,u.x+.5*(1-l.alignmentX)*a.x-t):r.left=Math.max(r.left,-u.x+.5*(l.alignmentX+1)*a.x-t),o>0?r.top=Math.max(r.top,u.y+.5*(1-l.alignmentY)*a.y-t):r.bottom=Math.max(r.bottom,-u.y+.5*(l.alignmentY+1)*a.y-t)}}if(this.DI){const t=this.eP();if(void 0!==t){const i=this.DI.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),s=this.DI.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.Gt(i,s)}}const n=e(this.pixelScale.x.getInnerStart()+(r.left+this.pixelScale.x.getInnerInterval()-r.right)/2,this.pixelScale.y.getInnerStart()+(r.bottom+this.pixelScale.y.getInnerInterval()-r.top)/2),o=Math.min(h.x/2-(r.left+r.right)/2,h.y/2-(r.bottom+r.top)/2);this.$I=c(this.Pi.left+this.Ja.left+r.left,this.Pi.top+this.Ja.top+s+r.top,this.Pi.right+this.Ja.right+r.right,this.Pi.bottom+this.Ja.bottom+r.bottom),this.Bm(n,o);for(const t of this.eS)t.Gp();for(const t of this.eS)t.uh();super.Qv(),yd.uy(this,this.uS.getIsUnderMouse(),!1,this.eS,(t=>yd.kd(this,t,this.eS)),((t,i)=>t.kd(i,!0)));for(const t of this.eS)t.$m()}dispose(){return this.ST.Bt(),this.QI.Bt(),this.oP.Bt(),this.xx.Bt(),this.ig.Bt(),this.Ay.dispose(),this.Fm.Bt(),super.dispose()}getMinimumSize(){return e(this.$I.left+this.$I.right+100,this.$I.bottom+this.$I.top+100)}Bm(t,i){const s=this.Wb.length,h=[];for(let r=0;r<s;r+=1){const n=Jv(r,s),o=e(t.x+Math.cos(n)*i,t.y+Math.sin(n)*i);h.push(o)}ty(this.uS,this.EI,t,h),ty(this.cS,this.EI,t,h),this.uS.zu(i),this.cS.zu(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,l=r.length,u=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(u&&l<i){l>=a&&t.push(n());const o=t[l];ty(o,s,e,r);const u=h*((l+1)/i);o.zu(u)}else l<t.length&&o(t[l]);t.length=u?i:0})(this.FI,this.OI,this.EI,t,i,h,this.ZI,this.JI);for(const t of this.FI)t.ah(De).oh(this.zI);for(let e=0;e<s;e+=1){const r=this.Wb[e],n=Jv(e,s);ey();const o=void 0!==this.RI?this.RI(sy,e,s,this.Wb[e].tag,n,this.YI):void 0;r.Bm(t,h,e,n,i,this.EI,o)}((t,i,s,h,r,n,o,a,l,u)=>{const c=r.length,d=t.length;let f=0;if(void 0!==i)for(let l=0;l<c;l+=1){const A=r[l].tag,g=Jv(l,c);for(let r=0;r<s+ +(0===l);r+=1){iy.alignmentX=0,iy.alignmentY=0,iy.paddingX=0,iy.paddingY=0;const v=i(iy,l,c,A,g,r,s,h);if(void 0!==v){f>=d&&t.push(a());const i=t[f];f+=1;const h=(s-r)/s,c=Jr(n,o[l],h);i.dh(cn(c,e(v.paddingX,v.paddingY))).dl(v.alignmentX).Al(v.alignmentY).mr(u(h))}}}for(let i=f;i<d;i+=1)l(t[i]);t.length=f})(this.II,this.LI,this.OI,this.GI,this.Wb,t,h,this.KI,this.qI,this.tP);for(const t of this.II)t.ah(this.VI).Mr(this.NI)}eP(){let t,i;const s=this.getSeriesCount()>1;for(const e of this.Wb)for(const h of this.eS){const r=h.getValue(e.tag,s);void 0!==r&&(t=void 0===t?r:Math.min(t,r),i=void 0===i?r:Math.max(i,r))}if(void 0!==t&&void 0!==i)return a(t,i)}}const ry=100001,ny=200002,oy=300002,ay=400001,ly=510001,uy=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99998/i),n=Math.floor(99999/(i+1)),o=Math.floor(89999/(i+1)),a=ly+i*o;let l=0;return{aP:()=>{const i=t.lP("dashboard ui",a+l);return l+=1,i},uP:()=>t.lP("dashboard legend",51e4),cP:i=>{const a=1+i*s,l=ry+i*e,u=ny+i*h,c=oy+i*r,d=ay+i*n,f=ly+i*o;let A=0;return{$s:t,Kv:(i,s)=>{const e=a+s;return t.lP(i,e)},Ub:(i,s)=>{const e=l+s;return t.lP(i,e)},xT:(i,s)=>{const e=u+s;return t.lP(i,e)},km:(i,s)=>{const e=c+s;return t.lP(i,e)},Gb:(i,s,e)=>{const h=c+s;return t.dP(i,h,e)},iy:(i,s)=>{const e=d+s;return t.lP(i,e)},Gv:i=>{const s=f+A,e=t.lP(i,s);return A+=1,e},Wv:()=>t.lP("panel legend",500002+i),Im:()=>t.lP("panel cursor",600001+i)}}}};class cy{constructor(t){this.Ct=new Ze,this.S=t}M(t){return this.S=t,this.Ct.emit("set",t),this}_(){return this.S}It(t){return this.Ct.on("set",t)}Dt(t){return this.Ct.off(t,"set")}}const dy={$h:()=>{},Vh:!1,Nh:0,Gh:!1,Wh:0,Uh:!1,Yh:0,Hh:0,Rh:Yo.fitting},fy=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},Ay=(t,i,s,e,h,r,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const u=[e,h];"spark-line"===a&&My(t,i,u,r,n,o),"spark-bar"===a&&_y({...t,winLoss:!1},i,u,r,n,o),"spark-win-loss"===a&&_y({...t,winLoss:!0},i,u,r,n,o),"spark-area"===a&&wy(t,i,u,r,n,o),"spark-pie"===a&&Cy(t,i,u,r,n,o)},gy=(t,i,s,e)=>({x:yy(t.x,i.x,s.x,e),y:my(t.y,i.y,s.y,e)}),vy=(t,i,s,e)=>({position:yy(t.position,i.x,s.x,e),high:my(t.high,i.y,s.y,e),low:my(t.low,i.y,s.y,e)}),yy=(t,i,s,e)=>{const h=Bh(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},my=(t,i,s,e)=>{const h=Bh(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},py=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&Sy(a,i,s,h,r,n,o),"axis-band"===a.type&&by(a,s,h,r,n,o),"constant-line"===a.type&&xy(a,s,e,h,r,n,o)},Sy=(i,s,e,h,r,n,o)=>{const{value:a,fillStyle:l,shape:u,size:c,rotation:d}=i;let f={x:NaN,y:NaN};if("start"===a&&(f=s[0]),"end"===a&&(f=s[s.length-1]),"min"===a){f=s[0];for(const t of s)f=f.y<t.y?f:t}if("max"===a){f=s[0];for(const t of s)f=f.y>t.y?f:t}("object"!=typeof a||(f=gy(a,e,h,r),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(f,r)))&&n.pointSet.add()._i().El(void 0!==u?u:t.PointShape.Circle)._r(d||0).Wt(c||5).ah(l||o.sparkPointChartFillStyle).Gl(f)},by=(t,i,s,h,r,n)=>{const{axis:o,start:a,end:l,fillStyle:u,strokeStyle:c}=t;let d=e(zr,Or),f=e(zr,Or);"x"===o&&(d=gy({x:a,y:zr},i,s,h),f=gy({x:l,y:Or},i,s,h)),"y"===o&&(d=gy({x:zr,y:a},i,s,h),f=gy({x:Or,y:l},i,s,h));const A=h[0],g=h[1],v=Bh(d.x,A.x,A.x+g.x),y=Bh(d.y,A.y,A.y+g.y),m=Bh(f.x,A.x,A.x+g.x),p=Bh(f.y,A.y,A.y+g.y);r.rect.add().jl(v).$l(y).Wt(e(m-v,p-y)).ah(u||n.sparkChartBandFillStyle).oh(c||n.sparkChartBandStrokeStyle).oh(ah)},xy=(t,i,s,h,r,n,o)=>{const{axis:a,value:l,strokeStyle:u}=t,c=l||0,d=i.y,f=s.y,A=i.x,g=s.x,v=[];if("y"===a&&d<=c&&c<=f){const t=gy(e(A,c),{x:A,y:d},h,r),i=gy(e(g,c),{x:A,y:d},h,r);v.push([t,i])}if("x"===a&&A<=c&&c<=g){const t=gy(e(c,d),{x:A,y:d},h,r),i=gy(e(c,f),{x:A,y:d},h,r);v.push([t,i])}v.length>0&&n.line.add().ph(u||o.sparkChartConstantLineStrokeStyle).xh(v[0][0]).bh(v[0][1])},My=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&h.To&&Ch.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=Or,c=zr,d=Or,f=zr;for(let t=0;t<l;t+=1){const i=o[t];u=Math.min(u,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const A={x:c-u,y:f-d},g=o.map((t=>gy(t,{x:u,y:d},A,s)));i.lineSet.add().Xs(r).ph(n||e.sparkLineChartStrokeStyle)._i().Gl(g),a&&py(a,g,{x:u,y:d},{x:c,y:f},A,s,i,e)},_y=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=t,d=t.barSize||1,f=t.gap||1,A=t.winLoss,g=l||0,v=f/d*1;let y=Or,m=zr;if(A)y=-1,m=1;else for(const t of n)y=Math.min(y,t),m=Math.max(m,t);const p={x:0,y:A?-1:Math.min(0,y)},S={x:1*n.length+(n.length-1)*v,y:A?2:Math.max(m,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*v,y:A?t>=g?1:0:t},h=gy({x:1*i+i*v,y:A?t>=g?0:-1:0},p,S,s),r=gy(e,p,S,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.add().Xs(r).dh(t.position).Zl(t.height).Xl(t.width).ah((s=t.value,A?(s>=g?u:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).oh(a||e.sparkBarChartStrokeStyle)}))},wy=(t,i,s,e,h,n)=>{const{data:o,fillStyle:a,strokeStyle:l,markers:u}=t,c=o.length;c>1e4&&h.To&&Ch.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=Or,f=zr,A=Or,g=zr;for(let t=0;t<c;t+=1){const i=o[t];d=Math.min(d,i.x),f=Math.max(f,i.x),A=Math.min(A,i.y),g=Math.max(g,i.y)}const v={x:f-d,y:g-A},y=[],m=[];for(const t of o){const i=r(t.x,t.y,A);y.push(vy(i,{x:d,y:A},v,s)),m.push(gy(t,{x:d,y:A},v,s))}i.junction.add().Xs(n)._i().Gl(y).ah(a||e.sparkAreaChartFillStyle),i.lineSet.add().Xs(n)._i().Gl(m).ph(l||e.sparkAreaChartStrokeStyle),u&&py(u,m,{x:d,y:A},{x:f,y:g},v,s,i,e)},Cy=(t,i,s,h,r,n)=>{const{data:o,strokeStyle:a}=t,l=o.map((t=>"number"==typeof t?t:t.value)),u=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=l.reduce(((t,i)=>t+i),0),d=gy(e(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],A=f.x<=f.y?f.x/2:f.y/2;let g=90;l.forEach(((t,s)=>{const e=t/c*360;i.arc.add().Xs(n).dh(d).zu(A).Gu(0).Ou(g).bh(g+e).ah(u[s]||yr(h.sparkPieChartFillStyle,s)).oh(a||h.sparkPieChartStrokeStyle),g+=e}))};var ky,Ty,Fy;!function(t){t[t.UpToDown=0]="UpToDown",t[t.LeftToRight=1]="LeftToRight"}(ky||(ky={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal",t[t.Both=2]="Both"}(Ty||(Ty={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Fy||(Fy={}));class Iy extends _l{constructor(t,i,s,e,h){super(),this.fe=!1,this.ow={x:0,y:0,height:20,width:20},this.fP={x:10,y:10},this.ae=t,this.AP=h,this.gP=new wu(t,i,s,Ph,e).setMouseInteractions(!0),this.vP=t.Oc(i,fl.Simple).ah(e.dataGridScrollBarButtonArrowFillStyle).oh(e.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.sc(this),this.gP.onMouseEnter((t=>t.setHighlight(1))),this.gP.onMouseLeave((t=>t.setHighlight(0)))}yP(){switch(this.AP){case Fy.Up:this.vP.Kl([{x:this.ow.x,y:this.ow.y+this.fP.y/2},{x:this.ow.x+this.fP.x/2,y:this.ow.y-this.fP.y/2},{x:this.ow.x-this.fP.x/2,y:this.ow.y-this.fP.y/2}]);break;case Fy.Down:this.vP.Kl([{x:this.ow.x-this.fP.x/2,y:this.ow.y+this.fP.y/2},{x:this.ow.x+this.fP.x/2,y:this.ow.y+this.fP.y/2},{x:this.ow.x,y:this.ow.y-this.fP.y/2}]);break;case Fy.Left:this.vP.Kl([{x:this.ow.x-this.fP.x/2,y:this.ow.y},{x:this.ow.x+this.fP.x/2,y:this.ow.y+this.fP.y/2},{x:this.ow.x+this.fP.x/2,y:this.ow.y-this.fP.y/2}]);break;case Fy.Right:this.vP.Kl([{x:this.ow.x-this.fP.x/2,y:this.ow.y+this.fP.y/2},{x:this.ow.x+this.fP.x/2,y:this.ow.y},{x:this.ow.x-this.fP.x/2,y:this.ow.y-this.fP.y/2}])}}dh(t){return this.ow.x=t.x,this.ow.y=t.y,this}ll(){return e(this.ow.x,this.ow.y)}Wt(t){return this.ow.height=t.x,this.ow.width=t.y,this}Hi(){return{x:this.ow.height,y:this.ow.width}}onMouseDown(t){return this.gP.onMouseDown(t)}onMouseUp(t){return this.gP.onMouseUp(t)}setFillStyle(t){return this.gP.setFillStyle(t),this}getFillStyle(){return this.gP.getFillStyle()}setStrokeStyle(t){return this.gP.setStrokeStyle(t),this}getStrokeStyle(){return this.gP.getStrokeStyle()}uh(){return this.gP.uh(),this.yP(),this}de(){return this.gP.setSize(e(this.ow.height,this.ow.width)).setPosition(e(this.ow.x,this.ow.y)),this}setVisible(t){return this.gP.setVisible(t),this.vP.setVisible(t),this}dispose(){return this.gP.dispose(),this.vP.dispose(),this}setMouseInteractions(t){return this.gP.setMouseInteractions(t),this}getMouseInteractions(){return this.gP.getMouseInteractions()}onHighlight(t){return this.Ct.on("highlight",t)}offHighlight(t){return this.Ct.off(t)}getHighlight(){return this.gP.getHighlight()}setHighlight(t){return this.gP.setHighlight(_r(t)),this.Ct.emit("highlight",this,Boolean(t)),this.ae.ie(),this}}const Py=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class Dy{constructor(i,s,h,r,n,o,a){this.Ld={x:0,y:0},this.ow={x:0,y:0,height:0,width:0},this.Ct=new Ze,this.mP={min:e(0,0),max:e(0,0)},this.r_=!1,this.n_=!1,this.pP={x:0,y:0},this.rc=void 0,this.SP=e(0,0),this.bP={x:0,y:0},this.xP=0,this.MP=15,this.o_=(i,s)=>{this.r_=!0,this.ig.ie();const e=this._P.getDraggingMode();this.rc=this.ig.$s.wn(e===t.UIDraggingModes.notDraggable?t.MouseStyles.Restricted:e===t.UIDraggingModes.draggable?t.MouseStyles.Move:e===t.UIDraggingModes.onlyHorizontal?t.MouseStyles.Horizontal:t.MouseStyles.Vertical),this.wP&&clearInterval(this.wP)},this.a_=()=>{this.r_=!1,this.ig.ie(),this.ig.$s.Cn(this.rc)},this.l_=t=>(this.n_=!0,this.pP=Ah(this.ig.$s.Ah(t.x,t.y),this.ig.$s.ti,this.scale),!0),this.CP=(t,i)=>(this.kP(i),this.wP=setInterval((()=>this.kP(i)),300),!0),this.TP=()=>(clearInterval(this.wP),!0),this.u_=(i,s)=>{const h=this._P.getDraggingMode();if(h!==t.UIDraggingModes.notDraggable){const r=s||h,n=Ah(this.ig.$s.Ah(i.x,i.y),this.ig.$s.ti,this.scale),o=e(r!==t.UIDraggingModes.onlyVertical?Py(n.x,this.scale.x):this.ow.x,r!==t.UIDraggingModes.onlyHorizontal?Py(n.y,this.scale.y):this.ow.y),a=e(o.x-this.pP.x,o.y-this.pP.y),l=e(this._P.getPosition().x+a.x,this._P.getPosition().y+a.y),u=this.FP(l),c={x:Math.abs(this.SP.x-u.x),y:Math.abs(this.SP.y-u.y)};return this.IP(c),this.bP.y>a.y&&(this.pP=n),this.uh(),!0}return!1},this.c_=(t,i)=>{this.n_=!1,qh(i),this.ig.ie()},this.ig=i,this.Lv=s,this.scale=r,this.contentScale=n,this.PP=a,this.DP=new Iy(i,h,r,o,a===ky.UpToDown?Fy.Up:Fy.Left).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.BP=new Iy(i,h,r,o,a===ky.UpToDown?Fy.Down:Fy.Right).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this._P=new wu(i,h,r,Ph,o).setFillStyle(o.dataGridScrollBarFillStyle).setStrokeStyle(o.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(a===ky.UpToDown?t.UIDraggingModes.onlyVertical:a===ky.LeftToRight?t.UIDraggingModes.onlyHorizontal:t.UIDraggingModes.notDraggable),this.LP=new wu(s,h,r,Ph,o).setFillStyle(o.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(o.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this._P.onMouseEnter(this.o_),this._P.onMouseLeave(this.a_),this._P.onMouseDragStart(((t,i)=>this.l_(e(i.clientX,i.clientY))&&qh(i))),this._P.onMouseDrag(((t,i)=>this.u_(e(i.clientX,i.clientY))&&qh(i))),this._P.onMouseDragStop(this.c_),this._P.onTouchStart(((t,i)=>this.l_(e(i.clientX,i.clientY))&&qh(i))),this._P.onTouchMove(((t,i)=>this.u_(e(i.clientX,i.clientY))&&qh(i))),this._P.onTouchEnd(this.c_),this.DP.onMouseDown(((t,i)=>this.CP(t,i)&&qh(i))),this.BP.onMouseDown(((t,i)=>this.CP(t,i)&&qh(i))),this.DP.onMouseUp(((t,i)=>this.TP()&&qh(i))),this.BP.onMouseUp(((t,i)=>this.TP()&&qh(i))),this.LP.onMouseWheel(((t,i)=>this.RP(i))),this._P.onMouseWheel(((t,i)=>this.RP(i))),this.LP.onMouseDown(((t,i)=>this.CP(t,i)&&qh(i))),this.LP.onMouseUp(((t,i)=>this.TP()&&qh(i)))}EP(t){return this.ow=t,this}Xl(t){return this.ow.width=t,this}OP(){return this.ow.width}zP(t){return this.SP=t,this}VP(t){return this.Ld=t,this}NP(){return this.Ld}GP(t){return this.MP=t,this}UP(){return this.PP}WP(t){let i;switch(this.PP){case ky.UpToDown:return i=t>0?Math.min(this.SP.y-this.mP.max.y,this.bP.y+t):Math.max(0,this.bP.y+t),i!==this.bP.y&&(this.IP({x:0,y:i}),this.uh(),!0);case ky.LeftToRight:return i=Math.min(this.mP.max.x-this.SP.x,this.bP.x+t),i!==this.bP.x&&(this.IP({y:0,x:i}),this.uh(),!0);default:return!1}}YP(t){let i;switch(this.PP){case ky.UpToDown:return i=Math.max(0,this.bP.y-t),i!==this.bP.y&&(this.IP({x:0,y:i}),this.uh(),!0);case ky.LeftToRight:return i=t>0?Math.max(0,this.bP.x-t):Math.min(this.mP.max.x-this.SP.x,this.bP.x-t),i!==this.bP.x&&(this.IP({x:i,y:0}),this.uh(),!0);default:return!0}}HP(t){switch(this.PP){case ky.UpToDown:return this.Ct.on("scrollY",t);case ky.LeftToRight:return this.Ct.on("scrollX",t)}return this.Ct.on("scrollY",t)}FP(t){switch(this.PP){case ky.UpToDown:if(t.y>this.mP.min.y)return e(t.x,this.mP.min.y);if(t.y<this.mP.max.y)return e(t.x,this.mP.max.y);break;case ky.LeftToRight:if(t.x<this.mP.min.x)return e(this.mP.min.x,t.y);if(t.x>this.mP.max.x)return e(this.mP.max.x,t.y)}return t}RP(t){t.deltaY>0&&this.jP()&&qh(t),t.deltaY<0&&this.$P()&&qh(t)}kP(t){const i=Ah(this.ig.$s.Ah(t.clientX,t.clientY),this.ig.$s.ti,this.scale);let s;const h=this._P.getPosition(),r=this._P.getSize();this.XP(i,h,r)?clearInterval(this.wP):(s=this.PP===ky.UpToDown?e(0,i.y-h.y>0?this.MP:-this.MP):e(h.x-i.x>0?this.MP:-this.MP,0),(s.x>0||s.y>0)&&this.ZP(0!==s.x?Math.abs(s.x):Math.abs(s.y)),(s.x<0||s.y<0)&&this.QP(0!==s.x?Math.abs(s.x):Math.abs(s.y)))}XP(t,i,s){return this.PP===ky.UpToDown?t.y<i.y+s.y/2&&t.y>i.y-s.y/2:t.x>i.x-s.x/2&&t.x<i.x+s.x/2}JP(t){this.mP=t}ZP(t){switch(this.PP){case ky.UpToDown:{const i=Math.max(0,this.bP.y-t);return i!==this.bP.y&&(this.IP({x:0,y:i}),this.uh(),!0)}case ky.LeftToRight:{const i=Math.max(0,this.bP.x-t);return i!==this.bP.x&&(this.IP({x:i,y:0}),this.uh(),!0)}default:return!1}}QP(t){switch(this.PP){case ky.UpToDown:{let i;return i=this.Ld.x>this.ow.height?Math.min(this.SP.y-this.mP.max.y,this.bP.y+t):0,i!==this.bP.y&&(this.IP({x:0,y:i}),this.uh(),!0)}case ky.LeftToRight:{const i=Math.min(this.mP.max.x-this.SP.x,this.bP.x+t);return i!==this.bP.x&&(this.IP({y:0,x:i}),this.uh(),!0)}default:return!1}}$P(){return this.ZP(this.MP)}jP(){return this.QP(this.MP)}IP(t){if(t.x===this.bP.x&&t.y===this.bP.y)return;let i;switch(this.bP=t,this.PP){case ky.UpToDown:i=this.bP.y*this.xP*this.contentScale.ks().y,this.Ct.emit("scrollY",Ty.Vertical,i),this.ig.$s.ie();break;case ky.LeftToRight:i=this.bP.x*this.xP*this.contentScale.ks().x,this.Ct.emit("scrollX",Ty.Horizontal,i)}}setVisible(t){return this.DP.setVisible(t),this.BP.setVisible(t),this.LP.setVisible(t),this._P.setVisible(t),this}dispose(){return this.DP.dispose(),this.BP.dispose(),this.LP.dispose(),this._P.dispose(),this.wP&&clearInterval(this.wP),this}de(){switch(this.KP(),this.qP(),this.PP){case ky.UpToDown:this.DP.dh({x:this.ow.x,y:this.ow.y+this.ow.height-this.DP.Hi().x/2}).Wt(e(this.ow.width,this.ow.width)).de(),this.BP.dh({x:this.ow.x,y:this.ow.y+10}).Wt(e(this.ow.width,this.ow.width)).de(),this.LP.setSize({x:this.ow.width,y:this.ow.height-2*this.DP.Hi().x}).setPosition({x:this.ow.x,y:this.ow.y+this.BP.Hi().y+this.LP.getSize().y/2}),this._P.setSize(e(this.ow.width,this.tD())),this.SP={x:this.ow.x,y:this.DP.ll().y-this.DP.Hi().y/2-this._P.getSize().y/2},this.JP({min:{x:this.ow.x,y:this.DP.ll().y-this.DP.Hi().y/2-this._P.getSize().y/2},max:{x:this.ow.x,y:this.BP.ll().y+this.BP.Hi().x/2+this._P.getSize().y/2}});break;case ky.LeftToRight:this.DP.dh({x:this.ow.x,y:this.ow.y}).Wt(e(this.ow.height,this.ow.height)).de(),this.BP.dh({x:this.ow.x+this.ow.width-this.BP.Hi().x,y:this.ow.y}).Wt(e(this.ow.height,this.ow.height)).de(),this.LP.setSize({y:this.ow.height,x:this.ow.width-2*this.DP.Hi().y}).setPosition({x:this.ow.x+this.DP.Hi().x/2+this.LP.getSize().x/2,y:this.ow.y}),this._P.setSize(e(this.tD(),this.ow.height)),this.SP={x:this.DP.ll().x+this.DP.Hi().x/2+this._P.getSize().x/2,y:this.ow.y},this.JP({min:{x:this.DP.ll().x+this.DP.Hi().x/2+this._P.getSize().x/2,y:this.ow.y},max:{x:this.BP.ll().x-this.BP.Hi().x/2-this._P.getSize().x/2,y:this.ow.y}})}return this.iD(),this}KP(){switch(this.PP){case ky.UpToDown:this.sD()||this.setVisible(!1),this.sD()&&this.setVisible(!0);break;case ky.LeftToRight:this.eD()||this.setVisible(!1),this.eD()&&this.setVisible(!0)}}qP(){switch(this.PP){case ky.UpToDown:this.sD()||this.IP({x:0,y:0});break;case ky.LeftToRight:this.eD()||this.IP({x:0,y:0})}}sD(){return this.Ld.x>this.ow.height}eD(){return this.Ld.y>this.ow.width}tD(){switch(this.PP){case ky.UpToDown:return this.ow.height*(this.ow.height-2*this.DP.Hi().x)/this.Ld.x;case ky.LeftToRight:return this.ow.width*(this.ow.width-2*this.DP.Hi().y)/this.Ld.y;default:return 0}}iD(){switch(this.PP){case ky.UpToDown:this.xP=(this.Ld.x-this.ow.height)/(this.mP.min.y-this.mP.max.y);break;case ky.LeftToRight:this.xP=(this.Ld.y-this.ow.width)/(this.mP.max.x-this.mP.min.x)}}uh(){switch(this.DP.uh(),this.BP.uh(),this.LP.uh(),this.PP){case ky.UpToDown:this._P.setPosition({x:this.ow.x,y:this.DP.ll().y-this.DP.Hi().y/2-this._P.getSize().y/2-this.bP.y}).uh();break;case ky.LeftToRight:this._P.setPosition({y:this.ow.y,x:this.DP.ll().x+this.DP.Hi().x/2+this._P.getSize().x/2+this.bP.x}).uh()}return this}}class By{constructor(t,i,s,e,h,r,n){switch(this.ig=t,this.Lv=i,this.scale=e,this.contentScale=h,n){case Ty.Vertical:this.hD=this.rD(s,r,ky.UpToDown);break;case Ty.Horizontal:this.nD=this.rD(s,r,ky.LeftToRight);break;case Ty.Both:this.hD=this.rD(s,r,ky.UpToDown),this.nD=this.rD(s,r,ky.LeftToRight)}this.oD=Jn(new qn(void 0,((t,i,s,e,h)=>{var r,n;0!==e.x&&(null===(r=this.nD)||void 0===r?void 0:r.YP(e.x))&&qh(h),0!==e.y&&(null===(n=this.hD)||void 0===n?void 0:n.WP(e.y))&&qh(h)})))}rD(t,i,s){return new Dy(this.ig,this.Lv,t,this.scale,this.contentScale,i,s)}OP(){return 20}VP(t){var i,s;return null===(i=this.hD)||void 0===i||i.VP(t),null===(s=this.nD)||void 0===s||s.VP(t),this}aD(t){var i;return null===(i=this.nD)||void 0===i||i.GP(t),this}lD(t){var i;return null===(i=this.hD)||void 0===i||i.GP(t),this}uD(t){const i=this.hD;return i&&i.RP(t),this}cD(t){return this.oD.onTouchStart(this,t),this}dD(t){return this.oD.onTouchMove(this,t),this}fD(t){return this.oD.onTouchEnd(this,t),this}onScroll(t){var i,s;return null===(i=this.nD)||void 0===i||i.HP(t),null===(s=this.hD)||void 0===s||s.HP(t),this}dispose(){var t,i;return null===(t=this.hD)||void 0===t||t.dispose(),null===(i=this.nD)||void 0===i||i.dispose(),this}uh(){var t,i;return null===(t=this.hD)||void 0===t||t.uh(),null===(i=this.nD)||void 0===i||i.uh(),this}de(){var t,i,s,e;const h=this.scale.x,r=this.scale.y;return null===(t=this.hD)||void 0===t||t.EP({x:h.getInnerEnd()-10,y:r.getInnerStart()+20,height:r.getInnerEnd()-20,width:20}),null===(i=this.nD)||void 0===i||i.EP({x:h.getInnerStart()+10,y:r.getInnerStart()+10,height:20,width:h.getInnerEnd()-20}),null===(s=this.hD)||void 0===s||s.de(),null===(e=this.nD)||void 0===e||e.de(),this}}class Ly extends Ad{constructor(t,i,s,e,h,r){super(t,i,s,i.Kv("dataGrid bg",0),e,i.$s.zs.dataGridBackgroundFillStyle,i.$s.zs.dataGridBackgroundStrokeStyle,i.$s.zs.dataGridTitleFont,i.$s.zs.dataGridTitleFillStyle,r),this.AD=[],this.gD=[],this.vD=[],this.yD=new Map,this.mD=!0,this.pD=!0,this.SD=!0,this.bD=!0,this.xD=!0,this.MD=!0,this._D=!0,this.wD=!0,this.CD=!0,this.kD=!0,this.TD=!0,this.FD=!0,this.ID=!0,this.PD=!0,this.DD=!0,this.BD=!0,this.LD=new Set,this.RD=new Set,this.ED=!0,this.OD=!0,this.zD=(t,i)=>{t.borders=void 0===i?Vy:{...t.borders,...i},this.VD(t),this.FD=!0,this.$s.ie()},this.VD=t=>{t.borders&&(!1===t.borders.top&&this.ND(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.GD,bottom:!1}})),!1===t.borders.bottom&&this.ND(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.GD,top:!1}})),!1===t.borders.left&&this.ND(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.GD,right:!1}})),!1===t.borders.right&&this.ND(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.GD,left:!1}})),!0===t.borders.top&&this.ND(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.GD,bottom:!0}})),!0===t.borders.bottom&&this.ND(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.GD,top:!0}})),!0===t.borders.left&&this.ND(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.GD,right:!0}})),!0===t.borders.right&&this.ND(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.GD,left:!0}})))},this.UD=(t,i)=>{const s=this.yD.get(t);s&&this.Ct.emit(Ry.cellMouseEnter,s,i)},this.WD=(t,i)=>{const s=this.yD.get(t);s&&this.Ct.emit(Ry.cellMouseLeave,s,i)},this.YD=(t,i)=>{const s=this.yD.get(t);s&&this.Ct.emit(Ry.cellMouseClick,s,i)},this.HD=(t,i)=>{const s=this.yD.get(t);s&&this.Ct.emit(Ry.cellMouseDoubleClick,s,i)},this.jD=(t,i)=>{const s=this.yD.get(t);s&&this.Ct.emit(Ry.cellMouseDown,s,i)},this.$D=(t,i)=>{const s=this.yD.get(t);s&&this.Ct.emit(Ry.cellMouseUp,s,i)},this.XD=(t,i)=>{const s=this.yD.get(t);s&&this.Ct.emit(Ry.cellMouseMove,s,i)},this.ZD=(t,i)=>{const s=this.yD.get(t);s&&this.Ct.emit(Ry.cellMouseDrag,s,i)},this.QD=(t,i)=>{const s=this.yD.get(t);s&&this.Ct.emit(Ry.cellMouseDragStart,s,i)},this.JD=(t,i)=>{const s=this.yD.get(t);s&&this.Ct.emit(Ry.cellMouseDragStop,s,i)},this.KD=(t,i)=>{const s=this.yD.get(t);s&&(this.Ct.emit(Ry.cellMouseWheel,s,i),!i.defaultPrevented&&this.ED&&this.qD.uD(i))},this.tB=(t,i)=>{const s=this.yD.get(t);s&&(this.Ct.emit(Ry.cellTouchStart,s,i),!i.defaultPrevented&&this.OD&&this.qD.cD(i))},this.iB=(t,i)=>{const s=this.yD.get(t);s&&(this.Ct.emit(Ry.cellTouchMove,s,i),!i.defaultPrevented&&this.OD&&this.qD.dD(i))},this.sB=(t,i)=>{const s=this.yD.get(t);s&&(this.Ct.emit(Ry.cellTouchEnd,s,i),!i.defaultPrevented&&this.OD&&this.qD.fD(i))},this.$s.Mo(mc.Ef),this.sy.mr("Data Grid"),this.eB=s.d2({scaleXYConstructor:Nn}),this.eB.x.Eg=dy,this.hB=s.d2({scaleXYConstructor:Nn}),this.rB={x:0,y:0},this.nB=this.zs.dataGridTextFont,this.oB=this.zs.dataGridTextFillStyle,this.GD={top:!0,bottom:!0,left:!0,right:!0},this.aB=this.zs.dataGridCellBackgroundFillStyle,this.lB=this.zs.dataGridBorderStrokeStyle,this.uB="left-center",this.cB={left:5,right:5,bottom:5,top:5},this.dB=i.Ub("dataGrid grid bg",0),this.fB=i.Ub("dataGrid cell bg",1),this.AB=i.km("dataGrid cell content",0),this.gB=i.km("dataGrid scrollbar bg",1),this.vB=i.km("dataGrid scrollbar fg",2),this.qD=this.yB(),this.onBackgroundMouseWheel(((t,i)=>{this.ED&&this.qD.uD(i)})),this.onBackgroundTouchStart(((t,i)=>{this.OD&&this.qD.cD(i)})),this.onBackgroundTouchMove(((t,i)=>{this.OD&&this.qD.dD(i)})),this.onBackgroundTouchEnd(((t,i)=>{this.OD&&this.qD.fD(i)})),this.mB=this.dB.lh(this.eB).ah(this.zs.dataGridBackgroundFillStyle).oh(ah).setMouseInteractions(!1),this.pB=this.AB.gv(this.eB).setMouseInteractions(!1),this.SB=new of((()=>this.fB.lh(this.eB).setMouseInteractions(!0).setMouseEnterEventHandler(this.UD).setMouseLeaveEventHandler(this.WD).setMouseClickEventHandler(this.YD).setMouseDoubleClickEventHandler(this.HD).setMouseDownEventHandler(this.jD).setMouseUpEventHandler(this.$D).setMouseMoveEventHandler(this.XD).setMouseDragEventHandler(this.ZD).setMouseDragStartEventHandler(this.QD).setMouseDragStopEventHandler(this.JD).setMouseWheelEventHandler(this.KD).setTouchStartEventHandler(this.tB).setTouchMoveEventHandler(this.iB).setTouchEndEventHandler(this.sB))),this.bB=new of((()=>this.AB.lh(this.eB).setMouseInteractions(!1))),this.xB=new of((()=>this.AB.An(this.eB).setMouseInteractions(!1))),this.MB=new of((()=>this.AB.Nm(this.eB,{},[qd.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1))),this._B=new of((()=>this.AB.Sh(this.eB).setMouseInteractions(!1))),this.wB=new of((()=>this.AB.sS(this.eB).setMouseInteractions(!1))),this.CB=new of((()=>this.AB.lh(this.eB).setMouseInteractions(!1))),this.kB=new of((()=>this.AB.Yw(this.eB).setMouseInteractions(!1))),this.TB=new of((()=>this.AB.Bd(this.eB).setMouseInteractions(!1))),this.Jv(h,this.uiScale),this.onResize((()=>{this.mD=!0,this.$s.ie(),this.eB.Wt(this.pixelScale.Hi()),this.hB.Wt(this.pixelScale.Hi())})),this.FB=this.Gs.Jg([this.mB])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}If(){return[]}dispose(){return super.dispose(),this.dB.Bt(),this.fB.Bt(),this.AB.Bt(),this.gB.Bt(),this.vB.Bt(),cd(this.eB),cd(this.hB),this.qD.dispose(),this.xB.Qm(),this.SB.Qm(),this.bB.Qm(),this.MB.Qm(),this._B.Qm(),this.wB.Qm(),this.CB.Qm(),this.kB.Qm(),this.TB.Qm(),this}Vt(){return super.Vt(),this.eB.Vt(),this.hB.Vt(),this}Nt(){return super.Nt(),this.eB.Nt(),this.hB.Nt(),this}setBackgroundEffect(t){return this.FB.te(t),this.$s.ie(),this}getBackgroundEffect(){return this.FB.se()}setInteractionScrollOnWheel(t){return this.ED=t,this}getInteractionScrollOnWheel(){return this.ED}setInteractionPanOnTouch(t){return this.OD=t,this}getInteractionPanOnTouch(){return this.OD}onCellMouseEnter(t){return this.Ct.on(Ry.cellMouseEnter,t)}offCellMouseEnter(t){return this.Ct.off(t)}onCellMouseLeave(t){return this.Ct.on(Ry.cellMouseLeave,t)}offCellMouseLeave(t){return this.Ct.off(t)}onCellMouseClick(t){return this.Ct.on(Ry.cellMouseClick,t)}offCellMouseClick(t){return this.Ct.off(t)}onCellMouseDoubleClick(t){return this.Ct.on(Ry.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.Ct.off(t)}onCellMouseDown(t){return this.Ct.on(Ry.cellMouseDown,t)}offCellMouseDown(t){return this.Ct.off(t)}onCellMouseUp(t){return this.Ct.on(Ry.cellMouseUp,t)}offCellMouseUp(t){return this.Ct.off(t)}onCellMouseMove(t){return this.Ct.on(Ry.cellMouseMove,t)}offCellMouseMove(t){return this.Ct.off(t)}onCellMouseDrag(t){return this.Ct.on(Ry.cellMouseDrag,t)}offCellMouseDrag(t){return this.Ct.off(t)}onCellMouseDragStart(t){return this.Ct.on(Ry.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.Ct.off(t)}onCellMouseDragStop(t){return this.Ct.on(Ry.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.Ct.off(t)}onCellMouseWheel(t){return this.Ct.on(Ry.cellMouseWheel,t)}offCellMouseWheel(t){return this.Ct.off(t)}onCellTouchStart(t){return this.Ct.on(Ry.cellTouchStart,t)}offCellTouchStart(t){return this.Ct.off(t)}onCellTouchMove(t){return this.Ct.on(Ry.cellTouchMove,t)}offCellTouchMove(t){return this.Ct.off(t)}onCellTouchEnd(t){return this.Ct.on(Ry.cellTouchEnd,t)}offCellTouchEnd(t){return this.Ct.off(t)}setGridBackgroundFillStyle(t){return this.mB.ah(t),this.$s.ie(),this}getGridBackgroundFillStyle(){return this.mB.pr()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const r=s,n=e,o=h;let a=[];for(let s=t;s<t+r;s+=1)for(let t=i;t<i+n;t+=1){const i=this.ND(s,t);i&&a.push(i)}a=xr(a);let l={highlight:0};for(const t of a){const i=this.AD.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.AD.splice(i,1))}const u={...l,column:t,row:i,columnSpan:r,rowSpan:n,content:o};this.AD.push(u),this.bD=!0,"string"==typeof u.content||"number"==typeof u.content?this.pD=!0:this.SD=!0,this.$s.ie()}else this.IB(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.IB(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.IB(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.IB(e,s,i)}return this}setColumnWidth(t,i){let s=this.gD.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.gD.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.gD.splice(this.gD.indexOf(s),1):(s.min=i,s.max=i),this.MD=!0,this.$s.ie(),this}setRowHeight(t,i){let s=this.vD.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.vD.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.vD.splice(this.vD.indexOf(s),1):(s.min=i,s.max=i),this.MD=!0,this.$s.ie(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=d(i,i,i,i)),this.PB(t,(t=>this.DB(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=d(i,i,i,i)),this.BB(t,(t=>this.DB(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=d(s,s,s,s)),this.ND(t,i,(t=>this.DB(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=d(t,t,t,t)),this.cB={...this.cB,...t},this.LB((t=>this.DB(t,this.cB))),this}setCellBorders(t,i,s){return this.ND(t,i,(t=>this.zD(t,s))),this}setRowBorders(t,i){return this.BB(t,(t=>this.zD(t,i))),this}setColumnBorders(t,i){return this.PB(t,(t=>this.zD(t,i))),this}setCellsBorders(t){return this.GD=void 0===t?Vy:t,this.LB((t=>this.zD(t,this.GD))),this}setCellsBorderStrokeStyle(t){return this.lB="function"==typeof t?t(this.lB):t,this.PD=!0,this.$s.ie(),this}setColumnTextFillStyle(t,i){return this.PB(t,(t=>this.RB(t,i))),this}setRowTextFillStyle(t,i){return this.BB(t,(t=>this.RB(t,i))),this}setCellTextFillStyle(t,i,s){return this.ND(t,i,(t=>this.RB(t,s))),this}setCellsTextFillStyle(t){return this.oB="function"==typeof t?t(this.oB):t,this.LB((t=>this.RB(t,this.oB))),this}setColumnTextFont(t,i){return this.PB(t,(t=>this.EB(t,i))),this}setRowTextFont(t,i){return this.BB(t,(t=>this.EB(t,i))),this}setCellTextFont(t,i,s){return this.ND(t,i,(t=>this.EB(t,s))),this}setCellsTextFont(t){return this.nB="function"==typeof t?t(this.nB):t,this.LB((t=>this.EB(t,this.nB))),this}setColumnContentAlignment(t,i){return this.PB(t,(t=>this.OB(t,i))),this}setRowContentAlignment(t,i){return this.BB(t,(t=>this.OB(t,i))),this}setCellContentAlignment(t,i,s){return this.ND(t,i,(t=>this.OB(t,s))),this}setCellsContentAlignment(t){return this.uB=t,this.LB((t=>this.OB(t,this.uB))),this}setCellBackgroundFillStyle(t,i,s){return this.ND(t,i,(t=>this.zB(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.PB(t,(t=>this.zB(t,i))),this}setRowBackgroundFillStyle(t,i){return this.BB(t,(t=>this.zB(t,i))),this}setCellsBackgroundFillStyle(t){return this.aB="function"==typeof t?t(this.aB):t,this.LB((t=>this.zB(t,this.aB))),this}setCellHighlight(t,i,s){return this.ND(t,i,(t=>{t.highlight=_r(s)})),this.ID=!0,this.$s.ie(),this}setColumnHighlight(t,i){const s=_r(i);return this.PB(t,(t=>{t.highlight=s})),this.ID=!0,this.$s.ie(),this}setRowHighlight(t,i){const s=_r(i);return this.BB(t,(t=>{t.highlight=s})),this.ID=!0,this.$s.ie(),this}removeCell(t,i){return this.ND(t,i,(t=>this.AD.splice(this.AD.indexOf(t),1))),this.xD=!0,this.$s.ie(),this}removeRow(t){return this.BB(t,(t=>this.AD.splice(this.AD.indexOf(t),1))),this.AD.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.xD=!0,this.$s.ie(),this}removeColumn(t){return this.PB(t,(t=>this.AD.splice(this.AD.indexOf(t),1))),this.AD.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.xD=!0,this.$s.ie(),this}removeCells(){return this.AD.splice(0),this.xD=!0,this.$s.ie(),this}getColumnMax(){return 0===this.AD.length?0:this.AD.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.AD.length?0:this.AD.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}uh(t){super.uh(t),gd.ly(this.sy,this.qv),super.Qv();const i=Math.round(this.lB.Ft()),s=i/2;let e=this.pD||this.SD||this.bD||this.xD||this.MD||this._D||this.TD||this.FD||this.PD||this.BD;if(e){this.AD.forEach((t=>{this.RD.add(t.column)})),this.AD.forEach((t=>{this.LD.add(t.row)}));const t=this.xB.Xm(),h=this.VB(s,t);t.finishPlot();const r=this.NB(this.RD.size,h),n=this.GB(this.LD.size,h),o=r.reduce(jr,0)+i,a=n.reduce(jr,0)+i,l=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.UB){const t=this.UB.columnWidths.every(((t,i)=>t===r[i])),i=this.UB.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(e=!1)}this.UB={columnWidths:r,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:h}}const h=e||this.SD||this.bD||this.xD||this.wD||this.CD||this.kD||this.FD||this.ID||this.PD||this.mD||this.BD;if((h||this.DD)&&this.UB){const t=this.pixelScale.getInnerIntervalPixels(),e=gd.oy(this.sy,this.qv),r=[this.Ja.left+s,this.Ja.right+s],n=[this.Ja.bottom+s,this.Ja.top+e+s],o={x:t.x-r[0]-r[1],y:t.y-n[0]-n[1]},a=[this.Ja.left,this.Ja.right],l=[this.Ja.bottom,this.Ja.top+e],u={x:Math.round(t.x-a[0]-a[1]),y:Math.round(t.y-l[0]-l[1])},c={x:Math.ceil(s),y:Math.floor(u.y-s)};this.hB.bs(r).xs(n).Ms(0,o.x)._s(0,o.y),this.qD.VP({x:this.UB.dataGridHeight,y:this.UB.dataGridWidth}).de().uh();const d={x:Math.round(this.rB.x),y:Math.round(Math.min(0,this.rB.y))};this.eB.bs(a).xs(l).Ms(d.x,u.x+d.x)._s(d.y,u.y+d.y),this.mB.dh({x:c.x,y:c.y});const f={x:this.eB.x.Gi(),y:this.eB.y.Gi()+this.qD.OP(),width:this.eB.x.Wi()+i-this.qD.OP(),height:this.eB.y.Wi()+i};this.AB.Lb(f),this.fB.Lb(f),this.dB.Lb(f);const A=this.UB,g=[{x:this.eB.x.getInnerStart(),y:this.eB.y.getInnerStart()},{x:this.eB.x.getInnerEnd(),y:this.eB.y.getInnerStart()},{x:this.eB.x.getInnerEnd(),y:this.eB.y.getInnerEnd()},{x:this.eB.x.getInnerStart(),y:this.eB.y.getInnerEnd()}];A.cellsContentSizes.forEach((t=>{var i;const s={x:c.x+A.columnWidthsCumulative[t.cell.column],y:c.y-A.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},e={x:s.x+A.columnWidths[t.cell.column],y:s.y+A.rowHeights[t.cell.row]},h=Wr([s,{x:e.x,y:s.y},e,{x:s.x,y:e.y}],g);null===(i=t.text)||void 0===i||i.setVisible(h)})),h&&this.WB(c,this.UB,i)}this.mD=!1,this.pD=!1,this.SD=!1,this.bD=!1,this.xD=!1,this.MD=!1,this._D=!1,this.wD=!1,this.CD=!1,this.kD=!1,this.TD=!1,this.FD=!1,this.ID=!1,this.PD=!1,this.DD=!1,this.BD=!1}VB(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.AD){const{content:h}=t,r={...this.cB,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof h||"number"==typeof h){const s=String(h);n=i.add(),l=n.mr(s).Mr(t.textFont||this.nB).de().Id()}if(fy(h)&&(o=h,l={x:200,y:50}),fu(h)){const t=this.$s.YB(h);t.HB()?(a=h,l=a.Hi()):t.jB((()=>{this.BD=!0,this.$s.ie()}))}if(n||o||a){r.top=Math.round(r.top),r.left=Math.round(r.left),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom);const i={x:Math.round(l.x+r.left+r.right+e.left+e.right),y:Math.round(l.y+r.top+r.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:r,cellMargin:e})}}return s}WB(i,s,e){const{dataGridWidth:h,dataGridHeight:r,cellsContentSizes:n,columnWidths:o,columnWidthsCumulative:a,rowHeights:l,rowHeightsCumulative:u}=s,c={x:h-e,y:-r+e};this.mB.Wt(c),this.pB.ph(this.lB),this.yD.clear();const d={cellBackground:this.SB.Xm(),cellIconRect:this.bB.Xm(),lineSet:this.MB.Xm(),line:this._B.Xm(),pointSet:this.wB.Xm(),rect:this.CB.Xm(),junction:this.kB.Xm(),arc:this.TB.Xm()},f=[];for(const s of n){const{cell:h,text:r,sparkChart:n,icon:c,cellPadding:A,cellMargin:g}=s,v={column:h.column,row:h.row},y={x:i.x+a[h.column],y:i.y-u[h.row+h.rowSpan]},m={x:y.x+g.left,y:y.y+g.bottom},p={x:m.x+A.left,y:m.y+A.bottom},S={x:new Array(h.columnSpan).fill(0).reduce(((t,i,s)=>t+o[h.column+s]),0),y:new Array(h.rowSpan).fill(0).reduce(((t,i,s)=>t+l[h.row+s]),0)},b={x:S.x-g.left-g.right,y:S.y-g.top-g.bottom},x={x:b.x-A.left-A.right,y:b.y-A.top-A.bottom};if(r){const t=zy(p,x,h.contentAlignment||this.uB);r.dh(t[0]).yl({x:t[1],y:t[2]}).ah(this.$B(h.textFillStyle||this.oB,h.content,this.oB)).Xs(h.highlight)}const M=this.$B(h.backgroundFillStyle||this.aB,h.content);if(M!==De){const t=d.cellBackground.add();t.dh(y).Wt(S).ah(M).oh(ah).Xs(h.highlight),this.yD.set(t,v)}const _=h.borders||this.GD;if(_&&Oy(y,S,_,e,f),n){const t=p,i=x;Ay(n,d,this.eB,t,i,this.zs,this.HA,h.highlight)}if(c){const i=c.Hi(),s=zy(p,x,h.contentAlignment||this.uB);d.cellIconRect.add().dh({x:s[0].x+i.x*(-.5-s[1]/2),y:s[0].y+i.y*(-.5-s[2]/2)}).Wt(i).ah(new ru({source:c.Nc,fitMode:t.ImageFitMode.Stretch})).oh(ah).Xs(h.highlight)}}this.pB._i();for(const t of f)this.pB.Sn().yv(t[0],t[1]);d.cellBackground.finishPlot(),d.cellIconRect.finishPlot(),d.lineSet.finishPlot(),d.line.finishPlot(),d.pointSet.finishPlot(),d.rect.finishPlot(),d.junction.finishPlot(),d.arc.finishPlot()}NB(t,i){const s=new Array(t).fill(0);for(const t of this.RD.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.gD.find((i=>i.column===t)),r=h?Bh(e,void 0!==h.min?h.min:zr,void 0!==h.max?h.max:Or):e;s[t]=r}return s}GB(t,i){const s=new Array(t).fill(0);for(const t of this.LD.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.vD.find((i=>i.row===t)),r=h?Bh(e,void 0!==h.min?h.min:zr,void 0!==h.max?h.max:Or):e;s[t]=r}return s}$B(t,i,s){if(Ge(t)){try{const s=Number(i);return new Ee({color:t.getPalette().getColors(s)})}catch(t){}return s||De}return t}RB(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.oB):i,this.kD=!0,this.$s.ie()}EB(t,i){t.textFont="function"==typeof i?i(t.textFont||this.nB):i,this.TD=!0,this.$s.ie()}zB(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.aB):i,this.CD=!0,this.$s.ie()}OB(t,i){t.contentAlignment=i,this.wD=!0,this.$s.ie()}DB(t,i){t.padding={...t.padding,...i},this._D=!0,this.$s.ie()}IB(t,i,s){let e=this.ND(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.AD.push(e),this.bD=!0),"string"==typeof e.content||"number"==typeof e.content?this.pD=!0:this.SD=!0,this.$s.ie()}LB(t){this.AD.forEach((i=>t(i)))}ND(t,i,s){const e=this.AD.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}PB(t,i){const s=this.AD.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}BB(t,i){const s=this.AD.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}yB(){return new By(this.vB,this.gB,this.hB,this.hB,this.eB,this.zs,Ty.Both).onScroll(((t,i)=>{this.UB&&(t===Ty.Vertical&&(this.rB.y=-i),t===Ty.Horizontal&&(this.rB.x=i),this.DD=!0,this.$s.ie())})).aD(50).lD(12)}}const Ry={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var Ey;t.DataGridCellContentAlignmentOptions=void 0,(Ey=t.DataGridCellContentAlignmentOptions||(t.DataGridCellContentAlignmentOptions={})).Center="center",Ey.RightCenter="right-center",Ey.LeftCenter="left-center",Ey.RightTop="right-top",Ey.LeftTop="left-top",Ey.RightBottom="right-bottom",Ey.LeftBottom="left-bottom",Ey.CenterTop="center-top",Ey.CenterBottom="center-bottom";const Oy=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},zy=(t,i,s)=>{const h=t.x,r=t.x+i.x,n=t.x+i.x/2,o=t.y+i.y,a=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[e(h,l),-1,0];case"right-center":return[e(r,l),1,0];case"center":return[e(n,l),0,0];case"left-bottom":return[e(h,a),-1,-1];case"right-bottom":return[e(r,a),1,-1];case"center-bottom":return[e(n,a),0,-1];case"left-top":return[e(h,o),-1,1];case"right-top":return[e(r,o),1,1];case"center-top":return[e(n,o),0,1]}return Cr(0,`Unidentified DataGrid cell content alignment option: ${s}`)},Vy={top:!1,bottom:!1,left:!1,right:!1};class Ny extends ea{constructor(t,i,s,e,h,r){super(t,{sn(){},tn(){},hn(){}},e,i,s,{numeric:i.xAxisNumericTicks,datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.Gs=r,this.ae=h,this.yr=h.An(t.XB).Mr(this.zs.barChartCategoryAxisTitleFont||this.zs.xAxisTitleFont).ah(this.zs.barChartCategoryAxisTitleFillStyle||this.zs.xAxisTitleFillStyle),this.setTitleRotation(this.chart.le.getWidth({x:0,y:-90})),this.Cr=this.Gs.Jg([this.yr]).te(i.effectsText),this.ZB=h.Sh(t.XB).ph(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.ev=t,this.hv=t):"object"==typeof t&&(this.ev=t.min,this.hv=t.max),this.chart.$s.ie(),this}getThickness(){return{min:this.ev,max:this.hv}}setStrokeStyle(t){return this.ZB.ph(t),this.chart.$s.ie(),this}getStrokeStyle(){return this.ZB.Yu()}de(){if(!this.Ds)return{av:0,lv:0,pf:Bh(0,void 0!==this.ev?this.ev:0,void 0!==this.hv?this.hv:Or)};const t=this.ZB.Yu().Ft()/2,i=this.chart.le.getHeight(this.yr.de().Id());return{av:t,lv:i,pf:t+i}}uh(t,i,s,e){const h=this.getInterval(),r=this.chart.valueAxis.getInterval();this.ZB.xh(this.chart.le.toPoint(h.start,r.start)).bh(this.chart.le.toPoint(h.end,r.start)).setVisible(this.Ds),this.yr.dh(this.chart.le.toPoint(.5*(h.start+h.end),this.chart.valueAxis.ti.ts(r.start,-(t.av+e.labelMarginBeforeCategoryAxisPixels)))).yl(this.chart.le.toPoint(0,1)).setVisible(this.Ds)}setMouseInteractions(t){return this}$r(t,i){return new ha(i,t,this.ae,this.chart.XB)}Xr(t,i){return{}}nn(t,i){return i}ln(t,i,s){return{min:t,max:i}}}class Gy extends ea{constructor(t,i,s,e,h,r,n){super(t,{sn:()=>{var i;if(t.QB){if("positive"===t.JB||"bipolar"===t.JB){if("after-bar"===(null===(i=t.KB)||void 0===i?void 0:i.position)){const i=this.ti.Wi();return this.ti.ts(t.QB.max,Math.min(this.chart.le.getHeight(this.chart.qB())+t.KB.labelMargin,.3*i))}return t.QB.max}return t.tL?Bh(-1,-1e-6,t.QB.max):0}},tn:()=>{var i;if(t.QB){if("negative"===t.JB||"bipolar"===t.JB){if("after-bar"===(null===(i=t.KB)||void 0===i?void 0:i.position)){const i=this.ti.Wi();return this.ti.ts(t.QB.min,-Math.min(this.chart.le.getHeight(this.chart.qB())+t.KB.labelMargin,.3*i))}return t.QB.min}return t.tL?Bh(1,1e-6,t.QB.min):0}},hn:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.chart=t,this.Gs=r,this.ae=h,this.yr=h.An(t.XB).Mr(this.zs.barChartValueAxisTitleFont||this.zs.yAxisTitleFont).ah(this.zs.barChartValueAxisTitleFillStyle||this.zs.yAxisTitleFillStyle),this.setTitleRotation(this.chart.le.getHeight({x:0,y:-90})),this.Cr=this.Gs.Jg([this.yr]).te(i.effectsText),this.ZB=h.Sh(t.XB).ph(i.barChartValueAxisStrokeStyle||this.zs.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.ev=t,this.hv=t):"object"==typeof t&&(this.ev=t.min,this.hv=t.max),this.chart.$s.ie(),this}getThickness(){return{min:this.ev,max:this.hv}}setStrokeStyle(t){return this.ZB.ph(t),this.chart.$s.ie(),this}getStrokeStyle(){return this.ZB.Yu()}setTickStrategy(t,i){return super.cr(t,i)}de(t){if(!this.Ds)return this.kr(),{av:0,lv:0,pf:Bh(0,void 0!==this.ev?this.ev:0,void 0!==this.hv?this.hv:Or)};const i=this.chart.le.getWidth(this.chart.XB).Wi(),s=this.ti.Wi();this.Or({physicalAxisSize:s,oppositeAxisSize:i,plotLines:t});let e=0;for(const t of this.Bh.values())for(const i of t.values()){const t=i.ir.jr,s=this.chart.le.getWidth(i.kh.Id()),h=t.getTickLength()+t.getTickPadding()+s+t.getLabelPadding();e=Math.max(e,h)}const h=e+this.ZB.Yu().Ft()/2,r=this.chart.le.getWidth(this.yr.de().Id());return{av:h,lv:r,pf:Bh(h+r,void 0!==this.ev?this.ev:0,void 0!==this.hv?this.hv:Or)}}uh(t){const i=this.getInterval();this.ZB.xh(this.chart.le.toPoint(-.5,this.dr)).bh(this.chart.le.toPoint(-.5,this.Ar)).setVisible(this.Ds);const s="logarithmic"===this.lr.type?Math.sqrt(i.start+i.end):.5*(i.start+i.end),e=this.chart.le.toPoint(this.chart.categoryAxis.ti.ts(-.5,t.av*this.chart.le.iL),s),h=this.chart.le.toPoint(this.chart.le.sL,0);this.yr.dh(e).yl(h).setVisible(this.Ds)}setMouseInteractions(t){return this}$r(t,i){return new ha(i,t,this.ae,this.chart.XB)}Xr(t,i){const s=t.ir.jr,e=this.chart.le.toPoint(-.5,t.S),h=this.chart.XB.ts(e,this.chart.le.toPoint(s.getTickLength()*this.chart.le.iL,0)),r=this.chart.XB.ts(e,this.chart.le.toPoint(s.gridStrokeLength*i.oppositeAxisSize*-this.chart.le.iL,0)),n=this.chart.XB.ts(h,this.chart.le.toPoint(s.getTickPadding()*this.chart.le.iL,0));t.kh.dh(n).yl(this.chart.le.toPoint(this.chart.le.sL,s.getLabelAlignment()))._r(s.getLabelRotation()),s.tickStyle!==ah&&0!==s.tickLength&&i.plotLines.add({positions:[e,h]},{lineStyle:s.tickStyle}),s.gridStrokeStyle!==ah&&s.gridStrokeLength>0&&i.plotLines.add({positions:[e,r]},{lineStyle:s.gridStrokeStyle})}nn(t,i){return"linear"===this.lr.type?vc(t,i,this.ti):yc(t,i,this.ti)}ln(t,i,s){return{min:t,max:i}}}class Uy extends hA{constructor(t,i,s,e,h,r,n){super(t,i,s,e),this.ba=Lr(),this.S=0,this.eL=!1,this.chart=t,this.Es=t,this.category=h,this.subCategory=r,this.At=h,this.sh=yr(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,n),this.eh=yr(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,n),this.onVisibleStateChanged((()=>{this.Es.hL()})),this.onDispose((()=>{this.Es.hL(),this.Es.rL.delete(this)}))}setValue(t){return this.eL=!0,this.S=t,this.Es.hL(),this.Es.$s.ie(),this.Es.rL.delete(this),this}getValue(){return this.S}get value(){return this.S}setFillStyle(t){return this.sh="function"==typeof t?t(this.sh):t,this.Es.hL(),this}getFillStyle(){return this.sh}setStrokeStyle(t){return this.eh="function"==typeof t?t(this.eh):t,this.Es.hL(),this}getStrokeStyle(){return this.eh}Dp(){return this.Lp}kd(t,i){return Nd(t,this.Es.engine.scale,this.Es.Mm(new _d,this.category,this.S,this).Pc(),this,void 0)}solveNearestFromScreen(t){}setEffect(t){return this.Es.setBarsEffect(t),this}}const Wy=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value),Yy=(t,i,s)=>{const e=t.af.filter((t=>void 0!==t)),h=e.map((t=>s(t.sizePixels))).reduce(((t,i)=>Math.max(t,i)),1),r=Math.ceil(h/(i/e.length));return r<=1?e:e.filter(((t,i)=>i%r==0))};class Hy extends _f{constructor(i,s,e,h,r,n,o){var a;let l;super(i,s,e,s.Kv("barChart bg",0),h,s.$s.zs.barChartBackgroundFillStyle||s.$s.zs.chartXYBackgroundFillStyle,s.$s.zs.barChartBackgroundStrokeStyle||s.$s.zs.chartXYBackgroundStrokeStyle,s.$s.zs.barChartTitleFont||s.$s.zs.chartXYTitleFont,s.$s.zs.barChartTitleFillStyle||s.$s.zs.chartXYTitleFillStyle,n),this.coordsBars="barChart",this.nL=jy.Descending,this.oL=this.zs.barChartCategoryLabels,this.KB=this.zs.barChartValueLabelsAfterBars,this.aL=!1,this.sw=Dr(),this.lL=new Map,this.rL=new Map,this.JB="positive",this.uL="columns",this.cL=!0,this.dL=new Map,this.fL={speed:1},this.sm={speed:1},this.AL=.08,this.xm=t.AutoCursorModes.snapToClosest,this.Mm=(t,i,s,e)=>{this.categoryAxis.getTitle().length>0&&t.addRow(this.categoryAxis.getTitle()),t.addRow({text:i,font:{weight:"bold"}}),this.valueAxis.getTitle().length>0&&t.addRow(this.valueAxis.getTitle());const h=[];return e.subCategory&&e.subCategory.length>0&&h.push(e.subCategory),h.push(this.valueAxis.formatValue(s)),t.addRow(...h),t},this.Xn=(t,i,s,e,h)=>{this.XB.Wt(e,h)},this.$s.Mo(mc.Gf),this.le="horizontal"===(null==o?void 0:o.type)?Xy:$y,this.sy.mr("Bar Chart"),this.gL=s.km("barChart plotting 1",0),this.vL=s.km("barChart plotting 2",1),this.tL="logarithmic"===(null===(a=null==o?void 0:o.valueAxis)||void 0===a?void 0:a.type),this.tL?"horizontal"===this.le.$?(l=e.d1({scale1DConstructor:On,dimension:"y"}),this.XB=(new Gn).Ss(e.d1({scale1DConstructor:Tn,dimension:"x"}),l)):(l=e.d1({scale1DConstructor:On,dimension:"x"}),this.XB=(new Gn).Ss(l,e.d1({scale1DConstructor:Tn,dimension:"y"}))):(this.XB=e.d2({scaleXYConstructor:Nn}),l=this.le.getWidth(this.XB)),this.yL=this.Gs.Jg(),this.hw=new nf((()=>this.sw.V(this.gL.Cx(this.XB).Da(0))),((t,i,s)=>(t.ah(s.fillStyle).oh(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Sn();return s.Kl(i.vertices),this.sw.Mi(s,i.bar),i.bar.Ks([s]),s})))),(()=>{this.sw._i()}),(t=>{this.yL.Qs(t)})),this.uS=this.Lv.lh(this.XB).ah(this.zs.barChartSeriesBackgroundFillStyle||De).oh(ah),this.cS=this.Lv.lh(this.XB).ah(De).oh(this.zs.barChartSeriesBackgroundStrokeStyle||ah).setMouseInteractions(!1),super.lS(this.uS,this.cS),this.categoryAxis=new Ny(this,this.zs,!0!==(null==o?void 0:o.disableAnimations)&&!1!==(null==o?void 0:o.animationsEnabled),l,this.vL,this.Gs);const u=gc(null==o?void 0:o.valueAxis);this.valueAxis=new Gy(this,this.zs,!0!==(null==o?void 0:o.disableAnimations)&&!1!==(null==o?void 0:o.animationsEnabled),this.le.getHeight(this.XB),this.vL,this.Gs,u.type),this.mL=new of((()=>this.vL.An(this.XB).fn(Br).dn(Br).Da(1))),this.pL=new nf((()=>this.Lv.gv(this.XB).setMouseInteractions(!1)),((t,i,s)=>(t.ph(s.lineStyle),i.map((({positions:i,existingMember:s})=>(s||t.Sn()).yv(i[0],i[1])))))),this.Fm=s.Im();const c=Rh(o?o.autoCursorBuilder:void 0,Ed);this.Ay=c.Hy(this.Fm,this.uiScale,this.uiScale,this.zs),this.onResize(this.Xn),this.Jv(r,this.XB),this.setAutoCursorMode(t.AutoCursorModes.onHover),this.setAnimationsEnabled(!0!==(null==o?void 0:o.disableAnimations)&&!1!==(null==o?void 0:o.animationsEnabled)),this.gS(((t,i)=>{yd.vy(this,i)}))}getSeries(){return this.eS}setAutoCursor(t){return this.Ay&&t(this.Ay),this.$s.ie(),this}getAutoCursor(){return this.Ay}setAutoCursorMode(t){return this.xm=t,this.$s.ie(),this}getAutoCursorMode(){return this.xm}setCursorResultTableFormatter(t){return this.Mm=t,this.$s.ie(),this}setBarsMargin(t){return this.AL=Bh(t,0,.49),this.aL=!0,this.$s.ie(),this}getBarsMargin(){return this.AL}setBarsEffect(t){return this.yL.te(t),this.$s.ie(),this}getBarsEffect(){return this.yL.se()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}return this.SL("columns",i),this}setDataStacked(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.SL("stacks",s),this}setDataGrouped(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.SL("groups",s),this}SL(t,i){this.eS.length>0&&this.$s.Mo(mc.tA),this.uL=t,this.bL(i);const s=xr(i.map((t=>t.category))),e=s.length,h=xr(i.map((t=>t.subCategory))).filter((t=>void 0!==t));if(i.forEach((t=>{let i=this.eS.find((i=>i.category===t.category&&i.subCategory===t.subCategory));if(!i){const e=s.indexOf(t.category),r=h.includes(t.subCategory)?h.indexOf(t.subCategory):void 0;i=new Uy(this,this.rS,this.zs,this.$s.Gs,t.category,t.subCategory,Rh(r,e)),this.dS(i),this.dL.set(i,{category:e,valueStart:this.tL?1e-6:0,valueEnd:void 0!==t.value?t.value:0})}void 0!==t.value&&i.setValue(t.value)})),this.eS.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category&&i.subCategory===t.subCategory))&&(t.dispose(),this.dL.delete(t))})),this.categoryAxis.setInterval(this.le.getWidth({x:{start:-.5,end:e-.5},y:{start:e-.5,end:-.5}})),this.QB=0===this.eS.length?void 0:"stacks"!==t?this.eS.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:Or,max:zr}):{min:0,max:s.reduce(((t,s)=>Math.max(t,i.reduce(((t,i)=>i.category!==s?t:void 0!==i.value?t+i.value:t),0))),0)},this.QB&&(this.JB=this.QB.min>=0?"positive":this.QB.max<=0?"negative":"bipolar",("bipolar"===this.JB||"negative"===this.JB)&&this.tL))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");this.bL(this.eS),this.lL.clear(),this.rL.clear(),this.aL=!0,this.$s.ie()}setCategoryLabels(t){const i="function"==typeof t?this.oL?t(this.oL):this.oL:t;return this.oL=i?{...this.zs.barChartCategoryLabels,...i}:void 0,this.lL.clear(),this.$s.ie(),this}getCategoryLabels(){return this.oL}setValueLabels(t){var i;const s="function"==typeof t?this.KB?t(this.KB):this.KB:t,e=(null==s?void 0:s.position)||(null===(i=this.KB)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.KB={...this.zs.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.KB={...this.zs.barChartValueLabelsInsideBars,...s}):this.KB=void 0,this.rL.clear(),this.$s.ie(),this}getValueLabels(){return this.KB}setLabelFittingEnabled(t){return this.cL=t,this.$s.ie(),this}getLabelFittingEnabled(){return this.cL}getBar(t,i){if(("groups"===this.uL||"stacks"===this.uL)&&void 0===i)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const s=this.eS.find((s=>s.category===t&&(void 0===i||i===s.subCategory)));if(!s)throw new Error(`BarChart.getBar() no such bar: "${t}" ${i?`"${i}"`:""}`);return s}getBars(){return this.eS}setSorting(t){return this.nL=t,this.bL(this.eS),this.$s.ie(),this}getSorting(){return this.nL}setAnimationCategoryPosition(t,i=1){return this.fL=t?{speed:i}:void 0,this.$s.ie(),this}setAnimationValues(t,i=1){return this.sm=t?{speed:i}:void 0,this.$s.ie(),this}translateCoordinate(t,i,s){if(s&&jn(t)&&Hn(i))return super.translateCoordinate(t,i,s);const e=i;let h;if(Yn(t))h=this.$s.da(t);else if(jn(t)){const i=Ah(t,this.pixelScale,this.$s.ti);h={engineX:i.x,engineY:i.y}}else{if(!Wy(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=Ah(this.le.toPoint(t.iCategory,t.value),this.XB,this.$s.ti);h={engineX:i.x,engineY:i.y}}}if(Wn(e))return this.$s.fa(h);if("barChart"===e){const t=Ah({x:h.engineX,y:h.engineY},this.$s.ti,this.XB);return{iCategory:this.le.getWidth(t),value:this.le.getHeight(t)}}if(Hn(e))return Ah({x:h.engineX,y:h.engineY},this.$s.ti,this.pixelScale);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}If(){if("columns"===this.uL)return this.eS;const t=xr(Mr(this.eS.map((t=>t.subCategory))));return Mr(t.map((t=>{const i=this.eS.filter((i=>i.subCategory===t)),s=i[0];if(s)return(t=>{let i=!1;t.forEach((s=>s.onHighlight(((e,h)=>{i||(i=!0,t.forEach((t=>s!==t?t.setHighlight(h):void 0)),i=!1)})))),t.forEach((i=>i.onDispose((()=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)}))))})(i),{attach(e,h){return wr(e,i,{toggleVisibilityOnClick:!0,label:t,style:s.getFillStyle()}),this}}})))}uh(t){var i,s;super.uh(t);const e=this.mL.Xm(),h=this.pL.Xm(),r=this.eS.filter((t=>t.getVisible()&&t.eL)),n=xr(r.map((t=>t.category))),o=xr(Mr(r.map((t=>t.subCategory)))),a=5e-4*t*((null===(i=this.fL)||void 0===i?void 0:i.speed)||0),l=.003*t*((null===(s=this.fL)||void 0===s?void 0:s.speed)||0),u=this.valueAxis.ti,c=u instanceof On?(t,i)=>{var s;return vc(t,i,u,(null===(s=this.sm)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return yc(t,i,u,(null===(s=this.sm)||void 0===s?void 0:s.speed)||0)};let d;"columns"===this.uL?d=r.map((t=>({bar:t,position:{category:n.indexOf(t.category),valueStart:this.tL?1e-6:0,valueEnd:t.value}}))):"groups"===this.uL?d=r.map((t=>{const i=n.indexOf(t.category),s=o.indexOf(t.subCategory),e=1/(o.length+2*(o.length+1)*this.AL),h=this.AL*e;return{bar:t,position:{category:i+(s-(o.length-1)/2)*(e+h),valueStart:this.tL?1e-6:0,valueEnd:t.value}}})):(d=[],n.forEach(((t,i)=>{const s=r.filter((i=>i.category===t));let e=this.tL?1e-6:0;s.forEach(((i,s)=>{d.push({bar:i,position:{category:n.indexOf(t),valueStart:e,valueEnd:e+i.value}}),e+=i.value}))}))),d.forEach((t=>{const{bar:i,position:s}=t;let e,h,r=this.dL.get(i);void 0===r&&(r=s);const n=s.valueStart;if(this.fL&&r.category!==s.category){const t=Math.sign(s.category-r.category);e=r.category+a*t+l*(s.category-r.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.sm&&r.valueEnd!==s.valueEnd){const t=Math.sign(s.valueEnd-r.valueEnd);h=c(r.valueEnd,s.valueEnd),t!==Math.sign(s.valueEnd-h)&&(h=s.valueEnd)}else h=s.valueEnd;this.dL.set(i,{category:e,valueStart:n,valueEnd:h}),e===s.category&&h===s.valueEnd||this.$s.ie(!0),e===r.category&&h===r.valueEnd||(this.aL=!0)})),gd.ly(this.sy,this.qv);const f=r.length>0;this.categoryAxis.rn(),this.valueAxis.rn();const A=this.categoryAxis.setVisible(f).de(),g=this.valueAxis.setVisible(f).de(h),{labelMarginBeforeCategoryAxisPixels:v}=f?this.xL(n,r,e,h):{labelMarginBeforeCategoryAxisPixels:0};this.categoryAxis.uh(A,e,h,{labelMarginBeforeCategoryAxisPixels:v}),this.valueAxis.uh(g);const y=this.categoryAxis.getThickness(),m=Bh(A.pf+v,void 0!==y.min?y.min:0,void 0!==y.max?y.max:Or),p={x:Math.min(this.XB.x.getInnerStart(),this.XB.x.getInnerEnd()),y:Math.min(this.XB.y.getInnerStart(),this.XB.y.getInnerEnd())},S=Math.max(this.XB.x.getInnerStart(),this.XB.x.getInnerEnd()),b=Math.max(this.XB.y.getInnerStart(),this.XB.y.getInnerEnd()),x={x:S-p.x,y:b-p.y};this.uS.dh(p),this.uS.Wt(x),this.cS.dh(p),this.cS.Wt(x),super.Qv(),yd.uy(this,this.uS.getIsUnderMouse(),!1,this.eS,void 0,((t,i)=>t.kd(i,!0)));const M=gd.oy(this.sy,this.qv);if(this.XB.xs([this.Pi.bottom+this.Ja.bottom+("vertical"===this.le.$?m:0),this.Pi.top+this.Ja.top+M+("horizontal"===this.le.$?g.pf:0)]),this.XB.bs([this.Pi.left+this.Ja.left+this.le.getHeight({x:m,y:g.pf}),this.Pi.right+this.Ja.right]),this.gL.Lb({x:this.XB.x.Gi(),y:this.XB.y.Gi(),width:this.XB.x.Wi(),height:this.XB.y.Wi()}),this.Iv&&this.Iv(),this.aL){const t=this.hw.Xm(),i="groups"===this.uL?1/(o.length+2*(o.length+1)*this.AL):1-2*this.AL;r.forEach((s=>{const e=this.dL.get(s);if(void 0===e)return;const h=e.category-.5*i,r=e.category+.5*i,n=[this.le.toPoint(h,e.valueStart),this.le.toPoint(h,e.valueEnd),this.le.toPoint(r,e.valueEnd),this.le.toPoint(r,e.valueStart)];t.add({ba:s.ba,vertices:n,bar:s},{fillStyle:s.sh,strokeStyle:s.eh})})),t.finishPlot()}e.finishPlot(),h.finishPlot(),this.aL=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}solveNearest(t){}dispose(){return this.vL.Bt(),this.gL.Bt(),this.Ay.dispose(),this.Fm.Bt(),super.dispose()}bL(t){const i=this.nL;i&&t.sort(((s,e)=>i({category:s.category,value:t.reduce(((t,i)=>t+(i.category===s.category&&i.value||0)),0)},{category:e.category,value:t.reduce(((t,i)=>t+(i.category===e.category&&i.value||0)),0)})))}xL(t,i,s,e){let h=0;const r=this.oL,n=this.KB,o=this.valueAxis.getInterval(),a=this.le.getWidth({x:this.XB.x.Wi(),y:this.XB.y.Wi()});if(r&&r.labelFillStyle!==De){const n=r.tickLength+r.labelMargin,l=this.le.toPoint(0,1),u={af:t.map(((t,s)=>{const e=i.reduce(((i,s)=>s.category!==t?i:i+s.value),0),h=r.formatter(t,e);if(!h)return;const a=s;return void 0!==a?{text:h,position:this.le.toPoint(a,this.valueAxis.ti.ts(o.start,-n)),alignment:l,rotation:r.labelRotation,sizePixels:this.ML(t,e)}:void 0})),xc:r.labelFont,ti:this.XB},c=u?this.cL?Yy(u,a,this.le.getWidth):u.af:[];c.forEach((t=>{t&&s.add().mr(t.text).dh(t.position).yl(t.alignment)._r(t.rotation).ah(r.labelFillStyle).Mr(r.labelFont)})),r.tickStyle!==ah&&0!==r.tickLength&&c.forEach((t=>{if(!t)return;const i=this.le.getWidth(t.position);e.add({positions:[this.le.toPoint(i,this.valueAxis.ti.getInnerStart()),this.le.toPoint(i,this.valueAxis.ti.ts(o.start,-r.tickLength))]},{lineStyle:r.tickStyle})})),h=c.reduce(((t,i)=>i?Math.max(t,this.le.getHeight(i.sizePixels)):t),0)+r.tickLength+r.labelMargin}if(n&&n.labelFillStyle!==De){let t;"after-bar"===n.position?t={af:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.dL.get(t);return void 0!==e?{text:s,position:this.le.toPoint(e.category,this.valueAxis.ti.ts(e.valueEnd,n.labelMargin*Math.sign(e.valueEnd))),alignment:this.le.toPoint(0,-1*Math.sign(e.valueEnd)),rotation:n.labelRotation,sizePixels:this._L(t)}:void 0})),xc:n.labelFont,ti:this.XB}:"inside-bar"!==n.position&&"inside-bar-start"!==n.position&&"inside-bar-centered"!==n.position&&"inside-bar-end"!==n.position||(t={af:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.dL.get(t);if(void 0===e)return;const h="bipolar"===this.JB?Math.sign(e.valueEnd):"negative"===this.JB?-1:1,r=this.le.toPoint(0,"inside-bar"===n.position||"inside-bar-end"===n.position?1*h:"inside-bar-centered"===n.position?0:-1*h);return{text:s,position:this.le.toPoint(e.category,"inside-bar"===n.position||"inside-bar-end"===n.position?this.valueAxis.ti.ts(e.valueEnd,-n.labelMargin*h):"inside-bar-centered"===n.position?(e.valueStart+e.valueEnd)/2:this.valueAxis.ti.ts(e.valueStart,n.labelMargin*h)),alignment:r,rotation:n.labelRotation,sizePixels:this._L(t)}})),xc:n.labelFont,ti:this.XB}),t&&(t?this.cL?Yy(t,a,this.le.getWidth):t.af:[]).forEach((t=>{t&&s.add().mr(t.text).dh(t.position).yl(t.alignment)._r(t.rotation).ah(n.labelFillStyle).Mr(n.labelFont).setMouseInteractions(!1)}))}return{labelMarginBeforeCategoryAxisPixels:h}}ML(t,i){if(!this.oL||this.oL.labelFillStyle===De)return{x:0,y:0};const s=this.lL.get(t);if(s)return s;const e=this.oL.formatter(t,i),h=this.$s.cv.uv(e,this.oL.labelFont,this.oL.labelRotation);return h.isEstimate?this.$s.ie(!0):this.lL.set(t,h),h}_L(t){if(!this.KB||this.KB.labelFillStyle===De)return{x:0,y:0};const i=this.rL.get(t);if(i)return i;const s=this.$s.cv.uv(this.KB.formatter(t,t.category,t.value),this.KB.labelFont,this.KB.labelRotation);return s.isEstimate?this.$s.ie(!0):this.rL.set(t,s),s}qB(){return this.eS.reduce(((t,i)=>{const s=this._L(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}hL(){this.aL=!0,this.$s.ie()}getMinimumSize(){return{x:200,y:200}}}const jy={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},$y={...bc,$:"vertical",iL:-1,sL:1},Xy={...xc,$:"horizontal",iL:1,sL:-1},Zy=(t,i)=>i?t.x:t.y,Qy=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),Jy=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(Zy(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const u=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>Qy(t,o,r,i))).reduce(((t,i)=>Math.max(t,Zy(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&c>Zy(h,r)-e||-1===o&&c<0+e){u.fill(0);break}if(i!==s&&(1===o?n>c:n<c))break;u[i-1]=c-n,c+=e*o}const d=u.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/Zy(h,r)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class Ky{constructor(t,i,s,e,h){this.coordsRelative="relative",this.coordsClient="client",this.Ps=!1,this.AD=new Array,this.Ct=new Ze,this.wL=[],this.kv=[],this.CL=void 0,this.kL=!0,this.TL=!0,this.FL=!0,this.Pv=!1,this.IL=!0,this.PL=()=>{this.IL=!0,this.$s.ie()},this.DL=[],this.onInViewChange=t=>this.Ct.on("inViewChange",t),this.offInViewChange=t=>this.Ct.off(t,"inViewChange"),this.BL=t=>{for(let i=0;i<this.AD.length;i+=1)if(this.AD[i].panel===t){this.AD.splice(i,1),this.kL=!0,this.$s.ie();break}},this.LL=t=>{const i=this.wL.indexOf(t);i>=0&&this.wL.splice(i,1)},this.Ev=t=>{const i=this.kv.indexOf(t);i>=0&&this.kv.splice(i,1)},this.RL=(t,i,s,e,h)=>{if(this.EL(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.AD.push(r),this.OL(r),this.kL=!0,t}throw new ph("Out of dashboard range.")},this.zL=i.numberOfRows,this.VL=i.numberOfColumns,this.HA=t,this.NL=i,this.GL=e;const r=this.VL*this.zL;this.UL={x:new cy(new Array(this.VL).fill(1)),y:new cy(new Array(this.zL).fill(1))},this.zs=s.zs,this.WL=this.zs.dashboardSplitterStyle,this.zh=!0!==(null==i?void 0:i.disableAnimations)&&!1!==(null==i?void 0:i.animationsEnabled),this.YL=uy(s,r),this.HL=s.lP("dashboard splitters",500001),this.p_=()=>this.YL.aP(),this.Uv=this.YL.uP(),this.Gs=s.Gs.Us(this,{jL:{}}),this.Gs.jL.te(this.zs.effectsDashboardSplitters);const n=s.Hi();this.uiScale=dh.d2({scaleXYConstructor:Nn}).Ms(0,100)._s(0,100).Wt(n),this.pixelScale=dh.d2({scaleXYConstructor:Nn}).Ms(0,this.uiScale.x.getCellSize())._s(0,this.uiScale.y.getCellSize()).Wt(n),this.$L=s.XL.bind(s),this.ZL=s.QL.bind(s),this.JL=s.KL.bind(s),this.qL=s.tR.bind(s),this.Vo=s.Vo.bind(s),this.Go=s.Go.bind(s),this.engine=s.zv,this.$s=s.Vv,s.oa((()=>this.PL())),s.ie();const o=s.ua((t=>{this.Pv=t,this.Ct.emit("inViewChange",this,t)}));this.$v=s.ca.bind(s,o),this.iR(),this.setAnimationsEnabled(this.zh);const a=("resize",{on:(l=this.Ct).on.bind(l,"resize"),off:l.off.bind(l)});var l;this.createChartXY=t=>{const i=qy(t,this.NL,this.zh);return this.RL(new qg(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,i,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=qy(t,this.NL,this.zh);return this.RL(new hy(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,i,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=qy(t,this.NL,this.zh);return this.RL(new dv(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,i,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=qy(t,this.NL,this.zh),s=i&&i.type?i.type:sf;return this.RL(new s(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,a,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=qy(t,this.NL,this.zh),s=i&&i.type?i.type:Bv;return this.RL(new s(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,a,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=qy(t,this.NL,this.zh),s=i&&i.type?i.type:xv;return this.RL(new s(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,a,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=qy(t,this.NL,this.zh),s=t&&t.type?t.type:Gv;return this.RL(new s(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,a,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=qy(t,this.NL,this.zh);return this.RL(new dd(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendBoxPanel=t=>{const i=qy(t,this.NL,this.zh);return this.RL(new Of(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=qy(t,this.NL,this.zh);return this.RL(new hv(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,i,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=qy(t,this.NL,this.zh);return this.RL(new Hf(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,i,a),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=qy(t,this.NL,this.zh),s=new Rf(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,a,i);return this.RL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=qy(t,this.NL,this.zh),s=new Ly(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,a);return this.RL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=qy(t,this.NL,this.zh),s=new Hy(this.HA,this.YL.cP(this.sR(t.columnIndex,t.rowIndex)),this.eR(i,this.UL),this.BL,h,a,i);return this.RL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}sR(t,i){return t+i*this.VL}eR(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.VL:this.zL,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).Jt({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.VL,y:this.zL},i),d3:()=>new uh({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.VL,y:this.zL},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.$L(t[0]),this.ZL(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.JL(t[0]),this.qL(t[1]),this}getWidth(){return this.Vo()}getHeight(){return this.Go()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.HL.ie(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.HL.ie(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.zs}setSplitterStyle(t){const i=this.WL;return this.WL="function"==typeof t?t(this.WL):t,this.hR(i),this}getSplitterStyle(){return this.WL}setSplitterEffect(t){return this.Gs.jL.te(t),this.$s.ie(),this}getSplitterEffect(){return this.Gs.jL.se()}setAnimationHighlight(t){return this.FL=t,this.DL.forEach((i=>this.$s.js.re(i.line,t))),this}getAnimationHighlight(){return this.FL}hR(t){for(const t of this.DL)t.line.ph(this.WL);this.iR()}setColumnWidth(t,i){const s=this.UL.x._();return t>=0&&t<s.length&&(s[t]=i,this.UL.x.M(s)),this.PL(),this}getColumnWidth(t){const i=this.UL.x._();if(t>=i.length)throw new ph("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.UL.y._();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.UL.y.M(s)),this.PL(),this}getRowHeight(t){const i=this.UL.y._();if(t>=i.length)throw new ph("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}onResize(t){return this.Ct.on("resize",t)}offResize(t){return this.Ct.off(t,"resize")}rR(t,i,s){if(s&&Math.abs(t.x)>0)this.nR(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.oR(i,t.y)}for(const t of this.AD)t.panel.Nt();this.PL()}oR(t,i){const s=Jy(this.AD,this.UL.y._(),t,i,this.pixelScale.Hi(),!1);this.UL.y.M(s),this.PL()}nR(t,i){const s=Jy(this.AD,this.UL.x._(),t,i,this.pixelScale.Hi(),!0);this.UL.x.M(s),this.PL()}aR(){this.DL.forEach((t=>t.line.dispose())),this.DL.length=0;for(let t=1;t<=this.VL-1;t+=1)for(let i=0;i<=this.zL-1;i+=1)if(void 0!==this.AD.find((s=>Xr(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=Jn(new qn((()=>{this.lR(t)}),((i,s,e,h,r)=>{this.rR(h,t,!0),qh(r)}),(()=>{this.uR(t)}))),e=this.HL.Sh(this.pixelScale).ph(this.WL).setMouseEnterEventHandler((()=>{this.lR(t)})).setMouseLeaveEventHandler((()=>{this.uR(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.rR(r,t,!0),qh(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.$s.js.Hs(e,(t=>e.Xs(t)),{animationEnabled:this.FL}),this.DL.push({row:i,column:t,line:e,alignment:"vertical"})}for(let t=1;t<=this.zL-1;t+=1)for(let i=0;i<=this.VL-1;i+=1)if(void 0!==this.AD.find((s=>Xr(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=Jn(new qn((()=>{this.cR(t)}),((i,s,e,h,r)=>{this.rR(h,t,!1),qh(r)}),(()=>{this.dR(t)}))),e=this.HL.Sh(this.pixelScale).ph(this.WL).setMouseEnterEventHandler((()=>{this.cR(t)})).setMouseLeaveEventHandler((()=>{this.dR(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.rR(r,t,!1),qh(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.$s.js.Hs(e,(t=>e.Xs(t)),{animationEnabled:this.FL}),this.DL.push({row:t,column:i,line:e,alignment:"horizontal"})}this.Gs.jL.Qs(this.DL.map((t=>t.line)))}fR(){const t=this.pixelScale.Hi(),i=this.UL.x._(),s=i.reduce(((t,i)=>t+i)),h=this.UL.y._(),r=h.reduce(((t,i)=>t+i));this.DL.forEach((n=>{if("vertical"===n.alignment){const o=e(t.x*i.slice(0,n.column).reduce(((t,i)=>t+i),0)/s,t.y*h.slice(0,n.row).reduce(((t,i)=>t+i),0)/r),a=e(o.x,t.y*h.slice(0,n.row+1).reduce(((t,i)=>t+i),0)/r);n.line.xh(o).bh(a)}else{const o=e(t.x*i.slice(0,n.column).reduce(((t,i)=>t+i),0)/s,t.y*h.slice(0,n.row).reduce(((t,i)=>t+i),0)/r),a=e(t.x*i.slice(0,n.column+1).reduce(((t,i)=>t+i),0)/s,o.y);n.line.xh(o).bh(a)}}))}lR(i){this.DL.forEach((t=>{"vertical"===t.alignment&&t.column===i&&(this.$s.js.he(t.line,1),this.HL.AR(t.line))})),this.CL=this.engine.setMouseStyle(t.MouseStyles.ResizeColumn),this.$s.ie()}cR(i){this.DL.forEach((t=>{"horizontal"===t.alignment&&t.row===i&&(this.$s.js.he(t.line,1),this.HL.AR(t.line))})),this.CL=this.engine.setMouseStyle(t.MouseStyles.ResizeRow),this.$s.ie()}uR(t){this.DL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.$s.js.he(i.line,0)})),this.engine.restoreMouseStyle(this.CL),this.$s.ie()}dR(t){this.DL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.$s.js.he(i.line,0)})),this.engine.restoreMouseStyle(this.CL),this.$s.ie()}setAnimationsEnabled(t){return this.zh=t,this.getCells().filter((t=>t.panel instanceof Ad)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.zh),this}getAnimationsEnabled(){return this.zh}getCells(){return this.AD.slice()}dispose(){return this.Ps||(this.$v&&this.$v(),this.AD.slice().forEach((t=>t.panel.dispose())),this.wL.slice().forEach((t=>t.dispose())),this.kv.slice().forEach((t=>t.dispose())),this.Ps=!0,this.GL(),this.Ct.emit("dispose",this)),this}isDisposed(){return this.Ps}onDispose(t){return this.Ct.on("dispose",t)}offDispose(t){return this.Ct.off(t,"dispose")}getIsInView(){return this.Pv}saveToFile(t,i,s){return nd(this.engine,t,i,s),this}gR(t){if(this.IL){const t=this.$s.ti.Hi(),i=t.x,s=t.y;this.uiScale.Wt(i,s),this.pixelScale.Wt(i,s);const e=this.uiScale.getInnerIntervalPixels();this.pixelScale.Ms(0,e.x)._s(0,e.y),this.Ct.emit("resize",this,e.x,e.y,i,s),this.TL=!0}this.kL&&(this.aR(),this.kL=!1,this.TL=!0),this.TL&&(this.fR(),this.TL=!1);for(const i of this.AD)i.panel.uh(t);return this.wL.forEach((t=>t.de())),this.wL.forEach((t=>t.uh())),this.kv.forEach((t=>t.de())),this.kv.forEach((t=>t.uh())),this.IL=!1,this}Vt(){for(const t of this.AD)t.panel.Vt();return this.pixelScale.x.Vt(),this.pixelScale.y.Vt(),this.uiScale.x.Vt(),this.uiScale.y.Vt(),this}Nt(){for(const t of this.AD)t.panel.Nt();return this.pixelScale.x.Nt(),this.pixelScale.y.Nt(),this.uiScale.x.Nt(),this.uiScale.y.Nt(),this}translateCoordinate(t,i,s){return ld(t,i,s,this.pixelScale,this.$s)}addUIElement(t=ju,i=this.uiScale){i=ad(i,this.pixelScale);const s=od(t,this.p_(),this.uiScale,i,this.LL,this.zs);return this.wL.push(s),s}addLegendBox(i=hc,s=this.uiScale){s=ad(s,this.pixelScale);const e=od(i,this.Uv,this.uiScale,s,this.Ev,this.zs);return e.setDraggingMode(t.UIDraggingModes.notDraggable),this.kv.push(e),e}getLegendBoxes(){return this.kv}EL(t,i,s,e){return i>=0&&t>=0&&i+e<=this.zL&&t+s<=this.VL}OL(t){const i=this.WL,s=i===ah?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.zL-1?s:0,right:t.columnIndex<this.VL-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.dn(e)}iR(){this.uiScale.x.Ni([0,0]),this.uiScale.y.Ni([0,0]),this.pixelScale.x.Ni([0,0]),this.pixelScale.y.Ni([0,0]);for(const t of this.AD)this.OL(t);this.$s.ie()}}const qy=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.disableAnimations?!t.disableAnimations:void 0!==t.animationsEnabled?t.animationsEnabled:s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},tm={None:Gl,Rectangle:wu,Circle:Cu,Diamond:ku,Pointer:Tu},im={ChartMarkerXY:_A,SeriesMarkerXY:wA},sm={XY:MA,Spider:Rd,BarChart:Ed,Map:Vd,Polar:Rd},em={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},hm={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},rm={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},nm={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},om={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},am={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaao":{name:"Curaao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},lm={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},um={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},cm={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},dm={World:am,USA:lm,NorthAmerica:um,SouthAmerica:cm,Canada:nm,Europe:om,Asia:hm,Africa:em,Australia:rm},fm={Solid:Bv},Am=(t,i)=>Math.abs(t)+Math.abs(i);function gm(t,i){const s=t.reduce(Am,0),e=(h=t,Math.max(...h.map((t=>t))));var h;const r=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(i**2*e/s**2,s**2/(i**2*r))}const vm=({height:t,width:i})=>t>i?{value:i,vertical:!1}:{value:t,vertical:!0},ym=({data:t,dimensions:i})=>{const{x:s,y:e,width:h,height:r}=i,n=t.map((t=>t.value)).reduce(Am,0),o=t.map((t=>t.animatedValue)).reduce(Am,0),a=t.map((t=>t.animatedValue*r*h/o)),l=a.reduce(((t,i)=>t+i),0),u=a.map((t=>t/l*100)),c=a.filter(((t,i)=>u[i])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:n,animatedValue:o,x:s,y:e,width:h,height:r,nodeIndex:-1,userNode:{name:"Main Rectangle"}};if(1===t.length){const s={...t[0],x:i.x,y:i.y,width:i.width,height:i.height};d.children.push(s)}else pm(c,vm(d).value,t,d);return d.children},mm=(t,i,s,e,h)=>{const r=t.reduce(Am,0)/i;t.forEach(((t,i)=>{const n=Math.abs(t)/r,{x:o,y:a,children:l}=h,u={...e[l.length],x:o,y:a,width:s?r:n,height:s?n:r};s?h.y+=n:h.x+=n,l.push(u)})),s?(h.x+=r,h.y-=i,h.width-=r):(h.x-=i,h.y+=r,h.height-=r)},pm=(t,i,s,e)=>{const h=[{children:t,width:i,row:[]}];for(;h.length>0;){const t=h.pop();if(!t)continue;const{children:i,width:r,row:n}=t;let o=0;const a=[...n];for(;o<i.length;){const t=[...a,i[o]],n=gm(a,r),l=gm(t,r);if(!(0===a.length||n>l)){mm(a,r,vm(e).vertical,s,e),h.push({children:i.slice(o),width:vm(e).value,row:[]});break}a.push(i[o]),o+=1}o===i.length&&mm(a,r,vm(e).vertical,s,e)}};class Sm extends Ad{constructor(i,s,e,h,r,n,o){if(super(i,s,e,s.Kv("treeMapChart bg",0),h,s.$s.zs.treeMapChartBackgroundFillStyle||s.$s.zs.chartXYSeriesBackgroundFillStyle,s.$s.zs.treeMapChartBackgroundStrokeStyle||s.$s.zs.chartXYBackgroundStrokeStyle,s.$s.zs.treeMapChartTitleFont||s.$s.zs.chartXYTitleFont,s.$s.zs.treeMapChartTitleFillStyle||s.$s.zs.chartXYTitleFillStyle,o),this.vR=new Map,this.yR=[],this.mR={},this.pR=u([]),this.sm={speed:1},this.SR=Or,this.bR=!0,this.xR="Go Back",this.MR=[],this._R=this.zs.treeMapChartPathLabelFillStyle||this.zs.uiTextFillStyle,this.wR=this.zs.treeMapChartPathLabelFont||this.zs.uiTextFont,this.CR=this.zs.treeMapChartLabelHeaderFillStyle||this.zs.uiTextFillStyle,this.kR=this.zs.treeMapChartLabelHeaderFont||this.zs.uiTextFont,this.TR=this.zs.treeMapChartLabelFillStyle||this.zs.uiTextFillStyle,this.FR=this.zs.treeMapChartLabelFont||this.zs.uiTextFont,this.Fs=!0,this.ix=t.AutoCursorModes.onHover,this.Mm=bm,this.hx=!0,this.IR=!1,this.PR=this.zs.treeMapChartParentColor||_e,this.DR=this.zs.treeMapChartNodeStrokeStyle||this.zs.uiBackgroundStrokeStyle,this.onNodeMouseEnter=t=>this.Ct.on("mouseEnter",t),this.onNodeMouseLeave=t=>this.Ct.on("mouseLeave",t),this.onNodeMouseClick=t=>this.Ct.on("mouseClick",t),this.onNodeMouseDoubleClick=t=>this.Ct.on("mouseDoubleClick",t),this.onNodeMouseDown=t=>this.Ct.on("mouseDown",t),this.onNodeMouseUp=t=>this.Ct.on("mouseUp",t),this.onNodeMouseMove=t=>this.Ct.on("mouseMove",t),this.offNodeMouseEnter=t=>this.Ct.off(t,"mouseEnter"),this.offNodeMouseLeave=t=>this.Ct.off(t,"mouseLeave"),this.offNodeMouseClick=t=>this.Ct.off(t,"mouseClick"),this.offNodeMouseDoubleClick=t=>this.Ct.off(t,"mouseDoubleClick"),this.offNodeMouseDown=t=>this.Ct.off(t,"mouseDown"),this.offNodeMouseUp=t=>this.Ct.off(t,"mouseUp"),this.offNodeMouseMove=t=>this.Ct.off(t,"mouseMove"),this.offNodeMouseDragStart=t=>this.Ct.off(t,"mouseDragStart"),this.offNodeMouseDrag=t=>this.Ct.off(t,"mouseDrag"),this.offNodeMouseDragStop=t=>this.Ct.off(t,"mouseDragStop"),this.offNodeMouseWheel=t=>this.Ct.off(t,"mouseWheel"),this.lx=(t,i,s,e,h)=>{this.$s.ie(),this.IR=!0},this.li=(i,s)=>{const e=this.BR(s);e&&(this.ix!==t.AutoCursorModes.disabled&&(this.Dx=e,qh(i)),this.hx&&this.$s.js.he(s,!0),this.bR&&this.engine.setMouseStyle(t.MouseStyles.Point),this.Ct.emit("mouseEnter",this,i,e.userNode),this.$s.ie())},this.ui=(i,s)=>{const e=this.BR(s);e&&(this.ix!==t.AutoCursorModes.disabled&&(this.Dx=void 0,i&&qh(i)),this.hx&&this.$s.js.he(s,!1),this.engine.setMouseStyle(t.MouseStyles.Default),this.Ct.emit("mouseLeave",this,i,e.userNode),this.$s.ie())},this.gi=(i,s)=>{const e=this.BR(s);e&&(this.ix!==t.AutoCursorModes.disabled&&(this.Dx=e,qh(i)),this.hx&&this.$s.js.he(s,!0),this.bR&&this.engine.setMouseStyle(t.MouseStyles.Point),this.Ct.emit("mouseEnter",this,i,e.userNode),this.$s.ie())},this.ci=(t,i)=>{const s=this.BR(i);if(s){if(this.bR){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.mR[s.parentID]:void 0;i&&(this.pR.M([i]),this.Dx=void 0,this.Ct.emit("viewChange",this.pR._()),this.IR=!0),t&&qh(t)}this.Ct.emit("mouseClick",this,t,s.userNode),this.$s.ie()}},this.di=(t,i)=>{var s;const e=null===(s=this.vR.get(i))||void 0===s?void 0:s.userNode;this.Ct.emit("mouseDoubleClick",this,t,e)},this.fi=(t,i)=>{var s;const e=null===(s=this.vR.get(i))||void 0===s?void 0:s.userNode;this.Ct.emit("mouseDown",this,t,e)},this.Ai=(t,i)=>{var s;const e=null===(s=this.vR.get(i))||void 0===s?void 0:s.userNode;this.Ct.emit("mouseUp",this,t,e)},this.yi=(t,i,s)=>{var e;const h=null===(e=this.vR.get(s))||void 0===e?void 0:e.userNode;this.Ct.emit("mouseDragStart",this,t,i,h)},this.vi=(t,i,s,e,h)=>{var r;const n=null===(r=this.vR.get(h))||void 0===r?void 0:r.userNode;this.Ct.emit("mouseDrag",this,t,i,s,e,n)},this.mi=(t,i,s,e)=>{var h;const r=null===(h=this.vR.get(e))||void 0===h?void 0:h.userNode;this.Ct.emit("mouseDragStop",this,t,i,s,r)},this.pi=(t,i)=>{var s;const e=null===(s=this.vR.get(i))||void 0===s?void 0:s.userNode;this.Ct.emit("mouseWheel",this,t,e)},this.Si=(i,s)=>{const e=this.BR(s);e&&(this.ix!==t.AutoCursorModes.disabled&&(this.Dx=e),this.hx&&this.$s.js.he(s,!0),this.Ct.emit("touchStart",this,i,e.userNode),this.$s.ie(),qh(i))},this.bi=(i,s)=>{const e=this.BR(s);e&&(this.ix!==t.AutoCursorModes.disabled&&(this.Dx=e),this.hx&&this.$s.js.he(s,!0),this.Ct.emit("touchMove",this,i,e.userNode),this.$s.ie(),qh(i))},this.xi=(i,s)=>{const e=this.BR(s);if(e){if(this.ix!==t.AutoCursorModes.disabled&&(this.Dx=void 0),this.bR){const t=(null==e?void 0:e.children.length)?e:e.parentID?this.mR[e.parentID]:void 0;t&&(this.pR.M([t]),this.Ct.emit("viewChange",this.pR._()),this.IR=!0),i&&qh(i)}this.hx&&this.$s.js.he(s,!1),this.Ct.emit("touchEnd",this,i,e.userNode),this.$s.ie(),qh(i)}},this.LR=t=>{const i=this.mR[this.MR[t].id]?[this.mR[this.MR[t].id]]:this.yR;this.pR.M(i),this.Ct.emit("viewChange",i),this.IR=!0,this.$s.ie()},this.zs.treeMapChartNodeColors)this.RR=this.zs.treeMapChartNodeColors;else{const t=this.zs.pointSeriesFillStyle,i=t=>Oe(t)?t.getColor():_e;this.RR="function"==typeof t?new Array(5).fill(0).map(((s,e)=>i(t(e)))):[i(t)]}this.$s.Mo(mc.eA),this.Cm=s.Ub("TreeMapChart plotting",0),this.Tm=s.Ub("TreeMap UI plotting",1),this.onResize(this.lx),this.sy.mr("TreeMap Chart");const a=Rh(void 0,Vd);this.Mx=a.jy(s.Im(),this.pixelScale,this.pixelScale,this.zs).setVisible(!1),this.ER=this.Gs.Jg(),this.Jv(r,this.uiScale),this.wx=this.Cm.Cx(this.pixelScale).ah(new ze).oh(this.DR),this.OR=this.$s.js.pn(this,{animationEnabled:!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled)}),this.zR=new of((()=>this.Tm.An(this.pixelScale).setMouseInteractions(!1))),this.VR=new of((()=>this.Tm.An(this.uiScale))),this.wx.setMouseInteractions(this.Fs).setMouseEnterEventHandler(((t,i,s)=>this.li(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this.ui(i,s))).setMouseClickEventHandler(((t,i,s)=>this.ci(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.di(i,s))).setMouseDownEventHandler(((t,i,s)=>this.fi(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Ai(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.gi(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.yi(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.vi(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.mi(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.pi(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Si(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.bi(i,s))).setTouchEndEventHandler(((t,i,s)=>this.xi(i,s))),this.setAnimationsEnabled(!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled))}setData(t){t=Array.isArray(t)?t.slice():[t];const{NR:i}=(()=>{let t=0;return{NR:i=>{var s;const e=i.map(((t,i)=>({node:t,parent:null}))),h=[];for(;e.length>0;){const i=e.pop();if(!i)continue;const{node:r,parent:n}=i;t+=1;const o={id:t,parentID:null==n?void 0:n.id,name:r.name,value:r.value||0,animatedValue:r.value||0,children:[],nodeIndex:n?n.nodeIndex:-1,userNode:r};n?n.children.push(o):h.push(o),null===(s=r.children)||void 0===s||s.forEach((t=>{e.push({node:t,parent:o})}))}const r=t=>{t.children.forEach(r),t.children.length>0&&(t.value+=t.children.reduce(((t,i)=>t+i.value),0),t.animatedValue+=t.children.reduce(((t,i)=>t+i.animatedValue),0),t.children.sort(((t,i)=>i.animatedValue-t.animatedValue)))};h.forEach(r);const n=1===i.length?h[0].children:h;return n.sort(((t,i)=>i.animatedValue-t.animatedValue)),n.forEach(((t,i)=>{t.nodeIndex=i;const s=i=>{i.children.forEach((i=>{i.nodeIndex=t.nodeIndex,s(i)}))};s(t)})),h}}})(),s=i(t);return s.forEach((t=>{const i=this.mR[t.id];i&&this.GR(t,i)})),this.Dx=void 0,this.pR.M(s),this.yR=s,this.mR=this.UR(s),this.IR=!0,this.$s.ie(),this}setAnimationValues(t,i=1){return this.sm=t?{speed:i}:void 0,this.$s.ie(),this}setInitPathButtonText(t){return this.xR=t,this.IR=!0,this.$s.ie(),this}setDisplayedLevelsCount(t){return this.SR=t,this.IR=!0,this.$s.ie(),this}setDrillDownEnabled(t){return this.bR=t,this.IR=!0,this.$s.ie(),this}setDrillDownNode(t){var i,s;if(this.Dx=void 0,void 0===t)this.pR.M(this.yR);else{const e=[...this.yR];for(;e.length>0;){const h=e.pop();if(h){if(void 0!==h.value&&h.userNode===t||h.parentID&&Array.isArray(t)&&(null===(s=null===(i=this.mR[h.parentID])||void 0===i?void 0:i.userNode)||void 0===s?void 0:s.children)===t){const t=h.children.length?h:h.parentID?this.mR[h.parentID]:this.yR[0];this.pR.M([t]);break}if(h.children)for(let t=h.children.length-1;t>=0;t-=1)e.push(h.children[t])}}}return this.Ct.emit("viewChange",this.pR._()),this.IR=!0,this.$s.ie(),this}setNodeColoring(t){return t instanceof Array?(this.wx.ah(new ze),this.RR=t):this.wx.ah(t),this.IR=!0,this.$s.ie(),this}setParentNodeColor(t){return this.PR=t,this.IR=!0,this.$s.ie(),this}setPathLabelFillStyle(t){return this._R="function"==typeof t?t(this._R):t,this.IR=!0,this.$s.ie(),this}getPathLabelFillStyle(){return this._R}setPathLabelFont(t){return ca(t)?this.wR=t:this.wR=t(this.wR),this.IR=!0,this.$s.ie(),this}getPathLabelFont(){return this.wR}setHeaderFont(t){return ca(t)?this.kR=t:this.kR=t(this.kR),this.IR=!0,this.$s.ie(),this}getHeaderFont(){return this.kR}setHeaderFillStyle(t){return this.CR="function"==typeof t?t(this.CR):t,this.IR=!0,this.$s.ie(),this}getHeaderFillStyle(){return this.CR}setLabelFont(t){return ca(t)?this.FR=t:this.FR=t(this.FR),this.IR=!0,this.$s.ie(),this}getLabelFont(){return this.FR}setLabelFillStyle(t){return this.TR="function"==typeof t?t(this.TR):t,this.IR=!0,this.$s.ie(),this}getLabelFillStyle(){return this.TR}setNodeBorderStyle(t){return this.wx.oh(t),this.IR=!0,this.$s.ie(),this}getNodeBorderStyle(){return this.wx.Yo()}setNodeEffect(t){return this.ER.te(t),this.$s.ie(),this}getNodeEffect(){return this.ER.se()}setAutoCursor(t){return this.Mx&&t(this.Mx),this.$s.ie(),this}getAutoCursor(){return this.Mx}setAutoCursorMode(t){return this.ix=t,this.$s.ie(),this}getAutoCursorMode(){return this.ix}setCursorResultTableFormatter(t){return this.Mm=t,this.$s.ie(),this}getCursorResultTableFormatter(){return this.Mm}onNodeMouseDragStart(t){return this.Ct.on("mouseDragStart",t)}onNodeMouseDrag(t){return this.Ct.on("mouseDrag",t)}onNodeMouseDragStop(t){return this.Ct.on("mouseDragStop",t)}onNodeMouseWheel(t){return this.Ct.on("mouseWheel",t)}onNodeTouchStart(t){return this.Ct.on("touchStart",t)}onNodeTouchMove(t){return this.Ct.on("touchMove",t)}onNodeTouchEnd(t){return this.Ct.on("touchEnd",t)}onViewChange(t){return this.Ct.on("viewChange",t)}offNodeTouchStart(t){return this.Ct.off(t,"touchStart")}offNodeTouchMove(t){return this.Ct.off(t,"touchMove")}offNodeTouchEnd(t){return this.Ct.off(t,"touchEnd")}offViewChange(t){return this.Ct.off(t,"viewChange")}setMouseInteractions(t){return this.Fs=t,this.wx.setMouseInteractions(t),this}getMouseInteractions(){return this.Fs}setAnimationHighlight(t){return this.OR.xn(t),this}getAnimationHighlight(){return this.OR.Mn()}setHighlightOnHover(t){return this.hx=t,this}getHighlightOnHover(){return this.hx}getMinimumSize(){}If(){return[this]}uh(i){super.uh(i),super.Qv(),gd.ly(this.sy,this.qv);const s=gd.oy(this.sy,this.qv);if(this.IR&&this.pR._().length){this.wx._i(),this.vR.clear(),this.OR.bn(),this.zh&&this.WR(i);const e=ym({data:this.pR._(),dimensions:{x:0+this.Ja.left,y:0+this.Ja.bottom,width:this.pixelScale.x.getInnerEnd()-this.Ja.right-this.Ja.left,height:this.pixelScale.y.getInnerEnd()-s-this.Ja.top-this.Ja.bottom}}),h=this.zR.Xm();this.YR(e,h),h.finishPlot(),this.HR(),this.yR!==this.pR._()&&this.yR.length>1&&this.MR.unshift({name:this.xR,id:0});let r=0;const n=this.VR.Xm(),o=this.wR;this.MR.forEach(((i,s)=>{const e=n.add(),h=this.$s.cv.uv(i.name,o,0);e.mr(` ${i.name}`).Mr(o).dh({x:0,y:100}).yl({x:-1,y:1}).dn({left:this.Ja.left+r,top:this.Ja.top,right:0,bottom:0}).ah(this._R).setMouseClickEventHandler((t=>this.LR(s))).setMouseEnterEventHandler((()=>this.engine.setMouseStyle(t.MouseStyles.Point))).setMouseLeaveEventHandler((()=>this.engine.setMouseStyle(t.MouseStyles.Default))),r+=h.x+25})),n.finishPlot(),this.pR._().every((t=>t.value===t.animatedValue))?this.IR=!1:this.$s.ie(!0)}const e=this.$s.xo();if(this.Dx&&e){const t=e;this.Mx.setPosition(t).setVisible(!0).getResultTable().setContent(this.Mm(new _d,this.Dx).Pc())}else this.Mx.setVisible(!1);return this.Mx.de().uh(),this}dispose(){return this.Tm.Bt(),this.Cm.Bt(),this.Mx.dispose(),this.wx.dispose(),this.vR.clear(),this.zR.Qm(),this.VR.Qm(),super.dispose()}Vt(){return super.Vt(),this}Nt(){return super.Nt(),this}xf(){return Ar(this.wx.pr())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),fr(t,this.zs,s,{}),this}YR(t,i,s=!1,e=0){const h=t.map(((t,i)=>({node:t,isChild:s,depth:e})));for(;h.length>0;){const t=h.pop();if(!t)continue;const{node:s,depth:e,opacity:r}=t,{x:n,y:o,height:a,width:l,children:u,animatedValue:c,name:d,nodeIndex:f}=s,A=this.RR,g=0===e&&1===this.pR._().length?this.PR:A[f%A.length],v=[{x:n,y:o},{x:n,y:a+o},{x:l+n,y:a+o},{x:l+n,y:o}],y=this.wx.Sn().Kl(v).jR(g.setA(r||250)).Px(c);this.vR.set(y,s),this.OR.Sn(y,(t=>y.Xs(t)));const m=n+5,p=o+5,S=Math.max(a-25-5,0),b=Math.max(l-5-5,0);if(u&&u.length&&e<this.SR&&b>15&&S>15){const t=ym({data:u,dimensions:{x:b>0?m:n,y:S>0?p:o,width:b,height:S}});for(let i=0;i<t.length;i+=1){const n=(250-(u.length>7?50:150))/(u.length-1),o=1===s.id&&1===this.yR.length||this.yR===this.pR._()?250:r?r/(e+1):250-i*n;h.push({node:t[i],isChild:!0,depth:e+1,opacity:o})}}const x=0===e&&1===this.pR._().length?this.CR:this.TR,M=0===e?this.kR:this.FR,_=this.$R(d,l-25,M),w=this.$s.cv.uv(_,M,0),C=i.add();l-25>w.x&&a>25?C.mr(_).dh({x:n+5,y:a+o-2.5}).yl({x:-1,y:1}).ah(x).Mr(M):C.mr("")}}UR(t){const i={},s=[...t];for(;s.length>0;){const t=s.pop();t&&(i[t.id]=t,t.children&&s.push(...t.children))}return i}BR(t){if(!this.IR&&t)return this.vR.get(t)}HR(){this.MR=[];const t=this.pR._()[0].id;let i=this.mR[t].parentID;for(;i;)this.MR.push({name:this.mR[i].name,id:i}),i=this.mR[i].parentID;return this.MR.reverse()}$R(t,i,s){let e=this.$s.cv.uv(t,s,0).x;if(e<=i)return t;const h=t.split(" ");let r=t;for(;h.length>1&&e>i;)h.pop(),r=`${h.join(" ")}...`,e=this.$s.cv.uv(r,s,0).x;if(e>i)for(r=`${h[0]}...`,e=this.$s.cv.uv(r,s,0).x;r.length>3&&e>i;)r=`${r.substring(0,r.length-4)}...`,e=this.$s.cv.uv(r,s,0).x;return r.length<=3&&e>i?"":r}WR(t){var i;const s=[...this.yR];for(;s.length>0;){const e=s.pop();if(!e)continue;const h=e.value-e.animatedValue;if(Math.abs(h)<.0015*e.value||void 0===this.sm)e.animatedValue=e.value;else{const s=h/250*((null===(i=this.sm)||void 0===i?void 0:i.speed)||1)*t;e.animatedValue+=s,(h>0&&e.animatedValue>e.value||h<0&&e.animatedValue<e.value)&&(e.animatedValue=e.value)}e.children&&e.children.length>0&&s.push(...e.children)}}GR(t,i){const s=[{current:t,previous:i}];for(;s.length>0;){const t=s.pop();if(!t)continue;const{current:i,previous:e}=t;i.animatedValue=this.zh?e.animatedValue:i.value,e.nodeIndex<0?i.nodeIndex=0:i.nodeIndex=e.nodeIndex;const h=new Map(e.children.map((t=>[t.id,t])));i.children.forEach(((t,i)=>{const r=h.get(t.id);s.push({current:t,previous:r||e})}))}}}const bm=(t,i)=>{const{name:s,value:e}=i;return t.addRow(`${s}`).addRow(`${e}`),t},xm=(i,s)=>{const e=(i=>{const s=new Ee({color:i.uiStrokeColorContrastHigh}),e=new Ee({color:i.uiStrokeColorContrastMedium}),h=new Ee({color:i.uiStrokeColorContrastLow}),r=new ua({family:i.fontFamily,weight:"normal",style:"normal"}),n=r.setSize(18*i.fontScaler),o=r.setSize(16*i.fontScaler),a=r.setSize(14*i.fontScaler),l=r.setSize(10*i.fontScaler),u=r.withMutations((t=>t.set("size",14*i.fontScaler).set("weight","bold"))),c=r.setSize(13*i.fontScaler),d=new so({thickness:2,fillStyle:h}),f=new Ee({color:i.dataHighlightOverlayColor}),A=new so({thickness:2,fillStyle:i.legendBackgroundBorderFillStyle}),g=i.dataColorPalette.map((t=>new Ee({color:t.stroke}))),v=t=>g[t%g.length],y=g.map((t=>new so({thickness:2,fillStyle:t}))),m=t=>y[t%y.length],p=i.dataColorPalette.map((t=>new Ee({color:t.border}))).map((t=>new so({thickness:2,fillStyle:t}))),S=t=>p[t%p.length],b=i.dataColorPalette.map((t=>{const i=t.area;return new rh({angle:180,stops:[{color:ur(i,me(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:ur(i,me(0,0,0,i.getA()),.3),offset:1}]})})),x=t=>b[t%b.length],M=i.dataColorPaletteInverted.map((t=>{const i=t.area;return new rh({angle:180,stops:[{color:ur(i,me(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:ur(i,me(0,0,0,i.getA()),.3),offset:1}]})})),_=t=>M[t%M.length],w=i.dataColorPaletteInverted.map((t=>new Ee({color:t.border}))).map((t=>new so({thickness:2,fillStyle:t}))),C=t=>w[t%w.length],k=new Ee({color:i.dataColorPositive}),T=new Ee({color:i.dataColorNegative}),F=new so({thickness:1,fillStyle:new Ee({color:i.dataStrokeColorContrastHigh.setA(50)})}),I=new so({thickness:2,fillStyle:i.axisLineFillStyle}),P=ah,D=new Ee({color:me(0,0,0,1)}),B=new so({thickness:1,fillStyle:i.axisGridMajorFillStyle}),L=new so({thickness:1,fillStyle:i.axisTickMajorFillStyle}),R=a,E=i.axisLabelMajorFillStyle,O=new so({thickness:1,fillStyle:i.axisGridMajorFillStyle}),z=new so({thickness:1,fillStyle:i.axisTickMajorFillStyle}),V=a,N=i.axisLabelMajorFillStyle,G=new so({thickness:1,fillStyle:i.axisGridMinorFillStyle}),U=new so({thickness:1,fillStyle:i.axisTickMinorFillStyle}),W=l,Y=i.axisLabelMinorFillStyle,H=kc,j=new wc({gridStrokeStyle:B,tickStyle:L,tickLength:50,tickPadding:-14,labelFont:R,labelPadding:0,labelFillStyle:E}),$=new wc({gridStrokeStyle:O,tickStyle:z,tickLength:7,tickPadding:5,labelFont:V,labelPadding:0,labelFillStyle:N}),X=new wc({gridStrokeStyle:G,tickStyle:U,tickLength:4,tickPadding:10,labelFont:W,labelPadding:0,labelFillStyle:Y}),Z=new Zc({extremeTickStyle:H,majorTickStyle:$,minorTickStyle:X}),Q=new Gc({greatTickStyle:j,majorTickStyle:$,minorTickStyle:X}),J=new rd({majorTickStyle:$,minorTickStyle:X}),K=new Ee({color:i.dataHighlightOverlayColor}),q=new so({thickness:1,fillStyle:e}),tt=new so({thickness:2,fillStyle:e}),it=t=>new Sa.Triangulated({shape:"sphere",size:10,fillStyle:g[t%g.length]}),st=g[0],et=i.uiTextFillStyle,ht=i.legendBackgroundFillStyle,rt=new so({thickness:1,fillStyle:i.legendBackgroundBorderFillStyle}),nt=dr(i.legendButtonDefaultColor),ot=dr(i.isDark?me(70,70,70,255):me(170,170,170,255)),at=new Ee({color:i.isDark?me(70,70,70,255):me(170,170,170,255)}),lt=new so({thickness:1,fillStyle:s}),ut=new lu({thickness:1,fillStyle:i.cursorGridFillStyle,pattern:ou.DashedEqual,patternScale:3}),ct=i.zoomBandChartDefocusOverlayFillStyle,dt=new so({thickness:2,fillStyle:new Ee({color:i.zoomBandChartSplitterColor})});let ft={isDark:i.isDark,effect:i.effect,effectsText:i.effectsText,effectsDashboardSplitters:i.effectsDashboardSplitters,lcjsBackgroundFillStyle:i.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:ah,highlightColorOffset:i.highlightColorOffset,highlightColorOffsetAxisOverlay:i.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new so({thickness:4,fillStyle:i.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:i.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:ah,chartXYTitleFont:n,chartXYTitleFillStyle:i.titleFillStyle,chartXYSeriesBackgroundFillStyle:i.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:d,chartXYZoomingRectangleFillStyle:f,chartXYZoomingRectangleStrokeStyle:A,chartXYFittingRectangleFillStyle:f,chartXYFittingRectangleStrokeStyle:A,lineSeriesStrokeStyle:m,pointLineSeriesStrokeStyle:m,pointLineSeriesFillStyle:v,pointSeriesFillStyle:v,ellipseSeriesFillStyle:v,ellipseSeriesStrokeStyle:m,polygonSeriesFillStyle:v,polygonSeriesStrokeStyle:m,rectangleSeriesFillStyle:v,rectangleSeriesStrokeStyle:ah,segmentSeriesStrokeStyle:m,boxSeriesBodyFillStyle:v(0),boxSeriesBodyStrokeStyle:ah,boxSeriesStrokeStyle:new so({thickness:1,fillStyle:g[0]}),boxSeriesMedianStrokeStyle:new so({thickness:1,fillStyle:new Ee({color:me(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:k,ohlcCandleBodyFillStyleNegative:T,ohlcCandleTailStrokeStylePositive:new so({thickness:1,fillStyle:new Ee({color:i.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new so({thickness:1,fillStyle:new Ee({color:i.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new so({thickness:2,fillStyle:k}),ohlcBarStrokeStyleNegative:new so({thickness:2,fillStyle:T}),heatmapGridSeriesFillStyle:v,heatmapGridSeriesWireframeStyle:F,heatmapScrollingGridSeriesFillStyle:v,heatmapScrollingGridSeriesWireframeStyle:F,areaRangeSeriesFillStyle:x,areaRangeSeriesStrokeStyle:S,areaRangeSeriesFillStyleInverted:_,areaRangeSeriesStrokeStyleInverted:C,areaSeriesBipolarHighFillStyle:x,areaSeriesBipolarHighStrokeStyle:S,areaSeriesBipolarLowFillStyle:_,areaSeriesBipolarLowStrokeStyle:C,areaSeriesPositiveFillStyle:x,areaSeriesPositiveStrokeStyle:S,areaSeriesNegativeFillStyle:_,areaSeriesNegativeStrokeStyle:C,xAxisTitleFont:o,xAxisTitleFillStyle:i.axisTitleFillStyle,xAxisStrokeStyle:I,xAxisNibStyle:P,xAxisOverlayStyle:D,xAxisZoomingBandFillStyle:f,xAxisZoomingBandStrokeStyle:ah,xAxisNumericTicks:Z,xAxisDateTimeTicks:Q,xAxisTimeTicks:J,yAxisTitleFont:o,yAxisTitleFillStyle:i.axisTitleFillStyle,yAxisStrokeStyle:I,yAxisNibStyle:P,yAxisOverlayStyle:D,yAxisZoomingBandFillStyle:f,yAxisZoomingBandStrokeStyle:ah,yAxisNumericTicks:Z,yAxisDateTimeTicks:Q,yAxisTimeTicks:J,bandFillStyle:K,bandStrokeStyle:q,constantLineStrokeStyle:tt,barChartBackgroundFillStyle:i.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:ah,barChartTitleFont:n,barChartTitleFillStyle:i.titleFillStyle,barChartSeriesBackgroundFillStyle:De,barChartSeriesBackgroundStrokeStyle:ah,barChartBarFillStyle:v,barChartBarStrokeStyle:new so({thickness:1,fillStyle:h}),barChartValueAxisTitleFont:o,barChartValueAxisTitleFillStyle:i.axisTitleFillStyle,barChartValueAxisStrokeStyle:I,barChartValueAxisTicks:Z.setMajorTickStyle((t=>t.setGridStrokeStyle(ah))).setMinorTickStyle((t=>t.setGridStrokeStyle(ah))),barChartCategoryAxisTitleFont:o,barChartCategoryAxisTitleFillStyle:i.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:I,barChartCategoryLabels:{formatter:(t,i)=>t,labelFillStyle:Z.majorTickStyle.labelFillStyle,labelFont:Z.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:Z.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:Z.majorTickStyle.labelFillStyle,labelFont:Z.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:Z.majorTickStyle.labelFillStyle,labelFont:Z.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:i.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:ah,chart3DTitleFont:n,chart3DTitleFillStyle:i.titleFillStyle,chart3DSeriesBackgroundFillStyle:i.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:d,chart3DBoundingBoxStrokeStyle:ah,xAxis3DTitleFont:o,xAxis3DTitleFillStyle:i.axisTitleFillStyle,xAxis3DStrokeStyle:I,xAxis3DNumericTicks:Z,xAxis3DDateTimeTicks:Q,xAxis3DTimeTicks:J,yAxis3DTitleFont:o,yAxis3DTitleFillStyle:i.axisTitleFillStyle,yAxis3DStrokeStyle:I,yAxis3DNumericTicks:Z,yAxis3DDateTimeTicks:Q,yAxis3DTimeTicks:J,zAxis3DTitleFont:o,zAxis3DTitleFillStyle:i.axisTitleFillStyle,zAxis3DStrokeStyle:I,zAxis3DNumericTicks:Z,zAxis3DDateTimeTicks:Q,zAxis3DTimeTicks:J,lineSeries3DStrokeStyle:m,pointLineSeries3DStrokeStyle:m,pointLineSeries3DPointStyle:it,pointSeries3DPointStyle:it,pointCloudSeries3DPointStyle:t=>new Sa.Pixelated({size:5,fillStyle:g[t%g.length]}),surfaceGridSeries3DFillStyle:v,surfaceGridSeries3DWireframeStyle:F,surfaceScrollingGridSeries3DFillStyle:v,surfaceScrollingGridSeries3DWireframeStyle:F,boxSeries3DFillStyle:v,meshModel3DFillStyle:v(0),polarChartBackgroundFillStyle:i.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:ah,polarChartTitleFont:n,polarChartTitleFillStyle:i.titleFillStyle,polarChartSeriesBackgroundFillStyle:i.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:d,polarSectorFillStyle:K,polarSectorStrokeStyle:q,polarAmplitudeAxisTitleFont:o,polarAmplitudeAxisTitleFillStyle:i.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:I,polarAmplitudeAxisNumericTicks:Z,polarAmplitudeAxisDateTimeTicks:Q,polarAmplitudeAxisTimeTicks:J,polarRadialAxisTitleFont:o,polarRadialAxisTitleFillStyle:i.axisTitleFillStyle,polarRadialAxisStrokeStyle:I,polarRadialAxisTickStyle:$,polarLineSeriesStrokeStyle:m,polarPointLineSeriesFillStyle:v,polarPointLineSeriesStrokeStyle:m,polarPointSeriesFillStyle:v,polarPolygonSeriesFillStyle:x,polarPolygonSeriesStrokeStyle:S,polarAreaSeriesFillStyle:x,polarAreaSeriesStrokeStyle:S,polarHeatmapSeriesFillStyle:v,mapChartBackgroundFillStyle:i.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:ah,mapChartTitleFont:n,mapChartTitleFillStyle:i.titleFillStyle,mapChartFillStyle:st,mapChartStrokeStyle:new so({thickness:1,fillStyle:new Ee({color:i.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:De,mapChartOutlierRegionStrokeStyle:new so({thickness:1,fillStyle:h}),mapChartSeparateRegionFillStyle:ht,mapChartSeparateRegionStrokeStyle:rt,dataGridBackgroundFillStyle:i.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:ah,dataGridTitleFont:n,dataGridTitleFillStyle:i.titleFillStyle,dataGridTextFont:a,dataGridTextFillStyle:st,dataGridCellBackgroundFillStyle:new Ee({color:i.uiBackgroundColor}),dataGridBorderStrokeStyle:new so({thickness:.4,fillStyle:new Ee({color:i.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:i.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:ah,dataGridScrollBarFillStyle:i.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:rt,dataGridScrollBarButtonFillStyle:i.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:rt,dataGridScrollBarButtonArrowFillStyle:nt,dataGridScrollBarButtonArrowStrokeStyle:rt,sparkLineChartStrokeStyle:m(0),sparkPointChartFillStyle:v(0),sparkBarChartFillStyle:v(0),sparkBarChartStrokeStyle:S(0),sparkAreaChartFillStyle:x(0),sparkAreaChartStrokeStyle:S(0),sparkPieChartFillStyle:v,sparkPieChartStrokeStyle:rt,sparkChartBandFillStyle:K,sparkChartBandStrokeStyle:q,sparkChartConstantLineStrokeStyle:tt,spiderChartBackgroundFillStyle:i.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:ah,spiderChartTitleFont:n,spiderChartTitleFillStyle:i.titleFillStyle,spiderChartSeriesBackgroundFillStyle:i.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:d,spiderChartWebStyle:new so({thickness:2,fillStyle:h}),spiderChartScaleLabelFillStyle:i.axisLabelMajorFillStyle,spiderChartScaleLabelFont:a,spiderChartAxisLabelFillStyle:i.axisTitleFillStyle,spiderChartAxisLabelFont:o,spiderChartAxisStrokeStyle:new so({thickness:2,fillStyle:e}),spiderChartAxisNibStrokeStyle:new so({thickness:2,fillStyle:s}),spiderSeriesFillStyle:x,spiderSeriesStrokeStyle:S,spiderSeriesPointFillStyle:v,pieChartBackgroundFillStyle:i.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:ah,pieChartTitleFont:n,pieChartTitleFillStyle:i.titleFillStyle,pieChartSliceFillStylePalette:v,pieChartSliceStrokeStyle:rt,pieChartSliceLabelFont:c,pieChartSliceLabelFillStyle:i.uiTextFillStyle,pieChartConnectorStrokeStyle:lt,funnelChartBackgroundFillStyle:i.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:ah,funnelChartTitleFont:n,funnelChartTitleFillStyle:i.titleFillStyle,funnelChartSliceFillStylePalette:v,funnelChartSliceStrokeStyle:rt,funnelChartSliceLabelFont:c,funnelChartSliceLabelFillStyle:i.uiTextFillStyle,funnelChartConnectorStrokeStyle:lt,pyramidChartBackgroundFillStyle:i.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:ah,pyramidChartTitleFont:n,pyramidChartTitleFillStyle:i.titleFillStyle,pyramidChartSliceFillStylePalette:v,pyramidChartSliceStrokeStyle:rt,pyramidChartSliceLabelFont:c,pyramidChartSliceLabelFillStyle:i.uiTextFillStyle,pyramidChartConnectorStrokeStyle:lt,gaugeChartBackgroundFillStyle:i.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:ah,gaugeChartTitleFont:n,gaugeChartTitleFillStyle:i.titleFillStyle,gaugeChartEmptyGaugeFillStyle:new Ee({color:i.uiBackgroundColor}),gaugeChartEmptyGaugeStrokeStyle:rt,gaugeChartGaugeFillStyle:st,gaugeChartIntervalLabelsFillStyle:et,gaugeChartIntervalLabelsFont:c,gaugeChartValueLabelFillStyle:et,gaugeChartValueLabelFont:c,treeMapChartBackgroundFillStyle:i.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:ah,treeMapChartParentColor:i.treeMapChartParentColor,treeMapChartNodeColors:i.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new so({thickness:1,fillStyle:new Ee({color:pe("000")})}),treeMapChartTitleFillStyle:i.titleFillStyle,treeMapChartTitleFont:n,treeMapChartPathLabelFillStyle:et,treeMapChartPathLabelFont:c,treeMapChartLabelHeaderFillStyle:i.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:n,treeMapChartLabelFillStyle:i.treeMapChartLabelFillStyle,treeMapChartLabelFont:c,uiPanelBackgroundFillStyle:i.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:ah,zoomBandChartDefocusOverlayFillStyle:ct,zoomBandChartSplitterStrokeStyle:dt,zoomBandChartKnobFillStyle:i.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:i.zoomBandChartKnobSize,onScreenMenuBackgroundColor:me(254,204,0,.7),uiButtonFillStyle:nt,uiButtonFillStyleHidden:ot,uiButtonStrokeStyle:rt,uiButtonSize:10,uiBackgroundFillStyle:ht,uiBackgroundStrokeStyle:rt,uiTextFillStyle:et,uiTextFillStyleHidden:at,uiTextFont:c,legendTitleFillStyle:et,legendTitleFont:u,cursorTickMarkerXBackgroundFillStyle:ht,cursorTickMarkerXBackgroundStrokeStyle:rt,cursorTickMarkerXTextFillStyle:et,cursorTickMarkerXTextFont:c,cursorTickMarkerYBackgroundFillStyle:ht,cursorTickMarkerYBackgroundStrokeStyle:rt,cursorTickMarkerYTextFillStyle:et,cursorTickMarkerYTextFont:c,cursorPointMarkerFillStyle:ut.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:t.PointShape.Cross,cursorResultTableFillStyle:ht,cursorResultTableStrokeStyle:rt,cursorResultTableTextFillStyle:et,cursorResultTableTextFont:c,cursorGridStrokeStyleX:ut,cursorGridStrokeStyleY:ut,chartMarkerPointMarkerFillStyle:ut.getFillStyle(),chartMarkerPointMarkerSize:{x:20,y:20},chartMarkerPointMarkerShape:t.PointShape.Star,seriesMarkerPointMarkerFillStyle:ut.getFillStyle(),seriesMarkerPointMarkerSize:{x:9,y:9},seriesMarkerPointMarkerShape:t.PointShape.Cross};return i.overrideThemeProperties&&(ft={...ft,...i.overrideThemeProperties}),ft})(i),h={...s,header1Font:e.xAxisTitleFont,header2Font:e.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:e.uiTextFont,mainDataColor:i.dataColorPalette[0].stroke};return{...e,examples:h}},Mm=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/${i}`;return s.addEventListener("error",(i=>{Ir(t,e,"Theme resource",{shouldCrash:!1})})),s.src=e,s},_m=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:ur(i[e%i.length].stroke,me(255,255,255),.5);return new sh({stops:[{color:ur(h,me(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:ur(h,me(30,30,30),.5*s).setA(100),offset:1}]})},wm=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:ur(i[e%i.length].stroke,me(255,255,255),.2);return new sh({stops:[{color:ur(h,me(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:ur(h,me(0,0,0),.2*s),offset:1}]})},Cm=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:ur(i[e%i.length].stroke,me(255,255,255),.2);return new rh({angle:90,stops:[{color:ur(h,me(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:ur(h,me(30,30,30),.5*s),offset:1}]})},km=(t,i,s)=>(s=>{const e=new Map;return s=>{const h=e.get(s);if(h)return h;const r=(s=>{const e=!0===t?i[s%i.length].stroke:ur(i[s%i.length].stroke,me(255,255,255),.3);return new rh({angle:90,stops:[{color:ur(e,me(255,255,255),.5),offset:0},{color:e,offset:.35},{color:ur(e,me(30,30,30),.5),offset:1}]})})(s);return e.set(s,r),r}})(),Tm=(i,s,e)=>{const h=s[0].stroke;return new sh({shape:t.GradientShape.ellipse,extent:t.GradientExtent.farthestCorner,position:{x:.5,y:.5},stops:[{color:!0===i?h:ur(h,me(255,255,255),.5*e),offset:0},{color:h,offset:.5},{color:!0===i?h:ur(h,me(0,0,0),.5*e),offset:1}]})},Fm=Tr((()=>{const i=me(255,255,255),s=new Ee({color:i}),e=!0,h=new gu({spread:1,blur:9,offset:{x:0,y:0},color:me(0,0,0,150)}),r=new sh({position:{x:.8,y:.8},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.ellipse,stops:[{offset:0,color:me(50,51,52)},{offset:.5,color:me(14,15,16)},{offset:1,color:me(0,0,0)}]}),n=new Ee({color:me(45,45,45)}),o=new sh({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:me(120,120,120,100)},{offset:1,color:me(0,0,0,50)}]}),a=new sh({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:me(30,30,30,200)},{offset:1,color:me(0,0,0,255)}]}),l=new Ee({color:me(255,255,220)}),u=new Ee({color:me(255,255,166)}),c=new Ee({color:me(255,255,220)}),d=new Ee({color:me(255,255,220,130)}),f=new Ee({color:me(255,255,200)}),A=f,g=A,v=new rh({angle:45,stops:[{offset:0,color:me(230,230,230)},{offset:1,color:me(150,150,150)}]}),y=new Ee({color:me(220,220,220)}),m=new Ee({color:me(200,200,200,50)}),p=new Ee({color:me(200,200,200,150)}),S=new Ee({color:me(200,200,200,20)}),b=new Ee({color:me(150,150,150)}),x=new rh({angle:0,stops:[{offset:0,color:me(10,10,10,220)},{offset:1,color:me(30,30,30,220)}]}),M=s,_=me(255,255,200),w=x,C=M,k=me(20,20,20),T=me(0,0,0),F=i,I=me(150,150,150),P=me(50,50,50),D=me(50,50,50),B=me(100,100,100),L=me(200,200,200),R=[me(255,255,91,255),me(255,205,91,255),me(255,155,91,255),me(255,196,188,255),me(255,148,184,255),me(219,148,198,255),me(235,196,224,255),me(169,148,198,255),me(148,226,198,255),me(148,255,176,255),me(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),E=i.setA(20),O=me(176,255,157,255),z=me(255,112,76,255),V={mapChartFillStyle:new rh({angle:135,stops:[{color:me(255,255,91,255),offset:0},{color:me(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:_m(e,R,.5),pieChartSliceFillStylePalette:wm(e,R,1),funnelChartSliceFillStylePalette:Cm(e,R,1),pyramidChartSliceFillStylePalette:Cm(e,R,1),rectangleSeriesFillStyle:km(e,R),gaugeChartGaugeFillStyle:Tm(e,R,1)},N=new Ee({color:me(176,255,157,255)}),G=new Ee({color:me(255,146,146,255)}),U=new Ee({color:me(176,255,157,255)}),W=new Ee({color:me(230,63,63,255)}),Y=new Ee({color:me(176,255,157,120)}),H=new Ee({color:me(229,63,63,180)}),j=new Ee({color:me(27,37,36,255)}),$=new Ee({color:me(62,27,27,255)}),X=[me(255,0,0),me(255,255,0),me(0,255,0)],Z=[me(10,10,255),me(10,190,255),me(251,255,0),me(255,38,0)],Q=[me(255,255,0),me(255,204,0),me(255,128,0),me(255,0,0)],J=[me(0,0,0),me(167,4,69,255),me(255,0,0),me(252,252,168,255)],K=new sh({stops:[{color:me(61,61,80,100),offset:0},{color:me(44,44,55,30),offset:1}]}),q=new Ee({color:me(148,148,198,255)}),tt=Y.getColor().setA(255),it=me(100,100,100),st=[me(255,241,149,200),me(255,230,65,200),me(238,211,32,200),me(238,176,32,200),me(255,159,13,200),me(254,120,37,200),me(253,91,56,200),me(253,75,84,200),me(254,95,124,200),me(227,56,160,200),me(226,53,134,200),me(216,90,166,200),me(254,151,206,200),me(237,151,254,200),me(243,177,255,200),me(233,133,252,200),me(210,101,230,200),me(178,61,200,200),me(193,81,156,200),me(217,95,145,200)];return xm({isDark:e,highlightColorOffset:me(60,60,60,60),highlightColorOffsetAxisOverlay:me(255,255,255,40),effect:h,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:r,dashboardSplitterFillStyle:n,panelBackgroundFillStyle:o,seriesBackgroundFillStyle:a,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:l,axisTitleFillStyle:u,axisLabelMajorFillStyle:c,axisLabelMinorFillStyle:d,uiTitleFillStyle:f,uiTextFillStyle:A,cursorTextFillStyle:g,axisLineFillStyle:v,axisTickMajorFillStyle:y,axisGridMajorFillStyle:m,axisTickMinorFillStyle:p,axisGridMinorFillStyle:S,cursorGridFillStyle:b,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:me(190,50,50,100),border:me(210,80,80)}],dataHighlightOverlayColor:E,dataColorPositive:O,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new Ee({color:me(0,0,0,180)}),zoomBandChartSplitterColor:pe("#FBFB5A"),zoomBandChartKnobFillStyle:i=>new ru({source:Mm(i,"zoomBandChart/darkgold-selector.png"),fitMode:t.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:V,treeMapChartParentColor:pe("#181E21"),treeMapChartNodeColors:st,treeMapChartLabelFillStyle:new Ee({color:me(33,33,33)}),treeMapChartLabelHeaderFillStyle:new Ee({color:me(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:W,positiveAreaFillStyle:Y,negativeAreaFillStyle:H,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:$,badGoodColorPalette:X,coldHotColorPalette:Z,intensityColorPalette:Q,spectrogramColorPalette:J,bollingerFillStyle:K,bollingerBorderFillStyle:q,highlightPointColor:i,highlightDataGridColor:tt,unfocusedDataColor:it})})),Im=Tr((()=>{const i=me(255,255,255),s=new Ee({color:i}),e=!0,h=new gu({spread:0,blur:9,offset:{x:0,y:0},color:me(105,255,236,40)}),r=new Ee({color:me(2,21,30)}),n=new sh({stops:[{color:me(19,40,66,150),offset:0},{color:me(0,0,0,150),offset:1}]}),o=new Ee({color:me(0,5,8,150)}),a=s,l=s,u=s,c=new Ee({color:me(255,255,220,130)}),d=s,f=s,A=f,g=new Ee({color:me(20,224,250,255)}),v=s,y=new Ee({color:me(61,94,110,100)}),m=new Ee({color:me(61,94,110,255)}),p=new Ee({color:me(61,94,110,40)}),S=s,b=new Ee({color:me(0,18,23,255)}),x=s,M=i,_=new Ee({color:me(0,17,22,240)}),w=s,C=me(0,38,48,220),k=me(0,0,0),T=i,F=me(150,150,150),I=me(19,78,93),P=me(50,50,50),D=me(0,36,48),B=me(200,200,200),L=[me(45,253,253,255),me(44,172,247,255),me(46,100,248,255),me(96,84,199,255),me(184,104,245,255),me(98,160,218,255),me(43,238,245,255),me(38,140,206,255),me(112,96,224,255),me(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),R=i.setA(50),E=me(3,217,194,255),O=me(230,63,63,255),z={mapChartFillStyle:new rh({angle:135,stops:[{color:me(118,248,231,255),offset:0},{color:me(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:_m(e,L,1),pieChartSliceFillStylePalette:wm(e,L,1),funnelChartSliceFillStylePalette:Cm(e,L,1),pyramidChartSliceFillStylePalette:Cm(e,L,1),rectangleSeriesFillStyle:km(e,L),gaugeChartGaugeFillStyle:Tm(e,L,1)},V=new Ee({color:me(45,253,253,255)}),N=new Ee({color:me(255,146,146,255)}),G=new Ee({color:me(45,253,253,255)}),U=new Ee({color:me(230,63,63,255)}),W=new Ee({color:me(1,190,164,120)}),Y=new Ee({color:me(229,63,63,180)}),H=new Ee({color:me(1,53,57,255)}),j=new Ee({color:me(62,27,27,255)}),$=[me(1,104,119,255),me(0,165,144,255),me(0,246,214,255)],X=[me(0,87,95,255),me(0,125,124,255),me(1,209,182,255),me(0,255,221,255),me(218,112,112,255),me(172,47,47,255)],Z=[me(126,255,253,255),me(50,233,230,255),me(0,196,193,255),me(62,138,178,255),me(139,88,191,255),me(162,55,143,255)],Q=[me(13,31,52,255),me(101,50,118,255),me(1,142,172,255),me(2,196,170,255),me(0,255,221,255)],J=new sh({stops:[{color:me(122,103,254,70),offset:0},{color:me(178,168,255,10),offset:1}]}),K=new Ee({color:me(122,103,254,255)}),q=W.getColor().setA(255),tt=me(15,83,83),it=[me(139,252,252,150),me(60,239,239,150),me(2,201,201,150),me(26,159,159,150),me(15,146,187,150),me(65,168,200,150),me(67,146,207,150),me(64,108,209,150),me(189,64,233,150),me(219,84,238,150),me(192,55,212,150),me(212,98,229,150),me(248,110,211,150),me(251,154,225,150),me(251,154,184,150),me(233,105,144,150),me(255,133,170,150),me(249,110,135,150),me(245,72,101,150),me(210,57,84,150)];return xm({isDark:e,highlightColorOffset:me(60,60,60,60),highlightColorOffsetAxisOverlay:me(255,255,255,40),effect:h,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:i=>new ru({source:Mm(i,"themes/turquoiseHexagon.jpg"),fitMode:t.ImageFitMode.Fill}),dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:v,axisGridMajorFillStyle:y,axisTickMinorFillStyle:m,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:C,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:L,dataColorPaletteInverted:[{area:me(170,60,210,100),border:me(210,100,250)}],dataHighlightOverlayColor:R,dataColorPositive:E,dataColorNegative:O,zoomBandChartDefocusOverlayFillStyle:new Ee({color:me(0,0,0,180)}),zoomBandChartSplitterColor:pe("#2BF4F4"),zoomBandChartKnobFillStyle:i=>new ru({source:Mm(i,"zoomBandChart/turquoise-selector.png"),fitMode:t.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:z,treeMapChartParentColor:pe("#002329"),treeMapChartNodeColors:it,treeMapChartLabelFillStyle:new Ee({color:me(33,33,33)}),treeMapChartLabelHeaderFillStyle:new Ee({color:me(250,250,250)})},{positiveTextFillStyle:V,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:U,positiveAreaFillStyle:W,negativeAreaFillStyle:Y,positiveBackgroundFillStyle:H,negativeBackgroundFillStyle:j,badGoodColorPalette:$,coldHotColorPalette:X,intensityColorPalette:Z,spectrogramColorPalette:Q,bollingerFillStyle:J,bollingerBorderFillStyle:K,highlightPointColor:i,highlightDataGridColor:q,unfocusedDataColor:tt})})),Pm=Tr((()=>{const i=!1,s=new gu({spread:0,blur:6,offset:{x:2,y:-2},color:me(0,0,0,30)}),e=new sh({position:{x:.8,y:.8},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.ellipse,stops:[{offset:0,color:me(255,255,255)},{offset:1,color:me(255,255,255)}]}),h=new Ee({color:me(219,227,233,255)}),r=new sh({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:me(255,255,255,200)},{offset:1,color:me(240,244,246,200)}]}),n=new sh({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:me(255,255,255,255)},{offset:1,color:me(255,255,255,255)}]}),o=new Ee({color:me(33,43,49)}),a=new Ee({color:me(33,43,49)}),l=new Ee({color:me(33,43,49)}),u=new Ee({color:me(33,43,49,150)}),c=new Ee({color:me(33,43,49)}),d=c,f=d,A=new rh({angle:45,stops:[{offset:0,color:me(225,225,225)},{offset:1,color:me(225,225,225)}]}),g=new Ee({color:me(150,150,150,255)}),v=new Ee({color:me(150,150,150,170)}),y=new Ee({color:me(150,150,150,150)}),m=new Ee({color:me(150,150,150,100)}),p=new Ee({color:me(128,146,159)}),S=new rh({angle:0,stops:[{offset:0,color:me(255,255,255,240)},{offset:1,color:me(255,255,255,240)}]}),b=new Ee({color:me(168,186,199)}),x=me(255,255,200),M=new Ee({color:me(255,255,255,240)}),_=new Ee({color:me(128,146,159,255)}),w=me(255,255,255,255),C=me(168,168,199,255),k=me(168,186,199,255),T=me(168,186,199,255),F=me(168,186,199,255),I=me(168,186,199,255),P=me(100,100,100),D=me(200,200,200),B=[me(28,181,140,255),me(255,132,0,255),me(240,39,39,255),me(86,121,251,255),me(2,181,213,255),me(13,212,158,255),me(22,167,3,255),me(234,103,232,255),me(62,183,179,255),me(140,93,3,255),me(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),L=me(150,150,150,80),R=me(46,182,120,255),E=me(255,66,66,255),O=new so({thickness:2,fillStyle:new Ee({color:me(168,186,199,255)})}),z={mapChartFillStyle:new rh({angle:-45,stops:[{color:me(2,181,213,255),offset:0},{color:me(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:_m(i,B,.8),pieChartSliceFillStylePalette:wm(i,B,.8),funnelChartSliceFillStylePalette:Cm(i,B,.5),pyramidChartSliceFillStylePalette:Cm(i,B,.5),rectangleSeriesFillStyle:km(i,B),gaugeChartGaugeFillStyle:Tm(i,B,.8),chartXYSeriesBackgroundStrokeStyle:O,chart3DSeriesBackgroundStrokeStyle:O,polarChartSeriesBackgroundStrokeStyle:O,spiderChartSeriesBackgroundStrokeStyle:O,dataGridTextFillStyle:new Ee({color:me(0,88,64,255)})},V=new Ee({color:me(4,146,108,255)}),N=new Ee({color:me(240,39,39,255)}),G=new Ee({color:me(28,181,140,255)}),U=new Ee({color:me(230,88,88,255)}),W=new Ee({color:me(28,181,140,180)}),Y=new Ee({color:me(230,88,88,180)}),H=new Ee({color:me(229,243,228)}),j=new Ee({color:me(232,225,216)}),$=[me(193,48,48,255),me(240,234,60,255),me(45,191,55,255)],X=[me(10,19,255,255),me(15,191,250,255),me(249,255,2,255),me(253,133,0,255),me(255,24,0,255)],Z=[me(50,99,213),me(8,179,77),me(255,246,0),me(255,126,0),me(189,36,30)],Q=[me(16,64,176),me(8,179,77),me(255,246,0),me(255,126,0),me(168,6,0)],J=new Ee({color:me(185,198,207,255)}),K=new sh({stops:[{color:me(151,190,220,10),offset:0},{color:me(151,190,220,50),offset:1}]}),q=W.getColor().setA(255),tt=me(150,150,150),it=[me(255,243,136,125),me(254,237,99,125),me(255,216,109,125),me(255,172,100,125),me(255,133,101,125),me(255,113,142,125),me(230,103,129,125),me(242,126,219,125),me(255,155,235,125),me(255,181,240,125),me(203,143,255,125),me(208,154,255,125),me(171,188,255,125),me(197,209,255,125),me(171,187,255,125),me(84,167,239,125),me(38,196,214,125),me(38,214,196,125),me(69,225,141,125),me(36,191,88,125)];return xm({isDark:i,highlightColorOffset:me(-60,-60,-60,60),highlightColorOffsetAxisOverlay:me(0,0,0,40),effect:s,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:e,dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:v,axisTickMinorFillStyle:y,axisGridMinorFillStyle:m,cursorGridFillStyle:p,legendBackgroundFillStyle:S,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:_,uiBackgroundColor:w,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:D,dataColorPalette:B,dataColorPaletteInverted:[{area:me(190,50,50,100),border:me(210,80,80)}],dataHighlightOverlayColor:L,dataColorPositive:R,dataColorNegative:E,zoomBandChartDefocusOverlayFillStyle:new Ee({color:me(255,255,255,180)}),zoomBandChartSplitterColor:pe("#505D65"),zoomBandChartKnobFillStyle:i=>new ru({source:Mm(i,"zoomBandChart/light-selector.png"),fitMode:t.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:z,treeMapChartParentColor:pe("#D9D9D9"),treeMapChartNodeColors:it,treeMapChartLabelFillStyle:new Ee({color:me(0,0,0)}),treeMapChartLabelHeaderFillStyle:new Ee({color:me(33,33,33)})},{positiveTextFillStyle:V,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:U,positiveAreaFillStyle:W,negativeAreaFillStyle:Y,positiveBackgroundFillStyle:H,negativeBackgroundFillStyle:j,badGoodColorPalette:$,coldHotColorPalette:X,intensityColorPalette:Z,spectrogramColorPalette:Q,bollingerFillStyle:K,bollingerBorderFillStyle:J,highlightPointColor:me(0,0,0),highlightDataGridColor:q,unfocusedDataColor:tt})})),Dm=Tr((()=>{const i=!1,s=new sh({position:{x:.8,y:.8},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.ellipse,stops:[{offset:0,color:me(255,255,255)},{offset:1,color:me(255,255,255)}]}),e=new Ee({color:me(214,236,216,255)}),h=new sh({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:me(233,244,231,70)},{offset:1,color:me(233,244,231,200)}]}),r=new sh({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:me(255,255,255,255)},{offset:1,color:me(255,255,255,255)}]}),n=new Ee({color:me(1,61,53)}),o=new Ee({color:me(1,61,53)}),a=new Ee({color:me(1,61,53)}),l=new Ee({color:me(1,61,53,150)}),u=new Ee({color:me(1,61,53)}),c=u,d=c,f=new rh({angle:45,stops:[{offset:0,color:me(225,225,225)},{offset:1,color:me(225,225,225)}]}),A=new Ee({color:me(188,211,186,255)}),g=new Ee({color:me(188,211,186,150)}),v=new Ee({color:me(188,211,186,50)}),y=new Ee({color:me(188,211,186,50)}),m=new Ee({color:me(104,148,111,255)}),p=new rh({angle:0,stops:[{offset:0,color:me(255,255,255,240)},{offset:1,color:me(255,255,255,240)}]}),S=new Ee({color:me(104,148,111)}),b=me(255,255,200),x=new Ee({color:me(255,255,255,240)}),M=new Ee({color:me(104,148,111,255)}),_=me(255,255,255,255),w=me(179,201,183,255),C=me(188,211,186,255),k=me(188,211,186,255),T=me(188,211,186,255),F=me(188,211,186,255),I=me(100,100,100),P=me(200,200,200),D=[me(138,195,142,255),me(193,161,114,255),me(178,99,99,255),me(142,156,210,255),me(154,209,219,255),me(164,212,199,255),me(104,156,97,255),me(196,147,195,255),me(92,190,187,255),me(126,100,51,255),me(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),B=me(150,150,150,80),L=me(46,182,84,255),R=me(232,96,96,255),E=new so({thickness:2,fillStyle:new Ee({color:me(188,211,186,255)})}),O={mapChartFillStyle:new rh({angle:-45,stops:[{color:me(118,160,121,255),offset:0},{color:me(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:_m(i,D,.8),pieChartSliceFillStylePalette:wm(i,D,.8),pyramidChartSliceFillStylePalette:Cm(i,D,.5),funnelChartSliceFillStylePalette:Cm(i,D,.5),rectangleSeriesFillStyle:km(i,D),gaugeChartGaugeFillStyle:Tm(i,D,.8),chartXYSeriesBackgroundStrokeStyle:E,chart3DSeriesBackgroundStrokeStyle:E,polarChartSeriesBackgroundStrokeStyle:E,spiderChartSeriesBackgroundStrokeStyle:E,dataGridTextFillStyle:new Ee({color:me(77,66,21,255)})},z=new Ee({color:me(93,151,97,255)}),V=new Ee({color:me(178,99,99,255)}),N=new Ee({color:me(138,195,142,255)}),G=new Ee({color:me(178,99,99,255)}),U=new Ee({color:me(138,195,142,180)}),W=new Ee({color:me(178,99,99,180)}),Y=new Ee({color:me(224,240,237)}),H=new Ee({color:me(251,227,227)}),j=[me(178,99,99,255),me(215,224,111,255),me(80,186,88,255)],$=[me(62,64,142,255),me(66,131,77,255),me(250,250,135,255),me(202,161,78,255),me(179,53,53,255)],X=[me(64,86,138),me(123,192,205),me(255,252,149),me(220,155,92),me(184,78,74)],Z=[me(64,86,138),me(123,192,205),me(255,252,149),me(220,155,92),me(132,60,57)],Q=new Ee({color:me(185,198,207,255)}),J=new sh({stops:[{color:me(151,190,220,10),offset:0},{color:me(151,190,220,50),offset:1}]}),K=U.getColor().setA(255),q=me(150,150,150),tt=[me(242,239,210,150),me(243,238,183,150),me(210,222,136,150),me(204,217,148,150),me(157,190,124,150),me(143,178,72,150),me(198,147,88,150),me(216,148,71,150),me(229,142,103,150),me(225,174,152,150),me(219,149,203,150),me(216,188,209,150),me(109,198,189,150),me(172,206,202,150),me(164,223,217,150),me(174,215,233,150),me(203,225,235,150),me(220,227,243,150),me(207,213,227,150),me(171,182,209,150)];return xm({isDark:i,highlightColorOffset:me(-60,-60,-60,60),highlightColorOffsetAxisOverlay:me(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,axisLabelMinorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:A,axisGridMajorFillStyle:g,axisTickMinorFillStyle:v,axisGridMinorFillStyle:y,cursorGridFillStyle:m,legendBackgroundFillStyle:p,legendBackgroundBorderFillStyle:S,legendButtonDefaultColor:b,resultTableBackgroundFillStyle:x,resultTableBackgroundBorderFillStyle:M,uiBackgroundColor:_,uiBackgroundBorderColor:w,uiStrokeColorContrastHigh:C,uiStrokeColorContrastMedium:k,uiStrokeColorContrastLow:T,dataStrokeColorContrastHigh:F,dataStrokeColorContrastMedium:I,dataStrokeColorContrastLow:P,dataColorPalette:D,dataColorPaletteInverted:[{area:me(210,70,70,100),border:me(200,110,110)}],dataHighlightOverlayColor:B,dataColorPositive:L,dataColorNegative:R,zoomBandChartDefocusOverlayFillStyle:new Ee({color:me(255,255,255,180)}),zoomBandChartSplitterColor:pe("#446A40"),zoomBandChartKnobFillStyle:i=>new ru({source:Mm(i,"zoomBandChart/lightnature-selector.png"),fitMode:t.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:pe("#EFF7EE"),treeMapChartNodeColors:tt,treeMapChartLabelFillStyle:new Ee({color:me(0,0,0)}),treeMapChartLabelHeaderFillStyle:new Ee({color:me(33,33,33)})},{positiveTextFillStyle:z,negativeTextFillStyle:V,positiveFillStyle:N,negativeFillStyle:G,positiveAreaFillStyle:U,negativeAreaFillStyle:W,positiveBackgroundFillStyle:Y,negativeBackgroundFillStyle:H,badGoodColorPalette:j,coldHotColorPalette:$,intensityColorPalette:X,spectrogramColorPalette:Z,bollingerFillStyle:J,bollingerBorderFillStyle:Q,highlightPointColor:me(0,0,0),highlightDataGridColor:K,unfocusedDataColor:q})})),Bm=Tr((()=>{const i=me(255,255,255),s=new Ee({color:i}),e=!0,h=new gu({spread:1,blur:9,offset:{x:0,y:0},color:me(255,255,255,30)}),r=new Ee({color:me(6,15,36)}),n=new sh({stops:[{color:me(46,13,87,50),offset:0},{color:me(0,0,0,150),offset:1}]}),o=new Ee({color:me(0,5,8,150)}),a=s,l=s,u=s,c=new Ee({color:me(255,255,220,130)}),d=s,f=s,A=f,g=new rh({angle:45,stops:[{offset:0,color:me(241,133,255,255)},{offset:1,color:me(115,207,238,255)}]}),v=s,y=new Ee({color:me(61,94,110,100)}),m=new Ee({color:me(61,94,110,255)}),p=new Ee({color:me(61,94,110,40)}),S=s,b=new Ee({color:me(0,18,23,255)}),x=s,M=me(115,207,238,255),_=new Ee({color:me(0,17,22,240)}),w=s,C=me(0,38,48,255),k=me(0,0,0),T=i,F=me(150,150,150),I=me(19,57,93),P=me(50,50,50),D=me(0,17,48),B=me(200,200,200),L=[me(20,211,237,255),me(98,147,252,255),me(164,73,250,255),me(129,117,253,255),me(95,134,252,255),me(22,133,212,255),me(35,200,242,255),me(104,121,233,255),me(137,69,232,255),me(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),R=i.setA(50),E=me(3,217,194,255),O=me(243,21,110,255),z={mapChartFillStyle:new rh({angle:135,stops:[{color:me(118,248,231,255),offset:0},{color:me(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:_m(e,L,.5),pieChartSliceFillStylePalette:wm(e,L,2),funnelChartSliceFillStylePalette:Cm(e,L,1),pyramidChartSliceFillStylePalette:Cm(e,L,1),rectangleSeriesFillStyle:km(e,L),gaugeChartGaugeFillStyle:Tm(e,L,1)},V=new Ee({color:me(20,211,237,255)}),N=new Ee({color:me(253,145,178,255)}),G=new Ee({color:me(20,211,237,255)}),U=new Ee({color:me(239,68,121,255)}),W=new Ee({color:me(20,211,237,120)}),Y=new Ee({color:me(239,68,121,180)}),H=new Ee({color:me(1,53,57,255)}),j=new Ee({color:me(94,19,42,255)}),$=[me(174,51,132,255),me(204,107,218,255),me(189,215,253,255)],X=[me(0,63,95,255),me(0,149,255,255),me(0,225,255,255),me(255,154,254,255),me(204,98,170,255),me(139,39,84,255)],Z=[me(197,241,255,255),me(70,210,255,255),me(0,164,217,255),me(90,99,222,255),me(138,75,192,255),me(151,27,162,255)],Q=[me(13,31,52,255),me(129,54,130,255),me(131,108,176,255),me(7,162,213,255),me(26,247,255,255)],J=new sh({stops:[{color:me(219,42,235,60),offset:0},{color:me(237,73,252,10),offset:1}]}),K=new Ee({color:me(237,73,252,255)}),q=W.getColor().setA(255),tt=me(8,70,100),it=[me(149,230,255,150),me(93,213,243,150),me(20,189,223,150),me(5,151,181,150),me(2,138,198,150),me(2,113,198,150),me(97,148,236,150),me(93,111,230,150),me(151,120,223,150),me(128,87,227,150),me(153,52,230,150),me(179,92,245,150),me(248,110,211,150),me(255,155,228,150),me(251,88,207,150),me(255,0,162,150),me(214,73,177,150),me(209,71,159,150),me(238,101,169,150),me(210,57,134,150)];return xm({isDark:e,highlightColorOffset:me(60,60,60,60),highlightColorOffsetAxisOverlay:me(255,255,255,40),effect:h,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:i=>new ru({source:Mm(i,"themes/cyberSpace.jpg"),fitMode:t.ImageFitMode.Fill}),dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:v,axisGridMajorFillStyle:y,axisTickMinorFillStyle:m,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:C,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:L,dataColorPaletteInverted:[{area:me(41,130,255,100),border:me(45,110,240)}],dataHighlightOverlayColor:R,dataColorPositive:E,dataColorNegative:O,zoomBandChartDefocusOverlayFillStyle:new Ee({color:me(0,0,0,180)}),zoomBandChartSplitterColor:pe("#DB77FF"),zoomBandChartKnobFillStyle:i=>new ru({source:Mm(i,"zoomBandChart/cyberspace-selector.png"),fitMode:t.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:z,treeMapChartParentColor:pe("#1E1E3B"),treeMapChartNodeColors:it,treeMapChartLabelFillStyle:new Ee({color:me(33,33,33)}),treeMapChartLabelHeaderFillStyle:new Ee({color:me(250,250,250)})},{positiveTextFillStyle:V,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:U,positiveAreaFillStyle:W,negativeAreaFillStyle:Y,positiveBackgroundFillStyle:H,negativeBackgroundFillStyle:j,badGoodColorPalette:$,coldHotColorPalette:X,intensityColorPalette:Z,spectrogramColorPalette:Q,bollingerFillStyle:J,bollingerBorderFillStyle:K,highlightPointColor:i,highlightDataGridColor:q,unfocusedDataColor:tt})})),Lm={};Object.defineProperty(Lm,"darkGold",{get:Fm,enumerable:!0}),Object.defineProperty(Lm,"turquoiseHexagon",{get:Im,enumerable:!0}),Object.defineProperty(Lm,"light",{get:Pm,enumerable:!0}),Object.defineProperty(Lm,"lightNature",{get:Dm,enumerable:!0}),Object.defineProperty(Lm,"cyberSpace",{get:Bm,enumerable:!0});const Rm=Lm,Em=Rm.darkGold,Om=(i,s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC")=>{let e,h=0,r=0;const n=[],o=i=>{const s=new Ch.Image;s.src=i,s.onload=()=>{n.forEach((i=>{var e;const n=new ru({source:s,fitMode:t.ImageFitMode.Stretch});null===(e=i.vf)||void 0===e||e.ah(n),h=s.width,r=s.height,u(i)}))}};o(s);const a=i._o((t=>o(t)));let l;if(new Ch.Image instanceof Ch.HTMLImageElement){const i=new Ch.Image;i.src=s,l=new ru({source:i,fitMode:t.ImageFitMode.Stretch})}else if(Ch.lcjs_setup){const i=new Ch.Image;i.src=s;const e=Ch.lcjs_setup(i.naturalWidth,i.naturalHeight);e.getContext("2d").drawImage(i,0,0),l=new ru({source:e,fitMode:t.ImageFitMode.Stretch})}else l=new Ee({color:pe("#f00")});const u=t=>{if(t.vf){const i=t.ti.ts({x:t.ti.x.getInnerEnd(),y:t.ti.y.getInnerStart()},{x:-(3+h),y:3}),s=t.ti.ts({x:t.ti.x.getInnerEnd(),y:t.ti.y.getInnerStart()},{x:-3,y:3+r}),e={x:s.x-i.x,y:s.y-i.y};t.vf.dh(i).Wt(e)}e&&e.ie()};return e=i.lP("logo",Number.MAX_SAFE_INTEGER),s=>{const h={ti:s};return(s=>{s.vf&&s.vf.dispose(),e&&(s.vf=e.lh(s.ti).ah(l).setMouseInteractions(!0).oh(ah).setMouseEnterEventHandler((()=>{i.wn(t.MouseStyles.Point)})).setMouseLeaveEventHandler((()=>{i.wn(t.MouseStyles.None)})).setMouseClickEventHandler(zm).setTouchEndEventHandler(zm),u(s))})(h),n.push(h),{de:()=>u(h),Bt:()=>(t=>{t.vf&&(t.vf.dispose(),t.vf=void 0);const s=n.indexOf(t);s>=0&&n.splice(s,1),n.length<=0&&i.wo(a)})(h)}}},zm=()=>Ch.open("https://lightningchart.com/lightningchart-js/");class Vm{constructor(){this.XR=this.HP.bind(this),Ch.addEventListener("scroll",this.XR,{passive:!0})}Bt(){this.XR&&Ch.removeEventListener("scroll",this.XR),this.XR=void 0}}class Nm{constructor(t,i){this.K=t,this.zt=i,this.ZR=!0,this.QR=null,this.JR=null}}class Gm{constructor(t){this.KR=!1,this.qR=1,this.tE=t,this.iE={K:e(0,0),zt:e(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),ZR:!0,QR:null,JR:null},this.sE=e(64,64),this.eE=new Uint8ClampedArray(this.sE.x*this.sE.y*this.qR)}hE(t,i){if(!t.ZR)return null;if(t.QR&&t.JR){const s=this.hE(t.QR,i);return null!==s?s:this.hE(t.JR,i)}const s=h(t.zt.x,t.zt.y);if(t.K.x+t.zt.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.sE.x-t.K.x-1),t.K.y+t.zt.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.sE.y-t.K.y-1),t.zt.x===i.x&&t.zt.y===i.y)return t.ZR=!1,t;if(s.x<i.x||s.y<i.y)return null;let r,n;const o=s.x-i.x,a=s.y-i.y;let l=o<a;return 0===o&&0===a&&(l=!(t.zt.x>t.zt.y)),l?(r=new Nm(cn(t.K,{x:0,y:1}),e(t.zt.x,i.y)),n=new Nm(cn(t.K,{x:0,y:i.y+1}),e(t.zt.x,t.zt.y-1-i.y))):(r=new Nm(cn(t.K,{x:1,y:0}),e(i.x,t.zt.y)),n=new Nm(cn(t.K,{x:i.x+1,y:0}),e(t.zt.x-1-i.x,t.zt.y))),t.QR=r,t.JR=n,this.hE(t.QR,i)}rE(t,i){const s={nE:!1,K:null};let h=this.hE(this.iE,i);if(null===h)for(;null===h&&this.sE.x<this.tE&&this.sE.y<this.tE;){if(!this.oE(e(2*this.sE.x,2*this.sE.y)))return this.KR=!0,null;s.nE=!0,h=this.hE(this.iE,i)}if(null===h)return this.KR=!0,null;for(let s=0;s<i.y;s+=1)for(let e=0;e<i.x;e+=1){const r=h.K.y+s,n=h.K.x+e;this.eE[r*this.qR*this.sE.x+n*this.qR+0]=t[s*this.qR*i.x+e*this.qR+0]}return s.K=h.K,s}oE(t){if(t.x>this.tE||t.y>this.tE)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.qR);for(let s=0;s<this.sE.y;s+=1)for(let e=0;e<this.sE.x;e+=1)i[s*t.x*this.qR+e*this.qR+0]=this.eE[s*this.sE.x*this.qR+e*this.qR+0];return this.sE=t,this.eE=i,!0}}class Um{constructor(t){this.aE=new Map,this.tE=t,this.aE.set(this.aE.size,new Gm(this.tE))}lE(t){return this.aE.get(t)}rE(t,i){let s=-1;const e=Array.from(this.aE.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.KR){s=t;break}}-1===s&&(s=this.aE.size,this.aE.set(this.aE.size,new Gm(this.tE)));const h=this.aE.get(s);if(!h)return null;let r=h.rE(t,i);if(!r&&h.KR){const e=this.aE.size,h=new Gm(this.tE);this.aE.set(e,h),s=e,r=h.rE(t,i)}return r?{uE:s,...r}:null}}var Wm;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(Wm||(Wm={}));const Ym=gr("font-texture");class Hm{constructor(t){this.cE=new Map,this.dE=new Map,this.ba=Ym(),this.fE=t,this.AE=new Um(this.fE.gE||4096)}vE(){return this.dE.forEach((t=>{this.fE.yE(t)})),this.dE.clear(),this}mE(t,i){const s=this.cE.get(i);if(s)return s.get(t)}pE(t,i,s){let e=this.cE.get(i);if(e||(e=new Map,this.cE.set(i,e)),e.has(t.glyph))return Wm.Success;const h=this.AE.rE(s,t.size);if(!h||!h.K)return Wm.Fail;h.nE&&this.SE();const r=this.AE.lE(h.uE);if(!r)return Wm.Fail;let n=this.dE.get(h.uE);if(!n){const t=this.fE.gl.createTexture();if(!t)throw new Sh("Failed to create texture for font!");n=t,this.dE.set(h.uE,t)}const o=h.K,a=r.sE.x,l=r.sE.y,u=-t.offsetX,c=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,A=o.x/a,g=(o.y+t.size.y)/l,v=(o.x+t.size.x)/a,y=o.y/l,m=[A,g,v,g,A,y,A,y,v,g,v,y],p=[u,c,d,c,u,f,u,f,d,c,d,f],S={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:p,texCoords:m,packerId:h.uE,texture:n};e.set(t.glyph,S);const b=this.fE.gl;return b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.bindTexture(b.TEXTURE_2D,n),b.texImage2D(b.TEXTURE_2D,0,b.LUMINANCE,r.sE.x,r.sE.y,0,b.LUMINANCE,b.UNSIGNED_BYTE,this.fE.bE?r.eE:new Uint8Array(r.eE)),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.bindTexture(b.TEXTURE_2D,null),h.nE?Wm.Resize:Wm.Success}SE(){this.cE.forEach((t=>{t.forEach(((i,s)=>{const e=this.AE.lE(i.packerId);if(!e)return;const h=i.origin,r=e.sE.x,n=e.sE.y,o=h.x/r,a=(h.y+i.size.y)/n,l=(h.x+i.size.x)/r,u=h.y/n,c=[o,a,l,a,o,u,o,u,l,a,l,u];i.texCoords=c,t.set(s,i)}))}))}}const jm=t=>{if(t instanceof Nn||t instanceof cv)return t.us()?"linear-highPrecision":"linear";if(t instanceof Gn){const i={};return t.x instanceof Tn&&(i.x={base:t.x.qi()}),t.y instanceof Tn&&(i.y={base:t.y.qi()}),["logarithmic",i]}return"linear"},$m=t=>{const i=Object.keys(t),s={};return i.forEach((i=>{const e=t[i];let h=!1;s[i]=t=>{if(!t)return h;const i=e();return h=i,i}})),s},Xm=(t,i,s)=>"value"===t.getLookUpProperty()?s:"x"===t.getLookUpProperty()?{min:i.ri(),max:i.ni()}:"y"===t.getLookUpProperty()?{min:i.oi(),max:i.ai()}:"z"===t.getLookUpProperty()?{min:i.Yp(),max:i.Wp()}:void 0,Zm=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),Qm=t=>(i,s)=>s%2?i:i+t;class Jm{constructor(t){this.xE=new Map,this.ME=gr("font"),this._E=new Map,this.wE=new Set,this.fE=t}vE(t=!1){return(t||0===this.wE.size)&&(this.xE.forEach(((t,i)=>{t.vE(),this.xE.delete(i)})),this.wE.clear()),this}CE(t){this.wE.add(t)}kE(t){this.wE.delete(t)}TE(t,i,s,e){const h=Ch.devicePixelRatio,r=`${e?"dark":"light"} - ${Ma(i,h).id}`,n=this._E.get(r),o=this.xE.get(n);let a=0,l=0,u=0;const c=t.split(""),d=i.size,f=.45*i.size*h,A=Math.round(1*i.size);let g=!1;for(let t=0;t<c.length;t+=1){const i=c[t],s=o&&o.mE(i,d);if(s)""!==i.trim()&&(l=Math.max(l,s.baseline),a=Math.min(a,s.baseline-(s.size.y-1))),u+=s.advanceX;else{if(""!==i.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(A-1))}u+=f,g=!0}}const v=((t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,h=Math.cos(e),r=Math.sin(e);return{x:Math.abs(t*h)+Math.abs(i*r),y:Math.abs(t*r)+Math.abs(i*h)}})(u/h,(l-a+1)/h,s);return{x:v.x,y:v.y,isEstimate:g}}FE(t,i,s){const h=`${s?"dark":"light"} - ${i.id}`;let r=this._E.get(h);r||(r=this.ME(),this.xE.set(r,new Hm(this.fE)),this._E.set(h,r));const n=this.xE.get(r);if(!n)throw new Sh("Failed to get font texture!");let o=0,l=0,u=0;const c=t.split(""),d=new Map;let f=0;const A=i.properties.size;for(let t=0;t<c.length;t+=1){const e=c[t],h=Math.ceil(f);let r=n.mE(e,A);if(!r){const h=this.fE.IE(e,i.properties,i.dpr,s);if(!h)continue;const a=n.pE(h[1],A,h[0]);if(a===Wm.Resize){this.wE.forEach((t=>{t.Ya.o=!0})),t=-1,f=0,l=0,o=0,d.clear();continue}if(a===Wm.Fail)throw new Sh("Failed to create glyph");if(r=n.mE(e,A),!r)throw new Sh("Failed to get glyph after creation")}if(""!==e.trim()){let t=d.get(r.texture);t||(t={vertices:[],texCoords:[]},d.set(r.texture,t)),t.vertices.push(...r.vertices.map(Qm(h))),t.texCoords.push(...r.texCoords),l=Math.max(l,r.baseline),o=Math.min(o,r.baseline-(r.size.y-1))}f+=r.advanceX}u=f;const g=a(e(0,o),e(u,l)),v=[];return d.forEach(((t,i)=>{v.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[v,g]}}class Km{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>qm(t)));for(const s of i)t=s(t);return`${xr(this.modifiers.filter((t=>tp(t)))).map((t=>t.PE)).join("\n")}\n${t}`}}const qm=t=>"function"==typeof t,tp=t=>t&&"object"==typeof t&&"DE"in t,ip=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},sp=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),ep=(...t)=>i=>{const s=t.filter((t=>!1!==t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},hp=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r},rp=(t,...i)=>s=>{const e=i.filter((t=>"string"==typeof t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const h=e.join("\n"),r=s.lastIndexOf(t),n=s.substring(r),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,r+o)}\n${h}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},np=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},op=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=ip(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=ip(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return np(`\t${h} = ${e};`)(s)},ap=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i},lp={roundUnsigned:{DE:"roundUnsigned",PE:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{DE:"linearStep",PE:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},decodeUbyteRGBAEncodedFloat:{DE:"decodeUbyteRGBAEncodedFloat",PE:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{DE:"texelFetchWithFallback",PE:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{DE:"texelFetchWithFallback",PE:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{DE:"texelFetchUnsignedWithFallback",PE:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{DE:"texelFetchUnsignedWithFallback",PE:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{DE:"modulus",PE:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{DE:"computeScreenSpaceWireframe",PE:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},up="posAxis",cp="posWorld",dp="normal",fp="rotatedGeo",Ap="uColorTexture",gp="uSizePixels",vp="uOffsetAlignment",yp="uMaskTexture",mp="aInstanceGeo",pp=(t,i)=>{const s=i.steps,e=s.length-1,h=[ip("uniform vec4 uFallbackColor")],r=[],n=[];for(let t=0;t<i.steps.length;t+=1)r.push(`uniform float uLUTValue${t}`),n.push(`uniform vec4 uLUTColor${t}`);return h.push(ip(...r,...n),i.percentageValues&&ip("uniform float uMinValue","uniform float uMaxValue")),i.interpolate?h.push(hp("colorFragment","vec4 colorLookup = vec4(0.0)",`if (${t} <= ${mh}) {\n                    colorLookup = uFallbackColor;\n                }`,"float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),"if (value <= uLUTValue0) {\n                    colorLookup = uLUTColor0;\n                }",`if (value >= uLUTValue${e}) {\n                    colorLookup = uLUTColor${e};\n                }`,...s.slice(0,-1).map(((t,i)=>`if (value >= uLUTValue${i} && value <= uLUTValue${i+1}) { colorLookup = uLUTColor${i} + vec4(\n                        uLUTColor${i+1}[0] -  uLUTColor${i}[0],\n                        uLUTColor${i+1}[1] -  uLUTColor${i}[1],\n                        uLUTColor${i+1}[2] -  uLUTColor${i}[2],\n                        uLUTColor${i+1}[3] -  uLUTColor${i}[3]\n                    ) * (value - uLUTValue${i})/(uLUTValue${i+1} - uLUTValue${i});}`)),"vec4 colorFragment = colorLookup")):h.push(hp("colorFragment","vec4 colorLookup = vec4(uLUTValue0)",`if (${t} <= ${mh}) {\n                    colorLookup = uFallbackColor;\n                }`,"float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} >= uLUTValue${e}) { colorLookup = uLUTColor${e};}`,...s.slice(1).reverse().map((t=>{const i=s[s.indexOf(t)-1];return`if (value < uLUTValue${s.indexOf(t)}) { colorLookup = uLUTColor${s.indexOf(i)};}`})),"vec4 colorFragment = colorLookup")),h},Sp=[ip("uniform sampler2D uMaskTexture"),ip("varying vec2 vMaskTextureCoord"),rp("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],bp=[ip("uniform sampler2D uMaskTexture"),ip("varying vec2 vMaskTextureCoord"),rp("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.a")],xp=[ip("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),rp("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")];class Mp extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const _p=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},wp=t=>void 0!==t.find((t=>{var i;return null===(i=t.BE)||void 0===i?void 0:i.LE})),Cp=t=>void 0!==t.find((t=>{var i;return null===(i=t.BE)||void 0===i?void 0:i.RE})),kp=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,offset:a,flipXY:l,flipXZ:u,splitPosAttribute:c,normalSource:d}=t,f=[];if("attribute"===d&&e.push(ip("attribute vec3 aNormal"),ep("vec3 normal = aNormal")),"linear-highPrecision"!==r?s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==c?e.push(ep(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`)):e.push(ep(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`)))})):s.forEach((i=>{!0!==t.splitPosAttribute?e.push(ep(`${h} ${i.variableNameAxisCoord}_highpart = ${i.attributeNameAxisCoord}_highpart`),ep(`${h} ${i.variableNameAxisCoord}_lowpart = ${i.attributeNameAxisCoord}_lowpart`)):e.push(ep(`${h} ${i.variableNameAxisCoord}_highpart = vec2(${i.attributeNameAxisCoord}_highpartX, ${i.attributeNameAxisCoord}_highpartY)`),ep(`${h} ${i.variableNameAxisCoord}_lowpart = vec2(${i.attributeNameAxisCoord}_lowpartX, ${i.attributeNameAxisCoord}_lowpartY)`))})),a&&a.rotation){const t=a.rotation.dataType,i="uniform"===t?"u":"a";if("attribute-deg"===t){e.push(ip("attribute float aRotDeg"),ip("uniform float uBaseRotDeg"));const t="cRot",i=mp;e.push(ep(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 rotatedGeo = vec2(${i}.x * ${t}.y + ${i}.y * ${t}.x, ${i}.y * ${t}.y - ${i}.x * ${t}.x)`))}else{const s=`${i}Rot`;e.push(ip(`${t} vec2 ${s}`));const h=mp;e.push(ep(`vec2 rotatedGeo = vec2(${h}.x * ${s}.y + ${h}.y * ${s}.x, ${h}.y * ${s}.y - ${h}.x * ${s}.x)`))}}if(a&&e.push(ip(`attribute ${h} aInstanceGeo`)),!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===u){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(ip(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(ip(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",n=!0===a.symmetric?"float":h;e.push(ip(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",l=a.rotation?fp:mp,u="offsetGeometry";f.push(`${h} ${u} = ${t} * ${l}${o} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${h} normal = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}if(void 0===r||"linear"===r)e.push(ip(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{f.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(ip(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(ip("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===r)e.push(ip("uniform mat4 uMatrix")),s.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===r[0]){e.push(ip(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${In(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(ip(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),f.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){e.push(ip("uniform vec2 uRatioPxClip"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(ip("uniform vec2 uOffsetAlignment")),t=vp);const i=("attribute"===a.dataType?"a":"u")+"OffsetPixels",r=!0===a.symmetric?"float":h;e.push(ip(`${a.dataType} ${r} ${i}`));const n=a.halved?" * 0.5":"",o=`(${a.rotation?fp:mp} + ${t}) * ${i}${n} * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${o}`)}))}if(a&&"scale"===a.sizeUnit){e.push(ip("uniform vec2 uRatioPxClip")),e.push(ip("uniform vec2 uSizePixels"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(ip("uniform vec2 uOffsetAlignment")),t=vp);const i=("uniform"===a.dataType?"u":"a")+"OffsetScale";e.push(ip(`${a.dataType} float ${i}`));const h=`(${a.rotation?fp:mp} + ${t}) * ${i} * uSizePixels * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${h}`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",r=!0===a.symmetric?"float":h;e.push(ip(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?fp:mp,l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(a&&"nwu"===a.sizeUnit){e.push(ip("uniform float uRatioNwuWu"));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",r=!0===a.symmetric?"float":h;e.push(ip(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?fp:mp,l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * uRatioNwuWu`)}))}return t.snapToNearestPixel&&(e.push(ip("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(hp("gl_Position =",...f)),e},Tp=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(rp(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(rp(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(rp(s,...t))}}return h},Fp=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.BE)||void 0===i?void 0:i.EE})))(t)?[sp("attribute vec4 aColor"),sp("vColor = aColor"),ip("attribute vec4 aColorA"),ip("attribute vec4 aColorB"),np("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],Ip=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.BE)||void 0===i?void 0:i.OE})))(t)?[sp("attribute float aLookupValue"),sp("vLookupValue = aLookupValue"),ip("attribute float aLookupValueA"),ip("attribute float aLookupValueB"),np("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],Pp={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",BE:{LE:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${_p(t)}`,idFragment:void 0,vertexShaderModifiers:[ip(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),np(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:i=>{const s=i&&i.dataType,e=i&&i.maskTextureText,h=i&&i.maskTexture,r=i&&i.overrideOpacity;return{idFeature:"Color",BE:{RE:!(!Array.isArray(i.dataType)||"value"===i.dataType[1])||void 0,OE:!(!Array.isArray(i.dataType)||"value"!==i.dataType[1])||void 0,EE:"attribute"===i.dataType||void 0},apply:(n,o)=>{let a,l=`Color:${_p(i)}`;const u=[];let c="FragmentShader";const d=[];if("uniform"===s)d.push(ip("uniform vec4 uColor"),ep("vec4 colorFragment = uColor"),...e?Sp:[],...h?bp:[]);else if("attribute"===s)a="colorAttribute",u.push(op("attribute vec4 aColor","varying vec4 vColor")),d.push(ip("varying vec4 vColor"),ep("vec4 colorFragment = vColor"),...e?Sp:[],...h?bp:[]);else if("texture"===s)a="colorTexCoord",u.push(op("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),d.push(ip("varying vec2 vTextureCoord"),ip("uniform sampler2D uColorTexture"),ip("uniform vec4 uColor"),ep("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        colorFragment = uColor;\n                    }"),...e?Sp:[],...h?bp:[]);else if("texture-coord-calc-gpu"===s)a="colorTexCoord",c="Empty",u.push(ip("attribute vec2 aTextureCoord"),ip("varying vec2 vTextureCoord"),np("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),d.push(ip("varying vec2 vTextureCoord"),ip("uniform sampler2D uColorTexture"),ep("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","gl_FragColor = colorFragment;"));else if(Array.isArray(s)&&"image"===s[0])a="colorTexCoord",u.push(op("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),s[1].fitMode===t.ImageFitMode.Tile?d.push(ip("uniform sampler2D uColorTexture"),ip("varying vec2 vTextureCoord"),ep("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);")):d.push(ip("uniform sampler2D uColorTexture"),ip("varying vec2 vTextureCoord"),ip("uniform vec4 uColor"),ep("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                colorFragment = uColor;\n                            }"));else if(Array.isArray(s)&&"lookup"===s[0]){const t=s[1];if("value"===t)a="lookup:value",u.push(op("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;a=`lookup:${t}`,u.push(op(i,"varying float vLookupValue"))}d.push(ip("varying float vLookupValue"),...pp("vLookupValue",s[2]),...e?Sp:[],...h?bp:[])}else if(Array.isArray(s)&&"gradient"===s[0]){const t=s[1],i=t.getColorStops();eh(t)?(l=`rgradient${i.length},${h},${e}`,d.push(ip("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),ip(...Lh(i.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),lp.linearStep,ep("vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...i.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),"vec4 colorFragment = color"),...e?Sp:[],...h?bp:[])):nh(t)&&(l=`lgradient${i.length},${h},${e}`,d.push(ip("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),ip(...Lh(i.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),lp.linearStep,ep("vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...i.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),"vec4 colorFragment = color"),...e?Sp:[],...h?bp:[]))}if(e||h){const t="maskTexture";a=a?`${a} ${t}`:`Color:${t}`,u.push(op("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return r&&d.push(ip("uniform float uOpacity"),rp("colorFragment =","colorFragment.a *= uOpacity")),{vertexShaderModifiers:u,fragmentShader:c,fragmentShaderModifiers:d,idVertex:a,idFragment:l}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h;const r=`ColorShaded3D:${_p(t)}`;return{idFeature:"ColorShaded3D",BE:{RE:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,OE:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&op(dp,"varying vec3 vNormal"),op(cp,"varying vec3 vPosWorld")),"uniform"===i)a.push(ip("uniform vec4 uColorDiffuse"),ep("vec4 colorFragment = uColorDiffuse"));else if("attribute"===i)h="per-vertex-color",o.push(op("attribute vec4 aColor","varying vec4 vColor")),a.push(ip("varying vec4 vColor"),ep("vec4 colorFragment = vColor"));else if(Array.isArray(i)){const t=i[1];if("value"===t)h="lookup:value",o.push(op("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;h=`lookup:${t}`,o.push(op(i,"varying float vLookupValue"))}a.push(ip("varying float vLookupValue"),...pp("vLookupValue",i[2]))}if(e){const t="wireframe";h=h?`${h},${t}`:t,o.push(op("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(ip("varying vec3 vTriangleBary"),ip("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),lp.computeScreenSpaceWireframe,rp("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return"phong"===s&&a.push(...xp),{idVertex:h,idFragment:r,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=[],e=wp(i),h=t.coordType?t.coordType:e?"vec3":"vec2";return"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?s.push(ip(`attribute ${h} aPos`)):s.push(ip("attribute float aPosX"),ip("attribute float aPosY"),e&&ip("attribute float aPosZ")):!0===t.splitPosAttribute?s.push(ip("attribute float aPos_highpartX"),ip("attribute float aPos_lowpartX"),ip("attribute float aPos_highpartY"),ip("attribute float aPos_lowpartY")):s.push(ip(`attribute ${h} aPos_highpart`),ip(`attribute ${h} aPos_lowpart`)),s.push(...kp(t,e,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:up,variableNameWorldCoord:cp})),{idVertex:`VertexLocation:${_p(t)}`,idFragment:void 0,vertexShaderModifiers:s}}}),Model3D:t=>({idFeature:"Model3D",apply:i=>{const s=[];return s.push(ip("attribute vec3 aGeoPos"),ip("uniform mat4 uModelRotation"),ip("uniform mat4 uModelRotationNormals"),ip("uniform vec3 uLocationAxis"),ip("uniform vec3 uModelAlignment"),ip("uniform vec3 uModelScale"),ip("uniform vec3 uModelSize"),...kp({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),hp("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&rp("vec3 normal ="," normal = (uModelRotationNormals * vec4(normal, 1.0)).xyz;"),...Cp(i)?Tp({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,cp,up):[]),{vertexShaderModifiers:s,idVertex:`Model3D:${_p(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>({idFeature:"LineInstanced2D",apply:i=>({idVertex:`LineInstanced2D:${_p(t)}`,idFragment:void 0,vertexShaderModifiers:[ip("uniform float uThicknessPixels"),ip("uniform vec2 uRatioPxClip"),..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[ip("attribute vec2 aLocationA"),ip("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[ip("attribute vec2 aLocationA_highpart"),ip("attribute vec2 aLocationB_highpart"),ip("attribute vec2 aLocationA_lowpart"),ip("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[ip("attribute float aLocationAX"),ip("attribute float aLocationAY"),ip("attribute float aLocationBX"),ip("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[ip("attribute float aLocationA_highpartX"),ip("attribute float aLocationA_highpartY"),ip("attribute float aLocationB_highpartX"),ip("attribute float aLocationB_highpartY"),ip("attribute float aLocationA_lowpartX"),ip("attribute float aLocationA_lowpartY"),ip("attribute float aLocationB_lowpartX"),ip("attribute float aLocationB_lowpartY")]:[],ip("attribute vec2 aSegmentPosition"),ip("attribute float aSegmentSide"),...kp(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),t.ensureMinimumSegmentLength&&ip("uniform vec2 uMinSegmentPixelVector"),rp("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                        worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                    }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...Ip(i),...Fp(i),...Cp(i)?Tp(t,!1,cp,up):[]]})}),Area2D:t=>({idFeature:"Area2D",apply:i=>({idVertex:`Area2D:${_p(t)}`,idFragment:void 0,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[ip("attribute vec2 aLocationA"),ip("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[ip("attribute vec2 aLocationA_highpart"),ip("attribute vec2 aLocationB_highpart"),ip("attribute vec2 aLocationA_lowpart"),ip("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[ip("attribute float aLocationAX"),ip("attribute float aLocationAY"),ip("attribute float aLocationBX"),ip("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[ip("attribute float aLocationA_highpartX"),ip("attribute float aLocationA_highpartY"),ip("attribute float aLocationB_highpartX"),ip("attribute float aLocationB_highpartY"),ip("attribute float aLocationA_lowpartX"),ip("attribute float aLocationA_lowpartY"),ip("attribute float aLocationB_lowpartX"),ip("attribute float aLocationB_lowpartY")]:[],ip("attribute float aCurveOrBaseline"),ip("attribute float aSegmentSide"),...kp(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),rp("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","float baseline = min(posCoord.y, -1.0)","vec2 posWorld = vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))"),...Ip(i),...Fp(i),...Cp(i)?Tp(t,!1,cp,up):[]]})}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${_p(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[ip("uniform float uOffsetWU"),ip("attribute vec3 aLocationA"),ip("attribute vec3 aLocationB"),ip("attribute float aSegmentPosition"),ip("attribute float aPerpendHorizontal"),ip("attribute float aPerpendVertical"),...kp({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},wp(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),rp("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...Cp(i)?Tp({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,cp,up):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[ip("attribute vec3 aEdge"),ip("uniform float uEdgeRoundness"),rp("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(h,r)=>({idVertex:void 0,idFragment:`ColorGrid2D:${_p(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[ip("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===s&&lp.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?ep("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):ep("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)),...pp("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(ip("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&lp.roundUnsigned,lp.modulus,lp.texelFetchWithFallback[o],"ubyte"===h&&lp.decodeUbyteRGBAEncodedFloat,ep(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(ip("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),ep("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${_p(t)}`,idFragment:`DrawToNormalTexture:${_p(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.instanceIdSource,o=t.normalTextureType,a=t.heightmapTextureType,l=t.intensityTextureType,u=t.littleEndian;return{idFeature:"SurfaceGrid",apply:(c,d)=>{const f=[],A=[];return f.push(ip("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===n&&"attribute float aInstanceID"),void 0!==n&&lp.roundUnsigned,lp.modulus,lp.texelFetchWithFallback[d],"ubyte"===a&&lp.decodeUbyteRGBAEncodedFloat,ep(void 0===n?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===a?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${u})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),f.push(...kp({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:up,variableNameWorldCoord:cp})),"phong"===h&&f.push(op(cp,"varying vec3 vPosWorld"),..."uint"===o?[lp.texelFetchUnsignedWithFallback[d],np("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[np("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],np("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),ip("varying vec3 vNormal",..."uint"===o?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),A.push(ip("varying vec3 vTriangleBary")),"uniform"===i?A.push(ip("uniform vec4 uColorDiffuse"),ep("vec4 colorFragment = uColorDiffuse")):Array.isArray(i)&&"lookup"===i[0]?"value"===i[1]?(f.push(op("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),A.push(ip("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===l&&lp.decodeUbyteRGBAEncodedFloat,"bilinear"===s?ep("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===l?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${u})`),"float intensity01 = "+("float"===l?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${u})`),"float intensity10 = "+("float"===l?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${u})`),"float intensity11 = "+("float"===l?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${u})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):ep("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...pp("intensityP",i[2]))):(f.push(op(`posAxis.${i[1]}`,"varying float vLookupValue")),A.push(ip("varying float vLookupValue"),...pp("vLookupValue",i[2]))):void 0===i&&A.push(ep("vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0)")),"phong"===h&&A.push(...xp),r&&(f.push(ip("attribute vec3 aTriangleBary"),op("aTriangleBary","varying vec3 vTriangleBary")),A.push(ip("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),lp.computeScreenSpaceWireframe,rp("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?"if (edge > 0.0) {\n                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));\n                                }":"if (edge > 0.0) {\n                                    colorFragment = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }"))),{idVertex:`SurfaceGrid:${_p(t)}`,idFragment:`SurfaceGrid:${_p(t)}`,vertexShaderModifiers:f,fragmentShader:"FragmentShader",fragmentShaderModifiers:A}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${_p(t)}`,idFragment:`DebugSurfaceGridNormals:${_p(t)}`,vertexShaderModifiers:[ip("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),lp.roundUnsigned,lp.modulus,lp.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&lp.decodeUbyteRGBAEncodedFloat,ep(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[lp.texelFetchUnsignedWithFallback[s]]:[],...kp({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:up,variableNameWorldCoord:cp}),rp("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[np("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[ip("uniform vec3 uCameraLoc"),rp("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[ip("attribute float aSegmentInside"),ip("varying float vSegmentInside"),ip("varying float vSegmentSide"),rp("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[ap("#extension GL_OES_standard_derivatives : enable"),ip("uniform float uAALimit"),ip("varying float vSegmentInside"),ip("varying float vSegmentSide"),rp("antiAliasFactor = ","\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                antiAliasFactor = aa;\n                ")]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${_p(t)}`,idFragment:`Glow1D:${_p(t)}`,vertexShaderModifiers:[op("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[ip("uniform sampler2D uTexture"),ip("varying vec2 vTextureCoord"),ip("uniform vec2 uTextureSize"),h&&ip("uniform vec2 uOffsetPx"),!h&&ip("uniform sampler2D uTextureFirstGlowPass"),!h&&ip("uniform vec4 uGlowColor"),rp("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...h?[]:["float inverseIntensity =\n                        0.25 * texture2D(uTexture, vTextureCoord).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a","antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),"vec4 colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                            horizontal_dist = sample_horizontal.r * 255.0;\n                                          }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,"vec4 colorFragment = pixelGlowColor"])]}}}),MousePicking:{idFeature:"MousePicking",apply:t=>({idVertex:void 0,idFragment:"MousePicking",fragmentShaderModifiers:[ip("uniform vec4 uColor"),ep("vec4 colorFragment = uColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd")]})},MousePickingAttribute:{idFeature:"MousePickingAttribute",apply:t=>({idVertex:"MousePickingAttribute",idFragment:"MousePickingAttribute",vertexShaderModifiers:[op("attribute vec4 aColor","varying vec4 vColor")],fragmentShaderModifiers:[ip("varying vec4 vColor"),ep("vec4 colorFragment = vColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd")]})},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[op("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[ip("attribute vec2 aLengthSoFar"),ip("varying float vLengthSoFar"),ip("uniform vec2 uStippleCount"),np("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[ip("uniform sampler2D uStippleTexture"),ip("uniform float uStippleScale"),ip("varying float vLengthSoFar"),"webgl1"===i&&ip("uniform float uStippleTextureWidthLimiter"),rp("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[ip("attribute vec2 aLengthSoFarA"),ip("attribute vec2 aLengthSoFarB"),ip("varying float vLengthSoFar"),ip("uniform vec2 uStippleCount"),np("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[ip("uniform sampler2D uStippleTexture"),ip("uniform float uStippleScale"),ip("varying float vLengthSoFar"),"webgl1"===i&&ip("uniform float uStippleTextureWidthLimiter"),rp("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,h="interpolation"in t?t:void 0,r="bilinear"===(null==h?void 0:h.interpolation),n=null==h?void 0:h.intensityTextureType,o=null==h?void 0:h.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${_p(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[ip("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",h&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),lp.texelFetchWithFallback[s],"ubyte"===n&&lp.decodeUbyteRGBAEncodedFloat,ep("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep","if (iAnnulus < 0.0 || iAnnulus > uAnnuli) { discard; }"),e&&ep("vec4 colorFragment = uColor"),h&&rp("if (iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",h.flipXY&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",h.flipXY&&"cellStart = ivec2(cellStart.y, cellStart.x)",h.flipXY&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)","vec2 tileDimensions = "+(h.flipXY?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),r&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",r&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",r&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",r&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",r&&"float intensity00 = "+("float"===n?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${o})`),r&&"float intensity01 = "+("float"===n?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${o})`),r&&"float intensity10 = "+("float"===n?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${o})`),r&&"float intensity11 = "+("float"===n?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${o})`),r&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",r&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",r&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",r&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!r&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!r&&"float intensityP = "+("float"===n?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${o})`)),...h?pp("intensityP",h.lut):[]]}}})},Dp={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},Bp={FragmentShader:"\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    float antiAliasFactor = 1.0;\n    vec4 fragColorEnd = colorFragment;\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);\n}\n",Empty:"\nvoid main(void) {\n}\n"};class Lp{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new bh(`Could not find ${this.zE()} ${this.VE()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}zE(){return this.id.toString()}VE(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class Rp extends Lp{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class Ep extends Lp{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class Op{constructor(t,i,s,e){this.NE=new Map,this.GE=new Map,this.UE=s,this.WE=s.createProgram(),this.YE=`${t.zE()} vertex`,this.HE=`${i.zE()} fragment`,s.attachShader(this.WE,t.shader),s.attachShader(this.WE,i.shader),s.bindAttribLocation(this.WE,0,"aPos"),s.linkProgram(this.WE),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}jE(t){return pr(0,(()=>Sr()))}$E(t){const i=this.XE(t);if(void 0===i)throw this.jE(`Could not get ${t} uniform from ${this.YE} and ${this.HE} shaders.`);return i}XE(t){const i=this.NE.get(t);if(i)return i;const s=this.UE.getUniformLocation(this.WE,t);return s?(this.NE.set(t,s),s):void 0}ZE(t){const i=this.QE(t);if(void 0===i)throw this.jE(`Could not get ${t} attribute from ${this.YE} and ${this.HE} shaders.`);return i}QE(t){const i=this.GE.get(t);if(i||0===i)return i;const s=this.UE.getAttribLocation(this.WE,t);return s>=0?(this.GE.set(t,s),s):void 0}Bt(){this.UE.deleteProgram(this.WE)}}const zp=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,Vp=t=>{let i;try{i=Ch.getComputedStyle(t)}catch(t){return null}return i};
/**
     * stacking-order by Rich Harris
     * https://github.com/Rich-Harris/stacking-order
     *
     * @license MIT
     *
     * Converted to TypeScript and edited to match LCJS requirements.
     */function Np(t){const i=Vp(t);return!!i&&("fixed"===i.position||!!("auto"!==i.zIndex&&"static"!==i.position||function(t){const i=Vp(Yp(t)),s=i?i.display:"auto";return"flex"===s||"inline-flex"===s}(t))||+i.opacity<1||"transform"in i&&"none"!==i.transform||"webkitTransform"in i&&"none"!==i.webkitTransform||"mixBlendMode"in i&&"normal"!==i.mixBlendMode||"filter"in i&&"none"!==i.filter||"webkitFilter"in i&&"none"!==i.webkitFilter||"isolation"in i&&"isolate"===i.isolation||!!zp.test(i.willChange)||"touch"===i.webkitOverflowScrolling)}function Gp(t){let i=t.length;for(;i--;)if(Np(t[i]))return t[i];return null}function Up(t){var i;return t&&Number((null===(i=Vp(t))||void 0===i?void 0:i.zIndex)||0)||0}function Wp(t){const i=[];for(;t;)i.push(t),t=Yp(t);return i}function Yp(t){var i;return(null===(i=t.parentNode)||void 0===i?void 0:i.host)||t.parentNode}class Hp extends Vm{constructor(t){if(super(),this.JE=new Map,this.KE=new Map,this.qE=new Map,this.tO=!0,this.iO=null,this.sO=null,this.eO=null,this.hO=null,this.rO=0,this.nO=0,this.oO=0,this.aO=!1,this.lO=!0,this.Ps=!1,this.uO=gr(`chart-engine-${(new Date).getTime()}${Math.trunc(1e6*Math.random()).toString()}`),this.zt={x:100,y:100},this.cO=()=>{this.dO&&clearTimeout(this.dO),this.dO=setTimeout((()=>this.Dn()),12)},this.fO=t=>{const i=t.intersectionRatio>0,s=t.target.getAttribute("data-lcjs-engine-id");if(s){const t=this.JE.get(s);if(t){const e=t.AO();t.gO(i),i?this.KE.set(s,t):this.KE.delete(s),e!==i&&t.ie()}}},this.vO=(t,i,s,e,h)=>{const r=h[0],n=this.gl;if(n.bindFramebuffer(null==n?void 0:n.FRAMEBUFFER,null),n.useProgram(this.sO.WE),n.clear(n.COLOR_BUFFER_BIT),r._n.getBoundingClientRect()){const t=r.yO();n.viewport(0,0,t.x,t.y),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r.mO),n.uniform1i(this.rO,0),n.uniformMatrix4fv(this.nO,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n.bindBuffer(n.ARRAY_BUFFER,this.eO),n.enableVertexAttribArray(0),n.vertexAttribPointer(this.oO,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),r.pO&&(r.pO.clearRect(0,0,r.pO.canvas.width,r.pO.canvas.height),r.pO.drawImage(this.SO,0,this.SO.height-t.y,t.x,t.y,0,0,r.pO.canvas.width,r.pO.canvas.height))}},this.bO=(t,i,s,e,h)=>{const r=this.gl;r.bindFramebuffer(null==r?void 0:r.FRAMEBUFFER,null),r.useProgram(this.sO.WE),r.clear(r.COLOR_BUFFER_BIT),h.forEach((s=>{const h=s._n.getBoundingClientRect();if(h){const s=h.right-h.left,n=h.bottom-h.top,o=h.left,a=e-h.bottom;r.viewport(o*this.xO-t*this.xO,a*this.xO+i*this.xO,s*this.xO,n*this.xO)}r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,s.mO),r.uniform1i(this.rO,0),r.uniformMatrix4fv(this.nO,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),r.bindBuffer(r.ARRAY_BUFFER,this.eO),r.enableVertexAttribArray(0),r.vertexAttribPointer(this.oO,2,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLES,0,6)})),r.bindFramebuffer(r.FRAMEBUFFER,null)},this.MO=(t,i,s,e,h)=>{const r=h[0],n=this.gl2.ctx;n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.clear(n.COLOR_BUFFER_BIT);const o=r.yO();n.bindFramebuffer(n.READ_FRAMEBUFFER,r._O[1]),n.blitFramebuffer(0,0,o.x,o.y,0,this.SO.height-o.y,o.x,this.SO.height,n.COLOR_BUFFER_BIT,n.LINEAR),r.pO&&(r.pO.clearRect(0,0,r.pO.canvas.width,r.pO.canvas.height),r.pO.drawImage(this.SO,0,0)),n.bindFramebuffer(n.FRAMEBUFFER,null)},this.wO=(t,i,s,e,h)=>{const r=this.gl2.ctx;r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.clear(r.COLOR_BUFFER_BIT),h.forEach((s=>{const h=s._n.getBoundingClientRect();if(h){const n=h.right-h.left,o=h.bottom-h.top,a=h.left,l=e-h.bottom,u=s.yO();r.bindFramebuffer(r.READ_FRAMEBUFFER,s._O[1]),r.blitFramebuffer(0,0,u.x,u.y,a*this.xO-t*this.xO,l*this.xO+i*this.xO,(a-t+n)*this.xO,(l+i+o)*this.xO,r.COLOR_BUFFER_BIT,r.LINEAR)}})),r.bindFramebuffer(r.FRAMEBUFFER,null)},this.dO=void 0,this.Co=t,!Ch.requestAnimationFrame||!Ch.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");let i=1;if(t&&t.CO)i=!0===t.CO?Ch.devicePixelRatio||1:t.CO||1;else{const t=Ch.document.head.querySelector('meta[name="viewport"]');t&&t.content.includes("width=device-width")&&(i=Ch.devicePixelRatio||1)}this.xO=i,t.To=!0===t.To,this.lO=!1!==t.kO,this.TO=!1!==t.FO,this.IO=t.IO||!1;let s=!1;if(t.SO)if("string"==typeof t.SO){const i=Ch.document.getElementById(t.SO);if(!i)throw new Error(`Canvas "${t.SO}" doesn't exist.`);this.SO=i,s=!0}else this.SO=t.SO,s=!0;else this.SO=Ch.document.createElement("canvas");const h={preserveDrawingBuffer:!0,alpha:!0,antialias:!1};if(2!==t.PO&&t.PO){const i=this.SO.getContext("webgl",{...h,antialias:!!t.kO})||this.SO.getContext("experimental-webgl",{...h,antialias:!!t.kO});this.gl=i,this.DO=!1}else{const t=this.SO.getContext("webgl2",h);this.gl2={ctx:t},this.gl=t,this.DO=!0}if(!this.gl)throw new Sh("No WebGL context available."+((null==t?void 0:t.PO)?`\nSelected explicit target: WebGL ${t.PO}`:""));const r=[];if(this.BO={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.BO).forEach((t=>{null===this.BO[t]&&r.push(t)})),this.DO)this.LO=!0;else{const t={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};t.OES_standard_derivatives||(this.tO=!1),Object.keys(t).forEach((i=>{null===t[i]&&r.push(i)}));const i={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.LO=!!i.OES_texture_float,this.gl1={ctx:this.gl,BO:t,optional:i}}const n=r;if(n.length>0&&!1!==t.To){const t=Ch.document.createElement("div");t.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",t.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const i=Ch.document.createElement("button");i.innerText="X",i.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),Ch.document.body.appendChild(t),t.appendChild(i),Ch.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",n.join(", "))}if(this.RO=this.IO?this.EO(this.DO?this.MO.bind(this):this.vO.bind(this)).bind(this):this.OO(this.DO?this.wO.bind(this):this.bO.bind(this)).bind(this),Ch.ResizeObserver){const t=t=>{for(const i of t)i.target===this.SO&&this.zO()};this.Do=new Ch.ResizeObserver(t.bind(this)),this.Do.observe(this.SO)}if(this.VO=((t,i)=>{const s=t,e=new Map,h=new Map,r=new Map,n={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},o=(t,s,e=[])=>{const h=[],r=[],n={allAttributeNames:Array.from(t.matchAll(/attribute\s[^\s]*\s(.*);/g)).map((t=>t[1])),allUniformNames:Array.from(t.matchAll(/uniform\s[^\s]*\s(.*);/g)).map((t=>t[1])),allVaryingNames:Array.from(t.matchAll(/varying\s[^\s]*\s(.*);/g)).map((t=>t[1])),removedVariableNames:[]};if(i){const i=t.match(/#extension.*/g);i&&r.push(...i),t=t.replace(/#extension.*/g,"")}else if(h.push("#version 300 es"),(t=(t=(t=t.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&h.push("precision highp usampler2D;"),"vertex"===s)t=t.replace(/varying/g,"out");else{t=t.replace(/varying/g,"in");const i=e.find((t=>"fragOutput"===t.type));t=(t=i?`out ${i.fragOutput} fragOutput;\n${t}`:`out vec4 fragOutput;\n${t}`).replace(/gl_FragColor/g,"fragOutput")}return r&&h.push(...r),h.push("precision highp float;"),h.push("precision highp int;"),{source:t=`${h.join("\n")}\n${t}`,info:n}};return(...t)=>{const a=i?"webgl1":"webgl2";let l,u,c,d,f,A,g,v,y;try{const i=Ch.performance.now();l=t.filter((t=>!1!==t&&void 0!==t)),u=((t,i)=>{const s=t.map((s=>s.apply(t,i))),e=s.map((t=>t.idVertex)).filter((t=>void 0!==t)).sort().join(" "),h=s.map((t=>t.idFragment)).filter((t=>void 0!==t)).sort().join(" "),r=`vert: ${e} frag: ${h}`;let n,o=!1,a=!1;const l=[];let u;const c=[],d=[];if(s.forEach((t=>{if(t.defaultVertexShader&&(o||(n=t.defaultVertexShader)),t.vertexShader){if(n&&o&&n!==t.vertexShader)throw new Mp(`Conflicting vertex shader templates ${n} vs ${t.vertexShader}`,r,t);n=t.vertexShader,o=!0}if(t.vertexShaderModifiers)for(const i of t.vertexShaderModifiers)void 0!==i&&!1!==i&&l.push(i);if(t.defaultFragmentShader&&(a||(u=t.defaultFragmentShader)),t.fragmentShader){if(u&&a&&u!==t.fragmentShader)throw new Mp(`Conflicting fragment shader templates ${u} vs ${t.fragmentShader}`,r,t);u=t.fragmentShader,a=!0}if(t.fragmentShaderModifiers)for(const i of t.fragmentShaderModifiers)void 0!==i&&!1!==i&&c.push(i);t.hints&&t.hints.forEach((t=>{t&&d.push(t)}))})),!n)throw new Mp("No vertex shader template defined",r);if(!u)throw new Mp("Fragment shader not defined",r);return{id:r,vertexShader:{id:e,template:n,modifiers:l},fragmentShader:{id:h,template:u,modifiers:c},hints:d}})(l,a);const m=r.get(u.id);if(c="new",m)return c="existing",A=m.vertexShaderSrc,g=m.fragmentShaderSrc,m;const p=u.vertexShader.id;let S=e.get(p);if(S)A=S.src,d="existing";else{d="new";const t=new Km(u.vertexShader.modifiers).build(Dp[u.vertexShader.template]),{source:i,info:h}=o(t,"vertex");A=i,v=h,S=new Rp(p,i,s,h),e.set(p,S),n.vertexShaders+=1}const b=u.fragmentShader;let x;const M=b.id;if(x=h.get(M),x)g=x.src,f="existing";else{f="new";const t=Bp[b.template],i=new Km([...b.modifiers]).build(t),{source:e,info:r}=o(i,"fragment",u.hints);g=e,y=r,x=new Ep(M,e,s,r),h.set(M,x),n.fragmentShaders+=1}const _=new Op(S,x,s,u);return r.set(u.id,_),n.programs+=1,n.totalMs+=Ch.performance.now()-i,_}catch(t){throw pr(0,(()=>{const t="Unexpected LightningChart JS rendering error.\nThis can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).";return Ch.alert(t),new Error(t)}))}}})(this.gl,!this.DO),this.IE=(()=>{const t=Ch.document.createElement("canvas"),i=t.getContext("2d",{willReadFrequently:!0});if(!i)throw new Sh("Failed to get Text canvas rendering context");return i.fillStyle="#fff",(s,h,r,n)=>{const o=`${h.style} ${h.weight} ${h.size*r}px ${h.family}`;i.font=o,i.textBaseline="alphabetic",i.textAlign="left";const a=i.measureText(s);if(0===a.width)return;const l=void 0!==a.actualBoundingBoxLeft&&void 0!==a.actualBoundingBoxRight?Math.ceil(a.actualBoundingBoxLeft+a.actualBoundingBoxRight):Math.ceil(a.width),u=a.width,c=Math.round(h.size*r),d=void 0!==a.actualBoundingBoxLeft?a.actualBoundingBoxLeft:0;t.width=l>0?l:u,t.height=2*c,i.font=o,i.textBaseline="alphabetic",i.textAlign="left",n?(i.clearRect(0,0,t.width,t.height),i.fillStyle="#fff"):(i.fillStyle="rgba(255,255,255,0)",i.fillRect(0,0,t.width,t.height),i.fillStyle="#000"),i.fillText(s,d,c);const f=i.getImageData(0,0,t.width,t.height);let A=0,g=0;const v=f.width;for(let t=0;t<f.height;t+=1){for(let i=0;i<v;i+=1)if(0!==f.data[t*v*4+4*i+3]){A=t;break}if(0!==A)break}for(let t=f.height-1;t>=0;t-=1){for(let i=0;i<v;i+=1)if(0!==f.data[t*v*4+4*i+3]){g=t;break}if(0!==g)break}const y=i.canvas.height/2-A,m=g-A+1,p=v,S=new Uint8ClampedArray(p*m*1);for(let t=0;t<m;t+=1)for(let i=0;i<p;i+=1)S[1*t*p+1*i+0]=f.data[(t+A)*p*4+4*i+3];return[S,{advance:u,offsetX:d,baseline:y,glyph:s,size:e(p,m)}]}})(),t.NO||(this.IO?this.SO.style.display="none":(this.SO.style.position="absolute",this.SO.style.top="0",this.SO.style.left="0",this.SO.style.right="0",this.SO.style.bottom="0",this.SO.style.width="100%",this.SO.style.height="100%",this.SO.style.boxSizing="content-box",this.SO.style.display="block",this.SO.style.pointerEvents="none")),this.SO.classList.add("lcjs-canvas"),t.GO&&this.SO.setAttribute("data-lcjs-id",t.GO),s||Ch.document.body.appendChild(this.SO),Ch.IntersectionObserver&&(this.UO=new Ch.IntersectionObserver((t=>{for(let i=0;i<t.length;i+=1){const s=t[i];this.fO(s)}}),{threshold:Array.from(Array(100)).map(((t,i)=>i/100))})),Ch.addEventListener("resize",this.cO,{passive:!0}),!this.DO){if(this.sO=this.VO(Pp["2DCompose"],Pp.Color({dataType:"texture-coord-calc-gpu"}),Pp.VertexLocation({axisWorldTranslation:"matrix4",normalSource:void 0,coordType:"vec4"})),!this.sO.WE)throw new Sh("Unable to setup composition shader!");const t=this.gl,i=t.getUniformLocation(this.sO.WE,"uColorTexture");if(!i)throw new Sh("Unable to setup composition shader! Failed to find uColorTexture");const s=t.getUniformLocation(this.sO.WE,"uMatrix");if(!s)throw new Sh("Unable to setup composition shader! Failed to find uMatrix");this.rO=i,this.nO=s,this.oO=t.getAttribLocation(this.sO.WE,"aPos"),this.eO=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.eO),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.hO=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.hO),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null)}}EO(t){return i=>{this.iO=null;const s=this.gl.canvas,e=Array.from(this.KE.values());this.aO=!1,e.forEach((e=>{const h=e.yO();(this.zt.x<h.x||this.zt.y<h.y)&&(this.zt.x=Math.max(this.zt.x,h.x),this.zt.y=Math.max(this.zt.y,h.y),s instanceof HTMLCanvasElement&&(s.width=this.zt.x,s.height=this.zt.y)),e.Nn&&e.WO(i),t(0,0,0,0,[e])})),this.aO&&this.zO()}}OO(t){return i=>{this.iO=null,"style"in this.gl.canvas&&!this.Co.YO&&(this.gl.canvas.style.transform=`translateX(${window.scrollX}px) translateY(${window.scrollY}px)`);const s=this.gl.canvas,e=this.SO.clientHeight,h=this.SO.clientWidth;let r=0,n=0;if(s instanceof HTMLCanvasElement){s.width===h*this.xO&&s.height===e*this.xO||(s.width=h*this.xO,s.height=e*this.xO);const t=s.getBoundingClientRect();r=t.x,n=t.y}const o=Array.from(this.KE.values());this.aO=!1,o.sort(((t,i)=>t.HO()-i.HO())).forEach((t=>{t.Nn&&t.WO(i)})),t(r,n,h,e,o),this.aO&&this.zO()}}zO(t){return!this.aO&&t&&(this.aO=!0),this.iO||this.Ps||(this.iO=Ch.requestAnimationFrame(this.RO)),this}jO(t){const i=this.uO();return t._n.setAttribute("data-lcjs-engine-id",i),this.JE.set(i,t),t.$O(this.JE.size-1),t.gO(!0),this.KE.set(i,t),this.UO&&this.UO.observe(t._n),this.dO&&clearTimeout(this.dO),this.dO=setTimeout((()=>this.Dn()),0),this}XO(t){const i=t._n.getAttribute("data-lcjs-engine-id");return i?(this.JE.delete(i),this.KE.delete(i),this.UO&&this.UO.unobserve(t._n),t._n.removeAttribute("data-lcjs-engine-id"),this):this}Dn(){if(this.UO){const t=this.UO.takeRecords();for(let i=0;i<t.length;i+=1){const s=t[i];this.fO(s)}}return!this.IO&&this.TO&&Array.from(this.JE.values()).sort(((t,i)=>function(t,i){if(t===i)throw new Error("Cannot compare node with itself");const s={a:Wp(t),b:Wp(i)};let e;for(;s.a[s.a.length-1]===s.b[s.b.length-1];)t=s.a.pop(),i=s.b.pop(),e=t;const h=Up(Gp(s.a)),r=Up(Gp(s.b));if(h===r&&e){const t=e.childNodes,i={a:s.a[s.a.length-1],b:s.b[s.b.length-1]};let h=t.length;for(;h--;){const s=t[h];if(s===i.a)return 1;if(s===i.b)return-1}}return Math.sign(h-r)}(t._n,i._n))).forEach(((t,i)=>t.$O(i))),this.zO(!0),this}HP(){return this.zO(),this}ZO(){this.Ps||this.JE.forEach((t=>t.zv.layout()))}Bt(){var t;if(this.Ps)return;this.Ps=!0,super.Bt(),this.iO&&(Ch.cancelAnimationFrame(this.iO),this.iO=null),this.aO=!1,this.Do&&(this.Do.disconnect(),this.Do=void 0),this.UO&&(this.UO.disconnect(),this.UO=void 0),Ch.removeEventListener("resize",this.cO),this.cO=void 0,this.JE.forEach((t=>{t.Bt()})),this.JE.clear(),Array.from(this.qE.values()).forEach((t=>{t.vE(!0)})),this.qE.clear();const i=this.gl;i.deleteBuffer(this.eO),i.deleteBuffer(this.hO),this.SO&&!this.Co.SO?(this.SO.width=1,this.SO.height=1,null===(t=this.SO.parentElement)||void 0===t||t.removeChild(this.SO),this.SO=void 0):this.SO=void 0,this.VO=void 0,this.IE=void 0,this.RO=()=>{},this.BO.WEBGL_lose_context&&this.BO.WEBGL_lose_context.loseContext()}}const jp=(t,i,s,e)=>h=>{const r={theme:Em,...s,...h},n=t(r),o=i||e?Om(n,e):void 0,a=new Ky(n.Co,h,n,n.Bt.bind(n),o);return n.jo((t=>a.gR(t))).Ho((()=>a.Vt())).ie(),a},$p=(t,i)=>{t.jo((t=>{i.uh(t)})).Ho((()=>i.Vt())).ie()},Xp=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new dd(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o);return $p(n,a),a},Zp=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new qg(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,h);return $p(n,a),a},Qp=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new hy(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,h);return $p(n,a),a},Jp=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new dv(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,h);return $p(n,a),a},Kp=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new(h&&h.type?h.type:sf)(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,void 0,h);return $p(n,a),a},qp=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new(h&&h.type?h.type:Bv)(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,void 0,!0!==(null==h?void 0:h.disableAnimations)&&!1!==(null==h?void 0:h.animationsEnabled));return $p(n,a),a},tS=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new(h&&h.type?h.type:xv)(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,void 0,h);return $p(n,a),a},iS=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new(h&&h.type?h.type:Gv)(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,void 0,h);return $p(n,a),a},sS=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new Hf(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,h,void 0);return $p(n,a),a},eS=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new Rf(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,void 0,h);return $p(n,a),a},hS=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new Ly(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,void 0);return $p(n,a),a},rS=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new Hy(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,void 0,h);return $p(n,a),a},nS=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new hv(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,h);return $p(n,a),a},oS=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||Em},n=t(r),o=i||e?Om(n,e):void 0,a=new Sm(n.Co,uy(n,1).cP(0),dh,n.Bt.bind(n),o,h);return $p(n,a),a};function aS(i,s,e,h,r,n){let o=s.x.qt(i.max.x),a=s.x.qt(i.min.x),l=s.y.qt(i.max.y),u=s.y.qt(i.min.y),c=o-a,d=l-u;if(c<1){const t=(a+o)/2;a=t-.5,o=t+.5,c=1}if(d<1){const t=(u+l)/2;u=t-.5,l=t+.5,d=1}const f=c/d,A=c*e.x,g=d*e.y,v=c-A,y=d-g,m=A>v?[v,A]:[A,v],p=g>y?[y,g]:[g,y];let S,b,x=1,M=1;switch(h){default:case t.GradientExtent.closestSide:if(S=m[0]/c,b=p[0]/d,r===t.GradientShape.circle){const t=Math.min(S*f,b);x=t,M=t}else x=S*f,M=b;break;case t.GradientExtent.farthestSide:if(S=m[1]/c,b=p[1]/d,r===t.GradientShape.circle){const t=Math.max(S*f,b);x=t,M=t}else x=S*f,M=b;break;case t.GradientExtent.closestCorner:if(b=p[0]/d,r===t.GradientShape.circle){S=m[0]/c*f;const t=Math.sqrt(S*S+b*b);x=t,M=t}else{S=m[0]/c;const t=Math.sqrt(S*S+b*b);x=t*f,M=t}break;case t.GradientExtent.farthestCorner:if(b=p[1]/d,r===t.GradientShape.circle){S=m[1]/c*f;const t=Math.sqrt(S*S+b*b);x=t,M=t}else{S=m[1]/c;const t=Math.sqrt(S*S+b*b);x=t*f,M=t}}return{bounds:[a*n,u*n,c*n,d*n],center:[e.x*f,e.y],distance:[Math.max(x,1e-4),Math.max(M,1e-4)],aspectRatio:f}}function lS(t,i,s,h){const r=i.x.qt(t.max.x),n=i.x.qt(t.min.x),o=i.y.qt(t.max.y),a=i.y.qt(t.min.y),l=r-n,u=o-a,c=Math.abs(l*Math.sin(s))+Math.abs(u*Math.cos(s)),d=e(l/2-Math.sin(s)*(c/2),u/2-Math.cos(s)*(c/2)),f=e(l/2+Math.sin(s)*(c/2),u/2+Math.cos(s)*(c/2));return{bounds:[n*h,a*h,l*h,u*h],startPoint:[d.x*h,d.y*h],endPoint:[f.x*h,f.y*h]}}class uS{constructor(t){this.fE=t}}class cS{constructor(){this.QO=new Array,this.JO=t=>(this.QO.push(t),t),this.KO=this.JO(new Map),this.qO=this.JO(new Map),this.tz=this.JO(new Map),this.iz=this.JO(new Map),this.sz=this.JO(new Map),this.ez=this.JO(new Map),this.hz=this.JO(new Map)}rz(){this.QO.forEach((t=>{t.forEach((t=>t.rz())),t.clear()}))}}const dS=(t,i,s)=>()=>{t.nz=i,s&&s()},fS=(i,s,e,h,r)=>{const n=Math.min(e/i,h/s),o=i*n,a=s*n,l=e/o,u=h/a,c=o/e,d=a/h;let f=0,A=1,g=0,v=1;switch(r){case t.ImageFitMode.Fill:u<l?(f=0,A=1,g=.5+-c/2,v=.5+c/2):(g=0,v=1,f=.5+-d/2,A=.5+d/2);break;case t.ImageFitMode.Fit:u<l?(g=0,v=1,f=.5+-l/2,A=.5+l/2):(f=0,A=1,g=.5+-u/2,v=.5+u/2);break;case t.ImageFitMode.Center:{const t=e/i,r=h/s;f=.5+-t/2,A=.5+t/2,g=.5+-r/2,v=.5+r/2}break;case t.ImageFitMode.Tile:f=0,A=e/i,g=0,v=h/s;break;case t.ImageFitMode.Stretch:default:f=0,A=1,g=0,v=1}return new Float32Array([f,v,A,v,A,g,f,g])};class AS{constructor(t,i){if(this.oz=0,this.az=0,this.lz=!1,this.nz=!1,this.uz=!1,this.cz=!1,this.dz=!1,this.fz=new Set,this.Az=new Set,this.Nc=i,this.UE=t,this.gz=null,this.lz=i instanceof Ch.HTMLVideoElement,this.Nc instanceof Ch.HTMLImageElement)this.Nc.addEventListener("load",(()=>{this.cz=!0,this.vz()})),this.Nc.addEventListener("error",(()=>{this.dz=!0})),this.Nc.complete&&(this.cz=!0,this.vz());else if(this.Nc instanceof Ch.HTMLVideoElement){const t=this;this.Nc.addEventListener("canplay",(function(){t.az=this.videoHeight,t.oz=this.videoWidth,t.cz=!0,t.vz()}),!0),this.Nc.addEventListener("play",dS(this,!0,(()=>this.vz()))),this.Nc.addEventListener("playing",dS(this,!0,(()=>this.vz()))),this.Nc.addEventListener("pause",dS(this,!1)),this.Nc.addEventListener("ended",dS(this,!1)),this.Nc.readyState>=1&&(this.oz=this.Nc.videoWidth,this.az=this.Nc.videoHeight,this.nz=!this.Nc.paused,this.cz=!0,this.vz())}else this.cz=!0,this.vz()}CE(t){0===this.Az.size&&this.cz&&this.vz(),this.Az.add(t)}kE(t){this.Az.delete(t),0===this.Az.size&&this.unbindResources()}yz(t){this.fz.add(t),this.uz&&(t(),this.mz(t))}mz(t){this.fz.delete(t)}vz(){if(this.dz||this.uz||!this.cz)return;const t=this.UE.gl;if(!this.gz&&this.Nc&&t){this.gz=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.gz),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.Nc,n=this.oz>0?this.oz:r.width,o=this.az>0?this.az:r.height;t.texImage2D(t.TEXTURE_2D,i,s,e,h,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.oz=n,this.az=o,t.bindTexture(t.TEXTURE_2D,null)}this.uz=!0,this.fz&&this.fz.forEach((t=>{t(),this.mz(t)}))}de(){const t=this.UE.gl;if(!this.dz&&this.uz&&this.gz){const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.Nc;r&&(t.bindTexture(t.TEXTURE_2D,this.gz),t.texImage2D(t.TEXTURE_2D,i,s,e,h,r))}}pz(){return this.gz}unbindResources(){return this.uz&&(this.gz&&(this.UE.yE(this.gz),this.gz=null),this.uz=!1),this}}class gS extends Xa{constructor(t,i,s){super(t.$s,i,s),this.Rp=!0,this.Tp={},this.Bp=u(ql),this.ae=t,this.ti=t.ti}Sz(){var t;return this.Bp.o&&this.Bp._().type!==(null===(t=this.bz)||void 0===t?void 0:t.type)}Np(t){return this.Rp=t,this}xz(t){return this.Tp=t,this}}const vS=(t,i,s,e)=>{const h=t.Mz(),r=Math.round(Math.min(s.spread,10)*h),n=Math.round(Math.min(s.blur,10)*h),o={x:Math.round(s.offset.x*h),y:Math.round(s.offset.y*h)},a=t._z(),l=t.wz(),u=t.Cz(),c=t.kz(),d=t.Tz();t.Fz("disabled"),t.Np(!1),t.Iz(!1);const f=i.Pz(),A=r+n/2;((t,i,s,e)=>{const h=t.gl,r=t.Mz(),n=t.Dz();t.Bz(h.FRAMEBUFFER,e.frameBuffer),h.bindRenderbuffer(h.RENDERBUFFER,e.depthBuffer),h.bindTexture(h.TEXTURE_2D,e.texture),h.clearDepth(1),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);const o=e.sizeDpr;t.Lz(0,0,o.x,o.y),i.forEach((i=>{let e;if(i instanceof Qa?e=i.ae.ny():i instanceof gS&&(e=i.ae.Bb()),e){const i=e.x+s.left,h=e.y+s.bottom,n=Math.max(e.width-(s.left+s.right),0),o=Math.max(e.height-(s.bottom+s.top),0);t.Rz(i*r,h*r,n*r,o*r)}else t.Iz(!1);i.gR(2)})),t.Bz(h.FRAMEBUFFER,n),h.bindRenderbuffer(h.RENDERBUFFER,null),h.bindTexture(h.TEXTURE_2D,null),t.Iz(!1)})(t,e,{left:A+(o.x<0?-o.x:0),top:A+(o.y>0?o.y:0),right:A+(o.x>0?o.x:0),bottom:A+(o.y<0?-o.y:0)},f);let g=f;const v=r+n+5,y=((t,i,s,e)=>{const h=(t=>{const i=[];for(let s=0;s<t.length;s+=1){let e,h=t[s];do{const t=i.findIndex((t=>Ur(h,t)));e=t>=0?i[t]:void 0,e&&(i.splice(t,1),h=sn(h,e))}while(e);i.push(h)}return i})(i.map((t=>{const i=t instanceof Qa||t instanceof gS?t.ae.Ez(t):Vr;if(br(i))return Vr;const h={min:{x:Math.max(i.min.x-s.left,0),y:Math.max(i.min.y-s.bottom,0)},max:{x:Math.min(i.max.x+s.right,e.x),y:Math.min(i.max.y+s.top,e.y)}};return h.max.x<=h.min.x||h.max.y<=h.min.y?Vr:h})).filter((t=>!br(t)))),r=6*h.length,n=new Float32Array(4*r);let o=0;return h.forEach((t=>{const i=An(t.min,e),s=An(t.max,e),h=i,r=s;n[o+0]=i.x,n[o+1]=i.y,n[o+2]=h.x,n[o+3]=h.y,n[o+4]=s.x,n[o+5]=i.y,n[o+6]=r.x,n[o+7]=h.y,n[o+8]=s.x,n[o+9]=s.y,n[o+10]=r.x,n[o+11]=r.y,n[o+12]=s.x,n[o+13]=s.y,n[o+14]=r.x,n[o+15]=r.y,n[o+16]=i.x,n[o+17]=s.y,n[o+18]=h.x,n[o+19]=r.y,n[o+20]=i.x,n[o+21]=i.y,n[o+22]=h.x,n[o+23]=h.y,o+=24})),{vertexBuffer:t.Oz(n),vertexCount:r}})(t,e,{left:v+(o.x<0?-o.x:0),top:v+(o.y>0?o.y:0),right:v+(o.x>0?o.x:0),bottom:v+(o.y<0?-o.y:0)},i.zz()),m=i.Pz(f,g),p=t.VO(Pp["2D"],Pp.Glow1D({spreadPx:r,blurPx:n,firstPass:!0}),Pp.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h,r)=>{const n=t.gl,o=t.Dz();t.Bz(n.FRAMEBUFFER,s.frameBuffer),n.bindRenderbuffer(n.RENDERBUFFER,s.depthBuffer),n.bindTexture(n.TEXTURE_2D,s.texture),n.clearDepth(1),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t.Lz(0,0,s.sizeDpr.x,s.sizeDpr.y),t.Vz(e,((o,a,l,u)=>(t.CE(e),r&&r(o),t.Wz(o("uIsHighlighted"),0).jR(o("uHighlightColorOffset"),Me).Wz(o("uRenderEffectMask"),0).Uz(o("uTexture"),i.texture,0).Gz(u("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).Gz(o("uScale"),s.uniforms.Yz()).Gz(o("uDisp"),s.uniforms.jz()).Gz(o("uScaling"),[s.size.x,s.size.y]).Gz(o("uTranslationAxis"),[0,0]).Nz(h.vertexBuffer,void 0,{location:a("aPos"),size:2},{location:a("aTextureCoord"),size:2}).Bm(n.TRIANGLES,h.vertexCount,0),!0))),t.Bz(n.FRAMEBUFFER,o),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)})(t,g,m,p,y,((i,s,e,h)=>(t.Gz(i("uOffsetPx"),[o.x,o.y]),!0))),g=m,t.Iz(l),t.$z(d);const S=t.VO(Pp["2D"],Pp.Glow1D({spreadPx:r,blurPx:n,firstPass:!1}),Pp.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h)=>{const r=t.gl,n={x:t.$s.Hi().x,y:t.$s.Hi().y};t.Lz(0,0,n.x*t.Mz(),n.y*t.Mz());const o=dh.d2({scaleXYConstructor:Nn}).Wt(n).Ms(0,n.x)._s(0,n.y),a=new SS;a.Xz(o),t.Vz(s,((o,l,u,c)=>(t.CE(s),h&&h(o),t.Wz(o("uIsHighlighted"),0).jR(o("uHighlightColorOffset"),Me).Wz(o("uRenderEffectMask"),0).Uz(o("uTexture"),i.texture,0).Gz(c("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).Gz(o("uScale"),a.Yz()).Gz(o("uDisp"),a.jz()).Gz(o("uScaling"),[n.x,n.y]).Gz(o("uTranslationAxis"),[0,0]).Nz(e.vertexBuffer,void 0,{location:l("aPos"),size:2},{location:l("aTextureCoord"),size:2}).Bm(r.TRIANGLES,e.vertexCount,0),!0)))})(t,f,S,y,((i,e,h,r)=>(t.Uz(i("uTextureFirstGlowPass"),m.texture,1).jR(i("uGlowColor"),s.color),!0))),t.Lz(a.x,a.y,a.width,a.height),t.Fz(u),t.Np(c),t.Zz(y.vertexBuffer)};class yS{constructor(t){this.Qz=[],this.fE=t}Jz(t,i){vS(this.fE,this,i,t)}zz(){const t=this.fE.$s.Hi();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}Pz(...t){const i=this.Qz,s=this.zz(),e={x:Math.ceil(s.x*this.fE.Mz()),y:Math.ceil(s.y*this.fE.Mz())},h=this.fE.gl,r=i.find((i=>!t.includes(i)));if(r)return r.sizeDpr.x===e.x&&r.sizeDpr.y===e.y||(r.size=s,r.sizeDpr=e,h.bindTexture(h.TEXTURE_2D,r.texture),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.bindRenderbuffer(h.RENDERBUFFER,r.depthBuffer),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,e.x,e.y),h.bindTexture(h.TEXTURE_2D,null),h.bindRenderbuffer(h.RENDERBUFFER,null),r.scale.Wt(s).Ms(0,s.x)._s(0,s.y),r.uniforms.Xz(r.scale)),r;const n=h.createTexture(),o=this.fE.Kz(),a=this.fE.qz();h.bindTexture(h.TEXTURE_2D,n),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const l=this.fE.Dz();this.fE.Bz(h.FRAMEBUFFER,o),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),h.bindRenderbuffer(h.RENDERBUFFER,a),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,e.x,e.y),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,a),h.bindTexture(h.TEXTURE_2D,null),this.fE.Bz(h.FRAMEBUFFER,l),h.bindRenderbuffer(h.RENDERBUFFER,null);const u=dh.d2({scaleXYConstructor:Nn}).Wt(s).Ms(0,s.x)._s(0,s.y),c=new SS;c.Xz(u);const d={size:s,sizeDpr:e,texture:n,frameBuffer:o,depthBuffer:a,scale:u,uniforms:c};return i.push(d),d}Bt(){[this.Qz].forEach((t=>{t.forEach((t=>{this.fE.tV(t.depthBuffer),this.fE.iV(t.frameBuffer),this.fE.yE(t.texture)})),t.length=0}))}}class mS{constructor(i,s,e,h,r=!0){this.sV=new cS,this.eV=new Map,this.hV=new Map,this.rV=[],this.CO=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const t=new Uint32Array([287454020]),i=new Uint8Array(t.buffer);return 68===i[0]||17!==i[0]&&(Ch.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.Rp=!1,this.Gz=(t,[i,s])=>(void 0===t||this.gl.uniform2f(t,i,s),this),this.nV=(t,[i,s])=>(void 0===t||this.gl.uniform2i(t,i,s),this),this.oV=(t,[i,s,e,h])=>(void 0===t||this.gl.uniform4f(t,i,s,e,h),this),this.aV=(t,[i,s,e])=>(void 0===t||this.gl.uniform3f(t,i,s,e),this),this.lV=(t,i)=>(void 0===t||this.gl.uniformMatrix3fv(t,!1,i),this),this.uV=(t,i)=>(void 0===t||this.gl.uniformMatrix4fv(t,!1,i),this),this.jR=(t,i)=>(void 0===t||this.gl.uniform4f(t,i.r,i.g,i.b,i.a),this),this.Wz=(t,i)=>(void 0===t||this.gl.uniform1f(t,i),this),this.cV=(t,i)=>(this.gl.uniform1i(t,i),this),this.Uz=(t,i,s)=>{if(void 0===t)return this;if(i){const e=this.gl.TEXTURE0+s;return this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(t,s),this}throw new Sh("Could not bind a texture.")},this.dV=i=>(((i,s)=>{s===t.ImageFitMode.Tile?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE))})(this.gl,i),this),this.Oz=(t,i=!1,s,e=Float32Array)=>{const h=t.length,r=this.fV(h,s);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof e?t:new e(t),i?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),r)return r;throw new Sh("Could not create vertex buffer")},this.AV=(t,i,s,e=Float32Array)=>{const h=s||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),i&&i.length===t?this.gl.bufferData(this.gl.ARRAY_BUFFER,i instanceof e?i:new e(i),this.gl.STATIC_DRAW):(this.gl.bufferData(this.gl.ARRAY_BUFFER,new e(t),this.gl.STATIC_DRAW),i&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,i instanceof e?i:new e(i))),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),h)return h;throw new Sh("Could not create vertex buffer")},this.gV=(t,i,s,e=Float32Array)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,i*e.BYTES_PER_ELEMENT,s instanceof e?s:new e(s)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.vV=(t,i,s=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,s?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.yV=(t,i)=>{const s=t.length,e=this.fV(s,i);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new Sh("Could not create index buffer")},this.mV=t=>{const i=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),i)return i;throw new Sh("Could not create float buffer")},this.pV=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)),this),this.SV=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.Nz=(t,i,...s)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t);const e=s.length;let h=0;for(let t=0;t<e;t+=1)h+=s[t].size;for(let t=0;t<e;t+=1){const i=s[t].location;void 0!==i&&i>-1&&this.gl.enableVertexAttribArray(i)}let r=0;for(let t=0;t<e;t+=1){const i=s[t];void 0!==i.location&&i.location>-1&&this.gl.vertexAttribPointer(i.location,i.size,this.gl.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),r+=i.size}if(void 0!==i)for(let t=0;t<e;t+=1){const e=s[t].location;void 0!==e&&e>-1&&this.bV(e,i)}return this},this.xV=(...t)=>{const i=t.length;for(let s=0;s<i;s+=1){const i=t[s];0!==i&&i>-1&&this.gl.disableVertexAttribArray(i)}return this},this.MV=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,0,0)),this),this._V=(t,i,s)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t),void 0!==s&&this.bV(t,s)),this),this.wV=t=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this),this.CV=null,this.Bm=(t,i,s=0)=>(i>0&&this.gl.drawArrays(t,s,i),this),this.kV=(t,i=this.gl.TRIANGLES,s=0,e=this.gl.UNSIGNED_SHORT)=>(t>0&&this.gl.drawElements(i,t,e,s),this),this.TV=(t,i,s,e)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(t,i,s,e),this.gl1)){if(!this.gl1.BO.ANGLE_instanced_arrays)return Ch.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.BO.ANGLE_instanced_arrays.drawArraysInstancedANGLE(t,i,s,e)}return this},this.FV=(t,i,s,e,h=this.gl.UNSIGNED_SHORT)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(t,i,h,s,e),this.gl1)){if(!this.gl1.BO.ANGLE_instanced_arrays)return Ch.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.BO.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,i,h,s,e)}return this},this.bV=(t,i)=>{if(t>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(t,i),this.gl1)){if(!this.gl1.BO.ANGLE_instanced_arrays)return Ch.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.BO.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,i)}return this},this.IV=(t,i,s,e=0)=>{const h=this.gl.TEXTURE0+e;this.gl.activeTexture(h);const r=this.Dz();this.Bz(this.gl.FRAMEBUFFER,i),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,s,0);const n=this.wz();n&&this.Iz(!1),t(),n&&this.Iz(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.Bz(this.gl.FRAMEBUFFER,r)},this._i=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this),this.PV=t=>(this.gl.clearColor(t.r,t.g,t.b,t.a),this),this.CE=t=>(this.gl.useProgram(t.WE),this),this.DV=!1,this.BV=[],this.$s=i,this.HA=s,this.$s=i,this.gl=e.ctx,this.LV=e.antialias,this.RV=!!this.$s.Bn.tO&&e.lineAntialias,this.LO=this.$s.Bn.LO,this.EV=new Map,this.gl1=this.$s.Bn.gl1,this.gl2=this.$s.Bn.gl2,r&&(this.$z(!0),this.OV()),this.BO=this.$s.Bn.BO,this.gE=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.bE=this.zV(),this.VO=this.$s.Bn.VO,this.VV=new xS(this),this.IE=this.$s.Bn.IE,this.NV=new yS(this),this.qE=this.$s.Bn.qE,this.GV=this.Oz([0,0,1,0,1,1,0,1]),this.UV=this.Oz([0,0,1,0,0,1,0,1,1,0,1,1])}Fz(t){return t!==this.WV&&(this.WV=t,"disabled"===t?this.gl.disable(this.gl.CULL_FACE):"cull-back"===t?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):"cull-front"===t&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}Cz(){return this.WV||"disabled"}Np(t){return t!==this.Rp&&(this.Rp=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}kz(){return this.Rp}YV(t){return this.CO=t,this}Mz(){return this.CO}fV(t,i){let s;if(i){const e=this.EV.get(i);e&&e.size>=t&&e.size-t<1e6?s=i:this.Zz(i)}return s||(s=this.gl.createBuffer(),this.EV.set(s,{size:t})),s}HV(t,i=this.gl.RGBA,s=!1,e,h,r=!1,n=this.gl.UNSIGNED_BYTE,o=i){const a=this.gl.createTexture();if(!a)throw new Sh("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),t&&null===h?this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,i,n,t):h&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,h.x,h.y,0,i,n,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),s?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),a}yE(t){this.gl.deleteTexture(t)}Kz(){const t=this.gl.createFramebuffer();if(!t)throw new Sh("Couldn't reserve Framebuffer.");return t}Bz(t,i){this.CV=i,this.gl.bindFramebuffer(t,i)}Dz(){return this.CV}iV(t){this.gl.deleteFramebuffer(t)}qz(){const t=this.gl.createRenderbuffer();if(!t)throw new Sh("Couldn't reserve Render buffer.");return t}tV(t){this.gl.deleteRenderbuffer(t)}Lz(t,i,s,e){return this.gl.viewport(t,i,s,e),this.jV&&t===this.jV.x&&i===this.jV.y&&s===this.jV.width&&e===this.jV.height||(this.jV={x:t,y:i,width:s,height:e}),this}_z(){return this.jV||{x:0,y:0,width:0,height:0}}Rz(t,i,s,e){return this.Iz(!0),this.gl.scissor(Math.max(t,0),Math.max(i,0),Math.max(s,0),Math.max(e,0)),this}Iz(t){return t===this.$V||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.$V=t),this}$z(t){return t!==this.DV&&(this.DV=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}Tz(){return this.DV}OV(t,i,s,e){return t?(void 0!==t&&void 0!==i&&(void 0!==s&&void 0!==e?this.gl.blendFuncSeparate(t,i,s,e):this.gl.blendFunc(t,i)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}wz(){return void 0!==this.$V&&this.$V}Vz(t,i){const s=new MS(this,t),e=i(s.uniform,s.attribute,s,s.uniformOptional);s.finish(e)}Zz(t){t&&(this.gl.deleteBuffer(t),this.EV.delete(t))}XV(t,i,s){this.Gz(t.uniform("uCenter"),i.center).Gz(t.uniform("uDistance"),i.distance).oV(t.uniform("uBounds"),i.bounds).Wz(t.uniform("uAspect"),i.aspectRatio);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.jR(t.uniform(`color_${i}`),e[i].color).Wz(t.uniform(`stop_${i}`),e[i].offset);return this}ZV(t,i,s){this.Gz(t.uniform("uStartPoint"),i.startPoint).Gz(t.uniform("uEndPoint"),i.endPoint).oV(t.uniform("uBounds"),i.bounds);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.jR(t.uniform(`color_${i}`),e[i].color).Wz(t.uniform(`stop_${i}`),e[i].offset);return this}br(t){const i=this.qE.get(t);if(!i){const i=new Jm(this);return this.qE.set(t,i),i}return i}QV(t){const i=this.eV.get(t);if(!i){const i=new AS(this,t);return this.JV(t,i),i}return i}JV(t,i){this.eV.set(t,i)}zV(){const t=this.gl,i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const s=0===t.getError();return s||!1!==this.HA.To&&Ch.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(i),s}KV(t,i,s,e){if(s)this.Nz(i,e,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const s=t.attribute("aPos");this.pV(s,i),void 0!==e&&this.bV(s,e)}return this}qV(){this.BO.WEBGL_lose_context&&this.BO.WEBGL_lose_context.loseContext()}tN(t){if(this.iN&&this.iN.bufferIdsCount>=t)return this.iN.buffer;this.iN&&(this.Zz(this.iN.buffer),this.iN=void 0);const i=t,s=new Float32Array(i);for(let t=0;t<i;t+=1)s[t]=t;const e=this.Oz(s);return this.iN={buffer:e,bufferIdsCount:i},e}sN(){return this.gl2?void 0:"attribute"}eN(t,i){if("attribute"===this.sN()){const s=this.tN(i);this.Nz(s,void 0,{location:t.attribute("aVertexID"),size:1})}return this}hN(){return this.gl2?void 0:"attribute"}rN(t,i){if("attribute"===this.hN()){const s=this.tN(i);this.Nz(s,1,{location:t.attribute("aInstanceID"),size:1})}return this}nN(t,i,s,e,h,r,n,o,a){const l=t.createBuffer();return this.BV.push(l),t.bindFramebuffer(t.FRAMEBUFFER,i),t.bindBuffer(t.PIXEL_PACK_BUFFER,l),t.bufferData(t.PIXEL_PACK_BUFFER,a.byteLength,t.STREAM_READ),t.readPixels(s,e,h,r,n,o,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),pS(t,t.PIXEL_PACK_BUFFER,l,0,a).then((()=>a)).catch((t=>{throw t})).finally((()=>{t.deleteBuffer(l),this.BV.splice(this.BV.indexOf(l),1)}))}oN(t,i,s,e,h,r,n,o){const a=this.gl,l=this.Dz();this.Bz(a.FRAMEBUFFER,t),a.readPixels(i,s,e,h,r,n,o),this.Bz(this.gl.FRAMEBUFFER,l)}aN(t){const i=this.hV.get(t);if(!i){const i=this.gl.createTexture();if(!i)throw new Sh("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,i);const e=[];let h=255;for(let i=0;i<t.length;i+=1){for(let s=0;s<t[i];s+=1)e.push(h);h=255===h?0:255}const r=e.length;if(!this.gl2&&0!=((s=e.length)&s-1)){const t=(t=>{t-=1;for(let i=1;i<32;i<<=1)t|=t>>1;return t+1})(e.length);for(let i=e.length;i<t;i+=1)e[i]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(e)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const n={lN:i,uN:r,cN:e.length};return this.hV.set(t,n),n}var s;return i}dN(t,i,s){const{uniform:e}=t;this.jR(e("uFallbackColor"),i.getFallbackColor());for(let t=0;t<i.steps.length;t+=1)this.Wz(e(`uLUTValue${t}`),i.steps[t].value),this.jR(e(`uLUTColor${t}`),i.steps[t].color);if(i.percentageValues){if(!s)return pr(0,(()=>{})),this;this.Wz(e("uMinValue"),s.min),this.Wz(e("uMaxValue"),s.max)}return this}fN(i,s,e,h,r,n){const o=e&&e.getSource()||h&&h.Nc,a=e?e.getFitMode():t.ImageFitMode.Stretch,l=t=>{t.texCoordsBuffer=this.Oz(n(t.texture.oz,t.texture.az,a),!1,t.texCoordsBuffer)};if(o){let t=s;if((!s||o!==s.source)&&o){s&&(s.texture.kE(i),this.Zz(s.texCoordsBuffer));const h=this.QV(o);h.CE(i);const r=e?e.getSourceMissingColor():Bo.color;t={texture:h,source:o,texCoordsBuffer:this.Oz([]),sourceMissingTexture:this.HV(new Uint8Array([r.getR(),r.getG(),r.getB(),r.getA()]),this.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{t&&o&&(l(t),this.$s.ie())}},h.yz(t.textureReadyCallback),l(t)}return t&&t.texture.uz&&t.texture.lz&&t.texture.nz&&(t.texture.de(),this.$s.ie()),r&&t&&t.texture.uz&&l(t),t}s&&this.AN(i,s)}AN(t,i){i&&(i.texture.kE(t),i.texture.mz(i.textureReadyCallback),this.yE(i.sourceMissingTexture),this.Zz(i.texCoordsBuffer))}gN(t,i,s,e){const{uniform:h,uniformOptional:r,attribute:n}=t,o=s.ti,a=this.Mz();this.Wz(h("uIsHighlighted"),1===i||2===i?0:s.ma).jR(h("uHighlightColorOffset"),1===i||2===i?_e:s.xa).Wz(h("uRenderEffectMask"),2===i?1:0).Gz(r("uRatioPxClip"),[2/this.$s.Hi().x,2/this.$s.Hi().y]).Wz(r("uDevicePixelRatio"),a),o instanceof Nn||o instanceof cv?this.Gz(h("uScale"),e.uniforms.Yz()).Gz(h("uDisp"),e.uniforms.jz()).Gz(r("uScaleStart_highpart"),e.uniforms.vN()).Gz(r("uScaleStart_lowpart"),e.uniforms.yN()):o instanceof Gn&&this.Gz(r("uScaleStart"),e.uniforms.MixedScaleXY.uScaleStart).Gz(r("uScaleStartLog"),e.uniforms.MixedScaleXY.uScaleStartLog).Gz(r("uScaleInterval"),e.uniforms.MixedScaleXY.uScaleInterval).Gz(r("uScaleIntervalLog"),e.uniforms.MixedScaleXY.uScaleIntervalLog).Gz(h("uViewportStart"),e.uniforms.MixedScaleXY.uViewportStart).Gz(h("uViewportSize"),e.uniforms.MixedScaleXY.uViewportSize);const l=!0===e.coordsHighPrecision;if(e.coordsX)if(l){const t=n("aPos_highpartX"),i=n("aPos_lowpartX");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.coordsX),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(i,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(i)}else this._V(n("aPosX"),e.coordsX);if(e.coordsY)if(l){const t=n("aPos_highpartY"),i=n("aPos_lowpartY");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.coordsY),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(i,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(i)}else this._V(n("aPosY"),e.coordsY);if(1===i)this.jR(h("uColor"),e.mousePickingColor);else{if(e.fillStyleSolid&&this.jR(h("uColor"),e.fillStyleSolid.getColor()),e.fillStylePaletted){if("value"===e.fillStylePaletted.getLookUpProperty()&&null!==e.lookupValueBuffer){if(!e.lookupValueBuffer)return!1;const t=n("aLookupValue");this._V(t,e.lookupValueBuffer),void 0!==e.lookupValueAttribDivisor&&this.bV(t,e.lookupValueAttribDivisor)}this.dN(t,e.fillStylePaletted.lut,e.lookupValueRange)}if(e.fillStyleLinearGradient){if(!e.linearGradientInfo)return!1;this.ZV(t,e.linearGradientInfo,e.fillStyleLinearGradient)}if(e.fillStyleRadialGradient){if(!e.radialGradientInfo)return!1;this.XV(t,e.radialGradientInfo,e.fillStyleRadialGradient)}if(e.fillStyleIndividual&&null!==e.colorBuffer){if(!e.colorBuffer)return!1;const t=n("aColor");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.colorBuffer),this.gl.vertexAttribPointer(t,4,this.gl.UNSIGNED_BYTE,!0,0,0),this.gl.enableVertexAttribArray(t),void 0!==e.colorAttribDivisor&&this.bV(t,e.colorAttribDivisor)}if(e.fillStyleImage){if(!e.texturedFillGLInfo)return!1;const t=e.texturedFillGLInfo&&e.texturedFillGLInfo.texture.pz();this.jR(r("uColor"),e.fillStyleImage.getSurroundingColor()).Uz(h(Ap),t||e.texturedFillGLInfo.sourceMissingTexture,0).Nz(e.texturedFillGLInfo.texCoordsBuffer,e.texCoordAttribDivisor,{location:n("aTextureCoord"),size:2}).dV(e.fillStyleImage.fitMode)}if(e.maskTexture){const t=e.maskTexture&&e.maskTexture.texture.pz();this.Uz(h(yp),t||e.maskTexture.sourceMissingTexture,0).Nz(e.maskTexture.texCoordsBuffer,e.maskTextureCoordsAttribDivisor,{location:n("aMaskTextureCoord"),size:2})}}return!0}mN(t,i,s){if(t)return lS(s||i.Ca(),i.ti,t.getAngle(!0),this.Mz())}pN(t,i,s){if(t)return aS(s||i.Ca(),i.ti,t.getPosition(),t.getExtent(),t.getShape(),this.Mz())}}const pS=async(t,i,s,e,h,r,n)=>{const o=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),((t,i,s)=>{const e=void 0!==s.flags?s.flags:0,h=void 0!==s.retryTimeout?s.retryTimeout:10;return new Promise(((s,r)=>{const n=()=>{const o=t.clientWaitSync(i,e,0);return o===t.WAIT_FAILED?r(new Error(`WebGL Sync WAIT_FAILED ${t.getError()}`)):o!==t.TIMEOUT_EXPIRED?s(void 0):void Ch.setTimeout(n,h)};Ch.setTimeout(n,0)}))})(t,o,{retryTimeout:10}).then((()=>(t.deleteSync(o),t.bindBuffer(i,s),t.getBufferSubData(i,e,h,r,n),t.bindBuffer(i,null),h))).catch((t=>{throw t}))};class SS{Xz(t){if(t instanceof Nn||t instanceof cv){const i=t.es();this.SN=i.x.scaling,this.bN=-i.x.displacement,this.xN=i.y.scaling,this.MN=-i.y.displacement,this._N=i.x.highPrecisionOffset,this.wN=i.x.highPrecisionOffset-Math.fround(i.x.highPrecisionOffset),this.CN=i.y.highPrecisionOffset,this.kN=i.y.highPrecisionOffset-Math.fround(i.y.highPrecisionOffset)}else t instanceof Gn&&(this.MixedScaleXY=t.es());return this}jz(){return[this.bN,this.MN]}Yz(){return[this.SN,this.xN]}vN(){return[this._N,this.CN]}yN(){return[this.wN,this.kN]}}class bS{constructor(){this.SN=0,this.xN=0,this.TN=0,this.bN=0,this.MN=0,this.FN=0}IN(t){return this.SN=t.$t(),this.bN=t.getInnerStart()+.5*this.SN*t.Xt(),this}PN(t){return this.xN=t.$t(),this.MN=t.getInnerStart()+.5*this.xN*t.Xt(),this}DN(t){return this.TN=t.$t(),this.FN=t.getInnerStart()+.5*this.TN*t.Xt(),this}Yz(){return[this.SN,this.xN,this.TN]}jz(){return[this.bN,this.MN,this.FN]}LN(t,i,s,h,r){const o=e(2*(t-s.x)/(s.width-s.x)-1,2*(i-s.y)/(s.height-s.y)-1),a=Bf.multiply(h,[o.x,o.y,r,1]);return n(a[0],a[1],a[2])}}class xS{constructor(t){this.fE=t}gR(t,i,s,e,h,r=0){const n=this.fE,o=void 0===e;if(!(e=e||n.Kz()))throw new Sh("Could not bind a framebuffer.");const a=n._z(),l=n.Tz();n.$z(!1),n.IV((()=>{n.Lz(0,0,s.x,s.y),t()}),e,i,r),o&&n.iV(e),this.fE.PV(h),this.fE.Lz(a.x,a.y,a.width,a.height),n.$z(l)}}class MS{constructor(t,i){this.RN=[],this.EN=[],this.uniform=t=>{const i=this.shader.$E(t);return this.EN.push({name:t,optional:!1}),i},this.uniformOptional=t=>{const i=this.shader.XE(t);return this.EN.push({name:t,optional:!0}),i},this.attribute=t=>{const i=this.shader.ZE(t);return this.RN.push({name:t,location:i}),i},this.glUtils=t,this.shader=i}finish(t){for(const t of this.RN)this.glUtils.xV(t.location),this.glUtils.bV(t.location,0)}}class _S extends Qa{constructor(t,i,s,e,h){super(t,i,s,e),this.ON=new Map,this.zN=t,this.VN=i,this.fE=t.NN(),this.GN=h,this.VN=i}UN(t){return!1}vE(){return this}gR(t){if(!this.GN||0!==t||0===this.ON.size)return this;const i=Array.from(this.ON.values()).map((t=>t.WN.filter((t=>t.YN)).map((t=>t.Vs)).flat().filter((t=>void 0!==t)).filter((t=>t.getVisible())))).flat();if(0===i.length)return this;const s=this.GN;return this.fE.NV.Jz(i,s),this}de(){return this}ni(){return 0}ri(){return 0}ai(){return 0}oi(){return 0}tu(){return 0}iu(){return 0}Us(t,i){const s={WN:[]},e=(t,i)=>{const e={Vs:t||[],YN:void 0===i||i};s.WN.push(e);const h={Qs:t=>(e.Vs=t,h),te:t=>(e.YN=t,h),se:()=>e.YN};return h},h={};Object.keys(i).forEach((t=>{const s=i[t],r=s.shapes||[],n=void 0===s.themeEffectEnabled||s.themeEffectEnabled,o=e(r,n);h[t]=o}));const r={Jg:e,...h};this.ON.set(t,s);const n=t.onDispose((()=>{this.ON.delete(t),t.offDispose(n)}));return r}}const wS=(t,i,s)=>((t,i,s,h)=>{const r=[];let n=0;const o=un(i,s/2);let a,l,u,c,d=t[t.length-1],f=0;for(let s=0;s<t.length;s+=1){a=t[s],l=s===t.length-1?t[0]:t[s+1],s>0&&(d=t[s-1]),kh(a,d)&&(d=cn(a,on(un(dn(l,a),-1)))),kh(a,l)&&(l=cn(a,on(un(dn(d,a),-1))));const h=An(d,i),A=An(a,i),g=An(l,i),v=on(dn(A,h)),y=on(dn(g,A)),m=cn(v,y),p=e(-m.y,m.x),S=e(-v.y,v.x),b=1/vn(p,S),x=ln(p),M=on(dn(v,y)),_=Math.sign(vn(p,M))||1,w=fn(p,un(o,b)),C=fn(p,un(o,-b));if(x<1||b===1/0){let t={x:0,y:0},i={x:0,y:0},s={x:0,y:0},h={x:0,y:0};const u=e(-y.y,y.x),c=Math.sign(vn(v,p))||_,A=fn(S,un(o,c)),g=fn(u,un(o,c));1===_?(t=A,i=C,s=g,h=C):(t=w,i=A,s=w,h=g);const m=4*Zr(d,a),x=4*Zr(a,l);(b>m||b>x)&&(1===_?(t=A,i=g,s=g,h=A):(t=g,i=A,s=A,h=g));const M=cn(a,t),k=cn(a,i),T=cn(a,s),F=cn(a,h);r[n]=M,n+=1,r[n]=k,n+=1,r[n]=T,n+=1,r[n]=F,n+=1,f=4}else{const t=cn(a,w),i=cn(a,C);r[n]=t,n+=1,r[n]=i,n+=1,f=2}c=u,u=t[s]}return r[n]=r[0],n+=1,r[n]=r[1],n+=1,[r,f,[c,u]]})(t,i,s)[0];class CS extends dl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.NE=new SS,this.HN=Vr,this.jN=Vr,this.$N=$m({arcStyleSolid:()=>Oe(this.sh)&&this.sh,arcStyleRadialGradient:()=>eh(this.sh)&&this.sh,arcStyleLinearGradient:()=>nh(this.sh)&&this.sh}),this.zN=t,this.VN=i,this.XN=r,this.ZN=n,this.fE=t.NN()}QN(t,i){let s=0,e=Array(0),h=0;if(void 0!==i){const h=t.length,r=Array(h+i.length);let n=0,o=0;for(;n<h;)r[o]=t[n],r[o+1]=i[n],o+=2,n+=1;e=r,s=this.fE.gl.TRIANGLE_STRIP}else e=t,s=this.fE.gl.TRIANGLE_FAN;const r=ir(e,this.ti.us());return h=e.length,[e,this.fE.Oz(r),h,s]}JN(t,i,s,e){let h=Array(0);if(void 0===i)h=t;else{let s=0,e=0;const r=t.length;for(s=0,e=r,h=Array(r+i.length-2),i.reverse();s<r;)h[s]=t[s],h[e]=i[s],e+=1,s+=1}if(1===s||-1===s)return[ir(h,this.ti.us()),h.length];const r=wS(h,e,s);return[ir(r,this.ti.us()),r.length]}de(){const t=this.Oa(),i=this.Aa._();if(this.za()){const s=Math.abs(this.ut._()-this.bu._());this.NE.Xz(this.ti);const h=this.ti.ws()||t,r=this.ti.ks(),n=this.xu._(),o=this.Mu._(),[l,u]=Dv(this.Ha._(),this.bu._(),this.ut._(),this.xu._(),this.Mu._(),this.wu._()),c=this._u._(),d=c>0?Dv(this.Ha._(),this.bu._(),this.ut._(),this.xu._()*c/100,this.Mu._()*c/100,u)[0]:[this.Ha._()],f=l.length-1;if(2===f){const t=(l[f-1].x+l[1].x)/2,i=(l[f-1].y+l[1].y)/2;this.Cu=e(t,i)}else{const t=Math.floor(f/2);this.Cu=e(l[t].x,l[t].y)}this.ku=l[1];const A=l.length-1;this.Tu=l[A],this._u._()&&(l.shift(),d.shift());let g=!1;(this.Ha.o||this.bu.o||this.ut.o||this.xu.o||this.Mu.o||this._u.o||this.wu.o||h)&&(this.jN=a(e(this.ll().x-n,this.ll().y-o),e(this.ll().x+n,this.ll().y+o)),g=!0,this.Ha.o=!1,this.bu.o=!1,this.ut.o=!1,this.xu.o=!1,this.Mu.o=!1,this._u.o=!1,this.wu.o=!1);const v=this.Ra();(g||v)&&this.sh!==De&&(this._u._()?(this.KN&&this.fE.Zz(this.KN),[this.qN,this.KN,this.tG,this.iG]=this.QN(l,d)):(this.KN&&this.fE.Zz(this.KN),[this.qN,this.KN,this.tG,this.iG]=this.QN(l,void 0)),eh(this.sh)?this.sG=aS(this.jN,this.ti,this.sh.getPosition(),this.sh.getExtent(),this.sh.getShape(),this.fE.Mz()):nh(this.sh)?this.eG=lS(this.jN,this.ti,this.sh.getAngle(!0),this.fE.Mz()):(this.sG=void 0,this.eG=void 0));const y=this.$N.arcStyleSolid(v),m=this.$N.arcStyleLinearGradient(v),p=this.$N.arcStyleRadialGradient(v),S=y||m||p;v&&(this.hG=S?this.fE.VO(Pp["2D"],Pp.Color({dataType:eh(this.sh)||nh(this.sh)?["gradient",this.sh]:"uniform"}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0,this.Va(this.sh));const b=this.eh;if(eo(b)&&(g||this.Ua(b.getThickness())||h)){this._u._()?360===s?(l.pop(),d.pop(),[this.rG,this.nG]=this.JN(l,void 0,b.getThickness(),r),this.oG&&this.rG?this.fE.vV(this.oG,this.rG,!0):!this.oG&&this.rG?this.oG=this.fE.Oz(this.rG,!0):this.oG&&!this.rG&&(this.fE.Zz(this.oG),this.oG=void 0),[this.aG,this.lG]=this.JN(d,void 0,b.getThickness(),r),this.uG&&this.aG?this.fE.vV(this.uG,this.aG,!0):!this.uG&&this.aG?this.uG=this.fE.Oz(this.aG,!0):this.uG&&!this.aG&&(this.fE.Zz(this.uG),this.uG=void 0)):([this.rG,this.nG]=this.JN(l,d,b.getThickness(),r),this.oG&&this.rG?this.fE.vV(this.oG,this.rG,!0):!this.oG&&this.rG?this.oG=this.fE.Oz(this.rG,!0):this.oG&&!this.rG&&(this.fE.Zz(this.oG),this.oG=void 0),this.aG&&(this.uG&&this.fE.Zz(this.uG),this.uG=void 0,this.lG=0)):(360===s&&(l.shift(),l.pop()),[this.rG,this.nG]=this.JN(l,void 0,b.getThickness(),r),this.oG&&this.rG?this.fE.vV(this.oG,this.rG,!0):!this.oG&&this.rG?this.oG=this.fE.Oz(this.rG,!0):this.oG&&!this.rG&&(this.fE.Zz(this.oG),this.oG=void 0));const t=b.getFillStyle();eh(t)?this.cG=aS(this.jN,this.ti,t.getPosition(),t.getExtent(),t.getShape(),this.fE.Mz()):nh(t)?this.dG=lS(this.jN,this.ti,t.getAngle(!0),this.fE.Mz()):(this.cG=void 0,this.dG=void 0),this.fG=t===De?void 0:this.fE.VO(Pp["2D"],Pp.Color({dataType:eh(t)||nh(t)?["gradient",t]:"uniform"}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})),this.Wa(b)}if(g){let t=1,i=1;eo(b)&&(t=b.getThickness()*r.x,i=b.getThickness()*r.y),this.HN=a(e(this.jN.min.x-t,this.jN.min.y-i),e(this.jN.max.x+t,this.jN.max.y+i))}this.AG=i&&S?this.AG||this.fE.VO(Pp["2D"],Pp.MousePicking,Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0,this.gG=i&&this.eh!==ah?this.gG||this.fE.VO(Pp["2D"],Pp.MousePicking,Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0}return this}gR(t){if(this.za()){const i=1===t?this.AG:this.hG,s=this.sh,e=this.KN;i&&e&&this.fE.CE(i).Vz(i,((i,h,r,n)=>{if(this.fE.Gz(i("uScale"),this.NE.Yz()).Gz(i("uDisp"),this.NE.jz()).Gz(n("uScaleStart_highpart"),this.NE.vN()).Gz(n("uScaleStart_lowpart"),this.NE.yN()).KV(r,e,this.ti.us(),void 0).Wz(i("uIsHighlighted"),1===t||2===t?0:this.ma).jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0),1===t)this.fE.jR(i("uColor"),this.ZN);else if(Oe(s))this.fE.jR(i("uColor"),s.getColor());else if(eh(s)){if(!this.sG)return!1;this.fE.XV(r,this.sG,s)}else if(nh(s)){if(!this.eG)return!1;this.fE.ZV(r,this.eG,s)}return this.fE.Bm(this.iG,this.tG),!0}));const h=this.eh;eo(h)&&(void 0!==this.oG&&this.vG(t,this.oG,this.nG,h),void 0!==this.uG&&this.vG(t,this.uG,this.lG,h))}return this}vG(t,i,s,e){const h=1===t?this.gG:this.fG,r=e.getFillStyle();h&&this.fE.CE(h).Vz(h,((h,n,o,a)=>{if(this.fE.Gz(h("uScale"),this.NE.Yz()).Gz(h("uDisp"),this.NE.jz()).KV(o,i,this.ti.us(),void 0).Wz(h("uIsHighlighted"),1===t||2===t?0:this.ma).jR(h("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(h("uRenderEffectMask"),2===t?1:0),1===t)this.fE.jR(h("uColor"),this.ZN);else if(Oe(r))this.fE.jR(h("uColor"),r.getColor());else if(eh(r)){if(!this.cG)return!1;this.fE.XV(o,this.cG,r)}else if(nh(r)){if(!this.dG)return!1;this.fE.ZV(o,this.dG,r)}const l=e.getThickness(),u=-1===l||1===l;return this.fE.Bm(u?this.fE.gl.LINE_LOOP:this.fE.gl.TRIANGLE_STRIP,s),!0}))}UN(t){return this.XN===t&&{}}vE(){return this.yG&&(this.fE.Zz(this.yG),this.yG=void 0),this.mG&&(this.fE.Zz(this.mG),this.mG=void 0),this.KN&&(this.fE.Zz(this.KN),this.KN=void 0),this.oG&&(this.fE.Zz(this.oG),this.oG=void 0),this.uG&&(this.fE.Zz(this.uG),this.uG=void 0),this.hG=void 0,this.fG=void 0,this.AG=void 0,this.gG=void 0,this}ni(){return this.jN.max.x}ri(){return this.jN.min.x}ai(){return this.jN.max.y}oi(){return this.jN.min.y}tu(){return Fr(this.eh)}iu(){return Fr(this.eh)}}class kS{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}pG(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}SG(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}bG(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}xG(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.second,i[s+2]=this.third,s+=3,t.position=s,t.next&&this.SG(),this}MG(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.third,i[s+2]=this.second,i[s+3]=this.third,i[s+4]=this.fourth,i[s+5]=this.second,s+=6,t.position=s,t.next&&this.bG(),this}_G(t,i){i.next=!0,6*t>=i.buffer.length&&(i.buffer=Array(6*t));for(let s=0;s<t;s+=1)this.MG(i);return this}wG(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const TS=((t=0)=>(new kS).pG(t))(),FS=(t,i,s,e,h,r,n,o,a,l)=>(void 0===o&&void 0===n||TS.SG(),r.push(t,i),h.push(TS.first,TS.second,TS.third),o=void 0,n=void 0,h.push(TS.third,TS.fourth,TS.second),a=TS.third,TS.bG(),l&&r.push(s,e),[n,o,a]),IS=(t,i,s,e,h,r,n,o,a,l,u)=>{void 0===a&&void 0===o||TS.SG(),n.push(t,i),h.push(TS.first,TS.second,TS.third);const c=_n(t,s,i,e);return a=void 0,void 0!==c&&(void 0===a&&(a=c),n.push(a),r.push(TS.third,TS.fourth,TS.fifth),l=TS.fourth),TS.bG(),u&&n.push(s,e),[o,a,l]},PS=(t,i,s,e,h,r,n,o,a,l)=>(void 0===n&&void 0===r||TS.SG(),h.push(t,i),e.push(TS.first,TS.second,TS.third),r=s,n=void 0,o=TS.third,l?h.push(s):a=!0,[r,n,o,a]),DS=(t,i,s,e,h,r,n,o,a,l,u)=>(0!==r.length?(void 0===o&&void 0===n||TS.SG(),TS.SG()):a>0&&(TS.SG(),u>0&&(u-=1)),r.push(t),h.push(TS.first,TS.second,TS.third),a=TS.second,n=t,o=void 0,l&&r.push(s,e),[n,o,a,u]),BS=(t,i=0)=>{TS.pG(i);const[s,e]=t,h=s.length,r=[],n=[],o=[];let a,l,u=i,c=0,d=s[c],f=e[c],A=s[c],g=e[c],v=!1,y=u>0?A.y!==g.y?2:1:0;if(h>1)for(;c<h-1;){A=d,g=f,c+=1,d=s[c],f=e[c];const t=c===h-1;A.y>g.y?d.y>f.y?[a,l,u]=FS(A,g,d,f,r,o,a,l,u,t):d.y<f.y?[a,l,u]=IS(A,g,d,f,r,n,o,a,l,u,t):[a,l,u,v]=PS(A,g,d,r,o,a,l,u,v,t):A.y<g.y?d.y<f.y?[a,l,u]=FS(A,g,d,f,n,o,a,l,u,t):d.y>f.y?[a,l,u]=IS(A,g,d,f,n,r,o,a,l,u,t):[a,l,u,v]=PS(A,g,d,n,o,a,l,u,v,t):d.y===f.y?(a=A,v&&(o.push(A),v=!1,TS.SG()),0===o.length&&u>0&&y>0&&(y-=1)):d.y>f.y?[a,l,u,y]=DS(A,0,d,f,r,o,a,l,u,t,y):[a,l,u,y]=DS(A,0,d,f,n,o,a,l,u,t,y)}return[o,new Uint16Array(r),new Uint16Array(n),u,y]};class LS extends cl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.NE=new SS,this.CG=0,this.Sl=Array(),this.kG=0,this.TG=new Uint16Array(0),this.FG=new Uint16Array(0),this.$N=$m({hightFillSolid:()=>Oe(this.sh)&&this.sh,hightFillRadialGradient:()=>eh(this.sh)&&this.sh,hightFillLinearGradient:()=>nh(this.sh)&&this.sh,hightFillPaletted:()=>Ge(this.sh)&&this.sh,lowFillSolid:()=>Oe(this.au)&&this.au,lowFillRadialGradient:()=>eh(this.au)&&this.au,lowFillLinearGradient:()=>nh(this.au)&&this.au,lowFillPaletted:()=>Ge(this.au)&&this.au}),this.zN=t,this.VN=i,this.XN=r,this.ZN=n,this.fE=t.NN()}de(){const t=this.Oa(),i=this.Aa._(),s=this.Pl;if(this.za()){this.NE.Xz(this.ti);const e=this.ti instanceof Gn==0,h=e?this.ti.ks():void 0,r=this.du(),n=this.ti.ws()||t,o=s||this.hu.o||n&&"disabled"!==r.type;if(o){if(this.CG=0,this.TG=new Uint16Array(0),this.FG=new Uint16Array(0),this.Sl.length=0,this.kG=0,this.ru>1){const[t,i,s,n]=BS([e?r.packager(this.su,h,.5):this.su,e?r.packager(this.eu,h,.5):this.eu]);this.CG=n,this.TG=i,this.FG=s,this.Sl=t,this.kG=t.length}this.hu.o=!1}if(this.ou&&this.kl[0].length>1){const[t,i]=this.kl,s=t.length,[n,o,a,l,u]=BS([e?r.packager(t,h,.5):t,e?r.packager(i,h,.5):i],this.CG);this.CG=l;const c=n.length;for(let t=u;t<c;t+=1)this.Sl[this.kG]=n[t],this.kG+=1;this.TG=wn(this.TG,o),this.FG=wn(this.FG,a);for(let e=u>0||this.ru>0?1:u;e<s;e+=1)this.su[this.ru]=t[e],this.eu[this.ru]=i[e],this.ru+=1;this.nu=!0,this.ou=!1,this.kl=[]}const a=this.sh,l=this.Ea!==a,u=this.$N.hightFillSolid(l),c=this.$N.hightFillRadialGradient(l),d=this.$N.hightFillLinearGradient(l),f=this.$N.hightFillPaletted(l),A=u||c||d||f&&["x","y"].includes(f.getLookUpProperty())&&f,g=this.au,v=this.pu!==g,y=this.$N.lowFillSolid(v),m=this.$N.lowFillRadialGradient(v),p=this.$N.lowFillLinearGradient(v),S=this.$N.lowFillPaletted(v),b=y||m||p||S&&["x","y"].includes(S.getLookUpProperty())&&S;if((l||t)&&(this.IG=A?this.fE.VO(Pp["2D"],Pp.Color({dataType:d?["gradient",d]:c?["gradient",c]:f?["lookup",f.getLookUpProperty(),f.lut]:"uniform"}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0),c?this.sG=aS(this.ya||this.wl,this.ti,c.getPosition(),c.getExtent(),c.getShape(),this.fE.Mz()):d?this.eG=lS(this.ya||this.wl,this.ti,d.getAngle(!0),this.fE.Mz()):(this.sG=void 0,this.eG=void 0),(v||t)&&(this.PG=b?this.fE.VO(Pp["2D"],Pp.Color({dataType:p?["gradient",p]:m?["gradient",m]:S?["lookup",S.getLookUpProperty(),S.lut]:"uniform"}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0),m?this.DG=aS(this.ya||this.wl,this.ti,m.getPosition(),m.getExtent(),m.getShape(),this.fE.Mz()):p?this.BG=lS(this.ya||this.wl,this.ti,p.getAngle(!0),this.fE.Mz()):(this.DG=void 0,this.BG=void 0),(t||this.nu||o)&&this.nu||o){const t=this.Sl,i=ir(t,this.ti.us());this.LG=this.fE.Oz(i,!1,this.LG),A&&(this.EG=this.fE.yV(this.TG,this.EG),this.OG=this.TG.length),b&&(this.zG=this.fE.yV(this.FG,this.zG),this.VG=this.FG.length),this.nu=!1}this.AG=i&&(b||A)?this.AG||this.fE.VO(Pp["2D"],Pp.MousePicking,Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0,this.Va(this.sh),this.Su(this.au),this.Pl=!1}return this}gR(t){const i=this.sh,s=this.au,e=1===t?this.AG:this.PG;if(e&&this.LG&&this.zG){const i=this.LG,h=this.zG;this.fE.CE(e).Vz(e,((e,r,n,o)=>{if(this.fE.KV(n,i,this.ti.us(),void 0).wV(h).Wz(e("uIsHighlighted"),1===t||2===t?0:this.ma).jR(e("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(e("uRenderEffectMask"),2===t?1:0),this.ti instanceof Nn||this.ti instanceof cv?this.fE.Gz(e("uScale"),this.NE.Yz()).Gz(e("uDisp"),this.NE.jz()).Gz(o("uScaleStart_highpart"),this.NE.vN()).Gz(o("uScaleStart_lowpart"),this.NE.yN()):this.ti instanceof Gn&&this.fE.Gz(o("uScaleStart"),this.NE.MixedScaleXY.uScaleStart).Gz(o("uScaleStartLog"),this.NE.MixedScaleXY.uScaleStartLog).Gz(o("uScaleInterval"),this.NE.MixedScaleXY.uScaleInterval).Gz(o("uScaleIntervalLog"),this.NE.MixedScaleXY.uScaleIntervalLog).Gz(e("uViewportStart"),this.NE.MixedScaleXY.uViewportStart).Gz(e("uViewportSize"),this.NE.MixedScaleXY.uViewportSize),1===t)this.fE.jR(e("uColor"),this.ZN);else if(Oe(s))this.fE.jR(e("uColor"),s.getColor());else if(eh(s)){if(!this.DG)return!1;this.fE.XV(n,this.DG,s)}else if(nh(s)){if(!this.BG)return!1;this.fE.ZV(n,this.BG,s)}else if(Ge(s)){const t=Xm(s,this,void 0);if(!t&&s.lut.percentageValues)return!1;this.fE.dN(n,s.lut,t)}return this.fE.kV(this.VG),!0}))}const h=1===t?this.AG:this.IG;if(h&&this.LG&&this.EG){const s=this.LG,e=this.EG;this.fE.CE(h).Vz(h,((h,r,n,o)=>{if(this.fE.KV(n,s,this.ti.us(),void 0).wV(e).Wz(h("uIsHighlighted"),1===t||2===t?0:this.ma).jR(h("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(h("uRenderEffectMask"),2===t?1:0),this.ti instanceof Nn||this.ti instanceof cv?this.fE.Gz(h("uScale"),this.NE.Yz()).Gz(h("uDisp"),this.NE.jz()).Gz(o("uScaleStart_highpart"),this.NE.vN()).Gz(o("uScaleStart_lowpart"),this.NE.yN()):this.ti instanceof Gn&&this.fE.Gz(o("uScaleStart"),this.NE.MixedScaleXY.uScaleStart).Gz(o("uScaleStartLog"),this.NE.MixedScaleXY.uScaleStartLog).Gz(o("uScaleInterval"),this.NE.MixedScaleXY.uScaleInterval).Gz(o("uScaleIntervalLog"),this.NE.MixedScaleXY.uScaleIntervalLog).Gz(h("uViewportStart"),this.NE.MixedScaleXY.uViewportStart).Gz(h("uViewportSize"),this.NE.MixedScaleXY.uViewportSize),1===t)this.fE.jR(h("uColor"),this.ZN);else if(Oe(i))this.fE.jR(h("uColor"),i.getColor());else if(eh(i)){if(!this.sG)return!1;this.fE.XV(n,this.sG,i)}else if(nh(i)){if(!this.eG)return!1;this.fE.ZV(n,this.eG,i)}else if(Ge(i)){const t=Xm(i,this,void 0);if(!t&&i.lut.percentageValues)return!1;this.fE.dN(n,i.lut,t)}return this.fE.kV(this.OG),!0}))}return this}UN(t){return this.XN===t&&{}}ni(){return this.wl.max.x}ri(){return this.wl.min.x}ai(){return this.wl.max.y}oi(){return this.wl.min.y}tu(){return 0}iu(){return 0}MM(t){this.Wl()>0&&this.de();const[i,s]=this.Rl(),e=i.length>2&&i[1].x<i[0].x,h=Ga(i,t,Va.NearestX,this.lu,this.uu,this.ti,this.$s.ti,this.wl,"x",e);if(void 0===h)return;const r=[i[h],s[h]];return Number.isNaN(r[0].y)||Number.isNaN(r[1].y)?void 0:r}Ow(t){this.Wl()>0&&this.de();const[i,s]=this.Rl(),e=i.length;if(0===e)return;const h=this.lu?1:0,r=e-(this.uu?2:1),n=i.length>2&&i[1].x<i[0].x,o=ja(i,Ah(t,this.$s.ti,this.ti),"x",n,h,r);if(!o)return;const a=[Jr(i[o.a],i[o.b],o.lerpAmount),Jr(s[o.a],s[o.b],o.lerpAmount)];return Number.isNaN(a[0].y)||Number.isNaN(a[1].y)?void 0:a}dispose(){return super.dispose(),this.zG&&(this.fE.Zz(this.zG),this.zG=void 0),this.EG&&(this.fE.Zz(this.EG),this.EG=void 0),this.LG&&(this.fE.Zz(this.LG),this.LG=void 0),this}vE(){return this.dispose(),this}}class RS extends uS{constructor(t,i){super(t),this.NG=i;const{vertices:s,indices:e,indicesCount:h,drawMode:r}=this.GG();this.UG=t.Oz(s),this.WG=t.yV(e),this.YG=h,this.HG=r}CE(t,i){return this.fE.Nz(this.UG,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:i?t.attribute("aSegmentInside"):void 0,size:1}),this.fE.wV(this.WG),this}Bm(t,i,s){return this.fE.FV(void 0!==i?i:this.HG,this.YG,s||0,t,this.fE.gl.UNSIGNED_BYTE),this}GG(){const t=[];[1,0].forEach((i=>{const s=1===i?.5*Math.PI:1.5*Math.PI;for(let e=0;e<=this.NG;e+=1){const h=s-e*Math.PI/this.NG;t.push(.5*Math.cos(h),.5*Math.sin(h),i,0)}})),t.push(0,0,1,1),t.push(0,0,0,1);const i=t.length/4,s=[];for(let t=0;t<this.NG;t+=1)s.push(t,t+1,i-2),s.push(t+i/2-1,t+i/2,i-1);return s.push(0,i-2,i-1),s.push(i-1,i-2,i/2-1),s.push(0,i-3,i-1),s.push(i/2-2,i-2,i/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(s),indicesCount:s.length,verticesCount:i,drawMode:this.fE.gl.TRIANGLES}}rz(){this.fE.Zz(this.UG),this.fE.Zz(this.WG)}}const ES=(t,i,s=!0)=>((t,i)=>{let s=t.sV.tz.get(i);return s||(s=new RS(t,i),t.sV.tz.set(i,s),s)})(t,s?i>=50?8:i>=20?6:i>=7?4:i>=4?3:1===i?1:2:1),OS={jG:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.bV(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.bV(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.bV(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.bV(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.bV(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.bV(s,1),o.enableVertexAttribArray(s)}},$G:(t,i,s,e,h,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,s),o.vertexAttribPointer(e,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.bV(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(h,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),t.bV(h,1),o.enableVertexAttribArray(h)},XG:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.bV(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.bV(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.bV(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.bV(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.bV(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.bV(s,1),o.enableVertexAttribArray(s)}},ZG:(t,i,s,e,h,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,s),o.vertexAttribPointer(e,r,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.bV(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(h,r,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),t.bV(h,1),o.enableVertexAttribArray(h)},gR:(t,i,s,e,h,r,n)=>{const o=t.NN(),{uniform:a,uniformOptional:l}=s,u=1/t.Co.Fo,c=(h?Math.max(r,u):Math.max(r,0))+1;o.Wz(a("uThicknessPixels"),c).Wz(l("uAALimit"),1-(c-1)/c).Gz(a("uRatioPxClip"),[2/t.Hi().x,2/t.Hi().y]),i.CE(s,e).Bm(n)}},zS={jG:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aPos_highpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t);const i=n("aPos_lowpart");o.vertexAttribPointer(i,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(i)}else{const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},$G:(t,i,s,e,h,r)=>{const n=t.gl;n.bindBuffer(n.ARRAY_BUFFER,s),n.vertexAttribPointer(e,h,n.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),n.enableVertexAttribArray(e)},XG:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),!t){const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},QG:(t,i)=>{const s=t.NN();s.Bm(s.gl.LINE_STRIP,i,0)},JG:(t,i)=>{const s=t.NN();s.Bm(s.gl.LINES,2*i,0)}};class VS extends Sl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.NE=new SS,this.wl=Vr,this.$N=$m({lineStyleSolid:()=>eo(this.Wu)&&this.Wu,lineStyleDashed:()=>uu(this.Wu)&&this.Wu,strokeFillSolid:()=>{const t=this.Wu.getFillStyle();return Oe(t)&&t},strokeFillLinearGradient:()=>{const t=this.Wu.getFillStyle();return nh(t)&&t},strokeFillRadialGradient:()=>{const t=this.Wu.getFillStyle();return eh(t)&&t},strokeFillPaletted:()=>{const t=this.Wu.getFillStyle();return Ge(t)&&t}}),this.zN=t,this.VN=i,this.XN=r,this.ZN=n,this.fE=t.NN(),this.KG=this.fE.RV}de(){const t=this.Na(),i=this.Wu,s=this.$N.lineStyleSolid(t),h=this.$N.lineStyleDashed(t),r=s||h,n=this.$N.strokeFillSolid(t),o=this.$N.strokeFillLinearGradient(t),l=this.$N.strokeFillRadialGradient(t),u=this.$N.strokeFillPaletted(t),c=n||o||l||u&&["x","y"].includes(u.getLookUpProperty())&&u,d=this.gs(),f=this.As(),A=this.Aa._(),g=this.Aa.o,v=i.Ft();if(h&&this.ti instanceof Gn)return Ch.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.NE.Xz(this.ti),this.Xu&&(this.qG=this.fE.Oz(ir([d,f],this.ti.us()),!1,this.qG),this.wl=a(e(d.x,d.y),e(f.x,f.y))),t||g){const t=this.za()&&r&&c&&v>0,i=o?["gradient",o]:l?["gradient",l]:u?["lookup",u.getLookUpProperty(),u.lut]:"uniform";this.tU=t?{type:"triangulated",shader:this.fE.VO(Pp["2D"],Pp.Color({dataType:i}),Pp.LineInstanced2D({axisWorldTranslation:jm(this.ti),normalSource:void 0}),this.KG?Pp.AliasedEdge:void 0,h&&Pp.StippleTextureInstanced),mousePickingShader:A?this.fE.VO(Pp["2D"],Pp.MousePicking,Pp.LineInstanced2D({axisWorldTranslation:jm(this.ti),normalSource:void 0}),h&&Pp.StippleTextureInstanced):void 0,geometry:ES(this.fE,v),thickness:v,lineStyleSolid:s,lineStyleDashed:h,fillStyleSolid:n,fillStyleLinearGradient:o,fillStyleRadialGradient:l,fillStylePaletted:u}:void 0}if(l?this.cG=aS(Ka(this.wl,{x:this.tu(),y:this.iu()},this.ti),this.ti,l.getPosition(),l.getExtent(),l.getShape(),this.fE.Mz()):o?this.dG=lS(Ka(this.wl,{x:this.tu(),y:this.iu()},this.ti),this.ti,o.getAngle(!0),this.fE.Mz()):(this.cG=void 0,this.dG=void 0),h){if(t||this.Xu){const t=[0,0,Math.abs(f.x-d.x),Math.abs(f.y-d.y)];this.iU=this.fE.Oz(t,!1,this.iU)}this.sU=this.fE.aN(h.getPattern())}else this.iU&&(this.fE.Zz(this.iU),this.iU=void 0),this.sU=void 0;return this.$u(i),this.Xu=!1,this.Aa.o=!1,this}gR(t){var i,s;const e=this.qG;if(!e)return this;const h=this.tU;if(!h)return this;const{fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a,lineStyleDashed:l,thickness:u}=h,c=1===t?null===(i=this.tU)||void 0===i?void 0:i.mousePickingShader:null===(s=this.tU)||void 0===s?void 0:s.shader;return c?(this.fE.CE(c).Vz(c,((i,s,c,d)=>{if(this.fE.Wz(i("uIsHighlighted"),1===t||2===t?0:this.ma).jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0),this.ti instanceof Nn||this.ti instanceof cv?this.fE.Gz(i("uScale"),this.NE.Yz()).Gz(i("uDisp"),this.NE.jz()).Gz(d("uScaleStart_highpart"),this.NE.vN()).Gz(d("uScaleStart_lowpart"),this.NE.yN()):this.ti instanceof Gn&&this.fE.Gz(d("uScaleStart"),this.NE.MixedScaleXY.uScaleStart).Gz(d("uScaleStartLog"),this.NE.MixedScaleXY.uScaleStartLog).Gz(d("uScaleInterval"),this.NE.MixedScaleXY.uScaleInterval).Gz(d("uScaleIntervalLog"),this.NE.MixedScaleXY.uScaleIntervalLog).Gz(i("uViewportStart"),this.NE.MixedScaleXY.uViewportStart).Gz(i("uViewportSize"),this.NE.MixedScaleXY.uViewportSize),1===t)this.fE.jR(i("uColor"),this.ZN);else if(r)this.fE.jR(i("uColor"),r.getColor());else if(o){if(!this.cG)return!1;this.fE.XV(c,this.cG,o)}else if(n){if(!this.dG)return!1;this.fE.ZV(c,this.dG,n)}else if(a){const t=Xm(a,this,void 0);if(!t&&a.lut.percentageValues)return!1;this.fE.dN(c,a.lut,t)}if(l){if(!this.iU||!this.sU)return!1;OS.$G(this.fE,c,this.iU,s("aLengthSoFarA"),s("aLengthSoFarB"),2,0),this.fE.Gz(i("uStippleCount"),[this.$s.Hi().x/this.sU.cN,this.$s.Hi().y/this.sU.cN]).Wz(d("uStippleTextureWidthLimiter"),this.sU.uN/this.sU.cN).Wz(i("uStippleScale"),l.getPatternScale()).Uz(i("uStippleTexture"),this.sU.lN,1)}return OS.jG(this.ti.us(),this.fE,e,c,this.ti.us()?4:2,0),OS.gR(this.zN,h.geometry,c,this.KG&&1!==t,1===t,u,1),!0})),this):this}UN(t){return this.XN===t&&{}}dispose(){return super.dispose(),this.tU=void 0,this.qG&&(this.fE.Zz(this.qG),this.qG=void 0),this.iU&&(this.fE.Zz(this.iU),this.iU=void 0),this.sU=void 0,this}vE(){return this}ni(){return this.wl.max.x}ri(){return this.wl.min.x}ai(){return this.wl.max.y}oi(){return this.wl.min.y}tu(){return Fr(this.Wu)}iu(){return Fr(this.Wu)}}class NS extends bl{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.eU=[],this.hU=!1,this.rU=!1,this.nU=!1,this.oU=!1,this.NE=new SS,this.wl=Vr,this.$N=$m({lineStyleSolid:()=>eo(this.Wu)&&this.Wu,lineStyleDashed:()=>uu(this.Wu)&&this.Wu,lineFillSolid:()=>{const t=this.Wu.getFillStyle();return Oe(t)&&t},lineFillRadialGradient:()=>{const t=this.Wu.getFillStyle();return eh(t)&&t},lineFillLinearGradient:()=>{const t=this.Wu.getFillStyle();return nh(t)&&t},lineIndividualPointFill:()=>{const t=this.Wu.getFillStyle();return Ve(t)&&t}}),this.zN=t,this.VN=i,this.aU=r,this.fE=t.NN(),this.KG=this.fE.RV,this.lU=t.Co.Po;const{color:n,id:o}=this.aU();this.ZN=n,this.XN=o}Sn(){const t=this.Qu?void 0:this.aU(),i={qs:t=>this.uU(i,t),Xs:t=>this.cU(i,t),yv:(t,s)=>this.dU(i,t,s),jR:t=>this.fU(i,t),ot:{x:0,y:0},ut:{x:0,y:0},ma:0,AU:void 0,XN:null==t?void 0:t.id,ZN:null==t?void 0:t.color};return this.eU.push(i),i}_i(){var t;return this.eU.length=0,this.hU=!0,this.Bs&&this.uo&&(null===(t=this.$s.ao)||void 0===t?void 0:t.entity)===this&&this.uo(this,void 0,this.$s.ao.collectionMember),this}gU(){return this.eU.length}_(t){const i=this.eU[t];return[i.ot,i.ut]}Zm(){return this.eU}if(t){var i;const s=this.eU.indexOf(t);s>=0&&(this.eU.splice(s,1),this.hU=!0,this.Bs&&this.uo&&(null===(i=this.$s.ao)||void 0===i?void 0:i.entity)===this&&this.uo(this,void 0,this.$s.ao.collectionMember))}uU(t,i){if(i&&!this.eU.includes(t))this.eU.push(t);else if(!i){const i=this.eU.indexOf(t);this.eU.splice(i,1)}return this.nU=!0,t}cU(t,i){return t.ma=i,this.rU=!0,t}dU(t,i,s){return t.ot=i,t.ut=s,this.hU=!0,t}fU(t,i){return t.AU=i,this.oU=!0,t}de(){const t=this.Aa._(),i=this.Aa.o,s=this.Na(),e=this.Wu,h=this.eU,r=this.rU,n=this.hU,o=this.nU,a=this.oU,l=this.$N.lineStyleSolid(s),u=this.$N.lineStyleDashed(s),c=l||u,d=this.$N.lineFillSolid(s),f=this.$N.lineIndividualPointFill(s),A=this.$N.lineFillRadialGradient(s),g=this.$N.lineFillLinearGradient(s),v=d||f||g||A,y=e.Ft(),m=u?"triangulated":e.getThickness()<0?"primitive":"triangulated";if(u&&this.ti instanceof Gn)return Ch.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.NE.Xz(this.ti);const p=n||o;if(p){const t=[];for(let i=0;i<h.length;i+=1){const s=h[i];t.push(s.ot),t.push(s.ut)}this.qG=this.fE.Oz(ir(t,this.ti.us()),!1,this.qG),this.wl=qr(t)}if(s||i){const i=d?"uniform":f?"attribute":g?["gradient",g]:A?["gradient",A]:void 0,s=c&&v&&y>0&&i;this.tU=s?"triangulated"===m?{type:"triangulated",shader:this.fE.VO(Pp["2D"],Pp.Color({dataType:i}),Pp.LineInstanced2D({axisWorldTranslation:jm(this.ti),normalSource:void 0,snapToNearestPixel:this.lU,ensureMinimumSegmentLength:void 0!==this.Zu}),this.KG?Pp.AliasedEdge:void 0,u&&Pp.StippleTextureInstanced,Pp.AttributeHighlight),mousePicking:t?{shader:this.fE.VO(Pp["2D"],this.Qu?Pp.MousePicking:Pp.MousePickingAttribute,Pp.LineInstanced2D({axisWorldTranslation:jm(this.ti),normalSource:void 0,snapToNearestPixel:this.lU,ensureMinimumSegmentLength:void 0!==this.Zu}),u&&Pp.StippleTextureInstanced,Pp.AttributeHighlight)}:void 0,geometry:ES(this.fE,y,!1),thickness:y,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:d,fillStyleIndividual:f,fillStyleLinearGradient:g,fillStyleRadialGradient:A}:{type:"primitive",shader:this.fE.VO(Pp["2D"],Pp.Color({dataType:i}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0,snapToNearestPixel:this.lU}),Pp.AttributeHighlight),mousePicking:t?{shader:this.fE.VO(Pp["2D"],this.Qu?Pp.MousePicking:Pp.MousePickingAttribute,Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0,snapToNearestPixel:this.lU}),Pp.AttributeHighlight)}:void 0,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:d,fillStyleIndividual:f,fillStyleLinearGradient:g,fillStyleRadialGradient:A}:void 0}if(u){if(s||p){const t=new Float32Array(4*h.length);let i=0;for(let s=0;s<h.length;s+=1){const e=h[s].ot,r=h[s].ut;t[i]=0,t[i+1]=0,t[i+2]=Math.abs(r.x-e.x),t[i+3]=Math.abs(r.y-e.y),i+=4}this.iU=this.fE.Oz(t,!1,this.iU)}this.sU=this.fE.aN(u.getPattern())}else this.iU&&(this.fE.Zz(this.iU),this.iU=void 0),this.sU=void 0;if(p||r)if("triangulated"===m){const t=new Float32Array(h.length);let i=0;h.forEach((s=>{t[i]=s.ma,i+=1})),this.vU=this.fE.Oz(t,!0,this.vU)}else{const t=new Float32Array(2*h.length);let i=0;h.forEach((s=>{for(let e=i;e<i+2;e+=2)t[e]=s.ma,t[e+1]=s.ma;i+=2})),this.vU=this.fE.Oz(t,!1,this.vU)}if(f)if(a||p||s)if("triangulated"===m){const t=new Float32Array(4*h.length);let i=0;h.forEach((s=>{const e=s.AU||f.color;t[i]=e.r,t[i+1]=e.g,t[i+2]=e.b,t[i+3]=e.a,i+=4})),this.yU=this.fE.Oz(t,!1,this.yU)}else{const t=new Float32Array(8*h.length);let i=0;h.forEach((s=>{const e=s.AU||f.color;for(let s=i;s<i+8;s+=4)t[s]=e.r,t[s+1]=e.g,t[s+2]=e.b,t[s+3]=e.a;i+=8})),this.yU=this.fE.Oz(t,!1,this.yU)}else this.yU&&(this.fE.Zz(this.yU),this.yU=void 0);if(t&&!this.Qu){if(p)if("triangulated"===m){const t=new Float32Array(4*h.length);let i=0;h.forEach((s=>{var e,h,r,n;t[i+0]=(null===(e=s.ZN)||void 0===e?void 0:e.r)||0,t[i+1]=(null===(h=s.ZN)||void 0===h?void 0:h.g)||0,t[i+2]=(null===(r=s.ZN)||void 0===r?void 0:r.b)||0,t[i+3]=(null===(n=s.ZN)||void 0===n?void 0:n.a)||0,i+=4})),this.mU=this.fE.Oz(t,!0,this.mU)}else{const t=new Float32Array(8*h.length);let i=0;h.forEach((s=>{var e,h,r,n;for(let o=i;o<i+4;o+=4)t[i+0]=(null===(e=s.ZN)||void 0===e?void 0:e.r)||0,t[i+1]=(null===(h=s.ZN)||void 0===h?void 0:h.g)||0,t[i+2]=(null===(r=s.ZN)||void 0===r?void 0:r.b)||0,t[i+3]=(null===(n=s.ZN)||void 0===n?void 0:n.a)||0;i+=8})),this.mU=this.fE.Oz(t,!1,this.mU)}}else this.mU&&(this.fE.Zz(this.mU),this.mU=void 0);return A?this.sG=aS(this.ya||this.wl,this.ti,A.getPosition(),A.getExtent(),A.getShape(),this.fE.Mz()):g?this.eG=lS(this.ya||this.wl,this.ti,g.getAngle(!0),this.fE.Mz()):(this.sG=void 0,this.eG=void 0),this.$u(e),this.rU=!1,this.nU=!1,this.hU=!1,this.oU=!1,this.Aa.o=!1,this}gR(t){var i;const s=this.qG,e=this.vU,h=this.mU;if(!s||!e)return this;const r=this.tU;if(!r)return this;const{type:n,fillStyleSolid:o,fillStyleIndividual:a,fillStyleLinearGradient:l,fillStyleRadialGradient:u,lineStyleDashed:c}=r,d=1===t?null===(i=r.mousePicking)||void 0===i?void 0:i.shader:r.shader;return d?(this.fE.CE(d).Vz(d,((i,d,f,A)=>{if(this.ti instanceof Nn||this.ti instanceof cv?this.fE.Gz(i("uScale"),this.NE.Yz()).Gz(i("uDisp"),this.NE.jz()).Gz(A("uScaleStart_highpart"),this.NE.vN()).Gz(A("uScaleStart_lowpart"),this.NE.yN()):this.ti instanceof Gn&&this.fE.Gz(A("uScaleStart"),this.NE.MixedScaleXY.uScaleStart).Gz(A("uScaleStartLog"),this.NE.MixedScaleXY.uScaleStartLog).Gz(A("uScaleInterval"),this.NE.MixedScaleXY.uScaleInterval).Gz(A("uScaleIntervalLog"),this.NE.MixedScaleXY.uScaleIntervalLog).Gz(i("uViewportStart"),this.NE.MixedScaleXY.uViewportStart).Gz(i("uViewportSize"),this.NE.MixedScaleXY.uViewportSize),this.lU&&this.fE.Gz(A("uViewportSizePx"),[this.$s.Hi().x*this.fE.Mz(),this.$s.Hi().y*this.fE.Mz()]),void 0!==this.Zu&&this.fE.Gz(i("uMinSegmentPixelVector"),[this.Zu.x,this.Zu.y]),this.fE.jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0),1===t)if(this.Qu)this.fE.jR(i("uColor"),this.ZN);else{if(!h)return!1;"triangulated"===n?this.fE.Nz(h,1,{location:d("aColor"),size:4}):this.fE.MV(d("aColor"),h)}else if(o)this.fE.jR(i("uColor"),o.getColor());else if(a){if(!this.yU)return!1;this.fE.Nz(this.yU,"triangulated"===n?1:void 0,{location:d("aColor"),size:4})}else if(u){if(!this.sG)return!1;this.fE.XV(f,this.sG,u)}else if(l){if(!this.eG)return!1;this.fE.ZV(f,this.eG,l)}if(c){if(!this.iU||!this.sU)return!1;OS.ZG(this.fE,f,this.iU,d("aLengthSoFarA"),d("aLengthSoFarB"),2,0),this.fE.Gz(i("uStippleCount"),[this.$s.Hi().x/this.sU.cN,this.$s.Hi().y/this.sU.cN]).Wz(A("uStippleTextureWidthLimiter"),this.sU.uN/this.sU.cN).Wz(i("uStippleScale"),c.getPatternScale()).Uz(i("uStippleTexture"),this.sU.lN,0)}if("triangulated"===n){const{geometry:i,thickness:h}=r;OS.XG(this.ti.us(),this.fE,s,f,this.ti.us()?4:2,0),this.fE.Nz(e,1,{location:d("aIsHighlighted"),size:1}),OS.gR(this.zN,i,f,this.KG&&1!==t,1===t,h,this.eU.length)}else zS.XG(this.ti.us(),this.fE,s,f,this.ti.us()?4:2,0),this.fE._V(d("aIsHighlighted"),e),zS.JG(this.zN,this.eU.length);return!0})),this):this}UN(t){if(t===this.XN)return{};const i=this.eU.find((i=>i.XN===t));return!!i&&{collectionMember:i}}dispose(){return super.dispose(),this.tU=void 0,this.qG&&(this.fE.Zz(this.qG),this.qG=void 0),this.iU&&(this.fE.Zz(this.iU),this.iU=void 0),this.vU&&(this.fE.Zz(this.vU),this.vU=void 0),this.mU&&(this.fE.Zz(this.mU),this.mU=void 0),this.yU&&(this.fE.Zz(this.yU),this.yU=void 0),this.sU=void 0,this}vE(){return this}Xs(t){super.Xs(t);for(const i of this.eU)i.Xs(t);return this}ni(){return this.wl.max.x}ri(){return this.wl.min.x}ai(){return this.wl.max.y}oi(){return this.wl.min.y}tu(){return Fr(this.Wu)}iu(){return Fr(this.Wu)}}class GS{constructor(t,i){this.pU=!1,this.SU=!1,this.bU=!1,this.ti=t,this.xU=i,this.xU._a("DataPattern",(t=>{"ProgressiveX"!==t.pattern&&"RegressiveX"!==t.pattern||(this.pU="x"),"ProgressiveY"!==t.pattern&&"RegressiveY"!==t.pattern||(this.pU="y"),"RegressiveX"!==t.pattern&&"RegressiveY"!==t.pattern||(this.SU=!0),!0===t.regularProgressiveStep&&(this.bU=!0)}))}calculateUserDataPointsProgressiveRange(t){if(0===t.length)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:"x"===this.pU?t[0].x:t[0].y,end:"x"===this.pU?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.pU?"x"===this.pU?function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].x,t[0].x),h=Math.min(t[i-1].x,t[0].x);let r=t[0].y,n=t[0].y;for(let s=0;s<i;s+=1){const i=t[s];i.y>r&&(r=i.y),i.y<n&&(n=i.y)}return a(e(h,n),e(s,r))}return Vr}(t):function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].y,t[0].y),h=Math.min(t[i-1].y,t[0].y);let r=t[0].x,n=t[0].x;for(let s=0;s<i;s+=1){const i=t[s];i.x>r&&(r=i.x),i.x<n&&(n=i.x)}return a(e(n,h),e(r,s))}return Vr}(t):qr(t)}calculateAvgStepBetweenDataPoints(t,i,s){return Math.abs(t-i)/(s-1)}}const US=Math.min(1,1.5);class WS extends GS{constructor(t,i,s){super(t,i),this.MU=!1,this._U={enabled:!1,totalDataPointsAtTime:0},this.wU=[],this.ie=s,this.CU=t instanceof Nn?{type:"linear",scale:t}:t instanceof Gn?{type:"mixed",scale:t}:{type:"unknown"},this.xU._a("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.MU=!0)}))}kU(t,i=!1){if(this.MU||!this.pU||"linear"!==this.CU.type)return!1;!1===i&&this.TU&&(clearTimeout(this.TU),this.TU=void 0);const s="x"===this.pU?this.CU.scale.x.Eg:this.CU.scale.y.Eg;if(!s)throw new Error("CP helper has no information about Axis state.");const e=t.length;if(e<2)return!1;const h=t[0],r=t[e-1],n=this.calculateAvgStepBetweenDataPoints("x"===this.pU?h.x:h.y,"x"===this.pU?r.x:r.y,e),o=this.CU.scale,a=Math.abs("x"===this.pU?o.ks().x:o.ks().y),l=a/n,u=Math.floor(l*US),c=u*n,d=Ch.performance.now(),f=!(d-s.Hh<500)&&(s.Vh?d-s.Yh<1e3:d-s.Nh<2e3||s.Uh),A=e>2*this._U.totalDataPointsAtTime;if(f&&!A)return this.TU=setTimeout((()=>this.FU(t)),1e3),!1;const g=u>=10,v=this._U.enabled?this._U.columnWidthAxis/a<1.5:void 0,y=this._U.enabled&&u>this._U.dataPointsPerColumn?u/this._U.dataPointsPerColumn>=2:void 0;let m;!0===this._U.enabled?v?y&&(m={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}):m=g?{enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}:{enabled:!1,totalDataPointsAtTime:e}:g&&(m={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e});const p=!1===i;return m?(p&&(this._U=m),!0):(p&&(this._U={...this._U,totalDataPointsAtTime:e}),!1)}By(){this.IU=void 0,this.wU.length=0,this.TU&&(clearTimeout(this.TU),this.TU=void 0)}PU(t){if(0===t.length)return t;if(this.MU||!this.pU||"linear"!==this.CU.type||!this._U.enabled)return t;let i;i=this.wU.length>0?lr(this.wU,t,{canReturnB:!0}):t;const s=i.length,e=[];let h,r,n=void 0===this.IU,o=-1,a=-1,l=0,u=0;if("x"!==this.pU||this.SU)if("x"===this.pU&&this.SU){const t=this._U.columnWidthAxis;let c=this.IU?this.IU.x:i[0].x,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.x>=d?((!h||s.y>h.y)&&(h=s,o=f),(!r||s.y<r.y)&&(r=s,a=f),u=f):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,d=c-t,h=s,o=f,r=s,a=f,l=f,u=f)}}else if("y"!==this.pU||this.SU){if("y"===this.pU&&this.SU){const t=this._U.columnWidthAxis;let c=this.IU?this.IU.y:i[0].y,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.y>=d?((!h||s.x>h.x)&&(h=s,o=f),(!r||s.x<r.x)&&(r=s,a=f),u=f):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,d=c-t,h=s,o=f,r=s,a=f,l=f,u=f)}}}else{const t=this._U.columnWidthAxis;let c=this.IU?this.IU.y:i[0].y,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.y<=d?((!h||s.x>h.x)&&(h=s,o=f),(!r||s.x<r.x)&&(r=s,a=f),u=f):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,d=c+t,h=s,o=f,r=s,a=f,l=f,u=f)}}else{const t=this._U.columnWidthAxis;let c=this.IU?this.IU.x:i[0].x,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.x<=d?((!h||s.y>h.y)&&(h=s,o=f),(!r||s.y<r.y)&&(r=s,a=f),u=f):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,d=c+t,h=s,o=f,r=s,a=f,l=f,u=f)}}if(h||r){const t=i.slice(l,u+1);this.wU=t}else this.wU.length=0;const c=e.length;return c>0&&(this.IU=e[c-1]),e}DU(t){if(this.pU&&"linear"===this.CU.type){const i="x"===this.pU?this.CU.scale.x.Eg:this.CU.scale.y.Eg;if(!i)throw new Error("CP helper has no information about Axis state.");if(i.Rh===Yo.progressive||i.Rh===Yo.regressive){const i=Math.abs("x"===this.pU?this.CU.scale.x.getInnerInterval():this.CU.scale.y.getInnerInterval());if(this._U.enabled)return 2*i/this._U.columnWidthAxis;const s=t.length,e=t[0],h=t[s-1];return i/this.calculateAvgStepBetweenDataPoints("x"===this.pU?e.x:e.y,"x"===this.pU?h.x:h.y,s)}}}BU(t,i,s){if(!this.pU)return i;const e=s.length;let h=Ha(s,t.min,this.pU,this.SU,0,e-1);void 0===h&&(h=this.SU?e-1:0);let r=Ha(s,t.max,this.pU,this.SU,0,e-1);return void 0===r&&(r=this.SU?0:e-1),1+Math.abs(r-h)}LU(){this.TU&&(clearTimeout(this.TU),this.TU=void 0)}FU(t){this.kU(t,!0)&&this.ie()}}class YS extends GS{renderVisibleOnly(t,i){const s=this.ti.x.getInnerStart(),e=this.ti.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.ti.y.getInnerStart(),o=this.ti.y.getInnerEnd(),a=Math.min(n,o),l=Math.max(n,o);t.forEach(((t,s)=>{t.existingCoordinatesCount<=1||t.boundaries.max.x<h||t.boundaries.min.x>r||t.boundaries.max.y<a||t.boundaries.min.y>l||i(t)}))}}class HS{constructor(t,i,s){this.RU=i,this.EU=s,this.OU=t,this.zU=[]}VU(t,i,s,e){const h=t.length;if(0===h)return;let r=t,n=h,o=this.OU[this.OU.length-1];do{const t=this.OU.length;let h;o||(o=this.NU(i,n)),o&&0==o.allocatedCoordinatesCount-o.existingCoordinatesCount&&(o=void 0);let a=0;if(this.EU&&t>0&&(void 0===o||0===o.existingCoordinatesCount)){const i=this.OU[t-1].lastDataPoint;i?(r.splice(0,0,i),a=1,n+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(o)h=Math.min(n,o.allocatedCoordinatesCount-o.existingCoordinatesCount),e(o,r.slice(0,h),h,a);else{const t=Math.ceil(i)+a;h=Math.min(t,n);const e={...s(t,r.slice(0,h),h,a),isDropped:!1};this.OU.push(e)}h>0&&(n>h?(r=r.slice(h),n=r.length):(r=[],n=0))}while(n>0);this.GU()}UU(t){const i=t,s=this.OU.indexOf(i);s>=0&&this.OU.splice(s,1),i.droppedTimestamp=Ch.performance.now(),this.zU.push(i)}WU(){this.OU.slice().forEach((t=>this.UU(t)))}YU(){this.OU.forEach((t=>this.RU(t))),this.zU.forEach((t=>this.RU(t))),this.OU.length=0,this.zU.length=0}NU(t,i){const s=2*t/3,e=4*t/3,h=this.zU.findIndex((t=>t.allocatedCoordinatesCount>=s&&t.allocatedCoordinatesCount<=e));if(h>=0){const t=this.zU[h];return this.zU.splice(h,1),this.OU.push(t),t}}GU(){if(this.zU.length>5){const t=Ch.performance.now();for(let i=0;i<this.zU.length-5;i+=1){const s=this.zU[i];(void 0===s.droppedTimestamp||t-s.droppedTimestamp>=1e4)&&(this.RU(s),this.zU.splice(i,1),i-=1)}}}}class jS extends GS{HU(t,i){if(!i||"object"!=typeof i)return 0;const s=this.ti.x.getInnerStart(),e=this.ti.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.ti.y.getInnerStart(),o=this.ti.y.getInnerEnd(),a=Math.min(n,o),l=Math.max(n,o);if("maxDataPointCount"in i)return this.jU(t,i.maxDataPointCount,h,r,a,l);if("minDataPointCount"in i)return this.$U(t,i.minDataPointCount,h,r,a,l);if("progressiveDataCleaningThreshold"in i)return this.XU(t,i.progressiveDataCleaningThreshold,h,r,a,l);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(i)}`)}jU(t,i,s,e,h,r){if(void 0===i||i<=0)return 0;const n=t.reduce(((t,i)=>t+i.existingDataPointsCount),0);if(n<=i)return 0;let o=0,a=n;for(let s=0;s<t.length;s+=1){const e=t[s];a>i&&(o+=1,a-=e.existingDataPointsCount)}return o}XU(t,i,s,e,h,r){if(void 0===i||!this.pU)return 0;let n=0;for(let o=0;o<t.length;o+=1){const a=t[o],l=this.SU?"x"===this.pU?a.boundaries.min.x>e:a.boundaries.min.y>r:"x"===this.pU?a.boundaries.max.x<s:a.boundaries.max.y<h;if(!((this.SU?"x"===this.pU?a.boundaries.min.x>i:a.boundaries.min.y>i:"x"===this.pU?a.boundaries.max.x<i:a.boundaries.max.y<i)&&l&&a.existingCoordinatesCount>2))break;n+=1}return n}$U(t,i,s,e,h,r){if(void 0===i||0===i)return 0;let n=0,o=0;for(let a=t.length-1;a>=0;a-=1){const l=t[a];if(o>i)if(this.pU){if(this.SU?"x"===this.pU?l.boundaries.min.x>e:l.boundaries.min.y>r:"x"===this.pU?l.boundaries.max.x<s:l.boundaries.max.y<h){n=1+a;break}}else l.boundaries.max.x<s||l.boundaries.min.x>e||l.boundaries.max.y<h||l.boundaries.min.y>r?n+=1:n=0;o+=l.existingDataPointsCount}return n}ZU(t,i){const s=t.reduce(((t,i)=>sn(t,i.boundaries)),Vr);if(i&&"progressiveDataCleaningThreshold"in i&&i.progressiveDataCleaningThreshold){const t=i.progressiveDataCleaningThreshold;"x"!==this.pU||this.SU?"x"===this.pU&&this.SU?s.max.x=Math.min(s.max.x,t):"y"!==this.pU||this.SU?"y"===this.pU&&this.SU&&(s.max.y=Math.min(s.max.y,t)):s.min.y=Math.max(s.min.y,t):s.min.x=Math.max(s.min.x,t)}return s}}class $S extends xl{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h),this.NE=new SS,this.I_=[],this.QU=new YS(this.ti,this),this.JU=new WS(this.ti,this,(()=>this.$s.ie())),this.KU=new HS(this.I_,(t=>{t.coordsBuffer&&this.fE.Zz(t.coordsBuffer),t.iU&&this.fE.Zz(t.iU)}),!0),this.qU=new jS(this.ti,this),this.tW=0,this.iW=0,this.sW=!1,this.$N=$m({lineStyleSolid:()=>eo(this.Wu)&&this.Wu,lineStyleDashed:()=>uu(this.Wu)&&this.Wu,strokeFillSolid:()=>{const t=this.Wu.getFillStyle();return Oe(t)&&t},strokeFillLinearGradient:()=>{const t=this.Wu.getFillStyle();return nh(t)&&t},strokeFillRadialGradient:()=>{const t=this.Wu.getFillStyle();return eh(t)&&t},strokeFillPaletted:()=>{const t=this.Wu.getFillStyle();return Ge(t)&&t}}),this.VN=i,this.XN=r,this.ZN=n,this.Co=o,this.tU={type:"none"},this.fE=t.NN(),this.zN=t,this.KG=this.fE.RV;const a=this.ti.us(),l=!0===(null==o?void 0:o.individualLookupValuesEnabled);let u,c,d,f=0;a||(u=f,f+=2),a&&(c=f,f+=4),l&&(d=f,f+=1);const A=((t,i)=>i?(i,s)=>((t,i)=>{if(!i){const i=t.length,s=new Float32Array(3*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=void 0!==i.value?i.value:0,h+=3}return s}const s=t.length,e=new Float32Array(5*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,e[h+4]=void 0!==s.value?s.value:0,h+=5}return e})(i,t):(i,s)=>ir(i,t))(a,l);this.eW={individualLookupValuesEnabled:l,attributesPerVertex:f,attributeOffsetCoordinateLowPrecision:u,attributeOffsetCoordinateHighPrecision:c,attributeOffsetLookUpValue:d,prepareRenderData:(t,i)=>A(t,this.Wu.getFillStyle())}}hW(t,i,s){const e=new Float32Array(2*i);let h=0,r=s||t[0];for(let s=0;s<i;s+=1){const i=t[s];this.tW+=Math.abs(r.x-i.x),this.iW+=Math.abs(r.y-i.y),e[h]=this.tW,e[h+1]=this.iW,h+=2,r=i}return e}de(){const t=this.Pl,i=this.Wu,s=this.Na(),e=this.kl,h=e.length,r=h>0,n=this.Aa._(),o=this.Aa.o,a=this.$N.lineStyleSolid(s),l=this.$N.lineStyleDashed(s),u=a||l,c=u&&u.getThickness(),d=this.$N.strokeFillSolid(s),f=this.$N.strokeFillLinearGradient(s),A=this.$N.strokeFillRadialGradient(s),g=this.$N.strokeFillPaletted(s),v=d||f||A||g,y=this.eW.individualLookupValuesEnabled;if(l&&this.ti instanceof Gn)return Ch.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;r&&(this.Ju=lr(this.Ju,e,{canReturnB:!0}),this.Cl+=h);let m=this.Ku.o;const p=this.qU.HU(this.I_,this.Ku._());if(p>0){let t=0;for(let i=0;i<p;i+=1){const i=this.I_[0];t+=i.existingDataPointsCount,i.existingDataPointsCount=0,i.existingCoordinatesCount=0,i.jointPointsCount=0,i.boundaries=Vr,i.lastDataPoint=void 0,this.KU.UU(i)}this.Ju=this.Ju.slice(t),this.Cl=this.Ju.length,m=!0}let S=e,b=!1;(this.JU.kU(this.Ju)||t)&&(b=!0),l&&!this.sW?(b=!0,this.sW=!0,this.KU.YU()):!l&&this.sW&&(this.I_.forEach((t=>{t.iU&&(this.fE.Zz(t.iU),t.iU=void 0)})),this.sW=!1),b&&(this.JU.By(),this.I_.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.jointPointsCount=0,t.boundaries=Vr,t.lastDataPoint=void 0})),this.KU.WU(),S=this.Ju,this.tW=0,this.iW=0);const x=this.JU.PU(S),M=x.length;if(M>0){let t=this.JU.DU(this.Ju)||(this._a("ApplicationType",(t=>"InternalUI"===t.type))?this.Cl:1e5);M/t>10&&(t=M/10),this.KU.VU(x,t,((t,i,s,e)=>{const h=this.QU.calculateUserDataPointsBoundaries(i),r=this.JU.BU(h,s,this.Ju)-e;return this.rW=i[s-1],{allocatedCoordinatesCount:t,existingDataPointsCount:r,existingCoordinatesCount:s,jointPointsCount:e,boundaries:h,coordsBuffer:this.fE.AV(t*this.eW.attributesPerVertex,this.eW.prepareRenderData(i,s)),lastDataPoint:i[s-1],iU:this.sW?this.fE.AV(2*t,this.hW(i,s,this.rW)):void 0}}),((t,i,s,e)=>{const h=sn(t.boundaries,this.QU.calculateUserDataPointsBoundaries(i)),r=this.JU.BU(h,t.existingCoordinatesCount+s,this.Ju)-(t.jointPointsCount+e);this.fE.gV(t.coordsBuffer,t.existingCoordinatesCount*this.eW.attributesPerVertex,this.eW.prepareRenderData(i,s)),this.sW&&t.iU&&this.fE.gV(t.iU,2*t.existingCoordinatesCount,this.hW(i,s,this.rW)),this.rW=i[s-1],t.jointPointsCount+=e,t.lastDataPoint=i[s-1],t.existingDataPointsCount=r,t.existingCoordinatesCount+=s,t.boundaries=h}))}if(m&&(this.wl=this.qU.ZU(this.I_,this.Ku._())),this.NE.Xz(this.ti),A?this.cG=aS(this.ya||this.wl,this.ti,A.getPosition(),A.getExtent(),A.getShape(),this.fE.Mz()):f?this.dG=lS(this.ya||this.wl,this.ti,f.getAngle(!0),this.fE.Mz()):(this.cG=void 0,this.dG=void 0),s||o){if(g&&"value"===g.getLookUpProperty()&&!y){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Ch.alert(t),new Error(t)}if(v&&u&&!1!==c){const t=-1===c?"primitive":"triangulated",i=f?["gradient",f]:A?["gradient",A]:g?["lookup",g.getLookUpProperty(),g.lut]:"uniform";this.tU="primitive"===t?{type:t,shader:this.fE.VO(Pp["2D"],Pp.Color({dataType:i}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0}),l&&Pp.StippleTexture),mousePickingShader:n?this.fE.VO(Pp["2D"],Pp.MousePicking,Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0}),l&&Pp.StippleTexture):void 0,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:A,fillStylePaletted:g}:"triangulated"===t?{type:t,shader:this.fE.VO(Pp["2D"],Pp.Color({dataType:i}),Pp.LineInstanced2D({axisWorldTranslation:jm(this.ti),normalSource:void 0}),this.KG?Pp.AliasedEdge:void 0,l&&Pp.StippleTextureInstanced),mousePickingShader:n?this.fE.VO(Pp["2D"],Pp.MousePicking,Pp.LineInstanced2D({axisWorldTranslation:jm(this.ti),normalSource:void 0}),l&&Pp.StippleTextureInstanced):void 0,geometry:ES(this.fE,c),thickness:c,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:A,fillStylePaletted:g}:{type:"none"}}else this.tU={type:"none"}}return this.sU=l?this.fE.aN(l.getPattern()):void 0,this.$u(i),this.Pl=!1,this.kl=[],this.Aa.o=!1,this.Ku.o=!1,this}gR(t){const i=this.fE.gl,s=this.tU;if(!s||"none"===s.type)return this;const e=1===t?s.mousePickingShader:s.shader;if(!e)return this;const{lineStyleDashed:h,fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a}=s;return this.fE.CE(e).Vz(e,((e,l,u,c)=>{let d=!1;if(this.fE.Wz(e("uIsHighlighted"),1===t||2===t?0:this.ma).jR(e("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(e("uRenderEffectMask"),2===t?1:0),this.ti instanceof Nn||this.ti instanceof cv?this.fE.Gz(e("uScale"),this.NE.Yz()).Gz(e("uDisp"),this.NE.jz()).Gz(c("uScaleStart_highpart"),this.NE.vN()).Gz(c("uScaleStart_lowpart"),this.NE.yN()):this.ti instanceof Gn&&this.fE.Gz(c("uScaleStart"),this.NE.MixedScaleXY.uScaleStart).Gz(c("uScaleStartLog"),this.NE.MixedScaleXY.uScaleStartLog).Gz(c("uScaleInterval"),this.NE.MixedScaleXY.uScaleInterval).Gz(c("uScaleIntervalLog"),this.NE.MixedScaleXY.uScaleIntervalLog).Gz(e("uViewportStart"),this.NE.MixedScaleXY.uViewportStart).Gz(e("uViewportSize"),this.NE.MixedScaleXY.uViewportSize),1===t)this.fE.jR(e("uColor"),this.ZN);else if(r)this.fE.jR(e("uColor"),r.getColor());else if(o){if(!this.cG)return!1;this.fE.XV(u,this.cG,o)}else if(n){if(!this.dG)return!1;this.fE.ZV(u,this.dG,n)}else if(a){const t=Xm(a,this,void 0);if(!t&&a.lut.percentageValues)return!1;this.fE.dN(u,a.lut,t)}return this.QU.renderVisibleOnly(this.I_,(r=>{const{coordsBuffer:n}=r;if(!n)return;i.bindBuffer(i.ARRAY_BUFFER,n);const o="triangulated"===s.type?OS.jG:zS.jG;if(this.ti.us()||void 0===this.eW.attributeOffsetCoordinateLowPrecision?this.ti.us()&&void 0!==this.eW.attributeOffsetCoordinateHighPrecision&&o(!0,this.fE,n,u,this.eW.attributesPerVertex,this.eW.attributeOffsetCoordinateHighPrecision):o(!1,this.fE,n,u,this.eW.attributesPerVertex,this.eW.attributeOffsetCoordinateLowPrecision),h){if(!r.iU||!this.sU)return;"triangulated"===s.type?OS.$G(this.fE,u,r.iU,l("aLengthSoFarA"),l("aLengthSoFarB"),2,0):zS.$G(this.fE,u,r.iU,l("aLengthSoFar"),2,0),this.fE.Gz(e("uStippleCount"),[this.$s.Hi().x/this.sU.cN,this.$s.Hi().y/this.sU.cN]).Wz(c("uStippleTextureWidthLimiter"),this.sU.uN/this.sU.cN).Wz(e("uStippleScale"),h.getPatternScale()).Uz(e("uStippleTexture"),this.sU.lN,1)}if(a&&"value"===a.lookUpProperty&&void 0!==this.eW.attributeOffsetLookUpValue&&1!==t)if("triangulated"===s.type){const t=l("aLookupValueA");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.eW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.eW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.fE.bV(t,1),i.enableVertexAttribArray(t);const s=l("aLookupValueB");i.vertexAttribPointer(s,1,i.FLOAT,!1,this.eW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.eW.attributeOffsetLookUpValue+this.eW.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.fE.bV(s,1),i.enableVertexAttribArray(s)}else{const t=l("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.eW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.eW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),i.enableVertexAttribArray(t)}if("triangulated"===s.type){const{thickness:i}=s;OS.gR(this.zN,s.geometry,u,this.KG&&1!==t,1===t,i,r.existingCoordinatesCount-1)}else zS.QG(this.zN,r.existingCoordinatesCount);d=!0})),i.bindBuffer(i.ARRAY_BUFFER,null),d})),this}UN(t){return this.XN===t&&{}}Gl(t,i){return Array.isArray(t)||(t=[t]),this.kl=lr(this.kl,t,{canReturnB:!0}),this.wl=sn(this.wl,i||i||this.QU.calculateUserDataPointsBoundaries(t)),this}_i(){return super._i(),this.tW=0,this.iW=0,this.rW=void 0,this}dispose(){return super.dispose(),this.KU.YU(),this.JU.LU(),this.tU={type:"none"},this.sU=void 0,this}vE(){return this}MM(t){this.Wl()>0&&this.de();const i=this.Rl(),s=Ga(i,t,this.Il,this.lu,this.uu,this.ti,this.engine.ti,this.wl,this.QU.pU,this.QU.SU);return void 0!==s?i[s]:void 0}Ow(t){this.Wl()>0&&this.de();const i=this.Rl(),s=i.length;if(0===s)return;const e=this.lu?1:0,h=s-(this.uu?2:1);if(this.Il===Va.Nearest){let e,h,r=Or;for(let n=0;n<s;n+=1){const s=Ah(i[n],this.ti,this.$s.ti);if(void 0!==h){const i=$r(h,s,t),n=(i.x-t.x)**2+(i.y-t.y)**2;n<r&&(r=n,e=i)}h=s}return void 0!==e?Ah(e,this.$s.ti,this.ti):void 0}if("x"===this.QU.pU&&this.Il===Va.NearestX||"y"===this.QU.pU&&this.Il===Va.NearestY){const s=ja(i,Ah(t,this.$s.ti,this.ti),this.QU.pU,this.QU.SU,e,h);return s?Jr(i[s.a],i[s.b],s.lerpAmount):void 0}return this.MM(t)}ni(){return this.wl.max.x}ri(){return this.wl.min.x}ai(){return this.wl.max.y}oi(){return this.wl.min.y}tu(){return Fr(this.Wu)}iu(){return Fr(this.Wu)}}class XS extends uS{constructor(t,i,s,h){super(t),this.HG=s,this.nW=i,this.oW=ir(i,!1),this.aW=i.length,this.eE=t.Oz(this.oW);const r=qr(this.nW);this.zt=e(r.max.x-r.min.x,r.max.y-r.min.y),this.lW=h}uW(t){return t>1}Bm(t,i,s,e,h){return"object"==typeof e?i?this.fE._V(t.attribute("aOffsetScale"),i,1).Gz(t.uniform(gp),[e.width,e.height]):this.fE.Wz(t.uniform("uOffsetScale"),e.scale).Gz(t.uniform(gp),[e.width,e.height]):h?i?this.fE._V(t.attribute("aOffsetPixels"),i,1):this.fE.Wz(t.uniform("uOffsetPixels"),e):this.fE.Wz(t.uniform("uPointSize"),e),h?this.fE.Nz(this.eE,0,{location:t.attribute("aInstanceGeo"),size:2}).TV(this.HG,0,this.aW,s):this.fE.Bm(this.fE.gl.POINTS,s),this}rz(){this.fE.Zz(this.eE)}}const ZS=(t,i=0)=>{const s=[e(-.5,-.5),e(.5,-.5),e(.5,.5),e(-.5,.5)];return new XS(t,s,t.gl.TRIANGLE_FAN,i)},QS=(t,i=0)=>{const s=.05,h=[e(-.5,-.05),e(.5,-.05),e(.5,s),e(.5,s),e(-.5,s),e(-.5,-.05),e(-.05,-.5),e(s,-.5),e(s,.5),e(s,.5),e(-.05,.5),e(-.05,-.5)];return new XS(t,h,t.gl.TRIANGLES,i)},JS=(i,s,h)=>{if(fu(i))return JS(t.PointShape.Square,s,h);let r=s.sV.KO.get(i);if(i===t.PointShape.Circle){const t=h<=3?4:h<=5?8:h<=10?16:24;return r=s.sV.qO.get(t)||((t,i,s=0)=>{const h=function(t=25){return Dv(e(0,0),0,360,.5,.5,t)[0]}(i);return new XS(t,h,t.gl.TRIANGLE_FAN,s)})(s,t),s.sV.qO.set(t,r),r}if(!r){switch(i){case t.PointShape.Triangle:r=((t,i=0)=>{const s=function(){const t=[],i=2/1.73205080757;return t.push(e(-i/2,.3333333333333333)),t.push(e(0,-.6666666666666666)),t.push(e(i/2,.3333333333333333)),t}();return new XS(t,s,t.gl.TRIANGLES,i)})(s);break;case t.PointShape.Square:r=ZS(s);break;case t.PointShape.Plus:r=QS(s);break;case t.PointShape.Cross:r=QS(s,45);break;case t.PointShape.Diamond:r=ZS(s,45);break;case t.PointShape.Arrow:r=((t,i=0)=>{const s=.05,h=[e(-.05,-.5),e(s,-.5),e(s,.45),e(s,.45),e(-.05,.45),e(-.05,-.5),e(-.5,0),e(-.4,0),e(0,.4),e(0,.4),e(0,.5),e(-.5,0),e(.5,0),e(.4,0),e(0,.4),e(0,.4),e(0,.5),e(.5,0)];return new XS(t,h,t.gl.TRIANGLES,i)})(s);break;case t.PointShape.Star:r=((t,i=0)=>new XS(t,[{x:0,y:0},{x:0,y:.5},{x:.1,y:.1},{x:.5,y:.1},{x:.2,y:-.1},{x:.3,y:-.5},{x:0,y:-.25},{x:-.3,y:-.5},{x:-.2,y:-.1},{x:-.5,y:.1},{x:-.1,y:.1},{x:0,y:.5}],t.gl.TRIANGLE_FAN,i))(s);break;case t.PointShape.Minus:r=((t,i=0)=>{const s=.05,h=[e(-.5,-.05),e(.5,-.05),e(.5,s),e(.5,s),e(-.5,s),e(-.5,-.05)];return new XS(t,h,t.gl.TRIANGLES,i)})(s);break;default:return Cr(0,"LightningChart JS unidentified point shape")}s.sV.KO.set(i,r)}return r};class KS extends ol{constructor(t,i,s,e,r,n,o){super(t,i,s,e,r),this.NE=new SS,this.HN=a(h(zr,zr),h(Or,Or)),this.$N=$m({pointStyleSolid:()=>Oe(this.sh)&&this.sh,pointStyleRadialGradient:()=>eh(this.sh)&&this.sh,pointStyleLinearGradient:()=>nh(this.sh)&&this.sh,pointStylePaletted:()=>Ge(this.sh)&&this.sh,pointStyleIndividual:()=>Ve(this.sh)&&this.sh}),this.zN=t,this.VN=i,this.XN=n,this.ZN=o,this.fE=t.NN()}de(){var t;const i=this.Aa._(),s=this.Aa.o,e=this.kl,h=e.length,r=h>0,n=this.bl._(),o=this.sh,a=this.size._(),l=this.bl.o||this.Za.o,u=this.ti.ws(),c=this.size.o||this.bl.o,d=this.Pl||e&&e.length>0,f=u||c,A=this.Ra(),g=this.$N.pointStyleSolid(A),v=this.$N.pointStyleRadialGradient(A),y=this.$N.pointStyleLinearGradient(A),m=this.$N.pointStylePaletted(A),p=this.$N.pointStyleIndividual(A),S=g||v||y||m||p;if(r&&(this.Sl=lr(this.Sl,e,{canReturnB:!0}),this.Cl+=h),r||this.Pl){this.wl=this.Fl?sn(this.wl,this.Fl):sn(this.wl,qr(this.Sl));const t=ir(this.Sl,this.ti.us());this.cW=this.Cl,this.dW=this.fE.Oz(t,!1,this.dW)}this.NE.Xz(this.ti),o!==De?f&&(this.fW&&(this.fW=void 0),a>1||this.xl._()?a<=1&&!this.xl._()?this.HG=this.fE.gl.POINTS:(this.fW=JS(n,this.fE,this.xl._()?25:a),this.HG=this.fW.HG):this.HG=this.fE.gl.POINTS):this.fW&&(this.fW=void 0);const b=(null===(t=this.fW)||void 0===t?void 0:t.lW)||0,x=this.Za._()+b;if(c||A||s||l){const t=this.xl._()?"attribute":"uniform",s=a<=1&&Pp.PointSize(t),e=Pp.VertexLocation({offset:a>1?{dataType:t,sizeUnit:"px",symmetric:!0,rotation:(this.Ml._()||x%360!=0)&&{dataType:this.Ml._()?"attribute":"uniform"}}:void 0,axisWorldTranslation:jm(this.ti),normalSource:void 0});this.WE=S?this.fE.VO(Pp["2D"],s,e,g?Pp.Color({dataType:"uniform"}):p?Pp.Color({dataType:"attribute"}):m?Pp.Color({dataType:["lookup",m.getLookUpProperty(),m.lut]}):v?Pp.Color({dataType:["gradient",v]}):y?Pp.Color({dataType:["gradient",y]}):void 0):void 0,this.AG=i&&S?this.fE.VO(Pp["2D"],s,e,Pp.MousePicking):void 0}if(d||A){const t=this.Sl.length;if(Ve(o)&&this.cW&&this.cW>0){const i=o.getFallbackColor(),s=new Float32Array(4*t);for(let e=0;e<t;e+=1){const t=this.Sl[e];t.color?(s[4*e+0]=t.color.r,s[4*e+1]=t.color.g,s[4*e+2]=t.color.b,s[4*e+3]=t.color.a):(s[4*e+0]=i.r,s[4*e+1]=i.g,s[4*e+2]=i.b,s[4*e+3]=i.a)}this.AW=this.fE.Oz(s,!0,this.AW)}else this.AW&&this.fE.Zz(this.AW),this.AW=void 0;if(this.xl._()&&this.cW&&this.cW>0&&a>1){const i=new Float32Array(t);for(let s=0;s<t;s+=1){const t=this.Sl[s];t.size?i[s]=t.size:i[s]=a}this.gW=this.fE.Oz(i,!0,this.gW)}else this.gW&&(this.fE.Zz(this.gW),this.gW=void 0);if(this.Ml._()&&this.cW&&this.cW>0&&a>1){const i=new Float32Array(2*t),s=pn(x),e=Math.sin(s),h=Math.cos(s);for(let s=0;s<t;s+=1){const t=this.Sl[s];if(t.rotation){const e=pn(t.rotation+b);i[2*s+0]=Math.sin(e),i[2*s+1]=Math.cos(e)}else i[2*s+0]=e,i[2*s+1]=h}this.vW=this.fE.Oz(i,!0,this.vW)}else this.vW&&(this.fE.Zz(this.vW),this.vW=void 0);if(this._l._()&&this.cW&&this.cW>0){const i=new Float32Array(t);for(let s=0;s<t;s+=1){const t=this.Sl[s];"value"in t&&void 0!==t.value&&null!==t.value?i[s]=t.value:i[s]=yh}this.yt=this.fE.Oz(i,!0,this.yt)}else this.yt&&(this.fE.Zz(this.yt),this.yt=void 0);this.Va(this.sh)}if(eh(o)?this.sG=aS(Ka(this.ya||this.wl,{x:this.tu(),y:this.iu()},this.ti),this.ti,o.getPosition(),o.getExtent(),o.getShape(),this.fE.Mz()):nh(o)?this.eG=lS(Ka(this.ya||this.wl,{x:this.tu(),y:this.iu()},this.ti),this.ti,o.getAngle(!0),this.fE.Mz()):(this.sG=void 0,this.eG=void 0),d&&(this.wl&&d&&(this.HN=Ka(this.wl,{x:a,y:a},this.ti)),this.kl=[],this.Tl=0,this.Fl=Vr),void 0===this.Dl&&m&&"value"===m.lookUpProperty&&m.lut.percentageValues){let t=zr,i=Or;for(let s=0;s<this.Sl.length;s+=1){const e=this.Sl[s];void 0!==e.value&&e.value<i&&(i=e.value),void 0!==e.value&&e.value>t&&(t=e.value)}this.Dl={min:i,max:t}}return this.Ea=o,this.bl.o=!1,this.size.o=!1,this.Za.o=!1,this.Aa.o=!1,this.Pl=!1,this}gR(t){const i=1===t?this.AG:this.WE,s=this.dW,e=this.cW;return i&&s&&e&&(this.fE.CE(i),this.fE.Vz(i,((i,h,r,n)=>{var o;if(this.ti instanceof Nn||this.ti instanceof cv?this.fE.Gz(i("uScale"),this.NE.Yz()).Gz(i("uDisp"),this.NE.jz()).Gz(n("uScaleStart_highpart"),this.NE.vN()).Gz(n("uScaleStart_lowpart"),this.NE.yN()):this.ti instanceof Gn&&this.fE.Gz(n("uScaleStart"),this.NE.MixedScaleXY.uScaleStart).Gz(n("uScaleStartLog"),this.NE.MixedScaleXY.uScaleStartLog).Gz(n("uScaleInterval"),this.NE.MixedScaleXY.uScaleInterval).Gz(n("uScaleIntervalLog"),this.NE.MixedScaleXY.uScaleIntervalLog).Gz(i("uViewportStart"),this.NE.MixedScaleXY.uViewportStart).Gz(i("uViewportSize"),this.NE.MixedScaleXY.uViewportSize),this.fE.KV(r,s,this.ti.us(),this.fW?1:void 0).Wz(i("uIsHighlighted"),1===t||2===t?0:this.ma).jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0).Wz(n("uDevicePixelRatio"),this.fE.Mz()),this.fW){const t=h("aInstanceGeo");this.fE.pV(t,this.fW.eE).bV(t,0)}if(1===t)this.fE.jR(i("uColor"),this.ZN);else if(Oe(this.sh))this.fE.jR(i("uColor"),this.sh.getColor());else if(Ve(this.sh)&&this.AW){const t=h("aColor");this.fE.MV(t,this.AW),this.HG!==this.fE.gl.POINTS&&this.fE.bV(t,1)}else if(Ge(this.sh)){if("value"===this.sh.getLookUpProperty()&&this.yt){const t=h("aLookupValue");this.fE._V(t,this.yt),this.HG!==this.fE.gl.POINTS&&this.fE.bV(t,1)}const t=Xm(this.sh,this,this.Dl);if(!t&&this.sh.lut.percentageValues)return!1;this.fE.dN(r,this.sh.lut,t)}else if(eh(this.sh)){if(!this.sG)return!1;this.fE.XV(r,this.sG,this.sh)}else if(nh(this.sh)){if(!this.eG)return!1;this.fE.ZV(r,this.eG,this.sh)}if(this.gW&&this.HG!==this.fE.gl.POINTS){const t=h("aOffsetPixels");this.fE._V(t,this.gW),this.HG!==this.fE.gl.POINTS&&this.fE.bV(t,1)}else if(this.HG!==this.fE.gl.POINTS){const t=i("uOffsetPixels");this.fE.Wz(t,this.size._())}const a=((null===(o=this.fW)||void 0===o?void 0:o.lW)||0)+this.Za._();if(this.vW&&this.HG!==this.fE.gl.POINTS){const t=h("aRot");this.fE.pV(t,this.vW),this.HG!==this.fE.gl.POINTS&&this.fE.bV(t,1)}else if(this.HG!==this.fE.gl.POINTS&&a%360!=0){const t=pn(a),s=Math.sin(t),e=Math.cos(t);this.fE.Gz(i("uRot"),[s,e])}if(this.HG===this.fE.gl.POINTS)this.fE.Wz(i("uPointSize"),this.size._());else{const t={x:2/this.$s.Hi().x,y:2/this.$s.Hi().y};this.fE.Gz(i("uRatioPxClip"),[t.x,t.y])}let l=!1;return this.HG===this.fE.gl.POINTS?(this.fE.Bm(this.HG,e),l=!0):this.fW&&(this.fE.TV(this.HG,0,this.fW.aW,e),l=!0),l}))),this}UN(t){return this.XN===t&&{}}kd(t){this.Wl()>0&&this.de();const i=this.Rl(),s=Ga(i,t,this.Il,!1,!1,this.ti,this.$s.ti,this.wl,void 0,void 0);return void 0!==s?i[s]:void 0}ah(t){return super.ah(t)}ni(){return this.wl.max.x}ri(){return this.wl.min.x}ai(){return this.wl.max.y}oi(){return this.wl.min.y}tu(){return this.xl._()?25:this.size._()}iu(){return this.xl._()?25:this.size._()}vE(){return this.dW&&(this.fE.Zz(this.dW),this.dW=void 0),this.fW&&(this.fW=void 0),this.AW&&(this.fE.Zz(this.AW),this.AW=void 0),this.vW&&(this.fE.Zz(this.vW),this.vW=void 0),this.yt&&(this.fE.Zz(this.yt),this.yt=void 0),this}}var qS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},tb={exports:{}};function ib(t,i,s){s=s||2;var e,h,r,n,o,a,l,u=i&&i.length,c=u?i[0]*s:t.length,d=sb(t,0,c,s,!0),f=[];if(!d||d.next===d.prev)return f;if(u&&(d=function(t,i,s,e){var h,r,n,o=[];for(h=0,r=i.length;h<r;h++)(n=sb(t,i[h]*e,h<r-1?i[h+1]*e:t.length,e,!1))===n.next&&(n.steiner=!0),o.push(fb(n));for(o.sort(lb),h=0;h<o.length;h++)ub(o[h],s),s=eb(s,s.next);return s}(t,i,d,s)),t.length>80*s){e=r=t[0],h=n=t[1];for(var A=s;A<c;A+=s)(o=t[A])<e&&(e=o),(a=t[A+1])<h&&(h=a),o>r&&(r=o),a>n&&(n=a);l=0!==(l=Math.max(r-e,n-h))?1/l:0}return hb(d,f,s,e,h,l),f}function sb(t,i,s,e,h){var r,n;if(h===Cb(t,i,s,e)>0)for(r=i;r<s;r+=e)n=Mb(r,t[r],t[r+1],n);else for(r=s-e;r>=i;r-=e)n=Mb(r,t[r],t[r+1],n);return n&&yb(n,n.next)&&(_b(n),n=n.next),n}function eb(t,i){if(!t)return t;i||(i=t);var s,e=t;do{if(s=!1,e.steiner||!yb(e,e.next)&&0!==vb(e.prev,e,e.next))e=e.next;else{if(_b(e),(e=i=e.prev)===e.next)break;s=!0}}while(s||e!==i);return i}function hb(t,i,s,e,h,r,n){if(t){!n&&r&&function(t,i,s,e){var h=t;do{null===h.z&&(h.z=db(h.x,h.y,i,s,e)),h.prevZ=h.prev,h.nextZ=h.next,h=h.next}while(h!==t);h.prevZ.nextZ=null,h.prevZ=null,function(t){var i,s,e,h,r,n,o,a,l=1;do{for(s=t,t=null,r=null,n=0;s;){for(n++,e=s,o=0,i=0;i<l&&(o++,e=e.nextZ);i++);for(a=l;o>0||a>0&&e;)0!==o&&(0===a||!e||s.z<=e.z)?(h=s,s=s.nextZ,o--):(h=e,e=e.nextZ,a--),r?r.nextZ=h:t=h,h.prevZ=r,r=h;s=e}r.nextZ=null,l*=2}while(n>1)}(h)}(t,e,h,r);for(var o,a,l=t;t.prev!==t.next;)if(o=t.prev,a=t.next,r?nb(t,e,h,r):rb(t))i.push(o.i/s),i.push(t.i/s),i.push(a.i/s),_b(t),t=a.next,l=a.next;else if((t=a)===l){n?1===n?hb(t=ob(eb(t),i,s),i,s,e,h,r,2):2===n&&ab(t,i,s,e,h,r):hb(eb(t),i,s,e,h,r,1);break}}}function rb(t){var i=t.prev,s=t,e=t.next;if(vb(i,s,e)>=0)return!1;for(var h=t.next.next;h!==t.prev;){if(Ab(i.x,i.y,s.x,s.y,e.x,e.y,h.x,h.y)&&vb(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function nb(t,i,s,e){var h=t.prev,r=t,n=t.next;if(vb(h,r,n)>=0)return!1;for(var o=h.x<r.x?h.x<n.x?h.x:n.x:r.x<n.x?r.x:n.x,a=h.y<r.y?h.y<n.y?h.y:n.y:r.y<n.y?r.y:n.y,l=h.x>r.x?h.x>n.x?h.x:n.x:r.x>n.x?r.x:n.x,u=h.y>r.y?h.y>n.y?h.y:n.y:r.y>n.y?r.y:n.y,c=db(o,a,i,s,e),d=db(l,u,i,s,e),f=t.prevZ,A=t.nextZ;f&&f.z>=c&&A&&A.z<=d;){if(f!==t.prev&&f!==t.next&&Ab(h.x,h.y,r.x,r.y,n.x,n.y,f.x,f.y)&&vb(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,A!==t.prev&&A!==t.next&&Ab(h.x,h.y,r.x,r.y,n.x,n.y,A.x,A.y)&&vb(A.prev,A,A.next)>=0)return!1;A=A.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&Ab(h.x,h.y,r.x,r.y,n.x,n.y,f.x,f.y)&&vb(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;A&&A.z<=d;){if(A!==t.prev&&A!==t.next&&Ab(h.x,h.y,r.x,r.y,n.x,n.y,A.x,A.y)&&vb(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function ob(t,i,s){var e=t;do{var h=e.prev,r=e.next.next;!yb(h,r)&&mb(h,e,e.next,r)&&bb(h,r)&&bb(r,h)&&(i.push(h.i/s),i.push(e.i/s),i.push(r.i/s),_b(e),_b(e.next),e=t=r),e=e.next}while(e!==t);return eb(e)}function ab(t,i,s,e,h,r){var n=t;do{for(var o=n.next.next;o!==n.prev;){if(n.i!==o.i&&gb(n,o)){var a=xb(n,o);return n=eb(n,n.next),a=eb(a,a.next),hb(n,i,s,e,h,r),void hb(a,i,s,e,h,r)}o=o.next}n=n.next}while(n!==t)}function lb(t,i){return t.x-i.x}function ub(t,i){if(i=function(t,i){var s,e=i,h=t.x,r=t.y,n=-1/0;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){var o=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(o<=h&&o>n){if(n=o,o===h){if(r===e.y)return e;if(r===e.next.y)return e.next}s=e.x<e.next.x?e:e.next}}e=e.next}while(e!==i);if(!s)return null;if(h===n)return s;var a,l=s,u=s.x,c=s.y,d=1/0;e=s;do{h>=e.x&&e.x>=u&&h!==e.x&&Ab(r<c?h:n,r,u,c,r<c?n:h,r,e.x,e.y)&&(a=Math.abs(r-e.y)/(h-e.x),bb(e,t)&&(a<d||a===d&&(e.x>s.x||e.x===s.x&&cb(s,e)))&&(s=e,d=a)),e=e.next}while(e!==l);return s}(t,i),i){var s=xb(i,t);eb(i,i.next),eb(s,s.next)}}function cb(t,i){return vb(t.prev,t,i.prev)<0&&vb(i.next,t,t.next)<0}function db(t,i,s,e,h){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-s)*h)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-e)*h)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function fb(t){var i=t,s=t;do{(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next}while(i!==t);return s}function Ab(t,i,s,e,h,r,n,o){return(h-n)*(i-o)-(t-n)*(r-o)>=0&&(t-n)*(e-o)-(s-n)*(i-o)>=0&&(s-n)*(r-o)-(h-n)*(e-o)>=0}function gb(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!function(t,i){var s=t;do{if(s.i!==t.i&&s.next.i!==t.i&&s.i!==i.i&&s.next.i!==i.i&&mb(s,s.next,t,i))return!0;s=s.next}while(s!==t);return!1}(t,i)&&(bb(t,i)&&bb(i,t)&&function(t,i){var s=t,e=!1,h=(t.x+i.x)/2,r=(t.y+i.y)/2;do{s.y>r!=s.next.y>r&&s.next.y!==s.y&&h<(s.next.x-s.x)*(r-s.y)/(s.next.y-s.y)+s.x&&(e=!e),s=s.next}while(s!==t);return e}(t,i)&&(vb(t.prev,t,i.prev)||vb(t,i.prev,i))||yb(t,i)&&vb(t.prev,t,t.next)>0&&vb(i.prev,i,i.next)>0)}function vb(t,i,s){return(i.y-t.y)*(s.x-i.x)-(i.x-t.x)*(s.y-i.y)}function yb(t,i){return t.x===i.x&&t.y===i.y}function mb(t,i,s,e){var h=Sb(vb(t,i,s)),r=Sb(vb(t,i,e)),n=Sb(vb(s,e,t)),o=Sb(vb(s,e,i));return h!==r&&n!==o||!(0!==h||!pb(t,s,i))||!(0!==r||!pb(t,e,i))||!(0!==n||!pb(s,t,e))||!(0!==o||!pb(s,i,e))}function pb(t,i,s){return i.x<=Math.max(t.x,s.x)&&i.x>=Math.min(t.x,s.x)&&i.y<=Math.max(t.y,s.y)&&i.y>=Math.min(t.y,s.y)}function Sb(t){return t>0?1:t<0?-1:0}function bb(t,i){return vb(t.prev,t,t.next)<0?vb(t,i,t.next)>=0&&vb(t,t.prev,i)>=0:vb(t,i,t.prev)<0||vb(t,t.next,i)<0}function xb(t,i){var s=new wb(t.i,t.x,t.y),e=new wb(i.i,i.x,i.y),h=t.next,r=i.prev;return t.next=i,i.prev=t,s.next=h,h.prev=s,e.next=s,s.prev=e,r.next=e,e.prev=r,e}function Mb(t,i,s,e){var h=new wb(t,i,s);return e?(h.next=e.next,h.prev=e,e.next.prev=h,e.next=h):(h.prev=h,h.next=h),h}function _b(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function wb(t,i,s){this.i=t,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Cb(t,i,s,e){for(var h=0,r=i,n=s-e;r<s;r+=e)h+=(t[n]-t[r])*(t[r+1]+t[n+1]),n=r;return h}tb.exports=ib,tb.exports.default=ib,ib.deviation=function(t,i,s,e){var h=i&&i.length,r=h?i[0]*s:t.length,n=Math.abs(Cb(t,0,r,s));if(h)for(var o=0,a=i.length;o<a;o++){var l=i[o]*s,u=o<a-1?i[o+1]*s:t.length;n-=Math.abs(Cb(t,l,u,s))}var c=0;for(o=0;o<e.length;o+=3){var d=e[o]*s,f=e[o+1]*s,A=e[o+2]*s;c+=Math.abs((t[d]-t[A])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[A+1]-t[d+1]))}return 0===n&&0===c?0:Math.abs((c-n)/n)},ib.flatten=function(t){for(var i=t[0][0].length,s={vertices:[],holes:[],dimensions:i},e=0,h=0;h<t.length;h++){for(var r=0;r<t[h].length;r++)for(var n=0;n<i;n++)s.vertices.push(t[h][r][n]);h>0&&(e+=t[h-1].length,s.holes.push(e))}return s};class kb extends hl{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.tU={fill:void 0,border:void 0},this.NE=new SS,this.wl=Vr,this.yW=!1,this.mW=!1,this.pW=!1,this.SW=!1,this.bW=!1,this.qd=[],this.$N=$m({polygonStyleSolid:()=>Oe(this.sh)&&this.sh,polygonStyleImage:()=>nu(this.sh)&&this.sh,polygonStyleRadialGradient:()=>eh(this.sh)&&this.sh,polygonStyleLinearGradient:()=>nh(this.sh)&&this.sh,polygonStylePaletted:()=>Ge(this.sh)&&this.sh,polygonStyleIndividual:()=>Ve(this.sh)&&this.sh,lineStyleSolid:()=>eo(this.eh)&&this.eh,lineStyleFilled:()=>{const t=this.eh&&this.eh.getFillStyle();return Oe(t)&&t}}),this.zN=t,this.VN=i,this.aU=r,this.fE=t.NN(),this.KG=this.fE.RV}Sn(){const t=this.aU(),i={qs:t=>this.uU(i,t),Xs:t=>this.cU(i,t),Kl:t=>this.xW(i,t),Px:t=>this.MW(i,t),jR:t=>this.fU(i,t),Sl:[],S:void 0,_W:void 0,ma:0,wW:!0,XN:t.id,ZN:t.color};return this.qd.push(i),i}_i(){var t;return this.qd.length=0,this.yW=!0,this.Bs&&this.uo&&(null===(t=this.$s.ao)||void 0===t?void 0:t.entity)===this&&this.uo(this,void 0,this.$s.ao.collectionMember),this}Zm(){return this.qd}if(t){var i;const s=this.qd.indexOf(t);s>=0&&(this.qd.splice(s,1),this.bW=!0,this.Bs&&this.uo&&(null===(i=this.$s.ao)||void 0===i?void 0:i.entity)===this&&this.$s.ao.collectionMember===t&&this.uo(this,void 0,this.$s.ao.collectionMember))}uU(t,i){var s;return t.wW=i,this.bW=!0,this.Bs&&this.uo&&(null===(s=this.$s.ao)||void 0===s?void 0:s.entity)===this&&this.$s.ao.collectionMember===t&&this.uo(this,void 0,this.$s.ao.collectionMember),t}cU(t,i){return t.ma=i,this.SW=!0,t}xW(t,i){return t.Sl=i,this.yW=!0,t}MW(t,i){return t.S=i,this.mW=!0,t}fU(t,i){return t._W=null==i?void 0:i.toUint32(),this.pW=!0,t}de(){const t=this.Aa._(),i=this.Aa.o,s=this.Ra(),e=this.SW,h=this.yW,r=this.mW,n=this.pW,o=this.bW,a=this.eh,l=this.Na(),u=this.qd.filter((t=>t.wW&&t.Sl.length>0));if(this.NE.Xz(this.ti),(h||o)&&(this.wl=sn(...u.map((t=>qr(t.Sl))))),h||o){const t=ir(u.map((t=>[...t.Sl,t.Sl[0],{x:Number.NaN,y:Number.NaN}])).flat(),this.ti.us()),i=this.ti.us()?4:2;this.qG=this.fE.Oz(t,!1,this.qG);let s=[];u.reduce(((e,h)=>{const r=e,n=(h.Sl.length+1)*i,o=new Float32Array(t.buffer,r,n),a=tb.exports(o,void 0,i),l=e/(Float32Array.BYTES_PER_ELEMENT*i);for(let t=0;t<a.length;t+=1)a[t]+=l;return s=lr(s,a,{canReturnB:!0}),r+(n+1*i)*Float32Array.BYTES_PER_ELEMENT}),0);const e=new Uint32Array(s);this.kW=this.fE.yV(e,this.kW),this.TW=e.length,this.FW=t.length/i-1}const c=this.$N.polygonStyleSolid(s),d=this.$N.polygonStylePaletted(s),f=this.$N.polygonStyleIndividual(s),A=this.$N.polygonStyleRadialGradient(s),g=this.$N.polygonStyleLinearGradient(s),v=this.$N.polygonStyleImage(s),y=c||d||g||A||v||f,m=this.$N.lineStyleSolid(l),p=this.$N.lineStyleFilled(l),S=p,b=m&&Math.max(m.getThickness(),0);if((s||l||i)&&(this.tU.fill=y?{shader:this.fE.VO(Pp["2D"],c&&Pp.Color({dataType:"uniform"}),g&&Pp.Color({dataType:["gradient",g]}),A&&Pp.Color({dataType:["gradient",A]}),d&&Pp.Color({dataType:["lookup",d.getLookUpProperty(),d.lut]}),f&&Pp.Color({dataType:"attribute"}),v&&Pp.Color({dataType:["image",v]}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0}),Pp.AttributeHighlight),mousePicking:t?{shader:this.fE.VO(Pp["2D"],Pp.MousePickingAttribute,Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0}),Pp.AttributeHighlight)}:void 0,fillStyleSolid:c,fillStyleLinearGradient:g,fillStyleRadialGradient:A,fillStylePaletted:d,fillStyleImage:v,fillStyleIndividual:f}:void 0,this.tU.border=m&&S&&"number"==typeof b&&0!==b?{shader:this.fE.VO(Pp["2D"],Pp.Color({dataType:"uniform"}),Pp.LineInstanced2D({axisWorldTranslation:jm(this.ti),normalSource:void 0}),this.KG?Pp.AliasedEdge:void 0,Pp.AttributeHighlight),geometry:ES(this.fE,b),mousePicking:t?{shader:this.fE.VO(Pp["2D"],Pp.MousePickingAttribute,Pp.LineInstanced2D({axisWorldTranslation:jm(this.ti),normalSource:void 0}),Pp.AttributeHighlight)}:void 0,fillStyleSolid:p,thickness:b}:void 0),e||h){const t=u.reduce(((t,i)=>t+i.Sl.length+2),0),i=new Float32Array(t);let s=0;u.forEach((t=>{const e=t.Sl.length+2;for(let h=s;h<s+e;h+=1)i[h]=t.ma;s+=e})),this.IW=this.fE.Oz(i,!0,this.IW)}if(t){if(h){const t=u.reduce(((t,i)=>t+i.Sl.length+2),0),i=new Float32Array(4*t);let s=0;u.forEach((t=>{const e=t.Sl.length+2;for(let h=s;h<s+4*e;h+=4)i[h]=t.ZN.r,i[h+1]=t.ZN.g,i[h+2]=t.ZN.b,i[h+3]=t.ZN.a;s+=4*e})),this.PW=this.fE.Oz(i,!1,this.PW)}}else this.PW&&(this.fE.Zz(this.PW),this.PW=void 0);if(r||h&&d&&"value"===d.getLookUpProperty()){const t=u.reduce(((t,i)=>t+i.Sl.length+2),0),i=new Float32Array(t);let s=0;const e={min:Or,max:zr};u.forEach((t=>{const h=void 0!==t.S?t.S:yh,r=t.Sl.length+2;for(let t=s;t<s+r;t+=1)i[t]=h;s+=r,e.min=Math.min(e.min,h),e.max=Math.max(e.max,h)})),this.DW=e,this.BW=this.fE.Oz(i,!1,this.BW)}if(n||h&&f){const t=u.reduce(((t,i)=>t+i.Sl.length+2),0),i=new Uint32Array(t);let s=0;const e=f?f.getFallbackColor().toUint32():Me.toUint32();u.forEach((t=>{const h=void 0!==t._W?t._W:e,r=t.Sl.length+2;for(let t=s;t<s+r;t+=1)i[t]=h;s+=r})),this.LW=this.fE.Oz(i,!1,this.LW,Uint32Array)}return A?this.sG=aS(this.ya||this.wl,this.ti,A.getPosition(),A.getExtent(),A.getShape(),this.fE.Mz()):g?this.eG=lS(this.ya||this.wl,this.ti,g.getAngle(!0),this.fE.Mz()):(this.sG=void 0,this.eG=void 0),this.RW=this.fE.fN(this,this.RW,v,void 0,h||o||this.ti.ws(),((t,i,s)=>this.EW(t,i,s,u))),this.SW=!1,this.bW=!1,this.yW=!1,this.mW=!1,this.pW=!1,this.Aa.o=!1,this.Va(this.sh),this.Wa(a),this}gR(t){var i,s;const{fill:e,border:h}=this.tU,r=this.qG,n=this.IW,o=this.PW;if(!r||!n)return this;if(e){const{fillStyleSolid:s,fillStyleLinearGradient:h,fillStyleRadialGradient:a,fillStylePaletted:l,fillStyleImage:u,fillStyleIndividual:c}=e,d=this.kW,f=this.TW,A=1===t?null===(i=e.mousePicking)||void 0===i?void 0:i.shader:e.shader;if(!A||!r||!d||void 0===f)return this;this.fE.CE(A).Vz(A,((i,e,A,g)=>{if(this.ti instanceof Nn||this.ti instanceof cv?this.fE.Gz(i("uScale"),this.NE.Yz()).Gz(i("uDisp"),this.NE.jz()).Gz(g("uScaleStart_highpart"),this.NE.vN()).Gz(g("uScaleStart_lowpart"),this.NE.yN()):this.ti instanceof Gn&&this.fE.Gz(g("uScaleStart"),this.NE.MixedScaleXY.uScaleStart).Gz(g("uScaleStartLog"),this.NE.MixedScaleXY.uScaleStartLog).Gz(g("uScaleInterval"),this.NE.MixedScaleXY.uScaleInterval).Gz(g("uScaleIntervalLog"),this.NE.MixedScaleXY.uScaleIntervalLog).Gz(i("uViewportStart"),this.NE.MixedScaleXY.uViewportStart).Gz(i("uViewportSize"),this.NE.MixedScaleXY.uViewportSize),this.fE.KV(A,r,this.ti.us(),void 0).wV(d)._V(e("aIsHighlighted"),n).jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0),1===t){if(!o)return!1;this.fE.MV(e("aColor"),o)}else if(s)this.fE.jR(i("uColor"),s.getColor());else if(a){if(!this.sG)return!1;this.fE.XV(A,this.sG,a)}else if(h){if(!this.eG)return!1;this.fE.ZV(A,this.eG,h)}else if(l){const t=Xm(l,this,this.DW);if(!t&&l.lut.percentageValues)return!1;if(this.fE.dN(A,l.lut,t),"value"===l.getLookUpProperty()){if(!this.BW)return!1;this.fE._V(e("aLookupValue"),this.BW)}}else if(u){if(!this.RW)return!1;this.fE.jR(g("uColor"),u.getSurroundingColor()).Uz(i(Ap),this.RW.texture.pz()||this.RW.sourceMissingTexture,0).Nz(this.RW.texCoordsBuffer,void 0,{location:e("aTextureCoord"),size:2}).dV(u.fitMode)}else if(c){if(!this.LW)return!1;const t=e("aColor");this.fE.gl.bindBuffer(this.fE.gl.ARRAY_BUFFER,this.LW),this.fE.gl.vertexAttribPointer(t,4,this.fE.gl.UNSIGNED_BYTE,!0,0,0),this.fE.gl.enableVertexAttribArray(t)}return this.fE.kV(f,void 0,void 0,this.fE.gl.UNSIGNED_INT),!0}))}if(h){const{geometry:i,fillStyleSolid:e,thickness:a}=h,l=this.FW,u=1===t?null===(s=h.mousePicking)||void 0===s?void 0:s.shader:h.shader;if(!u||!r||!l)return this;this.fE.CE(u).Vz(u,((s,h,u,c)=>{if(this.ti instanceof Nn||this.ti instanceof cv?this.fE.Gz(s("uScale"),this.NE.Yz()).Gz(s("uDisp"),this.NE.jz()).Gz(c("uScaleStart_highpart"),this.NE.vN()).Gz(c("uScaleStart_lowpart"),this.NE.yN()):this.ti instanceof Gn&&this.fE.Gz(c("uScaleStart"),this.NE.MixedScaleXY.uScaleStart).Gz(c("uScaleStartLog"),this.NE.MixedScaleXY.uScaleStartLog).Gz(c("uScaleInterval"),this.NE.MixedScaleXY.uScaleInterval).Gz(c("uScaleIntervalLog"),this.NE.MixedScaleXY.uScaleIntervalLog).Gz(s("uViewportStart"),this.NE.MixedScaleXY.uViewportStart).Gz(s("uViewportSize"),this.NE.MixedScaleXY.uViewportSize),this.fE.Nz(n,1,{location:h("aIsHighlighted"),size:1}).jR(s("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(s("uRenderEffectMask"),2===t?1:0),1===t){if(!o)return!1;this.fE.Nz(o,1,{location:h("aColor"),size:4})}else e&&this.fE.jR(s("uColor"),e.getColor());return OS.jG(this.ti.us(),this.fE,r,u,this.ti.us()?4:2,0),OS.gR(this.zN,i,u,this.KG&&1!==t,1===t,a,l),!0}))}return this}EW(t,i,s,e){const h=Ah({x:this.wl.min.x,y:this.wl.min.y},this.ti,this.$s.ti),r=Ah({x:this.wl.max.x,y:this.wl.max.y},this.ti,this.$s.ti),n={x:Math.abs(h.x-r.x),y:Math.abs(h.y-r.y)},o=fS(t,i,n.x,n.y,s),a=o[1],l=o[4],u=o[6],c=o[7],d=e.reduce(((t,i)=>t+i.Sl.length+2),0),f=new Float32Array(2*d),A=this.wl.max.x-this.wl.min.x,g=this.wl.max.y-this.wl.min.y,v=l-u,y=c-a;let m=0;for(const t of e){for(const i of t.Sl){const t=u+v*((i.x-this.wl.min.x)/A),s=a+y*((i.y-this.wl.min.y)/g);f[m]=t,f[m+1]=s,m+=2}const i=u+v*((t.Sl[0].x-this.wl.min.x)/A),s=a+y*((t.Sl[0].y-this.wl.min.y)/g);f[m]=i,f[m+1]=s,m+=2,f[m]=Number.NaN,f[m+1]=Number.NaN,m+=2}return f}UN(t){const i=this.qd.find((i=>i.XN===t));return!!i&&{collectionMember:i}}vE(){return this.kW&&(this.fE.Zz(this.kW),this.kW=void 0),this.qG&&(this.fE.Zz(this.qG),this.qG=void 0),this.IW&&(this.fE.Zz(this.IW),this.IW=void 0),this.PW&&(this.fE.Zz(this.PW),this.PW=void 0),this.BW&&(this.fE.Zz(this.BW),this.BW=void 0),this.LW&&(this.fE.Zz(this.LW),this.LW=void 0),this.tU={fill:void 0,border:void 0},this.RW=this.fE.AN(this,this.RW),this}ni(){return this.wl.max.x}ri(){return this.wl.min.x}ai(){return this.wl.max.y}oi(){return this.wl.min.y}tu(){return Fr(this.eh)}iu(){return Fr(this.eh)}}class Tb extends al{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.NE=new SS,this.OW=Vr,this.$N=$m({fillStyleSolid:()=>Oe(this.sh)&&this.sh,fillStyleRadialGradient:()=>eh(this.sh)&&this.sh,fillStyleLinearGradient:()=>nh(this.sh)&&this.sh,fillStyleImage:()=>nu(this.sh)&&this.sh,strokeStyleSolid:()=>eo(this.eh)&&this.eh,strokeFillSolid:()=>{const t=this.eh.getFillStyle();return Oe(t)&&t},strokeFillLinearGradient:()=>{const t=this.eh.getFillStyle();return nh(t)&&t},strokeFillRadialGradient:()=>{const t=this.eh.getFillStyle();return eh(t)&&t}}),this.EW=(t,i,s)=>{const e=Ah(this.ll(),this.ti,this.$s.ti),h=dn(Ah(cn(this.ll(),this.Hi()),this.ti,this.$s.ti),e);return fS(t,i,h.x,h.y,s)},this.zN=t,this.VN=i,this.XN=r,this.ZN=n,this.fE=t.NN(),this.VN=i}de(){super.de();const t=this.Aa._(),i=this.Ra(),s=this.Ha.o||this.zt.o||this.Za.o||this.K.o,h=this.eh,r=this.Na(),n=h.getThickness(),o=this.Za._();this.NE.Xz(this.ti);const a=this.ti.ws();if(s){const t=this.zt._();this.Sl=function(t,i,s,h,r){const n=((t,i,s)=>[t,e(t.x+i,t.y),e(t.x+i,t.y+s),e(t.x,t.y+s)])(t,i,s);if(0!==h||h%360!=0){const t=h*Math.PI/180;n[0]=rn(n[0],r,t),n[1]=rn(n[1],r,t),n[2]=rn(n[2],r,t),n[3]=rn(n[3],r,t)}return n}(this.Ha._(),t.x,t.y,o,this.K._());const i=ir(this.Sl,this.ti.us());this.KN=this.fE.Oz(i,!1,this.KN),this.tG=this.Sl.length,this.OW=qr(this.Sl)}const l=this.$N.fillStyleSolid(i),u=this.$N.fillStyleRadialGradient(i),c=this.$N.fillStyleLinearGradient(i),d=this.$N.fillStyleImage(i),f=l||u||c||d;i&&(this.hG=f?this.fE.VO(Pp["2D"],l&&Pp.Color({dataType:"uniform"}),c&&Pp.Color({dataType:["gradient",c]}),u&&Pp.Color({dataType:["gradient",u]}),d&&Pp.Color({dataType:["image",d]}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0),u?this.sG=aS(this.ya||this.OW,this.ti,u.getPosition(),u.getExtent(),u.getShape(),this.fE.Mz()):c?this.eG=lS(this.ya||this.OW,this.ti,c.getAngle(!0),this.fE.Mz()):(this.sG=void 0,this.eG=void 0),this.RW=this.fE.fN(this,this.RW,d,void 0,a||s,this.EW);const A=this.$N.strokeStyleSolid(r),g=this.$N.strokeFillSolid(r),v=this.$N.strokeFillLinearGradient(r),y=this.$N.strokeFillRadialGradient(r),m=A,p=g||v||y;if(m&&(s||r||a&&1!==n)){if(1===n||-1===n)[this.rG,this.zW]=[this.Sl,void 0];else{const t=this.ti;[this.rG,this.zW]=t instanceof Gn?((t,i,s)=>{const e=t[0],h=t[1],r=t[2],n=t[3],o=i/2;return[[s.Ts(e,h,o,-o),s.Ts(h,e,-o,-o),s.Ts(n,r,-o,-o),s.Ts(r,n,o,-o),s.Ts(e,h,-o,o),s.Ts(h,e,o,o),s.Ts(n,r,o,o),s.Ts(r,n,-o,o)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Sl,n,t):((t,i,s)=>{const h=t[0],r=t[1],n=t[2],o=t[3],a=e(i.x*s*.5,i.y*s*.5),l=on(nn(r,h)),u=on(nn(o,h)),c=gn(l),d=gn(u);return[[cn(h,cn(un(c,a.x),un(d,a.y))),cn(r,cn(un(l,a.x),un(d,a.y))),cn(o,cn(un(c,a.x),un(u,a.y))),cn(n,cn(un(l,a.x),un(u,a.y))),cn(h,cn(un(l,a.x),un(u,a.y))),cn(r,cn(un(c,a.x),un(u,a.y))),cn(o,cn(un(l,a.x),un(d,a.y))),cn(n,cn(un(c,a.x),un(d,a.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Sl,t.ks(),n)}this.oG=this.fE.Oz(ir(this.rG,this.ti.us()),!1,this.oG),this.zW?(this.WG=this.fE.yV(new Uint16Array(this.zW),this.WG),this.nG=this.zW.length):(this.WG&&this.fE.Zz(this.WG),this.WG=void 0,this.nG=this.rG.length)}return r&&(this.fG=m&&p?this.fE.VO(Pp["2D"],Pp.Color({dataType:y?["gradient",y]:v?["gradient",v]:"uniform"}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0),y?this.cG=aS(this.OW,this.ti,y.getPosition(),y.getExtent(),y.getShape(),this.fE.Mz()):v?this.dG=lS(this.OW,this.ti,v.getAngle(!0),this.fE.Mz()):(this.cG=void 0,this.dG=void 0),this.AG=t&&f?this.AG||this.fE.VO(Pp["2D"],Pp.Color({dataType:"uniform"}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0,this.gG=t&&this.eh!==ah?this.gG||this.fE.VO(Pp["2D"],Pp.Color({dataType:"uniform"}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0,this.Va(this.sh),this.Wa(h),this.Ha.o=!1,this.Za.o=!1,this.zt.o=!1,this.K.o=!1,this}UN(t){return this.XN===t&&{}}gR(t){const i=1===t?this.AG:this.hG,s=this.KN,e=this.tG,h=this.$N.fillStyleSolid(!1),r=this.$N.fillStyleRadialGradient(!1),n=this.$N.fillStyleLinearGradient(!1),o=this.$N.fillStyleImage(!1);i&&s&&e&&this.sh!==De&&(this.fE.CE(i),this.fE.Vz(i,((i,a,l,u)=>{if(this.ti instanceof Nn||this.ti instanceof cv?this.fE.Gz(i("uScale"),this.NE.Yz()).Gz(i("uDisp"),this.NE.jz()).Gz(u("uScaleStart_highpart"),this.NE.vN()).Gz(u("uScaleStart_lowpart"),this.NE.yN()):this.ti instanceof Gn&&this.fE.Gz(u("uScaleStart"),this.NE.MixedScaleXY.uScaleStart).Gz(u("uScaleStartLog"),this.NE.MixedScaleXY.uScaleStartLog).Gz(u("uScaleInterval"),this.NE.MixedScaleXY.uScaleInterval).Gz(u("uScaleIntervalLog"),this.NE.MixedScaleXY.uScaleIntervalLog).Gz(i("uViewportStart"),this.NE.MixedScaleXY.uViewportStart).Gz(i("uViewportSize"),this.NE.MixedScaleXY.uViewportSize),1===t)this.fE.jR(i("uColor"),this.ZN);else if(h)this.fE.jR(i("uColor"),h.getColor());else if(r){if(!this.sG)return!1;this.fE.XV(l,this.sG,r)}else if(n){if(!this.eG)return!1;this.fE.ZV(l,this.eG,n)}else if(o){if(!this.RW)return!1;const t=this.RW&&this.RW.texture.pz();this.fE.jR(u("uColor"),o.getSurroundingColor()).Uz(i(Ap),t||this.RW.sourceMissingTexture,0).Nz(this.RW.texCoordsBuffer,void 0,{location:a("aTextureCoord"),size:2}).dV(o.fitMode)}return this.fE.Wz(i("uIsHighlighted"),1===t||2===t?0:this.ma).jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0).KV(l,s,this.ti.us(),void 0).Bm(this.fE.gl.TRIANGLE_FAN,e),!0})));const a=1===t?this.gG:this.fG,l=this.$N.strokeStyleSolid(!1),u=this.$N.strokeFillSolid(!1),c=this.$N.strokeFillLinearGradient(!1),d=this.$N.strokeFillRadialGradient(!1),f=this.oG;return a&&f&&l&&(this.fE.CE(a),this.fE.Vz(a,((i,s,e,h)=>{if(this.ti instanceof Nn||this.ti instanceof cv?this.fE.Gz(i("uScale"),this.NE.Yz()).Gz(i("uDisp"),this.NE.jz()).Gz(h("uScaleStart_highpart"),this.NE.vN()).Gz(h("uScaleStart_lowpart"),this.NE.yN()):this.ti instanceof Gn&&this.fE.Gz(h("uScaleStart"),this.NE.MixedScaleXY.uScaleStart).Gz(h("uScaleStartLog"),this.NE.MixedScaleXY.uScaleStartLog).Gz(h("uScaleInterval"),this.NE.MixedScaleXY.uScaleInterval).Gz(h("uScaleIntervalLog"),this.NE.MixedScaleXY.uScaleIntervalLog).Gz(i("uViewportStart"),this.NE.MixedScaleXY.uViewportStart).Gz(i("uViewportSize"),this.NE.MixedScaleXY.uViewportSize),1===t)this.fE.jR(i("uColor"),this.ZN);else if(u)this.fE.jR(i("uColor"),u.getColor());else if(d){if(!this.cG)return!1;this.fE.XV(e,this.cG,d)}else if(c){if(!this.dG)return!1;this.fE.ZV(e,this.dG,c)}return this.fE.Wz(i("uIsHighlighted"),1===t||2===t?0:this.ma).jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0).KV(e,f,this.ti.us(),void 0),this.WG?this.fE.wV(this.WG).kV(this.nG):this.fE.Bm(this.fE.gl.LINE_LOOP,this.nG),!0}))),this}vE(){return this.WG&&(this.fE.Zz(this.WG),this.WG=void 0),this.KN&&(this.fE.Zz(this.KN),this.KN=void 0),this.oG&&(this.fE.Zz(this.oG),this.oG=void 0),this.RW=this.fE.AN(this,this.RW),this.hG=void 0,this.fG=void 0,this.AG=void 0,this.gG=void 0,this}ni(){return Math.max(this.Ha._().x,this.Ha._().x+this.zt._().x)}ri(){return Math.min(this.Ha._().x,this.Ha._().x+this.zt._().x)}ai(){return Math.max(this.Ha._().y,this.Ha._().y+this.zt._().y)}oi(){return Math.min(this.Ha._().y,this.Ha._().y+this.zt._().y)}tu(){return Fr(this.eh)}iu(){return Fr(this.eh)}}class Fb extends ul{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.NE=new SS,this.$N=$m({fillStyleSolid:()=>Oe(this.sh)&&this.sh,fillStylePaletted:()=>Ge(this.sh)&&this.sh,fillStyleRadialGradient:()=>eh(this.sh)&&this.sh,fillStyleLinearGradient:()=>nh(this.sh)&&this.sh,fillStyleImage:()=>nu(this.sh)&&this.sh,strokeLineStyleSolid:()=>eo(this.eh)&&this.eh,strokeLineSolidFill:()=>{const t=this.eh.getFillStyle();return Oe(t)&&t},strokeLinearGradientFill:()=>{const t=this.eh.getFillStyle();return nh(t)&&t},strokeRadialGradientFill:()=>{const t=this.eh.getFillStyle();return eh(t)&&t}}),this.EW=(t,i,s)=>{const e=Ah({x:this.wl.min.x,y:this.wl.min.y},this.ti,this.$s.ti),h=Ah({x:this.wl.max.x,y:this.wl.max.y},this.ti,this.$s.ti),r={x:Math.abs(e.x-h.x),y:Math.abs(e.y-h.y)},n=fS(t,i,r.x,r.y,s),o=n[1],a=n[4],l=n[6],u=n[7],c=new Float32Array(2*this.Sl.length),d=this.wl.max.x-this.wl.min.x,f=this.wl.max.y-this.wl.min.y,A=a-l,g=u-o;let v=0;for(const t of this.Sl){const i=l+A*((t.x-this.wl.min.x)/d),s=o+g*((t.y-this.wl.min.y)/f);c[v]=i,c[v+1]=s,v+=2}return c},this.zN=t,this.VN=i,this.XN=r,this.ZN=n,this.fE=t.NN(),this.VN=i}kd(t){let i,s=Number.MAX_VALUE;for(const e of this.Sl){const h=Zr(Ah(e,this.ti,this.$s.ti),t);h<s&&(s=h,i=e)}return i}de(){const t=this.Aa._(),i=this.Ra(),s=this.Jl,e=this.Sl.length>=3,h=this.eh,r=this.Na(),n=h.getThickness(),o=this.Ua(n);this.NE.Xz(this.ti),this.aF=this.ti.ks();const a=this.ti.ws();if(s&&(this.wl=qr(this.Sl)),s&&e){const t=ir(this.Sl,this.ti.us());this.KN=this.fE.Oz(t,!1,this.KN),this.VW=new Uint16Array(tb.exports(t)),this.NW=this.fE.yV(this.VW,this.NW),this.tG=this.VW.length}const l=this.$N.fillStyleSolid(i),u=this.$N.fillStylePaletted(i),c=this.$N.fillStyleRadialGradient(i),d=this.$N.fillStyleLinearGradient(i),f=this.$N.fillStyleImage(i),A=l||u&&"value"!==u.getLookUpProperty()&&u||d||c||f;if(i&&(this.hG=A?this.fE.VO(Pp["2D"],l&&Pp.Color({dataType:"uniform"}),d&&Pp.Color({dataType:["gradient",d]}),c&&Pp.Color({dataType:["gradient",c]}),u&&Pp.Color({dataType:["lookup",u.getLookUpProperty(),u.lut]}),f&&Pp.Color({dataType:["image",f]}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0),c?this.sG=aS(this.ya||this.wl,this.ti,c.getPosition(),c.getExtent(),c.getShape(),this.fE.Mz()):d?this.eG=lS(this.ya||this.wl,this.ti,d.getAngle(!0),this.fE.Mz()):(this.sG=void 0,this.eG=void 0),this.RW=this.fE.fN(this,this.RW,f,void 0,a||s,this.EW),(s||o||a&&1!==n)&&e){const t=1===n||-1===n?this.Sl:wS(this.Sl,this.aF,n);this.rG=ir(t,this.ti.us()),this.oG=this.fE.Oz(this.rG,!0,this.oG),this.nG=t.length}const g=this.$N.strokeLineStyleSolid(r),v=this.$N.strokeLineSolidFill(r),y=this.$N.strokeLinearGradientFill(r),m=this.$N.strokeRadialGradientFill(r),p=g,S=v||y||m;return r&&(this.fG=p&&S?this.fE.VO(Pp["2D"],Pp.Color({dataType:m?["gradient",m]:y?["gradient",y]:"uniform"}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0),m?this.cG=aS(this.ya||this.wl,this.ti,m.getPosition(),m.getExtent(),m.getShape(),this.fE.Mz()):y?this.dG=lS(this.ya||this.wl,this.ti,y.getAngle(!0),this.fE.Mz()):(this.cG=void 0,this.dG=void 0),this.AG=t&&A?this.AG||this.fE.VO(Pp["2D"],Pp.MousePicking,Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0,this.gG=t&&this.eh!==ah?this.AG||this.fE.VO(Pp["2D"],Pp.MousePicking,Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})):void 0,this.Jl=!1,this.Va(this.sh),this.Wa(h),this}gR(t){const i=1===t?this.AG:this.hG,s=this.KN,e=this.tG,h=this.$N.fillStyleSolid(!1),r=this.$N.fillStyleRadialGradient(!1),n=this.$N.fillStyleLinearGradient(!1),o=this.$N.fillStylePaletted(!1),a=this.$N.fillStyleImage(!1);i&&s&&e&&this.fE.CE(i).Vz(i,((i,e,l,u)=>{if(this.fE.Gz(i("uScale"),this.NE.Yz()).Gz(i("uDisp"),this.NE.jz()).Gz(u("uScaleStart_highpart"),this.NE.vN()).Gz(u("uScaleStart_lowpart"),this.NE.yN()).KV(l,s,this.ti.us(),void 0).wV(this.NW).Wz(i("uIsHighlighted"),1===t||2===t?0:this.ma).jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0),1===t)this.fE.jR(i("uColor"),this.ZN);else if(h)this.fE.jR(i("uColor"),h.getColor());else if(r){if(!this.sG)return!1;this.fE.XV(l,this.sG,r)}else if(n){if(!this.eG)return!1;this.fE.ZV(l,this.eG,n)}else if(o){const t=Xm(o,this,void 0);if(!t&&o.lut.percentageValues)return!1;this.fE.dN(l,o.lut,t)}else if(a){if(!this.RW)return!1;this.fE.jR(u("uColor"),a.getSurroundingColor()).Uz(i(Ap),this.RW.texture.pz()||this.RW.sourceMissingTexture,0).Nz(this.RW.texCoordsBuffer,void 0,{location:e("aTextureCoord"),size:2}).dV(a.fitMode)}return this.fE.kV(this.tG),!0}));const l=1===t?this.gG:this.fG,u=this.eh,c=this.oG,d=this.nG;return l&&c&&d&&this.fE.CE(l).Vz(l,((i,s,e,h)=>{this.fE.Wz(i("uIsHighlighted"),1===t||2===t?0:this.ma).jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0).Gz(i("uScale"),this.NE.Yz()).Gz(i("uDisp"),this.NE.jz()).KV(e,c,this.ti.us(),void 0);const r=u.getFillStyle();if(1===t)this.fE.jR(i("uColor"),this.ZN);else if(Oe(r))this.fE.jR(i("uColor"),r.getColor());else if(eh(r)){if(!this.cG)return!1;this.fE.XV(e,this.cG,r)}else if(nh(r)){if(!this.dG)return!1;this.fE.ZV(e,this.dG,r)}const n=u.getThickness(),o=-1===n||1===n;return this.fE.Bm(o?this.fE.gl.LINE_LOOP:this.fE.gl.TRIANGLE_STRIP,this.nG),!0})),this}UN(t){return this.XN===t&&{}}vE(){return this.NW&&(this.fE.Zz(this.NW),this.NW=void 0),this.KN&&(this.fE.Zz(this.KN),this.KN=void 0),this.oG&&(this.fE.Zz(this.oG),this.oG=void 0),this.hG=void 0,this.fG=void 0,this.AG=void 0,this.gG=void 0,this.RW=this.fE.AN(this,this.RW),this}}const Ib=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=s+r<t?1:0;const o=Math.min(r,t-h),a=s-(n?1:0),l={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},Pb=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=0;const o=Math.min(r,t-h),a=s-(n?1:0),l={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},Db=(t,i,s,e)=>{if(s){const t=new Map;return i.gridTiles.forEach((i=>{t.set(i,{type:s,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:i.sizeHeatmapDataVectors}]})})),t}const h=new Map;for(let s=0;s<t.length;s+=1){const r=t[s],n={x:r.startPrimary,y:r.startSecondary},o={x:n.x+r.lengthPrimary-1,y:n.y+r.lengthSecondary-1},a=[n,{x:o.x,y:n.y},o,{x:n.x,y:o.y}];i.gridTiles.forEach((t=>{const i=t.iFirstVector,s=e(t),n={x:i.primary+s.primary-1,y:i.secondary+s.secondary-1},o=[{x:i.primary,y:i.secondary},{x:n.x,y:i.secondary},n,{x:i.primary,y:n.y}];if(!Wr(a,o))return;let l=h.get(t);l||(l={type:r.type,dataInvalidationRanges:[]},h.set(t,l));const u=Yr(a,o),c={primary:u.min.x-i.primary,secondary:u.min.y-i.secondary},d={primary:1+u.max.x-u.min.x,secondary:1+u.max.y-u.min.y};let f=!1;const A=[{x:c.primary,y:c.secondary},{x:c.primary+d.primary,y:c.secondary},{x:c.primary+d.primary,y:c.secondary+d.secondary},{x:c.primary,y:c.secondary+d.secondary}];for(let t=0;t<l.dataInvalidationRanges.length;t+=1)if(!f){const i=l.dataInvalidationRanges[t],s=[{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary},{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary}];if(Wr(A,s)){const t=(g=A,v=s,{min:{x:Math.min(g[0].x,v[0].x),y:Math.min(g[0].y,v[0].y)},max:{x:Math.max(g[2].x,v[2].x),y:Math.max(g[2].y,v[2].y)}});i.tileInvalidationOffset.primary=t.min.x,i.tileInvalidationOffset.secondary=t.min.y,i.tileInvalidationLength.primary=t.max.x-t.min.x,i.tileInvalidationLength.secondary=t.max.y-t.min.y,f=!0}}var g,v;f||l.dataInvalidationRanges.push({tileInvalidationLength:d,tileInvalidationOffset:c})}))}return h},Bb=(t,i,s)=>{if(1!==t.length||0!==i.startPrimary||0!==i.startSecondary||i.lengthPrimary!==t[0].sizeHeatmapDataVectors.primary||i.lengthSecondary!==t[0].sizeHeatmapDataVectors.secondary)t.forEach((t=>{const e=s(t),h=Math.max(i.startPrimary,t.iFirstVector.primary),r=Math.min(i.startPrimary+i.lengthPrimary-1,t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1),n=Math.max(i.startSecondary,t.iFirstVector.secondary),o=Math.min(i.startSecondary+i.lengthSecondary-1,t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1);for(let s=h;s<=r;s+=1){const h=s-i.startPrimary,r=i.values[h],a=(s-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let s=n;s<=o;s+=1){const h=s-i.startSecondary,n=s-t.iFirstVector.secondary,o=r[h];e[a+n]=o}}}));else{const e=t[0],h=s(e);for(let t=0;t<i.lengthPrimary;t+=1){const s=t*e.sizeHeatmapDataVectors.secondary;h.set(i.values[t],s)}}},Lb=(t,i,s)=>{var e,h;const r=null===(e=t.gl2)||void 0===e?void 0:e.ctx;if(r)return t.HV(null,r.RED,!1,!0,{x:i,y:s},!1,r.FLOAT,r.R32F);const n=t.gl;return(null===(h=t.gl1)||void 0===h?void 0:h.optional.OES_texture_float)?t.HV(null,n.LUMINANCE,!1,!0,{x:i,y:s},!1,n.FLOAT):t.HV(null,n.RGBA,!1,!0,{x:i,y:s},!1,n.UNSIGNED_BYTE)},Rb=(t,i,s,e)=>{i.forEach(((i,h)=>{var r,n;const o=s(h),a=e(h),l=t.gl;l.bindTexture(l.TEXTURE_2D,a),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const u=null===(r=t.gl2)||void 0===r?void 0:r.ctx,c=i.dataInvalidationRanges.length,d=i.dataInvalidationRanges.reduce(((t,i)=>t+i.tileInvalidationLength.primary),0)/h.sizeHeatmapDataVectors.primary;1===c&&d<1||d<.5&&c<10?i.dataInvalidationRanges.forEach((i=>{var s;const e=i.tileInvalidationOffset.primary*h.sizeHeatmapDataVectors.secondary,r=e+i.tileInvalidationLength.primary*h.sizeHeatmapDataVectors.secondary;if(u)u.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,u.RED,u.FLOAT,o.subarray(e,r));else if(null===(s=t.gl1)||void 0===s?void 0:s.optional.OES_texture_float)l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.LUMINANCE,l.FLOAT,o.subarray(e,r));else{const t=new Uint8Array(o.buffer).subarray(4*e,4*r);l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.RGBA,l.UNSIGNED_BYTE,t)}})):u?u.texImage2D(l.TEXTURE_2D,0,u.R32F,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,u.RED,u.FLOAT,o):(null===(n=t.gl1)||void 0===n?void 0:n.optional.OES_texture_float)?l.texImage2D(l.TEXTURE_2D,0,l.LUMINANCE,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.LUMINANCE,l.FLOAT,o):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(o.buffer)),l.bindTexture(l.TEXTURE_2D,null)}))};class Eb extends el{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.GW=u("bilinear"),this.ot={x:0,y:0},this.ct={x:1,y:1},this.ZS=Pa.lineStyle,this.engine=t;const n="columns"===r.dataOrder?r.columns:r.rows,o="columns"===r.dataOrder?r.rows:r.columns;this.Co={...r,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o}}sb(t){return this.GW.M(t),this}eb(){return this.GW._()}qS(t,i){return this.ot=t,this.ct=i,this}tb(){return{start:this.ot,step:this.ct,end:{x:this.ot.x+this.ct.x*this.Co.columns,y:this.ot.y+this.ct.y*this.Co.rows}}}QS(t){return this.ZS="function"==typeof t?t(this.ZS):t,this}ib(){return this.ZS}}class Ob extends Eb{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r),this.NE=new SS,this.tU={},this.UW=[],this.WW=!1,this.Pl=!1,this.$N=$m({fillStyleSolid:()=>Oe(this.sh)&&this.sh,fillStylePaletted:()=>Ge(this.sh)&&this.sh,wireframeStyleLine:()=>eo(this.ZS)&&this.ZS,wireframeStyleFill:()=>{const t=this.ZS&&this.ZS.getFillStyle();return Oe(t)&&t}}),this.YW=Ib,this.zN=t,this.VN=i,this.XN=n,this.ZN=o,this.fE=t.NN(),this.VN=i;const a=Math.min(this.fE.gE,void 0!==r.HW?r.HW:2048),l={x:Math.min(a,this.Co.primaryDimensionVectorsCount),y:Math.min(a,this.Co.secondaryDimensionVectorsCount)},u=((t,i,s,e)=>{const h=[],r=s(t.primaryDimensionVectorsCount,i.x),n=s(t.secondaryDimensionVectorsCount,i.y);let o;return r.forEach((t=>n.forEach((i=>{const s={iFirstVector:{primary:t.start,secondary:i.start},iFirstUniqueVector:{primary:t.startUnique,secondary:i.startUnique},sizeHeatmapDataVectors:{primary:t.sizeData,secondary:i.sizeData},sizeUniqueHeatmapDataVectors:{primary:t.sizeUniqueData,secondary:i.sizeUniqueData}};h.push(s)})))),o=[],h.forEach((t=>{let i=o.find((i=>i.sizeHeatmapData.primary===t.sizeHeatmapDataVectors.primary&&i.sizeHeatmapData.secondary===t.sizeHeatmapDataVectors.secondary));i||(i={sizeHeatmapData:t.sizeHeatmapDataVectors,tiles:[]},o.push(i)),i.tiles.push(t)})),{gridTiles:h,gridTileSizes:o}})(this.Co,l,this.YW),c=u.gridTiles.map((t=>{const i=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary);return{...t,intensityData:i,hasIntensityData:!1}})),d=u.gridTileSizes.map((t=>({...t,tiles:c.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary))})));this.jW={gridTiles:c,gridTileSizes:d},this.qS(this.ot,this.ct)}de(){const t=this.UW,i=this.sh,s=this.Ra(),e=this.ZS,h=e!==this.$W,r=this.$N.fillStylePaletted(s),n=this.$N.fillStyleSolid(s),o=this.GW.o,a=this.GW._(),l=this.Pl,u=this.Aa._();this.XW=this.XW||this.ZW();const c=this.XW,d=Db(t,c,l?"intensity":void 0,(t=>t.sizeHeatmapDataVectors));d.size>0&&(Rb(this.fE,d,(t=>t.intensityData),(t=>t.intensityDataTexture)),this.WW=!0),this.NE.Xz(this.ti);const f=this.tU;if((s||o)&&(f.tile=r?{renderMode:"paletted",fillStylePaletted:r,shader:this.fE.VO(Pp["2D"],Pp.ColorGrid2D({heatmapType:"intensity",interpolation:"bilinear"===a&&"bilinear",flipXY:"rows"===this.Co.dataOrder,intensityTextureType:this.fE.LO?"float":"ubyte",littleEndian:this.fE.IS_MACHINE_LITTLE_ENDIAN,lut:r.lut}),Pp.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:jm(this.ti),flipXY:"rows"===this.Co.dataOrder,normalSource:void 0}))}:n?{renderMode:"solid",fillStyleSolid:n,shader:this.fE.VO(Pp["2D"],Pp.Color({dataType:"uniform"}),Pp.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:jm(this.ti),flipXY:"rows"===this.Co.dataOrder,normalSource:void 0}))}:void 0),h){const t=this.$N.wireframeStyleLine(h),i=this.$N.wireframeStyleFill(h);f.wireframe=t&&i?-1===t.getThickness()?{renderMode:"primitive",shader:this.fE.VO(Pp["2D"],Pp.Color({dataType:"uniform"}),Pp.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Co.dataOrder,axisWorldTranslation:jm(this.ti),normalSource:void 0})),fillStyleSolid:i}:{renderMode:"triangulated",shader:this.fE.VO(Pp["2D"],Pp.Color({dataType:"uniform"}),Pp.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Co.dataOrder,axisWorldTranslation:jm(this.ti),normalSource:void 0})),geometry:ES(this.fE,1),solidLine:t,fillStyleSolid:i}:void 0,f.wireframe?this.QW=this.QW||this.JW():this.QW&&(this.fE.Zz(this.QW.wireframeCoordinatesBuffer),this.QW=void 0)}if(f.mousePicking=u?this.tU.mousePicking||{shader:this.fE.VO(Pp["2D"],Pp.MousePicking,Pp.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:jm(this.ti),flipXY:"rows"===this.Co.dataOrder,normalSource:void 0}))}:void 0,this.tU=f,void 0===this.Dl&&r&&"value"===r.lookUpProperty&&r.lut.percentageValues){let t=Or,i=zr;this.XW.gridTiles.forEach((s=>{for(let e=0;e<s.intensityData.length;e+=1){const h=s.intensityData[e];h<t&&(t=h),h>i&&(i=h)}})),this.Dl={min:t,max:i}}return this.Pl=!1,this.UW.length=0,this.Va(i),this.$W=e,this.GW.o=!1,this}ZW(){const t=this.jW.gridTiles.map((t=>{const i=Lb(this.fE,t.sizeHeatmapDataVectors.secondary,t.sizeHeatmapDataVectors.primary);return{...t,intensityDataTexture:i,tileData:t}})),i=this.jW.gridTileSizes.map((i=>({...i,tiles:t.filter((t=>t.sizeHeatmapDataVectors.primary===i.sizeHeatmapData.primary&&t.sizeHeatmapDataVectors.secondary===i.sizeHeatmapData.secondary))}))),s=this.fE.Oz([0,0,1,0,0,1,1,1]),e=this.fE.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawMode:e,rectangleLocationsDrawLength:4}}JW(){const t=this.Co.primaryDimensionVectorsCount+1+this.Co.secondaryDimensionVectorsCount+1,i=new Float32Array(4*t);let s=0;for(let t=0;t<this.Co.primaryDimensionVectorsCount+1;t+=1)i[s+0]=t,i[s+1]=0,i[s+2]=t,i[s+3]=this.Co.secondaryDimensionVectorsCount,s+=4;for(let t=0;t<this.Co.secondaryDimensionVectorsCount+1;t+=1)i[s+0]=0,i[s+1]=t,i[s+2]=this.Co.primaryDimensionVectorsCount,i[s+3]=t,s+=4;return{wireframeCoordinatesBuffer:this.fE.Oz(i),wireframeSegmentsLength:t}}qS(t,i){super.qS(t,i);const s=this.Co,e=a({x:Math.min(this.ot.x,this.ot.x+s.columns*this.ct.x),y:Math.min(this.ot.y,this.ot.y+s.rows*this.ct.y)},{x:Math.max(this.ot.x,this.ot.x+s.columns*this.ct.x),y:Math.max(this.ot.y,this.ot.y+s.rows*this.ct.y)}),h=new Map;return this.jW.gridTiles.forEach((t=>{const i="columns"===this.Co.dataOrder?{x:this.ot.x+this.ct.x*t.iFirstVector.primary,y:this.ot.y+this.ct.y*t.iFirstVector.secondary}:{x:this.ot.x+this.ct.x*t.iFirstVector.secondary,y:this.ot.y+this.ct.y*t.iFirstVector.primary},s="columns"===this.Co.dataOrder?{x:this.ct.x*t.sizeHeatmapDataVectors.primary,y:this.ct.y*t.sizeHeatmapDataVectors.secondary}:{x:this.ct.x*t.sizeHeatmapDataVectors.secondary,y:this.ct.y*t.sizeHeatmapDataVectors.primary},e="columns"===this.Co.dataOrder?{x:this.ot.x+this.ct.x*t.iFirstUniqueVector.primary,y:this.ot.y+this.ct.y*t.iFirstUniqueVector.secondary}:{x:this.ot.x+this.ct.x*t.iFirstUniqueVector.secondary,y:this.ot.y+this.ct.y*t.iFirstUniqueVector.primary},r="columns"===this.Co.dataOrder?{x:this.ct.x*t.sizeUniqueHeatmapDataVectors.primary,y:this.ct.y*t.sizeUniqueHeatmapDataVectors.secondary}:{x:this.ct.x*t.sizeUniqueHeatmapDataVectors.secondary,y:this.ct.y*t.sizeUniqueHeatmapDataVectors.primary};h.set(t,{startLocationAxis:i,sizeAxis:s,startRenderLocationAxis:e,renderSizeAxis:r})})),this.KW={boundaries:e,tilesInfo:h},this}gR(t){var i,s;const e=this.XW,h=this.KW,r=1===t?null===(i=this.tU.mousePicking)||void 0===i?void 0:i.shader:null===(s=this.tU.tile)||void 0===s?void 0:s.shader;if(this.tU.tile&&r&&e&&h){const i=r,s=this.tU.tile,n={x:(h.boundaries.max.x-h.boundaries.min.x)*Math.sign(this.ct.x),y:(h.boundaries.max.y-h.boundaries.min.y)*Math.sign(this.ct.y)},o={x:n.x/this.Co.columns,y:n.y/this.Co.rows},a=this.ti.ks(),l={x:o.x/a.x,y:o.y/a.y};if("solid"===s.renderMode||1===t)this.fE.CE(i).Vz(i,((i,h,r)=>{if(1===t)this.fE.jR(i("uColor"),this.ZN);else if("solid"===s.renderMode){const{fillStyleSolid:t}=s;this.fE.jR(i("uColor"),t.getColor())}return this.fE.Wz(i("uIsHighlighted"),1===t||2===t?0:this.ma).jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0).Gz(i("uScale"),this.NE.Yz()).Gz(i("uDisp"),this.NE.jz()).Nz(e.rectangleLocationsBuffer,void 0,{location:h("aPos"),size:2}).Gz(i("uScaling"),[this.ct.x*this.Co.columns,this.ct.y*this.Co.rows]).Gz(i("uTranslationAxis"),[this.ot.x,this.ot.y]).Bm(e.rectangleLocationsDrawMode,e.rectangleLocationsDrawLength),!0}));else if("paletted"===s.renderMode){const{fillStylePaletted:r}=s,n=this.Dl;this.fE.Vz(i,((s,o,a)=>{let u=!1;var c,d;return this.fE.CE(i).Gz(s("uScale"),this.NE.Yz()).Gz(s("uDisp"),this.NE.jz()).dN(a,r.lut,n).Nz(e.rectangleLocationsBuffer,void 0,{location:o("aPos"),size:2}).Wz(s("uIsHighlighted"),this.ma).jR(s("uHighlightColorOffset"),2===t?_e:this.xa).Wz(s("uRenderEffectMask"),2===t?1:0),c=t=>{this.fE.Gz(s("uTileDimensions"),["columns"===this.Co.dataOrder?t.sizeHeatmapData.primary:t.sizeHeatmapData.secondary,"columns"===this.Co.dataOrder?t.sizeHeatmapData.secondary:t.sizeHeatmapData.primary])},d=(t,i)=>{const r=h.tilesInfo.get(t.tileData);if(!r)return;let n;const o=this.fE.Mz();if("bilinear"===this.GW._()){const t=(this.ti.x.qt(r.startLocationAxis.x)+l.x/2)*o,i=(this.ti.y.qt(r.startLocationAxis.y)+l.y/2)*o;n=[t,i,(this.ti.x.qt(r.startLocationAxis.x+r.sizeAxis.x)-l.x/2)*o-t,(this.ti.y.qt(r.startLocationAxis.y+r.sizeAxis.y)-l.y/2)*o-i]}else{const t=this.ti.x.qt(r.startLocationAxis.x)*o,i=this.ti.y.qt(r.startLocationAxis.y)*o;n=[t,i,this.ti.x.qt(r.startLocationAxis.x+r.sizeAxis.x)*o-t,this.ti.y.qt(r.startLocationAxis.y+r.sizeAxis.y)*o-i]}this.fE.oV(s("uTileBounds"),n).Gz(s("uScaling"),[r.renderSizeAxis.x,r.renderSizeAxis.y]).Gz(s("uTranslationAxis"),[r.startRenderLocationAxis.x,r.startRenderLocationAxis.y]).Uz(s("uTileIntensityValues"),t.intensityDataTexture,1).Bm(e.rectangleLocationsDrawMode,e.rectangleLocationsDrawLength),u=!0},e.gridTileSizes.forEach((t=>{c(t),t.tiles.forEach((t=>{d(t)}))})),u}))}}const n=this.QW,o=this.tU.wireframe,a=1===t||null==o?void 0:o.shader;if(n&&o&&a&&"primitive"===o.renderMode){const{fillStyleSolid:i}=o;this.fE.CE(a).Vz(a,((s,e,h)=>((this.ti instanceof Nn||this.ti instanceof cv)&&this.fE.Gz(s("uScale"),this.NE.Yz()).Gz(s("uDisp"),this.NE.jz()),this.fE.Wz(s("uIsHighlighted"),1===t||2===t?0:this.ma).jR(s("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(s("uRenderEffectMask"),2===t?1:0).jR(s("uColor"),i.getColor()).Nz(n.wireframeCoordinatesBuffer,void 0,{location:e("aPos"),size:2}).Gz(s("uScaling"),[this.ct.x,this.ct.y]).Gz(s("uTranslationAxis"),[this.ot.x,this.ot.y]).Bm(this.fE.gl.LINES,2*n.wireframeSegmentsLength),!0)))}else if(n&&o&&a&&"triangulated"===o.renderMode){const{geometry:i,solidLine:s,fillStyleSolid:e}=o;this.fE.CE(a).Vz(a,((h,r,o)=>((this.ti instanceof Nn||this.ti instanceof cv)&&this.fE.Gz(h("uScale"),this.NE.Yz()).Gz(h("uDisp"),this.NE.jz()),this.fE.Wz(h("uIsHighlighted"),1===t||2===t?0:this.ma).jR(h("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(h("uRenderEffectMask"),2===t?1:0).jR(h("uColor"),e.getColor()).Wz(h("uThicknessPixels"),s.getThickness()).Gz(h("uRatioPxClip"),[2/this.$s.Hi().x,2/this.$s.Hi().y]).Nz(n.wireframeCoordinatesBuffer,1,{location:r("aLocationA"),size:2},{location:r("aLocationB"),size:2}).Gz(h("uScaling"),[this.ct.x,this.ct.y]).Gz(h("uTranslationAxis"),[this.ot.x,this.ot.y]),i.CE(o,!1).Bm(n.wireframeSegmentsLength),!0)))}return this}hb(t){return this.UW.push(t),Bb(this.jW.gridTiles,t,(t=>(t.hasIntensityData=!0,t.intensityData))),this.Dl=void 0,this}_i(){return this.WW&&(this.jW.gridTiles.forEach((t=>{t.intensityData.fill(0),t.hasIntensityData=!1})),this.Pl=!0,this.WW=!1,this.Dl=void 0),this}dispose(){super.dispose();const t=this.XW;t&&(t.gridTiles.forEach((t=>{this.fE.yE(t.intensityDataTexture)})),t.gridTiles.length=0,t.gridTileSizes.forEach((t=>{})),t.gridTileSizes.length=0,this.fE.Zz(t.rectangleLocationsBuffer)),this.XW=void 0;const i=this.QW;return i&&this.fE.Zz(i.wireframeCoordinatesBuffer),this.QW=void 0,this.tU={},this}vE(){return this.dispose(),this}UN(t){return this.XN===t&&{}}kd(t){const i=t,s="columns"===this.Co.dataOrder?i.x:i.y,e="columns"===this.Co.dataOrder?i.y:i.x,h="columns"===this.Co.dataOrder?this.ot.x:this.ot.y,r="columns"===this.Co.dataOrder?this.ot.y:this.ot.x;let n=(s-h)/("columns"===this.Co.dataOrder?this.ct.x:this.ct.y),o=(e-r)/("columns"===this.Co.dataOrder?this.ct.y:this.ct.x);n=Math.floor(Bh(n,0,this.Co.primaryDimensionVectorsCount-1)),o=Math.floor(Bh(o,0,this.Co.secondaryDimensionVectorsCount-1));const a=this.qW(n,o),l="columns"===this.Co.dataOrder?{x:this.ot.x+(n+.5)*this.ct.x,y:this.ot.y+(o+.5)*this.ct.y}:{x:this.ot.x+(o+.5)*this.ct.x,y:this.ot.y+(n+.5)*this.ct.y},u="columns"===this.Co.dataOrder?n:o,c="columns"===this.Co.dataOrder?o:n;return{x:l.x,y:l.y,column:u,row:c,cellValue:a}}yM(t){const i=this.KW;if(!i||t.x<i.boundaries.min.x||t.x>i.boundaries.max.x||t.y<i.boundaries.min.y||t.y>i.boundaries.max.y)return;const s=t,e="columns"===this.Co.dataOrder?s.x:s.y,h="columns"===this.Co.dataOrder?s.y:s.x,r="columns"===this.Co.dataOrder?this.ot.x:this.ot.y,n="columns"===this.Co.dataOrder?this.ot.y:this.ot.x,o="columns"===this.Co.dataOrder?this.ct.x:this.ct.y,a="columns"===this.Co.dataOrder?this.ct.y:this.ct.x,l=Bh((e-r)/o-.5,0,this.Co.primaryDimensionVectorsCount-1),u=Bh((h-n)/a-.5,0,this.Co.secondaryDimensionVectorsCount-1),c=Bh(Math.ceil(l)-1,0,this.Co.primaryDimensionVectorsCount-1),d=Bh(Math.ceil(u)-1,0,this.Co.secondaryDimensionVectorsCount-1),f={point:{x:c,y:d},value:this.qW(c,d)},A={point:{x:c,y:d+1},value:this.qW(c,d+1)},g={point:{x:c+1,y:d},value:this.qW(c+1,d)},v={point:{x:c+1,y:d+1},value:this.qW(c+1,d+1)},y=jl({x:l,y:u},f,A,g,v);if(void 0===y)return;const m=Bh(Math.floor(l+.5),0,this.Co.primaryDimensionVectorsCount-1),p=Bh(Math.floor(u+.5),0,this.Co.secondaryDimensionVectorsCount-1),S="columns"===this.Co.dataOrder?m:p,b="columns"===this.Co.dataOrder?p:m,x=t;return{x:x.x,y:x.y,column:S,row:b,cellValue:y}}qW(t,i){for(let s=0;s<this.jW.gridTiles.length;s+=1){const e=this.jW.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const s=t-e.iFirstVector.primary,h=i-e.iFirstVector.secondary,r=s*e.sizeHeatmapDataVectors.secondary+h;return e.intensityData[r]}}return 0}ni(){var t;return(null===(t=this.KW)||void 0===t?void 0:t.boundaries.max.x)||0}ri(){var t;return(null===(t=this.KW)||void 0===t?void 0:t.boundaries.min.x)||0}ai(){var t;return(null===(t=this.KW)||void 0===t?void 0:t.boundaries.max.y)||0}oi(){var t;return(null===(t=this.KW)||void 0===t?void 0:t.boundaries.min.y)||0}tu(){return 0}iu(){return 0}fw(){const t=[];return this.jW.gridTiles.forEach((i=>{if(!i.hasIntensityData)return;const s=new Array(i.sizeUniqueHeatmapDataVectors.primary).fill(0).map((t=>new Array(i.sizeUniqueHeatmapDataVectors.secondary).fill(0)));for(let t=0;t<i.sizeUniqueHeatmapDataVectors.primary;t+=1){const e=t*i.sizeHeatmapDataVectors.secondary,h=s[t];for(let t=0;t<i.sizeUniqueHeatmapDataVectors.secondary;t+=1){const s=i.intensityData[e+t];h[t]=s}}t.push({type:"intensity",startPrimary:i.iFirstUniqueVector.primary,startSecondary:i.iFirstUniqueVector.secondary,lengthPrimary:i.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:i.sizeUniqueHeatmapDataVectors.secondary,values:s})})),t}}class zb extends el{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.ot={x:0,y:0},this.ct={x:1,y:1},this.ZS=Pa.lineStyle,this.Ku=u(void 0),this.GW=u("bilinear"),this.engine=t,this.Co=r}qS(t,i){return this.ot=t,this.ct=i,this}tb(){return{start:this.ot,step:this.ct}}QS(t){return this.ZS="function"==typeof t?t(this.ZS):t,this}ib(){return this.ZS}qu(t){return this.Ku.M(t),this}tc(){return this.Ku._()}sb(t){return this.GW.M(t),this}eb(){return this.GW._()}}class Vb extends zb{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.tY=0,this.I_=[],this.zN=t,this.VN=i,this.XN=r,this.ZN=n,this.fE=t.NN(),this.VN=i,this.wl="columns"===o.scrollDimension?a({x:this.ot.x,y:this.ot.y},{x:this.ot.x,y:this.ot.y+o.resolution*this.ct.y}):a({x:this.ot.x,y:this.ot.y},{x:this.ot.x+o.resolution*this.ct.x,y:this.ot.y}),this.iY={dataPerSegment:2048}}de(){this.qU||(this.Sa.push({type:"DataPattern",args:{pattern:"columns"===this.Co.scrollDimension?this.ct.x>0?"ProgressiveX":"RegressiveX":this.ct.y>0?"ProgressiveY":"RegressiveY",regularProgressiveStep:!0}}),this.qU=new jS(this.ti,this));const t=this.qU.HU(this.I_,this.Ku._());if(t>0){for(let i=0;i<t;i+=1)this.I_[0].shape.dispose().vE(),this.I_.shift();"columns"===this.Co.scrollDimension?this.wl.min.x=this.I_.length>0?this.I_[0].boundaries.min.x:Or:this.wl.min.y=this.I_.length>0?this.I_[0].boundaries.min.y:Or}this.I_.forEach((t=>t.shape.de()));const i=this.I_.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,Rh(null===(s=i.shape.Dl)||void 0===s?void 0:s.min,Or)),t.max=Math.max(t.max,Rh(null===(e=i.shape.Dl)||void 0===e?void 0:e.max,zr)),t}),{min:Or,max:zr});return this.I_.forEach((t=>{t.shape.Dl=i})),this.Ku.o=!1,this}gR(t){return this.I_.forEach((i=>i.shape.gR(t))),this}lb(t){if(0===t.length)return this;let i=0;const s=this.iY.dataPerSegment,e=t.length;do{let h=this.I_[this.I_.length-1],r=h?s-(h.existingDataPointsCount+(h.hasJoint?1:0)):0,n=!1;if(!h||0===r){const t={columns:"columns"===this.Co.scrollDimension?s:this.Co.resolution,rows:"rows"===this.Co.scrollDimension?s:this.Co.resolution,heatmapDataType:this.Co.heatmapDataType,dataOrder:this.Co.scrollDimension};let i="columns"===this.Co.scrollDimension?{x:this.ot.x+this.ct.x*this.tY,y:this.ot.y}:{x:this.ot.x,y:this.ot.y+this.ct.y*this.tY};this.I_.length>0&&(i="columns"===this.Co.scrollDimension?{x:i.x-1*this.ct.x,y:i.y}:{x:i.x,y:i.y-1*this.ct.y},n=!0);const e=new Ob(this.zN,this.VN,this.ti,Ph,[],t,this.XN,this.ZN).sb(this.GW._()).ah(this.sh).QS(this.ZS).qS(i,this.ct);h={shape:e,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:s,dataStartIndex:this.tY,hasJoint:!1,boundaries:{min:{x:e.ri(),y:e.oi()},max:{x:e.ni(),y:e.ai()}}},this.I_.push(h),r=s-(n?1:0)}const o=e-i,a=Math.min(r,o),l=t.slice(i,i+a),u={type:"intensity",values:l,startPrimary:h.existingDataPointsCount+(h.hasJoint?1:0),startSecondary:0,lengthPrimary:a,lengthSecondary:this.Co.resolution};n&&(u.values.unshift(this.sY),u.lengthPrimary+=1,h.hasJoint=!0),h.shape.hb(u),h.existingDataPointsCount+=a,h.existingCoordinatesCount+=a+(n?1:0),this.sY=l[l.length-1],this.tY+=a,i+=a}while(i<e);return this.wl.max="columns"===this.Co.scrollDimension?{...this.wl.max,x:this.ot.x+this.tY*this.ct.x}:{...this.wl.max,y:this.ot.y+this.tY*this.ct.y},this}hb(t,i){const s=t,e=t+i.length-1,h=i[0].length;this.I_.forEach((t=>{const r=t.dataStartIndex,n=t.dataStartIndex+t.existingDataPointsCount-1;if(e<r||s>n)return;const o=s-r,a=Math.min(e,n),l=a-o+1,u=i.slice(o-s,a-s+1),c={type:"intensity",startSecondary:0,lengthSecondary:h,startPrimary:o,lengthPrimary:l,values:u};t.shape.hb(c)}));const r=this.tY-1;if(e>r){const t=e-r,s=i.slice(-t);if(s.length<t){const i=this.sY||new Array(h).fill(0);for(let e=s.length;e<t;e+=1)s.unshift(i)}this.lb(s)}return this}bw(){return this.tY}_i(){return this.I_.forEach((t=>{t.shape.dispose().vE()})),this.I_.length=0,this.wl="columns"===this.Co.scrollDimension?a({x:this.ot.x,y:this.ot.y},{x:this.ot.x,y:this.ot.y+this.Co.resolution*this.ct.y}):a({x:this.ot.x,y:this.ot.y},{x:this.ot.x+this.Co.resolution*this.ct.x,y:this.ot.y}),this.tY=0,this.sY=void 0,this}qS(t,i){return super.qS(t,i),this.I_.forEach(((s,e)=>{const h={x:t.x+s.dataStartIndex*i.x,y:t.y+s.dataStartIndex*i.y};s.shape.qS(h,i),s.boundaries={min:{x:s.shape.ri(),y:s.shape.oi()},max:{x:s.shape.ni(),y:s.shape.ai()}}})),this.I_.length>0?this.wl=sn(...this.I_.map((t=>t.boundaries))):this.wl="columns"===this.Co.scrollDimension?a({x:this.ot.x,y:this.ot.y},{x:this.ot.x,y:this.ot.y+this.Co.resolution*this.ct.y}):a({x:this.ot.x,y:this.ot.y},{x:this.ot.x+this.Co.resolution*this.ct.x,y:this.ot.y}),this}ah(t){return super.ah(t),this.I_.forEach((t=>t.shape.ah(this.sh))),this}QS(t){return super.QS(t),this.I_.forEach((t=>t.shape.QS(this.ZS))),this}sb(t){return super.sb(t),this.I_.forEach((i=>i.shape.sb(t))),this}dispose(){return super.dispose(),this.I_.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.I_.forEach((i=>i.shape.setVisible(t))),this}vE(){return this.I_.forEach((t=>t.shape.vE())),this}UN(t){return this.XN===t&&{}}kd(t){const i=Ah(t,this.ti,this.engine.ti),s=this.I_.reduce(((s,e)=>{const h=e.shape.kd(t);if(h){const t=Qr(Ah(h,this.ti,this.engine.ti),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.Co.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.Co.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.Co.scrollDimension&&t>=this.tY||"rows"===this.Co.scrollDimension&&i>=this.tY)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}yM(t){const i=Ah(t,this.ti,this.engine.ti),s=this.I_.reduce(((s,e)=>{const h=e.shape.yM(t);if(h){const t=Qr(Ah(h,this.ti,this.engine.ti),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.Co.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.Co.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.Co.scrollDimension&&t>=this.tY||"rows"===this.Co.scrollDimension&&i>=this.tY)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}ni(){return this.wl.max.x}ri(){return this.wl.min.x}ai(){return this.wl.max.y}oi(){return this.wl.min.y}tu(){return 0}iu(){return 0}Xs(t){return super.Xs(t),this.I_.forEach((i=>i.shape.Xs(t))),this}}class Nb extends el{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.GW=u("bilinear"),this.ZS=Pa.lineStyle,this.Co=r}sb(t){return this.GW.M(t),this}eb(){return this.GW._()}QS(t){return this.ZS="function"==typeof t?t(this.ZS):t,this}ib(){return this.ZS}}class Gb extends Nb{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r),this.NE=new SS,this.tU={},this.$N=$m({fillStyleSolid:()=>Oe(this.sh)&&this.sh,fillStylePaletted:()=>Ge(this.sh)&&this.sh}),this.zN=t,this.VN=i,this.XN=n,this.ZN=o,this.fE=t.NN(),this.VN=i,this.cw=new Ob(this.zN,t.eY,t.ti,Ph,[],{columns:r.sectors,rows:r.annuli,heatmapDataType:"intensity",dataOrder:"annuli"===r.dataOrder?"rows":"columns",HW:this.fE.gE},-1,Me).QS(ah);const a=2*Math.PI/360,l=new Float32Array(724);let u=0;l[u+0]=0,l[u+1]=0,u+=2;for(let t=0;t<=360;t+=1){const i=t*a,s=Math.cos(i),e=Math.sin(i);l[u+0]=s,l[u+1]=e,u+=2}this.hY={vertexBuffer:this.fE.Oz(l),drawMode:this.fE.gl.TRIANGLE_FAN,drawLength:362}}de(){const t=this.Ra(),i=this.sh,s=this.$N.fillStyleSolid(t),e=this.$N.fillStylePaletted(t),h=s||e,r=this.GW._(),n=this.GW.o,o=this.Aa._(),a=this.Aa.o;return this.NE.Xz(this.ti),this.cw.de(),this.cw.XW?((t||n)&&(this.tU.fill=h?{shader:this.fE.VO(Pp["2D"],Pp.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:jm(this.ti),normalSource:void 0}),e&&Pp.PolarHeatmap({interpolation:"bilinear"===r&&"bilinear",intensityTextureType:this.fE.LO?"float":"ubyte",littleEndian:this.fE.IS_MACHINE_LITTLE_ENDIAN,flipXY:"sectors"===this.Co.dataOrder,lut:e.lut}),s&&Pp.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:e,fillStyleSolid:s}:void 0),a&&(this.tU.mousePicking=o?{shader:this.fE.VO(Pp["2D"],Pp.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:jm(this.ti),normalSource:void 0}),Pp.Color({dataType:"uniform"}))}:void 0),this.Va(i),this.GW.o=!1,this.Aa.o=!1,this):this}gR(t){var i;const{vertexBuffer:s,drawLength:e,drawMode:h}=this.hY,r=this.cw.XW;if(!this.tU.fill||!r)return this;const{fillStylePaletted:n,fillStyleSolid:o}=this.tU.fill,a=1===t?null===(i=this.tU.mousePicking)||void 0===i?void 0:i.shader:this.tU.fill.shader;if(!a)return this;const l=this.ti.Jx(),u=Math.min(l.start,l.end),c=Math.max(l.start,l.end),d=Math.min(this.Co.amplitudeStart,this.Co.amplitudeStart+(this.Co.annuli-1)*this.Co.amplitudeStep),f=Math.max(this.Co.amplitudeStart,this.Co.amplitudeStart+(this.Co.annuli-1)*this.Co.amplitudeStep);let A;return A=l.end>l.start?Math.min(f,c)-l.start:Math.max(d,u)-l.start,this.fE.CE(a).Vz(a,((i,a,l,u)=>{if(this.fE.Gz(i("uScale"),this.NE.Yz()).Gz(i("uDisp"),this.NE.jz()).Wz(i("uIsHighlighted"),1===t||2===t?0:this.ma).jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0).Gz(u("uViewportSize"),[this.zN.Hi().x*this.fE.Mz(),this.zN.Hi().y*this.fE.Mz()]).Gz(i("uScaling"),[A,A]).Gz(i("uTranslationAxis"),[0,0]).Nz(s,void 0,{location:a("aPos"),size:2}).Wz(u("uAngleOffset"),this.ti.sM()%(2*Math.PI)).Wz(u("uAngleDirection"),this.ti.oM()?1:-1).Wz(u("uSectors"),this.Co.sectors).Wz(u("uAnnuli"),this.Co.annuli),1===t)this.fE.jR(i("uColor"),this.ZN);else{if(this.fE.Wz(i("uAmplitudeStart"),this.Co.amplitudeStart).Wz(i("uAmplitudeStep"),this.Co.amplitudeStep).Wz(i("uAmplitudeAxisStart"),this.ti.Jx().start).Wz(i("uAmplitudeAxisEnd"),this.ti.Jx().end),n){const t=this.cw.Dl;this.fE.dN(l,n.lut,t).Uz(i("uTileIntensityValues"),r.gridTiles[0].intensityDataTexture,0)}o&&this.fE.jR(i("uColor"),o.getColor())}return this.fE.Bm(h,e),!0})),this}hb(t){return this.cw.hb(t),this}_i(){return this.cw._i(),this}dispose(){return super.dispose(),this.cw.dispose(),this.tU={},this.fE.Zz(this.hY.vertexBuffer),this}vE(){return this.dispose(),this}ah(t){return super.ah(t),this.cw.ah(this.sh),this}UN(t){return this.XN===t&&{}}kd(t){const i=this.Co.amplitudeStart,s=this.Co.amplitudeStart+(this.Co.annuli-1)*this.Co.amplitudeStep,e=Math.min(i,s),h=Math.max(i,s);if(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>h)return;let r=Math.round((t.angle-0)/360*this.Co.sectors);r>=this.Co.sectors&&(r=0);const n=Math.round((t.amplitude-i)/(s-i)*(this.Co.annuli-1));return{iAnnulus:n,iSector:r,cellValue:this.qW(n,r),angle:r*(360/this.Co.sectors),amplitude:i+n*(s-i)/(this.Co.annuli-1)}}yM(t){const i=this.Co.amplitudeStart,s=this.Co.amplitudeStart+(this.Co.annuli-1)*this.Co.amplitudeStep,e=Math.min(i,s),h=Math.max(i,s);if(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>h)return;const r=(t.angle-0)/360*this.Co.sectors,n=(t.amplitude-i)/(s-i)*(this.Co.annuli-1),o=Math.floor(r),a=Math.floor(n),l={point:{x:a,y:o},value:this.qW(a,o)},u={point:{x:a,y:o+1},value:this.qW(a,o+1)},c={point:{x:a+1,y:o},value:this.qW(a+1,o)},d={point:{x:a+1,y:o+1},value:this.qW(a+1,o+1)},f=jl({x:n,y:r},l,u,c,d);return void 0!==f?{iAnnulus:a,iSector:o,cellValue:f,angle:t.angle,amplitude:t.amplitude}:void 0}qW(t,i){const s="annuli"===this.Co.dataOrder?t:i,e="annuli"===this.Co.dataOrder?i:t;for(let t=0;t<this.cw.jW.gridTiles.length;t+=1){const i=this.cw.jW.gridTiles[t];if(s>=i.iFirstVector.primary&&s<=i.iFirstVector.primary+i.sizeHeatmapDataVectors.primary-1&&e>=i.iFirstVector.secondary&&e<=i.iFirstVector.secondary+i.sizeHeatmapDataVectors.secondary-1){const t=s-i.iFirstVector.primary,h=e-i.iFirstVector.secondary,r=t*i.sizeHeatmapDataVectors.secondary+h;return i.intensityData[r]}}return 0}ni(){return 0}ri(){return 0}ai(){return 0}oi(){return 0}tu(){return 0}iu(){return 0}}class Ub extends uS{constructor(t){super(t);const{vertices:i,drawMode:s,drawSize:e}=this.GG();this.UG=t.Oz(i),this.YG=e,this.HG=s}CE(t){return this.fE.Nz(this.UG,0,{location:t.attribute("aCurveOrBaseline"),size:1},{location:t.attribute("aSegmentSide"),size:1}),this}Bm(t,i,s){return this.fE.TV(void 0!==i?i:this.HG,s||0,this.YG,t),this}GG(){return{vertices:new Float32Array([1,0,0,0,0,1,0,1,1,1,1,0]),drawMode:this.fE.gl.TRIANGLES,drawSize:6}}rz(){this.fE.Zz(this.UG)}}const Wb=t=>{let i=t.sV.iz.get(void 0);return i||(i=new Ub(t),t.sV.iz.set(void 0,i),i)};class Yb extends pl{constructor(i,s,e,h){super(i,s,e,h,[{type:"DataPattern",args:{pattern:"ProgressiveX"}}]),this.rY=Pa.fillStyle,this.nY=Pa.fillStyle,this.oY=u(t.PointShape.Circle),this.aY=u(5),this.lY=u(0),this.uY=u(void 0),this.kk=!0,this.cY={x:0,y:0}}Hd(t){return this.rY=qa(this.rY,t),this}Fk(){return this.rY}dY(){return tl(this.fY,this.rY)}AY(){return tl(this.gY,this.nY)}Yd(i){return this.nY=qa(this.nY,i),nu(this.nY)&&(this.$d(t.PointShape.Square),this.Kd(1)),this}Jd(){return this.nY}$d(t){return this.oY.M(t),fu(this.oY._())&&this.Kd(1),this}Xd(){return this.oY._()}Kd(t){return this.aY.M(t),this}Ik(){return this.aY._()}Zd(t){return this.lY.M(t),this}Qd(){return this.lY._()}Pk(t){return this.cY=t,this}Dk(){return this.cY}Ck(t){return this.uY.M(t),this}Bk(){return this.uY._()}}class Hb extends GS{constructor(t,i){super(t,i),this.MU=!1,this._U={enabled:!1,totalDataPointsAtTime:0},this.CU=t instanceof Nn?{type:"linear",scale:t}:{type:"unknown"},this.xU._a("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.MU=!0)}))}vY(t,i){var s,e;const h=null==t?void 0:t.od,r=null==t?void 0:t.ad,n=null==t?void 0:t.Yc,o=null==t?void 0:t.Wc;if(!t||this.MU||!this.pU||"linear"!==this.CU.type||!h||!r||void 0===n||void 0===o||!i)return{cpStateChanged:!1,cpActive:!1};const a=null===(s=t.nd())||void 0===s?void 0:s.x,l=null===(e=t.Cd())||void 0===e?void 0:e.x;if(n<2||void 0===a||void 0===l)return{cpStateChanged:!1,cpActive:!1};const u=this.calculateAvgStepBetweenDataPoints(l,a,n),c=this.CU.scale,d=Math.abs("x"===this.pU?c.ks().x:c.ks().y),f=d/u,A=Math.floor(.8*f),g=A*u,v=A>=4,y=this._U.enabled?this._U.columnWidthAxis/d<1.5:void 0,m=this._U.enabled&&A>this._U.dataPointsPerColumn?A/this._U.dataPointsPerColumn>=2:void 0;let p;return!0===this._U.enabled?y?m&&(p={enabled:!0,columnWidthAxis:g,dataPointsPerColumn:A,totalDataPointsAtTime:n}):p=v?{enabled:!0,columnWidthAxis:g,dataPointsPerColumn:A,totalDataPointsAtTime:n}:{enabled:!1,totalDataPointsAtTime:n}:v&&(p={enabled:!0,columnWidthAxis:g,dataPointsPerColumn:A,totalDataPointsAtTime:n}),this._U=p||{...this._U,totalDataPointsAtTime:n},!!p&&this.By(),{cpStateChanged:!!p,cpActive:this._U.enabled}}yY(t,i){var s,e,h;const r=t.od,n=t.ad,o=t.Hc,a=t.Yc,l=t.Wc;if(this.MU||!this._U.enabled||!r||!n||void 0===i)return;const u=r.length,c=this._U.columnWidthAxis,d=this.ti.x.getInnerStart(),f=this.ti.x.getInnerEnd(),A=mu(d,f,r,o,a,l,i,1);if(!A)return;const g=r[A.iFirstSampleDataArray];if(this.mY){if(this.mY.iFirstPackedSample<A.iFirstSample){const t=Math.min(Math.floor((g-this.mY.origin)/c),this.mY.packedColumnsCount);if(t>0)if(this.mY.packedColumnsCount-=t,this.mY.packedColumnsCount>0){this.mY.packedDataX.splice(0,2*t),this.mY.packedDataY.splice(0,2*t),this.mY.packedDataColors&&this.mY.packedDataColors.splice(0,2*t),this.mY.packedDataLookupValues&&this.mY.packedDataLookupValues.splice(0,2*t),this.mY.origin+=t*c;const i=pu(this.mY.origin,Math.max(o-1-u+1,0),o-1,(t=>r[yu(t,o,u)])),s=yu(i,o,u);this.mY.iFirstPackedSample=r[s]>=this.mY.origin?i:i+1}else this.mY=void 0}if(void 0!==(null===(s=this.mY)||void 0===s?void 0:s.iLastPackedSample)&&this.mY.iLastPackedSample>A.iLastSample){const t=r[A.iLastSampleDataArray],i=Math.min(Math.floor((this.mY.origin+this.mY.packedColumnsCount*c-t)/c),this.mY.packedColumnsCount);if(i>0)if(this.mY.packedColumnsCount-=i,this.mY.packedColumnsCount>0){for(let t=0;t<2*i;t+=1)this.mY.packedDataX.pop(),this.mY.packedDataY.pop(),this.mY.packedDataColors&&this.mY.packedDataColors.pop(),this.mY.packedDataLookupValues&&this.mY.packedDataLookupValues.pop();const t=pu(this.mY.origin+this.mY.packedColumnsCount*c,Math.max(o-1-u+1,0),o-1,(t=>r[yu(t,o,u)])),s=yu(t,o,u);this.mY.iLastPackedSample=r[s]<=this.mY.origin+this.mY.packedColumnsCount*c?t:t-1}else this.mY=void 0}}const v=this.mY||{origin:g,packedColumnsCount:0,packedDataX:[],packedDataY:[],packedDataColors:t.yd?[]:void 0,packedDataLookupValues:t.vd?[]:void 0,packedDataSize:t.md?[]:void 0,packedDataRotation:t.pd?[]:void 0,iFirstPackedSample:A.iFirstSample,iLastPackedSample:void 0},y=(t,i,s)=>{let e=Math.min(t,t+i*c),h=Math.max(t,t+i*c),a=s;const l=[];let g=zr,y=zr,m=-1,p=Or,S=Or,b=-1,x=0;for(;a<=A.iLastSample&&a>=A.iFirstSample;){const s=a%u,A=r[s],M=n[s];if(e<=A&&A<=h)x+=1,Number.isNaN(M)||(M>y&&(g=A,y=M,m=a),M<S&&(p=A,S=M,b=a)),a+=i;else{if(x>0)g=g===zr?Number.NaN:g,y=y===zr?Number.NaN:y,p=p===Or?Number.NaN:p,S=S===Or?Number.NaN:S,m<b?(l.push({iFirst:m,iSecond:b}),i>0?(v.packedDataX.push(g),v.packedDataY.push(y),v.packedDataX.push(p),v.packedDataY.push(S)):(v.packedDataX.unshift(p),v.packedDataY.unshift(S),v.packedDataX.unshift(g),v.packedDataY.unshift(y))):(l.push({iFirst:b,iSecond:m}),i>0?(v.packedDataX.push(p),v.packedDataY.push(S),v.packedDataX.push(g),v.packedDataY.push(y)):(v.packedDataX.unshift(g),v.packedDataY.unshift(y),v.packedDataX.unshift(p),v.packedDataY.unshift(S)));else{const t=i>0?v.iLastPackedSample:v.iFirstPackedSample;if(void 0===t)l.push({iFirst:0,iSecond:0}),i>0?(v.packedDataX.push(Number.NaN),v.packedDataY.push(Number.NaN),v.packedDataX.push(Number.NaN),v.packedDataY.push(Number.NaN)):(v.packedDataX.unshift(Number.NaN),v.packedDataY.unshift(Number.NaN),v.packedDataX.unshift(Number.NaN),v.packedDataY.unshift(Number.NaN));else{const s=yu(t,o,u),a=r[s],d=n[s],f=(e+h)/2,g=f-i*c/6,y=d+(g-a)/(A-a)*(M-d),m=f+i*c/6,p=d+(m-a)/(A-a)*(M-d);l.push({iFirst:t,iSecond:t}),i>0?(v.packedDataX.push(g),v.packedDataY.push(y),v.packedDataX.push(m),v.packedDataY.push(p)):(v.packedDataX.unshift(g),v.packedDataY.unshift(y),v.packedDataX.unshift(m),v.packedDataY.unshift(p))}}if(v.packedColumnsCount+=1,i>0?v.iLastPackedSample=a-1:(v.iFirstPackedSample=a+1,v.origin=e),e=Math.min(t+l.length*i*c,t+(l.length+1)*i*c),h=Math.max(t+l.length*i*c,t+(l.length+1)*i*c),x=0,g=zr,y=zr,m=-1,p=Or,S=Or,b=-1,e<d||h>f)break}}return l},m=y(v.origin+v.packedColumnsCount*c,1,void 0!==(null===(e=this.mY)||void 0===e?void 0:e.iLastPackedSample)?this.mY.iLastPackedSample+1:A.iFirstSample),p=y(v.origin,-1,void 0!==(null===(h=this.mY)||void 0===h?void 0:h.iFirstPackedSample)?this.mY.iFirstPackedSample-1:A.iFirstSample),S=t.yd&&v.packedDataColors?[t.yd,v.packedDataColors]:void 0,b=t.vd&&v.packedDataLookupValues?[t.vd,v.packedDataLookupValues]:void 0,x=t.md&&v.packedDataSize?[t.md,v.packedDataSize]:void 0,M=t.pd&&v.packedDataRotation?[t.pd,v.packedDataRotation]:void 0;if(S||b||x||M){for(const t of m){const i=yu(t.iFirst,o,u),s=yu(t.iSecond,o,u);S&&S[1].push(S[0][i],S[0][s]),b&&b[1].push(b[0][i],b[0][s]),x&&x[1].push(x[0][i],x[0][s]),M&&M[1].push(M[0][i],M[0][s])}for(const t of p){const i=yu(t.iFirst,o,u),s=yu(t.iSecond,o,u);S&&S[1].unshift(S[0][s],S[0][i]),b&&b[1].unshift(b[0][s],b[0][i]),x&&x[1].unshift(x[0][s],x[0][i]),M&&M[1].unshift(M[0][s],M[0][i])}}return this.mY=v.packedColumnsCount>0?v:void 0,{x:v.packedDataX,y:v.packedDataY,color:v.packedDataColors,lookup:v.packedDataLookupValues,size:v.packedDataSize,rotation:v.packedDataRotation}}By(){this.mY=void 0}DU(t){if(this.pU&&"linear"===this.CU.type){const i="x"===this.pU?this.CU.scale.x.Eg:this.CU.scale.y.Eg;if(!i)throw new Error("CP helper has no information about Axis state.");if(i.Rh===Yo.progressive||i.Rh===Yo.regressive){const i=Math.abs("x"===this.pU?this.CU.scale.x.getInnerInterval():this.CU.scale.y.getInnerInterval());if(this._U.enabled)return 2*i/this._U.columnWidthAxis;const s=t.length,e=t[0],h=t[s-1];return i/this.calculateAvgStepBetweenDataPoints("x"===this.pU?e.x:e.y,"x"===this.pU?h.x:h.y,s)}}}BU(t,i,s){if(!this.pU)return i;const e=s.length;let h=Ha(s,t.min,this.pU,this.SU,0,e-1);void 0===h&&(h=this.SU?e-1:0);let r=Ha(s,t.max,this.pU,this.SU,0,e-1);return void 0===r&&(r=this.SU?0:e-1),1+Math.abs(r-h)}LU(){}}class jb extends Yb{constructor(t,i,s,e,h,r){super(t,i,s,e),this.NE=new SS,this.JU=new Hb(this.ti,this),this.$N=$m({lineStyleSolid:()=>eo(this.Wu)&&this.Wu,lineStyleDashed:()=>uu(this.Wu)&&this.Wu,strokeFillSolid:()=>{const t=this.Wu.getFillStyle();return Oe(t)&&t},strokeFillLinearGradient:()=>{const t=this.Wu.getFillStyle();return nh(t)&&t},strokeFillRadialGradient:()=>{const t=this.Wu.getFillStyle();return eh(t)&&t},strokeFillIndividual:()=>{const t=this.Wu.getFillStyle();return Ve(t)&&t},strokeFillPaletted:()=>{const t=this.Wu.getFillStyle();return Ge(t)&&t},areaFillSolid:()=>Oe(this.rY)&&this.rY,areaFillLinearGradient:()=>nh(this.rY)&&this.rY,areaFillRadialGradient:()=>eh(this.rY)&&this.rY,areaFillIndividual:()=>Ve(this.rY)&&this.rY,areaFillPaletted:()=>Ge(this.rY)&&this.rY,markerFillSolid:()=>Oe(this.nY)&&this.nY,markerFillLinearGradient:()=>nh(this.nY)&&this.nY,markerFillRadialGradient:()=>eh(this.nY)&&this.nY,markerFillPaletted:()=>Ge(this.nY)&&this.nY,markerFillIndividual:()=>Ve(this.nY)&&this.nY,markerFillImage:()=>nu(this.nY)&&this.nY,markerShapeIcon:()=>{const t=this.oY._();return fu(t)&&t}}),this.Ud=u(void 0),this.pY=[],this.Pl=!1,this.SY=[],this.bY=void 0,this.EW=(t,i,s)=>{var e;const h=null===(e=this.xY)||void 0===e?void 0:e.shapeIcon;let r=t,n=i;return h&&(r=h.Hi().x,n=h.Hi().y),fS(t,i,r*this.aY._(),n*this.aY._(),s)},this.VN=i,this.tU={type:"none"},this.fE=t.NN(),this.zN=t,this.KG=this.fE.RV,this.XN=h,this.ZN=r}Wd(t){return this.Ud.M(Rr(t,this.Ud._(),(()=>[t.Td(((i,s)=>{this.pY.push({min:i,max:s}),void 0===t.Md()&&this.MY&&this.SY.push({min:i,max:s})})),t.Fd((()=>{this.Pl=!0,this.MY=void 0,this.bY=void 0,this.JU.By()}))]))),this.bY=void 0,this}de(){var i,s,h,r,n,o,a,l,u,c,d,f,A,g,v;const y=null===(i=this.Ud._())||void 0===i?void 0:i.Ci,m=this.Ud.o,p=null==y?void 0:y.od,S=null==y?void 0:y.ad;if(!y||!p||!S)return this;const b=y.vd,x=y.yd,M=y.md,_=y.pd,w=y.Hc,C=y.Yc,k=y.Wc,T=this.Wu,F=this.rY,I=m||this.Na()||this.dY()||this.AY(),P=this.$N.lineStyleSolid(I),D=this.$N.lineStyleDashed(I),B=P||D,L=B&&B.getThickness(),R=this.$N.strokeFillSolid(I),E=this.$N.strokeFillLinearGradient(I),O=this.$N.strokeFillRadialGradient(I),z=this.$N.strokeFillIndividual(I),V=this.$N.strokeFillPaletted(I),N=R||E||O||z||V,G=this.$N.areaFillSolid(I),U=this.$N.areaFillLinearGradient(I),W=this.$N.areaFillRadialGradient(I),Y=this.$N.areaFillIndividual(I),H=this.$N.areaFillPaletted(I),j=G||U||W||Y||H,$=this.$N.markerFillSolid(I),X=this.$N.markerFillLinearGradient(I),Z=this.$N.markerFillRadialGradient(I),Q=this.$N.markerFillPaletted(I),J=this.$N.markerFillIndividual(I),K=this.$N.markerFillImage(I),q=$||X||Z||Q||J||K,tt=this.oY._(),it=this.oY.o,st=this.$N.markerShapeIcon(it),et=this.aY._(),ht=this.aY.o,rt=this.uY.o,nt=this.pY.length>0||rt,ot=this.Pl,at=ot?[y._d()]:(t=>{const i=[];for(const s of t){let t=!1;for(const e of i)if(s.min>=e.min&&s.min<=e.max||s.max>=e.min&&s.max<=e.max){e.min=Math.min(e.min,s.min),e.max=Math.min(e.max,s.max),t=!0;break}t||i.push(s)}return i})(this.pY),lt=this.ti.x.Ti,ut=this.ti.x.getInnerStart(),ct=this.ti.x.getInnerEnd(),dt=y.Md(),ft=!!D,At=this.Aa._(),gt=this.Aa.o,{cpStateChanged:vt,cpActive:yt}=this.JU.vY(y,this.kk);if(dt&&yt&&(vt||ot||nt||lt||I)){const t=this.JU.yY(y,dt);if(t){const i=!vt&&!ot&&!I;this._Y=$b(this.fE,[t.x,t.y],t.color,t.lookup,t.size,t.rotation,ft,this._Y,i,dt,1e3,this.ti.us(),(t=>tr(t,this.ti.us()))),this.wY={min:Or,max:zr};const e=t.y.length;for(let i=0;i<e;i+=1){const s=t.y[i];Number.isNaN(s)||(this.wY.min=Math.min(this.wY.min,s),this.wY.max=Math.max(this.wY.max,s))}null===(s=this.ti.y.Eg)||void 0===s||s.$h()}}if(dt&&!yt&&(vt||ot||nt||lt||rt||I)){const i=mu(ut,ct,p,w,C,k,dt,1);if(!this.CY||(null==i?void 0:i.iFirstSample)!==this.CY.iFirstSample||i.iLastSample!==this.CY.iLastSample||ot){this.wY={min:Or,max:zr};for(const t of(null==i?void 0:i.dataRanges)||[])for(let i=t.offset;i<t.offset+t.count;i+=1){const t=S[i];Number.isNaN(t)||(this.wY.min=Math.min(this.wY.min,t),this.wY.max=Math.max(this.wY.max,t))}null===(h=this.ti.y.Eg)||void 0===h||h.$h()}if(this.CY=i,void 0===i)this.fE.Zz(null===(r=this._Y)||void 0===r?void 0:r.bufferX),this.fE.Zz(null===(n=this._Y)||void 0===n?void 0:n.bufferY),this._Y=void 0,this.fE.Zz(null===(o=this.kY)||void 0===o?void 0:o.bufferX),this.fE.Zz(null===(a=this.kY)||void 0===a?void 0:a.bufferY),this.kY=void 0,this.TY=i;else if(vt||ot||!this.TY||i.iFirstSample<this.TY.iFirstSample||i.iLastSample>this.TY.iLastSample||I){let s,h,r,n,o,a;if(1===i.dataRanges.length){const t=i.dataRanges[0];s=p.subarray(t.offset,t.offset+t.count),h=S.subarray(t.offset,t.offset+t.count),r=x?x.subarray(t.offset,t.offset+t.count):void 0,n=b?b.subarray(t.offset,t.offset+t.count):void 0,o=M?M.subarray(t.offset,t.offset+t.count):void 0,a=_?_.subarray(t.offset,t.offset+t.count):void 0}else{const t=i.dataRanges[0],e=i.dataRanges[1],l=t.count+e.count;s=new Float32Array(l),s.set(p.subarray(t.offset),0),s.set(p.subarray(e.offset,e.offset+e.count),t.count),h=new Float32Array(l),h.set(S.subarray(t.offset),0),h.set(S.subarray(e.offset,e.offset+e.count),t.count),x&&(r=new Uint32Array(l),r.set(x.subarray(t.offset),0),r.set(x.subarray(e.offset,e.offset+e.count),t.count)),b&&(n=new Float32Array(l),n.set(b.subarray(t.offset),0),n.set(b.subarray(e.offset,e.offset+e.count),t.count)),M&&(o=new Float32Array(l),o.set(M.subarray(t.offset),0),o.set(M.subarray(e.offset,e.offset+e.count),t.count)),_&&(a=new Float32Array(l),a.set(_.subarray(t.offset),0),a.set(_.subarray(e.offset,e.offset+e.count),t.count))}const u=!vt&&!ot&&!I;this.kY=$b(this.fE,[s,h],r,n,o,a,ft,this.kY,u,dt,1e3,this.ti.us(),(t=>tr(t,this.ti.us())));let c=s,d=h,f=r,A=n;const g=this.uY._();if(g){const i="spline"===g.type?((t,i)=>{const{xValues:s,yValues:h,lookupValues:r,colors:n}=t;if(s.length<=2)return{xValues:Array.from(s),yValues:Array.from(h),lookupValues:r?Array.from(r):void 0,colors:n?Array.from(n):void 0};const o=((t,i)=>{const s=1e-5,h=t.length-1,r=Array(h);if(h>1){let n=e(0,0),o=e(0,0),a=e(0,0),l=on(dn({x:t[1],y:i[1]},{x:t[0],y:i[0]}));const u=3;let c=0,d=0;for(let f=0;f<h;f+=1){const A=Array(4);if(A[0]={x:t[f],y:i[f]},A[1]={x:t[f],y:i[f]},A[3]={x:t[f+1],y:i[f+1]},A[2]={x:t[f+1],y:i[f+1]},a=l,n=o,f+1<h?(l=t[f+2]===t[f+1]&&i[f+2]===i[f+1]?e(0,0):on(dn({x:t[f+2],y:i[f+2]},{x:t[f+1],y:i[f+1]})),o=on(cn(a,l))):o=e(0,0),i[f+1]===i[f])c=0,d=0;else{const i=t[f+1]-t[f];c=Math.abs(n.x)>s?Math.abs(i/(u*n.x)):1,d=Math.abs(o.x)>s?Math.abs(i/(u*o.x)):1}A[1]=cn(un(n,c),A[1]),A[2]=dn(A[2],un(o,d)),r[f]=A}}return r.length>0?r:[]})(s,h),a=o.length,l=[],u=[],c=[],d=[];for(let t=0;t<a;t+=1){const s=o[t];for(let t=0;t<i;t+=1){const e=t/(i-1),h=e*e,r=h*e,n=1-e,o=n*n,a=o*n;l.push(a*s[0].x+3*e*o*s[1].x+3*h*n*s[2].x+r*s[3].x),u.push(a*s[0].y+3*e*o*s[1].y+3*h*n*s[2].y+r*s[3].y)}}if(r)for(let t=0;t<l.length;t+=1){const s=r[Math.round(t/i)];d[t]=s}if(n)for(let t=0;t<l.length;t+=1){const s=n[Math.round(t/i)];c[t]=s}return{xValues:l,yValues:u,lookupValues:r?d:void 0,colors:n?c:void 0}})({xValues:s,yValues:h,lookupValues:n,colors:r},g.resolution||20):"step"===g.type?((i,s)=>{const{xValues:e,yValues:h,lookupValues:r,colors:n}=i,o=[],a=[],l=[],u=[],c=e.length,d=s;if(c>0){let t=0,i=e[0],s=h[0];o[t]=i,a[t]=s,t+=1;for(let r=1;r<c;r+=1){const n=e[r],l=h[r];if(d<=0)o[t]=i,a[t]=l,t+=1;else{const e=i*(1-d)+n*d;o[t]=e,a[t]=s,t+=1,o[t]=e,a[t]=l,t+=1}o[t]=n,a[t]=l,t+=1,i=n,s=l}}if(r)if(d===t.StepOptions.before){u[0]=r[0];for(let t=1;t<c;t+=1)u[2*t-1]=r[t],u[2*t]=r[t]}else if(d===t.StepOptions.middle||d===t.StepOptions.after){u[0]=r[0],u[1]=r[0];for(let t=1;t<c;t+=1)u[3*t-1]=r[t],u[3*t]=r[t],u[3*t+1]=r[t]}if(n)if(d===t.StepOptions.before){l[0]=n[0];for(let t=1;t<c;t+=1)l[2*t-1]=n[t],l[2*t]=n[t]}else if(d===t.StepOptions.middle||d===t.StepOptions.after){l[0]=n[0],l[1]=n[0];for(let t=1;t<c;t+=1)l[3*t-1]=n[t],l[3*t]=n[t],l[3*t+1]=n[t]}return{xValues:o,yValues:a,lookupValues:r?u:void 0,colors:n?l:void 0}})({xValues:s,yValues:h,lookupValues:n,colors:r},"before"===g.step?0:"after"===g.step?1:.5):void 0;c=i?i.xValues:c,d=i?i.yValues:d,f=(null==i?void 0:i.colors)?i.colors:f,A=(null==i?void 0:i.lookupValues)?i.lookupValues:A}this._Y=c===s&&d===h?this.kY:$b(this.fE,[c,d],f,A,void 0,void 0,ft,(null===(l=this._Y)||void 0===l?void 0:l.bufferX)===this.kY.bufferX?void 0:this._Y,!(!u||rt||g),dt,1e3,this.ti.us(),(t=>tr(t,this.ti.us()))),this.TY=i}}if(!dt&&(ot||nt||I)){if(!this._Y||this._Y.bufferSize<y.Yc||ft){const t=void 0!==y.Sd?y.Sd:y.Yc;let i,s=0,e=0;if(ft){const h=Xb(p,S,p[0],S[0],0,0);i=this.fE.AV(2*t,h[0],null===(u=this._Y)||void 0===u?void 0:u.bufferLengthSoFar,Float32Array),s=h[1],e=h[2]}this._Y={bufferX:this.fE.AV(t*(this.ti.us()?2:1),tr(p,this.ti.us()),null===(c=this._Y)||void 0===c?void 0:c.bufferX),bufferY:this.fE.AV(t*(this.ti.us()?2:1),tr(S,this.ti.us()),null===(d=this._Y)||void 0===d?void 0:d.bufferY),bufferColors:x?this.fE.AV(t,x,null===(f=this._Y)||void 0===f?void 0:f.bufferColors,Uint32Array):void 0,bufferLookupValues:b?this.fE.AV(t,b,null===(A=this._Y)||void 0===A?void 0:A.bufferLookupValues,Float32Array):void 0,bufferSizes:M?this.fE.AV(t,M,null===(g=this._Y)||void 0===g?void 0:g.bufferSizes,Float32Array):void 0,bufferRotations:_?this.fE.AV(t,_,null===(v=this._Y)||void 0===v?void 0:v.bufferRotations,Float32Array):void 0,bufferLengthSoFar:i,lengthSoFarX:s,lengthSoFarY:e,bufferSize:t,valueCount:y.Yc}}else{const t=this._Y.bufferX,i=this._Y.bufferY;at.forEach((s=>{var e,h,r,n;const o=p.subarray(s.min,s.max+1),a=S.subarray(s.min,s.max+1);if(this.fE.gV(t,s.min*(this.ti.us()?2:1),tr(o,this.ti.us())),this.fE.gV(i,s.min*(this.ti.us()?2:1),tr(a,this.ti.us())),x&&(null===(e=this._Y)||void 0===e?void 0:e.bufferColors)){const t=x.subarray(s.min,s.max+1);this.fE.gV(this._Y.bufferColors,s.min,t,Uint32Array)}if(b&&(null===(h=this._Y)||void 0===h?void 0:h.bufferLookupValues)){const t=b.subarray(s.min,s.max+1);this.fE.gV(this._Y.bufferLookupValues,s.min,t,Float32Array)}if(_&&(null===(r=this._Y)||void 0===r?void 0:r.bufferRotations)){const t=_.subarray(s.min,s.max+1);this.fE.gV(this._Y.bufferRotations,s.min,t,Float32Array)}if(M&&(null===(n=this._Y)||void 0===n?void 0:n.bufferSizes)){const t=M.subarray(s.min,s.max+1);this.fE.gV(this._Y.bufferSizes,s.min,t,Float32Array)}})),this._Y.valueCount=y.Yc}this.kY=this._Y}if(this.NE.Xz(this.ti),I||ht||it||gt){if(N&&B&&!1!==L){const t=-1===L?"primitive":"triangulated",i=V?["lookup",V.lookUpProperty,V.lut]:z?"attribute":E?["gradient",E]:O?["gradient",O]:"uniform";this.tU="primitive"===t?{type:t,shader:this.fE.VO(Pp["2D"],Pp.Color({dataType:i}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0,splitPosAttribute:!0}),D&&Pp.StippleTexture),lineStyleSolid:P,lineStyleDashed:D,fillStyleSolid:R,fillStyleLinearGradient:E,fillStyleRadialGradient:O,fillStyleIndividual:z,fillStylePaletted:V,mousePickingShader:At&&this.fE.VO(Pp["2D"],Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0,splitPosAttribute:!0}),D&&Pp.StippleTexture,Pp.MousePicking)}:"triangulated"===t?{type:t,shader:this.fE.VO(Pp["2D"],Pp.Color({dataType:i}),Pp.LineInstanced2D({axisWorldTranslation:jm(this.ti),normalSource:void 0,splitPosAttribute:!0}),this.KG?Pp.AliasedEdge:void 0,D&&Pp.StippleTextureInstanced),geometry:ES(this.fE,L),thickness:L,lineStyleSolid:P,lineStyleDashed:D,fillStyleSolid:R,fillStyleLinearGradient:E,fillStyleRadialGradient:O,fillStyleIndividual:z,fillStylePaletted:V,mousePickingShader:At&&this.fE.VO(Pp["2D"],Pp.LineInstanced2D({axisWorldTranslation:jm(this.ti),normalSource:void 0,splitPosAttribute:!0}),D&&Pp.StippleTextureInstanced,Pp.MousePicking)}:{type:"none"}}else this.tU={type:"none"};if(this.FY=j?{shader:this.fE.VO(Pp["2D"],H&&Pp.Color({dataType:["lookup",H.lookUpProperty,H.lut]}),Y&&Pp.Color({dataType:"attribute"}),G&&Pp.Color({dataType:"uniform"}),U&&Pp.Color({dataType:["gradient",U]}),W&&Pp.Color({dataType:["gradient",W]}),Pp.Area2D({axisWorldTranslation:jm(this.ti),normalSource:void 0,splitPosAttribute:!0})),geometry:Wb(this.fE),fillStyleSolid:G,fillStyleLinearGradient:U,fillStyleRadialGradient:W,fillStyleIndividual:Y,fillStylePaletted:H,mousePickingShader:At&&this.fE.VO(Pp["2D"],Pp.Area2D({axisWorldTranslation:jm(this.ti),normalSource:void 0,splitPosAttribute:!0}),Pp.MousePicking)}:void 0,q){const t=!(!K&&!st),i=et>1||t,s=M?"attribute":"uniform",e=!i&&Pp.PointSize("uniform"),h=Pp.VertexLocation({offset:i&&!t?{dataType:s,sizeUnit:"px",symmetric:!0,rotation:{dataType:_?"attribute-deg":"uniform"},useAlignment:!0}:i&&t?{dataType:s,sizeUnit:"scale",rotation:{dataType:_?"attribute-deg":"uniform"},useAlignment:!0}:void 0,axisWorldTranslation:jm(this.ti),normalSource:void 0,splitPosAttribute:!0});this.xY={shader:this.fE.VO(Pp["2D"],e,h,$&&Pp.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!st}),X&&Pp.Color({dataType:["gradient",X],overrideOpacity:!0,maskTexture:!!st}),Z&&Pp.Color({dataType:["gradient",Z],overrideOpacity:!0,maskTexture:!!st}),Q&&Pp.Color({dataType:["lookup",Q.getLookUpProperty(),Q.getPalette()],overrideOpacity:!0,maskTexture:!!st}),J&&Pp.Color({dataType:"attribute",overrideOpacity:!0,maskTexture:!!st}),K&&Pp.Color({dataType:["image",K],overrideOpacity:!0,maskTexture:!!st})),geometry:JS(tt,this.fE,"uniform"===s?et:25),fillStyleSolid:$,fillStyleLinearGradient:X,fillStyleRadialGradient:Z,fillStylePaletted:Q,fillStyleIndividual:J,fillStyleImage:K,mousePickingShader:At&&this.fE.VO(Pp["2D"],e,h,Pp.MousePicking),shapeIcon:st,pointSizeAsScale:t,instancedRendering:i}}else this.xY=void 0}const mt=Ka({min:{x:this.ri(),y:this.ti.y.getInnerStart()},max:{x:this.ni(),y:this.ai()}},{x:this.tu(),y:this.iu()},this.ti),pt=Ka({min:{x:this.ri(),y:this.oi()},max:{x:this.ni(),y:this.ai()}},{x:this.tu(),y:this.iu()},this.ti);if(this.IY=this.fE.mN(E,this,pt),this.PY=this.fE.pN(O,this,pt),this.DY=this.fE.mN(U,this,mt),this.BY=this.fE.pN(W,this,mt),this.LY=this.fE.mN(X,this,pt),this.RY=this.fE.pN(Z,this,pt),(void 0===this.bY||nt)&&b&&(Zm(V)||Zm(H)||Zm(Q))){const t=this.bY?at:[y._d()];let i=this.bY?this.bY.max:zr,s=this.bY?this.bY.min:Or;const e=b;t.forEach((t=>{for(let h=t.min;h<=t.max;h+=1){const t=e[h];s=t<s?t:s,i=t>i?t:i}})),this.bY={min:s,max:i}}return this.sU=D?this.fE.aN(D.getPattern()):void 0,this.RW=this.fE.fN(this,this.RW,K,st,ht,this.EW),this.$u(T),this.fY=F,this.gY=this.nY,this.oY.o=!1,this.aY.o=!1,this.pY.length=0,this.Pl=!1,this.uY.o=!1,this.Ud.o=!1,this.Aa.o=!1,this}gR(t){var i,s,e,h,r,n,o,a,l,u,c,d,f,A,g,v,y;const m=this.fE.gl,p=null===(i=this._Y)||void 0===i?void 0:i.bufferX,S=null===(s=this._Y)||void 0===s?void 0:s.bufferY,b=null===(e=this._Y)||void 0===e?void 0:e.bufferColors,x=null===(h=this._Y)||void 0===h?void 0:h.bufferLookupValues,M=null===(r=this._Y)||void 0===r?void 0:r.valueCount,_=null===(n=this.kY)||void 0===n?void 0:n.valueCount,w=null===(o=this.Ud._())||void 0===o?void 0:o.Ci,C=null==w?void 0:w.Md();if(!p||!S||!w)return this;const k=(i,s,e)=>{if(Zb(this.fE,i,this.ti.us(),p,"aLocation","X",1,!1,m.FLOAT,Float32Array.BYTES_PER_ELEMENT),Zb(this.fE,i,this.ti.us(),S,"aLocation","Y",1,!1,m.FLOAT,Float32Array.BYTES_PER_ELEMENT),s&&1!==t){if(!b)return!1;Zb(this.fE,i,!1,b,"aColor","",4,!0,m.UNSIGNED_BYTE,1)}if(e&&"value"===e.lookUpProperty&&1!==t){if(!x)return!1;Zb(this.fE,i,!1,x,"aLookupValue","",1,!1,m.FLOAT,Float32Array.BYTES_PER_ELEMENT)}return!0},T=1===t?null===(a=this.FY)||void 0===a?void 0:a.mousePickingShader:null===(l=this.FY)||void 0===l?void 0:l.shader;if(this.FY&&T&&void 0!==M&&M>0&&C){const i=this.FY;this.fE.CE(T).Vz(T,((s,e,h,r)=>!!this.fE.gN(h,t,this,{uniforms:this.NE,mousePickingColor:this.ZN,fillStyleSolid:i.fillStyleSolid,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,fillStylePaletted:i.fillStylePaletted,linearGradientInfo:this.DY,radialGradientInfo:this.BY,lookupValueRange:i.fillStylePaletted?Xm(i.fillStylePaletted,this,this.bY):void 0,lookupValueBuffer:null})&&!!k(h,i.fillStyleIndividual,i.fillStylePaletted)&&(null==i||i.geometry.CE(h).Bm(M-1),!0)))}const F="none"===this.tU.type?void 0:1===t?this.tU.mousePickingShader:this.tU.shader;if("none"!==this.tU.type&&F&&void 0!==M&&M>0){const i=this.tU;this.fE.CE(F).Vz(F,((s,e,h,r)=>{var n,o;if(!this.fE.gN(h,t,this,{uniforms:this.NE,mousePickingColor:this.ZN,fillStyleSolid:i.fillStyleSolid,fillStylePaletted:i.fillStylePaletted,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,fillStyleIndividual:i.fillStyleIndividual,linearGradientInfo:this.IY,radialGradientInfo:this.PY,lookupValueRange:i.fillStylePaletted?Xm(i.fillStylePaletted,this,this.bY):void 0,lookupValueBuffer:"primitive"===i.type?x:null,colorBuffer:"primitive"===i.type?b:null,coordsX:"primitive"===i.type?p:void 0,coordsY:"primitive"===i.type?S:void 0,coordsHighPrecision:this.ti.us()}))return!1;if(i.lineStyleDashed){if(!this.sU)return!1;this.fE.Gz(s("uStippleCount"),[this.$s.Hi().x/this.sU.cN,this.$s.Hi().y/this.sU.cN]).Wz(r("uStippleTextureWidthLimiter"),this.sU.uN/this.sU.cN).Wz(s("uStippleScale"),i.lineStyleDashed.getPatternScale()).Uz(s("uStippleTexture"),this.sU.lN,1)}if("primitive"===i.type){if(i.lineStyleDashed){if(!(null===(n=this._Y)||void 0===n?void 0:n.bufferLengthSoFar))return!1;this.fE.pV(e("aLengthSoFar"),this._Y.bufferLengthSoFar)}zS.QG(this.zN,M)}else{if(!k(h,i.fillStyleIndividual,i.fillStylePaletted))return!1;if(i.lineStyleDashed){if(!(null===(o=this._Y)||void 0===o?void 0:o.bufferLengthSoFar))return!1;Zb(this.fE,h,!1,this._Y.bufferLengthSoFar,"aLengthSoFar","",2,!1,m.FLOAT,Float32Array.BYTES_PER_ELEMENT)}OS.gR(this.zN,i.geometry,h,this.KG&&1!==t,1===t,i.thickness,M-1)}return!0}))}const I=null===(u=this.kY)||void 0===u?void 0:u.bufferX,P=null===(c=this.kY)||void 0===c?void 0:c.bufferY,D=null===(d=this.kY)||void 0===d?void 0:d.bufferColors,B=null===(f=this.kY)||void 0===f?void 0:f.bufferLookupValues,L=null===(A=this.kY)||void 0===A?void 0:A.bufferSizes,R=null===(g=this.kY)||void 0===g?void 0:g.bufferRotations,E=1===t?null===(v=this.xY)||void 0===v?void 0:v.mousePickingShader:null===(y=this.xY)||void 0===y?void 0:y.shader,O=this.xY;let z=1;if(C){const t=this.Ud?Math.abs((this.ni()-this.ri())/w.getSampleCount()):0,i=this.ti.x.getInnerInterval()/t,s=this.aY._(),e=this.ti.x.Wi()/s/1,h=2*e;z=i<=e?1:Math.max(1-(i-e)/(h-e),0)}if(E&&O&&I&&P&&z>0&&void 0!==_&&_>0){const i=O,s=i.instancedRendering?1:0;this.fE.CE(E).Vz(E,((e,h,r,n)=>{if(!this.fE.gN(r,t,this,{uniforms:this.NE,mousePickingColor:this.ZN,fillStyleSolid:i.fillStyleSolid,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,linearGradientInfo:this.LY,radialGradientInfo:this.RY,fillStylePaletted:i.fillStylePaletted,fillStyleIndividual:i.fillStyleIndividual,lookupValueRange:i.fillStylePaletted?Xm(i.fillStylePaletted,this,this.bY):void 0,lookupValueBuffer:B,lookupValueAttribDivisor:s,colorBuffer:D,colorAttribDivisor:s,fillStyleImage:i.fillStyleImage,texturedFillGLInfo:this.RW,texCoordAttribDivisor:0,maskTexture:i.shapeIcon&&this.RW,maskTextureCoordsAttribDivisor:0}))return!1;if(this.ti.us()?this.fE.Nz(I,s,{location:h("aPos_highpartX"),size:1},{location:h("aPos_lowpartX"),size:1}).Nz(P,s,{location:h("aPos_highpartY"),size:1},{location:h("aPos_lowpartY"),size:1}):this.fE._V(h("aPosX"),I,s)._V(h("aPosY"),P,s),1!==t&&this.fE.Wz(e("uOpacity"),z),i.instancedRendering)if(R)this.fE._V(h("aRotDeg"),R,s).Wz(e("uBaseRotDeg"),i.geometry.lW);else{const t=pn(this.lY._()+i.geometry.lW),s=Math.sin(t),h=Math.cos(t);this.fE.Gz(e("uRot"),[s,h])}return this.fE.Gz(n("uOffsetAlignment"),[-this.cY.x/2,-this.cY.y/2]),i.geometry.Bm(r,L,_,i.pointSizeAsScale&&this.RW?{scale:this.aY._(),width:i.shapeIcon?i.shapeIcon.Hi().x:this.RW.texture.oz,height:i.shapeIcon?i.shapeIcon.Hi().y:this.RW.texture.az}:this.aY._(),i.instancedRendering),!0}))}return this}UN(t){return this.XN===t&&{}}dispose(){var t,i,s,e,h,r,n,o,a;return super.dispose(),this.fE.Zz(null===(t=this._Y)||void 0===t?void 0:t.bufferX),this.fE.Zz(null===(i=this._Y)||void 0===i?void 0:i.bufferY),this.fE.Zz(null===(s=this._Y)||void 0===s?void 0:s.bufferColors),this.fE.Zz(null===(e=this._Y)||void 0===e?void 0:e.bufferLookupValues),this.fE.Zz(null===(h=this.kY)||void 0===h?void 0:h.bufferX),this.fE.Zz(null===(r=this.kY)||void 0===r?void 0:r.bufferY),this.fE.Zz(null===(n=this.kY)||void 0===n?void 0:n.bufferColors),this.fE.Zz(null===(o=this.kY)||void 0===o?void 0:o.bufferLookupValues),this.tU={type:"none"},this.FY=void 0,this.xY=void 0,this.JU.By(),null===(a=this.Ud._())||void 0===a||a.wi(),this._Y=void 0,this.kY=void 0,this.IY=void 0,this.PY=void 0,this.DY=void 0,this.BY=void 0,this.LY=void 0,this.RY=void 0,this.fE.AN(this,this.RW),this}vE(){return this.dispose(),this}EY(t){if(!this.MY){const{xValues:i,yValues:s}=t.readBack();this.MY={min:{x:Or,y:Or},max:{x:zr,y:zr}};const e=i.length;for(let t=0;t<e;t+=1){const e=i[t],h=s[t];this.MY.min.x=e<this.MY.min.x?e:this.MY.min.x,this.MY.min.y=h<this.MY.min.y?h:this.MY.min.y,this.MY.max.x=e>this.MY.max.x?e:this.MY.max.x,this.MY.max.y=h>this.MY.max.y?h:this.MY.max.y}return this.SY.length=0,this.MY}const i=t.od,s=t.ad;if(this.SY.length>0&&i&&s){for(const t of this.SY){for(let e=t.min;e<=t.max;e+=1){const t=i[e],h=s[e];this.MY.min.x=t<this.MY.min.x?t:this.MY.min.x,this.MY.min.y=h<this.MY.min.y?h:this.MY.min.y,this.MY.max.x=t>this.MY.max.x?t:this.MY.max.x,this.MY.max.y=h>this.MY.max.y?h:this.MY.max.y}this.SY.length=0}return this.MY}return this.MY}ni(){var t,i,s,e,h;const r=null===(t=this.Ud._())||void 0===t?void 0:t.Ci;if(!r)return 0;const n=r.Md();return"ProgressiveX"===n?(null===(i=r.nd())||void 0===i?void 0:i.x)||0:"RegressiveX"===n?(null===(s=r.Cd())||void 0===s?void 0:s.x)||0:"ProgressiveY"===n?(null===(e=this.wY)||void 0===e?void 0:e.max)||0:"RegressiveY"===n?(null===(h=this.wY)||void 0===h?void 0:h.max)||0:this.EY(r).max.x}ri(){var t,i,s,e,h;const r=null===(t=this.Ud._())||void 0===t?void 0:t.Ci;if(!r)return 0;const n=r.Md();return"ProgressiveX"===n?(null===(i=r.Cd())||void 0===i?void 0:i.x)||0:"RegressiveX"===n?(null===(s=r.nd())||void 0===s?void 0:s.x)||0:"ProgressiveY"===n?(null===(e=this.wY)||void 0===e?void 0:e.min)||0:"RegressiveY"===n?(null===(h=this.wY)||void 0===h?void 0:h.min)||0:this.EY(r).min.x}ai(){var t,i,s,e,h;const r=null===(t=this.Ud._())||void 0===t?void 0:t.Ci;if(!r)return 0;const n=r.Md();return"ProgressiveX"===n?Rh(null===(i=this.wY)||void 0===i?void 0:i.max,0):"RegressiveX"===n?Rh(null===(s=this.wY)||void 0===s?void 0:s.max,0):"ProgressiveY"===n?Rh(null===(e=r.nd())||void 0===e?void 0:e.y,0):"RegressiveY"===n?Rh(null===(h=r.Cd())||void 0===h?void 0:h.y,0):this.EY(r).max.y}oi(){var t,i,s,e,h;const r=null===(t=this.Ud._())||void 0===t?void 0:t.Ci;if(!r)return 0;const n=r.Md();return"ProgressiveX"===n?Rh(null===(i=this.wY)||void 0===i?void 0:i.min,0):"RegressiveX"===n?Rh(null===(s=this.wY)||void 0===s?void 0:s.min,0):"ProgressiveY"===n?Rh(null===(e=r.Cd())||void 0===e?void 0:e.y,0):"RegressiveY"===n?Rh(null===(h=r.nd())||void 0===h?void 0:h.y,0):this.EY(r).min.y}tu(){var t,i;let s=this.aY._();this.RW&&(s=Math.max(this.RW.texture.oz,this.RW.texture.az)*this.aY._());const e=Math.max(Fr(this.Wu),(null===(t=this.Ud._())||void 0===t?void 0:t.Ci.td)?25:s),h=null===(i=this.Ud._())||void 0===i?void 0:i.Ci.Md();return!h||"ProgressiveX"!==h&&"RegressiveX"!==h?e:0}iu(){var t,i;let s=this.aY._();this.RW&&(s=Math.max(this.RW.texture.oz,this.RW.texture.az)*this.aY._());const e=Math.max(Fr(this.Wu),(null===(t=this.Ud._())||void 0===t?void 0:t.Ci.td)?25:s),h=null===(i=this.Ud._())||void 0===i?void 0:i.Ci.Md();return!h||"ProgressiveY"!==h&&"RegressiveY"!==h?e:0}}const $b=(t,i,s,e,h,r,n,o,a,l,u,c,d)=>{if("ProgressiveX"!==l)throw new Error("Unimplemented data pattern");const f=i[0],A=i[1],g=f.length,v=f[0],y=f[g-1],m=A[0],p=A[g-1],S=c?2:1;if(o&&a&&o.firstX&&o.lastX&&v>=o.firstX){const i=pu(o.lastX,0,g-1,(t=>f[t]));if(f[i]===o.lastX){const a=o.bufferSize-o.valueCount,l=i+1,u=g-l;if(0===u)return o;if(a>=u){const i=xu(f,l,void 0),a=xu(A,l,void 0);if(t.gV(o.bufferX,o.valueCount*S,d(i)),t.gV(o.bufferY,o.valueCount*S,d(a)),s&&o.bufferColors){const i=s.slice(l);t.gV(o.bufferColors,o.valueCount,i,Uint32Array)}if(e&&o.bufferLookupValues){const i=e.slice(l);t.gV(o.bufferLookupValues,o.valueCount,i,Float32Array)}if(h&&o.bufferSizes){const i=h.slice(l);t.gV(o.bufferSizes,o.valueCount,i,Float32Array)}if(r&&o.bufferRotations){const i=r.slice(l);t.gV(o.bufferRotations,o.valueCount,i,Float32Array)}if(n&&o.bufferLengthSoFar){const[s,e,h]=Xb(i,a,o.lastX||0,o.lastY||0,o.lengthSoFarX,o.lengthSoFarY);t.gV(o.bufferLengthSoFar,2*o.valueCount,s,Float32Array),o.lengthSoFarX=e,o.lengthSoFarY=h}return o.valueCount+=u,o.lastX=y,o.lastY=p,o}}}const b=g+u,x=t.AV(b*S,d(f),null==o?void 0:o.bufferX),M=t.AV(b*S,d(A),null==o?void 0:o.bufferY),_=s?t.AV(b,s,null==o?void 0:o.bufferColors,Uint32Array):void 0,w=e?t.AV(b,e,null==o?void 0:o.bufferLookupValues,Float32Array):void 0,C=h?t.AV(b,h,null==o?void 0:o.bufferSizes,Float32Array):void 0,k=r?t.AV(b,r,null==o?void 0:o.bufferRotations,Float32Array):void 0;let T,F=0,I=0;if(n){const i=Xb(f,A,f[0],A[0],0,0);T=t.AV(2*b,i[0],null==o?void 0:o.bufferLengthSoFar,Float32Array),F=i[1],I=i[2]}return{bufferX:x,bufferY:M,bufferColors:_,bufferLookupValues:w,bufferSizes:C,bufferRotations:k,bufferSize:b,bufferLengthSoFar:T,valueCount:g,firstX:v,lastX:y,firstY:m,lastY:p,lengthSoFarX:F,lengthSoFarY:I}},Xb=(t,i,s,e,h,r)=>{const n=t.length,o=new Float32Array(2*n);if(0===n)return[o,0,0];let a=0,l=s,u=e,c=h,d=r;for(let s=0;s<n;s+=1){const e=t[s],h=i[s];c+=Math.abs(l-e),d+=Math.abs(u-h),o[a]=c,o[a+1]=d,a+=2,l=e,u=h}return[o,c,d]},Zb=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.gl;if(s){const s=i.attribute(`${h}A_highpart${r}`),c=i.attribute(`${h}A_lowpart${r}`),d=i.attribute(`${h}B_highpart${r}`),f=i.attribute(`${h}B_lowpart${r}`);u.bindBuffer(u.ARRAY_BUFFER,e),u.vertexAttribPointer(s,n,a,o,2*n*l,0*l),u.vertexAttribPointer(c,n,a,o,2*n*l,n*l),t.bV(s,1),t.bV(c,1),u.enableVertexAttribArray(s),u.enableVertexAttribArray(c),u.vertexAttribPointer(d,n,a,o,2*n*l,2*n*l),u.vertexAttribPointer(f,n,a,o,2*n*l,3*n*l),t.bV(d,1),t.bV(f,1),u.enableVertexAttribArray(d),u.enableVertexAttribArray(f),u.bindBuffer(u.ARRAY_BUFFER,null)}else{const s=i.attribute(`${h}A${r}`),c=i.attribute(`${h}B${r}`);u.bindBuffer(u.ARRAY_BUFFER,e),u.vertexAttribPointer(s,n,a,o,n*l,0*l),u.vertexAttribPointer(c,n,a,o,n*l,n*l),t.bV(s,1),t.bV(c,1),u.enableVertexAttribArray(s),u.enableVertexAttribArray(c),u.bindBuffer(u.ARRAY_BUFFER,null)}},Qb={translation:(t,i)=>[1,0,0,0,1,0,t,i,1],rotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,-s,0,s,i,0,0,0,1]},scaling:(t,i)=>[t,0,0,0,i,0,0,0,1],translate:(t,i,s)=>Qb.multiply(t,Qb.translation(i,s)),rotate:(t,i)=>Qb.multiply(t,Qb.rotation(i)),scale:(t,i,s)=>Qb.multiply(t,Qb.scaling(i,s)),multiply(t,i){const s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=i[0],d=i[1],f=i[2],A=i[3],g=i[4],v=i[5],y=i[6],m=i[7],p=i[8];return[c*s+d*r+f*a,c*e+d*n+f*l,c*h+d*o+f*u,A*s+g*r+v*a,A*e+g*n+v*l,A*h+g*o+v*u,y*s+m*r+p*a,y*e+m*n+p*l,y*h+m*o+p*u]},projection:(t,i,s)=>[2/t,0,0,0,-2*s/i,0,-1,1*s,1]};class Jb extends nl{constructor(t,i,s,h,r,n,o){super(t,i,s,h,r),this.OY=[],this.NE=new SS,this.zY=[e(0,0),e(0,0),e(0,0),e(0,0)],this.VY=a(e(0,0),e(0,0)),this.NY=a(e(0,0),e(0,0)),this.GY=e(0,0),this.UY=e(0,0),this.aF=e(0,0),this.WY=e(0,0),this.YY=0,this.HY=0,this.$N=$m({fillStyleSolid:()=>Oe(this.sh)&&this.sh,fillStyleRadialGradient:()=>eh(this.sh)&&this.sh,fillStyleLinearGradient:()=>nh(this.sh)&&this.sh}),this.zN=t,this.VN=i,this.XN=n,this.ZN=o,this.fE=t.NN(),this.VN=i,this.lU=t.Co.Po}de(){const t=this.za(),i=this.Oa(),s=this.Aa._();if(t){const t=this.Ra(),h=this.$N.fillStyleSolid(t),r=this.$N.fillStyleRadialGradient(t),n=this.$N.fillStyleLinearGradient(t),o=h||r||n,a=this.fE,l=this.fE.Mz(),u=l!==this.HY;if(this.HY=l,this.NE.Xz(this.ti),this.Qa.o||u){this.jY&&this.jY.kE(this),this.font.M(Ma(this.Qa._(),l));const t=this.font._();this.jY=this.fE.br(t.properties.family),this.jY.CE(this)}const c=this.font.o,d=c||this.Ya.o;if(d&&this.jY){const t=this.font._();[this.$Y,this.NY]=this.jY.FE(this.Ya._(),t,this.zN.zs.isDark),this.OY.forEach((t=>{t.texCoordBuff&&a.Zz(t.texCoordBuff),t.vertexBuff&&a.Zz(t.vertexBuff)})),this.OY=this.$Y.map((t=>({texCoordBuff:a.Oz(t.texCoords,!1),texture:t.texture,info:t}))),this.Qa.o=!1,this.font.o=!1,this.Ya.o=!1}const f=this.ti.ws()||i,A=this.Ha.o||this.$a.o||this.ja.o||this.Xa.o||this.Ja.o||this.Pi.o||d||f,g=this.Ja._(),v=un(e(this.$a._()+1,this.ja._()+1),.5);if(A&&this.$Y&&(this.GY=e(-(g.left*l+this.NY.max.x-this.NY.min.x+g.right*l)*v.x-this.NY.min.x+g.right*l,-(g.bottom*l+this.NY.max.y-this.NY.min.y+g.top*l)*v.y-this.NY.min.y+g.top*l)),(A||f||this.Za.o||this.Ra())&&this.sh!==De){if(this.$Y){const t=cn(this.Ha._(),this.Xa._()),i=Ah(t,this.ti,this.$s.ti),s=un(i,l);this.WY=s;const h=pn(this.Za._());this.YY=h,d&&this.OY.forEach((t=>{const i=t.info;i&&(t.vertexBuffLen=i.vertices.length/2,t.vertexBuff=a.Oz(i.vertices,!0,t.vertexBuff))}));const r=this.Pi._(),n=[cn(rn(e((this.NY.min.x+(-r.left-g.left)*l+this.GY.x)/l,(this.NY.max.y+(r.top+g.top)*l+this.GY.y)/l),this.K,h),i),cn(rn(e((this.NY.max.x+(r.right+g.right)*l+this.GY.x)/l,(this.NY.max.y+(r.top+g.top)*l+this.GY.y)/l),this.K,h),i),cn(rn(e((this.NY.max.x+(r.right+g.right)*l+this.GY.x)/l,(this.NY.min.y+(-r.bottom-g.bottom)*l+this.GY.y)/l),this.K,h),i),cn(rn(e((this.NY.min.x+(-r.left-g.left)*l+this.GY.x)/l,(this.NY.min.y+(-r.bottom-g.bottom)*l+this.GY.y)/l),this.K,h),i)];this.zY=[Ah(n[0],this.$s.ti,this.ti),Ah(n[1],this.$s.ti,this.ti),Ah(n[2],this.$s.ti,this.ti),Ah(n[3],this.$s.ti,this.ti)];const o=qr(n);this.UY=e(-(o.max.x-o.min.x)*l*v.x-o.min.x*l+this.WY.x,-(o.max.y-o.min.y)*l*v.y-o.min.y*l+this.WY.y),this.uv=dn(o.max,o.min);const u=qr(this.zY),c=this.ti.ts(u.min,this.UY),f=this.ti.ts(u.max,this.UY);this.VY=qr([c,f])}r?this.sG=aS(this.VY,this.ti,r.getPosition(),r.getExtent(),r.getShape(),this.fE.Mz()):n?this.eG=lS(this.VY,this.ti,n.getAngle(!0),this.fE.Mz()):(this.sG=void 0,this.eG=void 0)}(this.Ra()||c)&&(this.WE=o?this.fE.VO(Pp["2D"],Pp.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.lU}),Pp.Color({dataType:r?["gradient",r]:n?["gradient",n]:"uniform",maskTextureText:!0})):void 0),this.ZY=s&&o?this.ZY||this.fE.VO(Pp["2D"],Pp.MousePicking,Pp.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.lU})):void 0,this.Ha.o=!1,this.$a.o=!1,this.ja.o=!1,this.Xa.o=!1,this.Za.o=!1,this.Va(this.sh)}return this.Ka=t,this}gR(t){if(this.za()){const i=1===t?this.ZY:this.WE;if(!i||0===this.OY.length)return this;const s=this.$N.fillStyleSolid(!1),e=this.$N.fillStyleRadialGradient(!1),h=this.$N.fillStyleLinearGradient(!1),r=this.$s.yO(),n=r.x,o=r.y;let a=Qb.projection(n,o,-1);const l=Qb.translation(this.GY.x,this.GY.y),u=Qb.translation(this.UY.x,this.UY.y);a=Qb.translate(a,this.WY.x,this.WY.y),a=Qb.multiply(a,u),a=Qb.rotate(a,this.YY),a=Qb.multiply(a,l),1===t&&(a=Qb.scale(a,this.NY.max.x,this.NY.max.y)),this.fE.CE(i).Vz(i,((i,n,o,l)=>{if(this.fE.lV(i("uMatrix"),a).Wz(i("uIsHighlighted"),1===t||2===t?0:this.ma).jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0),this.lU&&this.fE.Gz(l("uViewportSizePx"),[r.x*this.fE.Mz(),r.y*this.fE.Mz()]),1===t)this.fE.jR(i("uColor"),this.ZN);else if(s)this.fE.jR(i("uColor"),s.getColor());else if(e&&this.sG){this.fE.Gz(i("uCenter"),this.sG.center).Gz(i("uDistance"),this.sG.distance).oV(i("uBounds"),this.sG.bounds).Wz(i("uAspect"),this.sG.aspectRatio);const t=e.getColorStops();for(let s=0;s<t.length;s+=1)this.fE.jR(i(`color_${s}`),t[s].color).Wz(i(`stop_${s}`),t[s].offset)}else if(h&&this.eG){this.fE.Gz(i("uStartPoint"),this.eG.startPoint).Gz(i("uEndPoint"),this.eG.endPoint).oV(i("uBounds"),this.eG.bounds);const t=h.getColorStops();for(let s=0;s<t.length;s+=1)this.fE.jR(i(`color_${s}`),t[s].color).Wz(i(`stop_${s}`),t[s].offset)}return 1===t&&this.fE.pV(n("aPos"),this.fE.UV).Bm(this.fE.gl.TRIANGLES,6),1!==t&&this.OY.forEach((t=>{this.fE.pV(n("aPos"),t.vertexBuff).pV(n("aMaskTextureCoord"),t.texCoordBuff).Uz(i("uMaskTexture"),t.texture,0).Bm(this.fE.gl.TRIANGLES,t.vertexBuffLen)})),!0}))}return this}UN(t){return this.XN===t&&{}}Ch(){return this.za()?this.zY:[]}Id(){return this.za()&&this.uv?this.uv:e(0,0)}Hi(){if(this.za()&&this.VY){const t=this.VY;return e(t.max.x-t.min.x,t.max.y-t.min.y)}return e(0,0)}vE(){return this.OY.forEach((t=>{t.texCoordBuff&&this.fE.Zz(t.texCoordBuff),t.vertexBuff&&this.fE.Zz(t.vertexBuff)})),this.OY=[],this.jY&&this.jY.kE(this),this}ni(){return this.VY.max.x}ri(){return this.VY.min.x}ai(){return this.VY.max.y}oi(){return this.VY.min.y}tu(){return 0}iu(){return 0}}class Kb{constructor(t,i,s){this.QY=new Set,this.JY=t=>(this.QY.add(t),t),this.KY=t=>(this.QY.delete(t),t.vE(),this),this.$s=t,this.Ia=i,this.qY=s}AR(t){this.QY.delete(t)&&this.QY.add(t)}Bt(){for(const t of this.QY)t.vE().dispose();this.$s.ho(this.Ia)}ie(){return this.$s.ie(),this}eo(){return this.Ia}}class qb extends Kb{constructor(){super(...arguments),this.tH=u(void 0),this.Pa=!1}Lb(t){return this.tH.M(t),this}ny(){return this.tH._()}}class tx extends qb{constructor(t,i,s){super(t,i,s),this.zN=t,this.gl=t.NN(),this.iH=this.QY}Ez(t){const i=t instanceof Ja&&t;if(!i)return Vr;const s=i.ri(),e=i.ni(),h=i.oi(),r=i.ai();if(s===Or||e===zr||h===Or||r===zr)return Vr;const n=i.tu(),o=i.iu(),a=Ka({min:{x:s,y:h},max:{x:e,y:r}},{x:n,y:o},i.ti),l={min:Ah(a.min,i.ti,t.$s.ti),max:Ah(a.max,i.ti,t.$s.ti)},u=this.tH._();let c;if(u){if(c={min:{x:Math.max(l.min.x,u.x),y:Math.max(l.min.y,u.y)},max:{x:Math.min(l.max.x,u.x+u.width),y:Math.min(l.max.y,u.y+u.height)}},c.max.x<c.min.x||c.max.y<c.min.y)return Vr}else c=l;return c}sH(t){const i=Array.from(this.iH.values());for(let s=0;s<i.length;s+=1){const e=i[s],h=e.UN(t);if(h)return{entity:e,index:s,collectionMember:h.collectionMember}}}Sh(t){const i=this.zN.eH();return this.JY(new VS(this.zN,this,t,this.KY,[],i,this.zN.hH(i)))}gv(t){return this.JY(new NS(this.zN,this,t,this.KY,[],(()=>{const t=this.zN.eH();return{id:t,color:this.zN.hH(t)}})))}Nm(t,i,s){const e=this.zN.eH();return this.JY(new $S(this.zN,this,t,this.KY,s,e,this.zN.hH(e),i))}jd(t){const i=this.zN.eH();return this.JY(new jb(this.zN,this,t,this.KY,i,this.zN.hH(i)))}An(t){const i=this.zN.eH();return this.JY(new Jb(this.zN,this,t,this.KY,[],i,this.zN.hH(i)))}sS(t){const i=this.zN.eH();return this.JY(new KS(this.zN,this,t,this.KY,[],i,this.zN.hH(i)))}Oc(t,i=fl.Simple){const s=this.zN.eH();if(i===fl.Simple)return this.JY(new Fb(this.zN,this,t,this.KY,[],s,this.zN.hH(s)));throw new Error("GlEngine.addPolygon | No such polygon type!")}Cx(t){return this.JY(new kb(this.zN,this,t,this.KY,[],(()=>{const t=this.zN.eH();return{id:t,color:this.zN.hH(t)}})))}lh(t){const i=this.zN.eH();return this.JY(new Tb(this.zN,this,t,this.KY,[],i,this.zN.hH(i)))}Yw(t){const i=this.zN.eH();return this.JY(new LS(this.zN,this,t,this.KY,[],i,this.zN.hH(i)))}Bd(t){const i=this.zN.eH();return this.JY(new CS(this.zN,this,t,this.KY,[],i,this.zN.hH(i)))}Sw(t,i,s){if("intensity"===s.heatmapDataType){const e=this.zN.eH();return this.JY(new Vb(this.zN,this,t,this.KY,i,e,this.zN.hH(e),s))}throw new Sh("Unimplemented Heatmap Grid Static type")}dw(t,i,s){const e=this.zN.eH();return this.JY(new Ob(this.zN,this,t,this.KY,i,s,e,this.zN.hH(e)))}vM(t,i,s){const e=this.zN.eH();return this.JY(new Gb(this.zN,this,t,this.KY,i,s,e,this.zN.hH(e)))}rH(t){return this.JY(new _S(this.zN,this,this.KY,[],t))}de(){if(this.Pa){this.Pa=!1;const t=Array.from(this.QY).sort(((t,i)=>t.Ba()-i.Ba()));this.QY.clear();for(const i of t)this.QY.add(i)}for(const t of this.QY)t.de();return this}gR(t,i){const s=this.tH._();if(s&&this.gl.Rz(s.x*this.gl.Mz()*i,s.y*this.gl.Mz()*i,s.width*this.gl.Mz()*i,s.height*this.gl.Mz()*i),1!==t)for(const i of this.QY)i.getVisible()&&i.gR(t);else for(const i of this.QY)i.getMouseInteractions()&&i.getVisible()&&i.gR(t);return this.gl.Iz(!1),this}}class ix extends uS{constructor(t){super(t)}}class sx extends ix{constructor(t){super(t),this.nH="attribute";const{vertices:i,drawSize:s,drawMode:e}=ex(t.gl);this.eE=t.Oz(i),this.YG=s,this.HG=e}Bm(t,i,s,e){return this.fE.Nz(this.eE,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).TV(this.HG,0,this.YG,i),this}rz(){this.fE.Zz(this.eE)}}const ex=t=>{const i=new Float32Array(324);let s=0;return i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,{vertices:i,drawSize:s/9,drawMode:t.TRIANGLES}};class hx extends ix{constructor(t,i){super(t),this.nH="attribute",this.oH=i;const{vertices:s,indices:e}=rx();this.eE=t.Oz(s),this.WG=t.yV(e),this.YG=e.length,this.HG=t.gl.TRIANGLES}Bm(t,i,s,e){return this.fE.Nz(this.eE,0,{location:t.attribute("aEdge"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).wV(this.WG).Wz(t.uniform("uEdgeRoundness"),this.oH/2).FV(this.HG,this.YG,0,i),this}rz(){this.fE.Zz(this.eE),this.fE.Zz(this.WG)}aH(t){return this.oH=t,this}lH(){return this.oH}}const rx=()=>{const t=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],i=[];let s=0;const e=[];let h=0;for(const r of t){const{normal:t,perpendA:n,perpendB:o}=r,a=Er.multiply(n,-1),l=Er.multiply(o,-1),u=s;i[s]={thicknessDirection:Er.addVec(t,n,o),edge:Er.addVec(a,l),normal:t},s+=1;const c=s;i[s]={thicknessDirection:Er.addVec(t,a,o),edge:Er.addVec(n,l),normal:t},s+=1;const d=s;i[s]={thicknessDirection:Er.addVec(t,a,l),edge:Er.addVec(n,o),normal:t},s+=1;const f=s;i[s]={thicknessDirection:Er.addVec(t,n,l),edge:Er.addVec(a,o),normal:t},s+=1,e[h+0]=d,e[h+1]=u,e[h+2]=f,e[h+3]=d,e[h+4]=c,e[h+5]=u,h+=6;const A=[{A:n,B:o},{A:a,B:o},{A:a,B:l},{A:n,B:l}];for(const e of A){e.thicknessDirection=Er.addVec(t,e.A,e.B),e.stripVerticesA=[],e.stripVerticesB=[];const h=[{direction:e.A,other:e.B,vertices:e.stripVerticesA},{direction:e.B,other:e.A,vertices:e.stripVerticesB}];for(const r of h)for(let h=0;h<8;h+=1){const n=.5*h/7,o=Er.normalize(Er.lerp(t,r.direction,n)),a=Math.PI/2-Er.angle(o,t),l=Er.addVec(Er.multiply(Er.multiply(r.direction,-1),1-Math.cos(a)),Er.multiply(Er.multiply(t,-1),1-Math.sin(a)),Er.multiply(r.other,-1)),u=s;i[s]={thicknessDirection:e.thicknessDirection,normal:o,edge:l};const c=i[s];s+=1,r.vertices.push({index:u,vertex:c})}}for(let t=0;t<A.length;t+=1){const i=A[t],s=A[t<A.length-1?t+1:0],r=t%2==0?i.stripVerticesB:i.stripVerticesA,n=t%2==0?s.stripVerticesB:s.stripVerticesA;for(let t=1;t<r.length;t+=1){const i=r[t-1],s=n[t-1],o=r[t],a=n[t];e[h+0]=i.index,e[h+1]=s.index,e[h+2]=a.index,e[h+3]=o.index,e[h+4]=i.index,e[h+5]=a.index,h+=6}}}const r=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],n=Math.PI/15,o=2*Math.PI/15;let a=s;for(const t of r){let h=0;i[s]={thicknessDirection:t,normal:{x:0,y:t.y,z:0},edge:{x:-t.x,y:0,z:-t.z}},s+=1,h+=1;for(let e=1;e<8.5;e+=1){const r=15===e?Math.PI:e*n,a=1*Math.cos(r)*t.y,l=Math.sin(r);for(let e=0;e<Math.ceil(3.75)+1;e+=1){const r=15===e?0:e*o,n=l*Math.cos(r)*1*t.x,u=l*Math.sin(r)*1*t.z,c={x:n,y:a,z:u},d=Er.normalize({x:n,y:a,z:u});i[s]={thicknessDirection:t,normal:d,edge:{x:c.x-t.x,y:c.y-t.y,z:c.z-t.z}},s+=1,h+=1}}const r=[];for(let t=1;t<=Math.ceil(3.75);t+=1)r.push(a),15===t?r.push(a+1):r.push(a+t+1),r.push(a+t);const l=a+1,u=Math.ceil(3.75)+1;for(let t=0;t<6.5;t+=1)for(let i=0;i<Math.ceil(3.75);i+=1){let s=0;const e=l+(t+1)*u+i;let h=0;14===i?(s=l+t*u,h=l+(t+1)*u):(s=l+t*u+i+1,h=l+(t+1)*u+i+1),r.push(l+t*u+i),r.push(s),r.push(e),r.push(e),r.push(s),r.push(h)}e.push.apply(e,t.flipVertexOrder?r.reverse():r),a+=h}const l=new Float32Array(9*i.length);let u=0;for(const t of i)l[u+0]=t.edge.x,l[u+1]=t.edge.y,l[u+2]=t.edge.z,l[u+3]=t.normal.x,l[u+4]=t.normal.y,l[u+5]=t.normal.z,l[u+6]=t.thicknessDirection.x,l[u+7]=t.thicknessDirection.y,l[u+8]=t.thicknessDirection.z,u+=9;return{vertices:l,indices:new Uint16Array(e)}},nx=(t,i)=>{let s=t.sV.hz.get(i);return s||(s=void 0!==i&&i>0?new hx(t,Bh(i,0,1)):new sx(t),t.sV.hz.set(i,s),s)};class ox extends gS{Vp(t){return this.bz=this.Bp._(),this.Bp.M(t),this}nb(t){return this.uH=t,this}ob(){return this.uH}}class ax extends ox{constructor(t,i,s,e,h){super(t,i,s),this.cH=t,this.XN=e,this.ZN=h,this.zN=t.zN,this.fE=this.zN.NN()}UN(t){return t===this.XN&&{}}}class lx extends ax{constructor(t,i,s,e,h){super(t,i,s,e,h),this.uH="cull-back",this.wl=Nr,this.dH={},this.fH=[],this.$N=$m({fillStyleSolid:()=>Oe(this.sh)&&this.sh,fillStyleIndividual:()=>Ve(this.sh)&&this.sh,fillStylePaletted:()=>Ge(this.sh)&&this.sh}),this.sh=Pa.fillStyle,this.Bp.M(iu)}de(t){const i=this.fH,s=this.sh,e=s!==De,h=this.AH,r=this.Ra()||this.gH!==h,n=this.Sz(),o=this.Aa._(),l=this.Aa.o;if(e){for(const t of i)t.id=void 0!==t.id?String(t.id):void 0,t.xSize=void 0!==t.xSize&&t.xSize<0?-t.xSize:t.xSize,t.ySize=void 0!==t.ySize&&t.ySize<0?-t.ySize:t.ySize,t.zSize=void 0!==t.zSize&&t.zSize<0?-t.zSize:t.zSize;const t=11,e=this.vH||0;let h=e;for(const t of i){const i=t.id;void 0!==i&&void 0!==this.dH[i]||(h+=1)}let u,c=!1,d=!1;if(c=h!==e,d=c,u=!d&&(i.length<100?"chunks":"all"),c){const i=h*t,s=new Float32Array(i);this.oW&&s.set(this.oW),this.oW=s,this.yH=i,this.mH=e*t}const f=Ve(s)?s.getFallbackColor():void 0;for(const s of i){const i=s.id,e=void 0!==i&&this.dH[i],h=[s.xCenter,s.yCenter,s.zCenter,s.xSize,s.ySize,s.zSize,s.color?s.color.r:f?f.r:void 0,s.color?s.color.g:f?f.g:void 0,s.color?s.color.b:f?f.b:void 0,s.color?s.color.a:f?f.a:void 0,s.value];if(e){for(let i=0;i<t;i+=1)h[i]=void 0!==h[i]?h[i]:e.buffer[i];e.buffer.set(h)}else{const s=this.mH,e=new Float32Array(this.oW.buffer,s*Float32Array.BYTES_PER_ELEMENT,t);e.set(h),void 0!==i&&(this.dH[i]={location:s,buffer:e}),this.mH+=t}}if(d&&(this.UG=this.fE.Oz(this.oW,!0)),"all"===u)this.fE.gV(this.UG,0,this.oW);else if("chunks"===u)for(const t of i){const i=t.id;if(void 0!==i){const t=this.dH[i];this.fE.gV(this.UG,t.location,t.buffer)}}if(r||n||l){const t=this.$N.fillStyleSolid(r),i=this.$N.fillStyleIndividual(r),s=this.$N.fillStylePaletted(r);t||i||s?(this.pH=nx(this.fE,this.SH()),this.WE=this.fE.VO(Pp["3D"],Pp.ColorShaded3D({dataType:i?"attribute":s?["lookup",s.getLookUpProperty(),s.lut]:"uniform",shadingStyle:this.Bp._().type}),Pp.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:jm(this.ti),normalSource:this.pH.nH}),void 0!==this.AH&&Pp.RoundedEdges3D),this.ZY=o?this.fE.VO(Pp["3D"],Pp.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:jm(this.ti),normalSource:void 0}),Pp.MousePicking,void 0!==this.AH&&Pp.RoundedEdges3D):void 0):(this.pH=void 0,this.WE=void 0,this.ZY=void 0)}if(i.length>0){const i=a({x:Or,y:Or,z:Or},{x:zr,y:zr,z:zr});for(let s=0;s<this.mH;s+=t){const t=this.oW[s+0],e=this.oW[s+3]/2,h=t-e,r=t+e,n=this.oW[s+1],o=this.oW[s+4]/2,a=n-o,l=n+o,u=this.oW[s+2],c=this.oW[s+5]/2,d=u-c,f=u+c;i.min.x=i.min.x<h?i.min.x:h,i.min.y=i.min.y<a?i.min.y:a,i.min.z=i.min.z<d?i.min.z:d,i.max.x=i.max.x>r?i.max.x:r,i.max.y=i.max.y>l?i.max.y:l,i.max.z=i.max.z>f?i.max.z:f}this.wl=i}this.vH=h,this.fH.length=0}return this.Va(s),this.gH=h,this.Bp.o=!1,this.Aa.o=!1,this}gR(t){const i=1===t?this.ZY:this.WE,s=this.pH,e=this.UG,h=this.sh,r=this.vH,n=this.Bp._();return i&&e&&void 0!==r&&this.fE.Vz(i,((o,a,l)=>{let u=!1;const c=a("aPos"),d=a("aOffsetAxis");this.fE.CE(i).aV(o("uScale"),this.cH.NE.Yz()).aV(o("uDisp"),this.cH.NE.jz()).uV(o("uViewProjectionMatrix"),this.bH).Wz(o("uIsHighlighted"),1===t||2===t?0:this.ma).jR(o("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(o("uRenderEffectMask"),2===t?1:0);const f={location:c,size:3},A={location:d,size:3},g={location:void 0,size:4};if(1!==t&&"phong"===n.type&&this.fE.aV(o("uCameraLoc"),this.xH).aV(o("uLightLoc"),this.MH).Wz(o("uAmbientReflection"),n.ambientReflection).Wz(o("uSpecularReflection"),n.specularReflection).Wz(o("uDiffuseReflection"),n.diffuseReflection).Wz(o("uShininess"),n.shininess).jR(o("uLightColor"),n.specularColor).jR(o("uAmbientColor"),n.ambientColor),1===t)this.fE.jR(o("uColor"),this.ZN);else if(Oe(h))this.fE.jR(o("uColorDiffuse"),h.getColor());else if(Ve(h)){const t=a("aColor");g.location=t}else if(Ge(h)){const t=Xm(h,this,void 0);if(!t&&h.lut.percentageValues)return!1;this.fE.dN(l,h.lut,t)}return e&&(this.fE.Nz(e,1,f,A,g,{location:void 0,size:1}),s.Bm(l,r,"phong"===n.type&&1!==t,!1),u=!0),u})),this}dispose(){return super.dispose(),this.UG&&(this.fE.Zz(this.UG),this.UG=void 0),this.WE=void 0,this}vE(){return this.dispose(),this}Qp(t){this.fH=lr(this.fH,t,{canReturnB:!0})}ah(t){return this.sh=qa(this.sh,t),this}pr(){return this.sh}Xp(t){return this.AH=void 0!==t&&t>0?Bh(t,0,1):void 0,this}SH(){return this.AH}ni(){return this.wl.max.x}ri(){return this.wl.min.x}ai(){return this.wl.max.y}oi(){return this.wl.min.y}Wp(){return this.wl.max.z}Yp(){return this.wl.min.z}tu(){return 0}iu(){return 0}Hp(){return 0}Ra(){return tl(this.Ea,this.sh)}Va(t){this.Ea=t}}class ux extends uS{constructor(t,i){super(t),this.nH="custom",this.NG=i;const{vertices:s,drawSize:e}=this.GG();this.UG=t.Oz(s),this.YG=e}CE(t){return this.fE.Nz(this.UG,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}Bm(t){return this.fE.TV(this.fE.gl.TRIANGLE_STRIP,0,this.YG,t),this}GG(){const t=this.NG,i=new Float32Array(2*(t+1)*3);let s=0;for(let e=0;e<=t;e+=1){const h=2*Math.PI*e/t,r=Math.cos(h),n=Math.sin(h);for(const t of[0,1])i[s+0]=t,i[s+1]=r,i[s+2]=n,s+=3}return{vertices:i,drawSize:s/3}}rz(){this.fE.Zz(this.UG)}}const cx=(t,i=16)=>{let s=t.sV.sz.get(i);return s||(s=new ux(t,i),t.sV.sz.set(i,s),s)};class dx extends ax{constructor(t,i,s,e,h){super(t,i,s,e,h),this.uH="cull-back",this._H=Nr,this.wH=[],this.CH=!1,this.Wu=Pa.lineStyle,this.Bp.M(ql)}de(t){const i=this.CH,s=this.Wu,e=this.Hu!==s,h=this.Sz(),r=i;if(i){const t=sr(this.wH);this.kH=this.fE.Oz(t,!1,this.kH)}if(r&&(this._H=tn(this.wH)),e||h){const t=8,i=eo(s)&&s.getFillStyle(),e=1===s.getThickness()?"primitive":"instanced";this.tU=void 0,Oe(i)&&("primitive"===e?this.tU={type:e,shader:this.fE.VO(Pp["3D"],Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0}),Pp.Color({dataType:"uniform"})),fillStyle:i}:"instanced"===e&&(this.tU={type:e,shader:this.fE.VO(Pp["3D"],Pp.ColorShaded3D({dataType:"uniform",shadingStyle:this.Bp._().type}),Pp.LineInstanced3D({axisWorldTranslation:jm(this.ti)})),geometry:cx(this.fE,t),fillStyle:i}))}return this.CH=!1,this.Hu=s,this.Bp.o=!1,this}gR(t){if(1===t)return this;const i=this.fE.gl,s=this.tU,e=this.kH,h=this.Wu,r=this.Bp._();if(s&&e&&eo(h))switch(s.type){case"instanced":{const n=.5*this.ae.Sp(h.thickness),o=s.fillStyle.getColor(),a=s.shader,l=s.geometry;this.fE.Vz(a,((s,h,u)=>{this.fE.CE(a).aV(s("uScale"),this.cH.NE.Yz()).aV(s("uDisp"),this.cH.NE.jz()).uV(s("uViewProjectionMatrix"),this.bH).jR(s("uColorDiffuse"),o).Wz(s("uOffsetWU"),n).Wz(s("uIsHighlighted"),this.ma).jR(s("uHighlightColorOffset"),2===t?_e:this.xa).Wz(s("uRenderEffectMask"),2===t?1:0),"phong"===r.type&&this.fE.aV(s("uCameraLoc"),this.xH).aV(s("uLightLoc"),this.MH).Wz(s("uAmbientReflection"),r.ambientReflection).Wz(s("uSpecularReflection"),r.specularReflection).Wz(s("uDiffuseReflection"),r.diffuseReflection).Wz(s("uShininess"),r.shininess).jR(s("uLightColor"),r.specularColor).jR(s("uAmbientColor"),r.ambientColor),i.bindBuffer(i.ARRAY_BUFFER,e);const c=h("aLocationA"),d=h("aLocationB");return i.vertexAttribPointer(c,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.fE.bV(c,1),i.enableVertexAttribArray(c),i.vertexAttribPointer(d,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.fE.bV(d,1),i.enableVertexAttribArray(d),l.CE(u).Bm(this.wH.length/2),!0}));break}case"primitive":{const r=eo(h)?h.getFillStyle():void 0,n=r&&Oe(r)?r.getColor():void 0;if(n){const h=s.shader;this.fE.Vz(h,((s,r)=>(this.fE.CE(h).aV(s("uScale"),this.cH.NE.Yz()).aV(s("uDisp"),this.cH.NE.jz()).uV(s("uViewProjectionMatrix"),this.bH).jR(s("uColor"),n).Wz(s("uIsHighlighted"),this.ma).jR(s("uHighlightColorOffset"),2===t?_e:this.xa).Wz(s("uRenderEffectMask"),2===t?1:0).Nz(e,void 0,{location:r("aPos"),size:3}).Bm(i.LINES,this.wH.length),!0)))}break}}return this}Gl(t){for(let i=0;i<t.length-1;i+=1){const s=t[i],e=t[i+1];this.wH.push(s),this.wH.push(e)}return this.CH=!0,{Xs(){return this},qs(){return this}}}_i(){return this.wH.length=0,this.CH=!0,this}Zm(){return[]}if(t){}ph(t){return this.Wu="function"==typeof t?t(this.Wu):t,this}Yu(){return this.Wu}vE(){return this.kH&&(this.fE.Zz(this.kH),this.kH=void 0),this}ni(){return this._H.max.x}ri(){return this._H.min.x}ai(){return this._H.max.y}oi(){return this._H.min.y}Wp(){return this._H.max.z}Yp(){return this._H.min.z}tu(){const t=this.Wu;return t===ah?0:t.getThickness()}iu(){const t=this.Wu;return t===ah?0:t.getThickness()}Hp(){const t=this.Wu;return t===ah?0:t.getThickness()}}class fx extends uS{constructor(t,i,s){super(t),this.nH="gpu-calculate",this.TH=i,this.FH=s;const{vertices:e,drawSize:h}=this.GG();this.UG=t.Oz(e),this.YG=h}Bm(t,i,s,e){return this.fE.Nz(this.UG,0,{location:t.attribute("aInstanceGeo"),size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).TV(this.fE.gl.TRIANGLES,0,this.YG,i),this}GG(){const t=this.FH,i=this.TH,s=new Float32Array(6*(6*i+6*(t-2)*i));let e=0;const h=2*Math.PI/i,r=Math.PI/t,n=(t,i,n,o,a)=>{const l=i*h,u=Math.PI/2-t*r,c=Math.cos(u),d=c*Math.cos(l),f=c*Math.sin(l),A=Math.sin(u);s[e]=d,s[e+1]=A,s[e+2]=f,s[e+3]=n,s[e+4]=o,s[e+5]=a,e+=6};for(let s=0;s<t;s+=1)for(let e=0;e<i;e+=1)s>0&&(n(s,e,1,0,0),n(s,e+1,1,1,0),n(s+1,e,0,0,1)),s<t-1&&(n(s,e+1,1,1,0),n(s+1,e+1,0,1,0),n(s+1,e,0,0,1));return e!==s.length&&pr(0,(()=>{this.fE.HA.To&&e>s.length&&Ch.console.warn("LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.\nA point series 3D component might have missing points.\n\nThis warning can be omitted with LightningChartOptions.warnings")})),{vertices:s,drawSize:e/6}}rz(){this.fE.Zz(this.UG)}}const Ax=(t,i)=>{const s=Math.round(i);s<3&&pr(0,Ph);const e=s;let h=t.sV.ez.get(Array.from(t.sV.ez.keys()).find((t=>t.sectors===s&&t.stacks===e)));return h||(h=new fx(t,s,e),t.sV.ez.set({sectors:s,stacks:e},h),h)};class gx extends ax{constructor(t,i,s,e,h){super(t,i,s,e,h),this.uH="cull-back",this.I_=[],this.tU={},this.KU=new HS(this.I_,(t=>t.vertexBuffer&&this.fE.Zz(t.vertexBuffer)),!0),this.Ju=[],this.Cl=0,this.kl=[],this.Tl=0,this.wl=Nr,this.Fl=Nr,this.$N=$m({lineStyleSolid:()=>{const t=this.Wu;return eo(t)&&t},lineFillSolid:()=>{const t=this.Wu.getFillStyle();return Oe(t)&&t},lineFillPaletted:()=>{const t=this.Wu.getFillStyle();return Ge(t)&&t},jointStyleTriangulatedPoints:()=>va(this.Jp)&&this.Jp,jointSizeTriangulated:()=>{const t=this.Jp;return va(t)&&t.getSize()},jointFillSolid:()=>{const t=this.Jp.getFillStyle();return Oe(t)&&t},jointFillPaletted:()=>{const t=this.Jp.getFillStyle();return Ge(t)&&t},wireframeLineStyleSolid:()=>{const t=va(this.Jp)&&this.Jp.getWireframeStyle();return eo(t)&&t},wireframeFillSolid:()=>{const t=va(this.Jp)&&this.Jp.getWireframeStyle(),i=t&&t.getFillStyle();return Oe(i)&&i}}),this.Pl=!1,this.Wu=Pa.lineStyle,this.Jp=Pa.pointStyle3D,this.Bp.M(iu),this.eW={attributesPerVertex:3,prepareRenderData:(t,i)=>sr(t)}}de(t){const i=this.Pl,s=this.kl,e=this.Tl,h=e>0,r=this.Wu,n=r!==this.Hu,o=this.Jp,a=o!==this.IH,l=this.Sz(),u=this.Aa.o,c=this.Aa._();this.Fl&&(this.wl=en(this.wl,this.Fl),this.Fl=void 0),h&&(this.Ju=lr(this.Ju,s,{canReturnB:!0}),this.Cl+=e);let d=s,f=e;if(i&&(this.I_.forEach((t=>{t.existingCoordinatesCount=0,t.existingDataPointsCount=0,t.boundaries=Nr})),this.KU.WU(),d=this.Ju,f=this.Cl),f>0){const t=1e5,i=Math.floor(this.zN.PH/(this.eW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),s=this._a("ApplicationType",(t=>"UserSeries"===t.type))?f:1e3,e=Bh(s,t,i);this.KU.VU(d,e,((t,i,s,e)=>({existingDataPointsCount:s-e,existingCoordinatesCount:s,allocatedCoordinatesCount:t,jointPointsCount:e,lastDataPoint:i[s-1],boundaries:Nr,vertexBuffer:this.fE.AV(t*this.eW.attributesPerVertex,this.eW.prepareRenderData(i,s))})),((t,i,s,e)=>{this.fE.gV(t.vertexBuffer,t.existingCoordinatesCount*this.eW.attributesPerVertex,this.eW.prepareRenderData(i,s)),t.existingDataPointsCount+=s-e,t.existingCoordinatesCount+=s,t.jointPointsCount+=e,t.lastDataPoint=i[s-1]}))}if(n||a||l||u){const t={},i=this.$N.lineStyleSolid(n),s=this.$N.lineFillSolid(n),e=this.$N.lineFillPaletted(n),h=s||e,o=this.$N.jointStyleTriangulatedPoints(a),l=this.$N.jointSizeTriangulated(a),u=this.$N.jointFillSolid(a),d=this.$N.jointFillPaletted(a),f=u||d,A=this.$N.wireframeLineStyleSolid(a),g=this.$N.wireframeFillSolid(a),v=r.getThickness()<0||1===r.getThickness()&&this._a("ApplicationType",(t=>"InternalUI"===t.type))?"primitive":"instanced",y=e?["lookup",e.getLookUpProperty(),e.lut]:"uniform";if("primitive"===v&&h?t.lines={type:"primitive",fillStyleSolid:s,fillStylePaletted:e,shader:this.fE.VO(Pp["3D"],Pp.Color({dataType:y}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})),mousePicking:c?{shader:this.fE.VO(Pp["3D"],Pp.MousePicking,Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0}))}:void 0}:"instanced"===v&&i&&h&&(t.lines={type:"instanced",lineStyleSolid:i,fillStyleSolid:s,fillStylePaletted:e,shader:this.fE.VO(Pp["3D"],Pp.ColorShaded3D({dataType:y,shadingStyle:this.Bp._().type}),Pp.LineInstanced3D({axisWorldTranslation:jm(this.ti)})),geometry:vx(this.fE,i.getThickness()),mousePicking:c?{shader:this.fE.VO(Pp["3D"],Pp.MousePicking,Pp.LineInstanced3D({axisWorldTranslation:jm(this.ti)}))}:void 0}),t.markers=void 0,f&&o){const i=or(o.getShape(),{cube:()=>nx(this.fE),sphere:()=>yx(this.fE,o)});t.markers={geometry:i,pointStyle:o,pointSizeNWU:"number"==typeof l&&l,pointSizeAxis:"object"==typeof l&&l,fillStyleSolid:u,fillStylePaletted:d,shader:this.fE.VO(Pp["3D"],Pp.ColorShaded3D({dataType:d?["lookup",d.getLookUpProperty(),d.lut]:"uniform",shadingStyle:this.Bp._().type,wireframe:!1!==g}),Pp.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof l?"nwu":"axis",symmetric:"number"==typeof l,halved:!0},axisWorldTranslation:jm(this.ti),normalSource:i.nH})),mousePicking:c?{shader:this.fE.VO(Pp["3D"],Pp.MousePicking,Pp.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof l?"nwu":"axis",symmetric:"number"==typeof l,halved:!0},axisWorldTranslation:jm(this.ti),normalSource:void 0}))}:void 0,wireframe:A&&g&&{thickness:A.getThickness(),fillStyleSolid:g}}}this.tU=t}return this.Pl=!1,this.kl=[],this.Tl=0,this.Hu=r,this.IH=o,this.Bp.o=!1,this.Aa.o=!1,this}gR(t){var i,s;const e=this.fE.gl,{lines:h,markers:r}=this.tU,n=this.Bp._(),o=1===t?null===(i=null==h?void 0:h.mousePicking)||void 0===i?void 0:i.shader:null==h?void 0:h.shader;if(h&&o&&"instanced"===h.type){const i=o,{geometry:s,lineStyleSolid:r,fillStyleSolid:a,fillStylePaletted:l}=h;this.fE.Vz(i,((h,o,u)=>{let c=!1;if(this.fE.CE(i).aV(h("uScale"),this.cH.NE.Yz()).aV(h("uDisp"),this.cH.NE.jz()).uV(h("uViewProjectionMatrix"),this.bH).Wz(h("uOffsetWU"),this.ae.Sp(r.getThickness())).Wz(h("uIsHighlighted"),1===t||2===t?0:this.ma).jR(h("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(h("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===n.type&&this.fE.aV(h("uCameraLoc"),this.xH).aV(h("uLightLoc"),this.MH).Wz(h("uAmbientReflection"),n.ambientReflection).Wz(h("uSpecularReflection"),n.specularReflection).Wz(h("uDiffuseReflection"),n.diffuseReflection).Wz(h("uShininess"),n.shininess).jR(h("uLightColor"),n.specularColor).jR(h("uAmbientColor"),n.ambientColor),1===t)this.fE.jR(h("uColor"),this.ZN);else if(a)this.fE.jR(h("uColorDiffuse"),a.getColor());else if(l){const t=Xm(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.fE.dN(u,l.lut,t)}return this.I_.forEach((t=>{e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer);const i=o("aLocationA"),h=o("aLocationB");e.vertexAttribPointer(i,3,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.fE.bV(i,1),e.enableVertexAttribArray(i),e.vertexAttribPointer(h,3,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.fE.bV(h,1),e.enableVertexAttribArray(h),s.CE(u).Bm(t.existingCoordinatesCount-1),c=!0})),c}))}if(h&&o&&"primitive"===h.type){const i=o,{fillStyleSolid:s,fillStylePaletted:r}=h;this.fE.Vz(i,((h,n,o)=>{let a=!1;if(this.fE.CE(i).aV(h("uScale"),this.cH.NE.Yz()).aV(h("uDisp"),this.cH.NE.jz()).uV(h("uViewProjectionMatrix"),this.bH).Wz(h("uIsHighlighted"),1===t||2===t?0:this.ma).jR(h("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(h("uRenderEffectMask"),2===t?1:0),1===t)this.fE.jR(h("uColor"),this.ZN);else if(s)this.fE.jR(h("uColor"),s.getColor());else if(r){const t=Xm(r,this,void 0);if(!t&&r.lut.percentageValues)return!1;this.fE.dN(o,r.lut,t)}return this.I_.forEach((t=>{this.fE.Nz(t.vertexBuffer,void 0,{location:n("aPos"),size:3}).Bm(e.LINE_STRIP,t.existingCoordinatesCount),a=!0})),a}))}const a=1===t?null===(s=null==r?void 0:r.mousePicking)||void 0===s?void 0:s.shader:null==r?void 0:r.shader;if(r&&a){const i=a,{geometry:s,fillStyleSolid:e,fillStylePaletted:h,pointSizeAxis:o,pointSizeNWU:l,wireframe:u}=r;this.fE.Vz(i,((r,a,c,d)=>{let f=!1;if(this.fE.CE(i).aV(r("uScale"),this.cH.NE.Yz()).aV(r("uDisp"),this.cH.NE.jz()).uV(r("uViewProjectionMatrix"),this.bH).Wz(d("uRatioNwuWu"),this.cH.DH()).Wz(r("uIsHighlighted"),1===t||2===t?0:this.ma).jR(r("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(r("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===n.type&&this.fE.aV(r("uCameraLoc"),this.xH).aV(r("uLightLoc"),this.MH).Wz(r("uAmbientReflection"),n.ambientReflection).Wz(r("uSpecularReflection"),n.specularReflection).Wz(r("uDiffuseReflection"),n.diffuseReflection).Wz(r("uShininess"),n.shininess).jR(r("uLightColor"),n.specularColor).jR(r("uAmbientColor"),n.ambientColor),1===t)this.fE.jR(r("uColor"),this.ZN);else if(e)this.fE.jR(r("uColorDiffuse"),e.getColor());else if(h){const t=Xm(h,this,void 0);if(!t&&h.lut.percentageValues)return!1;this.fE.dN(c,h.lut,t)}return u&&1!==t&&this.fE.Wz(r("uWireframeThickness"),u.thickness).jR(r("uWireframeColor"),u.fillStyleSolid.getColor()),!1!==o&&this.fE.aV(r("uOffsetAxis"),[o.x,o.y,o.z]),!1!==l&&this.fE.Wz(r("uOffsetNWU"),l),this.I_.forEach((i=>{this.fE.Nz(i.vertexBuffer,1,{location:a("aPos"),size:3}),s.Bm(c,i.existingCoordinatesCount,"phong"===n.type&&1!==t,Boolean(u)&&1!==t),f=!0})),f}))}return this}Gl(t,i){Array.isArray(t)||(t=[t]),this.kl=lr(this.kl,t,{canReturnB:!0}),this.Tl+=t.length;const s=i||tn(t);return this.Fl=this.Fl?en(this.Fl,s):s,this}ph(t){return this.Wu="function"==typeof t?t(this.Wu):t,this}Yu(){return this.Wu}vp(t){return this.Jp="function"==typeof t?t(this.Jp):t,this}BH(){return this.Jp}ni(){return this.Fl?Math.max(this.Fl.max.x,this.wl.max.x):this.wl.max.x}ri(){return this.Fl?Math.min(this.Fl.min.x,this.wl.min.x):this.wl.min.x}ai(){return this.Fl?Math.max(this.Fl.max.y,this.wl.max.y):this.wl.max.y}oi(){return this.Fl?Math.min(this.Fl.min.y,this.wl.min.y):this.wl.min.y}Wp(){return this.Fl?Math.max(this.Fl.max.z,this.wl.max.z):this.wl.max.z}Yp(){return this.Fl?Math.min(this.Fl.min.z,this.wl.min.z):this.wl.min.z}tu(){return Fr(this.Wu)}iu(){return Fr(this.Wu)}Hp(){return Fr(this.Wu)}Rl(){return this.Ju}Ll(){return this.kl}Ul(){return this.Cl}Wl(){return this.Tl}_i(){return this.Pl=!0,this.Ju.length=0,this.Cl=0,this.kl=[],this.Tl=0,this.wl=Nr,this.Fl=void 0,this}dispose(){return super.dispose(),this.KU.YU(),this.tU={},this}vE(){return this.dispose(),this}}const vx=(t,i)=>cx(t,i>50?20:i>20?16:i>10?12:i>5?8:6),yx=(t,i)=>{const s=i.getSize();return Ax(t,"number"==typeof s?s>50?20:s>20?16:s>10?12:s>5?8:6:20)};class mx extends ax{constructor(t,i,s,e,h){super(t,i,s,e,h),this.uH="disabled",this.LH=!1,this.RH=!1,this.EH={x:1,y:1,z:1},this.fb={x:0,y:0,z:0},this.cb={x:0,y:0,z:0},this.Ab={x:0,y:0,z:0},this.gb={x:1,y:1,z:1},this.OH=Bf.projectionOrthographic(-1,1,-1,1,1,-1),this.zH=Bf.projectionOrthographic(-1,1,-1,1,1,-1),this.VH=!1,this.$N=$m({fillStyleSolid:()=>Oe(this.sh)&&this.sh,fillStyleValuePalette:()=>Ge(this.sh)&&"value"===this.sh.lookUpProperty&&this.sh}),this.sh=Pa.fillStyle,this.Bp.M(iu)}de(t){var i;const s=this.Sz(),e=this.Aa._(),h=this.Aa.o,r=this.Ra();this.$N.fillStyleSolid(r);const n=this.$N.fillStyleValuePalette(r),o=this.Ab,a=this.gb;if(this.LH&&this.NH&&(this.UG=this.fE.Oz(this.NH.vertices,void 0,this.UG),this.WG=this.fE.yV(this.NH.indices,this.WG),this.GH=this.NH.indices.length),"phong"===this.Bp._().type&&(s||this.LH)&&(null===(i=this.NH)||void 0===i?void 0:i.normals)&&(this.UH=this.fE.Oz(this.NH.normals,void 0,this.UH)),!this.WH&&n&&"value"===n.lookUpProperty&&this.NH&&(this.WH=new Float32Array(this.NH.vertices.length/3),this.RH=!0),this.WH&&this.RH&&(this.YH=this.fE.Oz(this.WH,void 0,this.YH)),s||r||h){if(n&&"value"!==n.lookUpProperty)throw new Error("LightningChart JS MeshModel3D does not support look up by x/y/z. Must be value");this.WE=this.fE.VO(Pp["3D"],Pp.ColorShaded3D({dataType:n?["lookup","value",n.lut]:"uniform",shadingStyle:this.Bp._().type,wireframe:!1}),Pp.Model3D({normalSource:"phong"===this.Bp._().type?"attribute":void 0})),this.ZY=e?this.fE.VO(Pp["3D"],Pp.MousePicking,Pp.Model3D({normalSource:void 0})):void 0}if(this.VH){const t=Bf.projectionOrthographic(-1,1,-1,1,1,-1);this.zH=Bf.rotateXYZ(t,o),this.OH=Bf.translate(t,a.x/2,a.y/2,a.z/2),this.OH=Bf.rotateXYZ(this.OH,o),this.OH=Bf.translate(this.OH,-a.x/2,-a.y/2,-a.z/2),this.VH=!1}return this.Bp.o=!1,this.Va(this.sh),this.Aa.o=!1,this.LH=!1,this.RH=!1,this}gR(t){const i=1===t?this.ZY:this.WE,s=1===t,e=this.WG,h=this.GH,r=this.UG,n=this.UH,o=this.YH,a=this.fb,l=this.cb,u=this.EH,c=this.gb,d=this.OH,f=this.zH,A=this.$N.fillStyleValuePalette(!1),g=this.$N.fillStyleSolid(!1),v=this.Bp._(),y={location:void 0,size:1};return i&&r&&e&&h?(this.fE.Vz(i,((m,p,S,b)=>{if(this.fE.CE(i).aV(m("uScale"),this.cH.NE.Yz()).aV(m("uDisp"),this.cH.NE.jz()).uV(m("uViewProjectionMatrix"),this.bH).Wz(m("uIsHighlighted"),1===t||2===t?0:this.ma).jR(m("uHighlightColorOffset"),this.xa).Wz(m("uRenderEffectMask"),2===t?1:0),s)this.fE.jR(m("uColor"),this.ZN);else{if(this.sh===De)return!1;if(g)this.fE.jR(m("uColorDiffuse"),g.getColor());else if(A){if(!o)return!1;const t=A.getPalette();y.location=p("aLookupValue"),this.fE.dN(S,t,void 0).Nz(o,void 0,y)}}return"phong"!==v.type||s||(this.fE.aV(m("uCameraLoc"),this.xH).aV(m("uLightLoc"),this.MH).Wz(m("uAmbientReflection"),v.ambientReflection).Wz(m("uSpecularReflection"),v.specularReflection).Wz(m("uDiffuseReflection"),v.diffuseReflection).Wz(m("uShininess"),v.shininess).jR(m("uLightColor"),v.specularColor).jR(m("uAmbientColor"),v.ambientColor).uV(m("uModelRotationNormals"),f),n&&this.fE.Nz(n,void 0,{location:S.attribute("aNormal"),size:3})),this.fE.uV(m("uModelRotation"),d).aV(m("uModelScale"),[u.x,u.y,u.z]).aV(m("uLocationAxis"),[a.x,a.y,a.z]).aV(m("uModelAlignment"),[l.x,l.y,l.z]).aV(m("uModelSize"),[c.x,c.y,c.z]),this.fE.Nz(r,0,{location:S.attribute("aGeoPos"),size:3}).wV(e).kV(h,this.fE.gl.TRIANGLES),!0})),this):this}dispose(){return super.dispose(),this.UG&&(this.fE.Zz(this.UG),this.UG=void 0),this.WG&&(this.fE.Zz(this.WG),this.WG=void 0),this.UH&&(this.fE.Zz(this.UH),this.UH=void 0),this.YH&&(this.fE.Zz(this.YH),this.YH=void 0),this.WE=void 0,this.ZY=void 0,this.NH=void 0,this.WH=void 0,this}vE(){return this.dispose(),this}yb(t){return this.NH=t,this.LH=!0,this.gb=t.modelSize,this}pb(t){return this.WH=t,this.RH=!0,this}ah(t){return this.sh=qa(this.sh,t),this}pr(){return this.sh}Sb(t){return this.EH=t,this}Yz(){return this.EH}bb(t){return this.fb=t,this}xb(t){return this.cb=t,this}Mb(t){return this.Ab=t,this.VH=!0,this}_b(t){return this.uH=t,this}wb(){return this.uH}ni(){return zr}ri(){return Or}ai(){return zr}oi(){return Or}Wp(){return zr}Yp(){return Or}tu(){return 0}iu(){return 0}Hp(){return 0}Ra(){return tl(this.Ea,this.sh)}Va(t){this.Ea=t}}class px extends ax{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.uH="cull-back",this.I_=[],this.KU=new HS(this.I_,(t=>t.vertexBuffer&&this.fE.Zz(t.vertexBuffer)),!1),this.Ju=[],this.Cl=0,this.kl=[],this.Tl=0,this.wl=Nr,this.Fl=Nr,this.Pl=!1,this.$N=$m({fillStyleSolid:()=>{const t=this.tS.getFillStyle();return Oe(t)&&t},fillStyleIndividual:()=>{const t=this.tS.getFillStyle();return Ve(t)&&t},fillStylePalette:()=>{const t=this.tS.getFillStyle();return Ge(t)&&t},triangulatedPointStyle:()=>{const t=this.tS;return va(t)&&t},wireframeLineStyleSolid:()=>{const t=va(this.tS)&&this.tS,i=t&&t.getWireframeStyle();return eo(i)&&i},wireframeFillStyleSolid:()=>{const t=va(this.tS)&&this.tS,i=t&&t.getWireframeStyle(),s=i&&i.getFillStyle();return Oe(s)&&s}}),this.Dl=void 0,this.Co=r,this.tS=Pa.pointStyle3D,this.Bp.M(iu);const n=!0===(null==r?void 0:r.individualPointColorEnabled),o=!0===(null==r?void 0:r.individualPointSizeEnabled),a=!0===(null==r?void 0:r.individualLookupValuesEnabled),l=!0===(null==r?void 0:r.individualPointSizeAxisEnabled);let u,c,d,f,A=0;A+=3,n&&(u=A,A+=4),o&&(c=A,A+=1),a&&(d=A,A+=1),l&&(f=A,A+=3);const g=((t,i,s,e)=>t||i||s||e?!t||i||s||e?t||!i||s||e?t||i||!s||e?t||i||s||!e?(h,r,n)=>{const o=3+(t?4:0)+(i?1:0)+(s?1:0)+(e?3:0),a=h.length,l=new Float32Array(a*o);let u=0,c=u;for(let t=0;t<a;t+=1){const i=h[t];l[c+0]=i.x,l[c+1]=i.y,l[c+2]=i.z,c+=o}if(u+=3,t){const t=n&&Ve(n)&&n.getFallbackColor()||Me;c=u;for(let i=0;i<a;i+=1){const s=h[i].color||t;l[c+0]=s.r,l[c+1]=s.g,l[c+2]=s.b,l[c+3]=s.a,c+=o}u+=4}if(i){const t=r&&r.getSize();let i=1;"number"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.size?s.size:i;l[c+0]=e,c+=o}u+=1}if(s){c=u;for(let t=0;t<a;t+=1){const i=h[t];l[c+0]=void 0!==i.value?i.value:yh,c+=o}u+=1}if(e){const t=r&&r.getSize();let i={x:1,y:1,z:1};"object"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.sizeAxisX?s.sizeAxisX:i.x,r=void 0!==s.sizeAxisY?s.sizeAxisY:i.y,n=void 0!==s.sizeAxisZ?s.sizeAxisZ:i.z;l[c+0]=e,l[c+1]=r,l[c+2]=n,c+=o}u+=3}return l}:(t,i,s)=>((t,i)=>{const s=i&&i.getSize();let e={x:1,y:1,z:1};"object"==typeof s&&(e=s);const h=t.length,r=new Float32Array(6*h);let n=0;for(let i=0;i<h;i+=1){const s=t[i];r[n+0]=s.x,r[n+1]=s.y,r[n+2]=s.z;const h=void 0!==s.sizeAxisX?s.sizeAxisX:e.x,o=void 0!==s.sizeAxisY?s.sizeAxisY:e.y,a=void 0!==s.sizeAxisZ?s.sizeAxisZ:e.z;r[n+3]=h,r[n+4]=o,r[n+5]=a,n+=6}return r})(t,i):(t,i,s)=>(t=>{const i=t.length,s=new Float32Array(4*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=i.z,s[h+3]=void 0!==i.value?i.value:yh,h+=4}return s})(t):(t,i,s)=>((t,i)=>{const s=i&&i.getSize();let e=1;"number"==typeof s&&(e=s);const h=t.length,r=new Float32Array(4*h);for(let i=0,s=0;i<h;i+=1){const h=t[i];r[s+0]=h.x,r[s+1]=h.y,r[s+2]=h.z;const n=void 0!==h.size?h.size:e;r[s+3]=n,s+=4}return r})(t,i):(t,i,s)=>((t,i)=>{const s=i&&Ve(i)&&i.getFallbackColor()||Me,e=t.length,h=new Float32Array(7*e);for(let i=0,r=0;i<e;i+=1){const e=t[i];h[r+0]=e.x,h[r+1]=e.y,h[r+2]=e.z;const n=e.color||s;h[r+3]=n.r,h[r+4]=n.g,h[r+5]=n.b,h[r+6]=n.a,r+=7}return h})(t,s):(t,i,s)=>sr(t))(n,o,a,l);this.eW={individualPointColorEnabled:n,individualPointSizeEnabled:o,individualLookupValuesEnabled:a,individualPointSizeAxisEnabled:l,attributesPerVertex:A,attributeOffsetCoordinate:0,attributeOffsetColor:u,attributeOffsetSize:c,attributeOffsetLookUpValue:d,attributeOffsetPointSize3D:f,prepareRenderData:(t,i)=>g(t,this.tS,this.tS.fillStyle)}}de(t){const i=this.Pl,s=this.kl,e=this.Tl,h=e>0,r=this.tS,n=this.tS!==this.HH,o=this.Aa._(),a=this.Aa.o,l=this.Sz();this.Fl&&(this.wl=en(this.wl,this.Fl),this.Fl=void 0),h&&(this.Ju=lr(this.Ju,s,{canReturnB:!0}),this.Cl+=e);let u=s,c=e;if(i&&(this.I_.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.boundaries=Nr})),this.KU.WU(),u=this.Ju,c=this.Cl),c>0){const t=Math.floor(this.zN.PH/(this.eW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),i=Bh(c,1e5,t);this.KU.VU(u,i,((t,i,s)=>({existingDataPointsCount:s,existingCoordinatesCount:s,allocatedCoordinatesCount:t,boundaries:Nr,vertexBuffer:this.fE.AV(t*this.eW.attributesPerVertex,this.eW.prepareRenderData(i,s))})),((t,i,s)=>{this.fE.gV(t.vertexBuffer,t.existingCoordinatesCount*this.eW.attributesPerVertex,this.eW.prepareRenderData(i,s)),t.existingDataPointsCount+=s,t.existingCoordinatesCount=t.existingDataPointsCount}))}const d=r.getFillStyle(),f=this.$N.fillStyleSolid(n),A=this.$N.fillStyleIndividual(n),g=this.$N.fillStylePalette(n),v=d===De&&De;if(n||l||a){let t;const i=r.getSize(),s=this.eW.individualPointColorEnabled,e=this.eW.individualPointSizeEnabled,h=this.eW.individualPointSizeAxisEnabled,a=this.eW.individualLookupValuesEnabled;if(A&&!s){const t="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw Ch.alert(t),new Error(t)}if(g&&"value"===g.getLookUpProperty()&&!a){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Ch.alert(t),new Error(t)}const l=this.$N.wireframeLineStyleSolid(n),u=this.$N.wireframeFillStyleSolid(n);if(f||A||g||u){const s=A?"attribute":g?["lookup",g.getLookUpProperty(),g.lut]:"uniform",n=e&&"number"==typeof i,a=h&&"object"==typeof i,c=n||a?"attribute":"uniform";if(va(r)){const h=or(r.getShape(),{cube:()=>nx(this.fE),sphere:()=>Sx(this.fE,r,e)});t={type:"instanced",shader:this.fE.VO(Pp["3D"],Pp.ColorShaded3D({dataType:s,shadingStyle:this.Bp._().type,wireframe:!1!==u}),Pp.VertexLocation({offset:{dataType:c,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i},axisWorldTranslation:jm(this.ti),normalSource:h.nH})),pointStyle:r,useIndividualPointSize:n,useIndividualPointSize3D:a,pointSizeNWU:"number"==typeof i&&i,pointSizeAxis:"object"==typeof i&&i,fillStyleSolid:f,fillStyleIndividual:A,fillStylePaletted:g,fillStyleEmpty:v,mousePickingShader:o&&this.fE.VO(Pp["3D"],Pp.MousePicking,Pp.VertexLocation({offset:{dataType:c,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i},axisWorldTranslation:jm(this.ti),normalSource:void 0})),geometry:h,wireframe:l&&u&&{thickness:l.getThickness()<0?1:l.getThickness(),fillStyleSolid:u}}}else pa(r)&&"number"==typeof i&&(t={type:"primitive",shader:this.fE.VO(Pp["3D"],Pp.PointSize(c),Pp.Color({dataType:s}),Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0})),pointStyle:r,pointSizePixels:i,useIndividualPointSize:n,fillStyleSolid:f,fillStyleIndividual:A,fillStylePaletted:g,mousePickingShader:o&&this.fE.VO(Pp["3D"],Pp.PointSize(c),Pp.MousePicking,Pp.VertexLocation({axisWorldTranslation:jm(this.ti),normalSource:void 0}))})}this.tU=t}if(void 0===this.Dl&&g&&"value"===g.lookUpProperty&&g.lut.percentageValues){let t=zr,i=Or;for(let s=0;s<this.Ju.length;s+=1){const e=this.Ju[s];void 0!==e.value&&e.value<i&&(i=e.value),void 0!==e.value&&e.value>t&&(t=e.value)}this.Dl={min:i,max:t}}return this.Pl=!1,this.kl=[],this.Tl=0,this.HH=r,this.Bp.o=!1,this}gR(t){const i=this.fE.gl,s=this.tU;if(!s)return this;const e=1===t?s.mousePickingShader:s.shader;if(!e)return this;const h=this.Bp._(),{fillStyleSolid:r,fillStylePaletted:n,useIndividualPointSize:o}=s,a="instanced"===s.type&&s.useIndividualPointSize3D,l="instanced"===s.type&&s.wireframe;return this.fE.Vz(e,((u,c,d,f)=>{let A=!1;if(this.fE.CE(e).aV(u("uScale"),this.cH.NE.Yz()).aV(u("uDisp"),this.cH.NE.jz()).uV(u("uViewProjectionMatrix"),this.bH).Wz(u("uIsHighlighted"),1===t||2===t?0:this.ma).jR(u("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(u("uRenderEffectMask"),2===t?1:0),"instanced"===s.type){const{pointSizeAxis:t,pointSizeNWU:i}=s;!1!==t&&!1===a&&this.fE.aV(u("uOffsetAxis"),[t.x,t.y,t.z]),!1!==i&&!1===o&&this.fE.Wz(u("uOffsetNWU"),i).Wz(f("uRatioNwuWu"),this.cH.DH())}else if("primitive"===s.type){const{pointSizePixels:t}=s;o||this.fE.Wz(u("uPointSize"),t).Wz(u("uDevicePixelRatio"),this.fE.Mz())}if(1===t)this.fE.jR(u("uColor"),this.ZN);else if("instanced"===s.type?("phong"===h.type&&this.fE.aV(u("uCameraLoc"),this.xH).aV(u("uLightLoc"),this.MH).Wz(u("uAmbientReflection"),h.ambientReflection).Wz(u("uSpecularReflection"),h.specularReflection).Wz(u("uDiffuseReflection"),h.diffuseReflection).Wz(u("uShininess"),h.shininess).jR(u("uLightColor"),h.specularColor).jR(u("uAmbientColor"),h.ambientColor),l&&this.fE.Wz(u("uWireframeThickness"),l.thickness).jR(u("uWireframeColor"),l.fillStyleSolid.getColor()),r&&this.fE.jR(u("uColorDiffuse"),r.getColor()),s.fillStyleEmpty&&this.fE.jR(u("uColorDiffuse"),_e)):"primitive"===s.type&&r&&this.fE.jR(u("uColor"),r.getColor()),n){const t=Xm(n,this,this.Dl);if(!t&&n.lut.percentageValues)return!1;this.fE.dN(d,n.lut,t)}return this.I_.forEach(((e,r)=>{i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer);const n=c("aPos");if(i.vertexAttribPointer(n,3,i.FLOAT,!1,this.eW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.eW.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.fE.bV(n,1),i.enableVertexAttribArray(n),s.fillStyleIndividual&&void 0!==this.eW.attributeOffsetColor&&1!==t){const t=c("aColor");i.vertexAttribPointer(t,4,i.FLOAT,!1,this.eW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.eW.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.fE.bV(t,1),i.enableVertexAttribArray(t)}if(o&&void 0!==this.eW.attributeOffsetSize){"instanced"===s.type?this.fE.Wz(f("uRatioNwuWu"),this.cH.DH()):"primitive"===s.type&&this.fE.Wz(u("uDevicePixelRatio"),this.fE.Mz());const t=c("instanced"===s.type?"aOffsetNWU":"aPointSize");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.eW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.eW.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.fE.bV(t,1),i.enableVertexAttribArray(t)}if(a&&void 0!==this.eW.attributeOffsetPointSize3D&&"instanced"===s.type){const t=c("aOffsetAxis");i.vertexAttribPointer(t,3,i.FLOAT,!1,this.eW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.eW.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.fE.bV(t,1),i.enableVertexAttribArray(t)}if(s.fillStylePaletted&&"value"===s.fillStylePaletted.getLookUpProperty()&&void 0!==this.eW.attributeOffsetLookUpValue&&1!==t){const t=c("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.eW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.eW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.fE.bV(t,1),i.enableVertexAttribArray(t)}"instanced"===s.type?(s.geometry.Bm(d,e.existingCoordinatesCount,"phong"===h.type&&1!==t,Boolean(l)&&1!==t),A=!0):"primitive"===s.type&&(this.fE.Bm(i.POINTS,e.existingCoordinatesCount),A=!0)})),A})),this}Gl(t,i){Array.isArray(t)||(t=[t]),this.kl=lr(this.kl,t,{canReturnB:!0}),this.Tl+=t.length;const s=i||tn(t);return this.Fl=this.Fl?en(this.Fl,s):s,this.Dl=void 0,this}iS(t){return this.tS="function"==typeof t?t(this.tS):t,this}jH(){return this.tS}ni(){return this.Fl?Math.max(this.Fl.max.x,this.wl.max.x):this.wl.max.x}ri(){return this.Fl?Math.min(this.Fl.min.x,this.wl.min.x):this.wl.min.x}ai(){return this.Fl?Math.max(this.Fl.max.y,this.wl.max.y):this.wl.max.y}oi(){return this.Fl?Math.min(this.Fl.min.y,this.wl.min.y):this.wl.min.y}Wp(){return this.Fl?Math.max(this.Fl.max.z,this.wl.max.z):this.wl.max.z}Yp(){return this.Fl?Math.min(this.Fl.min.z,this.wl.min.z):this.wl.min.z}tu(){const t=this.tS,i=t.getSize();return"number"==typeof i?va(t)?i/2:pa(t)?5:0:0}iu(){return this.tu()}Hp(){return this.tu()}Rl(){return this.Ju}Ll(){return this.kl}Ul(){return this.Cl}Wl(){return this.Tl}_i(){return this.Pl=!0,this.Ju.length=0,this.Cl=0,this.kl=[],this.Tl=0,this.wl=Nr,this.Fl=void 0,this.Dl=void 0,this}dispose(){return super.dispose(),this.KU.YU(),this.tU=void 0,this}vE(){return this.dispose(),this}}const Sx=(t,i,s)=>{const e=i.getSize();return Ax(t,"number"==typeof e?s||e>=50?20:e>=10?10:e>=3?5:3:32)};class bx extends ax{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.uH="disabled",this.sh=Pa.fillStyle,this.ZS=Pa.lineStyle,this.GW=u("bilinear"),this.$H=[],this.XH=void 0,this.tU={},this.ZH=!1,this.$N=$m({fillStyleSolid:()=>Oe(this.sh)&&this.sh,fillStylePaletted:()=>Ge(this.sh)&&this.sh,wireframeStyleLine:()=>eo(this.ZS)&&this.ZS,wireframeStyleFill:()=>{const t=this.ZS&&this.ZS.getFillStyle();return Oe(t)&&t}}),this.ot={x:0,z:0},this.ct={x:1,z:1},this.Bp.M(ql);const n="columns"===e.dataOrder?e.columns:e.rows,o="columns"===e.dataOrder?e.rows:e.columns;this.Co={...e,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o},this.QH=new Array(this.Co.primaryDimensionVectorsCount).fill(void 0),this.cw=new Ob(this.zN,t.zN.eY,t.$s.ti,Ph,[],this.Co,-1,Me).QS(ah),this.cw.YW=Pb;const a=this.cw.jW.gridTiles.map((t=>{const i=t.sizeHeatmapDataVectors,s=t.sizeUniqueHeatmapDataVectors,e=t.iFirstVector,h=t.iFirstUniqueVector,r=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary),n={primary:t.sizeHeatmapDataVectors.primary-1,secondary:t.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:t.iFirstVector,iFirstUniqueVector:t.iFirstUniqueVector,sizeHeatmapDataVectors:t.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:t.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:e,iFirstGeometryUniqueVector:h,sizeGeometryDataVectors:i,sizeUniqueGeometryDataVectors:s,heightmapData:r,normalmapSize:n}})),l=this.cw.jW.gridTileSizes.map((t=>{const i=a.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary)),s=i[0].sizeGeometryDataVectors;return{...t,tiles:i,sizeGeometryData:s}})),c=a.reduce(((t,i)=>{const s=i.sizeHeatmapDataVectors.primary,e=i.sizeHeatmapDataVectors.secondary,h=s*e;return h>t.cells?{primary:s,secondary:e,cells:h}:t}),{primary:0,secondary:0,cells:0});this.JH={gridTiles:a,gridTileSizes:l,largestGridTileSize:c},this.qS(this.ot,this.ct)}KH(t){this.qH=t,this.XH=void 0}qS(t,i){this.ot=t,this.ct=i;const s=this.Co,e={min:{x:Math.min(this.ot.x,this.ot.x+(s.columns-1)*this.ct.x),z:Math.min(this.ot.z,this.ot.z+(s.rows-1)*this.ct.z)},max:{x:Math.max(this.ot.x,this.ot.x+(s.columns-1)*this.ct.x),z:Math.max(this.ot.z,this.ot.z+(s.rows-1)*this.ct.z)}},h=new Map;return this.JH.gridTiles.forEach((t=>{const i="columns"===this.Co.dataOrder?{x:this.ct.x*(t.sizeHeatmapDataVectors.primary-1),z:this.ct.z*(t.sizeHeatmapDataVectors.secondary-1)}:{x:this.ct.x*(t.sizeHeatmapDataVectors.secondary-1),z:this.ct.z*(t.sizeHeatmapDataVectors.primary-1)},s="columns"===this.Co.dataOrder?{x:this.ot.x+this.ct.x*t.iFirstVector.primary,z:this.ot.z+this.ct.z*t.iFirstVector.secondary}:{x:this.ot.x+this.ct.x*t.iFirstVector.secondary,z:this.ot.z+this.ct.z*t.iFirstVector.primary};h.set(t,{sizeAxis:i,startLocationAxis:s})})),this.KW={tj:e,tilesInfo:h},this}tb(){return{start:this.ot,step:this.ct,end:{x:this.ot.x+this.ct.x*this.Co.columns,z:this.ot.z+this.ct.z*this.Co.rows}}}de(t){const i=this.$H,s=tl(this.Ea,this.sh),e=this.$N.fillStyleSolid(s),h=this.$N.fillStylePaletted(s),r=this.ZS,n=this.ZS!==this.$W,o=this.$N.wireframeStyleLine(n),a=this.$N.wireframeStyleFill(n),l=!1!==a,u=this.GW.o,c=this.GW._(),d=this.Bp._(),f=this.Sz(),A=this.Aa._();this.cw.de();const g=this.cw.XW;if(!g)return this;this.ij=this.ij||this.sj(g);const v=this.ij;this.ej(v);const y=Db(i,v,void 0,(t=>t.sizeGeometryDataVectors));if(y.size>0&&(Rb(this.fE,y,(t=>t.heightmapData),(t=>t.heightmapDataTexture)),this.ZH=!0),"phong"===d.type&&(y.size>0||f)){const t=this.fE.gl,i=this.fE.VO(Pp["2D"],Pp.DrawToNormalTexture({flipXZ:"rows"===this.Co.dataOrder,vertexIdSource:this.fE.sN(),normalTextureType:this.fE.gl2?"uint":"ubyte",heightmapTextureType:this.fE.LO?"float":"ubyte",littleEndian:this.fE.IS_MACHINE_LITTLE_ENDIAN}));v.gridTileSizes.forEach((s=>{s.tiles.forEach((e=>{var h;const r=e.normalmapTexture,n=null===(h=this.KW)||void 0===h?void 0:h.tilesInfo.get(e.tileData);if(!r||!n)return;const o={x:e.normalmapSize.secondary,y:e.normalmapSize.primary},a=o.x*o.y;this.fE.VV.gR((()=>{this.fE.Vz(i,((h,r,o,l)=>(this.fE.CE(i).eN(o,a).Gz(h("uTileDimensionsXZ"),["columns"===this.Co.dataOrder?s.sizeHeatmapData.primary:s.sizeHeatmapData.secondary,"columns"===this.Co.dataOrder?s.sizeHeatmapData.secondary:s.sizeHeatmapData.primary]).nV(h("uTileDimensions"),[s.sizeHeatmapData.primary,s.sizeHeatmapData.secondary]).Gz(h("uTileStartLocationAxisXZ"),[n.startLocationAxis.x,n.startLocationAxis.z]).Gz(h("uTileSizeAxisXZ"),[n.sizeAxis.x,n.sizeAxis.z]).Uz(h("uHeightmapTexture"),e.heightmapDataTexture,1).Bm(t.POINTS,a),!0)))}),r,o,void 0,this.$s.Jn(),0)}))}))}const m=this.tU;if(s||n||u){const t=o&&a?{wireframeSolid:o,wireframeFillSolid:a}:void 0;e?m.surface={shader:this.fE.VO(Pp["3D"],Pp.SurfaceGrid({axisWorldTranslation:jm(this.ti),fillColor:"uniform",interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Co.dataOrder,shadingStyle:d.type,wireframe:l,instanceIdSource:this.fE.hN(),normalTextureType:this.fE.gl2?"uint":"ubyte",intensityTextureType:this.fE.LO?"float":"ubyte",heightmapTextureType:this.fE.LO?"float":"ubyte",littleEndian:this.fE.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:e},wireframe:t}:h&&"value"===h.getLookUpProperty()?m.surface={shader:this.fE.VO(Pp["3D"],Pp.SurfaceGrid({axisWorldTranslation:jm(this.ti),fillColor:["lookup","value",h.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Co.dataOrder,shadingStyle:d.type,wireframe:l,instanceIdSource:this.fE.hN(),normalTextureType:this.fE.gl2?"uint":"ubyte",intensityTextureType:this.fE.LO?"float":"ubyte",heightmapTextureType:this.fE.LO?"float":"ubyte",littleEndian:this.fE.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:h},wireframe:t}:h?m.surface={shader:this.fE.VO(Pp["3D"],Pp.SurfaceGrid({axisWorldTranslation:jm(this.ti),fillColor:["lookup",h.getLookUpProperty(),h.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Co.dataOrder,shadingStyle:d.type,wireframe:l,instanceIdSource:this.fE.hN(),normalTextureType:this.fE.gl2?"uint":"ubyte",intensityTextureType:this.fE.LO?"float":"ubyte",heightmapTextureType:this.fE.LO?"float":"ubyte",littleEndian:this.fE.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:h},wireframe:t}:l&&(m.surface={shader:this.fE.VO(Pp["3D"],Pp.SurfaceGrid({axisWorldTranslation:jm(this.ti),fillColor:void 0,interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Co.dataOrder,shadingStyle:d.type,wireframe:l,instanceIdSource:this.fE.hN(),normalTextureType:this.fE.gl2?"uint":"ubyte",intensityTextureType:this.fE.LO?"float":"ubyte",heightmapTextureType:this.fE.LO?"float":"ubyte",littleEndian:this.fE.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:t})}return m.mousePicking=A?this.tU.mousePicking||{shader:this.fE.VO(Pp["3D"],Pp.SurfaceGrid({axisWorldTranslation:jm(this.ti),fillColor:"uniform",interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Co.dataOrder,shadingStyle:"simple",wireframe:!1,instanceIdSource:this.fE.hN(),normalTextureType:this.fE.gl2?"uint":"ubyte",intensityTextureType:this.fE.LO?"float":"ubyte",heightmapTextureType:this.fE.LO?"float":"ubyte",littleEndian:this.fE.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.tU=m,this.$H.length=0,this.Ea=this.sh,this.$W=r,this.Bp.o=!1,this}sj(t){const i=this.JH.gridTiles.map((i=>{const s=Lb(this.fE,i.sizeHeatmapDataVectors.secondary,i.sizeHeatmapDataVectors.primary),e=t.gridTiles.find((t=>t.iFirstUniqueVector.primary===i.iFirstUniqueVector.primary&&t.iFirstUniqueVector.secondary===i.iFirstUniqueVector.secondary));if(!e)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...i,intensityDataTexture:e.intensityDataTexture,heightmapDataTexture:s,normalmap:void 0,tileData:i}})),s=this.JH.gridTileSizes.map((t=>{const s=i.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary));return{...t,tiles:s}})),e=this.fE.Oz([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),h=this.fE.gl.TRIANGLES;return{gridTiles:i,gridTileSizes:s,rectangleLocationsBuffer:e,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:h}}ej(t){var i;if("phong"===this.Bp._().type)for(let s=0;s<t.gridTiles.length;s+=1){const e=t.gridTiles[s];if(e.normalmapTexture)return;let h;const r=null===(i=this.fE.gl2)||void 0===i?void 0:i.ctx;if(r)h=this.fE.HV(null,r.RGBA_INTEGER,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,r.UNSIGNED_INT,r.RGBA32UI);else{const t=this.fE.gl;h=this.fE.HV(null,t.RGBA,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,t.UNSIGNED_BYTE)}e.normalmapTexture=h}else t.gridTiles.forEach((t=>{t.normalmapTexture&&(this.fE.yE(t.normalmapTexture),t.normalmapTexture=void 0)}))}gR(t){var i,s,e,h;const r=this.fE.gl,n=this.ij;if(!n)return this;const o=this.Bp._(),l=this.tU,u=1===t?null===(i=l.mousePicking)||void 0===i?void 0:i.shader:null===(s=l.surface)||void 0===s?void 0:s.shader;if(!u)return this;const c=1!==t?null===(e=l.surface)||void 0===e?void 0:e.wireframe:void 0,d=1!==t?null===(h=l.surface)||void 0===h?void 0:h.fill:void 0;return this.fE.Vz(u,((i,s,e,h)=>{let l=!1;if(this.fE.CE(u).rN(e,this.JH.largestGridTileSize.cells).aV(i("uScale"),this.cH.NE.Yz()).aV(i("uDisp"),this.cH.NE.jz()).uV(i("uViewProjectionMatrix"),this.bH).Wz(i("uIsHighlighted"),1===t||2===t?0:this.ma).jR(i("uHighlightColorOffset"),1===t||2===t?_e:this.xa).Wz(i("uRenderEffectMask"),2===t?1:0),1!==t&&("phong"===o.type&&this.fE.aV(i("uCameraLoc"),this.xH).aV(i("uLightLoc"),this.MH).Wz(i("uAmbientReflection"),o.ambientReflection).Wz(i("uSpecularReflection"),o.specularReflection).Wz(i("uDiffuseReflection"),o.diffuseReflection).Wz(i("uShininess"),o.shininess).jR(i("uLightColor"),o.specularColor).jR(i("uAmbientColor"),o.ambientColor),c)){const{wireframeFillSolid:t,wireframeSolid:s}=c,e=s.getThickness()<0?1:s.getThickness();this.fE.jR(i("uWireframeColor"),t.getColor()).Wz(i("uWireframeThickness"),e)}return 1===t?this.fE.jR(i("uColorDiffuse"),this.ZN):"solid"===(null==d?void 0:d.fillMode)&&this.fE.jR(i("uColorDiffuse"),d.fillStyleSolid.getColor()),n.gridTileSizes.forEach((h=>{this.fE.Gz(i("uTileDimensionsXZ"),["columns"===this.Co.dataOrder?h.sizeHeatmapData.primary:h.sizeHeatmapData.secondary,"columns"===this.Co.dataOrder?h.sizeHeatmapData.secondary:h.sizeHeatmapData.primary]).nV(i("uTileDimensions"),[h.sizeHeatmapData.primary,h.sizeHeatmapData.secondary]),h.tiles.forEach((o=>{var u;const f=null===(u=this.KW)||void 0===u?void 0:u.tilesInfo.get(o.tileData);if(!f)return;let A=0,g=(o.sizeHeatmapDataVectors.primary-1)*(o.sizeHeatmapDataVectors.secondary-1);if(this.qH){const t=this.qH.fill.iFirstPrimary,i=this.qH.fill.iFirstPrimary+this.qH.fill.amountPrimary-1,s=o.iFirstVector.primary,e=o.iFirstVector.primary+o.sizeHeatmapDataVectors.primary-1;if(s>i||e<t)return;const r=((t,i,s,e)=>a(Math.max(t,s),Math.min(i,e)))(t,i,s,e);A=(r.min-o.iFirstVector.primary)*(h.sizeGeometryData.secondary-1),g=(r.max-r.min)*(h.sizeGeometryData.secondary-1)}if(!(A<0||g<=0)){if("intensity"===(null==d?void 0:d.fillMode)){const{fillStylePaletted:t}=d,s=this.cw.Dl;this.fE.dN(e,t.lut,s).Uz(i("uTileIntensityValues"),o.intensityDataTexture,2).oV(i("uTileBoundsAxisXZ"),[f.startLocationAxis.x,f.startLocationAxis.z,f.sizeAxis.x,f.sizeAxis.z])}if("xyz"===(null==d?void 0:d.fillMode)){const{fillStylePaletted:t}=d,i="x"===t.getLookUpProperty()?{min:this.ri(),max:this.ni()}:"y"===t.getLookUpProperty()?{min:this.oi(),max:this.ai()}:"z"===t.getLookUpProperty()?{min:this.Yp(),max:this.Wp()}:void 0;if(!i&&t.lut.percentageValues)return;this.fE.dN(e,t.lut,i)}1!==t&&"phong"===this.Bp._().type&&o.normalmapTexture&&this.fE.Uz(i("uNormalmapTexture"),o.normalmapTexture,3),this.fE.Nz(n.rectangleLocationsBuffer,0,{location:s("aGeoCellOffset"),size:2},{location:c?s("aTriangleBary"):void 0,size:3}).cV(i("uBaseInstance"),A).Gz(i("uTileStartLocationAxisXZ"),[f.startLocationAxis.x,f.startLocationAxis.z]).Gz(i("uTileSizeAxisXZ"),[f.sizeAxis.x,f.sizeAxis.z]).Uz(i("uHeightmapTexture"),o.heightmapDataTexture,0).TV(n.rectangleLocationsDrawMode,0,n.rectangleLocationsDrawLength,g),l=!0,r.bindBuffer(r.ARRAY_BUFFER,null)}}))})),l})),this}dispose(){return super.dispose(),this.cw.dispose(),this.ij&&(this.ij.gridTileSizes.forEach((t=>{})),this.ij.gridTiles.forEach((t=>{this.fE.yE(t.heightmapDataTexture),t.normalmapTexture&&this.fE.yE(t.normalmapTexture)})),this.fE.Zz(this.ij.rectangleLocationsBuffer),this.ij=void 0),this.tU={},this}vE(){return this.dispose(),this.cw.vE(),this}hb(t){return this.cw.hb(t),this}rb(t){this.$H.push(t),Bb(this.JH.gridTiles,t,(t=>t.heightmapData));for(let i=t.startPrimary;i<t.startPrimary+t.lengthPrimary;i+=1)this.QH[i]=void 0;return this.XH=void 0,this}sb(t){return this.GW.M(t),this}eb(){return this.GW._()}ah(t){return this.sh=qa(this.sh,t),this.cw.ah(this.sh),this}pr(){return this.sh}QS(t){return this.ZS="function"==typeof t?t(this.ZS):t,this}ib(){return this.ZS}ni(){var t;return(null===(t=this.KW)||void 0===t?void 0:t.tj.max.x)||0}ri(){var t;return(null===(t=this.KW)||void 0===t?void 0:t.tj.min.x)||0}ai(){const t=this.XH||this.hj();return this.XH=t,t.max}oi(){const t=this.XH||this.hj();return this.XH=t,t.min}Wp(){var t;return(null===(t=this.KW)||void 0===t?void 0:t.tj.max.z)||0}Yp(){var t;return(null===(t=this.KW)||void 0===t?void 0:t.tj.min.z)||0}tu(){return 0}iu(){return 0}Hp(){return 0}hj(){if(this.XH)return this.XH;const t=this.qH?this.qH.fill.iFirstPrimary:0,i=this.qH?t+this.qH.fill.amountPrimary-1:this.Co.primaryDimensionVectorsCount-1;let s=Or,e=zr;return this.JH.gridTiles.forEach((h=>{for(let r=Math.max(t,h.iFirstUniqueVector.primary);r<=Math.min(i,h.iFirstUniqueVector.primary+h.sizeUniqueHeatmapDataVectors.primary-1);r+=1){const t=(r-h.iFirstUniqueVector.primary)*h.sizeHeatmapDataVectors.secondary;let i=this.QH[r];if(i)s=s<i.min?s:i.min,e=e>i.max?e:i.max;else{i={min:Or,max:zr},this.QH[r]=i;for(let r=0;r<h.sizeHeatmapDataVectors.secondary;r+=1){const n=h.heightmapData[t+r];s=s<n?s:n,e=e>n?e:n,i.min=Math.min(i.min,n),i.max=Math.max(i.max,n)}}}})),this.XH={min:s,max:e},this.XH}}class xx extends ax{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.uH="disabled",this.tY=0,this.sY={},this.ot={x:0,z:0},this.ct={x:1,z:1},this.Co={...e,scrollDimensionSize:"columns"===e.scrollDimension?e.columns:e.rows,staticDimensionSize:"columns"===e.scrollDimension?e.rows:e.columns},this.tj={min:{x:this.ot.x,z:this.ot.z},max:{x:"rows"===e.scrollDimension?this.ot.x+(e.columns-1)*this.ct.x:this.ot.x,z:"columns"===e.scrollDimension?this.ot.z+(e.rows-1)*this.ct.z:this.ot.z}};const n=()=>({shape:new bx(this.cH,Ph,this.Sa,{columns:e.columns+("columns"===e.scrollDimension?1:0),rows:e.rows+("rows"===e.scrollDimension?1:0),dataOrder:e.scrollDimension,heatmapDataType:"intensity"},this.XN,this.ZN).setVisible(!1),hasData:!1});this.I_=[n(),n()]}de(t){this.I_.forEach((i=>{i.shape.de(t)}));const i=this.I_.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,Rh(null===(s=i.shape.cw.Dl)||void 0===s?void 0:s.min,Or)),t.max=Math.max(t.max,Rh(null===(e=i.shape.cw.Dl)||void 0===e?void 0:e.max,zr)),t}),{min:Or,max:zr}),s=this.I_.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,Rh(null===(s=i.shape.XH)||void 0===s?void 0:s.min,Or)),t.max=Math.max(t.max,Rh(null===(e=i.shape.XH)||void 0===e?void 0:e.max,zr)),t}),{min:Or,max:zr});return this.I_.forEach((t=>{t.shape.cw.Dl=i,t.shape.XH=s})),this}gR(t){return this.I_.forEach((i=>{i.hasData&&(i.shape.bH=this.bH,i.shape.xH=this.xH,i.shape.MH=this.MH,i.shape.gR(t))})),this}qS(t,i){return this.ot=t,this.ct=i,this.I_.forEach((t=>{t.shape.qS("columns"===this.Co.scrollDimension?{x:t.shape.tb().start.x,z:this.ot.z}:{x:this.ot.x,z:t.shape.tb().start.z},this.ct)})),"columns"===this.Co.scrollDimension?(this.tj.min.z=t.z,this.tj.max.z=this.ot.z+(this.Co.rows-1)*this.ct.z):(this.tj.min.x=t.x,this.tj.max.x=this.ot.x+(this.Co.columns-1)*this.ct.x),this}tb(){return{start:this.ot,step:this.ct}}_i(){return this.tY=0,this.sY={},this.tj={min:{x:this.ot.x,z:this.ot.z},max:{x:"rows"===this.Co.scrollDimension?this.ot.x+(this.Co.columns-1)*this.ct.x:this.ot.x,z:"columns"===this.Co.scrollDimension?this.ot.z+(this.Co.rows-1)*this.ct.z:this.ot.z}},this.I_.forEach((t=>{t.shape.setVisible(!1),t.shape.ZH=!1,t.hasData=!1})),this}lb(t){var i;const s=this.I_[0],e=this.I_[1],h=t.heightMapValues?t.heightMapValues.length:null===(i=t.intensityValues)||void 0===i?void 0:i.length;let r=0;if(!h)return this;do{const i=Math.floor(this.tY/this.Co.scrollDimensionSize)%this.I_.length,n=this.I_[i],o=this.tY%this.Co.scrollDimensionSize,a=this.Co.scrollDimensionSize-o,l=0===o,u=Math.min(a,h),c=o+u,d=o,f=d+1,A=r,g=r+u,v=this.tY>=this.Co.scrollDimensionSize&&c<=this.Co.scrollDimensionSize-1,y=l;l&&(n.shape.qS("columns"===this.Co.scrollDimension?{x:this.ot.x+(this.tY-1)*this.ct.x,z:this.ot.z}:{x:this.ot.x,z:this.ot.z+(this.tY-1)*this.ct.z},this.ct),n.shape.setVisible(!0));const m=v?0:1,p=c+(v?1:0);n.shape.KH({fill:{iFirstPrimary:m,amountPrimary:p},wireframe:{iFirstPrimary:m,amountPrimary:p,connectNext:!1}});const S=n===s?e:s,b=c+1,x=1+this.Co.scrollDimensionSize-b;S.shape.KH({fill:{iFirstPrimary:b,amountPrimary:x},wireframe:{iFirstPrimary:b,amountPrimary:x-1,connectNext:!0}});const M={};if(t.heightMapValues){const i=t.heightMapValues.slice(A,g);let s=!1;y&&this.sY.yValues&&(s=!0,i.splice(0,0,this.sY.yValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.Co.staticDimensionSize,values:i,type:"y"};n.shape.rb(e),n.hasData=!0,M.yValues=i[u-1]}if(t.intensityValues){const i=t.intensityValues.slice(A,g);let s=!1;y&&this.sY.intensityValues&&(s=!0,i.splice(0,0,this.sY.intensityValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.Co.staticDimensionSize,values:i,type:"intensity"};n.shape.hb(e),n.hasData=!0,M.intensityValues=i[u-1]}this.tY+=u,r+=u,this.sY=M}while(r<h);return"columns"===this.Co.scrollDimension?(this.tj.min.x=this.ot.x+Math.max(this.tY-this.Co.scrollDimensionSize,0)*this.ct.x,this.tj.max.x=this.ot.x+(this.tY-1)*this.ct.x):(this.tj.min.z=this.ot.z+Math.max(this.tY-this.Co.scrollDimensionSize,0)*this.ct.z,this.tj.max.z=this.ot.z+(this.tY-1)*this.ct.z),this}sb(t){return this.I_.forEach((i=>i.shape.sb(t))),this}eb(){return this.I_[0].shape.eb()}ah(t){return this.I_.forEach((i=>i.shape.ah(t))),this}pr(){return this.I_[0].shape.pr()}QS(t){return this.I_.forEach((i=>i.shape.QS(t))),this}ib(){return this.I_[0].shape.ib()}vE(){return this.dispose(),this.I_.forEach((t=>t.shape.vE())),this}dispose(){return super.dispose(),this.I_.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.I_.forEach((i=>i.shape.setVisible(t&&i.hasData))),this}Vp(t){return super.Vp(t),this.I_.forEach((i=>i.shape.Vp(t))),this}ni(){return this.tj.max.x}ri(){return this.tj.min.x}ai(){return Math.max(this.I_[0].shape.ai(),this.I_[1].shape.ai())}oi(){return Math.min(this.I_[0].shape.oi(),this.I_[1].shape.oi())}Wp(){return this.tj.max.z}Yp(){return this.tj.min.z}tu(){return 0}iu(){return 0}Hp(){return 0}Xs(t){return super.Xs(t),this.I_.forEach((i=>i.shape.Xs(t))),this}}class Mx extends Kb{constructor(t,i,s,e){super(t,i,s),this.rj=45,this.nj=.1,this.oj=100,this.xH=n(0,0,1),this.aj=n(0,0,-1),this.lj=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.Bp=new Kl,this.ti=e}Bb(){const{cellIndex:t,cellSpan:i,cellsAmount:s}=this.ti,e=i.x/s.x,h=i.y/s.y,r=t.x/s.x,n=t.y/s.y,o=this.$s.Hi();return{x:r*o.x,y:n*o.y,width:e*o.x,height:h*o.y}}setCameraLocation(t){return this.xH=t,this}getCameraLocation(){return this.xH}setCameraDirection(t){return this.aj=Er.normalize(t),this}getCameraDirection(){return this.aj}setLightLocation(t){return this.MH=t,this}getLightLocation(){return this.MH}uj(){return n(this.lj[0],this.lj[1],this.lj[2])}cj(){return n(this.lj[4],this.lj[5],this.lj[6])}}class _x extends Mx{constructor(t,i,s,e){super(t,i,s,e),this.NE=new bS,this.dj=!0,this.zN=t,this.gl=t.NN(),this.iH=this.QY,this.fj=this.$s.oa((()=>{this.dj=!0})),this.Aj=e.Lt((()=>{this.dj=!0}))}Ez(t){const i=t.ri(),s=t.oi(),e=t.Yp(),h=t.ni(),r=t.ai(),n=t.Wp();if(i===Or||h===zr||s===Or||r===zr||e===Or||n===zr)return Vr;const o=t.tu(),a=t.iu(),l=t.Hp(),u=Math.abs(t.ae.Sp(o)*t.ti.x.$t()),c=Math.abs(t.ae.Sp(a)*t.ti.y.$t()),d=Math.abs(t.ae.Sp(l)*t.ti.z.$t()),f=i-u,A=h+u,g=s-c,v=r+c,y=e-d,m=n+d;let p;return[{x:f,y:g,z:y},{x:A,y:g,z:y},{x:f,y:v,z:y},{x:A,y:v,z:y},{x:f,y:g,z:m},{x:A,y:g,z:m},{x:f,y:v,z:m},{x:A,y:v,z:m}].map((i=>t.ae.xp(i))).forEach((t=>{if(!t)return;const i={min:t,max:t};p=p?sn(p,{min:t,max:t}):i})),p||Vr}sH(t){const i=Array.from(this.iH.values());for(let s=0;s<i.length;s+=1){const e=i[s],h=e.UN(t);if(h)return{entity:e,index:s,collectionMember:h.collectionMember}}}xp(t){if(this.gj(),this.vj(),!this.bH)return;const i=this.NE.jz(),s=n(i[0],i[1],i[2]),h=this.NE.Yz(),r=n(h[0],h[1],h[2]),o=Er.divideVec(Er.subtractVec(t,s),r),a=this.bH,l=Bf.multiply(a,[o.x,o.y,o.z,1]),u=e(l[0]/l[3],l[1]/l[3]),c=this.$s.Hi();return{x:.5*(1+u.x)*c.x,y:.5*(1+u.y)*c.y}}ii(t){const i=this.NE.jz(),s=this.NE.Yz(),e=Er.divideVec(Er.subtractVec(t,{x:i[0],y:i[1],z:i[2]}),{x:s[0],y:s[1],z:s[2]});return{...t,x:e.x,y:e.y,z:e.z}}ei(t){const i=this.NE.jz(),s=this.NE.Yz(),e=Er.addVec(Er.multiplyVec(t,{x:s[0],y:s[1],z:s[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:e.x,y:e.y,z:e.z}}Sp(t){return t/1e3}DH(){return.001}de(){const t=this.xH,i=this.MH,s=this.ti.x.o||this.ti.y.o||this.ti.z.o;if(!i)throw pr(0,(()=>Sr()));const{viewProjectionMatrix:e}=this.gj();this.vj();const h=[t.x,t.y,t.z],r=[i.x,i.y,i.z];return this.QY.forEach((t=>{t.bH=e,t.xH=h,t.MH=r,t.de(s)})),this}gj(){if(!this.dj&&this.bH)return{viewProjectionMatrix:this.bH};const t=this.Bb(),i=t.width/t.height;this.yj=Bf.projectionPerspective(this.rj,i,this.nj,this.oj);const s=this.xH;this.lj[12]=s.x,this.lj[13]=s.y,this.lj[14]=s.z;const e=this.aj,h=n(0,1,0),r=Er.multiply(e,-1),o=Er.normalize(Er.cross(h,r)),a=Er.normalize(Er.cross(r,o));this.lj[0]=o.x,this.lj[1]=o.y,this.lj[2]=o.z,this.lj[4]=a.x,this.lj[5]=a.y,this.lj[6]=a.z,this.lj[8]=r.x,this.lj[9]=r.y,this.lj[10]=r.z,this.mj=Bf.inverse(this.lj);const{cellIndex:l,cellSpan:u,cellsAmount:c}=this.ti,d=u.x/c.x,f=u.y/c.y,A=(l.x+u.x/2)/c.x,g=(l.y+u.y/2)/c.y,v=Bf.multiply(Bf.translation(Hl(-1,1,A),Hl(-1,1,g),0),Bf.scaling(d,f,1));return this.bH=Bf.multiply(v,Bf.multiply(this.yj,this.mj)),this.pj=Bf.inverse(this.bH),this.dj=!1,{viewProjectionMatrix:this.bH}}vj(){this.NE.IN(this.ti.x),this.NE.PN(this.ti.y),this.NE.DN(this.ti.z)}gR(t,i){const s=this.gl.Mz(),e=this.Bb(),h={x:e.x*s*i,y:e.y*s*i,width:e.width*s*i,height:e.height*s*i};return this.gl.Rz(h.x,h.y,h.width,h.height),this.QY.forEach((i=>{i.getVisible()&&(this.gl.Fz(i.uH),1!==t&&this.gl.Np(i.Rp),(1!==t||i.getMouseInteractions())&&i.gR(t))})),this.gl.Fz("disabled"),this.gl.Np(!1),this.gl.Iz(!1),this}setCameraLocation(t){return this.xH.x===t.x&&this.xH.y===t.y&&this.xH.z===t.z||(this.dj=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.aj.x===t.x&&this.aj.y===t.y&&this.aj.z===t.z||(this.dj=!0),super.setCameraDirection(t),this}Bt(){super.Bt(),this.$s.aa(this.fj),this.ti.Rt(this.Aj)}sS(t){const i=this.zN.eH();return this.JY(new px(this,this.KY,[],i,this.zN.hH(i),t))}Nm(t){const i=this.zN.eH();return this.JY(new gx(this,this.KY,t,i,this.zN.hH(i)))}Zp(){const t=this.zN.eH();return this.JY(new lx(this,this.KY,[],t,this.zN.hH(t)))}vb(){const t=this.zN.eH();return this.JY(new mx(this,this.KY,[],t,this.zN.hH(t)))}gv(){const t=this.zN.eH();return this.JY(new dx(this,this.KY,[],t,this.zN.hH(t)))}JS(t){const i=this.zN.eH();return this.JY(new bx(this,this.KY,[],t,i,this.zN.hH(i)))}ab(t){const i=this.zN.eH();return this.JY(new xx(this,this.KY,[],t,i,this.zN.hH(i)))}}class wx extends Da{constructor(t,i,s,e=mS){if(super(t,i,s),this.zt=h(1,1),this.Sj=!1,this.bj=0,this.xj=!0,this.Mj=0,this.PH=8388608,this._O=[null,null],this._j=null,this.wj=null,this.Cj=0,this.Pv=!1,this.kj=0,this.ie=(t=!1)=>(this.Ps||this.$n||this.Tj()||(t&&(this.Sj=!0),this.Nn=!0,this.Fj||this.Bn.zO(t)),this),this.Fj=!1,this.WO=t=>{if(this.Ps||this.$n)return;const i=t-this.bj;if(i>=this.Bo||-1===this.Bo){this.Fj=!0,this.bj=t,this.Sj=!1;const s=i>50?1e3/60:i;this.Gn&&this.Gn(s),this.Nn=!1,-1!==this.Bo&&this.Sj&&(this.Bn.zO(this.Sj),this.Nn=!0),this.js.de(i),this.qn(),this.io(),this.Un&&this.Un(),this.Fj=!1,this.Ct.emit("render"),this.Nn&&this.ie(this.Sj)}else this.Nn=!0,this.Bn.zO()},this.Ij=new Map,this.NN=()=>this.fE,this.Pj=()=>{var t,i,s;const e=this.xo(),h=this.xj,r=Ch.performance.now(),n=null===(t=this.Dj)||void 0===t?void 0:t.Bj.reduce(((t,i)=>t?i.Lj&&t.Lj&&i.Lj>t.Lj?i:t:i),void 0),o=null==n?void 0:n.Lj,a=null===(i=this.Ao)||void 0===i?void 0:i.timeStamp,l=null===(s=this.ea)||void 0===s?void 0:s.timeStamp;return h?(this.ie(!0),!1):void 0===n||(void 0===n||!n.Rj)&&(void 0!==l&&void 0!==o&&l>o||(void 0!==o&&void 0===e?r-o>=1e3:!(void 0!==o&&void 0!==a&&r-a>=2e3)||r-o>=1e3))},this.Ej=()=>{var t,i;this.Oj=void 0;const s=null===(i=null===(t=this.Dj)||void 0===t?void 0:t.zj)||void 0===i?void 0:i.Vj;void 0===s||s>=this.Mj||this.Nj()},this.io=()=>{if(this.Ps||this.$n)return this;const t=this.fE.gl,i=Ch.performance.now();this.fE.Bz(t.FRAMEBUFFER,this.Bn.DO?this._O[0]:null);const s=this.zt,e=s.x>0&&s.y>0;if(this.Qn.o&&this.fE.PV(this.Qn._()),t.resize&&e&&t.resize(s.x*this.fE.Mz(),s.y*this.fE.Mz()),this.fE.Lz(0,0,s.x*this.fE.Mz(),s.y*this.fE.Mz()),this.fE.Rz(0,0,s.x*this.fE.Mz(),s.y*this.fE.Mz()),this.fE._i(),e)for(const t of this.On.values())t.gR(0,1);if(this.Co.Io&&e&&(this.Oj&&(Ch.clearTimeout(this.Oj),this.Oj=void 0),this.Pj()?(this.Nj(),this.fE.Bz(t.FRAMEBUFFER,this.Bn.DO?this._O[0]:null)):this.Oj=Ch.setTimeout(this.Ej,500)),this.Vt(),this.Pn(),this.no&&this.ro(this.no),this.Bn.DO){const i=this.fE.gl2.ctx;i.bindFramebuffer(i.READ_FRAMEBUFFER,this._O[0]),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,this._O[1]),i.clearBufferfv(i.COLOR,0,[1,1,1,1]),i.blitFramebuffer(0,0,this.zt.x*this.fE.Mz(),this.zt.y*this.fE.Mz(),0,0,this.zt.x*this.fE.Mz(),this.zt.y*this.fE.Mz(),t.COLOR_BUFFER_BIT,t.LINEAR)}else t.bindTexture(t.TEXTURE_2D,this.mO),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,this.zt.x*this.fE.Mz(),this.zt.y*this.fE.Mz(),0),t.bindTexture(t.TEXTURE_2D,null);return this.fE.Bz(t.FRAMEBUFFER,null),this.Bn.zO(),this.xj=!1,this.Mj=i,this},this.qn=()=>{if("use-window"===this.Gj.mode){const t=Ch.devicePixelRatio||1;this.fE.YV(t)}const t=this.zt;if(0===t.x||0===t.y)return this;this.Wo.Wt(t);for(const t of this.On.values())t.de();return this.Vt(),this},this.Uj=1,this.Bn=t,this.Bn.IO){this.Wj=Ch.document.createElement("canvas"),this.Wj.style.width="100%",this.Wj.style.height="100%",this.Wj.style.display="block",this.Wj.style.boxSizing="content-box",this.Wj.style.position="absolute";const t=this.Wj.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!1});if(!t)throw new Sh("No Canvas context available.");this.pO=t,this._n.appendChild(this.Wj)}this.Bn.jO(this);const r={preserveDrawingBuffer:!0,antialias:i?i.antialias:void 0,alpha:!0,lineAntialias:!i||(!0===i.lineAntiAlias||!1===i.lineAntiAlias?i.lineAntiAlias:!1!==i.antialias)};let n;if(this.Bn.DO&&t.gl2&&(n=new e(this,this.Co,{type:"webgl2",ctx:t.gl2.ctx,antialias:r.antialias,lineAntialias:r.lineAntialias},this.zs.isDark)),n||this.Bn.DO||(n=new e(this,this.Co,{type:"webgl1",ctx:t.gl,antialias:r.antialias,lineAntialias:r.lineAntialias},this.zs.isDark)),!n)throw new Sh("No WebGL context available");if(this.fE=n,"number"==typeof(null==i?void 0:i.devicePixelRatio))this.Gj={mode:"fixed",value:i.devicePixelRatio},this.fE.YV(i.devicePixelRatio);else{const t=Ch.document.head.querySelector('meta[name="viewport"]'),s=!0===i.devicePixelRatio||(null==t?void 0:t.content.includes("width=device-width")),e=Ch.devicePixelRatio||1;this.Gj=s?{mode:"use-window"}:{mode:"fixed",value:e},this.fE.YV(e)}const o=i?i.width:void 0,a=i?i.height:void 0;this.No=this.Yj(o),this.Uo=this.Yj(a),this.Hj(this.No,this.Uo),this.eY=this.lP("engine offscreen",1e6),this.jj=this.lP("engine bg",0);const l="function"==typeof this.zs.lcjsBackgroundFillStyle?this.zs.lcjsBackgroundFillStyle(this.Co.ke):this.zs.lcjsBackgroundFillStyle;this.Wo=this.jj.lh(this.ti).ah(l).oh(this.zs.lcjsBackgroundStrokeStyle).setMouseInteractions(!1).dh({x:0,y:0});const u=this.lP("engine effects",200001).rH(this.zs.effect);this.Gs=u;const c=this.Bn.DO,d=this.Hi();c&&(this._O=[n.Kz(),n.Kz()]);const f=this.fE.gl;c&&(this._j=f.createRenderbuffer(),this.wj=f.createRenderbuffer()),this.mO=f.createTexture();const A=d.x*this.fE.Mz(),g=d.y*this.fE.Mz();if(c){f.bindRenderbuffer(f.RENDERBUFFER,this._j);const t=this.fE.gl2.ctx;this.Cj=this.Bn.lO&&!1!==i.antialias?t.getParameter(t.MAX_SAMPLES):0,t.renderbufferStorageMultisample(t.RENDERBUFFER,this.Cj,t.RGBA8,A,g),f.bindRenderbuffer(f.RENDERBUFFER,this.wj),f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,A,g),t.renderbufferStorageMultisample(t.RENDERBUFFER,this.Cj,t.DEPTH_COMPONENT16,A,g)}c&&(this.fE.Bz(f.FRAMEBUFFER,this._O[0]),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,this._j),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,this.wj)),f.bindTexture(f.TEXTURE_2D,this.mO),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,A,g,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),c&&(this.fE.Bz(f.FRAMEBUFFER,this._O[1]),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.mO,0)),this.fE.Bz(f.FRAMEBUFFER,null),this.Xn(),this.Pn(),this.zv=Ca(this),this.Vv={zs:this.zs,js:this.js,ti:this.ti,ie:t=>this.ie(t),xo:()=>this.xo(),YB:t=>this.YB(t),Co:this.Co,Mo:t=>this.Mo(t),Gs:this.Gs,da:t=>this.da(t),fa:t=>this.fa(t),cv:{uv:(t,i,s)=>this.fE.br(i.family).TE(t,i,s,this.zs.isDark)}};const v=()=>{this.Bt()};Ch.addEventListener("unload",v),this.Wn.push((()=>{Ch.removeEventListener("unload",v)}))}get $j(){return this.On}Ln(t,i){let s=this.Ij.get(t);if(!s){const i=this.fE.QV(t),e=new Set,h=t=>{e.add(t)},r=s=>{e.delete(s)&&0===e.size&&(i.unbindResources(),this.Ij.delete(t))},n=[];s={imageTexture:i,instances:e,handleNewInstance:h,handleInstanceDisposed:r,sharedEngineReference:{HB:()=>i.uz,jB:t=>{i.uz?t():n.push(t)}}},this.Ij.set(t,s),i.CE(this),i.yz((()=>{n.forEach((t=>{t()})),n.length=0}))}const e=new du(t,s.handleNewInstance,s.handleInstanceDisposed,i);return s.handleNewInstance(e),e}YB(t){const i=Array.from(this.Ij.values()).find((i=>i.instances.has(t)));if(!i)throw pr(0,(()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!")));return i.sharedEngineReference}oo(t,i){var s;const e=null===(s=this.Dj)||void 0===s?void 0:s.zj;if(!e)return;const h=this.Ah(i.x,i.y),r=Math.round(h.x*this.fE.Mz()),n=Math.round(h.y*this.fE.Mz());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map((t=>this.Xj(e,r+t[0]/e.Zj,n+t[1]/e.Zj))).reduce(((t,i)=>{if(void 0===i)return t||void 0;const s=1e6*i.layerIndex+i.entityIndex;return!t||s>t.zIndexForComparison?{zIndexForComparison:s,entity:i.entity,collectionMember:i.collectionMember}:t}),void 0)}Xj(t,i,s){const e=Math.round(i*t.Zj),h=Math.round(s*t.Zj);if(e<0||e>=t.zt.x||h<0||h>=t.zt.y)return;const r=4*(e+h*t.zt.x),n=t.Qj[r+0],o=t.Qj[r+1],a=t.Qj[r+2],l=t.Qj[r+3];return void 0!==n&&void 0!==o&&void 0!==a&&void 0!==l?this.Jj(n,o,a,l):void 0}Tn(t,i,s){const e=this.fE.gl;this.Bn.DO?(this.fE.Bz(e.FRAMEBUFFER,this._O[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.mO,0)):this.fE.Bz(e.FRAMEBUFFER,null);const h=this.yO(),r=h.x,n=h.y,o=new Uint8Array(r*n*4);this.Bn.DO||this.io(),e.readPixels(0,0,r,n,e.RGBA,e.UNSIGNED_BYTE,o);const a=new ImageData(new Uint8ClampedArray(o),r,n),l=document.createElement("canvas"),u=l.getContext("2d");if(!u)throw new Error("Failed to create 2D context for saving image.");l.width=r,l.height=n,u.putImageData(a,0,0),u.translate(0,n),u.scale(1,-1),u.drawImage(l,0,0),this.Bn.DO&&(this.fE.Bz(e.FRAMEBUFFER,this._O[0]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,this._j),this.fE.Bz(e.FRAMEBUFFER,this._O[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.mO,0)),this.fE.Bz(e.FRAMEBUFFER,null);const c=l.toDataURL(t,i);return s?c:(t=>{const i=t.split(",")[0].split(":")[1].split(";")[0],s=Ch.atob(t.split(",")[1]),e=new Uint8Array(s.length);for(let t=0;t<s.length;t+=1)e[t]=s.charCodeAt(t);return new Ch.Blob([e.buffer],{type:i})})(c)}Fn(t,i,s=!1){this.Xn(e(Math.round(t),Math.round(i))),this.Kn();const h=this.fE.gl.drawingBufferWidth,r=this.fE.gl.drawingBufferHeight,n=new Uint8Array(h*r*4);if(this.fE.gl.readPixels(0,0,h,r,this.fE.gl.RGBA,this.fE.gl.UNSIGNED_BYTE,n),!s){const t=r/2|0,i=4*h,s=new Uint8Array(4*h);for(let e=0;e<t;e+=1){const t=e*i,h=(r-e-1)*i;s.set(n.subarray(t,t+i)),n.copyWithin(t,h,h+i),n.set(s,h)}}return this.Vn={x:0,y:i},n}XL(t){return void 0!==this.No?this.No[0]=t:this.No=[t,void 0],this._n.style.minWidth=`${this.No[0]}px`,this.Xn(),this}QL(t){return void 0!==this.No?this.No[1]=t:this.No=[void 0,t],this._n.style.maxWidth=`${this.No[1]}px`,this.Xn(),this}KL(t){return void 0!==this.Uo?this.Uo[0]=t:this.Uo=[t,void 0],this._n.style.minHeight=`${this.Uo[0]}px`,this.Xn(),this}tR(t){return void 0!==this.Uo?this.Uo[1]=t:this.Uo=[void 0,t],this._n.style.maxHeight=`${this.Uo[1]}px`,this.Xn(),this}Hj(t,i){return this.No=t,this.Uo=i,this._n.style.minWidth=`${this.No[0]}px`,this._n.style.maxWidth=`${this.No[1]}px`,this._n.style.minHeight=`${this.Uo[0]}px`,this._n.style.maxHeight=`${this.Uo[1]}px`,this.Xn(),this}gO(t){return this.Pv!==t&&(this.Ct.emit("inViewChange",t),this.Pv=t),this}AO(){return this.Pv}$O(t){this.kj=t}HO(){return this.kj}lP(t,i=this.Xo()){const s=this.$o(i);if(s){if(pr(0,(()=>{})),!(s instanceof tx))throw new Error("Unexpected Engine Layer error");return s}return this.so(new tx(this,i,t))}dP(t,i,s){const e=this.$o(i);if(e){if(pr(0,(()=>{})),!(e instanceof _x))throw new Error("Unexpected Engine Layer error");return e}return this.so(new _x(this,i,t,s))}Hi(){return this.zt}yO(){const t=this.fE.Mz();return{x:Math.round(this.zt.x*t),y:Math.round(this.zt.y*t)}}Yj(t){return t instanceof Array||(t=[t,t]),t}Kj(){return this.Bn.SO}Tj(){const t=this.fE.gl;return t&&"resize"in t}Nj(){var t;const i=this.fE.gl,s=Ch.performance.now(),e=this.xo(),h=this.Co.Fo,r={x:Math.ceil(this.zt.x*this.fE.Mz()*h),y:Math.ceil(this.zt.y*this.fE.Mz()*h)};this.Dj||(this.Dj={Zj:h,qj:r,Bj:[],zj:void 0});let n=this.Dj.Bj.find((t=>!t.Rj)),o=!1;n||(o=!0,n={Rj:!1,zt:r,lN:i.createTexture(),t$:this.fE.Kz(),wj:this.fE.qz(),i$:new Uint8Array,Lj:void 0},this.Dj.Bj.push(n));const a=n;(o||a.zt.x!==r.x||a.zt.y!==r.y)&&(i.bindTexture(i.TEXTURE_2D,a.lN),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r.x,r.y,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.fE.Bz(i.FRAMEBUFFER,a.t$),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a.lN,0),i.bindRenderbuffer(i.RENDERBUFFER,a.wj),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,r.x,r.y),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,a.wj),a.i$=new Uint8Array(r.x*r.y*4),a.zt=r),a.Rj=!0,a.Lj=s,this.fE.Bz(i.FRAMEBUFFER,a.t$),i.clearDepth(1),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.disable(i.BLEND),i.resize&&i.resize(r.x,r.y),this.fE.Lz(0,0,r.x,r.y);for(const t of this.On.values())t.gR(1,h);this.fE.Bz(i.FRAMEBUFFER,null),i.bindTexture(i.TEXTURE_2D,null),i.bindRenderbuffer(i.RENDERBUFFER,null),i.enable(i.BLEND);const l=null===(t=this.fE.gl2)||void 0===t?void 0:t.ctx,u=()=>{if(this.Dj){const t=this.Dj.zj;if(t&&t.Vj>s)return;this.Dj.zj={Vj:s,Zj:h,zt:r,Qj:a.i$,s$:e}}};l?this.fE.nN(l,a.t$,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,a.i$).then((()=>{this.Ps||(a.Rj=!1,u())})).catch((t=>{this.Ps||(a.Rj=!1,Ch.console.warn("LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"))})):(this.fE.oN(a.t$,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,a.i$),a.Rj=!1,u())}Xn(t){if("use-window"===this.Gj.mode){const t=Ch.devicePixelRatio||1;this.fE.YV(t)}const i=this.zt.x,s=this.zt.y,e=t||{x:this._n.offsetWidth,y:this._n.offsetHeight};if(0!==e.x&&0!==e.y&&(e.x!==i||e.y!==s)){this.zt=e,this.ti.x.Gt(0,e.x).Wt(e.x),this.ti.y.Gt(0,e.y).Wt(e.y);const t=e.x*this.fE.Mz(),i=e.y*this.fE.Mz(),s=this.fE.gl;this.Bn.IO&&this.pO&&(this.pO.canvas.width=t,this.pO.canvas.height=i);const h=this.Bn.DO;if(this.mO&&(s.bindTexture(s.TEXTURE_2D,this.mO),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,t,i,0,s.RGBA,s.UNSIGNED_BYTE,null)),h){const e=this.fE.gl2.ctx;this._j&&(s.bindRenderbuffer(s.RENDERBUFFER,this._j),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.Cj,e.RGBA8,t,i)),this.wj&&(s.bindRenderbuffer(s.RENDERBUFFER,this.wj),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,t,i),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.Cj,e.DEPTH_COMPONENT16,t,i))}s.bindRenderbuffer(s.RENDERBUFFER,null),this.Ct.emit("resize",[this.zt.x,this.zt.y])}}Bt(){var t;this.Ps||(super.Bt(),this.Oj&&(Ch.clearTimeout(this.Oj),this.Oj=void 0),Array.from(this.fE.qE.entries()).forEach((([t,i])=>{i.vE(!1),this.fE.qE.delete(t)})),Array.from(this.fE.eV.values()).forEach((t=>{t.unbindResources()})),this.fE.eV.clear(),this.fE.sV.rz(),this.fE.NV.Bt(),this.fE.Zz(this.fE.GV),this.fE.Zz(this.fE.UV),this.fE.EV.forEach(((t,i)=>{this.fE.gl.deleteBuffer(i)})),this.fE.EV.clear(),this.fE.iN&&(this.fE.Zz(this.fE.iN.buffer),this.fE.iN=void 0),this.fE.iV(this._O[0]),this.fE.iV(this._O[1]),this.fE.tV(this._j),this.fE.yE(this.mO),this.fE.tV(this.wj),this.Dj&&(this.Dj.Bj.forEach((t=>{this.fE.tV(t.wj),this.fE.iV(t.t$),this.fE.yE(t.lN)})),this.Dj=void 0),this.fE.BV.forEach((t=>this.fE.Zz(t))),this.Ij.clear(),this.Bn.XO(this),this.Wj&&(null===(t=this.Wj.parentElement)||void 0===t||t.removeChild(this.Wj),this.Wj=void 0),this.pO&&(this.pO=void 0),this.fE.gl=void 0)}eH(){const t=this.Uj;return t>4294967295&&(console.warn("LightningChart JS picking ID overflow.\nThis is an unexpected error that could compromise user interactions on the chart.\nPlease report the issue to https://lightningchart.com/js-charts/docs/contact!"),this.Uj=1),this.Uj+=1,t}hH(t){let i=t;const s=Math.floor(i/16777216);i-=16777216*s;const e=Math.floor(i/65536);i-=65536*e;const h=Math.floor(i/256);return i-=256*h,me(s,e,h,i)}Jj(t,i,s,e){if(0===t&&0===i&&0===s&&0===e)return;const h=16777216*t+65536*i+256*s+e;for(const t of this.$j.values()){const i=t.sH(h);if(i)return{entity:i.entity,collectionMember:i.collectionMember,entityIndex:i.index,layerIndex:t.eo()}}}}var Cx={exports:{}};!function(t,i){function s(t,i){if(!t)throw new Error(i||"Assertion failed")}function e(t,i){t.super_=i;var s=function(){};s.prototype=i.prototype,t.prototype=new s,t.prototype.constructor=t}function h(t,i,s){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(s=i,i=10),this.vz(t||0,i||10,s||"be"))}var r;"object"==typeof t?t.exports=h:i.BN=h,h.BN=h,h.wordSize=26;try{r=(void 0).Buffer}catch(t){}function n(t,i,e){for(var h=0,r=Math.min(t.length,e),n=0,o=i;o<r;o++){var a,l=t.charCodeAt(o)-48;h<<=4,h|=a=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,n|=a}return s(!(240&n),"Invalid character in "+t),h}function o(t,i,e,h){for(var r=0,n=0,o=Math.min(t.length,e),a=i;a<o;a++){var l=t.charCodeAt(a)-48;r*=h,n=l>=49?l-49+10:l>=17?l-17+10:l,s(l>=0&&n<h,"Invalid character"),r+=n}return r}function a(t,i){t.words=i.words,t.length=i.length,t.negative=i.negative,t.red=i.red}if(h.isBN=function(t){return t instanceof h||null!==t&&"object"==typeof t&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,i){return t.cmp(i)>0?t:i},h.min=function(t,i){return t.cmp(i)<0?t:i},h.prototype.vz=function(t,i,e){if("number"==typeof t)return this.e$(t,i,e);if("object"==typeof t)return this.h$(t,i,e);"hex"===i&&(i=16),s(i===(0|i)&&i>=2&&i<=36);var h=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&h++,16===i?this.r$(t,h):this.n$(t,i,h),"-"===t[0]&&(this.negative=1),this.o$(),"le"===e&&this.h$(this.toArray(),i,e)},h.prototype.e$=function(t,i,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(s(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this.h$(this.toArray(),i,e)},h.prototype.h$=function(t,i,e){if(s("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var r,n,o=0;if("be"===e)for(h=t.length-1,r=0;h>=0;h-=3)n=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);else if("le"===e)for(h=0,r=0;h<t.length;h+=3)n=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);return this.o$()},h.prototype.r$=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var e,h,r=0;for(s=t.length-6,e=0;s>=i;s-=6)h=n(t,s,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303,(r+=24)>=26&&(r-=26,e++);s+6!==i&&(h=n(t,i,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303),this.o$()},h.prototype.n$=function(t,i,s){this.words=[0],this.length=1;for(var e=0,h=1;h<=67108863;h*=i)e++;e--,h=h/i|0;for(var r=t.length-s,n=r%e,a=Math.min(r,r-n)+s,l=0,u=s;u<a;u+=e)l=o(t,u,u+e,i),this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this.a$(l);if(0!==n){var c=1;for(l=o(t,u,t.length,i),u=0;u<n;u++)c*=i;this.imuln(c),this.words[0]+l<67108864?this.words[0]+=l:this.a$(l)}},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype.l$=function(t){a(t,this)},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype.u$=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype.o$=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this.c$()},h.prototype.c$=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{h.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){h.prototype.inspect=l}else h.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,i,s){s.negative=i.negative^t.negative;var e=t.length+i.length|0;s.length=e,e=e-1|0;var h=0|t.words[0],r=0|i.words[0],n=h*r,o=67108863&n,a=n/67108864|0;s.words[0]=o;for(var l=1;l<e;l++){for(var u=a>>>26,c=67108863&a,d=Math.min(l,i.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var A=l-f|0;u+=(n=(h=0|t.words[A])*(r=0|i.words[f])+c)/67108864|0,c=67108863&n}s.words[l]=0|c,a=0|u}return 0!==a?s.words[l]=0|a:s.length--,s.o$()}h.prototype.toString=function(t,i){var e;if(i=0|i||1,16===(t=t||10)||"hex"===t){e="";for(var h=0,r=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<h|r)).toString(16);e=0!=(r=o>>>24-h&16777215)||n!==this.length-1?u[6-a.length]+a+e:a+e,(h+=2)>=26&&(h-=26,n--)}for(0!==r&&(e=r.toString(16)+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],f=d[t];e="";var A=this.clone();for(A.negative=0;!A.isZero();){var g=A.modrn(f).toString(t);e=(A=A.idivn(f)).isZero()?g+e:u[l-g.length]+g+e}for(this.isZero()&&(e="0"+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}s(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16,2)},r&&(h.prototype.toBuffer=function(t,i){return this.toArrayLike(r,t,i)}),h.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},h.prototype.toArrayLike=function(t,i,e){this.o$();var h=this.byteLength(),r=e||Math.max(1,h);s(h<=r,"byte array longer than desired length"),s(r>0,"Requested array length <= 0");var n=function(t,i){return t.allocUnsafe?t.allocUnsafe(i):new t(i)}(t,r);return this["_toArrayLike"+("le"===i?"LE":"BE")](n,h),n},h.prototype.d$=function(t,i){for(var s=0,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s++]=255&n,s<t.length&&(t[s++]=n>>8&255),s<t.length&&(t[s++]=n>>16&255),6===r?(s<t.length&&(t[s++]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s<t.length)for(t[s++]=e;s<t.length;)t[s++]=0},h.prototype.f$=function(t,i){for(var s=t.length-1,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s--]=255&n,s>=0&&(t[s--]=n>>8&255),s>=0&&(t[s--]=n>>16&255),6===r?(s>=0&&(t[s--]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s>=0)for(t[s--]=e;s>=0;)t[s--]=0},Math.clz32?h.prototype.A$=function(t){return 32-Math.clz32(t)}:h.prototype.A$=function(t){var i=t,s=0;return i>=4096&&(s+=13,i>>>=13),i>=64&&(s+=7,i>>>=7),i>=8&&(s+=4,i>>>=4),i>=2&&(s+=2,i>>>=2),s+i},h.prototype.g$=function(t){if(0===t)return 26;var i=t,s=0;return 0==(8191&i)&&(s+=13,i>>>=13),0==(127&i)&&(s+=7,i>>>=7),0==(15&i)&&(s+=4,i>>>=4),0==(3&i)&&(s+=2,i>>>=2),0==(1&i)&&s++,s},h.prototype.bitLength=function(){var t=this.words[this.length-1],i=this.A$(t);return 26*(this.length-1)+i},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var s=this.g$(this.words[i]);if(t+=s,26!==s)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.o$()},h.prototype.ior=function(t){return s(0==(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var s=0;s<i.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=i.length,this.o$()},h.prototype.iand=function(t){return s(0==(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var i,s;this.length>t.length?(i=this,s=t):(i=t,s=this);for(var e=0;e<s.length;e++)this.words[e]=i.words[e]^s.words[e];if(this!==i)for(;e<i.length;e++)this.words[e]=i.words[e];return this.length=i.length,this.o$()},h.prototype.ixor=function(t){return s(0==(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){s("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),e=t%26;this.u$(i),e>0&&i--;for(var h=0;h<i;h++)this.words[h]=67108863&~this.words[h];return e>0&&(this.words[h]=~this.words[h]&67108863>>26-e),this.o$()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,i){s("number"==typeof t&&t>=0);var e=t/26|0,h=t%26;return this.u$(e+1),this.words[e]=i?this.words[e]|1<<h:this.words[e]&~(1<<h),this.o$()},h.prototype.iadd=function(t){var i,s,e;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this.c$();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i.c$();this.length>t.length?(s=this,e=t):(s=t,e=this);for(var h=0,r=0;r<e.length;r++)i=(0|s.words[r])+(0|e.words[r])+h,this.words[r]=67108863&i,h=i>>>26;for(;0!==h&&r<s.length;r++)i=(0|s.words[r])+h,this.words[r]=67108863&i,h=i>>>26;if(this.length=s.length,0!==h)this.words[this.length]=h,this.length++;else if(s!==this)for(;r<s.length;r++)this.words[r]=s.words[r];return this},h.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i.c$()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this.c$();var s,e,h=this.cmp(t);if(0===h)return this.negative=0,this.length=1,this.words[0]=0,this;h>0?(s=this,e=t):(s=t,e=this);for(var r=0,n=0;n<e.length;n++)r=(i=(0|s.words[n])-(0|e.words[n])+r)>>26,this.words[n]=67108863&i;for(;0!==r&&n<s.length;n++)r=(i=(0|s.words[n])+r)>>26,this.words[n]=67108863&i;if(0===r&&n<s.length&&s!==this)for(;n<s.length;n++)this.words[n]=s.words[n];return this.length=Math.max(this.length,n),s!==this&&(this.negative=1),this.o$()},h.prototype.sub=function(t){return this.clone().isub(t)};var A=function(t,i,s){var e,h,r,n=t.words,o=i.words,a=s.words,l=0,u=0|n[0],c=8191&u,d=u>>>13,f=0|n[1],A=8191&f,g=f>>>13,v=0|n[2],y=8191&v,m=v>>>13,p=0|n[3],S=8191&p,b=p>>>13,x=0|n[4],M=8191&x,_=x>>>13,w=0|n[5],C=8191&w,k=w>>>13,T=0|n[6],F=8191&T,I=T>>>13,P=0|n[7],D=8191&P,B=P>>>13,L=0|n[8],R=8191&L,E=L>>>13,O=0|n[9],z=8191&O,V=O>>>13,N=0|o[0],G=8191&N,U=N>>>13,W=0|o[1],Y=8191&W,H=W>>>13,j=0|o[2],$=8191&j,X=j>>>13,Z=0|o[3],Q=8191&Z,J=Z>>>13,K=0|o[4],q=8191&K,tt=K>>>13,it=0|o[5],st=8191&it,et=it>>>13,ht=0|o[6],rt=8191&ht,nt=ht>>>13,ot=0|o[7],at=8191&ot,lt=ot>>>13,ut=0|o[8],ct=8191&ut,dt=ut>>>13,ft=0|o[9],At=8191&ft,gt=ft>>>13;s.negative=t.negative^i.negative,s.length=19;var vt=(l+(e=Math.imul(c,G))|0)+((8191&(h=(h=Math.imul(c,U))+Math.imul(d,G)|0))<<13)|0;l=((r=Math.imul(d,U))+(h>>>13)|0)+(vt>>>26)|0,vt&=67108863,e=Math.imul(A,G),h=(h=Math.imul(A,U))+Math.imul(g,G)|0,r=Math.imul(g,U);var yt=(l+(e=e+Math.imul(c,Y)|0)|0)+((8191&(h=(h=h+Math.imul(c,H)|0)+Math.imul(d,Y)|0))<<13)|0;l=((r=r+Math.imul(d,H)|0)+(h>>>13)|0)+(yt>>>26)|0,yt&=67108863,e=Math.imul(y,G),h=(h=Math.imul(y,U))+Math.imul(m,G)|0,r=Math.imul(m,U),e=e+Math.imul(A,Y)|0,h=(h=h+Math.imul(A,H)|0)+Math.imul(g,Y)|0,r=r+Math.imul(g,H)|0;var mt=(l+(e=e+Math.imul(c,$)|0)|0)+((8191&(h=(h=h+Math.imul(c,X)|0)+Math.imul(d,$)|0))<<13)|0;l=((r=r+Math.imul(d,X)|0)+(h>>>13)|0)+(mt>>>26)|0,mt&=67108863,e=Math.imul(S,G),h=(h=Math.imul(S,U))+Math.imul(b,G)|0,r=Math.imul(b,U),e=e+Math.imul(y,Y)|0,h=(h=h+Math.imul(y,H)|0)+Math.imul(m,Y)|0,r=r+Math.imul(m,H)|0,e=e+Math.imul(A,$)|0,h=(h=h+Math.imul(A,X)|0)+Math.imul(g,$)|0,r=r+Math.imul(g,X)|0;var pt=(l+(e=e+Math.imul(c,Q)|0)|0)+((8191&(h=(h=h+Math.imul(c,J)|0)+Math.imul(d,Q)|0))<<13)|0;l=((r=r+Math.imul(d,J)|0)+(h>>>13)|0)+(pt>>>26)|0,pt&=67108863,e=Math.imul(M,G),h=(h=Math.imul(M,U))+Math.imul(_,G)|0,r=Math.imul(_,U),e=e+Math.imul(S,Y)|0,h=(h=h+Math.imul(S,H)|0)+Math.imul(b,Y)|0,r=r+Math.imul(b,H)|0,e=e+Math.imul(y,$)|0,h=(h=h+Math.imul(y,X)|0)+Math.imul(m,$)|0,r=r+Math.imul(m,X)|0,e=e+Math.imul(A,Q)|0,h=(h=h+Math.imul(A,J)|0)+Math.imul(g,Q)|0,r=r+Math.imul(g,J)|0;var St=(l+(e=e+Math.imul(c,q)|0)|0)+((8191&(h=(h=h+Math.imul(c,tt)|0)+Math.imul(d,q)|0))<<13)|0;l=((r=r+Math.imul(d,tt)|0)+(h>>>13)|0)+(St>>>26)|0,St&=67108863,e=Math.imul(C,G),h=(h=Math.imul(C,U))+Math.imul(k,G)|0,r=Math.imul(k,U),e=e+Math.imul(M,Y)|0,h=(h=h+Math.imul(M,H)|0)+Math.imul(_,Y)|0,r=r+Math.imul(_,H)|0,e=e+Math.imul(S,$)|0,h=(h=h+Math.imul(S,X)|0)+Math.imul(b,$)|0,r=r+Math.imul(b,X)|0,e=e+Math.imul(y,Q)|0,h=(h=h+Math.imul(y,J)|0)+Math.imul(m,Q)|0,r=r+Math.imul(m,J)|0,e=e+Math.imul(A,q)|0,h=(h=h+Math.imul(A,tt)|0)+Math.imul(g,q)|0,r=r+Math.imul(g,tt)|0;var bt=(l+(e=e+Math.imul(c,st)|0)|0)+((8191&(h=(h=h+Math.imul(c,et)|0)+Math.imul(d,st)|0))<<13)|0;l=((r=r+Math.imul(d,et)|0)+(h>>>13)|0)+(bt>>>26)|0,bt&=67108863,e=Math.imul(F,G),h=(h=Math.imul(F,U))+Math.imul(I,G)|0,r=Math.imul(I,U),e=e+Math.imul(C,Y)|0,h=(h=h+Math.imul(C,H)|0)+Math.imul(k,Y)|0,r=r+Math.imul(k,H)|0,e=e+Math.imul(M,$)|0,h=(h=h+Math.imul(M,X)|0)+Math.imul(_,$)|0,r=r+Math.imul(_,X)|0,e=e+Math.imul(S,Q)|0,h=(h=h+Math.imul(S,J)|0)+Math.imul(b,Q)|0,r=r+Math.imul(b,J)|0,e=e+Math.imul(y,q)|0,h=(h=h+Math.imul(y,tt)|0)+Math.imul(m,q)|0,r=r+Math.imul(m,tt)|0,e=e+Math.imul(A,st)|0,h=(h=h+Math.imul(A,et)|0)+Math.imul(g,st)|0,r=r+Math.imul(g,et)|0;var xt=(l+(e=e+Math.imul(c,rt)|0)|0)+((8191&(h=(h=h+Math.imul(c,nt)|0)+Math.imul(d,rt)|0))<<13)|0;l=((r=r+Math.imul(d,nt)|0)+(h>>>13)|0)+(xt>>>26)|0,xt&=67108863,e=Math.imul(D,G),h=(h=Math.imul(D,U))+Math.imul(B,G)|0,r=Math.imul(B,U),e=e+Math.imul(F,Y)|0,h=(h=h+Math.imul(F,H)|0)+Math.imul(I,Y)|0,r=r+Math.imul(I,H)|0,e=e+Math.imul(C,$)|0,h=(h=h+Math.imul(C,X)|0)+Math.imul(k,$)|0,r=r+Math.imul(k,X)|0,e=e+Math.imul(M,Q)|0,h=(h=h+Math.imul(M,J)|0)+Math.imul(_,Q)|0,r=r+Math.imul(_,J)|0,e=e+Math.imul(S,q)|0,h=(h=h+Math.imul(S,tt)|0)+Math.imul(b,q)|0,r=r+Math.imul(b,tt)|0,e=e+Math.imul(y,st)|0,h=(h=h+Math.imul(y,et)|0)+Math.imul(m,st)|0,r=r+Math.imul(m,et)|0,e=e+Math.imul(A,rt)|0,h=(h=h+Math.imul(A,nt)|0)+Math.imul(g,rt)|0,r=r+Math.imul(g,nt)|0;var Mt=(l+(e=e+Math.imul(c,at)|0)|0)+((8191&(h=(h=h+Math.imul(c,lt)|0)+Math.imul(d,at)|0))<<13)|0;l=((r=r+Math.imul(d,lt)|0)+(h>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,e=Math.imul(R,G),h=(h=Math.imul(R,U))+Math.imul(E,G)|0,r=Math.imul(E,U),e=e+Math.imul(D,Y)|0,h=(h=h+Math.imul(D,H)|0)+Math.imul(B,Y)|0,r=r+Math.imul(B,H)|0,e=e+Math.imul(F,$)|0,h=(h=h+Math.imul(F,X)|0)+Math.imul(I,$)|0,r=r+Math.imul(I,X)|0,e=e+Math.imul(C,Q)|0,h=(h=h+Math.imul(C,J)|0)+Math.imul(k,Q)|0,r=r+Math.imul(k,J)|0,e=e+Math.imul(M,q)|0,h=(h=h+Math.imul(M,tt)|0)+Math.imul(_,q)|0,r=r+Math.imul(_,tt)|0,e=e+Math.imul(S,st)|0,h=(h=h+Math.imul(S,et)|0)+Math.imul(b,st)|0,r=r+Math.imul(b,et)|0,e=e+Math.imul(y,rt)|0,h=(h=h+Math.imul(y,nt)|0)+Math.imul(m,rt)|0,r=r+Math.imul(m,nt)|0,e=e+Math.imul(A,at)|0,h=(h=h+Math.imul(A,lt)|0)+Math.imul(g,at)|0,r=r+Math.imul(g,lt)|0;var _t=(l+(e=e+Math.imul(c,ct)|0)|0)+((8191&(h=(h=h+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((r=r+Math.imul(d,dt)|0)+(h>>>13)|0)+(_t>>>26)|0,_t&=67108863,e=Math.imul(z,G),h=(h=Math.imul(z,U))+Math.imul(V,G)|0,r=Math.imul(V,U),e=e+Math.imul(R,Y)|0,h=(h=h+Math.imul(R,H)|0)+Math.imul(E,Y)|0,r=r+Math.imul(E,H)|0,e=e+Math.imul(D,$)|0,h=(h=h+Math.imul(D,X)|0)+Math.imul(B,$)|0,r=r+Math.imul(B,X)|0,e=e+Math.imul(F,Q)|0,h=(h=h+Math.imul(F,J)|0)+Math.imul(I,Q)|0,r=r+Math.imul(I,J)|0,e=e+Math.imul(C,q)|0,h=(h=h+Math.imul(C,tt)|0)+Math.imul(k,q)|0,r=r+Math.imul(k,tt)|0,e=e+Math.imul(M,st)|0,h=(h=h+Math.imul(M,et)|0)+Math.imul(_,st)|0,r=r+Math.imul(_,et)|0,e=e+Math.imul(S,rt)|0,h=(h=h+Math.imul(S,nt)|0)+Math.imul(b,rt)|0,r=r+Math.imul(b,nt)|0,e=e+Math.imul(y,at)|0,h=(h=h+Math.imul(y,lt)|0)+Math.imul(m,at)|0,r=r+Math.imul(m,lt)|0,e=e+Math.imul(A,ct)|0,h=(h=h+Math.imul(A,dt)|0)+Math.imul(g,ct)|0,r=r+Math.imul(g,dt)|0;var wt=(l+(e=e+Math.imul(c,At)|0)|0)+((8191&(h=(h=h+Math.imul(c,gt)|0)+Math.imul(d,At)|0))<<13)|0;l=((r=r+Math.imul(d,gt)|0)+(h>>>13)|0)+(wt>>>26)|0,wt&=67108863,e=Math.imul(z,Y),h=(h=Math.imul(z,H))+Math.imul(V,Y)|0,r=Math.imul(V,H),e=e+Math.imul(R,$)|0,h=(h=h+Math.imul(R,X)|0)+Math.imul(E,$)|0,r=r+Math.imul(E,X)|0,e=e+Math.imul(D,Q)|0,h=(h=h+Math.imul(D,J)|0)+Math.imul(B,Q)|0,r=r+Math.imul(B,J)|0,e=e+Math.imul(F,q)|0,h=(h=h+Math.imul(F,tt)|0)+Math.imul(I,q)|0,r=r+Math.imul(I,tt)|0,e=e+Math.imul(C,st)|0,h=(h=h+Math.imul(C,et)|0)+Math.imul(k,st)|0,r=r+Math.imul(k,et)|0,e=e+Math.imul(M,rt)|0,h=(h=h+Math.imul(M,nt)|0)+Math.imul(_,rt)|0,r=r+Math.imul(_,nt)|0,e=e+Math.imul(S,at)|0,h=(h=h+Math.imul(S,lt)|0)+Math.imul(b,at)|0,r=r+Math.imul(b,lt)|0,e=e+Math.imul(y,ct)|0,h=(h=h+Math.imul(y,dt)|0)+Math.imul(m,ct)|0,r=r+Math.imul(m,dt)|0;var Ct=(l+(e=e+Math.imul(A,At)|0)|0)+((8191&(h=(h=h+Math.imul(A,gt)|0)+Math.imul(g,At)|0))<<13)|0;l=((r=r+Math.imul(g,gt)|0)+(h>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,e=Math.imul(z,$),h=(h=Math.imul(z,X))+Math.imul(V,$)|0,r=Math.imul(V,X),e=e+Math.imul(R,Q)|0,h=(h=h+Math.imul(R,J)|0)+Math.imul(E,Q)|0,r=r+Math.imul(E,J)|0,e=e+Math.imul(D,q)|0,h=(h=h+Math.imul(D,tt)|0)+Math.imul(B,q)|0,r=r+Math.imul(B,tt)|0,e=e+Math.imul(F,st)|0,h=(h=h+Math.imul(F,et)|0)+Math.imul(I,st)|0,r=r+Math.imul(I,et)|0,e=e+Math.imul(C,rt)|0,h=(h=h+Math.imul(C,nt)|0)+Math.imul(k,rt)|0,r=r+Math.imul(k,nt)|0,e=e+Math.imul(M,at)|0,h=(h=h+Math.imul(M,lt)|0)+Math.imul(_,at)|0,r=r+Math.imul(_,lt)|0,e=e+Math.imul(S,ct)|0,h=(h=h+Math.imul(S,dt)|0)+Math.imul(b,ct)|0,r=r+Math.imul(b,dt)|0;var kt=(l+(e=e+Math.imul(y,At)|0)|0)+((8191&(h=(h=h+Math.imul(y,gt)|0)+Math.imul(m,At)|0))<<13)|0;l=((r=r+Math.imul(m,gt)|0)+(h>>>13)|0)+(kt>>>26)|0,kt&=67108863,e=Math.imul(z,Q),h=(h=Math.imul(z,J))+Math.imul(V,Q)|0,r=Math.imul(V,J),e=e+Math.imul(R,q)|0,h=(h=h+Math.imul(R,tt)|0)+Math.imul(E,q)|0,r=r+Math.imul(E,tt)|0,e=e+Math.imul(D,st)|0,h=(h=h+Math.imul(D,et)|0)+Math.imul(B,st)|0,r=r+Math.imul(B,et)|0,e=e+Math.imul(F,rt)|0,h=(h=h+Math.imul(F,nt)|0)+Math.imul(I,rt)|0,r=r+Math.imul(I,nt)|0,e=e+Math.imul(C,at)|0,h=(h=h+Math.imul(C,lt)|0)+Math.imul(k,at)|0,r=r+Math.imul(k,lt)|0,e=e+Math.imul(M,ct)|0,h=(h=h+Math.imul(M,dt)|0)+Math.imul(_,ct)|0,r=r+Math.imul(_,dt)|0;var Tt=(l+(e=e+Math.imul(S,At)|0)|0)+((8191&(h=(h=h+Math.imul(S,gt)|0)+Math.imul(b,At)|0))<<13)|0;l=((r=r+Math.imul(b,gt)|0)+(h>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,e=Math.imul(z,q),h=(h=Math.imul(z,tt))+Math.imul(V,q)|0,r=Math.imul(V,tt),e=e+Math.imul(R,st)|0,h=(h=h+Math.imul(R,et)|0)+Math.imul(E,st)|0,r=r+Math.imul(E,et)|0,e=e+Math.imul(D,rt)|0,h=(h=h+Math.imul(D,nt)|0)+Math.imul(B,rt)|0,r=r+Math.imul(B,nt)|0,e=e+Math.imul(F,at)|0,h=(h=h+Math.imul(F,lt)|0)+Math.imul(I,at)|0,r=r+Math.imul(I,lt)|0,e=e+Math.imul(C,ct)|0,h=(h=h+Math.imul(C,dt)|0)+Math.imul(k,ct)|0,r=r+Math.imul(k,dt)|0;var Ft=(l+(e=e+Math.imul(M,At)|0)|0)+((8191&(h=(h=h+Math.imul(M,gt)|0)+Math.imul(_,At)|0))<<13)|0;l=((r=r+Math.imul(_,gt)|0)+(h>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,e=Math.imul(z,st),h=(h=Math.imul(z,et))+Math.imul(V,st)|0,r=Math.imul(V,et),e=e+Math.imul(R,rt)|0,h=(h=h+Math.imul(R,nt)|0)+Math.imul(E,rt)|0,r=r+Math.imul(E,nt)|0,e=e+Math.imul(D,at)|0,h=(h=h+Math.imul(D,lt)|0)+Math.imul(B,at)|0,r=r+Math.imul(B,lt)|0,e=e+Math.imul(F,ct)|0,h=(h=h+Math.imul(F,dt)|0)+Math.imul(I,ct)|0,r=r+Math.imul(I,dt)|0;var It=(l+(e=e+Math.imul(C,At)|0)|0)+((8191&(h=(h=h+Math.imul(C,gt)|0)+Math.imul(k,At)|0))<<13)|0;l=((r=r+Math.imul(k,gt)|0)+(h>>>13)|0)+(It>>>26)|0,It&=67108863,e=Math.imul(z,rt),h=(h=Math.imul(z,nt))+Math.imul(V,rt)|0,r=Math.imul(V,nt),e=e+Math.imul(R,at)|0,h=(h=h+Math.imul(R,lt)|0)+Math.imul(E,at)|0,r=r+Math.imul(E,lt)|0,e=e+Math.imul(D,ct)|0,h=(h=h+Math.imul(D,dt)|0)+Math.imul(B,ct)|0,r=r+Math.imul(B,dt)|0;var Pt=(l+(e=e+Math.imul(F,At)|0)|0)+((8191&(h=(h=h+Math.imul(F,gt)|0)+Math.imul(I,At)|0))<<13)|0;l=((r=r+Math.imul(I,gt)|0)+(h>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,e=Math.imul(z,at),h=(h=Math.imul(z,lt))+Math.imul(V,at)|0,r=Math.imul(V,lt),e=e+Math.imul(R,ct)|0,h=(h=h+Math.imul(R,dt)|0)+Math.imul(E,ct)|0,r=r+Math.imul(E,dt)|0;var Dt=(l+(e=e+Math.imul(D,At)|0)|0)+((8191&(h=(h=h+Math.imul(D,gt)|0)+Math.imul(B,At)|0))<<13)|0;l=((r=r+Math.imul(B,gt)|0)+(h>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,e=Math.imul(z,ct),h=(h=Math.imul(z,dt))+Math.imul(V,ct)|0,r=Math.imul(V,dt);var Bt=(l+(e=e+Math.imul(R,At)|0)|0)+((8191&(h=(h=h+Math.imul(R,gt)|0)+Math.imul(E,At)|0))<<13)|0;l=((r=r+Math.imul(E,gt)|0)+(h>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Lt=(l+(e=Math.imul(z,At))|0)+((8191&(h=(h=Math.imul(z,gt))+Math.imul(V,At)|0))<<13)|0;return l=((r=Math.imul(V,gt))+(h>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,a[0]=vt,a[1]=yt,a[2]=mt,a[3]=pt,a[4]=St,a[5]=bt,a[6]=xt,a[7]=Mt,a[8]=_t,a[9]=wt,a[10]=Ct,a[11]=kt,a[12]=Tt,a[13]=Ft,a[14]=It,a[15]=Pt,a[16]=Dt,a[17]=Bt,a[18]=Lt,0!==l&&(a[19]=l,s.length++),s};function g(t,i,s){s.negative=i.negative^t.negative,s.length=t.length+i.length;for(var e=0,h=0,r=0;r<s.length-1;r++){var n=h;h=0;for(var o=67108863&e,a=Math.min(r,i.length-1),l=Math.max(0,r-t.length+1);l<=a;l++){var u=r-l,c=(0|t.words[u])*(0|i.words[l]),d=67108863&c;o=67108863&(d=d+o|0),h+=(n=(n=n+(c/67108864|0)|0)+(d>>>26)|0)>>>26,n&=67108863}s.words[r]=o,e=n,n=h}return 0!==e?s.words[r]=e:s.length--,s.o$()}function v(t,i,s){return g(t,i,s)}Math.imul||(A=f),h.prototype.mulTo=function(t,i){var s=this.length+t.length;return 10===this.length&&10===t.length?A(this,t,i):s<63?f(this,t,i):s<1024?g(this,t,i):v(this,t,i)},h.prototype.mul=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},h.prototype.mulf=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),v(this,t,i)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){var i=t<0;i&&(t=-t),s("number"==typeof t),s(t<67108864);for(var e=0,h=0;h<this.length;h++){var r=(0|this.words[h])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[h]=67108863&n}return 0!==e&&(this.words[h]=e,this.length++),i?this.ineg():this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),s=0;s<i.length;s++){var e=s/26|0,h=s%26;i[s]=t.words[e]>>>h&1}return i}(t);if(0===i.length)return new h(1);for(var s=this,e=0;e<i.length&&0===i[e];e++,s=s.sqr());if(++e<i.length)for(var r=s.sqr();e<i.length;e++,r=r.sqr())0!==i[e]&&(s=s.mul(r));return s},h.prototype.iushln=function(t){s("number"==typeof t&&t>=0);var i,e=t%26,h=(t-e)/26,r=67108863>>>26-e<<26-e;if(0!==e){var n=0;for(i=0;i<this.length;i++){var o=this.words[i]&r,a=(0|this.words[i])-o<<e;this.words[i]=a|n,n=o>>>26-e}n&&(this.words[i]=n,this.length++)}if(0!==h){for(i=this.length-1;i>=0;i--)this.words[i+h]=this.words[i];for(i=0;i<h;i++)this.words[i]=0;this.length+=h}return this.o$()},h.prototype.ishln=function(t){return s(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,i,e){var h;s("number"==typeof t&&t>=0),h=i?(i-i%26)/26:0;var r=t%26,n=Math.min((t-r)/26,this.length),o=67108863^67108863>>>r<<r,a=e;if(h-=n,h=Math.max(0,h),a){for(var l=0;l<n;l++)a.words[l]=this.words[l];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,l=0;l<this.length;l++)this.words[l]=this.words[l+n];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=h);l--){var c=0|this.words[l];this.words[l]=u<<26-r|c>>>r,u=c&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.o$()},h.prototype.ishrn=function(t,i,e){return s(0===this.negative),this.iushrn(t,i,e)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26,h=1<<i;return!(this.length<=e||!(this.words[e]&h))},h.prototype.imaskn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=e)return this;if(0!==i&&e++,this.length=Math.min(e,this.length),0!==i){var h=67108863^67108863>>>i<<i;this.words[this.length-1]&=h}return this.o$()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return s("number"==typeof t),s(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.a$(t)},h.prototype.a$=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(s("number"==typeof t),s(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.o$()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype.v$=function(t,i,e){var h,r,n=t.length+e;this.u$(n);var o=0;for(h=0;h<t.length;h++){r=(0|this.words[h+e])+o;var a=(0|t.words[h])*i;o=((r-=67108863&a)>>26)-(a/67108864|0),this.words[h+e]=67108863&r}for(;h<this.length-e;h++)o=(r=(0|this.words[h+e])+o)>>26,this.words[h+e]=67108863&r;if(0===o)return this.o$();for(s(-1===o),o=0,h=0;h<this.length;h++)o=(r=-(0|this.words[h])+o)>>26,this.words[h]=67108863&r;return this.negative=1,this.o$()},h.prototype.y$=function(t,i){var s=(this.length,t.length),e=this.clone(),r=t,n=0|r.words[r.length-1];0!=(s=26-this.A$(n))&&(r=r.ushln(s),e.iushln(s),n=0|r.words[r.length-1]);var o,a=e.length-r.length;if("mod"!==i){(o=new h(null)).length=a+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var u=e.clone().v$(r,1,a);0===u.negative&&(e=u,o&&(o.words[a]=1));for(var c=a-1;c>=0;c--){var d=67108864*(0|e.words[r.length+c])+(0|e.words[r.length+c-1]);for(d=Math.min(d/n|0,67108863),e.v$(r,d,c);0!==e.negative;)d--,e.negative=0,e.v$(r,1,c),e.isZero()||(e.negative^=1);o&&(o.words[c]=d)}return o&&o.o$(),e.o$(),"div"!==i&&0!==s&&e.iushrn(s),{div:o||null,mod:e}},h.prototype.divmod=function(t,i,e){return s(!t.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,i),"mod"!==i&&(r=o.div.neg()),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),i),"mod"!==i&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),i),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new h(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modrn(t.words[0]))}:this.y$(t,i);var r,n,o},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var s=0!==i.div.negative?i.mod.isub(t):i.mod,e=t.ushrn(1),h=t.andln(1),r=s.cmp(e);return r<0||1===h&&0===r?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},h.prototype.modrn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=(1<<26)%t,h=0,r=this.length-1;r>=0;r--)h=(e*h+(0|this.words[r]))%t;return i?-h:h},h.prototype.modn=function(t){return this.modrn(t)},h.prototype.idivn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=0,h=this.length-1;h>=0;h--){var r=(0|this.words[h])+67108864*e;this.words[h]=r/t|0,e=r%t}return this.o$(),i?this.ineg():this},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r=new h(1),n=new h(0),o=new h(0),a=new h(1),l=0;i.isEven()&&e.isEven();)i.iushrn(1),e.iushrn(1),++l;for(var u=e.clone(),c=i.clone();!i.isZero();){for(var d=0,f=1;0==(i.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(c)),r.iushrn(1),n.iushrn(1);for(var A=0,g=1;0==(e.words[0]&g)&&A<26;++A,g<<=1);if(A>0)for(e.iushrn(A);A-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);i.cmp(e)>=0?(i.isub(e),r.isub(o),n.isub(a)):(e.isub(i),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:e.iushln(l)}},h.prototype.m$=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r,n=new h(1),o=new h(0),a=e.clone();i.cmpn(1)>0&&e.cmpn(1)>0;){for(var l=0,u=1;0==(i.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(i.iushrn(l);l-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var c=0,d=1;0==(e.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);i.cmp(e)>=0?(i.isub(e),n.isub(o)):(e.isub(i),o.isub(n))}return(r=0===i.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),s=t.clone();i.negative=0,s.negative=0;for(var e=0;i.isEven()&&s.isEven();e++)i.iushrn(1),s.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;s.isEven();)s.iushrn(1);var h=i.cmp(s);if(h<0){var r=i;i=s,s=r}else if(0===h||0===s.cmpn(1))break;i.isub(s)}return s.iushln(e)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return 0==(1&this.words[0])},h.prototype.isOdd=function(){return 1==(1&this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){s("number"==typeof t);var i=t%26,e=(t-i)/26,h=1<<i;if(this.length<=e)return this.u$(e+1),this.words[e]|=h,this;for(var r=h,n=e;0!==r&&n<this.length;n++){var o=0|this.words[n];r=(o+=r)>>>26,o&=67108863,this.words[n]=o}return 0!==r&&(this.words[n]=r,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var i,e=t<0;if(0!==this.negative&&!e)return-1;if(0===this.negative&&e)return 1;if(this.o$(),this.length>1)i=1;else{e&&(t=-t),s(t<=67108863,"Number is too big");var h=0|this.words[0];i=h===t?0:h<t?-1:1}return 0!==this.negative?0|-i:i},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,s=this.length-1;s>=0;s--){var e=0|this.words[s],h=0|t.words[s];if(e!==h){e<h?i=-1:e>h&&(i=1);break}}return i},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new M(t)},h.prototype.toRed=function(t){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),t.convertTo(this).p$(t)},h.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype.p$=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return s(!this.red,"Already a number in reduction context"),this.p$(t)},h.prototype.redAdd=function(t){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.S$(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.S$(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red.b$(this),this.red.sqr(this)},h.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red.b$(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red.b$(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red.b$(this),this.red.invm(this)},h.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red.b$(this),this.red.neg(this)},h.prototype.redPow=function(t){return s(this.red&&!t.red,"redPow(normalNum)"),this.red.b$(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function m(t,i){this.name=t,this.p=new h(i,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this.x$()}function p(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var i=h.M$(t);this.m=i.p,this.prime=i}else s(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.m$(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype.x$=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var i,s=t;do{this.split(s,this.tmp),i=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(i>this.n);var e=i<this.n?-1:s.ucmp(this.p);return 0===e?(s.words[0]=0,s.length=1):e>0?s.isub(this.p):void 0!==s.strip?s.strip():s.o$(),s},m.prototype.split=function(t,i){t.iushrn(this.n,0,i)},m.prototype.imulK=function(t){return t.imul(this.k)},e(p,m),p.prototype.split=function(t,i){for(var s=4194303,e=Math.min(t.length,9),h=0;h<e;h++)i.words[h]=t.words[h];if(i.length=e,t.length<=9)return t.words[0]=0,void(t.length=1);var r=t.words[9];for(i.words[i.length++]=r&s,h=10;h<t.length;h++){var n=0|t.words[h];t.words[h-10]=(n&s)<<4|r>>>22,r=n}r>>>=22,t.words[h-10]=r,0===r&&t.length>10?t.length-=10:t.length-=9},p.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,s=0;s<t.length;s++){var e=0|t.words[s];i+=977*e,t.words[s]=67108863&i,i=64*e+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},e(S,m),e(b,m),e(x,m),x.prototype.imulK=function(t){for(var i=0,s=0;s<t.length;s++){var e=19*(0|t.words[s])+i,h=67108863&e;e>>>=26,t.words[s]=h,i=e}return 0!==i&&(t.words[t.length++]=i),t},h.M$=function(t){if(y[t])return y[t];var i;if("k256"===t)i=new p;else if("p224"===t)i=new S;else if("p192"===t)i=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new x}return y[t]=i,i},M.prototype.b$=function(t){s(0===t.negative,"red works only with positives"),s(t.red,"red works only with red numbers")},M.prototype.S$=function(t,i){s(0==(t.negative|i.negative),"red works only with positives"),s(t.red&&t.red===i.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).p$(this):(a(t,t.umod(this.m).p$(this)),t)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).p$(this)},M.prototype.add=function(t,i){this.S$(t,i);var s=t.add(i);return s.cmp(this.m)>=0&&s.isub(this.m),s.p$(this)},M.prototype.iadd=function(t,i){this.S$(t,i);var s=t.iadd(i);return s.cmp(this.m)>=0&&s.isub(this.m),s},M.prototype.sub=function(t,i){this.S$(t,i);var s=t.sub(i);return s.cmpn(0)<0&&s.iadd(this.m),s.p$(this)},M.prototype.isub=function(t,i){this.S$(t,i);var s=t.isub(i);return s.cmpn(0)<0&&s.iadd(this.m),s},M.prototype.shl=function(t,i){return this.b$(t),this.imod(t.ushln(i))},M.prototype.imul=function(t,i){return this.S$(t,i),this.imod(t.imul(i))},M.prototype.mul=function(t,i){return this.S$(t,i),this.imod(t.mul(i))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(s(i%2==1),3===i){var e=this.m.add(new h(1)).iushrn(2);return this.pow(t,e)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new h(1).toRed(this),a=o.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new h(2*u*u).toRed(this);0!==this.pow(u,l).cmp(a);)u.redIAdd(a);for(var c=this.pow(u,r),d=this.pow(t,r.addn(1).iushrn(1)),f=this.pow(t,r),A=n;0!==f.cmp(o);){for(var g=f,v=0;0!==g.cmp(o);v++)g=g.redSqr();s(v<A);var y=this.pow(c,new h(1).iushln(A-v-1));d=d.redMul(y),c=y.redSqr(),f=f.redMul(c),A=v}return d},M.prototype.invm=function(t){var i=t.m$(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},M.prototype.pow=function(t,i){if(i.isZero())return new h(1).toRed(this);if(0===i.cmpn(1))return t.clone();var s=new Array(16);s[0]=new h(1).toRed(this),s[1]=t;for(var e=2;e<s.length;e++)s[e]=this.mul(s[e-1],t);var r=s[0],n=0,o=0,a=i.bitLength()%26;for(0===a&&(a=26),e=i.length-1;e>=0;e--){for(var l=i.words[e],u=a-1;u>=0;u--){var c=l>>u&1;r!==s[0]&&(r=this.sqr(r)),0!==c||0!==n?(n<<=1,n|=c,(4==++o||0===e&&0===u)&&(r=this.mul(r,s[n]),o=0,n=0)):o=0}a=26}return r},M.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},M.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},h.mont=function(t){return new _(t)},e(_,M),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},_.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=s.isub(e).iushrn(this.shift),r=h;return h.cmp(this.m)>=0?r=h.isub(this.m):h.cmpn(0)<0&&(r=h.iadd(this.m)),r.p$(this)},_.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new h(0).p$(this);var s=t.mul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=s.isub(e).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n.p$(this)},_.prototype.invm=function(t){return this.imod(t.m$(this.m).mul(this.r2)).p$(this)}}(Cx,qS);var kx=Cx.exports;function Tx(t,i){if(Array.isArray(t))return t.slice();if(!t)return[];const s=[];if("string"!=typeof t){for(let i=0;i<t.length;i++)s[i]=0|t[i];return s}if("hex"===i){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t=`0${t}`);for(let i=0;i<t.length;i+=2)s.push(parseInt(t[i]+t[i+1],16))}else for(let i=0;i<t.length;i++){const e=t.charCodeAt(i),h=e>>8,r=255&e;h?s.push(h,r):s.push(r)}return s}const Fx=function(t,i,s){const e=new Array(Math.max(t.bitLength(),s)+1);e.fill(0);const h=1<<i+1,r=t.clone();for(let t=0;t<e.length;t++){let i;const s=r.andln(h-1);r.isOdd()?(i=s>(h>>1)-1?(h>>1)-s:s,r.isubn(i)):i=0,e[t]=i,r.iushrn(1)}return e},Ix=function(t,i){const s=[[],[]];t=t.clone(),i=i.clone();let e=0,h=0;for(;t.cmpn(-e)>0||i.cmpn(-h)>0;){let r,n,o=t.andln(3)+e&3,a=i.andln(3)+h&3;if(3===o&&(o=-1),3===a&&(a=-1),0==(1&o))r=0;else{const i=t.andln(7)+e&7;r=3!==i&&5!==i||2!==a?o:-o}if(s[0].push(r),0==(1&a))n=0;else{const t=i.andln(7)+h&7;n=3!==t&&5!==t||2!==o?a:-a}s[1].push(n),2*e===r+1&&(e=1-e),2*h===n+1&&(h=1-h),t.iushrn(1),i.iushrn(1)}return s};class Px{constructor(t,i){this.type=t,this.p=new kx(i.p,16),this.red=i.prime?kx.red(i.prime):kx.mont(this.p),this.zero=new kx(0).toRed(this.red),this.one=new kx(1).toRed(this.red),this.two=new kx(2).toRed(this.red),this.n=i.n&&new kx(i.n,16),this.g=i.g&&this.pointFromJSON(i.g,i.gRed),this._$=new Array(4),this.w$=new Array(4),this.C$=new Array(4),this.k$=new Array(4),this.T$=this.n?this.n.bitLength():0;const s=this.n&&this.p.div(this.n);!s||s.cmpn(100)>0?this.redN=null:(this.F$=!0,this.redN=this.n.toRed(this.red))}I$(t,i){const s=t.P$(),e=Fx(i,1,this.T$);let h=(1<<s.step+1)-(s.step%2==0?2:1);h/=3;const r=[];for(let t=0;t<e.length;t+=s.step){let i=0;for(let h=t+s.step-1;h>=t;h--)i=(i<<1)+e[h];r.push(i)}let n=this.jpoint(null,null,null),o=this.jpoint(null,null,null);for(let t=h;t>0;t--){for(let i=0;i<r.length;i++){const e=r[i];e===t?o=o.mixedAdd(s.points[i]):e===-t&&(o=o.mixedAdd(s.points[i].neg()))}n=n.add(o)}return n.toP()}D$(t,i){let s=4;const e=t.B$(s);s=e.wnd;const h=e.points,r=Fx(i,s,this.T$);let n=this.jpoint(null,null,null);for(let s=r.length-1;s>=0;s--){for(let t=0;s>=0&&0===r[s];s--)t++;if(s>=0&&i++,n=n.dblp(i),s<0)break;const e=r[s];n="affine"===t.type?e>0?n.mixedAdd(h[e-1>>1]):n.mixedAdd(h[-e-1>>1].neg()):e>0?n.add(h[e-1>>1]):n.add(h[-e-1>>1].neg())}return"affine"===t.type?n.toP():n}L$(t,i,s,e,h){const r=this._$,n=this.w$,o=this.C$;let a=0;for(let s=0;s<e;s++){const e=i[s].B$(t);r[s]=e.wnd,n[s]=e.points}for(let t=e-1;t>=1;t-=2){const e=t-1,h=t;if(1!==r[e]||1!==r[h]){o[e]=Fx(s[e],r[e],this.T$),o[h]=Fx(s[h],r[h],this.T$),a=Math.max(o[e].length,a),a=Math.max(o[h].length,a);continue}const l=[i[e],null,null,i[h]];0===i[e].y.cmp(i[h].y)?(l[1]=i[e].add(i[h]),l[2]=i[e].toJ().mixedAdd(i[h].neg())):0===i[e].y.cmp(i[h].y.redNeg())?(l[1]=i[e].toJ().mixedAdd(i[h]),l[2]=i[e].add(i[h].neg())):(l[1]=i[e].toJ().mixedAdd(i[h]),l[2]=i[e].toJ().mixedAdd(i[h].neg()));const u=[-3,-1,-5,-7,0,7,5,1,3],c=Ix(s[e],s[h]);a=Math.max(c[0].length,a),o[e]=new Array(a),o[h]=new Array(a);for(let t=0;t<a;t++){const i=0|c[0][t],s=0|c[1][t];o[e][t]=u[3*(i+1)+(s+1)],o[h][t]=0,n[e]=l}}let l=this.jpoint(null,null,null);const u=this.k$;for(let t=a;t>=0;t--){let i=0;for(;t>=0;){let s=!0;for(let i=0;i<e;i++)u[i]=0|o[i][t],0!==u[i]&&(s=!1);if(!s)break;i++,t--}if(t>=0&&i++,l=l.dblp(i),t<0)break;for(let t=0;t<e;t++){const i=u[t];let s;0!==i&&(i>0?s=n[t][i-1>>1]:i<0&&(s=n[t][-i-1>>1].neg()),l="affine"===s.type?l.mixedAdd(s):l.add(s))}}for(let t=0;t<e;t++)n[t]=null;return h?l:l.toP()}decodePoint(t,i){t=Tx(t,i);const s=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*s)return this.point(t.slice(1,1+s),t.slice(1+s,1+2*s));if((2===t[0]||3===t[0])&&t.length-1===s)return this.pointFromX(t.slice(1,1+s),3===t[0]);throw new Error("Unknown point format")}}class Dx{constructor(t,i){this.curve=t,this.type=i,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}R$(t){const i=this.curve.p.byteLength(),s=this.getX().toArray("be",i);return t?[this.getY().isEven()?2:3].concat(s):[4].concat(s,this.getY().toArray("be",i))}encode(t,i){return function(t,i){return"hex"===i?function(t){let i="";for(let e=0;e<t.length;e++)i+=1===(s=t[e].toString(16)).length?`0${s}`:s;var s;return i}(t):t}(this.R$(i),t)}precompute(t){if(this.precomputed)return this;const i={doubles:null,naf:null,beta:null};return i.naf=this.B$(8),i.doubles=this.P$(4,t),i.beta=this.E$(),this.precomputed=i,this}O$(t){if(!this.precomputed)return!1;const i=this.precomputed.doubles;return!!i&&i.points.length>=Math.ceil((t.bitLength()+1)/i.step)}P$(t,i){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const s=[this];let e=this;for(let h=0;h<i;h+=t){for(let i=0;i<t;i++)e=e.dbl();s.push(e)}return{step:t,points:s}}B$(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const i=[this],s=(1<<t)-1,e=1===s?null:this.dbl();for(let t=1;t<s;t++)i[t]=i[t-1].add(e);return{wnd:t,points:i}}E$(){return null}dblp(t){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}}class Bx extends Px{constructor(t){super("short",t),this.a=new kx(t.a,16).toRed(this.red),this.b=new kx(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this.z$(t),this.V$=new Array(4),this.N$=new Array(4)}pointFromJSON(t,i){return Lx.fromJSON(this,t,i)}z$(t){if(!this.zeroA||!this.g||!this.n||1!==this.p.modn(3))return;let i,s,e;if(t.beta)i=new kx(t.beta,16).toRed(this.red);else{const t=this.G$(this.p);i=t[0].cmp(t[1])<0?t[0]:t[1],i=i.toRed(this.red)}if(t.lambda)s=new kx(t.lambda,16);else{const t=this.G$(this.n);s=0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(i))?t[0]:t[1]}return e=t.basis?t.basis.map((t=>({a:new kx(t.a,16),b:new kx(t.b,16)}))):this.U$(s),{beta:i,lambda:s,basis:e}}G$(t){const i=t===this.p?this.red:kx.mont(t),s=new kx(2).toRed(i).redInvm(),e=s.redNeg(),h=new kx(3).toRed(i).redNeg().redSqrt().redMul(s);return[e.redAdd(h).fromRed(),e.redSub(h).fromRed()]}U$(t){const i=this.n.ushrn(Math.floor(this.n.bitLength()/2));let s,e,h,r,n,o,a,l,u,c=t,d=this.n.clone(),f=new kx(1),A=new kx(0),g=new kx(0),v=new kx(1),y=0;for(;0!==c.cmpn(0);){const t=d.div(c);l=d.sub(t.mul(c)),u=g.sub(t.mul(f));const n=v.sub(t.mul(A));if(!h&&l.cmp(i)<0)s=a.neg(),e=f,h=l.neg(),r=u;else if(h&&2==++y)break;a=l,d=c,c=l,g=f,f=u,v=A,A=n}n=l.neg(),o=u;const m=h.sqr().add(r.sqr());return n.sqr().add(o.sqr()).cmp(m)>=0&&(n=s,o=e),h.negative&&(h=h.neg(),r=r.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:h,b:r},{a:n,b:o}]}W$(t){const i=this.endo.basis,s=i[0],e=i[1],h=e.b.mul(t).divRound(this.n),r=s.b.neg().mul(t).divRound(this.n),n=h.mul(s.a),o=r.mul(e.a),a=h.mul(s.b),l=r.mul(e.b);return{k1:t.sub(n).sub(o),k2:a.add(l).neg()}}point(t,i,s){return new Lx(this,t,i,s)}pointFromX(t,i){(t=new kx(t,16)).red||(t=t.toRed(this.red));const s=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let e=s.redSqrt();if(0!==e.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");const h=e.fromRed().isOdd();return(i&&!h||!i&&h)&&(e=e.redNeg()),this.point(t,e)}validate(t){if(t.inf)return!0;const i=t.x,s=t.y,e=this.a.redMul(i),h=i.redSqr().redMul(i).redIAdd(e).redIAdd(this.b);return 0===s.redSqr().redISub(h).cmpn(0)}Y$(t,i,s){const e=this.V$,h=this.N$;let r=0;for(r=0;r<t.length;r++){const s=this.W$(i[r]);let n=t[r],o=n.E$();s.k1.negative&&(s.k1.ineg(),n=n.neg(!0)),s.k2.negative&&(s.k2.ineg(),o=o.neg(!0)),e[2*r]=n,e[2*r+1]=o,h[2*r]=s.k1,h[2*r+1]=s.k2}const n=this.L$(1,e,h,2*r,s);for(let t=0;t<2*r;t++)e[t]=null,h[t]=null;return n}jpoint(t,i,s){return new Rx(this,t,i,s)}}class Lx extends Dx{constructor(t,i,s,e){super(t,"affine"),null===i&&null===s?(this.x=null,this.y=null,this.inf=!0):(this.x=new kx(i,16),this.y=new kx(s,16),e&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){return new Lx(this,t,i,s)}E$(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const i=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const s=this.curve,e=function(t){return s.point(t.x.redMul(s.endo.beta),t.y)};t.beta=i,i.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(e)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(e)}}}return i}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,i,s){"string"==typeof i&&(i=JSON.parse(i));const e=t.point(i[0],i[1],s);if(!i[2])return e;function h(i){return t.point(i[0],i[1],s)}const r=i[2];return e.precomputed={beta:null,doubles:r.doubles&&{step:r.doubles.step,points:[e].concat(r.doubles.points.map(h))},naf:r.naf&&{wnd:r.naf.wnd,points:[e].concat(r.naf.points.map(h))}},e}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);let i=this.y.redSub(t.y);0!==i.cmpn(0)&&(i=i.redMul(this.x.redSub(t.x).redInvm()));const s=i.redSqr().redISub(this.x).redISub(t.x),e=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,e)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);const i=this.curve.a,s=this.x.redSqr(),e=t.redInvm(),h=s.redAdd(s).redIAdd(s).redIAdd(i).redMul(e),r=h.redSqr().redISub(this.x.redAdd(this.x)),n=h.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new kx(t,16),this.isInfinity()?this:this.O$(t)?this.curve.I$(this,t):this.curve.endo?this.curve.Y$([this],[t]):this.curve.D$(this,t)}mulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve.Y$(e,h):this.curve.L$(1,e,h,2)}jmulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve.Y$(e,h,!0):this.curve.L$(1,e,h,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))}neg(t){if(this.inf)return this;const i=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const t=this.precomputed,s=function(t){return t.neg()};i.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return i}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class Rx extends Dx{constructor(t,i,s,e){super(t,"jacobian"),null===i&&null===s&&null===e?(this.x=this.curve.one,this.y=this.curve.one,this.z=new kx(0)):(this.x=new kx(i,16),this.y=new kx(s,16),this.z=new kx(e,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){throw new Error("Method not implemented.")}jpoint(t,i,s){return new Rx(this,t,i,s)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),i=t.redSqr(),s=this.x.redMul(i),e=this.y.redMul(i).redMul(t);return this.curve.point(s,e)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const i=t.z.redSqr(),s=this.z.redSqr(),e=this.x.redMul(i),h=t.x.redMul(s),r=this.y.redMul(i.redMul(t.z)),n=t.y.redMul(s.redMul(this.z)),o=e.redSub(h),a=r.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const l=o.redSqr(),u=l.redMul(o),c=e.redMul(l),d=a.redSqr().redIAdd(u).redISub(c).redISub(c),f=a.redMul(c.redISub(d)).redISub(r.redMul(u)),A=this.z.redMul(t.z).redMul(o);return this.curve.jpoint(d,f,A)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const i=this.z.redSqr(),s=this.x,e=t.x.redMul(i),h=this.y,r=t.y.redMul(i).redMul(this.z),n=s.redSub(e),o=h.redSub(r);if(0===n.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const a=n.redSqr(),l=a.redMul(n),u=s.redMul(a),c=o.redSqr().redIAdd(l).redISub(u).redISub(u),d=o.redMul(u.redISub(c)).redISub(h.redMul(l)),f=this.z.redMul(n);return this.curve.jpoint(c,d,f)}dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}const i=this.curve.a,s=this.curve.tinv;let e=this.x;const h=this.y;let r=this.z,n=r.redSqr().redSqr(),o=h.redAdd(h);for(let s=0;s<t;s++){const h=e.redSqr(),a=o.redSqr(),l=a.redSqr(),u=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(n)),c=e.redMul(a),d=u.redSqr().redISub(c.redAdd(c)),f=c.redISub(d);let A=u.redMul(f);A=A.redIAdd(A).redISub(l);const g=o.redMul(r);s+1<t&&(n=n.redMul(l)),e=d,r=g,o=A}return this.curve.jpoint(e,o.redMul(s),r)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.H$():this.curve.threeA?this.j$():this.$$()}H$(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr().redISub(n).redISub(n);let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),t=a,i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr();let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),t=a.redISub(n).redISub(n),i=o.redMul(n.redISub(t)).redISub(l),s=this.y.redMul(this.z),s=s.redIAdd(s)}return this.curve.jpoint(t,i,s)}j$(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a),a=o.redSqr().redISub(n).redISub(n);t=a;let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.z.redSqr(),h=this.y.redSqr(),r=this.x.redMul(h);let n=this.x.redSub(e).redMul(this.x.redAdd(e));n=n.redAdd(n).redIAdd(n);let o=r.redIAdd(r);o=o.redIAdd(o);const a=o.redAdd(o);t=n.redSqr().redISub(a),s=this.y.redAdd(this.z).redSqr().redISub(h).redISub(e);let l=h.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l),i=n.redMul(o.redISub(t)).redISub(l)}return this.curve.jpoint(t,i,s)}$$(){const t=this.curve.a,i=this.x,s=this.y,e=this.z,h=e.redSqr().redSqr(),r=i.redSqr(),n=s.redSqr(),o=r.redAdd(r).redIAdd(r).redIAdd(t.redMul(h));let a=i.redAdd(i);a=a.redIAdd(a);const l=a.redMul(n),u=o.redSqr().redISub(l.redAdd(l)),c=l.redISub(u);let d=n.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=o.redMul(c).redISub(d),A=s.redAdd(s).redMul(e);return this.curve.jpoint(u,f,A)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),i=this.y.redSqr(),s=this.z.redSqr(),e=i.redSqr(),h=t.redAdd(t).redIAdd(t),r=h.redSqr();let n=this.x.redAdd(i).redSqr().redISub(t).redISub(e);n=n.redIAdd(n),n=n.redAdd(n).redIAdd(n),n=n.redISub(r);const o=n.redSqr();let a=e.redIAdd(e);a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);const l=h.redIAdd(n).redSqr().redISub(r).redISub(o).redISub(a);let u=i.redMul(l);u=u.redIAdd(u),u=u.redIAdd(u);let c=this.x.redMul(o).redISub(u);c=c.redIAdd(c),c=c.redIAdd(c);let d=this.y.redMul(l.redMul(a.redISub(l)).redISub(n.redMul(o)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=this.z.redAdd(n).redSqr().redISub(s).redISub(o);return this.curve.jpoint(c,d,f)}mul(t,i){return t=new kx(t,i),this.curve.D$(this,t)}eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;const i=this.z.redSqr(),s=t.z.redSqr();if(0!==this.x.redMul(s).redISub(t.x.redMul(i)).cmpn(0))return!1;const e=i.redMul(this.z),h=s.redMul(t.z);return 0===this.y.redMul(h).redISub(t.y.redMul(e)).cmpn(0)}eqXToP(t){const i=this.z.redSqr(),s=t.toRed(this.curve.red).redMul(i);if(0===this.x.cmp(s))return!0;const e=t.clone(),h=this.curve.redN.redMul(i);for(;;){if(e.iadd(this.curve.n),e.cmp(this.curve.p)>=0)return!1;if(s.redIAdd(h),0===this.x.cmp(s))return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return 0===this.z.cmpn(0)}}class Ex{constructor(t){this.curve=new Bx(t),this.g=this.curve.g,this.n=this.curve.n}}const Ox={};var zx,Vx;Ox.PresetCurve=Ex,zx="secp256k1",Vx={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(Ox,zx,{configurable:!0,enumerable:!0,get(){const t=new Ex(Vx);return Object.defineProperty(Ox,zx,{configurable:!0,enumerable:!0,value:t}),t}});class Nx{constructor(t,i){this.ec=t,this.priv=null,this.pub=null,i.pub&&this.X$(i.pub,i.pubEnc)}static fromPublic(t,i,s){return i instanceof Nx?i:new Nx(t,{pub:i,pubEnc:s})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,i){return"string"==typeof t&&(i=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,t):this.pub}X$(t,i){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,i)}verify(t,i){return this.ec.verify(t,i,this)}}function Gx(t,i){const s=t[i.place++];if(!(128&s))return s;const e=15&s;if(0===e||e>4)return!1;let h=0,r=i.place;for(let i=0;i<e;i++,r++)h<<=8,h|=t[r],h>>>=0;return!(h<=127)&&(i.place=r,h)}class Ux{constructor(){this.place=0}}class Wx{constructor(t,i){if(t instanceof Wx)return t;this.Z$(t,i)||(this.r=new kx(t.r,16),this.s=new kx(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}Z$(t,i){t=Tx(t,i);const s=new Ux;if(48!==t[s.place++])return!1;const e=Gx(t,s);if(!1===e)return!1;if(e+s.place!==t.length)return!1;if(2!==t[s.place++])return!1;const h=Gx(t,s);if(!1===h)return!1;let r=t.slice(s.place,h+s.place);if(s.place+=h,2!==t[s.place++])return!1;const n=Gx(t,s);if(!1===n)return!1;if(t.length!==n+s.place)return!1;let o=t.slice(s.place,n+s.place);if(0===r[0]){if(!(128&r[1]))return!1;r=r.slice(1)}if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}return this.r=new kx(r),this.s=new kx(o),this.recoveryParam=null,!0}}class Yx{constructor(t){if(!(this instanceof Yx))return new Yx(t);"string"==typeof t&&(t=Ox[t]),t instanceof Ox.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,i){return Nx.fromPublic(this,t,i)}Q$(t,i){const s=8*t.byteLength()-this.n.bitLength();return s>0&&(t=t.ushrn(s)),!i&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,i,s,e){t=this.Q$(new kx(t,16)),s=this.keyFromPublic(s,e);const h=(i=new Wx(i,"hex")).r,r=i.s;if(h.cmpn(1)<0||h.cmp(this.n)>=0)return!1;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;const n=r.invm(this.n),o=n.mul(t).umod(this.n),a=n.mul(h).umod(this.n);if(!this.curve.F$){const t=this.g.mulAdd(o,s.getPublic(),a);return!t.isInfinity()&&0===t.getX().umod(this.n).cmp(h)}const l=this.g.jmulAdd(o,s.getPublic(),a);return!l.isInfinity()&&l.eqXToP(h)}}var Hx,jx={exports:{}},$x={exports:{}};$x.exports=(Hx=Hx||function(t,i){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),"undefined"!=typeof self&&self.crypto&&(s=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(s=globalThis.crypto),!s&&"undefined"!=typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&void 0!==qS&&qS.crypto&&(s=qS.crypto),!s)try{s=i}catch(t){}var e=function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||function(){function t(){}return function(i){var s;return t.prototype=i,s=new t,t.prototype=null,s}}(),r={},n=r.lib={},o=n.Base={extend:function(t){var i=h(this);return t&&i.mixIn(t),i.hasOwnProperty("init")&&this.init!==i.init||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(t,s){t=this.words=t||[],this.sigBytes=s!=i?s:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var i=this.words,s=t.words,e=this.sigBytes,h=t.sigBytes;if(this.clamp(),e%4)for(var r=0;r<h;r++){var n=s[r>>>2]>>>24-r%4*8&255;i[e+r>>>2]|=n<<24-(e+r)%4*8}else for(var o=0;o<h;o+=4)i[e+o>>>2]=s[o>>>2];return this.sigBytes+=h,this},clamp:function(){var i=this.words,s=this.sigBytes;i[s>>>2]&=4294967295<<32-s%4*8,i.length=t.ceil(s/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var i=[],s=0;s<t;s+=4)i.push(e());return new a.init(i,t)}}),l=r.enc={},u=l.Hex={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push((r>>>4).toString(16)),e.push((15&r).toString(16))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e+=2)s[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new a.init(s,i/2)}},c=l.Latin1={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push(String.fromCharCode(r))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e++)s[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new a.init(s,i)}},d=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=n.BufferedBlockAlgorithm=o.extend({reset:function(){this.IC=new a.init,this.J$=0},K$:function(t){"string"==typeof t&&(t=d.parse(t)),this.IC.concat(t),this.J$+=t.sigBytes},q$:function(i){var s,e=this.IC,h=e.words,r=e.sigBytes,n=this.blockSize,o=r/(4*n),l=(o=i?t.ceil(o):t.max((0|o)-this.tX,0))*n,u=t.min(4*l,r);if(l){for(var c=0;c<l;c+=n)this.iX(h,c);s=h.splice(0,l),e.sigBytes-=u}return new a.init(s,u)},clone:function(){var t=o.clone.call(this);return t.IC=this.IC.clone(),t},tX:0});n.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this.sX()},update:function(t){return this.K$(t),this.q$(),this},finalize:function(t){return t&&this.K$(t),this.eX()},blockSize:16,hX:function(t){return function(i,s){return new t.init(s).finalize(i)}},rX:function(t){return function(i,s){return new A.HMAC.init(t,s).finalize(i)}}});var A=r.algo={};return r}(Math),Hx);var Xx={exports:{}};!function(t,i){var s;t.exports=(s=$x.exports,function(t){var i=s,e=i.lib,h=e.WordArray,r=e.Hasher,n=i.algo,o=[],a=[];!function(){function i(i){for(var s=t.sqrt(i),e=2;e<=s;e++)if(!(i%e))return!1;return!0}function s(t){return 4294967296*(t-(0|t))|0}for(var e=2,h=0;h<64;)i(e)&&(h<8&&(o[h]=s(t.pow(e,.5))),a[h]=s(t.pow(e,1/3)),h++),e++}();var l=[],u=n.SHA256=r.extend({sX:function(){this.nX=new h.init(o.slice(0))},iX:function(t,i){for(var s=this.nX.words,e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],u=s[5],c=s[6],d=s[7],f=0;f<64;f++){if(f<16)l[f]=0|t[i+f];else{var A=l[f-15],g=(A<<25|A>>>7)^(A<<14|A>>>18)^A>>>3,v=l[f-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;l[f]=g+l[f-7]+y+l[f-16]}var m=e&h^e&r^h&r,p=(e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22),S=d+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&u^~o&c)+a[f]+l[f];d=c,c=u,u=o,o=n+S|0,n=r,r=h,h=e,e=S+(p+m)|0}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+n|0,s[4]=s[4]+o|0,s[5]=s[5]+u|0,s[6]=s[6]+c|0,s[7]=s[7]+d|0},eX:function(){var i=this.IC,s=i.words,e=8*this.J$,h=8*i.sigBytes;return s[h>>>5]|=128<<24-h%32,s[14+(h+64>>>9<<4)]=t.floor(e/4294967296),s[15+(h+64>>>9<<4)]=e,i.sigBytes=4*s.length,this.q$(),this.nX},clone:function(){var t=r.clone.call(this);return t.nX=this.nX.clone(),t}});i.SHA256=r.hX(u),i.HmacSHA256=r.rX(u)}(Math),s.SHA256)}(Xx);var Zx=Xx.exports;!function(t,i){var s,e,h,r,n,o;t.exports=(e=(s=o=$x.exports).lib.WordArray,h=s.algo,r=h.SHA256,n=h.SHA224=r.extend({sX:function(){this.nX=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},eX:function(){var t=r.eX.call(this);return t.sigBytes-=4,t}}),s.SHA224=r.hX(n),s.HmacSHA224=r.rX(n),o.SHA224)}(jx);var Qx=jx.exports,Jx={exports:{}};!function(t,i){t.exports=$x.exports.enc.Hex}(Jx);var Kx=Jx.exports,qx={exports:{}};!function(t,i){t.exports=$x.exports.enc.Utf8}(qx);var tM=qx.exports,iM={exports:{}};!function(t,i){var s,e,h;t.exports=(h=(e=s=$x.exports).lib.WordArray,e.enc.Base64={stringify:function(t){var i=t.words,s=t.sigBytes,e=this.st;t.clamp();for(var h=[],r=0;r<s;r+=3)for(var n=(i[r>>>2]>>>24-r%4*8&255)<<16|(i[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|i[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<s;o++)h.push(e.charAt(n>>>6*(3-o)&63));var a=e.charAt(64);if(a)for(;h.length%4;)h.push(a);return h.join("")},parse:function(t){var i=t.length,s=this.st,e=this.oX;if(!e){e=this.oX=[];for(var r=0;r<s.length;r++)e[s.charCodeAt(r)]=r}var n=s.charAt(64);if(n){var o=t.indexOf(n);-1!==o&&(i=o)}return function(t,i,s){for(var e=[],r=0,n=0;n<i;n++)if(n%4){var o=s[t.charCodeAt(n-1)]<<n%4*2|s[t.charCodeAt(n)]>>>6-n%4*2;e[r>>>2]|=o<<24-r%4*8,r++}return h.create(e,r)}(t,i,e)},st:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},s.enc.Base64)}({exports:{}});!function(t,i){var s;t.exports=(s=$x.exports,function(t){var i=s,e=i.lib,h=e.WordArray,r=e.Hasher,n=i.algo,o=[];!function(){for(var i=0;i<64;i++)o[i]=4294967296*t.abs(t.sin(i+1))|0}();var a=n.MD5=r.extend({sX:function(){this.nX=new h.init([1732584193,4023233417,2562383102,271733878])},iX:function(t,i){for(var s=0;s<16;s++){var e=i+s,h=t[e];t[e]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var r=this.nX.words,n=t[i+0],a=t[i+1],f=t[i+2],A=t[i+3],g=t[i+4],v=t[i+5],y=t[i+6],m=t[i+7],p=t[i+8],S=t[i+9],b=t[i+10],x=t[i+11],M=t[i+12],_=t[i+13],w=t[i+14],C=t[i+15],k=r[0],T=r[1],F=r[2],I=r[3];k=l(k,T,F,I,n,7,o[0]),I=l(I,k,T,F,a,12,o[1]),F=l(F,I,k,T,f,17,o[2]),T=l(T,F,I,k,A,22,o[3]),k=l(k,T,F,I,g,7,o[4]),I=l(I,k,T,F,v,12,o[5]),F=l(F,I,k,T,y,17,o[6]),T=l(T,F,I,k,m,22,o[7]),k=l(k,T,F,I,p,7,o[8]),I=l(I,k,T,F,S,12,o[9]),F=l(F,I,k,T,b,17,o[10]),T=l(T,F,I,k,x,22,o[11]),k=l(k,T,F,I,M,7,o[12]),I=l(I,k,T,F,_,12,o[13]),F=l(F,I,k,T,w,17,o[14]),k=u(k,T=l(T,F,I,k,C,22,o[15]),F,I,a,5,o[16]),I=u(I,k,T,F,y,9,o[17]),F=u(F,I,k,T,x,14,o[18]),T=u(T,F,I,k,n,20,o[19]),k=u(k,T,F,I,v,5,o[20]),I=u(I,k,T,F,b,9,o[21]),F=u(F,I,k,T,C,14,o[22]),T=u(T,F,I,k,g,20,o[23]),k=u(k,T,F,I,S,5,o[24]),I=u(I,k,T,F,w,9,o[25]),F=u(F,I,k,T,A,14,o[26]),T=u(T,F,I,k,p,20,o[27]),k=u(k,T,F,I,_,5,o[28]),I=u(I,k,T,F,f,9,o[29]),F=u(F,I,k,T,m,14,o[30]),k=c(k,T=u(T,F,I,k,M,20,o[31]),F,I,v,4,o[32]),I=c(I,k,T,F,p,11,o[33]),F=c(F,I,k,T,x,16,o[34]),T=c(T,F,I,k,w,23,o[35]),k=c(k,T,F,I,a,4,o[36]),I=c(I,k,T,F,g,11,o[37]),F=c(F,I,k,T,m,16,o[38]),T=c(T,F,I,k,b,23,o[39]),k=c(k,T,F,I,_,4,o[40]),I=c(I,k,T,F,n,11,o[41]),F=c(F,I,k,T,A,16,o[42]),T=c(T,F,I,k,y,23,o[43]),k=c(k,T,F,I,S,4,o[44]),I=c(I,k,T,F,M,11,o[45]),F=c(F,I,k,T,C,16,o[46]),k=d(k,T=c(T,F,I,k,f,23,o[47]),F,I,n,6,o[48]),I=d(I,k,T,F,m,10,o[49]),F=d(F,I,k,T,w,15,o[50]),T=d(T,F,I,k,v,21,o[51]),k=d(k,T,F,I,M,6,o[52]),I=d(I,k,T,F,A,10,o[53]),F=d(F,I,k,T,b,15,o[54]),T=d(T,F,I,k,a,21,o[55]),k=d(k,T,F,I,p,6,o[56]),I=d(I,k,T,F,C,10,o[57]),F=d(F,I,k,T,y,15,o[58]),T=d(T,F,I,k,_,21,o[59]),k=d(k,T,F,I,g,6,o[60]),I=d(I,k,T,F,x,10,o[61]),F=d(F,I,k,T,f,15,o[62]),T=d(T,F,I,k,S,21,o[63]),r[0]=r[0]+k|0,r[1]=r[1]+T|0,r[2]=r[2]+F|0,r[3]=r[3]+I|0},eX:function(){var i=this.IC,s=i.words,e=8*this.J$,h=8*i.sigBytes;s[h>>>5]|=128<<24-h%32;var r=t.floor(e/4294967296),n=e;s[15+(h+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),s[14+(h+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),i.sigBytes=4*(s.length+1),this.q$();for(var o=this.nX,a=o.words,l=0;l<4;l++){var u=a[l];a[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return o},clone:function(){var t=r.clone.call(this);return t.nX=this.nX.clone(),t}});function l(t,i,s,e,h,r,n){var o=t+(i&s|~i&e)+h+n;return(o<<r|o>>>32-r)+i}function u(t,i,s,e,h,r,n){var o=t+(i&e|s&~e)+h+n;return(o<<r|o>>>32-r)+i}function c(t,i,s,e,h,r,n){var o=t+(i^s^e)+h+n;return(o<<r|o>>>32-r)+i}function d(t,i,s,e,h,r,n){var o=t+(s^(i|~e))+h+n;return(o<<r|o>>>32-r)+i}i.MD5=r.hX(a),i.HmacMD5=r.rX(a)}(Math),s.MD5)}({exports:{}});!function(t,i){var s,e,h,r,n,o,a,l;t.exports=(e=(s=l=$x.exports).lib,h=e.WordArray,r=e.Hasher,n=s.algo,o=[],a=n.SHA1=r.extend({sX:function(){this.nX=new h.init([1732584193,4023233417,2562383102,271733878,3285377520])},iX:function(t,i){for(var s=this.nX.words,e=s[0],h=s[1],r=s[2],n=s[3],a=s[4],l=0;l<80;l++){if(l<16)o[l]=0|t[i+l];else{var u=o[l-3]^o[l-8]^o[l-14]^o[l-16];o[l]=u<<1|u>>>31}var c=(e<<5|e>>>27)+a+o[l];c+=l<20?1518500249+(h&r|~h&n):l<40?1859775393+(h^r^n):l<60?(h&r|h&n|r&n)-1894007588:(h^r^n)-899497514,a=n,n=r,r=h<<30|h>>>2,h=e,e=c}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+n|0,s[4]=s[4]+a|0},eX:function(){var t=this.IC,i=t.words,s=8*this.J$,e=8*t.sigBytes;return i[e>>>5]|=128<<24-e%32,i[14+(e+64>>>9<<4)]=Math.floor(s/4294967296),i[15+(e+64>>>9<<4)]=s,t.sigBytes=4*i.length,this.q$(),this.nX},clone:function(){var t=r.clone.call(this);return t.nX=this.nX.clone(),t}}),s.SHA1=r.hX(a),s.HmacSHA1=r.rX(a),l.SHA1)}({exports:{}});!function(t,i){var s,e,h;t.exports=(e=(s=$x.exports).lib.Base,h=s.enc.Utf8,void(s.algo.HMAC=e.extend({init:function(t,i){t=this.aX=new t.init,"string"==typeof i&&(i=h.parse(i));var s=t.blockSize,e=4*s;i.sigBytes>e&&(i=t.finalize(i)),i.clamp();for(var r=this.lX=i.clone(),n=this.uX=i.clone(),o=r.words,a=n.words,l=0;l<s;l++)o[l]^=1549556828,a[l]^=909522486;r.sigBytes=n.sigBytes=e,this.reset()},reset:function(){var t=this.aX;t.reset(),t.update(this.uX)},update:function(t){return this.aX.update(t),this},finalize:function(t){var i=this.aX,s=i.finalize(t);return i.reset(),i.finalize(this.lX.clone().concat(s))}})))}({exports:{}}),function(t,i){var s,e,h,r,n,o,a,l;t.exports=(h=(e=(s=l=$x.exports).lib).Base,r=e.WordArray,o=(n=s.algo).MD5,a=n.EvpKDF=h.extend({cfg:h.extend({keySize:4,hasher:o,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,i){for(var s,e=this.cfg,h=e.hasher.create(),n=r.create(),o=n.words,a=e.keySize,l=e.iterations;o.length<a;){s&&h.update(s),s=h.update(t).finalize(i),h.reset();for(var u=1;u<l;u++)s=h.finalize(s),h.reset();n.concat(s)}return n.sigBytes=4*a,n}}),s.EvpKDF=function(t,i,s){return a.create(s).compute(t,i)},l.EvpKDF)}({exports:{}});!function(t,i){var s;t.exports=void((s=$x.exports).lib.Cipher||function(t){var i=s,e=i.lib,h=e.Base,r=e.WordArray,n=e.BufferedBlockAlgorithm,o=i.enc;o.Utf8;var a=o.Base64,l=i.algo.EvpKDF,u=e.Cipher=n.extend({cfg:h.extend(),createEncryptor:function(t,i){return this.create(this.cX,t,i)},createDecryptor:function(t,i){return this.create(this.dX,t,i)},init:function(t,i,s){this.cfg=this.cfg.extend(s),this.fX=t,this.AX=i,this.reset()},reset:function(){n.reset.call(this),this.sX()},process:function(t){return this.K$(t),this.q$()},finalize:function(t){return t&&this.K$(t),this.eX()},keySize:4,ivSize:4,cX:1,dX:2,hX:function(){function t(t){return"string"==typeof t?p:y}return function(i){return{encrypt:function(s,e,h){return t(e).encrypt(i,s,e,h)},decrypt:function(s,e,h){return t(e).decrypt(i,s,e,h)}}}}()});e.StreamCipher=u.extend({eX:function(){return this.q$(!0)},blockSize:1});var c=i.mode={},d=e.BlockCipherMode=h.extend({createEncryptor:function(t,i){return this.Encryptor.create(t,i)},createDecryptor:function(t,i){return this.Decryptor.create(t,i)},init:function(t,i){this.gX=t,this.vX=i}}),f=c.CBC=function(){var t=d.extend();function i(t,i,s){var e,h=this.vX;h?(e=h,this.vX=undefined):e=this.yX;for(var r=0;r<s;r++)t[i+r]^=e[r]}return t.Encryptor=t.extend({processBlock:function(t,s){var e=this.gX,h=e.blockSize;i.call(this,t,s,h),e.encryptBlock(t,s),this.yX=t.slice(s,s+h)}}),t.Decryptor=t.extend({processBlock:function(t,s){var e=this.gX,h=e.blockSize,r=t.slice(s,s+h);e.decryptBlock(t,s),i.call(this,t,s,h),this.yX=r}}),t}(),A=(i.pad={}).Pkcs7={pad:function(t,i){for(var s=4*i,e=s-t.sigBytes%s,h=e<<24|e<<16|e<<8|e,n=[],o=0;o<e;o+=4)n.push(h);var a=r.create(n,e);t.concat(a)},unpad:function(t){var i=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=i}};e.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:A}),reset:function(){var t;u.reset.call(this);var i=this.cfg,s=i.iv,e=i.mode;this.fX==this.cX?t=e.createEncryptor:(t=e.createDecryptor,this.tX=1),this.mX&&this.mX.pX==t?this.mX.init(this,s&&s.words):(this.mX=t.call(e,this,s&&s.words),this.mX.pX=t)},iX:function(t,i){this.mX.processBlock(t,i)},eX:function(){var t,i=this.cfg.padding;return this.fX==this.cX?(i.pad(this.IC,this.blockSize),t=this.q$(!0)):(t=this.q$(!0),i.unpad(t)),t},blockSize:4});var g=e.CipherParams=h.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),v=(i.format={}).OpenSSL={stringify:function(t){var i=t.ciphertext,s=t.salt;return(s?r.create([1398893684,1701076831]).concat(s).concat(i):i).toString(a)},parse:function(t){var i,s=a.parse(t),e=s.words;return 1398893684==e[0]&&1701076831==e[1]&&(i=r.create(e.slice(2,4)),e.splice(0,4),s.sigBytes-=16),g.create({ciphertext:s,salt:i})}},y=e.SerializableCipher=h.extend({cfg:h.extend({format:v}),encrypt:function(t,i,s,e){e=this.cfg.extend(e);var h=t.createEncryptor(s,e),r=h.finalize(i),n=h.cfg;return g.create({ciphertext:r,key:s,iv:n.iv,algorithm:t,mode:n.mode,padding:n.padding,blockSize:t.blockSize,formatter:e.format})},decrypt:function(t,i,s,e){return e=this.cfg.extend(e),i=this.SX(i,e.format),t.createDecryptor(s,e).finalize(i.ciphertext)},SX:function(t,i){return"string"==typeof t?i.parse(t,this):t}}),m=(i.kdf={}).OpenSSL={execute:function(t,i,s,e){e||(e=r.random(8));var h=l.create({keySize:i+s}).compute(t,e),n=r.create(h.words.slice(i),4*s);return h.sigBytes=4*i,g.create({key:h,iv:n,salt:e})}},p=e.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:m}),encrypt:function(t,i,s,e){var h=(e=this.cfg.extend(e)).kdf.execute(s,t.keySize,t.ivSize);e.iv=h.iv;var r=y.encrypt.call(this,t,i,h.key,e);return r.mixIn(h),r},decrypt:function(t,i,s,e){e=this.cfg.extend(e),i=this.SX(i,e.format);var h=e.kdf.execute(s,t.keySize,t.ivSize,i.salt);return e.iv=h.iv,y.decrypt.call(this,t,i,h.key,e)}})}())}({exports:{}}),function(t,i){var s;t.exports=(s=$x.exports,function(){var t=s,i=t.lib.BlockCipher,e=t.algo,h=[],r=[],n=[],o=[],a=[],l=[],u=[],c=[],d=[],f=[];!function(){for(var t=[],i=0;i<256;i++)t[i]=i<128?i<<1:i<<1^283;var s=0,e=0;for(i=0;i<256;i++){var A=e^e<<1^e<<2^e<<3^e<<4;A=A>>>8^255&A^99,h[s]=A,r[A]=s;var g=t[s],v=t[g],y=t[v],m=257*t[A]^16843008*A;n[s]=m<<24|m>>>8,o[s]=m<<16|m>>>16,a[s]=m<<8|m>>>24,l[s]=m,m=16843009*y^65537*v^257*g^16843008*s,u[A]=m<<24|m>>>8,c[A]=m<<16|m>>>16,d[A]=m<<8|m>>>24,f[A]=m,s?(s=g^t[t[t[y^g]]],e^=t[t[e]]):s=e=1}}();var A=[0,1,2,4,8,16,32,64,128,27,54],g=e.AES=i.extend({sX:function(){if(!this.bX||this.xX!==this.AX){for(var t=this.xX=this.AX,i=t.words,s=t.sigBytes/4,e=4*((this.bX=s+6)+1),r=this.MX=[],n=0;n<e;n++)n<s?r[n]=i[n]:(l=r[n-1],n%s?s>6&&n%s==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]):(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=A[n/s|0]<<24),r[n]=r[n-s]^l);for(var o=this._X=[],a=0;a<e;a++){if(n=e-a,a%4)var l=r[n];else l=r[n-4];o[a]=a<4||n<=4?l:u[h[l>>>24]]^c[h[l>>>16&255]]^d[h[l>>>8&255]]^f[h[255&l]]}}},encryptBlock:function(t,i){this.wX(t,i,this.MX,n,o,a,l,h)},decryptBlock:function(t,i){var s=t[i+1];t[i+1]=t[i+3],t[i+3]=s,this.wX(t,i,this._X,u,c,d,f,r),s=t[i+1],t[i+1]=t[i+3],t[i+3]=s},wX:function(t,i,s,e,h,r,n,o){for(var a=this.bX,l=t[i]^s[0],u=t[i+1]^s[1],c=t[i+2]^s[2],d=t[i+3]^s[3],f=4,A=1;A<a;A++){var g=e[l>>>24]^h[u>>>16&255]^r[c>>>8&255]^n[255&d]^s[f++],v=e[u>>>24]^h[c>>>16&255]^r[d>>>8&255]^n[255&l]^s[f++],y=e[c>>>24]^h[d>>>16&255]^r[l>>>8&255]^n[255&u]^s[f++],m=e[d>>>24]^h[l>>>16&255]^r[u>>>8&255]^n[255&c]^s[f++];l=g,u=v,c=y,d=m}g=(o[l>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^s[f++],v=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&l])^s[f++],y=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[l>>>8&255]<<8|o[255&u])^s[f++],m=(o[d>>>24]<<24|o[l>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^s[f++],t[i]=g,t[i+1]=v,t[i+2]=y,t[i+3]=m},keySize:8});t.AES=i.hX(g)}(),s.AES)}(iM);var sM=iM.exports,eM={exports:{}};!function(t,i){var s,e,h;t.exports=((h=$x.exports).mode.CTR=(e=(s=h.lib.BlockCipherMode.extend()).Encryptor=s.extend({processBlock:function(t,i){var s=this.gX,e=s.blockSize,h=this.vX,r=this.CX;h&&(r=this.CX=h.slice(0),this.vX=void 0);var n=r.slice(0);s.encryptBlock(n,0),r[e-1]=r[e-1]+1|0;for(var o=0;o<e;o++)t[i+o]^=n[o]}}),s.Decryptor=e,s),h.mode.CTR)}(eM);var hM=eM.exports,rM={exports:{}};!function(t,i){var s;t.exports=(s=$x.exports,function(){if("function"==typeof ArrayBuffer){var t=s.lib.WordArray,i=t.init,e=t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var s=t.byteLength,e=[],h=0;h<s;h++)e[h>>>2]|=t[h]<<24-h%4*8;i.call(this,e,s)}else i.apply(this,arguments)};e.prototype=t}}(),s.lib.WordArray)}(rM);var nM=rM.exports,oM={exports:{}};!function(t,i){var s;t.exports=((s=$x.exports).pad.NoPadding={pad:function(){},unpad:function(){}},s.pad.NoPadding)}(oM);var aM=oM.exports;const lM=9e5,uM={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAxODAxMjA="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvdHJvdWJsZXNob290aW5nL3Jlc3RyaWN0ZWQtZmVhdHVyZXMv","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzLw=="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI="],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw==","VHJhZGluZw==","ZmVhdHVyZXM=","Y2xpY2s=","aGVyZQ==","bW9yZQ==","c3VwcGxpZWQ=","Z2V0","bGljZW5zZQ==","VHJlZQ=="],1:["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2FuZGJveA=="]},cM=Ch,dM=(...t)=>t.slice(1).reduce(((i,s)=>i+cM.atob(uM[t[0]][s].toString())),"");let fM,AM,gM,vM=new Uint8Array([]);class yM{set e(t){fM=t}get e(){AM={Lf:!1,Rf:!1,Ef:!1,Of:!1,zf:!1,Vf:!1,Nf:!1,Gf:!1,Uf:!1,Wf:!1,Yf:!1,Hf:!1,jf:!1,$f:!1,Xf:!1,Zf:!1,Qf:!1,Jf:!1,Kf:!1,qf:!1,tA:!1,iA:!1,sA:!1,eA:!1};const t=vM.length,i=t>=1?vM[0]:void 0,s=t>=2?vM[1]:void 0,e=t>=3?vM[2]:void 0;return void 0!==i&&(AM.Lf=!!(1&i),AM.Rf=!!(2&i),AM.Ef=!!(4&i),AM.Of=!!(8&i),AM.zf=!!(16&i),AM.Vf=!!(32&i),AM.Nf=!!(64&i),AM.Gf=!!(128&i)),void 0!==s&&(AM.Uf=!!(1&s),AM.Wf=!!(2&s),AM.Yf=!!(4&s),AM.Hf=!!(8&s),AM.jf=!!(16&s),AM.$f=!!(32&s),AM.Xf=!!(64&s),AM.Zf=!!(128&s)),void 0!==e&&(AM.Qf=!!(1&e),AM.Jf=!!(2&e),AM.Kf=!!(4&e),AM.qf=!!(8&e),AM.tA=!!(16&e),AM.iA=!!(32&e),AM.sA=!!(64&e),AM.eA=!!(128&e)),AM.Vf}set l(t){gM=t}get l(){return gM}}let mM=!1;const pM=(t,i)=>{const s=new RegExp(`.{${i}}`,"g");return(t.match(s)||[]).map((t=>parseInt(t,16)))},SM=t=>{if(4===t.byteLength)return`${t[0].toString().padStart(2,"0")}${t[1].toString().padStart(2,"0")}${t[2].toString().padStart(2,"0")}${t[3].toString().padStart(2,"0")}`},bM=t=>t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),xM=t=>{const i={},s=t.split("-");if(3!==s.length)return{kX:dM(0,0,1,7,1,12,5)};let e=0;const h=Uint8Array.from(atob(s[1]),(t=>t.charCodeAt(0)));e+=1;const r=h.subarray(e,e+=20),n=new DataView(h.buffer).getUint16(e,!0);e+=2;const o=Uint8Array.from(Array(n));for(let t=0;t<n;t+=1)o[t]=h[t+e]^r[t%r.byteLength];const a=new DataView(o.buffer);i.TX=o,e=0;const l=Uint8Array.from(Array(a.getUint16(e,!0)));e+=2,l.set(o.subarray(e,e+=l.byteLength)),vM=new Uint8Array(l);const u=SM(o.subarray(e,e+=4)),c=dM(-3,0);if(!u)return{kX:dM(0,0,1,7,1,12,5)};if(u<c)return{kX:dM(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};if(8&l[0]){const t=SM(o.subarray(e,e+=4)),i=bM(new Date);if(!t)return{kX:dM(0,0,1,7,1,12,5)};if(t<i)return{kX:dM(0,0,1,2,1,3,1,4,5),FX:dM(-2,2)}}i.IX=e;const d=`${s[0]}-${s[1]}`,f=Array.prototype.reduce.call(atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");return wM(d,f)?i:{kX:dM(0,0,1,7,1,12,5)}},MM=t=>{const i=t.slice(0,4);let s=t.slice(5);switch(i){case"0001":{s=s.replace(/-/g,"");const t=Uint8Array.from(pM(s,2)),i=t.slice(36,40),e=new Uint8Array(4),h=(t=>{let i;const s=[];for(let t=0;t<256;t+=1){i=t;for(let t=0;t<8;t+=1)i=1&i?3988292384^i>>>1:i>>>1;s[t]=i}let e=-1;for(let i=0;i<t.length;i+=1)e=e>>>8^s[255&(e^t[i])];return(-1^e)>>>0})(t.slice(0,36));new DataView(e.buffer).setUint32(0,h,!0);const r=t.slice(28,34);let n=0;for(let t=r.length-1;t>0;t-=1)n+=r[t]*2**(8*t);const o=new Date(n);if(bM(o)<dM(-3,0))return{kX:dM(0,0,1,2,1,3,1,4,5),FX:dM(-2,2)};if(i.every(((t,i)=>e[i]===t)))return{};break}case"0002":return xM(t);default:return{kX:dM(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}return{kX:dM(0,0,1,2,1,7,1,12,5)}},_M=t=>{if(!t)return{kX:dM(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5)};const i=(t[dM(-1,9)]||t[dM(-1,37)]).map((t=>(t||"").trim()));if(i.indexOf(cM[dM(-1,6)][dM(-1,7)])>-1)return{PX:!0};const s=i.filter((t=>t.indexOf("*")>-1));if(IM(cM[dM(-1,6)][dM(-1,7)],s))return{PX:!0};const e=t[dM(-1,8)]||t[dM(-1,38)];if(""!==e&&null!=e){if(IM(cM[dM(-1,6)][dM(-1,7)],[e]))return{PX:!1};if(e===cM[dM(-1,6)][dM(-1,7)])return{PX:!1}}return{kX:dM(0,14,1,20,5)}},wM=(t,i)=>{const s=new Yx("secp256k1").keyFromPublic(dM(-4,0),"hex"),e=Qx(t).toString();return s.verify(e,i)},CM=t=>{switch(t.slice(0,4)){case"0001":return(t=>{let i,s="";try{const i=t.split("-"),e=i[1],h=i[2],r=i[3];if(!wM(h,r))return{kX:dM(0,21,1,2,1,7,1,12,5)};const n=Kx.parse(h);s=sM.decrypt({ciphertext:Kx.parse(e)},n,{mode:hM,padding:aM,iv:Kx.parse("00000000000000000000000000000001")}).toString(tM)}catch(t){return{kX:dM(0,21,1,2,1,7,1,12,5)}}try{i=JSON.parse(s)}catch(t){return{kX:dM(0,21,1,2,1,7,1,12,5)}}if(void 0===i[dM(-1,5)]||null===i[dM(-1,4)]||!i[dM(-1,9)])return{kX:dM(0,21,1,2,1,7,1,12,5)};const e=parseInt(dM(-3,0),10)||Number(parseInt(dM(-3,0),10));return i[dM(-1,5)]<e?{kX:dM(0,21,1,2,1,3,1,4,5)}:_M(i)})(t);case"0002":return(t=>{const i=xM(t),s=i.TX,e=i.IX;if(i.kX||void 0===s||void 0===e)return i;let h,r="";try{const t=s.slice(i.IX,e+16),h=new DataView(t.buffer),n=new Int32Array(4);for(let t=0;t<n.length;t+=1)n[t]=h.getInt32(4*t,!1);const o=nM.create(Array.from(n)),a=e+16,l=s.slice(a,s.length),u=new DataView(l.buffer),c=new Int32Array(Math.floor(l.byteLength/4));for(let t=0;t<c.length;t+=1)c[t]=u.getInt32(4*t,!1);const d=nM.create(Array.from(c)),f=sM.decrypt({ciphertext:d},o,{mode:hM,padding:aM,iv:Kx.parse("00000000000000000000000000000001")});r=cM.atob(f.toString(tM))}catch(t){return{kX:dM(0,21,1,2,1,7,1,12,5)}}try{h=JSON.parse(r)}catch(t){return{kX:dM(0,21,1,2,1,7,1,12,5)}}return h[dM(-1,37)]?_M(h):{kX:dM(0,21,1,2,1,7,1,12,5)}})(t);default:return{kX:dM(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},kM=(t,i)=>{switch(t.slice(0,4)){case"0001":return((t,i)=>{if(!i)return{kX:dM(0,39,1,40,1,41,5)};const s=t.split("-"),e=s[1].slice(1),h=s[2],r=s[3];if(!wM(`${e}-${h}`,r))return{kX:dM(0,21,1,2,1,7,1,12,5)};const n=Uint8Array.from(pM(h,2));let o=0;for(let t=n.length-1;t>0;t-=1)o+=n[t]*2**(8*t);if(o<(parseInt(dM(-3,0),10)||Number(parseInt(dM(-3,0),10))))return{kX:dM(0,21,1,2,1,3,1,4,5)};const a=Int32Array.from(pM(e,8)),l=Zx(i[dM(-1,31)]).toString(Kx),u=Int32Array.from(pM(l,8)),c=Zx(i[dM(-1,32)]).toString(Kx),d=Int32Array.from(pM(c,8)),f=new Int32Array(u.length);for(let t=0;t<f.length;t+=1)f[t]=u[t]^d[t];return a.every(((t,i)=>f[i]===t))?{}:{kX:dM(0,21,1,2,1,7,1,12,5)}})(t,i);case"0002":return((t,i)=>{if(!i)return{kX:dM(0,39,1,40,1,41,5)};const s=xM(t),e=s.TX,h=s.IX;if(s.kX||void 0===e||void 0===h)return s;const r=e.slice(h,e.length),n=new DataView(r.buffer),o=new Int32Array(8);for(let t=0;t<o.length;t+=1)o[t]=n.getInt32(4*t,!1);const a=Zx(i[dM(-1,31)]).toString(Kx),l=Int32Array.from(pM(a,8)),u=Zx(i[dM(-1,32)]).toString(Kx),c=Int32Array.from(pM(u,8)),d=new Int32Array(l.length);for(let t=0;t<d.length;t+=1)d[t]=l[t]^c[t];return o.every(((t,i)=>d[i]===t))?{}:{kX:dM(0,21,1,2,1,7,1,12,5)}})(t,i);default:return{kX:dM(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},TM=(t,i,s=!0,e)=>{mM=!1,i.zo();const h=i._n,r=!!h&&(h===Ch.document.body||Ch.document.body.contains(h)),n=h&&r?h:document.body;if(void 0===Array.from(n.children).find((t=>"lcjs-error"===t.id))){const i=Ch.document.createElement("div");i.id="lcjs-error",n.append(i),i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.width="100%",i.style.height="100%",i.style.backgroundColor="black",i.style.boxSizing="border-box",i.style.padding="20px",i.style.font="Arial",i.style.fontSize="20px";let h,r=(t||"LICENSE_ERROR").toLowerCase().split("_").join(" ");if(r=(s?dM(0,0,1,2,1,23,1,24,25,1):"")+r.charAt(0).toUpperCase()+r.substr(1),e){const t=Ch.document.createElement("a");t.href=e,h=t}else h=Ch.document.createElement("p1");i.append(h),h.innerHTML=r,h.style.color="red"}},FM=(t,i,s)=>{i?(t[dM(-1,17)](dM(-1,19),s),t[dM(-1,17)](dM(-1,20),s),t[dM(-1,17)](dM(-1,21),s),t[dM(-1,17)](dM(-1,22),s)):(t[dM(-1,18)](dM(-1,19),s),t[dM(-1,18)](dM(-1,20),s),t[dM(-1,18)](dM(-1,21),s),t[dM(-1,18)](dM(-1,22),s))},IM=(t,i)=>{const s=t.split(".").reverse();return i.some((t=>{const i=t.split(".").reverse();let e=!1;const h=i.findIndex((t=>"*"===t)),r=s.every(((t,s)=>{if(!e){if(!(s<i.length))return!1;if(e="*"===i[s]&&s+1>2,!e&&t!==i[s])return!1}return!0}));return!(h>s.length-1||!r)}))},PM=new Map;return t.Animation=Je,t.AnimationEasings=Qe,t.Animator=Ke,t.AreaRangeSeries=ug,t.AreaSeries=eg,t.AreaSeriesBipolar=hg,t.AreaSeriesMonopolar=rg,t.AreaSeriesNegative=ng,t.AreaSeriesPositive=og,t.AreaSeriesTypes=ag,t.AutoCursor2DBuilder=Id,t.AutoCursorBuilders=sm,t.AutoCursorXYBuilder=bA,t.AutoFitStrategies=xd,t.AutoFitStrategy=pd,t.Axis=Sc,t.Axis3D=lf,t.AxisScrollStrategies=Yo,t.AxisTickStrategies=Ho,t.Band=Uo,t.BarChart=Hy,t.BarChartBar=Uy,t.BarChartCategoryAxis=Ny,t.BarChartSorting=jy,t.BarChartTypes={Horizontal:"horizontal",Vertical:"vertical"},t.BarChartValueAxis=Gy,t.BasicSeries=OA,t.BorderedPicture=Wl,t.BoxFigure=vA,t.BoxSeries=GA,t.BoxSeries3D=vf,t.Button=Xu,t.Chart=Ad,t.Chart3D=Rf,t.ChartComponent=Xn,t.ChartMarker=TA,t.ChartMarker2D=class extends TA{constructor(t,i,s,e,h,r){super(t,i,s,e.jy(t,i,s,r),h,r)}},t.ChartMarkerXY=IA,t.ChartWithSeries=_f,t.ChartXY=qg,t.Color=ve,t.ColorCSS=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return me(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return me(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=((t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]})(i[0],i[1],i[2]);return me(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?pe(t):pe((t=>{const i=xe[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)})(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),pe("#fff")},t.ColorHEX=pe,t.ColorHSV=Se,t.ColorPalettes=$l,t.ColorRGBA=me,t.ColorShadingStyles=su,t.ColorUint32=be,t.ConstantLine=Wo,t.CursorBuilder=Fd,t.CursorBuilderXY=SA,t.CustomTick=Pl,t.Dashboard=Ky,t.DashedLine=lu,t.DataGrid=Ly,t.DataPatternsNew=za,t.DataSetXY=vu,t.DateTimeTickStrategy=Gc,t.EllipseFigure=UA,t.EllipseSeries=WA,t.EmptyFill=Pe,t.EmptyUIElement=Nl,t.Figure=gA,t.FigureSeries=VA,t.FontSettings=ua,t.FormattingFunctions=Rn,t.FunnelChart=pv,t.FunnelChartTypes=_v,t.FunnelChartWithLabelsInsideSlices=Mv,t.FunnelChartWithLabelsOnSides=xv,t.FunnelSlice=Av,t.GaugeChart=kv,t.GaugeChartTypes=fm,t.GaugeSlice=Fv,t.GenericAxis=ea,t.GlowEffect=gu,t.HeatmapGridSeries=JA,t.HeatmapGridSeriesIntensityValues=KA,t.HeatmapScrollingGridSeries=qA,t.HeatmapScrollingGridSeriesIntensityValues=tg,t.Highlighter=Zn,t.Icon=du,t.ImageFill=ru,t.IndividualPointFill=ze,t.LUT=Fe,t.LegendBoxBuilders=fc,t.LineAndPointSeries3D=yf,t.LineSeries=zg,t.LineSeries3D=mf,t.LinearGradientFill=rh,t.LinearGradientFillPalette=(t,i,s,e)=>{const h=t(i+1,e);return t=>new rh({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},t.MapChart=Hf,t.MapRegions=dm,t.MapRegionsAfrica=em,t.MapRegionsAsia=hm,t.MapRegionsAustralia=rm,t.MapRegionsCanada=nm,t.MapRegionsEurope=om,t.MapRegionsNorthAmerica=um,t.MapRegionsSouthAmerica=cm,t.MapRegionsUSA=lm,t.MapRegionsWorld=am,t.MapTypes=zf,t.MarkerBuilders=im,t.MeshModel3D=Lf,t.NumericTickStrategy=Zc,t.OHLCSeries=Dg,t.OHLCSeriesBars=Lg,t.OHLCSeriesCandlesticks=Bg,t.OHLCSeriesTypes=Rg,t.OnScreenMenu=Ng,t.OnScreenMenuAnimationsButton=ko,t.OnScreenMenuButton=po,t.OnScreenMenuControlBase=ho,t.OnScreenMenuCustomButton=Fo,t.OnScreenMenuOsmToggleButton=Io,t.OnScreenMenuToggleButton=So,t.OnScreenMenuZoomInButton=bo,t.OnScreenMenuZoomInXButton=xo,t.OnScreenMenuZoomInYButton=Mo,t.OnScreenMenuZoomOutButton=_o,t.OnScreenMenuZoomOutXButton=wo,t.OnScreenMenuZoomOutYButton=Co,t.OnScreenMenuZoomToFitButton=To,t.PalettedFill=class extends Ne{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}},t.Panel=ud,t.PhongShadingStyle=tu,t.Picture=Ul,t.PieChart=Kd,t.PieChartTypes=hf,t.PieChartWithLabelsInsideSlices=ef,t.PieChartWithLabelsOnSides=sf,t.PieSlice=$d,t.PixelatedPoints3D=ma,t.PointCloudSeries3D=xf,t.PointLineAreaSeries=Gg,t.PointLineSeries=gg,t.PointLineSeries3D=pf,t.PointSeries=Vg,t.PointSeries3D=bf,t.PointSeriesTypes3D=Mf,t.PointStyle3D=Sa,t.PolarAreaSeries=lv,t.PolarAreaSeriesInterior=uv,t.PolarAxis=Xf,t.PolarAxisAmplitude=Qf,t.PolarAxisTick=Zf,t.PolarChart=dv,t.PolarHeatmapSeries=cA,t.PolarLineSeries=fA,t.PolarPointLineSeries=AA,t.PolarPointSeries=nv,t.PolarPolygon=ov,t.PolarPolygonSeries=av,t.PolarSector=eA,t.PolarSeries=rA,t.PolygonFigure=YA,t.PolygonSeries=HA,t.PyramidChart=zv,t.PyramidChartTypes=Wv,t.PyramidChartWithLabelsInsideSlices=Uv,t.PyramidChartWithLabelsOnSides=Gv,t.PyramidSlice=Lv,t.RadialGauge=Tv,t.RadialGradientFill=sh,t.RadialGradientFillPalette=(t,i,s)=>{const e=t(i+1,s);return t=>new sh({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},t.RangeSeries=ig,t.RectangleFigure=jA,t.RectangleSeries=$A,t.SegmentFigure=XA,t.SegmentSeries=ZA,t.Series2D=hA,t.Series3D=gf,t.SeriesMarkerXY=PA,t.SeriesXY=DA,t.SimpleShadingStyle=Kl,t.Slice=Hd,t.SliceLabelFormatters=Wd,t.SliceSorters=Ud,t.SolidFill=Ee,t.SolidFillPalette=(t,i,s)=>{const e=t(i,s);return t=>new Ee({color:e(t)})},t.SolidGauge=Bv,t.SolidGaugeSlice=Iv,t.SolidLine=so,t.SpiderAxis=Xv,t.SpiderChart=hy,t.SpiderSeries=Qv,t.SplineSeries=pg,t.StaticCursor2DBuilder=Pd,t.StaticCursorXYBuilder=xA,t.StepSeries=Pg,t.StipplePatterns=ou,t.SurfaceGridSeries3D=Ff,t.SurfaceScrollingGridSeries3D=If,t.TableContentBuilder=Md,t.Themes=Rm,t.Tick=pc,t.TickStyle=wc,t.TimeFormattingFunctions=ed,t.TimeTickStrategy=rd,t.TreeMapChart=Sm,t.TriangulatedPoints3D=ga,t.UIBackgrounds=tm,t.UICircle=Cu,t.UIColumnGrid=class extends Bu{constructor(){super(...arguments),this.qd=[]}addColumn(){return this.addElement(zu,void 0)}getColumn(t,i=!1){return i&&this.qd.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.qd[t]}},t.UIDiamond=ku,t.UIElementBuilders=dc,t.UIElementColumn=Lu,t.UIElementLine=Du,t.UIElementRow=Bu,t.UIElementWithBackground=Fl,t.UIEmptyBackground=Gl,t.UILabel=Mu,t.UILayoutBuilders=Ef,t.UILayoutGap=Pu,t.UILegendBoxPanel=Of,t.UIObject=_l,t.UIOrigins=Do,t.UIPanel=dd,t.UIPoint=Fu,t.UIPointer=Tu,t.UIPolygon=Yl,t.UIRectangle=wu,t.UIRowGrid=Eu,t.VisibleFill=Re,t.ZoomBandChart=hv,t.defaultOsmBackgroundColor=No,t.disableThemeEffects=t=>({...t,effect:void 0}),t.emptyFill=De,t.emptyLine=ah,t.emptyPoints3D=fa,t.emptyTick=kc,t.formatLongitudeLatitude=$f,t.formatNumberAsUnicodeSuperscript=En,t.isColor=ye,t.isCoordinate3D=Df,t.isCoordinateBarChart=Wy,t.isCoordinateClient=Yn,t.isCoordinatePolar=sA,t.isCoordinateXY=jn,t.isDashedLine=uu,t.isDateTimeTickStrategy=t=>!(!t||"object"!=typeof t||!("type"in t)||"date-time-ticks"!==t.type),t.isEmptyFill=Be,t.isEmptyTick=Tc,t.isFontSettings=ca,t.isGlowEffect=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type),t.isIcon=fu,t.isIndividualPointFill=Ve,t.isLUT=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),t.isLinearGradientFill=nh,t.isNumericTickStrategy=t=>!(!t||"object"!=typeof t||!("type"in t)||"numeric-ticks"!==t.type),t.isPalettedFill=Ge,t.isPhongShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),t.isPixelatedPoints3D=pa,t.isRadialGradientFill=eh,t.isSeriesSupportedByZoomBandChart=t=>t instanceof OA||t instanceof eg||t instanceof ug||t instanceof KA||t instanceof Dg||t instanceof Pg||t instanceof Gg,t.isSimpleShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),t.isSolidFill=Oe,t.isSolidLine=eo,t.isTickStyle=Cc,t.isTimeTickStrategy=t=>!(!t||"object"!=typeof t||!("type"in t)||"time-ticks"!==t.type),t.isTriangulatedPoints3D=va,t.lightningChart=(t,i)=>{const s="object"==typeof t?t.license:t,e="object"==typeof t?t.licenseInformation:i,h="object"==typeof t?t:void 0,r=new yM;r.e=s;let n=PM.get(s||"E");return n||(n=((t,i)=>{let s,e,h=!1,r=!1,n=!1,o=!1,a="",l=!1,u=!1;try{if(fM){const e=(t=>{if(!t)return;const i=t.split("-");if(i.length>0)switch(i[0]){case"0001":return"0001";case"0002":return"0002";case"T001":return"T001";default:return}})(fM);if("0001"===e){vM=new Uint8Array([2]);const i=(t=>{if(!t)return;const i=t.split("-");return 4===i.length?i[1].startsWith("m")?2:1:0})(fM);if(1===i){const t=CM(fM);n=!t.PX,s=t,h=!0}else 2===i?(s=kM(fM,t),r=!0):(mM=!0,s=MM(fM),o=!0)}else if("0002"===e){const i=(t=>{if(!t)return;const i=t.split("-");return i.length>=2?Uint8Array.from(atob(i[1]),(t=>t.charCodeAt(0)))[0]:void 0})(fM);if(104===i)mM=!0,s=MM(fM),o=!0;else if(189===i){const t=CM(fM);n=!t.PX,s=t,h=!0}else 159===i?(s=kM(fM,t),r=!0):s={kX:dM(0,0,1,7,1,12,5)}}else if("T001"===e){const e=((t,i)=>{const s=t.split("-");if(3!==s.length)return{kX:dM(0,0,1,7,1,12,5)};const e=`${s[1]}`,h=Array.prototype.reduce.call(atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");if(!wM(e,h))return{kX:dM(0,0,1,7,1,12,5)};let r=0;const n=Uint8Array.from(atob(s[1]),(t=>t.charCodeAt(r))),o=n.subarray(r,r+=20),a=new DataView(n.buffer).getUint16(r,!0);r+=2;const l=Uint8Array.from(Array(a));for(let t=0;t<a;t+=1)l[t]=n[t+r]^o[t%o.byteLength];r=0;const u=new DataView(l.buffer),c=SM(l.subarray(r,r+=4)),d=dM(-3,0);if(!c)return{kX:dM(0,0,1,7,1,12,5)};if(c<d)return{kX:dM(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};const f=new Date,A=new Date;f.setDate(f.getDate()+1),A.setDate(A.getDate()-1);const g=bM(A),v=bM(f);if(c<g||c>v)return{kX:dM(0,0,1,2,1,3,1,4,5)};const y=u.getUint16(r,!0),m=l.subarray(r+=2,r+y);if(vM=new Uint8Array(m),i&&"dHJhZGVy"in i&&"dGVjaG5pY2FsIGFuYWx5c2lz"===i.dHJhZGVy)return{DX:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="};if(i&&"logoGraphic"in i&&i.logoGraphic){const t=i.logoGraphic.split("-");return 3===t.length&&wM(t[0],t[2])?{DX:t[0]}:{kX:dM(0,0,1,7,1,12,5)}}return{kX:dM(0,0,1,7,1,12,5)}})(fM,t);s=e;const r=e.DX;r&&i?("string"==typeof r&&(i.l=r),h=!0):s={kX:dM(0,0,1,7,1,12,5)}}else s={kX:dM(0,0,1,7,1,12,5)}}else{const t=/^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])|192\.168)\./;["localhost","127.0.0.1","::1"].includes(window.location.hostname)||t.test(window.location.hostname)?s={kX:dM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68),FX:dM(-2,2)}:window.location.host===cM.atob("c3RhY2tzbmlwcGV0cy5uZXQ=")?(u=!0,l=!1,vM=new Uint8Array([38]),s={}):(u=!0,l=!0,vM=new Uint8Array([38]),s={})}}catch(t){s={kX:dM(0,0,1,7,1,12,5)}}try{o&&(e=cM[dM(-1,34)][dM(-1,35)](dM(-1,39))||void 0)}catch(t){cM.console.error(t)}let c=!1;if(e){const t=e.split("-");if(2===t.length&&wM(t[0],t[1])){const[i,s]=t[0].split(":").map((t=>Number(t)));Date.now()-s<.95*i*1e3&&(c=!0)}}const d=!(u||l||s.kX||h||r||c),f=(()=>{const t=new(cM[dM(-1,0)]);return t.open(dM(0,26),dM(-2,0)),t.setRequestHeader(dM(-1,24),dM(-1,25)),t.withCredentials=!0,t})(),A=new Ze;if(d){let t;try{t=parseInt(fM?fM.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(i){t=Math.floor(1e6*Math.random())}const i=Math.floor(1e6*Math.random());a=(t^i).toString();const s={};let e="",h="",r="";fM=fM||"";const n=dM(-4,0);for(let t=0;t<fM.length;t+=1){const i=fM.charCodeAt(t)^n.charCodeAt(t);e+=String.fromCharCode(i)}const o=dM(-3,0);for(let t=0;t<o.length;t+=1)h+=String.fromCharCode(o.charCodeAt(t)^n.charCodeAt(t));for(let t=0;t<a.length;t+=1)r+=String.fromCharCode(a.charCodeAt(t)^n.charCodeAt(t));s[dM(-1,3)]=cM.btoa(e),s[dM(-1,4)]=cM.btoa(h),s.h=cM.btoa(r),s.v=3,s.s=cM[dM(-1,34)][dM(-1,35)](dM(-1,33))||void 0,f.send(JSON.stringify(s))}return(t,h)=>{const r=[],o={Mo:t=>{r.indexOf(t)>=0||(r.push(t),u())},_o:t=>A.on("logoChange",t),wo:t=>A.off(t)},u=()=>{r.forEach((t=>{const i=g(t);if(!i)return;const{BX:s,LX:e}=i,h=e?dM(-2,1):void 0,r=`${dM(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${s}${h?dM(0,1,63,1,64,1,59,1,65,1,41):""}`;TM(r,v,!1,h)}))},c=t=>t.toLowerCase().split("_").join(" "),g=t=>{var i;const s=null===(i=Object.entries(mc).find((i=>i[1]===t)))||void 0===i?void 0:i[0];if(s){switch(t){case mc.Ef:return AM.Lf||AM.Ef?void 0:{BX:c(s),LX:!0};case mc.Nf:return AM.Lf||AM.Nf?void 0:{BX:c(s),LX:!0};case mc.Gf:return AM.Lf||AM.Rf||AM.Gf?void 0:{BX:c(s)};case mc.Rf:return AM.Lf||AM.Rf?void 0:{BX:c(s)};case mc.jf:return AM.Lf||AM.Rf||AM.jf?void 0:{BX:c(s)};case mc.Zf:return AM.Lf||AM.Rf||AM.Zf?void 0:{BX:c(s)};case mc.qf:return AM.Lf||AM.Rf||AM.qf?void 0:{BX:c(s)};case mc.iA:return AM.Lf||AM.Rf||AM.iA?void 0:{BX:c(s)};case mc.sA:return AM.Lf||AM.Rf||AM.sA?void 0:{BX:c(s)};case mc.tA:return AM.Lf||AM.Rf||AM.tA?void 0:{BX:c(s)};case mc.Wf:return AM.Lf||AM.Rf||AM.Wf?void 0:{BX:c(s)};case mc.Xf:return AM.Lf||AM.Rf||AM.Xf?void 0:{BX:c(s)};case mc.Hf:return AM.Lf||AM.Rf||AM.Hf?void 0:{BX:c(s)};case mc.Qf:return AM.Lf||AM.Rf||AM.Qf?void 0:{BX:c(s)};case mc.Kf:return AM.Lf||AM.Rf||AM.Kf?void 0:{BX:c(s)};case mc.Jf:return AM.Lf||AM.Rf||AM.Jf?void 0:{BX:c(s)};case mc.Uf:return AM.Lf||AM.Rf||AM.Uf?void 0:{BX:c(s)};case mc.Yf:return AM.Lf||AM.Rf||AM.Yf?void 0:{BX:c(s)};case mc.$f:return AM.Lf||AM.Rf||AM.$f?void 0:{BX:c(s)};case mc.eA:return AM.Lf||AM.Rf||AM.eA?void 0:{BX:c(s)};case mc.Lf:case mc.Of:case mc.Vf:case mc.zf:return}return Cr(0,"")}},v=new wx(h,t,o);(null==s?void 0:s.kX)&&TM(s.kX,v,void 0,s.FX);const y=t=>{if("error"===(null==t?void 0:t.type)&&e){const t=e.split("-");if(2===t.length&&wM(t[0],t[1])){const[,i]=t[0].split(":").map((t=>Number(t))),s=Date.now();if(i+lM>s)return mM=!1,void FM(f,!1,m)}}if(f.readyState===cM[dM(-1,0)].DONE)if(200===f.status){const t=JSON.parse(f[dM(-1,23)]);if(!wM(a+dM(-3,0),t.h)){const t=dM(0,0,1,27,1,28,1,29,1,30,1,31,5);TM(t,v)}cM[dM(-1,34)][dM(-1,36)](dM(-1,39),t.t),cM[dM(-1,34)][dM(-1,36)](dM(-1,33),t.s),mM=!1}else{let i="";try{i=t&&"loadend"!==t.type?dM(0,0,1,23,1,32,1,24,5):JSON.parse(f[dM(-1,23)]).message,FM(f,!1,m)}catch(t){console.error(t)}TM(dM(0,0,1,2,1,7,1,12,5)+i,v)}},m=t=>{y(t)};if(FM(f,!0,m),d?setTimeout((()=>{if(mM){let t=!0;if(e){const i=e.split("-");if(2===i.length&&wM(i[0],i[1])){const[,s]=i[0].split(":").map((t=>Number(t))),e=Date.now();s+lM>e&&(t=!1)}}t&&TM(dM(0,25,1,23,1,32,1,24,5),v)}}),1e4):FM(f,!1,m),l){const t=(()=>{const t=new(cM[dM(-1,0)]);return t.open(dM(0,26),dM(1,0)),t.setRequestHeader("Content-Type","text/plain"),t.withCredentials=!0,t})(),s=Array.from({length:10},(()=>String.fromCharCode(Math.floor(256*Math.random())))).join(""),e=e=>{if("error"===(null==e?void 0:e.type)){const t=dM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);TM(t,v,!1,dM(-2,2)),FM(f,!1,h)}if(t.readyState===cM.XMLHttpRequest.DONE){const e=t.getResponseHeader("X-LCJS-SANDBOX-V");if(200!==t.status||e&&"1"!==e){const t=dM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);TM(t,v,!1,dM(-2,2)),FM(f,!1,h)}else{const e=JSON.parse(t.responseText);if(!wM(s,e.s)){const t=dM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);TM(t,v,!1,dM(-2,2)),FM(f,!1,h)}void 0!==i&&(i.l=e.l),A.emit("logoChange",e.l)}}else{const t=dM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);TM(t,v,!1,dM(-2,2)),FM(f,!1,h)}},h=t=>{e(t)};FM(t,!0,h),t.send(s),setTimeout((()=>{if(t.readyState<2){const t=dM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);TM(t,v,!1,dM(-2,2)),FM(f,!1,h)}}),1e4)}return n?(t=>{let i;mM=!1;const s=t.Hi(),e=()=>{i&&(t.ho(i.eo()),i=void 0),i=t.lP("deployment test"),i.An(t.ti).mr(dM(0,34,1,33)).dh({x:s.x/2,y:s.y/2}).il(50)._r(13).ah(new Ee({color:me(128,128,128,100)})).qa("Arial").el(500).setMouseInteractions(!1),t.qn().io()};t.oa((()=>{e()})),setTimeout(e,0),setInterval((()=>{i&&i.eo()<t.Xo()-1?e():i||e()}),1e3)})(v):f.readyState===cM[dM(-1,0)].DONE&&y(),v}})(e,r)),((t,i,s,e)=>{var h,r,n,o,a,l,u,c,d,f;let A;if(s&&s.license){const t=s.license.split("-");A=t[t.length-1]}const g=(null===(h=null==s?void 0:s.webgl)||void 0===h?void 0:h.version)||(null===(n=null===(r=null==s?void 0:s.sharedContextOptions)||void 0===r?void 0:r.webgl)||void 0===n?void 0:n.version),v={SO:null===(o=null==s?void 0:s.sharedContextOptions)||void 0===o?void 0:o.canvas,To:null==s?void 0:s.warnings,PO:"webgl1"===g?1:"webgl2"===g?2:void 0,kO:!1!==(null===(a=null==s?void 0:s.sharedContextOptions)||void 0===a?void 0:a.antialias),CO:(null===(l=null==s?void 0:s.sharedContextOptions)||void 0===l?void 0:l.devicePixelRatio)||void 0,NO:(null===(u=null==s?void 0:s.sharedContextOptions)||void 0===u?void 0:u.noCanvasStyles)||void 0,YO:(null===(c=null==s?void 0:s.sharedContextOptions)||void 0===c?void 0:c.noCanvasTransform)||void 0,FO:!1!==(null===(d=null==s?void 0:s.sharedContextOptions)||void 0===d?void 0:d.useStackingOrder),IO:!1!==(null===(f=null==s?void 0:s.sharedContextOptions)||void 0===f?void 0:f.useIndividualCanvas),GO:A||void 0},y=new Hp(v),m=i=>t(i,y);return{Dashboard:jp(m,i,s,e),ChartXY:Zp(m,i,s,e),Spider:Qp(m,i,s,e),Polar:Jp(m,i,s,e),Pie:Kp(m,i,s,e),UIPanel:Xp(m,i,s,e),Gauge:qp(m,i,s,e),Funnel:tS(m,i,s,e),Pyramid:iS(m,i,s,e),Chart3D:eS(m,i,s,e),Map:sS(m,i,s,e),DataGrid:hS(m,i,s,e),BarChart:rS(m,i,s,e),ZoomBandChart:nS(m,i,s,e),TreeMapChart:oS(m,i,s,e),dispose:y.Bt.bind(y),layout:y.ZO.bind(y)}})(n,r.e,h,r.l)},t.onScreenMenuControlBaseHeight=Ro,t.onScreenMenuControlBaseWidth=Eo,t.onScreenMenuControlOpacity=Oo,t.onScreenMenuDefaultButtonShape=Vo,t.onScreenMenuSpriteURL=zo,t.regularColorSteps=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))},t.saveToFile=nd,t.synchronizeAxisIntervals=vh,t.translatePoint=Ah,t.translatePoint3D=gh,t.transparentFill=Bo,t.transparentLine=Lo,t.uint32ColorFromObject=t=>we(255*t.r,255*t.g,255*t.b,255*t.a),t.uint32ColorFromRGBA=we,t.vec3Utils=Er,t.xDimensionStrategy=bc,t.yDimensionStrategy=xc,Object.defineProperty(t,"RX",{value:!0}),t}({});
