/* LightningChart JS v5.2.1 */
import*as t from"immutable";import{Record as i}from"immutable";import{Eventer as s}from"@arction/eventer";import e from"earcut";class h{constructor(){this.i=!0}o(){return this.i}}class r extends h{constructor(t,i){super(),this.u=t,this.i=i}S(t){return t!==this.u&&(this.u=t,this.i=!0),this}M(){return this.u}o(){return super.o()}}const n=(t,i)=>({x:t,y:i}),o=(t,i)=>({x:t,y:i}),a=(t,i,s)=>({position:t,high:i,low:s}),l=(t,i,s)=>({x:t,y:i,z:s}),u=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(n(t.position,t.high)),s.push(n(t.position,t.low))})),[i,s]},c=(t,i)=>({min:t,max:i}),d=(t,i,s,e)=>({x:Math.ceil(t),y:Math.ceil(i),width:Math.ceil(s),height:Math.ceil(e)}),f=(t,i=!0)=>new r(t,i),A=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),g=A,m=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom}),y=i({type:"color",r:1,g:1,b:1,a:1});class p extends y{constructor(t){super(t)}toUint32(){return void 0!==this._||(this._=I(this.getR(),this.getG(),this.getB(),this.getA())),this._}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.C||(this.C=new p({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.C}getLighter(){return this.T||(this.T=new p({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.T}getDarker(){return this.F||(this.F=new p({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.F}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const S=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),v=(t,i,s,e=255)=>new p({r:t/255,g:i/255,b:s/255,a:e/255}),b=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new p({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new p({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new p({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new p({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},x=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),u=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=u,r=a;break;case 1:e=l,h=s,r=a;break;case 2:e=a,h=s,r=u;break;case 3:e=a,h=l,r=s;break;case 4:e=u,h=a,r=s;break;default:e=s,h=a,r=l}return new p({r:e,g:h,b:r})},M=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return v(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return v(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=w(i[0],i[1],i[2]);return v(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?b(t):b(k(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),b("#fff")},_=t=>v(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),w=(t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]},C={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},k=t=>{const i=C[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)},T=new p({}),F=v(0,0,0,0),I=(t,i,s,e=255)=>(e<<24|s<<16|i<<8|t)>>>0,P=t=>I(255*t.r,255*t.g,255*t.b,255*t.a),D=(t,i)=>t.value-i.value,B=i({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:v(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),L=t=>{const{steps:i}=t,s=i.length;i.sort(D);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class R extends B{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,L(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(L({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const i=t,s=i.length,e=i[0].length,h=[...Array(s)].map((()=>Array(e)));for(let t=0;t<s;t+=1)for(let s=0;s<e;s+=1)h[t][s]=this.I(i[t][s]);return h}const i=t,s=i.length,e=Array(s);for(let t=0;t<s;t+=1)e[t]=this.I(i[t]);return e}return this.I(t)}I(t){const{steps:i}=this,s=i.length;if(0===s)return this.getFallbackColor();if(1===s)return i[0].color||this.color;if(this.interpolate){for(let n=0;n<s-1;n+=1){const s=i[n],o=i[n+1],a=Math.min(s.value,o.value),l=Math.max(s.value,o.value);if(t>=a&&t<=l){if(a===l)return s.color;const i=(t-s.value)/(o.value-s.value);return e=s.color,h=o.color,r=i,new p({r:e.r+(h.r-e.r)*r,g:e.g+(h.g-e.g)*r,b:e.b+(h.b-e.b)*r,a:e.a+(h.a-e.a)*r})}}return t<i[0].value?i[0].color:i[s-1].color}var e,h,r;for(let e=s-1;e>=0;e-=1)if(t>=i[e].value)return i[e].color;return i[0].color}}const E=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),z=i({type:"fillstyle",fillType:"empty"});class V extends z{toString(){return"emptyFill"}}const O=new V,N=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),G=i({type:"fillstyle",fillType:"solid",color:v(255,255,255)});class W extends G{}class U extends W{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return S(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const Y=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class H extends W{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return S(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const $=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),X=i({type:"fillstyle",fillType:"palette",lut:new R({steps:[]}),lookUpProperty:"value"});class j extends X{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const Z=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType),Q={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=oi(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class J{constructor(t,i,e,h=Q.linear,r){this.delta=0,this.nextAnimations=new Array,this.P=!1,this.easing=Q.linear,this.D=new s,this.isOver=()=>(this.delta===this.duration||this.P)&&0===this.nextAnimations.length,this.values=t,this.action=i,this.duration=e,this.easing=h,this.L=r,this.eases=t.map((([t,i])=>h(t,i,e)))}R(){this.D.emit("start")}start(){return this.L.includes(this)||this.L.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new J(t,i,s,e,this.L);return this.nextAnimations.push(h),h}onAnimationStart(t,i){return this.D.on("start",t,i)}onAnimationEnd(t,i){return this.D.on("end",t,i)}onEveryAnimationEnd(t,i){return this.D.on("everyEnd",t,i)}onAllAnimationEnd(t,i){return this.D.on("allEnd",t,i)}allOffAnimationEnd(){return this.D.topicOff("end"),this}allOffEveryAnimationEnd(){return this.D.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.D.topicOff("allEnd"),this}offAnimationEnd(t){return this.D.off(t,"end")}offEveryAnimationEnd(t){return this.D.off(t,"everyEnd")}offAllAnimationEnd(t){return this.D.off(t,"allEnd")}finish(t=!0){if(this.P=!0,this.L.splice(this.L.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&(this.D.listeners("allEnd").forEach(((t,s)=>i.onAllAnimationEnd(t,s))),this.D.listeners("everyEnd").forEach(((t,s)=>i.onEveryAnimationEnd(t,s)))),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.D.emit("end",i),this.D.emit("everyEnd",i)),i}t&&(this.D.emit("end",void 0),this.D.emit("everyEnd",void 0),this.D.emit("allEnd"))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(Pt):this.values.map(Pt)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}}const K=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.R(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=Tt.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=Q.linear)=>(h,r,o=t)=>{const a=new J(h,r,o,i,s).start();return e||(e=Tt.requestAnimationFrame(n)),a}};var q,tt;!function(t){t.circle="circle",t.ellipse="ellipse"}(q||(q={})),function(t){t.closestSide="closest-side",t.closestCorner="closest-corner",t.farthestSide="farthest-side",t.farthestCorner="farthest-corner"}(tt||(tt={}));const it=i({type:"fillstyle",fillType:"radial-gradient",stops:[{color:b("#f00"),offset:0},{color:b("#0f0"),offset:1}],position:n(.5,.5),shape:q.ellipse,extent:tt.farthestCorner});class st extends it{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const et=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),ht=i({type:"fillstyle",fillType:"linear-gradient",stops:[{color:b("#f00"),offset:0},{color:b("#0f0"),offset:1}],angle:0});class rt extends ht{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?bs(t):t)}getAngle(t){return t?vs(this.get("angle")):this.get("angle")}}const nt=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType),ot=i({type:"linestyle",lineType:"empty"}),at=new class extends ot{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}V(){return 0}setFillStyle(t){return this}getFillStyle(){return O}},lt=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType);class ut{constructor(t,i,e,h){this.cellIndex=t,this.cellSpan=i,this.cellsAmount=e,this.observedAmount=h,this.x=new ct,this.y=new ct,this.z=new ct,this.D=new s;const r={...t},n={...i};if(h){const t=t=>{this.cellsAmount.x=t.reduce(ji,0),this.cellIndex.x=t.reduce(((t,i,s)=>s>=r.x?t:t+i),0),this.cellSpan.x=t.reduce(((t,i,s)=>s>=r.x&&s<r.x+n.x?t+i:t),0),this.D.emit("cell-resize")},i=h.x.O(t);t(h.x.M());const s=t=>{this.cellsAmount.y=t.reduce(ji,0),this.cellIndex.y=t.reduce(((t,i,s)=>s>=r.y?t:t+i),0),this.cellSpan.y=t.reduce(((t,i,s)=>s>=r.y&&s<r.y+n.y?t+i:t),0),this.D.emit("cell-resize")},e=h.y.O(s);s(h.y.M()),this.N=()=>{h.x.G(i),h.y.G(e)}}}W(){return this.N&&(this.N(),this.N=void 0),this}U(t){return this.D.on("cell-resize",t)}Y(t){return this.D.off(t,"cell-resize")}}class ct extends h{constructor(){super(...arguments),this.H=0,this.$=10,this.X=1}j(){return this.i=!1,this}Z(){return this.i=!0,this}getInnerStart(){return this.H}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}J(t,i){return this.H=t,this.$=i,this.K(),this}q(t){return this.X=t,this.K(),this}tt(t){return t/this.X}K(){const t=this.tt(this.$-this.H),i=this.X;void 0!==this.it&&!1!==Lt(t,this.it)||(this.i=!0,this.st=i,this.it=t)}et(){return this.it}ht(){return this.st}rt(){return this.$<this.H}nt(t,i){return!0}}const dt={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).ot({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new ut({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},ft=(t,i,s)=>i===s?t:s.ut(i.ct(t)),At=(t,i,s)=>{if(i===s)return t;const e=i instanceof Ns?i.x:i.x instanceof Ns?i.x.x:i.x.dt,h=i instanceof Ns?i.y:i.y instanceof Ns?i.y.y:i.y.dt,r=s instanceof Ns?s.x:s.x instanceof Ns?s.x.x:s.x.dt,n=s instanceof Ns?s.y:s.y instanceof Ns?s.y.y:s.y.dt;return{...t,x:ft(t.x,e,r),y:ft(t.y,h,n)}},gt=(t,i,s)=>{if("axes"===i.id&&"world"===s.id)return i.chart.At.ft(t);if("world"===i.id&&"axes"===s.id)return i.chart.At.yt(t);if(i.id===s.id)return t;throw new Error("LC JS translatePoint3D misusage | originCoordinateSystem and targetCoordinateSystem arguments must be either Chart3D.coordsWorld or Chart3D.coordsAxis")},mt=(t,i,s)=>{const e=t(i,s);return t=>new U({color:e(t)})},yt=(t,i,s)=>{const e=t(i+1,s);return t=>new st({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},pt=(t,i,s,e)=>{const h=t(i+1,e);return t=>new rt({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},St=(...t)=>{if(0===t.length)return{remove:Bt};let i=!1;const s=t.map((s=>s.onIntervalChange(((e,h,r)=>((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.St(e,h,!1,s.getStopped(),"synchronizedAxis"))),i=!1)})(s,h,r)))));let e=!1;const h=t.map((i=>i.onStoppedStateChanged(((s,h)=>((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,h)))));return{remove:()=>{t.forEach(((t,i)=>{t.offIntervalChange(s[i]),t.offStoppedStateChanged(h[i])}))}}},vt=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))};class bt extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,bt.prototype)}}class xt extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&Tt.alert(e),Object.setPrototypeOf(this,xt.prototype)}}class Mt extends xt{constructor(t){super(t),Object.setPrototypeOf(this,Mt.prototype)}}var _t,wt,Ct,kt;!function(t){t[t.Content=0]="Content",t[t.PaddedContent=1]="PaddedContent",t[t.PaddedBackground=2]="PaddedBackground",t[t.Everything=3]="Everything"}(_t||(_t={})),function(t){t[t.never=0]="never",t[t.always=1]="always",t[t.whenHovered=2]="whenHovered",t[t.whenDragged=3]="whenDragged",t[t.whenNotDragged=4]="whenNotDragged",t[t.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(wt||(wt={})),function(t){t[t.notDraggable=0]="notDraggable",t[t.draggable=1]="draggable",t[t.onlyHorizontal=2]="onlyHorizontal",t[t.onlyVertical=3]="onlyVertical"}(Ct||(Ct={})),function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"}(kt||(kt={}));const Tt="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},Ft=(t,i)=>t.x===i.x&&t.y===i.y,It=t=>t!==Oi&&t!==Ni&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,Pt=t=>t[1],Dt=t=>t.dispose(),Bt=()=>{},Lt=(t,i)=>t===i,Rt=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Et=t=>Array.prototype.concat.apply([],t),zt=(t,i)=>void 0!==t?t:i,Vt=t=>t.vt(),Ot=t=>t.bt(),Nt=t=>t.xt(),Gt=t=>t.Mt(),Wt=t=>t.min.x,Ut=t=>t.max.x,Yt=t=>t.min.y,Ht=t=>t.max.y,$t=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},Xt=(t,i)=>t.position===i.position&&t.high===i.high&&t.low===i.low,jt=n(0,1),Zt=n(1,0),Qt=n(0,-1),Jt=n(-1,0),Kt=n(0,0),qt=t=>{switch(t){case kt.Up:return jt;case kt.Right:return Zt;case kt.Down:return Qt;case kt.Left:return Jt;default:return Kt}},ti=t=>t===kt.Left||t===kt.Right,ii=t=>{t.stopPropagation(),t.preventDefault()},si=(t,i)=>{if(!i)return t;const s=t.length,e=new Float32Array(2*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s);e[h+0]=r,e[h+1]=s-r,h+=2}return e},ei=(t,i)=>{if(!i){const i=t.length,s=new Float32Array(2*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,e+=2}return s}const s=t.length,e=new Float32Array(4*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,h+=4}return e},hi=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},ri=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},ni=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},oi=t=>{const i=Math.log(t);return t=>Math.log(t)/i},ai=oi(Math.E),li=(t,i)=>{const s=i[t];return s?s():void 0},ui=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>xs(fs(t,s))-xs(fs(i,s))))},ci=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},di=(t,i,s)=>s<0?t:s>1?i:v(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),t.getA()+s*(i.getA()-t.getA())),fi=t=>255===t.getA()?t:t.setA(255),Ai=(()=>{const t=v(0,0,0);return i=>(i=fi(i),new st({shape:q.circle,extent:tt.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:i},{offset:1,color:di(i,t,.5)}]}))})(),gi=(()=>{const t=t=>{var i;if(t){if(Y(t)){if(0===t.getColor().getA())return;return t.getColor()}if(et(t)||nt(t)){const s=t.getColorStops();return 3===s.length?s[1].color:null===(i=s[0])||void 0===i?void 0:i.color}Z(t)}};return(i,s,e,h)=>{const r=[];if(h.fill&&r.push(h.fill),h.fill2&&r.push(h.fill2),h.stroke){const t=h.stroke.getFillStyle();t!==O&&r.push(t)}if(h.point3D){const t=h.point3D;r.push(t.getFillStyle())}let n;if(h.behavior&&!0===h.behavior.colorStep){const[i,e]=r.reduce(((i,s)=>{if(i[0]&&i[1])return i;const e=t(s);return e&&(void 0===i[0]?i[0]=e:i[1]=e),i}),[void 0,void 0]);n=i&&e?(o=i)===(a=e)||o.getR()===a.getR()&&o.getG()===a.getG()&&o.getB()===a.getB()?Ai(o):(o=fi(o),a=fi(a),new rt({angle:0,stops:[{offset:0,color:a},{offset:.5,color:a},{offset:.5,color:o},{offset:1,color:o}]})):s.uiButtonFillStyle}else{const i=r.reduce(((i,s)=>i||t(s)),void 0);n=i?e?new U({color:i}):Ai(i):s.uiButtonFillStyle}var o,a;i.setButtonOnFillStyle(n)}})(),mi=t=>{const i=t;if(Z(i))return{lut:i.getPalette(),lookUpProperty:i.getLookUpProperty()}},yi=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},pi=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},Si=(t,i)=>"function"==typeof t?t(i):t,vi=t=>t.ctrlKey?Math.sign(t.deltaY)*Math.min(.05*Math.abs(t.deltaY),1):Math.sign(t.deltaY),bi=(t,i)=>i(),xi=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new U({color:v(255,255,255,1)});const Mi=t=>t===Gi||t.min.x===Gi.min.x&&t.max.x===Gi.max.x&&t.min.y===Gi.min.y&&t.max.y===Gi.max.y,_i=t=>Array.from(new Set(t)),wi=t=>t.filter((t=>void 0!==t)),Ci=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,ki=(t,i,s)=>{i.length<=0||(t.setText(s.label).setOn(i[0].getVisible()),s.style&&t.setButtonOnFillStyle(s.style),s.toggleVisibilityOnClick&&t.onSwitch(((t,s)=>i.forEach((t=>t.setVisible(s))))),t.onMouseEnter((()=>i.forEach((t=>t.setHighlight(!0))))),t.onMouseLeave((()=>i.forEach((t=>t.setHighlight(!1))))),i.forEach((i=>i.onMouseEnter((()=>t.setHighlight(!0))))),i.forEach((i=>i.onMouseLeave((()=>t.setHighlight(!1))))),i.forEach((i=>i.onTouchStart((()=>t.setHighlight(!0))))),i.forEach((i=>i.onTouchEnd((()=>t.setHighlight(!1))))))},Ti=(t,i)=>{throw new Error(i)},Fi=()=>{const t=K((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||Q.ease,l=(null==r?void 0:r.durationMs)||1e3;let u;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else u=t(l,a)([[s,e]],(([t])=>{h(t)})),i=u;u.onAnimationEnd((()=>{i=void 0})),n&&u.onAnimationStart(n),o&&u.onAnimationEnd(o)}},Ii=t=>{let i;return()=>i||(i=t(),i)},Pi=t=>{if(t===at)return 0;const i=t.getThickness();return i<0?1:1*i},Di=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(e.shouldCrash)throw Tt.alert(h),new Error(h);Tt.console.warn(h)},Bi=(t,i,s,e=0)=>{if(t<s(e)||s(i)<t)return;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e},Li=()=>{const t=new Map;return{_t:i=>(i.setMouseEnterEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.wt(i,s,e)})),i.setMouseLeaveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Ct(i,s,e)})),i.setMouseClickEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.kt(i,s,e)})),i.setMouseDoubleClickEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Tt(i,s,e)})),i.setMouseDownEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Ft(i,s,e)})),i.setMouseUpEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.It(i,s,e)})),i.setMouseMoveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Pt(i,s,e)})),i.setMouseDragEventHandler(((i,s,e,h,r,n)=>{const o=n&&t.get(n);o&&o.Dt(i,s,e,h,r,n)})),i.setMouseDragStartEventHandler(((i,s,e,h)=>{const r=h&&t.get(h);r&&r.Bt(i,s,e,h)})),i.setMouseDragStopEventHandler(((i,s,e,h,r)=>{const n=r&&t.get(r);n&&n.Lt(i,s,e,h,r)})),i.setMouseWheelEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Rt(i,s,e)})),i.setTouchStartEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Et(i,s,e)})),i.setTouchMoveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.zt(i,s,e)})),i.setTouchEndEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Vt(i,s,e)})),i),Ot:(i,s)=>{t.set(i,s)},Nt:()=>{t.clear()}}},Ri={left:0,right:0,top:0,bottom:0},Ei=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),zi=(t,i,s)=>{i&&i.Gt();const e=s();return{Wt:t,Gt:()=>{e.forEach((i=>t.Ut(i)))}}},Vi={add:(t,i)=>l(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>l(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>l(t.x*i,t.y*i,t.z*i),divide:(t,i)=>l(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>Vi.divide(t,Vi.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>l(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(Vi.dot(t,i)/(Vi.length(t)*Vi.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=Vi.dot(i,t),n=Vi.cross(i,t);return Vi.addVec(Vi.multiply(t,e),Vi.addVec(Vi.multiply(i,(1-e)*r),Vi.multiply(n,h)))},lerp:(t,i,s)=>(s=Rt(s,0,1),Vi.addVec(Vi.multiply(t,1-s),Vi.multiply(i,s))),equals:(t,i)=>Lt(t.x,i.x)&&Lt(t.y,i.y)&&Lt(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},Oi=Number.MAX_SAFE_INTEGER,Ni=-Number.MAX_SAFE_INTEGER,Gi=c(n(Oi,Oi),n(Ni,Ni)),Wi=c(l(Oi,Oi,Oi),l(Ni,Ni,Ni)),Ui=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},Yi=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),Hi=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),$i=(t,i)=>c(n(Math.max(Math.min(t[0].x,t[2].x),Math.min(i[0].x,i[2].x)),Math.max(Math.min(t[0].y,t[2].y),Math.min(i[0].y,i[2].y))),n(Math.min(Math.max(t[0].x,t[2].x),Math.max(i[0].x,i[2].x)),Math.min(Math.max(t[0].y,t[2].y),Math.max(i[0].y,i[2].y)))),Xi=t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(Yi(t[s],t[e]))return!0;return!1},ji=(t,i)=>i+t,Zi=(t,i,s)=>{const e=fs(i,t),h=e.x*e.x+e.y*e.y;if(0===h)return t;const r=fs(s,t),o=(r.x*e.x+r.y*e.y)/h;return o<=0?t:o>=1?i:n(t.x+o*e.x,t.y+o*e.y)},Qi=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,Ji=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},Ki=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},qi=(t,i,s)=>ds(t,cs(fs(i,t),s)),ts=(t,i,s)=>Vi.addVec(t,Vi.multiply(Vi.subtractVec(i,t),s));function is(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y;for(let n=0;n<i;n+=1){const i=t[n];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y)}return c(n(e,r),n(s,h))}return Gi}function ss(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,n=t[0].z,o=t[0].z;for(let a=0;a<i;a+=1){const i=t[a];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>n&&(n=i.z),i.z<o&&(o=i.z)}return c(l(e,r,o),l(s,h,n))}return Wi}const es=(...t)=>{const i={min:{x:Oi,y:Oi},max:{x:Ni,y:Ni}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},hs=(t,i)=>c(l(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),l(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function rs(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,l=(e.y-i.y)*h+(i.x-e.x)*r,u=o*(i.x-e.x)+n*(i.y-e.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}function ns(t,i,s){return n(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function os(t,i){return n(t.x-i.x,t.y-i.y)}function as(t){const i=us(t);return 0===i?n(0,0):n(t.x/i,t.y/i)}function ls(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=as(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function us(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function cs(t,i){return n(t.x*i,t.y*i)}function ds(t,i){return n(t.x+i.x,t.y+i.y)}function fs(t,i){return n(t.x-i.x,t.y-i.y)}function As(t,i){return n(t.x*i.x,t.y*i.y)}function gs(t,i){return n(t.x/i.x,t.y/i.y)}function ms(t){return cs(t,-1)}function ys(t,i){return t.x*i.x+t.y*i.y}const ps=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.y+(t-i.x)*e;return n(t,h)},Ss=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.x+(t-i.y)/e;return n(h,t)};function vs(t){return t*Math.PI/180}function bs(t){return 180*t/Math.PI}function xs(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function Ms(t){return n(Math.cos(t),Math.sin(t))}function _s(t){let i=-1;const s=Math.cos(t),e=Math.sin(t);return s>0&&s<1&&e>0&&e<1?i=1:s<0&&s>-1&&e>0&&e<1?i=2:s<0&&s>-1&&e<0&&e>-1?i=3:s>0&&s<1&&e<0&&e>-1&&(i=4),i}const ws=(t,i,s,e)=>{let h,r,o,a;if(i.x-t.x!=0||e.x-s.x!=0)return i.x-t.x==0?(o=i.x,r=(e.y-s.y)/(e.x-s.x),a=r*(o-s.x)+s.y):e.x-s.x==0?(o=e.x,h=(i.y-t.y)/(i.x-t.x),a=h*(o-t.x)+t.y):(h=(i.y-t.y)/(i.x-t.x),r=(e.y-s.y)/(e.x-s.x),o=(s.y-r*s.x+h*t.x-t.y)/(h-r),a=h*(o-t.x)+t.y),n(o,a)},Cs=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class ks{constructor(){this.Yt=!0}getInnerStart(){return this.H}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.$-this.H)}J(t,i){return this.Yt=t!==this.H||i!==this.$,this.H=t,this.$=i,this}j(){return this.Yt=!1,this}Z(){return this.Yt=!0,this}}class Ts extends ks{constructor(t,i,s,e){if(super(),this.Ht=!0,this.$t=!0,this.Xt=[0,0],this.jt=!0,this.Zt=t,this.Qt=i,this.Jt=s,this.Kt=t,this.qt=i,e){const t=e.O(this.ti.bind(this));this.ti(e.M()),this.ii=()=>e.G(t)}}q(t){return this.X=t,this.$t=!0,this}si(t){return this.Xt=t.map(Math.abs),this.jt=!0,this}ei(){return this.Zt/this.Jt*this.X+this.Xt[0]}hi(){return(this.Zt+this.Qt)/this.Jt*this.X-this.Xt[1]}ri(){return this.getCellSize()-this.ni()}oi(){return this.X}getCellSize(){return this.ai(this.X)}ni(){return this.Xt[0]+this.Xt[1]}li(){return this.Xt}ti(t){this.Jt=t.reduce(ji,0),this.Zt=t.reduce(((t,i,s)=>s>=this.Kt?t:t+i),0),this.Qt=t.reduce(((t,i,s)=>s>=this.Kt&&s<this.Kt+this.qt?t+i:t),0),this.Ht=!0,this.ui()}ai(t){return t*this.Qt/this.Jt}j(){return super.j(),this.$t=!1,this.jt=!1,this.Ht=!1,this}Z(){return super.Z(),this.$t=!0,this.jt=!0,this.Ht=!0,this}}class Fs extends Ts{constructor(t,i,s,e){super(t,i,s,e),this.ci={internal:10,function:Is(10),number:10},this.X=1e3,this.J(1,1e3),this.di=this.fi()}nt(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<Ds,n=Math.max(t,i)>Bs;return!r&&!n||!!h&&(i>t?{start:r?Ds:t,end:n?Bs:i}:{start:n?Bs:t,end:r?Ds:i})}ct(t){const i=this.ei(),s=this.hi(),e=Math.max(t,Ds);return i+(this.ci.function(e)-this.di.scaleStartLog)/this.di.scaleIntervalLog*(s-i)}ut(t){const i=this.ei(),s=(t-i)/(this.hi()-i),e=this.di.scaleStartLog+s*this.di.scaleIntervalLog;return this.ci.number**e}ui(){this.ci&&this.fi()}J(t,i){return super.J(t,i),this.ci&&this.fi(),this}si(t){return super.si(t),this.ci&&this.fi(),this}q(t){return super.q(t),this.ci&&this.fi(),this}Ai(t){return this.ci={internal:t,function:Is(t),number:Ps(t)},this}gi(){return this.ci.internal}mi(t,i){const s=this.ct(t)+i;return this.ut(s)}yi(){return this.$t||this.Yt||this.jt||this.Ht}fi(){const t=this.ci.function(this.H),i=this.ci.function(this.$)-t,s=2*this.ei()/this.X-1,e=2*this.hi()/this.X-1-s;return this.di={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.di}pi(){return this.di}}const Is=t=>"e"===t?ai:oi(t),Ps=t=>"e"===t?Math.E:t,Ds=.9*10**-4,Bs=1.1*10**25,Ls=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],Rs=(t,i,s)=>{const e=Math.abs(s-i),h=Math.max(2-Ui(e,10),0);return t.toFixed(h)},Es={Numeric:(t,i)=>Rs(t,i.getInnerStart(),i.getInnerEnd()),NumericUnits:(t,i)=>{const s=Math.abs(i.getInnerEnd()-i.getInnerStart()),e=t<0;t=Math.abs(t);let h="",r="";if(s>=1e3&&t>1e3){let i="";for(const s of Ls){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),r=s.prefix;break}}h=(e?"-":"")+i}else{let i=String(Math.floor(t));const r=Ui(t,1e3);for(let t=1;t<=r;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}h=(e?"-":"")+i+(s<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-Ui(s,10)):"")}return h+=r,h},LogarithmicExponentsRounded:(t,i,s,e=10)=>{const h=Is(e)(t);return`${e}${zs(h)}`},LogarithmicExponents:(t,i,s,e=10)=>{const h=Is(e),r=Math.floor(h(t)),n=t/Ps(e)**r;return`${Math.round(n)}×${e}${zs(r)}`},LogarithmicExtreme:(t,i,s,e=10)=>{const h=Is(e),r=Math.floor(h(t));return`${(t/Ps(e)**r).toFixed(2)}×${e}${zs(r)}`},LogarithmicNoExponents:(t,i,s,e=10)=>{const h=Is(e);if("e"===e)return`${Math.floor(h(t))}e`;const r=t.toString();if(t>1)return r;const n=Math.floor(h(t));return t.toFixed(Math.abs(n))}},zs=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}})).join("");class Vs extends Ts{constructor(t,i,s,e){super(t,i,s,e),this.Si=!1,this.vi=!1,this.bi=0,this.X=1e3,this.J(0,10),this.K()}yi(){return this.vi}nt(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.Si){const s=((t,i,s)=>{const e=((t,i)=>{if(i<Oi&&i>Ni&&t<Oi&&t>Ni){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s})(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(h?o/2:r/2)*(t>i?-1:1);return{start:a-l,end:a+l}}ui(){this.K()}ct(t){return this.ei()+(t-this.H)/(this.$-this.H)*(this.hi()-this.ei())}ut(t){return this.H+(t-this.ei())/(this.hi()-this.ei())*(this.$-this.H)}J(t,i){return super.J(t,i),this.K(),this}si(t){return super.si(t),this.K(),this}q(t){return super.q(t),this.xi=Os(this.$-this.H,this.Xt,this.X,this.Qt,this.Jt),this.K(),this}Mi(){return this.Si=!0,this}_i(){return this.Si}wi(){return Math.abs(this.Ci)}ki(){return this.wi()/this.xi}Ti(){return this.Fi}Ii(){return this.Pi}getPixelSize(){return this.xi}pi(){return this.di}Z(){return super.Z(),this.vi=!0,this}j(){return super.j(),this.vi=!1,this}Di(t,i=Es.Numeric){return i(t,this)}Bi(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Li(t){return Os(t,this.Xt,this.X,this.Qt,this.Jt)}K(){let t=this.H,i=this.$,s=0;this.Si&&(t=0,i=this.$-this.H,s=this.H);const e=i-t,h=Os(e,this.Xt,this.X,this.Qt,this.Jt);this.Pi=t-this.Xt[0]*h,this.Fi=i+this.Xt[1]*h;const r=this.Fi-this.Pi,n=r-this.Ci,o=Math.abs(n/h),a=e-this.bi,l=Math.abs(a/h);(!this.di||o>=.4||l>=.4)&&(this.bi=e,this.Ci=r,this.xi=h,this.vi=!0);const u=this.Ci*this.Jt/(2*this.Qt),c=-(this.Pi-this.Ci*this.Zt/this.Qt)-u,d=2*this.ei()/this.X-1,f=2*this.hi()/this.X-1-d;this.di={displacement:c,scaling:u,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}mi(t,i){return t+this.xi*i}}const Os=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class Ns{Ri(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}j(){return this.x.j(),this.y.j(),this}Z(){return this.x.Z(),this.y.Z(),this}q(t,i){return"object"==typeof t?(this.x.q(t.x),this.y.q(t.y)):(this.x.q(t),this.y.q(i)),this}oi(){return n(this.x.oi(),this.y.oi())}Ei(t){return this.x.si(t),this}zi(t){return this.y.si(t),this}ni(){return n(this.x.ni(),this.y.ni())}Vi(t,i){return this.x.J(t,i),this}Oi(t,i){return this.y.J(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.ni(),y:i-this.y.ni()}}Ni(){return this.x.yi()||this.y.yi()}}class Gs extends Ns{constructor(){super(...arguments),this.Gi="LinearScaleXY"}ot(t,i,s,e){return this.x=new Vs(t.x,i.x,s.x,e?e.x:void 0),this.y=new Vs(t.y,i.y,s.y,e?e.y:void 0),this}_i(){return this.x._i()||this.y._i()}Wi(){return n(this.x.getPixelSize(),this.y.getPixelSize())}pi(){return{x:this.x.pi(),y:this.y.pi()}}mi(t,i){const s=this.Wi();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Ui(t,i,s,e){const h=this.Wi(),r=ls(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class Ws extends Ns{constructor(){super(...arguments),this.Gi="MixedScaleXY"}_i(){return!1}mi(t,i){const s=this.x.ct(t.x),e=this.y.ct(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.ut(h.x),y:this.y.ut(h.y)}}Ui(t,i,s,e){const h={x:this.x.ct(t.x),y:this.y.ct(t.y)},r={x:this.x.ct(i.x),y:this.y.ct(i.y)},n=as(fs(r,h)),o=ls(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.ut(a.x),y:this.y.ut(a.y)}}pi(){const t=this.x.pi(),i=this.y.pi();return{uScaleStart:[this.x.H,this.y.H],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const Us=(t,i)=>t instanceof Fs||i instanceof Fs?(new Ws).Ri(t,i):(new Gs).Ri(t,i),Ys=t=>"client"===t,Hs=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),$s=t=>"relative"===t,Xs=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y);var js;!function(t){t[t.noHighlighting=0]="noHighlighting",t[t.onHover=1]="onHover"}(js||(js={}));class Zs{constructor(t,i,e,h){this.Yi=!0,this.Hi=js.onHover,this.$i=!1,this.Xi=!0,this.ji=!1,this.D=new s,this.Zi=[],this.Qi=[],this.onMouseEnter=t=>this.D.on("mouseEnter",t),this.onMouseLeave=t=>this.D.on("mouseLeave",t),this.onMouseClick=t=>this.D.on("mouseClick",t),this.onMouseDoubleClick=t=>this.D.on("mouseDoubleClick",t),this.onMouseDown=t=>this.D.on("mouseDown",t),this.onMouseUp=t=>this.D.on("mouseUp",t),this.onMouseMove=t=>this.D.on("mouseMove",t),this.offMouseEnter=t=>this.D.off(t,"mouseEnter"),this.offMouseLeave=t=>this.D.off(t,"mouseLeave"),this.offMouseClick=t=>this.D.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.D.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.D.off(t,"mouseDown"),this.offMouseUp=t=>this.D.off(t,"mouseUp"),this.offMouseMove=t=>this.D.off(t,"mouseMove"),this.offMouseDragStart=t=>this.D.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.D.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.D.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.D.off(t,"mouseWheel"),this.wt=(t,i,s)=>{this.D.emit("mouseEnter",this,i),this.ji=!0,this.Hi===js.onHover&&this.setHighlight(!0)},this.Ct=(t,i,s)=>{this.D.emit("mouseLeave",this,i),this.ji=!1,this.Hi===js.onHover&&this.setHighlight(!1)},this.Pt=(t,i,s)=>{this.D.emit("mouseMove",this,i)},this.kt=(t,i,s)=>this.D.emit("mouseClick",this,i),this.Tt=(t,i,s)=>this.D.emit("mouseDoubleClick",this,i),this.Ft=(t,i,s)=>this.D.emit("mouseDown",this,i),this.It=(t,i,s)=>this.D.emit("mouseUp",this,i),this.Bt=(t,i,s,e)=>{this.D.emit("mouseDragStart",this,i,s)},this.Dt=(t,i,s,e,h,r)=>{this.D.emit("mouseDrag",this,i,s,e,h)},this.Lt=(t,i,s,e,h)=>{this.D.emit("mouseDragStop",this,i,s,e)},this.Rt=(t,i,s)=>{this.D.emit("mouseWheel",this,i)},this.Et=(t,i,s)=>{this.D.emit("touchStart",this,i),this.ji=!0,this.Hi===js.onHover&&this.setHighlight(!0)},this.zt=(t,i,s)=>{this.D.emit("touchMove",this,i)},this.Vt=(t,i,s)=>{this.D.emit("touchEnd",this,i),this.ji=!1,this.Hi===js.onHover&&this.setHighlight(!1)},this.Ji=t,this.Ki=i,this.qi=e,this.ts=new Map,this.ss=h,this.es=this.ss.hs(this,{rs:{themeEffectEnabled:this.qi.effectsText},ns:{}}),this.Ji.us.ls.os(this,(t=>{this.ts.forEach(((i,s)=>s.cs(t))),this.Qi.forEach((i=>i.setHighlight(t))),this.Zi.forEach((i=>i.cs(t)))}),{animationEnabled:this.Ji.getAnimationsEnabled()})}ds(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.isText)&&i.isText;this.ts.set(t,{isText:e});const h=Array.from(this.ts);this.es.rs.fs(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.es.ns.fs(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setMouseInteractions(this.Yi).setVisible(this.Xi).cs(this.Ji.us.ls.As(this,!0)),s&&t.setMouseEnterEventHandler(this.wt).setMouseLeaveEventHandler(this.Ct).setMouseClickEventHandler(this.kt).setMouseDoubleClickEventHandler(this.Tt).setMouseDownEventHandler(this.Ft).setMouseUpEventHandler(this.It).setMouseMoveEventHandler(this.Pt).setMouseDragStartEventHandler(this.Bt).setMouseDragEventHandler(this.Dt).setMouseDragStopEventHandler(this.Lt).setMouseWheelEventHandler(this.Rt).setTouchStartEventHandler(this.Et).setTouchMoveEventHandler(this.zt).setTouchEndEventHandler(this.Vt);const r=t.onDispose((()=>{t.offDispose(r),this.ts.delete(t)}))}gs(t){this.Zi=t;const i=this.Ji.us.ls.As(this,!0);t.forEach((t=>{t.cs(i).ys(this.Xi)}))}setEffect(t){return this.es.rs.ps(t&&this.qi.effectsText),this.es.ns.ps(t),this.Ji.us.Ss(),this}getEffect(){return this.es.rs.vs()||this.es.ns.vs()}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}setIcon(t){return this.bs=t,this.Ji.us.Ss(),this}getIcon(){return this.bs}setName(t){return this.xs=t,this.Qi.forEach((t=>t.setText(this.xs))),this}getName(){return this.xs}dispose(){return this.$i||(this.$i=!0,this.ts.forEach(((t,i)=>i.dispose())),this.Ki(this),this.Qi.forEach((t=>{t.dispose()})),this.Qi.length=0,this.D.emit("dispose",this),this.Ji.us.Ss()),this}setVisible(t){return t===this.Xi||(this.Xi=t,this.ts.forEach(((i,s)=>s.setVisible(t))),this.Zi.forEach((i=>i.ys(t))),this.Qi.forEach((i=>i.setOn(t))),this.D.emit("visibleStateChanged",this,this.Xi),this.Ji.us.Ss()),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}setHighlight(t){return this.Ji.us.ls.Ms(this,t),this.D.emit("highlight",this,t),this}getHighlight(){return this.Ji.us.ls.As(this)}setAnimationHighlight(t){return this.Ji.us.ls._s(this,t),this}getAnimationHighlight(){return this.Ji.us.ls.ws(this)}setMouseInteractions(t){return this.Yi=t,this.ts.forEach(((i,s)=>s.setMouseInteractions(t))),this.Ji.us.Ss(),this}getMouseInteractions(){return this.Yi}getIsUnderMouse(){return this.ji}setHighlightOnHover(t){return this.Hi=t?js.onHover:js.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Hi!==js.noHighlighting}attach(t,i=!0,s=!1){return ki(t,[this],{toggleVisibilityOnClick:i,label:this.xs,style:void 0}),this.Qi.push(t),t.onDispose((()=>{const i=this.Qi.indexOf(t);i>=0&&this.Qi.splice(i,1)})),this}Cs(){return this.bs}onMouseDragStart(t){return this.D.on("mouseDragStart",t)}onMouseDrag(t){return this.D.on("mouseDrag",t)}onMouseDragStop(t){return this.D.on("mouseDragStop",t)}onMouseWheel(t){return this.D.on("mouseWheel",t)}onTouchStart(t){return this.D.on("touchStart",t)}onTouchMove(t){return this.D.on("touchMove",t)}onTouchEnd(t){return this.D.on("touchEnd",t)}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offTouchStart(t){return this.D.off(t,"touchStart")}offTouchMove(t){return this.D.off(t,"touchMove")}offTouchEnd(t){return this.D.off(t,"touchEnd")}offDispose(t){return this.D.off(t,"dispose")}}class Qs extends Zs{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.ks=t,this.axis=e,this.dt=h,this.Ts=r,this.Fs()}}const Js=t=>{const i=t.length;if(i>0){let s=0,e=0;for(let h=0;h<i;h+=1)s+=t[h].x,e+=t[h].y;return n(s/i,e/i)}return n(0,0)},Ks=(...t)=>{const i=t.length,s=new Array(i).fill(!1),e=(e,h)=>{for(let r=0;r<i;r+=1){const i=t[r],n=i.Is(e,h);n?i.Ps(e,h,!0):s[r]&&s[r]&&i.Ps(e,h,!1),s[r]=n}return!1};return{onTouchStart:e,onTouchMove:e,onTouchEnd:e}},qs=class{constructor(t,i=300){this.Ds=!1,this.Bs=[],this.Ls=300,this.Rs=t,this.Ls=i}Is(t,i){const s=Tt.performance.now();let e=!1;for(let t=0;t<this.Bs.length;t+=1)s-this.Bs[t].time>=this.Ls?(this.Bs.splice(t,1),t-=1):this.Bs[t].state&&(e=!0);return this.Ds?0===i.interactions.length&&(this.Bs.push({state:!1,time:s}),this.Ds=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Bs.push({state:!0,time:s}),e=!0,this.Ds=!0),e}Ps(t,i,s){if(s){const s=this.Bs.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=2&&s.off>=1&&(this.Rs(t,i),this.Bs.length=0)}}},te=class{constructor(t,i,s,e=1,h=100){this.Es=t,this.zs=i,this.Vs=s,this.Os=e,this.Ns=h}Is(t,i){const s=i.interactions.length;if(s===this.Os){if(void 0!==this.Gs)return!0;if("pointerdown"===i.type&&(1===s||(t=>{const i=t.length;if(i>0){const s=Js(t);let e=0;for(let h=0;h<i;h+=1)e=Math.max(e,Ji(s,n(t[h].x,t[h].y)));return e}return Oi})(i.interactions)<=this.Ns))return this.Gs=Js(i.interactions),!0}return!1}Ps(t,i,s){const e=this.Ws;if(!s||i.forceTouchEnd||"pointerup"===i.type)this.Vs&&this.Vs(t,this.Gs,e,i),this.Gs=void 0,this.Ws=void 0;else{const s=Js(i.interactions);"pointerdown"===i.type?this.Es&&this.Es(t,this.Gs,i):"pointermove"===i.type&&this.zs&&this.zs(t,this.Gs,s,n(s.x-e.x,e.y-s.y),i),this.Ws=s}}},ie=class{constructor(t,i,s){this.Us=!1,this.Es=t,this.zs=i,this.Vs=s}Is(t,i){return this.Us?2!==i.interactions.length&&(this.Us=!1):2===i.interactions.length&&"pointerdown"===i.type&&(this.Us=!0),this.Us}Ps(t,i,s){let e,h;if(s&&"pointerup"!==i.type){if("pointerdown"===i.type){const s=i.interactions;e=s[0],h=s[1],this.Es(t,e,h,i)}else if("pointermove"===i.type){e=i.interactions[0],h=i.interactions[1];const s=this.Ys,r=this.Hs,o=n(e.x-s.x,s.y-e.y),a=n(h.x-r.x,r.y-h.y);this.zs(t,e,h,o,a,i)}}else{const s=i.interactions;this.Vs(t,s[0],s[1],i)}this.Ys=e,this.Hs=h}},se=i({type:"linestyle",lineType:"solid",fillStyle:new U({color:v(255,255,255)}),thickness:1});class ee extends se{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}V(){const t=this.getThickness();return t<0?1:t}}const he=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType);class re{constructor(t,i){this.$s=t,this.Xs=i,this.js=i.rows*Re,this.Zs=i.columns*Ee}}var ne,oe;!function(t){t[t.ZoomIn=0]="ZoomIn",t[t.ZoomInX=1]="ZoomInX",t[t.ZoomInY=2]="ZoomInY",t[t.ZoomOut=3]="ZoomOut",t[t.ZoomOutX=4]="ZoomOutX",t[t.ZoomOutY=5]="ZoomOutY",t[t.ZoomToFit=6]="ZoomToFit",t[t.ToggleAnimations=7]="ToggleAnimations"}(ne||(ne={})),function(t){t[t.Circle=0]="Circle",t[t.Rectangle=1]="Rectangle",t[t.RoundedRectangle=2]="RoundedRectangle"}(oe||(oe={}));const ae={x:-43,y:0},le={x:-65,y:0},ue={x:-86,y:0},ce={x:-107,y:-1},de={x:-128,y:-3},fe={x:-150,y:0},Ae={x:-171,y:0},ge={x:-276,y:0},me={x:-298,y:0},ye={x:0,y:0},pe={x:-21,y:0};class Se extends re{constructor(t,i,s,e){super(t,s),this.Qs=Tt.document.createElement("button"),this.Js=Tt.document.createElement("div"),this.Ks=Tt.document.createElement("label"),this.Xs=s,this.qs=i,this.Ji=e}te(t,i,s,e){this.ie(t,e),this.se(),this.ee(i),this.he(),this.Ks.textContent=s||"";const h=Tt.document.createElement("div");this.re(h),this.Qs.onclick=this.onClick.bind(this),h.appendChild(this.Js),h.appendChild(this.Ks),this.Qs.appendChild(h)}he(){this.Qs.style.cursor="pointer"}re(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}ee(t){"string"==typeof t?(this.Js.style.backgroundImage=`url(${t})`,this.Js.style.backgroundSize="100%",this.Js.style.backgroundRepeat="no-repeat",this.Js.style.backgroundPosition="center",this.Js.style.width="20px",this.Js.style.height="20px"):this.applyStyleForSprite(t),this.Js.style.margin="auto"}se(){switch(this.qs){case oe.RoundedRectangle:this.Qs.style.borderRadius="10px";break;case oe.Rectangle:this.Qs.style.borderRadius="0px";break;case oe.Circle:default:this.Qs.style.borderRadius="31px"}}ie(t,i){this.Qs.style.width=`${this.Zs.toString()}px`,this.Qs.style.height=`${this.js.toString()}px`,this.Qs.style.backgroundColor=t,this.Qs.style.opacity=i||ze,this.Qs.style.alignItems="center",this.Qs.style.border="2px solid #707070",this.Qs.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.Js.style.backgroundImage=`url(${this.$s}/${Ve})`,this.Js.style.backgroundPositionX=`${t.x}px`,this.Js.style.backgroundPositionY=`${t.y}px`,this.Js.style.backgroundSize="1600%",this.Js.style.backgroundRepeat="no-repeat",this.Js.style.width="20px",this.Js.style.height="20px"}ne(t){return t.appendChild(this.Qs),t}oe(){return this.Qs}}class ve extends Se{constructor(t,i,s,e){super(t,i,s,e),this.ae="",this.le="",this.ue=!1,this.Ji=e}ce(){this.de(),this.onToggledStateAction()}fe(){this.Ae(),this.onInitialStateAction()}Ae(){this.ge(this.ae)}de(){this.ge(this.le)}ge(t){"string"==typeof t?this.Js.style.background=t:(this.Js.style.backgroundImage=`url(${this.$s}/${Ve})`,this.Js.style.backgroundPositionX=`${t.x}px`,this.Js.style.backgroundPositionY=`${t.y}px`)}onClick(){this.ue?this.fe():this.ce(),this.ue=!this.ue}}class be extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.te(e.onScreenMenuBackgroundColor.toRGBAString(),ae)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:-1,y:-1})}}class xe extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.te(e.onScreenMenuBackgroundColor.toRGBAString(),ce)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:-1,y:0})}}class Me extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.te(e.onScreenMenuBackgroundColor.toRGBAString(),fe)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:0,y:-1})}}class _e extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.te(e.onScreenMenuBackgroundColor.toRGBAString(),le)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:1,y:1})}}class we extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.te(e.onScreenMenuBackgroundColor.toRGBAString(),de)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:1,y:0})}}class Ce extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.te(e.onScreenMenuBackgroundColor.toRGBAString(),Ae)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:0,y:1})}}class ke extends ve{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.ae=ge,this.le=me,this.te(e.onScreenMenuBackgroundColor.toRGBAString(),this.ae)}onToggledStateAction(){this.Ji.setAnimationsEnabled(!1)}onInitialStateAction(){this.Ji.setAnimationsEnabled(!0)}}class Te extends Se{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ji=i;const e=this.Ji.getTheme();this.te(e.onScreenMenuBackgroundColor.toRGBAString(),ue)}onClick(){this.Ji.forEachAxis((t=>{t.fit(!0)}))}}class Fe extends Se{constructor(t,i,s){super(t,i.shape||Oe,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.te(h,r,n,o),this.ye=i.action}onClick(){this.ye(this.Ji)}}class Ie extends ve{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.Ji=s,this.pe=e,this.ae=pe,this.le=ye,this.te(Ne,this.ae)}Ae(){this.ge(this.ae),this.Qs.style.backgroundColor=Ne,this.Qs.style.border="2px solid #707070",this.Qs.style.margin="0px"}de(){this.ge(this.le),this.Qs.style.background="#FECC00 0% 0% no-repeat padding-box",this.Qs.style.border="10px solid #BCBCBC12",this.Qs.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.pe)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.pe)||void 0===t||t.style.setProperty("display","none")}}var Pe;!function(t){t.Move="move",t.ResizeColumn="col-resize",t.ResizeRow="row-resize",t.Horizontal="ew-resize",t.Vertical="ns-resize",t.NorthWest="nw-resize",t.NorthEast="ne-resize",t.Copy="copy",t.CrossHair="crosshair",t.Default="default",t.Help="help",t.Restricted="not-allowed",t.None="none",t.Point="pointer",t.Text="text",t.Wait="wait",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out"}(Pe||(Pe={}));const De={LeftBottom:n(-1,-1),CenterBottom:n(0,-1),RightBottom:n(1,-1),LeftCenter:n(-1,0),Center:n(0,0),RightCenter:n(1,0),LeftTop:n(-1,1),CenterTop:n(0,1),RightTop:n(1,1)},Be=new U({color:v(255,255,255,0)}),Le=new ee({thickness:1,fillStyle:Be}),Re=60,Ee=60,ze="1.0",Ve="osm/osm-sprite-transparent.png",Oe=oe.Circle,Ne="#363636";var Ge;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(Ge||(Ge={}));class We extends Qs{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.xs="Band",this.Se=0,this.ve=0,this.be=this.qi.bandFillStyle,this.xe=this.qi.bandStrokeStyle,this.Me=!0,this._e=this.ks.ke(this.dt).Ce(this.be).we(this.xe).cs(this.getHighlight()),this.ds(this._e)}setValueStart(t){return this.Se=t,this.D.emit("valueChange",this,this.Se,this.ve),this.ks.Ss(),this}getValueStart(){return this.Se}setValueEnd(t){return this.ve=t,this.D.emit("valueChange",this,this.Se,this.ve),this.ks.Ss(),this}getValueEnd(){return this.ve}setFillStyle(t){this.be="function"==typeof t?t(this.be):t;const i=this.be;return this._e.Ce(i),this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){this.xe="function"==typeof t?t(this.xe):t;const i=this.xe;return this._e.we(i),this.ks.Ss(),this}getStrokeStyle(){return this.xe}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}Te(){return this._e.Fe(this.Ts.toVec2(this.Se,this.Ts.getHeight(this.dt).getInnerStart())).q(this.Ts.toVec2(this.ve-this.Se,this.Ts.getHeight(this.dt).getInnerInterval())),this}attach(t,i=!0,s=!1){return super.attach(t,i),gi(t,this.qi,s,{fill:this.be,stroke:this.xe}),this}Ie(t,i){t.cs(i),this.ks.Ss()}setDefaultMouseInteractions(t){return this.Me=t,this}Fs(){let t,i;const s=(s,e)=>{if(!this.Me)return;const h=At(this.ks.us.Pe(e.x,e.y),this.ks.us.dt,this.dt),r=this.Ts.getWidth(h),n=this.axis.dt.ct(this.Se),o=this.axis.dt.ct(this.ve),a=(this.axis.dt.ct(r)-n)/(o-n);t=!(a<.1||a>.9),!1===t&&(i=a<.5)},e=(s,e,h,r,n)=>{if(!this.Me)return;const o=this.Ts.getWidth(r);t?(this.Se=this.axis.dt.mi(this.Se,o),this.ve=this.axis.dt.mi(this.ve,o)):i?this.Se=this.axis.dt.mi(this.Se,o):this.ve=this.axis.dt.mi(this.ve,o),ii(n),this.D.emit("valueChange",this,this.Se,this.ve),this.ks.Ss()};this.onMouseMove(((i,e)=>{if(!this.Me)return;s(0,n(e.clientX,e.clientY));const h=t?Pe.Point:this.Ts.getWidth({x:Pe.Horizontal,y:Pe.Vertical});this.De=this.Ji.engine.setMouseStyle(h,this.De)})),this.onMouseLeave((()=>{this.Me&&(this.Ji.engine.restoreMouseStyle(this.De),this.De=void 0)})),this.onMouseDrag(((t,i,s,h,r)=>{this.Me&&0===s&&e(0,0,0,r,i)}));const h=Ks(new te(s,e));this.onTouchStart(h.onTouchStart),this.onTouchMove(h.onTouchMove),this.onTouchEnd(h.onTouchEnd)}}class Ue extends Qs{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.xs="Constant Line",this.u=0,this.xe=this.qi.constantLineStrokeStyle,this.Be=!0,this.Me=!0,this.Le=this.ks.Ee(this.dt).Re(this.xe).cs(this.getHighlight()),this.ds(this.Le)}setValue(t){return this.u=t,this.D.emit("valueChange",this,this.u),this.ks.Ss(),this}getValue(){return this.u}setStrokeStyle(t){this.xe="function"==typeof t?t(this.xe):t;const i=this.xe;return this.Le.Re(i),this.ks.Ss(),this}getStrokeStyle(){return this.xe}setInteractionMoveByDragging(t){return this.Be=t,this}getInteractionMoveByDragging(){return this.Be}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}Te(){return this.Le.Ve(this.Ts.toVec2(this.u,this.Ts.getHeight(this.dt).getInnerStart())).ze(this.Ts.toVec2(this.u,this.Ts.getHeight(this.dt).getInnerEnd())),this}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{stroke:this.xe}),this}Ie(t,i){t.cs(i),this.ks.Ss()}setDefaultMouseInteractions(t){return this.Me=t,this}Fs(){const t=(t,i)=>{this.Me&&this.Be&&(this.u=this.axis.dt.mi(this.u,this.Ts.getWidth(i)),this.D.emit("valueChange",this,this.u),this.ks.Ss(),ii(t))};this.onMouseMove((()=>{if(this.Me&&this.Be){const t=this.Ts.getWidth({x:Pe.Horizontal,y:Pe.Vertical});this.De=this.Ji.engine.setMouseStyle(t,this.De)}})),this.onMouseLeave((()=>{this.Me&&this.Be&&(this.Ji.engine.restoreMouseStyle(this.De),this.De=void 0)})),this.onMouseDrag(((i,s,e,h,r)=>{this.Me&&this.Be&&0===e&&t(s,r)}));const i=Ks(new te(void 0,((i,s,e,h,r)=>t(r,h))));this.onTouchStart(i.onTouchStart),this.onTouchMove(i.onTouchMove),this.onTouchEnd(i.onTouchEnd)}}const Ye={fitting:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?e:s,allowIntervalLengthChange:!0},expansion:{start:(t,i,s,e)=>i>=t?s<t?s:t:e>t?e:t,end:(t,i,s,e)=>i>=t?e>i?e:i:s<i?s:i,allowIntervalLengthChange:!0},progressive:{start:(t,i,s,e)=>i>t?Ye.progressive.end(t,i,s,e)+(t-i):e>t?e:t,end:(t,i,s,e)=>i>t?e>i?e:i:Ye.progressive.start(t,i,s,e)+(i-t),allowIntervalLengthChange:!1},regressive:{start:(t,i,s,e)=>i>t?s<t?s:t:Ye.regressive.end(t,i,s,e)+(t-i),end:(t,i,s,e)=>i>t?Ye.regressive.start(t,i,s,e)+(i-t):s<i?s:i,allowIntervalLengthChange:!1}},He={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},$e=t=>void 0!==t.Oe,Xe=t=>void 0!==t.Ne,je={Ge:Es.Numeric},Ze=(t,i)=>[t,i],Qe=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){const r=Math.round((t+s*n)*e)/e;r<i&&h.push(r)}return h},Je=(t,i,s,e,h)=>{Lt(t,0)&&(t=0),Lt(i,0)&&(i=0);const r=[];let n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);for(;n<i&&!1===Lt(n,i);)r.push(n),n+=s,n=Math.round(n*h)/h;return r.push(n),r},Ke=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===Lt(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},qe=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const l=i[h]||1;let u=!1,c=!1,d=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,l,u,c,d)}},th=(...t)=>{const i=t.length>0?t.length:0;return(s,e,h,r,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},ih=(t,i)=>{if(i.has(t))return i.get(t);const s=is(t.Ue.We());if(Mi(s))return s;const e=t.Ye.mi(s.min,{x:-5,y:-5}),h=t.Ye.mi(s.min,{x:5,y:5}),r=t.Ye.mi(s.max,{x:-5,y:-5}),n=t.Ye.mi(s.max,{x:5,y:5}),o={min:{x:Math.min(e.x,h.x,r.x,n.x),y:Math.min(e.y,h.y,r.y,n.y)},max:{x:Math.max(e.x,h.x,r.x,n.x),y:Math.max(e.y,h.y,r.y,n.y)}};return i.set(t,o),o},sh=t=>{const i=new Map;if(t!==je){for(const s of t.He)i.set(s,new Map);for(const s of t.$e)i.set(s,new Map)}return i};class eh{constructor(t,i,e,h,r,n,o){this.D=new s,this.Xe=je,this.je=He.Empty,this.Ze=new Map,this.Qe=new Map,this.Je=Ye.fitting,this.Ke=!0,this.qe=K((()=>this.chart.us.Ss()))(300,Q.linear),this.th=!0,this.Xi=!0,this.ih=!1,this.sh=Ni,this.eh=!1,this.hh=!1,this.rh=Ni,this.oh=Ni,this.ah=Ni,this.lh=!1,this.uh=()=>{this.ih||void 0===this.Je||this.chart.us.Ss(!0)},this.dh={},this.fh=(t,i,s,e,h,r)=>{const n=[],o=[];for(const a of t){if(a<s||a>e){n.push(a);continue}const t=this.Ze.get(i),l=(t?t.get(a):void 0)||this.Ah(a,i);l.gh=!1;const u=this.mh(l,h);r.set(l,u),n.push(a),o.push(l)}return{displayedKeyValues:n,createdTicks:o}},this.yh=(t,i,s,e,h,r,n,o,a,l,u)=>{const c=[];for(let d=0;d<t.length;d+=1){const f=t[d],A=i[d];let g,m,y;if(this.ph(f,s)){const i=ih(f,a);m=[t[d-1],t[d+1]],y=m.concat(l).concat(u).filter((t=>void 0!==t)).filter((i=>i.Sh!==s||!!t.find((t=>t===i)))).map((t=>Yi(i,ih(t,a))?t:void 0)),g=y.some((t=>void 0!==t))}else g=!1;if(g){let t=!0;const i=y.filter((t=>void 0!==t));if(t&&i.every((t=>$e(t.Sh)))&&(t=!1),t&&s.bh&&s.bh.xh&&!1===s.bh.xh(A,e,h,r,n,o)&&(t=!1),!1===t)continue;return!0}c.push(f)}return c},this.formatValue=t=>this.Xe.Ge(t,this.dt),this.Mh=!0,this._h=!0,this.chart=t,this.wh=i,this.qi=h,this.Ch=n,this.dt=e,this.kh=o,"logarithmic"===o.type&&this.setAnimationZoom(Q.logarithmic(Ps(o.base))),this.Th=n.numeric,this.Fh("Numeric"),this.Ih=e.getInnerStart(),this.Ph=e.getInnerEnd(),this.setAnimationsEnabled(r)}setDefaultInterval(t,i){return this.Dh=t,!1!==(null==i?void 0:i.applyImmediately)&&(this.lh=!0,this.chart.us.Ss()),this}getDefaultInterval(){return this.Dh}getTitle(){return this.Lh.Bh()}setTitle(t){return this.Lh.Rh(t),this.chart.us.Ss(),this}getTitleFillStyle(){return this.Lh.Eh()}setIntervalRestrictions(t){return this.zh=t,this.chart.us.Ss(),this}getIntervalRestrictions(){return this.zh}setTitleFillStyle(t){return this.Lh.Ce(t),this.chart.us.Ss(),this}getTitleFont(){return this.Lh.Vh()}setTitleFont(t){return this.Lh.Oh(t),this.chart.us.Ss(),this}setTitleRotation(t){return this.Lh.Nh(t),this.chart.us.Ss(),this}getTitleRotation(){return this.Lh.Gh()}setTitleEffect(t){return this.Wh.ps(t),this.chart.us.Ss(),this}getTitleEffect(){return this.Wh.vs()}Fh(t,i){if(this.Ze.size>0&&this.Uh(),"Empty"===t)this.Xe=je,this.je=t;else if("Numeric"===t){"Numeric"!==this.je&&(this.Th=this.Ch.numeric);const s=i||(t=>t);this.Th=s(this.Th),this.Xe=this.Th.Yh(this.kh),this.je=t}else if("DateTime"===t){"DateTime"!==this.je&&(this.Th=this.Ch.datetime);const s=i||(t=>t);this.Th=s(this.Th),this.Xe=this.Th.Yh(this.kh),this.je=t}else if("Time"===t){"Time"!==this.je&&(this.Th=this.Ch.time);const s=i||(t=>t);this.Th=s(this.Th),this.Xe=this.Th.Yh(this.kh),this.je=t}return this.Qe.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.Qe=sh(this.Xe),this.chart.us.Ss(),this}Hh(){return this.Xe}$h(t){this.Xe=t,this.Qe.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.Qe=sh(this.Xe),this.chart.us.Ss()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.St(void 0!==i?i:this.Ih,void 0!==s?s:this.Ph,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}St(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n=!0,o=Math.abs(i-t);if(Math.abs(this.Ph-this.Ih),void 0!==this.Xe.Xh&&this.Xe.Xh>o){const s=(i+t)/2,e=this.Xe.Xh/2*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.Xe.jh&&this.Xe.jh<o){const s=(i+t)/2,e=this.Xe.jh/2*(t>i?-1:1);r={start:s-e,end:s+e}}const a=this.dt.nt(r.start,r.end,this.Ih,this.Ph,n);if(!1===a)return this;if(!0===a);else if(r=a,"zoomBandChart"===h)return this;let l;switch(h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":l=!0;break;case"zoomBandChart":case"synchronizedAxis":l=!1;break;default:return Ti(0,""),this}if(this.Zh&&this.Zh.finishAll(!1),this.qe&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.Zh||this.Zh.isOver()?this.qe:this.Zh.NextAnimation.bind(this);this.Zh=i([[this.Ih,r.start],[this.Ph,r.end]],(([t,i])=>{this.Qh(t,i,n)}),t),this.Zh.onAnimationEnd((()=>{this.Zh=void 0,l&&(this.ah=Tt.performance.now())})),this.Zh.onAnimationEnd((()=>this.setStopped(e)))}else this.Qh(r.start,r.end,n),this.setStopped(e),l&&(this.ah=Tt.performance.now());return this}getInterval(){return{start:this.Ih,end:this.Ph}}setStopped(t){return t===this.ih||(t&&(this.Zh&&this.Zh.finishAll(!1),this.Zh=void 0),this.ih=t,this.D.emit("stoppedStateChanged",this,this.ih),this.sh=Tt.performance.now(),this.chart.us.Ss()),this}getStopped(){return this.ih}onStoppedStateChanged(t){return this.D.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.D.off(t,"stoppedStateChanged")}fit(t,i){const s=this.Jh(),e=this.Dh||ah,h="function"==typeof e?e({curStart:this.Ih,curEnd:this.Ph,dataMin:null==s?void 0:s.min,dataMax:null==s?void 0:s.max}):e;return this.St(void 0!==h.start?h.start:this.Ih,void 0!==h.end?h.end:this.Ph,void 0!==h.animate?h.animate:void 0===t||t,void 0!==h.stopAxisAfter?h.stopAxisAfter:void 0===i||i,"userFit"),this}setScrollStrategy(t){return this.Je=t,this.chart.us.Ss(),this}getScrollStrategy(){return this.Je}setAnimationScroll(t){return this.Ke=Boolean(t),this.chart.us.Ss(),this}setAnimationZoom(t,i=300){return this.Zh&&(this.Zh.finishAll(!1),this.Zh=void 0),this.qe=t?K((()=>this.chart.us.Ss()))(i,t):void 0,this}setAnimationsEnabled(t){return this.th=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Q.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.th}setVisible(t){const i=this.Xi!==t;return this.Xi=t,this.Lh.setVisible(t),this.Kh((i=>{i.Ue.setVisible(t)})),i&&this.D.emit("visibleStateChanged",this,this.Xi),this}getVisible(){return this.Xi}onIntervalChange(t){return this.D.on("scaleChange",t)}offIntervalChange(t){return this.D.off(t,"scaleChange")}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}qh(t,i){const s=new Map;if(this.Xe===je||!this.Xi)return this.Uh(),s;i=i||new Map;const e=this.tr(),h=e.min,r=e.max,n=r-h,o=t.physicalAxisSize;this.dh.physicalAxisSize=o;const a=rh(this.Xe,h,r,this.Ih,this.Ph,o),l=[];if(this.ir(),l.push(...this.sr(this.Xe,h,r,a,i,t,s)),this.er(this.Xe,h,r,a,i,t,l,s),this.hr(),a)for(const[t,i]of this.Qe){const s=a.get(t);if(void 0!==s)for(const[t,e]of i)s.includes(t)||(null==e||e.dispose(),i.delete(t))}return this.dh.min=h,this.dh.max=r,this.dh.scaleInterval=n,this.dh.physicalAxisSize=o,s}rr(t){const i=t.Sh.nr;t.Ue.Rh(i(t.u,this.dt)).Ps()}ar(t,i){const s=i.lr;t.Ue.Ce(s.getLabelFillStyle()).Oh(s.getLabelFont()).Nh(s.getLabelRotation())}Ah(t,i){const s=this.Qe.get(i);let e=s.get(t);e?(s.delete(t),e.Sh=i,e.ys(!0)):e=this.ur(t,i);const h=this.Ze.get(i)||new Map;return h.set(t,e),this.Ze.set(i,h),this.ar(e,i),e}mh(t,i){const s=this.cr(t,i);return this.rr(t),s}sr(t,i,s,e,h,r,n){const o=[];for(const a of t.He){const t=e.get(a);for(const e of t){if(e<i||e>s)continue;const t=this.Ze.get(a),l=(t?t.get(e):void 0)||this.Ah(e,a),u=this.mh(l,r),c=ih(l,h);o.find((t=>Yi(c,ih(t,h))))&&l.Ue.setVisible(!1),l.gh=!1,n.set(l,u),o.push(l)}}return o}er(t,i,s,e,h,r,n,o){let a,l=[];for(const u of t.$e){const t=e.get(u);if(!t)break;let c;if(void 0===a)c=[{start:i,end:s,keyValues:t}];else{c=[];for(let i=0;i<a.length-1;i+=1){const s=a[i],e=a[i+1],h={start:s,end:e,keyValues:[]};for(const i of t)i>=s&&i<e&&h.keyValues.push(i);c.push(h)}}if(a=t,Xe(u))continue;let d=0,f=-1,A=[],g=[];for(let t=0;t<c.length;t+=1){const e=this.fh(c[t].keyValues,u,i,s,r,o);A=A.concat(e.displayedKeyValues),g=g.concat(e.createdTicks)}let m=g,y=!0;if(u.lr.getLabelFillStyle()!==O){let t=[];for(;++f<c.length;){const e=c[f],r=e.start,o=e.end;let a=e.keyValues;if(d>0){if(void 0===u.bh){y=!1;break}const t=u.bh.dr;if(a=t(a,d-1,r,o,i,s),void 0===a)break}const m=this.yh(g.filter((t=>a.some((i=>Lt(t.u,i))))),A,u,d,r,o,i,s,h,n,l);!0!==m?t=t.concat(m):(d+=1,f=-1,t=[])}m=t,g.forEach((i=>{t.find((t=>t===i))||this.Ar(i)}))}if(l=m,!y)break}}Ar(t){const i=this.Ze.get(t.Sh);null==i||i.delete(t.u);const s=this.Qe.get(t.Sh);s&&s.has(t.u)?t.dispose():s&&(t.ys(!1),s.set(t.u,t))}Kh(t){for(const i of this.Ze.values())for(const s of i.values())t(s)}gr(t,i){for(const s of this.Ze.values())for(const e of s.values())i=t(i,e);return i}Uh(){this.Ze.forEach(((t,i)=>{t.forEach((t=>this.Ar(t)))})),this.Ze.clear()}ir(){for(const t of this.Ze.values())for(const i of t.values())i.gh=!0}hr(){for(const t of this.Ze.values())for(const[i,s]of t.entries())s.gh&&(s.dispose(),t.delete(i))}tr(){const t=this.dt.getInnerStart()<this.dt.getInnerEnd()?this.dt.getInnerStart():this.dt.getInnerEnd(),i=this.dt.getInnerEnd()>this.dt.getInnerStart()?this.dt.getInnerEnd():this.dt.getInnerStart();return c(t,i)}ph(t,i){return!(t.gh||0===t.Ue.Bh().length||$e(i)&&!0!==i.mr)}yr(t,i){return this.Xe===je||(this.Xe.He.forEach((s=>{i=t(i,s.lr)})),this.Xe.$e.forEach((s=>{(t=>void 0!==t.nr)(s)&&(i=t(i,s.lr))}))),i}Jh(){let t=this.wh.pr();const i=this.wh.Sr();let s;if(void 0!==t&&It(t)&&void 0!==i&&It(i)&&("logarithmic"===this.kh.type&&(0===t&&(t=Math.min(1,i)),Math.sign(t)!==Math.sign(i)&&(t=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,t),s.max=Math.max(s.max,i)):s=c(t,i)),s&&It(s.min)&&It(s.max))return Lt(s.min,s.max)?{min:s.min-1,max:s.max+1}:s}vr(){if(!this.Mh)return 0;let t=0;const i=this.wh.br();return i&&(t=Math.max(t,i)),t}setAutoRegionsEnabled(t){return this.Mh=t,this.chart.us.Ss(),this}Mr(){var t;const i=this.eh;let s=!1;if(this.lh&&this.Dh){const t=this.Jh(),i="function"==typeof this.Dh?this.Dh({curStart:this.Ih,curEnd:this.Ph,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.Dh;this.setInterval(i),this.lh=!1}if(this.Je&&!this.ih){const i=this.Jh();if(i){const e=this.Ih,h=this.Ph;let r=this.Je.start(e,h,i.min,i.max),n=this.Je.end(e,h,i.min,i.max);const o=null===(t=this.Je.allowIntervalLengthChange)||void 0===t||t,a=oh(this.zh,i,{start:r,end:n},{start:e,end:h},o);r=a.start,n=a.end;const l=!1===Lt(e,r),u=!1===Lt(h,n);if(r=l?r:e,n=u?n:h,l||u){let t=!1;if(this.Ke&&!this._h)if(this.Ke){t=!0;const i=l?this._r(e,r):e,a=u?this._r(h,n):h;if(!0===this.Qh(i,a,o)&&(l&&!1===Lt(i,r)||u&&!1===Lt(a,n))){this.chart.us.Ss(!0),s=!0;let t=Math.abs(n-r)/Math.abs(i-a);t<1&&(t=1/t),this.hh=t>=1.4}}else t=!1;t||this.Qh(r,n,o),this._h=!1}}}return s?(this.eh!==s&&(this.eh=s,this.rh=Tt.performance.now()),this.wr&&(clearTimeout(this.wr),this.wr=void 0)):!0===i&&void 0===this.wr&&(this.hh=!1,this.wr=setTimeout((()=>{!1!==this.eh&&(this.eh=!1,this.rh=Tt.performance.now()),this.wr=void 0,this.chart.us.Ss()}),200)),this}Qh(t,i,s){let e={start:t,end:i},h=!0;if(this.zh){const t=this.Jh();e=oh(this.zh,t,e,{start:this.Ih,end:this.Ph},s)}const r=Math.abs(i-t),n=Math.abs(this.Ph-this.Ih);if(void 0!==this.Xe.Xh&&this.Xe.Xh>r){const r=(i+t)/2,o=(s?this.Xe.Xh/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}if(void 0!==this.Xe.jh&&this.Xe.jh<r){const r=(i+t)/2,o=(s?this.Xe.jh/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}let o=this.dt.nt(e.start,e.end,this.Ih,this.Ph,s);if(!1===o)return!1;!0!==o&&(e=o);const a=this.vr(),l=this.Cr(Math.min(e.start,e.end),Math.max(e.start,e.end),a);return o=this.dt.nt(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min,this.Ih,this.Ph,!1),!!o&&(!0===o?this.dt.J(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min):this.dt.J(e.start,e.end),this.Ih=e.start,this.Ph=e.end,this.D.emit("scaleChange",this,e.start,e.end),this.oh=Tt.performance.now(),this.chart.us.Ss(),h)}kr(){return this.eh}Tr(){return void 0!==this.Zh}}class hh{constructor(t,i,s,e,h=s.Pr(e).Ir(Ri).Fr(Ri).setMouseInteractions(!1)){this.gh=!1,this.$i=!1,this.ts=[],this.Sh=t,this.u=i,this.Dr=s,this.Ye=e,this.Ue=h,this.ts.push(h)}ys(t){this.ts.forEach((i=>i.setVisible(t)))}dispose(){return this.$i||(this.$i=!0,this.ts.forEach((t=>t.dispose()))),this}}const rh=(t,i,s,e,h,r)=>{const n=new Map;for(const r of t.He){let t=r.Br(i,s,e,h);t=nh(t),n.set(r,t)}let o;for(const e of t.$e){let t;if(void 0===o)t=e.Br(i,s,i,s);else{let h=[];const n=o.filter((t=>i<=t&&t<=s)).length;if(n>0){const t=r/(n-1);if(void 0!==e.Lr&&e.Lr>t)break}for(let t=0;t<o.length-1;t+=1){const r=e.Br(o[t],o[t+1],i,s);h=h.concat(r)}t=h}t=nh(t),n.set(e,t),o=t}return n},nh=t=>(t=(t=>{const i={},s=[],e=t.length;let h=0;for(let r=0;r<e;r+=1){const e=t[r];1!==i[e]&&(i[e]=1,s[h]=e,h+=1)}return s})(t)).sort(((t,i)=>t-i)),oh=(t,i,s,e,h)=>{const r="function"==typeof t?t({curStart:e.start,curEnd:e.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):t;if(!r)return s;const n={start:s.start,end:s.end};let o=Math.abs(s.end-s.start);if(void 0!==r.intervalMin&&o<r.intervalMin){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMin,n.end=t+.5*Math.sign(s.end-t)*r.intervalMin}if(o=Math.abs(s.end-s.start),void 0!==r.intervalMax&&o>r.intervalMax){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMax,n.end=t+.5*Math.sign(s.end-t)*r.intervalMax}return o=Math.abs(s.end-s.start),void 0!==r.startMin&&(n.start=Math.max(n.start,r.startMin),h||Lt(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.startMax&&(n.start=Math.min(n.start,r.startMax),h||Lt(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMin&&(n.end=Math.max(n.end,r.endMin),h||Lt(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMax&&(n.end=Math.min(n.end,r.endMax),h||Lt(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),n},ah=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const i=t.curEnd>=t.curStart;return{start:i?t.dataMin:t.dataMax,end:i?t.dataMax:t.dataMin,stopAxisAfter:!1}},lh=i({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class uh extends lh{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const ch=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),dh=new uh,fh=new class{getFillStyle(){return O}},Ah=i({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new U,wireframeStyle:at});class gh extends Ah{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const mh=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),yh=i({type:"pixelated-points-3d",size:5,fillStyle:new U});class ph extends yh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const Sh=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),vh={Triangulated:gh,Pixelated:ph};class bh{constructor(t){this.Rr=new Map,this.us=t}os(t,i,s){const e=s.animationEnabled;this.Rr.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=t.onDispose((()=>{this.Rr.delete(t),t.offDispose(h)}))}Er(t,i){let s=i.animationEnabled;const e=[],h=t.onDispose((()=>{e.forEach((t=>{this.Rr.delete(t)})),t.offDispose(h)}));return{zr:(t,i)=>{const h={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.Rr.set(t,h)},Vr:()=>{e.forEach((t=>{this.Rr.delete(t)})),e.length=0},Or:t=>{s=t,e.forEach((t=>{this._s(t,s)}))},Nr:()=>s}}Ms(t,i){const s=this.Rr.get(t);s&&(s.curUnanimatedHighlightValue=Ci(i),this.us.Ss())}As(t,i=!1){const s=this.Rr.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}_s(t,i){const s=this.Rr.get(t);s&&(s.animationEnabled=i)}ws(t){const i=this.Rr.get(t);return!!i&&i.animationEnabled}Ps(t){let i=!1;this.Rr.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.us.Ss(!0)}}const xh=new Map,Mh=(t,i)=>{const s=t.getSize(),e=t.getFamily(),h=t.getWeight(),r=t.getStyle(),n=t.getVariant(),o=`${r} ${n?"small-caps":"normal"} ${h} ${s}px ${e}`,a=`${o} ${i.toFixed(2)}`;let l=xh.get(a);return l||(l=((t,i,s,e)=>({font:t,properties:i,dpr:s,id:e}))(o,{type:"font",size:s,family:e,style:r,variant:n,weight:h},i,a),xh.set(a,l)),l};var _h,wh;!function(t){t[t.click=0]="click",t[t.dbclick=1]="dbclick",t[t.mouseDown=2]="mouseDown",t[t.mouseUp=3]="mouseUp",t[t.contextmenu=4]="contextmenu",t[t.wheel=5]="wheel"}(_h||(_h={})),function(t){t[t.touchStart=0]="touchStart",t[t.touchMove=1]="touchMove",t[t.touchEnd=2]="touchEnd"}(wh||(wh={}));const Ch=t=>({container:t.Gr,scale:t.dt,setMouseStyle:(i,s)=>t.Wr(i,s),restoreMouseStyle:i=>t.Ur(i),clientLocation2Engine:(i,s)=>t.Pe(i,s),engineLocation2Client:(i,s)=>t.Yr(i,s),captureFrame:(i,s,e)=>t.Hr(i,s,e),renderFrame:(i,s,e=!1)=>t.$r(i,s,e),layout:()=>{t.Xr(),t.jr(),t.Qr.Zr(),t.Ss()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.Jr(i,s),onRenderFrame:i=>t.Kr(i),offRenderFrame:i=>t.qr(i)}),kh=[];let Th;const Fh=()=>{if(void 0!==Th){const t=Tt.getComputedStyle(Tt.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));Th.style.height=Tt.innerHeight-i+"px",(()=>{for(let t=0;t<kh.length;t+=1)kh[t]()})()}},Ih=new U({color:v(255,255,255)}),Ph={font:Mh(dh,0),fillStyle:Ih,lineStyle:new ee({fillStyle:Ih,thickness:1}),pointStyle3D:new vh.Triangulated};class Dh{constructor(t,i,e){this.D=new s,this.dt=dt.d2({scaleXYConstructor:Gs}),this.tn=new Map,this.sn=K((()=>this.Ss()),60),this.en=n(0,0),this.hn=!1,this.rn=Bt,this.nn=()=>{},this.an=[],this.ln=-1,this.un=[],this.cn=!0,this.$i=!1,this.dn=!1,this.jr=()=>{const{bottom:t,left:i}=this.Gr.getBoundingClientRect();return this.en=n(Math.floor(i),Math.floor(t)),this},this.Xr=()=>{this.fn&&this.fn()},this.Wr=(t,i)=>{if(!i){this.Gr.style.cursor=t;const i=this.ln;return this.ln+=1,this.un.push([i,t]),i}return this.Ur(i),this.Wr(t)},this.Ur=t=>{const i=t?this.un.findIndex((i=>i[0]===t)):-1;i>=0?(this.un.splice(i,1),this.un.length>0?this.Gr.style.cursor=this.un[this.un.length-1][1]:this.Gr.style.cursor="default"):(this.un.push([0,"default"]),this.Gr.style.cursor="default")},this.An=t=>(this.gn.S(t),this),this.mn=()=>this.gn.M(),this.yn=()=>{this.rn&&this.rn(1e3/60),this.pn(),this.Sn(),this.nn&&this.nn()},this.vn=t=>(this.tn.set(t.bn(),t),this.tn=new Map([...this.tn.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.xn=t=>(this.tn.delete(t),this),this.j=()=>(this.gn.i=!1,this),this.Z=()=>(this.gn.i=!0,this),this.Mn=t=>{if(!this.cn)return;const i=this._n,s=i&&i.clientX===t.clientX&&i.clientY===t.clientY,e=this.Pe(t.clientX,t.clientY),h=this.wn(t,{x:t.clientX,y:t.clientY});if(this.Cn&&((null==h?void 0:h.entity)!==this.Cn.entity||h.collectionMember!==this.Cn.collectionMember)&&!this.kn){this.Cn.entity.ji=!1;const i=this.Cn.entity.Tn;i&&i(this.Cn.entity,t,this.Cn.collectionMember)}if(h&&h.entity.getMouseInteractions()&&!this.kn)if(h.entity.ji){if(!s){const i=h.entity.Fn;i&&i(h.entity,t,h.collectionMember)}}else{h.entity.ji=!0;const i=h.entity.In;i&&i(h.entity,t,h.collectionMember)}if(this.kn){const s=this.kn.entity.Pn,e=i?n(t.clientX-i.clientX,i.clientY-t.clientY):{x:0,y:0};!s||0===e.x&&0===e.y||s(this.kn.entity,t,this.kn.button,this.kn.startLocation,e,this.kn.collectionMember)}this.Dn=t,this._n=t,this.Bn=e,this.Cn=h},this.Ln=t=>{if(this.cn=!1,this.Bn=void 0,this.Dn=t,this.Cn&&!this.Rn&&!this.kn){this.Cn.entity.ji=!1;const i=this.Cn.entity.Tn;i&&i(this.Cn.entity,t,this.Cn.collectionMember),this.Cn=void 0}},this.En=t=>{if(this.cn=!0,this.Dn=t,this.kn&&t.buttons<=0){const i=this.kn.entity.zn;i&&i(this.kn.entity,t,this.kn.button,this.kn.startLocation,this.kn.collectionMember),this.kn=void 0}if(this.Rn&&t.buttons<=0){const i=this.Rn.entity.Vn;i&&i(this.Rn.entity,t,this.Rn.collectionMember),this.Rn=void 0}},this.On=()=>this.Bn,this.Qr=t,this.qi=i.theme,this.Nn=e.Nn,this.Gn=e.Gn,this.Wn=e.Wn,this.Un={Yn:i&&i.overrideInteractionMouseButtons?i.overrideInteractionMouseButtons:void 0,$s:i&&void 0!==i.resourcesBaseUrl&&null!==i.resourcesBaseUrl?i.resourcesBaseUrl:`${Tt.location.origin}/resources`,Hn:!i||!("warnings"in i)||"boolean"!=typeof i.warnings||i.warnings,$n:(()=>{const t=null==i?void 0:i.pickingPrecision;if("string"==typeof t){const i=t.toLowerCase();if("best"===i)return 1;if("high"===i)return.5;if("low"===i)return 1/8}return 1/4})(),Xn:void 0===(null==i?void 0:i.interactable)||i.interactable,jn:void 0===i.textPixelSnappingEnabled||i.textPixelSnappingEnabled};const h=i?i.container:void 0;if(h){if("string"==typeof h){const t=Tt.document.getElementById(h);if(!t)throw new Error(`Container "${h}" doesn't exist.`);this.Gr=t}else this.Gr=h;Tt.addEventListener("resize",this.Xr),this.an.push((()=>{Tt.removeEventListener("resize",this.Xr)}))}else{if(void 0===Th){const t=Tt.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",Tt.document.body.appendChild(t),Th=t,Tt.addEventListener("resize",Fh)}let t=1;for(;null!==Tt.document.getElementById(`chart-${t}`);)t+=1;this.Gr=Tt.document.createElement("div"),this.Gr.id=`chart-${t}`,this.Gr.style.flex="1",this.Gr.style.height="100%",Th.appendChild(this.Gr),Fh(),kh.push(this.Xr),this.an.push((()=>{Th&&Th.removeChild(this.Gr),kh.includes(this.Xr)&&kh.splice(kh.indexOf(this.Xr),1),0===kh.length&&Th&&(Tt.document.body.removeChild(Th),Th=void 0,Tt.removeEventListener("resize",Fh))}))}if(Tt.ResizeObserver){const t=t=>{for(const i of t)i.target===this.Gr&&this.Xr()};this.Zn=new Tt.ResizeObserver(t.bind(this)),this.Zn.observe(this.Gr)}""===this.Gr.style.position&&(this.Gr.style.position="relative"),this.Gr.style.boxSizing="content-box",this.Gr.addEventListener("fullscreenchange",this.Xr),this.Gr.addEventListener("webkitfullscreenchange",this.Xr);const r=i?i.maxFps:void 0;this.Qn=r?-1===r?-1:0!==r?1e3/r:0:0;const o=new Map;let a=!1;const l=(t,i)=>s=>{const e=function(t){return{x:t.clientX,y:t.clientY}}(s);switch(s.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":o.set(s.pointerId,e);break;default:o.delete(s.pointerId),a=!1}switch(s.interactions=Array.from(o.values()),s.pointerType){case"pen":case"mouse":default:t&&t(s);break;case"touch":i&&i(s)}s.defaultPrevented&&(a=!0)};this.Gr.onwheel=this.Jn(_h.wheel),this.Gr.oncontextmenu=this.Jn(_h.contextmenu),this.Gr.onclick=this.Jn(_h.click),this.Gr.ondblclick=this.Jn(_h.dbclick),this.Gr.onlostpointercapture=()=>{a=!1},this.Gr.ontouchmove=t=>{a&&t.preventDefault()},this.Gr.onpointerover=l(),this.Gr.onpointerenter=l(this.En),this.Gr.onpointerdown=l(this.Jn(_h.mouseDown),this.Kn(wh.touchStart)),this.Gr.onpointermove=l(this.Mn,this.Kn(wh.touchMove)),this.Gr.onpointerup=l(this.Jn(_h.mouseUp),this.Kn(wh.touchEnd)),this.Gr.onpointercancel=l(),this.Gr.onpointerout=l(),this.Gr.onpointerleave=l(this.Ln,this.Kn(wh.touchEnd)),Tt.addEventListener("scroll",this.jr,{passive:!0}),this.gn=f(new p({r:0,g:0,b:0,a:0})),this.ls=new bh(this)}qn(t,i){var s,e,h,r;(null===(s=this.Cn)||void 0===s?void 0:s.entity)===t.entity&&this.Cn.collectionMember===t.collectionMember&&(this.Cn=i),(null===(e=this.io)||void 0===e?void 0:e.entity)===t.entity&&this.io.collectionMember===t.collectionMember&&(this.io=i),(null===(h=this.Rn)||void 0===h?void 0:h.entity)===t.entity&&this.Rn.collectionMember===t.collectionMember&&(this.Rn={...i,event:this.Rn.event}),(null===(r=this.kn)||void 0===r?void 0:r.entity)===t.entity&&this.kn.collectionMember===t.collectionMember&&(this.kn={...i,button:this.kn.button,startLocation:this.kn.startLocation})}so(){this.dn=!0,this.rn=void 0,this.nn=void 0}Kr(t){return this.D.on("render",t)}qr(t){return this.D.off(t)}eo(){return this.ho}ro(){return this.no}setBackgroundFillStyle(t){return this.oo.Ce(t),this}getBackgroundFillStyle(){return this.oo.Eh()}setBackgroundStrokeStyle(t){return this.oo.we(t),this}getBackgroundStrokeStyle(){return this.oo.ao()}lo(t){return this.nn=t,this}uo(t){return this.rn=t,this}co(t){return this.tn.get(t)}do(){return Array.from(this.tn.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}Jn(t){return i=>this.fo(t,i)}fo(t,i){if(!this.cn)return;t===_h.contextmenu&&ii(i);const s=this.Pe(i.clientX,i.clientY),e=this.wn(i,{x:i.clientX,y:i.clientY});if(t===_h.mouseUp){if(this.kn){const t=this.kn.entity.zn;if(t&&t(this.kn.entity,i,this.kn.button,this.kn.startLocation,this.kn.collectionMember),(null==e?void 0:e.entity)!==this.kn.entity||e.collectionMember!==this.kn.collectionMember){this.kn.entity.ji=!1;const t=this.kn.entity.Tn;t&&t(this.kn.entity,i,this.kn.collectionMember)}this.kn=void 0}if(this.Rn){const t=this.Rn.entity.getMouseInteractions()&&this.Rn.entity.Vn;t&&t(this.Rn.entity,i,this.Rn.collectionMember),this.Rn=void 0}}else if(e&&e.entity.getMouseInteractions()){const s=t===_h.click?e.entity.Ao:t===_h.dbclick?e.entity.mo:t===_h.mouseDown?e.entity.yo:t===_h.wheel?e.entity.po:t===_h.contextmenu?e.entity.So:void 0;if(s&&s(e.entity,i,e.collectionMember),t===_h.mouseDown){this.Rn={entity:e.entity,collectionMember:e.collectionMember,event:i};const t=this.Rn.event.button,s=e.entity.vo;s&&s(e.entity,i,t,e.collectionMember),this.kn={entity:e.entity,collectionMember:e.collectionMember,button:t,startLocation:n(i.clientX,i.clientY)}}}this.Dn=i,this.Bn=s,this.Cn=e}Kn(t){return i=>this.bo(t,i)}bo(t,i){const s=i.interactions.length;if(this.xo=i,this.io){const e=t===wh.touchMove?this.io.entity.Mo:t===wh.touchEnd?this.io.entity._o:t===wh.touchStart?this.io.entity.wo:void 0;e&&e(this.io.entity,i,this.io.collectionMember),t===wh.touchEnd&&0===s&&(this.io.entity.ji=!1,this.io=void 0)}else if(t===wh.touchStart){for(let t=0;t<s&&(this.io=this.wn(i,{x:i.interactions[t].x,y:i.interactions[t].y}),!this.io);t+=1);if(this.io){this.io.entity.ji=!0;const t=this.io.entity.wo;t&&t(this.io.entity,i,this.io.collectionMember)}}t===wh.touchEnd?this.Bn=void 0:this.Bn=this.Pe(i.clientX,i.clientY)}Co(t){return this.D.on("resize",t)}ko(t){return this.D.off(t,"resize")}To(){return this.D.topicOff("resize"),this}Fo(t){return this.D.on("inViewChange",t)}Io(t){return this.D.off(t)}W(){if(!this.$i){if(this.$i=!0,this.tn)for(const t of this.tn.values())t.W();this.rn=void 0,this.nn=void 0,Tt.removeEventListener("scroll",this.jr),this.Gr.removeEventListener("fullscreenchange",this.Xr),this.Gr.removeEventListener("webkitfullscreenchange",this.Xr),this.Zn&&(this.Zn.disconnect(),this.Zn=void 0),this.an.forEach((t=>{t()})),this.an.length=0}}Pe(t,i){return n(t-this.en.x,this.en.y-i)}Yr(t,i){return n(t+this.en.x,this.en.y-i)}Po(t){const i=this.Pe(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}Do(t){const i=this.Yr(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}}const Bh=(t=1)=>({type:"horizontalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=cs(s,e*t),r=Math.abs(h.x),o=i.length,a=[];let l=0,u=0,c=i[0].x+r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x<c&&u<o){const s=u;let e=t.y,h=t.y;for(;u<o&&i[u].x<=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=n(t,h),a[l+1]=n(t,e),a[l+2]=i[u-1],l+=3}}c+=r}return a}return i.slice()}}),Lh=(t=1)=>({type:"horizontalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=cs(s,e*t),r=Math.abs(h.x),o=i.length,a=[];let l=0,u=0,c=i[0].x-r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x>c&&u<o){const s=u;let e=t.y,h=t.y;for(;u<o&&i[u].x>=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=n(t,h),a[l+1]=n(t,e),a[l+2]=i[u-1],l+=3}}c-=r}return a}return i.slice()}}),Rh=(t=1)=>({type:"verticalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=cs(s,e*t),r=Math.abs(h.y),o=i.length,a=[];let l=0,u=0,c=i[0].y+r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y<c&&u<o){const s=u;let e=t.x,h=t.x;for(;u<o&&i[u].y<=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=n(h,t),a[l+1]=n(e,t),a[l+2]=i[u-1],l+=3}}c+=r}return a}return i.slice()}}),Eh=(t=1)=>({type:"verticalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=cs(s,e*t),r=Math.abs(h.y),o=i.length,a=[];let l=0,u=0,c=i[0].y-r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y>c&&u<o){const s=u;let e=t.x,h=t.x;for(;u<o&&i[u].y>=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=n(h,t),a[l+1]=n(e,t),a[l+2]=i[u-1],l+=3}}c-=r}return a}return i.slice()}});var zh;!function(t){t[t.Square=0]="Square",t[t.Circle=1]="Circle",t[t.Triangle=2]="Triangle",t[t.Cross=3]="Cross",t[t.Diamond=4]="Diamond",t[t.Plus=5]="Plus",t[t.Minus=6]="Minus",t[t.Arrow=7]="Arrow",t[t.Star=8]="Star"}(zh||(zh={}));const Vh={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"};var Oh;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(Oh||(Oh={}));const Nh=t=>{const i="nearest"===t?Oh.Nearest:"nearest-x"===t?Oh.NearestX:"nearest-y"===t?Oh.NearestY:void 0;return void 0!==i?i:Oh.NearestX},Gh=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.length;if(0===u)return;const c=e?1:0,d=u-(h?2:1);if(s===Oh.Nearest)return Wh(t,i,r,n,c,d);if(s===Oh.NearestX||s===Oh.NearestY){if("boolean"==typeof l&&("x"===a&&s===Oh.NearestX||"y"===a&&s===Oh.NearestY))return Hh(t,At(i,n,r),a,l,c,d);if(s===Oh.NearestX)return Uh(t,At(i,n,r),o,c,d);if(s===Oh.NearestY)return Yh(t,At(i,n,r),o,c,d)}},Wh=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=At(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},Uh=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},Yh=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},Hh=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),m=r,y=-1;for(;;){const i=o-(n?t[g].x:t[g].y);if(i*(e?-1:1)>0)A=Math.min(g+1,m),y=Math.floor((A+m)/2);else{if(0===Math.abs(i))return g;m=Math.max(g-1,A),y=Math.floor((A+m)/2)}if(y===g){const s=g>h?Math.abs(o-(n?t[g-1].x:t[g-1].y)):Oi,e=g<r?Math.abs(o-(n?t[g+1].x:t[g+1].y)):Oi,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return g-1;case e:return g+1;default:return g}}else g=y}},$h=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),m=r,y=-1;for(;;){const s=o-(n?t[g].x:t[g].y);if(s*(e?-1:1)>0)A=Math.min(g+1,m),y=Math.floor((A+m)/2);else{if(0===Math.abs(s))return{a:g,b:g,lerpAmount:0};m=Math.max(g-1,A),y=Math.floor((A+m)/2)}if(y===g){if(s*(e?-1:1)<0&&g>h){const s=t[g-1],e=t[g];return{a:g-1,b:g,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(g<r){const s=t[g],e=t[g+1];return{a:g,b:g+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:g,b:g,lerpAmount:0}}g=y}};let Xh=0;class jh{constructor(t,i,e){this.Bo=f(!0),this.Lo=!1,this.ji=!1,this.Ro=!1,this.$i=!1,this.Xi=!0,this.Eo=void 0,this.zo=0,this.D=new s,this.Fn=void 0,this.In=void 0,this.Tn=void 0,this.Ao=void 0,this.po=void 0,this.So=void 0,this.mo=void 0,this.yo=void 0,this.Vn=void 0,this.vo=void 0,this.Pn=void 0,this.zn=void 0,this.wo=void 0,this.Mo=void 0,this._o=void 0,this.onDispose=t=>this.D.on("dispose",t),this.offDispose=t=>this.D.off(t,"dispose"),this.us=t,this.Vo=i,this.Oo=e,this.No=Xh,Xh+=1,this.Go=t.qi.highlightColorOffset}Wo(t){return void 0!==this.Oo.find((i=>i.type===t))}Uo(t,i){var s;return!!this.Wo(t)&&!0===i(null===(s=this.Oo.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.$i||(this.ji&&this.Tn&&this.Tn(this,void 0,void 0),this.$i=!0,this.Vo(this),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}setVisible(t){const i=this.Xi;return this.Xi=t,!t&&i&&(this.ji&&this.Tn&&this.Tn(this,void 0,void 0),this.ji=!1),this}getVisible(){return this.Xi}setMouseInteractions(t){const i=this.Bo.M();return this.Bo.S(t),t||(i&&this.ji&&this.Tn&&this.Tn(this,void 0,void 0),this.ji=!1),this}getMouseInteractions(){return this.Bo.M()}getIsUnderMouse(){return this.ji}getIsGrabbed(){return this.Ro}setMouseMoveEventHandler(t){return this.Fn=t,this}setMouseEnterEventHandler(t){return this.In=t,this}setMouseLeaveEventHandler(t){return this.Tn=t,this}setMouseClickEventHandler(t){return this.Ao=t,this}setMouseDoubleClickEventHandler(t){return this.mo=t,this}setMouseDownEventHandler(t){return this.yo=t,this}setMouseUpEventHandler(t){return this.Vn=t,this}setMouseWheelEventHandler(t){return this.po=t,this}setMouseContextMenuEventHandler(t){return this.So=t,this}setMouseDragEventHandler(t){return this.Pn=t,this}setMouseDragStartEventHandler(t){return this.vo=t,this}setMouseDragStopEventHandler(t){return this.zn=t,this}setTouchStartEventHandler(t){return this.wo=t,this}setTouchMoveEventHandler(t){return this.Mo=t,this}setTouchEndEventHandler(t){return this._o=t,this}Yo(t){return this.Eo=t,this}Ho(){return this.Eo?this.Eo:Zh}cs(t){return this.zo=t,this}$o(){return this.zo}Xo(t){return this.Go=t,this}jo(){return this.Go}}const Zh=c(n(0,0),n(0,0));class Qh extends jh{constructor(t,i,s,e){super(t,s,e),this.Zo=0,this.ks=i,this.ks.Qo=!0}Jo(t){return this.Zo===t||(this.Zo=t,this.ks.Qo=!0),this}Ko(){return this.Zo}}class Jh extends Qh{constructor(t,i,s,e,h){super(t,i,e,h),this.qo=!0,this.dt=s}}const Kh=(t,i,s)=>{if(s instanceof Gs){const e=s.Wi(),h=As(i,{x:Math.abs(e.x),y:Math.abs(e.y)});return c(n(t.min.x-h.x,t.min.y-h.y),n(t.max.x+h.x,t.max.y+h.y))}return c(s.mi(n(t.min.x,t.min.y),cs(i,-1)),s.mi(n(t.max.x,t.max.y),i))},qh=(t,i)=>"function"==typeof i?i(t):i,tr=(t,i)=>!t||t!==i,ir=(t,i)=>t===O&&i!==O,sr=t=>t!==O;class er extends Jh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.be=Ph.fillStyle,this.us=t}Ce(t){return this.be=qh(this.be,t),this}Eh(){return this.be}ta(){return tr(this.ia,this.be)}sa(){return ir(this.ia,this.be)}ea(){return sr(this.be)}ha(t){this.ia=t}}class hr extends er{constructor(t,i,s,e,h){super(t,i,s,e,h),this.xe=Ph.lineStyle,this.us=t}we(t){return this.xe="function"==typeof t?t(this.xe):t,this}ao(){return this.xe}ra(){return!this.na||this.na!==this.xe}oa(t){return!this.na||this.na.getThickness()!==t}ea(){return this.xe!==at||super.ea()}sa(){return(this.xe!==at||this.be!==O)&&this.na===at&&this.ia===O}aa(t){this.na=t}}class rr extends er{constructor(t,i,s,e,h,r=f(5)){super(t,i,s,e,h),this.size=f(5),this.size=r}q(t){return this.size.S(t),this}}class nr extends er{constructor(t,i,s,e,h,r=f(Ph.font)){super(t,i,s,e,h),this.la=f(""),this.ua=f(n(0,0)),this.ca=f(0),this.da=f(0),this.fa=f(n(0,0)),this.Aa=f(0),this.ga=f(dh),this.ma=n(0,0),this.Xt=f(A(1,1,1,1)),this.ya=f(g(4,4,4,4)),this.font=f(Ph.font),this.pa=!1,this.font=r}ea(){return sr(this.be)&&this.la.M().length>0}sa(){return!1===this.pa&&this.ea()}Rh(t){return this.la.S(t),this}Bh(){return this.la.M()}Oh(t){return ch(t)?this.ga.S(t):this.ga.S(t(this.ga.M())),this}Vh(){return this.ga.M()}Sa(t){return this.ga.S(this.ga.M().setFamily(t)),this}va(){return this.ga.M().getFamily()}ba(t){return this.ga.S(this.ga.M().setSize(t)),this}xa(){return this.ga.M().getSize()}Ma(t){return this.ga.S(this.ga.M().setWeight(t)),this}_a(){return this.ga.M().getWeight()}wa(t){return this.ga.S(this.ga.M().setStyle(t)),this}Ca(){return this.ga.M().getStyle()}ka(t){return this.ga.S(this.ga.M().setVariant(t)),this}Ta(){return this.ga.M().getVariant()}Fe(t){return this.ua.S(t),this}Fa(){return this.ua.M()}Nh(t){return this.Aa.S(t),this}Gh(){return this.Aa.M()}Ia(t,i){return this.fa.S(n(t,i)),this}Pa(){return this.fa.M()}Da(t){return this.da.S(t),this}Ba(){return this.da.M()}La(t){return this.ca.S(t),this}Ra(){return this.ca.M()}Ea(t){return this.da.S(t.x),this.ca.S(t.y),this}Fr(t){return this.Xt.S(t),this}za(){return this.Xt.M()}Ir(t){return this.ya.S(t),this}Va(){return this.ya.M()}}class or extends rr{constructor(t,i,s,e,h,r=5){super(t,i,s,e,h,f(r)),this.Oa=[],this.Na=f(zh.Square),this.Aa=f(0),this.Ga=f(!1),this.Wa=f(!1),this.Ua=f(!1),this.Ya=Gi,this.Ha=0,this.$a=[],this.Xa=0,this.ja=Gi,this.Za=Oh.Nearest,this.Qa=!1,this.Ja=void 0}Ka(t){return this.Za=t,this}qa(){return this.$a}tl(){return this.Oa}il(t){return this.Na.S(t),this}sl(){return this.Na.M()}Nh(t){return this.Aa.S(t),this}Gh(){return this.Aa.M()}el(t){return this.Ga.S(t),this}hl(t){return this.Wa.S(t),this}rl(t){return this.Ua.S(t),this}nl(t,i){return Array.isArray(t)||(t=[t]),this.Xa+=t.length,this.$a=ci(this.$a,t,{canReturnB:!0}),this.ja&&(this.ja=i?es(this.ja,i):void 0),this.Ja=void 0,this}Nt(){return this.Qa=!0,this.Oa.length=0,this.Ha=0,this.Ya=Gi,this.$a=[],this.Xa=0,this.Ja=void 0,this}ol(){return this.Ha}al(){return this.Xa}}class ar extends hr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ua=f(n(0,0)),this.X=f(n(100,100)),this.Aa=f(0),this.ma=f(n(0,0)),this.ll=!1}Ps(){return this.ul(),this}Fe(t){const i=this.ua.M();return t.x===i.x&&t.y===i.y||(this.ua.S(t),this.ul()),this}Fa(){return this.ua.M()}cl(t){const i=this.ua.M();return t!==i.x&&(this.ua.S(n(t,i.y)),this.ul()),this}dl(t){const i=this.ua.M();return t!==i.y&&(this.ua.S(n(i.x,t)),this.ul()),this}q(t){const i=this.X.M();return t.x===i.x&&t.y===i.y||(this.X.S(n(t.x,t.y)),this.ul()),this}oi(){return this.X.M()}fl(t){const i=this.X.M();return t!==i.x&&(this.X.S(n(t,i.y)),this.ul()),this}Al(t){const i=this.X.M();return t!==i.x&&(this.X.S(n(i.x,t)),this.ul()),this}Nh(t){return this.Aa.S(t),this}Gh(){return this.Aa.M()}ml(t){const i=this.ma.M();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.ll=!1,this.ul()):(this.ll=!0,this.ma.S(t))),this}ul(){if(!this.ll){const t=this.ua.M(),i=this.X.M(),s=n(t.x+i.x/2,t.y+i.y/2),e=this.ma.M();s.x===e.x&&s.y===e.y||this.ma.S(s)}}}class lr extends hr{constructor(){super(...arguments),this.Oa=[],this.ua=f(n(0,0)),this.Ya=Gi,this.yl=!1}pl(t){return t=ni(t),this.Oa=t,this.yl=!0,this}Sl(){return this.Oa}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return 0}bl(){return 0}}class ur extends lr{}class cr extends er{constructor(t,i,s,e,h){super(t,i,s,e,h),this.xl=new Array,this.Ml=new Array,this._l=f({type:"disabled",packager:(t,i,s)=>t.slice()}),this.Ya=Gi,this.wl=0,this.Cl=!1,this.$a=[Array(),Array()],this.kl=!1,this.Tl=(new U).setColor(v(42,171,240)),this.Qa=!1,this.Fl=!1,this.Il=!1}nl(t,i){const s=this.wl-1,e=s>0&&!this.kl;let[h,r]=e?[[this.xl[s]],[this.Ml[s]]]:[[],[]];if(t instanceof Array){const[i,s]=u(t);h=ci(h,i,{canReturnB:!0}),r=ci(r,s,{canReturnB:!0})}else{const i=t.position;h.push(n(i,t.high)),r.push(n(i,t.low))}return this.kl?(this.$a[0]=ci(this.$a[0],h,{canReturnB:!0}),this.$a[1]=ci(this.$a[1],r,{canReturnB:!0})):(this.$a=[h,r],this.kl=!0),this.Ya=es(this.Ya,i||es(is(h),is(r))),this}Nt(){return this.Qa=!0,this.xl.length=0,this.Ml.length=0,this.wl=0,this.Ya=Gi,this}tl(){return[this.xl,this.Ml]}qa(){return[this.$a[0],this.$a[1]]}Pl(t){return this._l.S(t),this}Dl(){return this._l.M()}Bl(t){return this.Tl="function"==typeof t?t(this.Tl):t,this}Ll(){return this.Tl}ol(){return this.wl-(Number(this.Fl)+Number(this.Il))}al(){return this.$a.length}Rl(t){return this.Fl=t,this}El(){return this.Fl}zl(t){return this.Il=t,this}Vl(){return this.Il}sa(){return this.ia===O&&this.Ol===O&&(this.be!==O||this.Tl!==O)}Nl(t){this.Ol=t}ea(){return this.Tl!==O||super.ea()}ta(){return super.ta()||!this.Ol||this.Ol!==this.Tl}}class dr extends hr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ua=f(n(0,0)),this.Gl=f(0),this.Fi=f(360),this.Wl=f(100),this.Ul=f(100),this.Yl=f(0),this.Hl=f(void 0),this.$l=n(0,0),this.Xl=n(0,0),this.jl=n(0,0)}Zl(){return this.Wl.M()}Ql(){return this.Ul.M()}Fa(){return this.ua.M()}Jl(){return this.Gl.M()}Ti(){return this.Fi.M()}Kl(){return this.Yl.M()}ql(){return this.Hl.M()}tu(){return this.$l}iu(){return this.Xl}su(){return this.jl}Fe(t){return this.ua.S(t),this}eu(t){return this.Gl.S(t),this}ze(t){return this.Fi.S(t),this}hu(t){return this.Ul.S(t),this.Wl.S(t),this}ru(t){return this.Wl.S(t),this}nu(t){return this.Ul.S(t),this}ou(t){return this.Yl.S(t<0?0:t),this}au(t){return this.Hl.S(void 0!==t&&t<=0?void 0:t),this}}var fr;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(fr||(fr={}));const Ar=(t,i)=>"function"==typeof i?i(t):i,gr=(t,i)=>!t||t!==i,mr=(t,i)=>!t||t.getThickness()!==i,yr=(t,i)=>t===at&&i!==at,pr=t=>t!==at&&t.getFillStyle()!==O;class Sr extends Jh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.lu=Ph.lineStyle,this.engine=t}Re(t){return this.lu=Ar(this.lu,t),this}uu(){return this.lu}ra(){return gr(this.cu,this.lu)}du(t){return mr(this.cu,t)}sa(){return yr(this.cu,this.lu)}ea(){return pr(this.lu)}fu(t){this.cu=t}}class vr extends Sr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Pi=n(0,0),this.Fi=n(0,0),this.Au=!1}S({min:t,max:i}){return t.x===this.Pi.x&&t.y===this.Pi.y&&i.x===this.Fi.x&&i.y===this.Fi.y||(this.Au=!0,this.Pi=t,this.Fi=i),this}Ii(){return this.Pi}Ti(){return this.Fi}Ve(t){return t.x===this.Pi.x&&t.y===this.Pi.y||(this.Au=!0,this.Pi=t),this}ze(t){return t.x===this.Fi.x&&t.y===this.Fi.y||(this.Au=!0,this.Fi=t),this}}class br extends Sr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.gu=void 0,this.mu=!1}}class xr extends Sr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.yu=[],this.Ya=Gi,this.$a=new Array,this.Ha=0,this.Za=Oh.NearestX,this.Qa=!1,this.pu=f(void 0),this.Fl=!1,this.Il=!1}Su(t){return this.pu.S(t),this}vu(){return this.pu.M()}qa(){return this.$a}tl(){return this.yu}Ka(t){return this.Za=t,this}Nt(){return this.Qa=!0,this.yu.length=0,this.Ha=0,this.$a=[],this.Ya=Gi,this}ol(){return this.Ha-(Number(this.Fl)+Number(this.Il))}al(){return this.$a.length}Rl(t){return this.Fl=t,this}El(){return this.Fl}zl(t){return this.Il=t,this}Vl(){return this.Il}}const Mr=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==Ct.notDraggable?i===Ct.draggable?Pe.Move:i===Ct.onlyHorizontal?Pe.Horizontal:Pe.Vertical:void 0};class _r{constructor(){this.Xi=!0,this.D=new s,this.bu=0,this.wt=(t,i,s)=>{0===this.bu&&this.D.emit("mouseEnter",this,i),this.bu+=1},this.Ct=(t,i,s)=>{this.bu-=1,this.bu<1&&(this.D.emit("mouseLeave",this,i),this.bu=0)},this.kt=(t,i,s)=>{this.D.emit("mouseClick",this,i)},this.Tt=(t,i,s)=>{this.D.emit("mouseDoubleClick",this,i)},this.Ft=(t,i,s)=>{this.D.emit("mouseDown",this,i)},this.It=(t,i,s)=>{this.D.emit("mouseUp",this,i)},this.Pt=(t,i,s)=>{this.D.emit("mouseMove",this,i)},this.Bt=(t,i,s,e)=>{this.D.emit("mouseDragStart",this,i,s)},this.Dt=(t,i,s,e,h,r)=>{this.D.emit("mouseDrag",this,i,s,e,h)},this.Lt=(t,i,s,e,h)=>{this.D.emit("mouseDragStop",this,i,s,e)},this.Rt=(t,i,s)=>{this.D.emit("mouseWheel",this,i)},this.Et=(t,i)=>{this.bu+=1,this.D.emit("touchStart",this,i)},this.zt=(t,i)=>{this.D.emit("touchMove",this,i)},this.Vt=(t,i)=>{this.bu-=1,this.D.emit("touchEnd",this,i)},this.xu=t=>(t instanceof Jh?t.setMouseEnterEventHandler(this.wt).setMouseLeaveEventHandler(this.Ct).setMouseClickEventHandler(this.kt).setMouseDoubleClickEventHandler(this.Tt).setMouseDownEventHandler(this.Ft).setMouseUpEventHandler(this.It).setMouseMoveEventHandler(this.Pt).setMouseDragEventHandler(this.Dt).setMouseDragStartEventHandler(this.Bt).setMouseDragStopEventHandler(this.Lt).setMouseWheelEventHandler(this.Rt).setTouchStartEventHandler(this.Et).setTouchMoveEventHandler(this.zt).setTouchEndEventHandler(this.Vt):(t.onMouseEnter(this.wt),t.onMouseLeave(this.Ct),t.onMouseClick(this.kt),t.onMouseDoubleClick(this.Tt),t.onMouseDown(this.Ft),t.onMouseUp(this.It),t.onMouseMove(this.Pt),t.onMouseDrag(this.Dt),t.onMouseDragStart(this.Bt),t.onMouseDragStop(this.Lt),t.onMouseWheel(this.Rt),t.onTouchStart(this.Et),t.onTouchMove(this.zt),t.onTouchEnd(this.Vt)),t)}onMouseEnter(t){return this.D.on("mouseEnter",t)}onMouseLeave(t){return this.D.on("mouseLeave",t)}onMouseClick(t){return this.D.on("mouseClick",t)}onMouseDoubleClick(t){return this.D.on("mouseDoubleClick",t)}onMouseDown(t){return this.D.on("mouseDown",t)}onMouseUp(t){return this.D.on("mouseUp",t)}onMouseMove(t){return this.D.on("mouseMove",t)}onMouseDragStart(t){return this.D.on("mouseDragStart",t)}onMouseDrag(t){return this.D.on("mouseDrag",t)}onMouseDragStop(t){return this.D.on("mouseDragStop",t)}onMouseWheel(t){return this.D.on("mouseWheel",t)}onTouchStart(t){return this.D.on("touchStart",t)}onTouchMove(t){return this.D.on("touchMove",t)}onTouchEnd(t){return this.D.on("touchEnd",t)}offMouseEnter(t){return this.D.off(t,"mouseEnter")}offMouseLeave(t){return this.D.off(t,"mouseLeave")}offMouseClick(t){return this.D.off(t,"mouseClick")}offMouseDoubleClick(t){return this.D.off(t,"mouseDoubleClick")}offMouseDown(t){return this.D.off(t,"mouseDown")}offMouseUp(t){return this.D.off(t,"mouseUp")}offMouseMove(t){return this.D.off(t,"mouseMove")}offMouseDragStart(t){return this.D.off(t,"mouseDragStart")}offMouseDrag(t){return this.D.off(t,"mouseDrag")}offMouseDragStop(t){return this.D.off(t,"mouseDragStop")}offMouseWheel(t){return this.D.off(t,"mouseWheel")}offTouchStart(t){return this.D.off(t,"touchStart")}offTouchMove(t){return this.D.off(t,"touchMove")}offTouchEnd(t){return this.D.off(t,"touchEnd")}getIsUnderMouse(){return this.bu>0}setVisible(t){const i=this.Xi!==t;return this.Xi=t,i&&this.D.emit("visibleStateChanged",this,this.Xi),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}}const wr=(t,i,s)=>{const e=t.getDraggingMode();if(e!==Ct.notDraggable){const h=t.scale.mi(t.getPosition(),{x:e!==Ct.onlyVertical?i.x:0,y:e!==Ct.onlyHorizontal?i.y:0}),r=t.scale,n=t.getSize(),o=t.getOrigin(),a=r.mi({x:r.x.getInnerStart(),y:r.y.getInnerStart()},As({x:(1+o.x)/2,y:(1+o.y)/2},n)),l=r.mi({x:r.x.getInnerEnd(),y:r.y.getInnerEnd()},As({x:(o.x-1)/2,y:(o.y-1)/2},n)),u={x:Math.min(Math.max(h.x,a.x),l.x),y:Math.min(Math.max(h.y,a.y),l.y)};t.setPosition(u),ii(s)}},Cr=(t,i,s,e,h)=>{wr(t,h,i)},kr=(t,i,s,e,h)=>{wr(t,e,h)};class Tr extends _r{constructor(t,i,s,e,h){super(),this.position=n(50,50),this.origin=n(0,0),this.size=n(0,0),this.$i=!1,this.Mu=void 0,this._u=void 0,this.wu=Mr,this.Cu=void 0,this.Bo=!0,this.ku=()=>{const t="function"==typeof this.wu?this.wu(this):this.wu;t&&(this._u=this.ks.us.Wr(t))},this.Tu=()=>{this.ks.us.Ur(this._u)},this.Xt=A(0,0,0,0),this.ks=t,this.renderingScale=i,this.scale=s,this.Vo=e,this.qi=h,this.ks.Ss(),this.onMouseEnter(this.ku),this.onMouseLeave(this.Tu),this.onMouseDrag(Cr);const r=Ks(new te(Bt,kr,Bt));this.onTouchStart(r.onTouchStart),this.onTouchMove(r.onTouchMove),this.onTouchEnd(r.onTouchEnd),this.qi=h}setMouseInteractions(t){return this.Fu().forEach((i=>i.setMouseInteractions(t))),this.Bo=t,this}getMouseInteractions(){return this.Bo}setEffect(t){return this.es=this.es||this.ks.us.es.hs(this,{Iu:{shapes:this.Fu()}}),this.es.Iu.ps(t),this}getEffect(){return!!this.es&&this.es.Iu.vs()}setAutoDispose(t){return this.Cu=t,this.ks.Ss(),this}getAutoDispose(){return this.Cu}getSize(t=_t.Everything){return t===_t.Everything?n(this.size.x+(this.Xt.left+this.Xt.right),this.size.y+(this.Xt.bottom+this.Xt.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.Xt="object"==typeof t?m(this.Xt,t):{left:t,top:t,right:t,bottom:t},this.ks.Ss(),this}getMargin(){return this.Xt}Te(){if(this.Cu){const t=this.size,i=this.renderingScale.oi(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.Cu.type&&s.x>=this.Cu.maxWidth||"max-height"===this.Cu.type&&s.y>=this.Cu.maxHeight)&&this.dispose()}return this}Ps(){return this}dispose(){return this.$i||(this.ks.Ss(),this.$i=!0,this.Vo(this),this.D.emit("dispose",this),this.Fu().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.Fu().forEach((i=>i.setVisible(t))),this.ks.Ss(),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setPosition(t){return this.position=t,this.ks.Ss(),this}getPosition(t=this.origin,i=_t.Everything){const s=this.getSize(_t.Everything),e=this.scale.mi(this.position,As({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===_t.Everything)return this.scale.mi(e,As({x:(t.x+1)/2,y:(t.y+1)/2},s));const h=this.scale.mi(e,{x:this.Xt.left,y:this.Xt.bottom}),r=this.getSize(_t.Content);return this.scale.mi(h,As({x:(t.x+1)/2,y:(t.y+1)/2},r))}setOrigin(t){return this.origin=t,this.ks.Ss(),this}getOrigin(){return this.origin}setDraggingMode(t=Ct.notDraggable){return this.Mu=t,this.ks.Ss(),this}getDraggingMode(){return void 0!==this.Mu?this.Mu:Ct.notDraggable}setMouseStyle(t){return this.wu=t,this}getMouseStyle(){return this.wu}}class Fr extends Tr{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ya=A(),this.Pu=0,this.ks=t,this.Du=e,this.backgroundElement=new this.Du(this.ks,this.renderingScale,this.scale,Bt,r),this.xu(this.backgroundElement)}Fu(){return this.backgroundElement.Fu()}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Te(){return super.Te(),this.$i||this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,_t.PaddedBackground)).Te(),this}Ps(){const t=this.getSize(_t.PaddedContent);return this.backgroundElement.Bu(t).Ps(),super.Ps()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.ya="object"==typeof t?m(this.ya,t):{left:t,top:t,right:t,bottom:t},this.ks.Ss(),this}getPadding(){return this.ya}getSize(t=_t.Everything){let i=super.getSize(t);return t>=_t.PaddedContent&&(i=n(i.x+this.ya.left+this.ya.right,i.y+this.ya.bottom+this.ya.top)),t>=_t.PaddedBackground&&(i=n(i.x+this.backgroundElement.Lu()+this.backgroundElement.Ru(),i.y+this.backgroundElement.Eu()+this.backgroundElement.zu())),i}getPosition(t=this.origin,i=_t.Everything){if(i===_t.Everything)return super.getPosition(t,i);const s=super.getPosition(n(-1,-1),_t.Everything),e=this.getMargin(),h=this.scale.mi(s,{x:e.left,y:e.bottom});if(i===_t.PaddedBackground){const i=this.getSize(_t.PaddedBackground);return this.scale.mi(h,As({x:(t.x+1)/2,y:(t.y+1)/2},i))}const r=this.scale.mi(h,{x:this.backgroundElement.Lu(),y:this.backgroundElement.Eu()});if(i===_t.PaddedContent){const i=this.getSize(_t.PaddedContent);return this.scale.mi(r,As({x:(t.x+1)/2,y:(t.y+1)/2},i))}const o=this.getPadding(),a=this.scale.mi(r,{x:o.left,y:o.bottom}),l=this.getSize(_t.Content);return this.scale.mi(a,As({x:(t.x+1)/2,y:(t.y+1)/2},l))}setMouseInteractions(t){return super.setMouseInteractions(t),this.backgroundElement.setMouseInteractions(t),this}getHighlight(){return this.Pu}setHighlight(t){return this.Pu=Ci(t),this.backgroundElement.setHighlight(t),this.D.emit("highlight",this,t),this}}const Ir=t=>"setBackground"in t;class Pr extends _r{constructor(t,i,s,e,h,r,n,o,a,l,u){super(),this.u=0,this.Vu=1,this.Ou=!0,this.Nu=new uh,this.Gu=!0,this.$i=!1,this.axisScale=e,this.renderingScale=h,this.Wu=n,this.Uu=o,this.Yu=a,this.Vo=l,this.Hu=i,this.$u=s,this.Xu=this.xu(this.Hu.Ee(this.renderingScale)),this.qi=u,this.ju=this.xu(this.Yu.Zu(this.$u,this.renderingScale,r,Bt,this.qi,!1).setOrigin(qt(this.Uu)).setDirection(this.Uu)),this.axis=t,this.setMouseInteractions(!1),"major"===this.ju.Qu?this.Xu.Re(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.ju.Qu?this.Xu.Re(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.ju.Qu&&this.Xu.Re(u.cursorGridStrokeStyleX)}setValue(t){return this.u=t,this.$u.Ss(),this.D.emit("valueChange",this,this.u),this}getValue(){return this.u}setTextFormatter(t){return this.Ju=t,this.$u.Ss(),this}setTickLength(t){return this.ju.setPointerLength(t),this.Hu.Ss(),this}getTickLength(){return this.ju.getPointerLength()}setTickLabelPadding(t){return this.ju.setTickLabelPadding(t),this.Hu.Ss(),this}setTickLabelRotation(t){return this.ju.setTextRotation(t),this.Hu.Ss(),this}getTickLabelRotation(){return this.ju.getTextRotation()}getTickLabelPadding(){return this.ju.getTickLabelPadding()}setGridStrokeLength(t){return this.Vu=t,this.Hu.Ss(),this}getGridStrokeLength(){return this.Vu}setGridStrokeStyle(t){return this.Xu.Re(t),this.Hu.Ss(),this}getGridStrokeStyle(){return this.Xu.uu()}dispose(){return this.$i||(this.$i=!0,this.Xu.dispose(),this.ju.dispose(),this.Vo(this),this.Hu.us.Ss(),this.D.emit("dispose",this)),this}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setMarkerVisible(t){return this.Ou=t,this.$u.Ss(),this}getMarkerVisible(){return this.Ou}setMarker(t){return t(this.ju),this.$u.Ss(),this}getMarker(){return this.ju}setMouseInteractions(t){return this.ju.setMouseInteractions(t),this.Xu.setMouseInteractions(t),this}getMouseInteractions(){return this.Xu.getMouseInteractions()}setAllocatesAxisSpace(t){return this.Gu=t,this.$u.Ss(),this}getAllocatesAxisSpace(){return this.Gu}isInScale(){return Qi(this.u,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}}class Dr extends Pr{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,u,a,l),this.Ku=!1,this.Vo=a,this.Hu=i,this.$u=s}dispose(){return this.Ku=!1,super.dispose()}update(){return this}plot(t,i,s,e,h){if(this.isInScale()&&this.getVisible()&&t){this.Ku=!1;const t=ft(this.u,this.axisScale,this.Wu.getWidth(this.renderingScale));this.Xu.setVisible(!0).Ve(this.Wu.toPoint(t,i)).ze(this.Wu.toPoint(t,i-(e+s*this.Vu))),this.Ou?(this.Ju&&this.ju.setText(this.Ju(this.u,this)),this.ju.setVisible(!0).setPosition(this.Wu.toPoint(t,h))):this.ju.setVisible(!1)}else this.Xu.setVisible(!1),this.ju.setVisible(!1);return this.ju.Ps().Te(),this}qu(){const t=this.ju.Ps().getSize();return this.Wu.getHeight(t)}}const Br=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),Lr=(t,i)=>(gi(t.setButtonSize(i.uiButtonSize),i,!1,{fill:i.uiButtonFillStyle}),t),Rr=(t,i,s)=>{s&&Ir(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},Er={uiElement:void 0,stylers:t.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},zr={background:void 0,setBackground(t){return{...this,background:t}}},Vr={Zu(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return Rr(n,h,r),n}},Or={Zu(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return Rr(n,h,r),n}};class Nr extends Tr{constructor(){super(...arguments),this.tc=!0}Te(){return super.Te(),this}setMouseInteractions(t){return this.tc=t,this}getMouseInteractions(){return this.tc}Fu(){return[]}}class Gr extends Nr{onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}Bu(t){return this.size=t,this}Lu(){return 0}Ru(){return 0}zu(){return 0}Eu(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return O}setStrokeStyle(){return this}getStrokeStyle(){return at}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class Wr extends Tr{constructor(){super(...arguments),this.D=new s,this.Pu=0}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}getHighlight(){return this.Pu}setHighlight(t){return this.Pu=t,this.Fu().forEach((i=>i.cs(t))),this.D.emit("highlight",this,t),this.ks.Ss(),this}}class Ur extends Wr{}class Yr extends Ur{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ks=t,this.Na=this.ks.ic(this.renderingScale,fr.Simple).setVisible(!1).Ce(O).we(at),this.xu(this.Na)}sc(){const t=this.hc();if(t.length>2){const i=is(t),s=n(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const e=t.map((t=>{const e=ds(t,cs(i.min,-1));return this.scale.mi(this.position,ds(e,As(cs(ds(this.origin,n(1,1)),-.5),s)))})).map((t=>At(t,this.scale,this.renderingScale)));this.Na.pl(e).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.Na&&this.Na.setVisible(!1),this.setContentSize(n(0,0))}Te(){return super.Te(),this.$i||this.sc(),this}Ps(){return this.sc(),super.Ps()}setVisible(t){return super.setVisible(t),this.Na.setVisible(t),this}}const Hr=(t,i,s)=>t*(1-s)+i*s,$r=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),u=Hr(s.value,h.value,r),c=Hr(i.value,e.value,o);return Hr(c,u,l)},Xr={warm:t=>i=>x(60/(t-1)*i,.8,.8),cold:t=>i=>x(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>x(360/t*i,.8,.8),reverseSpectrum:t=>i=>x(360/t*(t-i),.8,.8),flatUI:t=>i=>x(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return x(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return x(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return x(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return x(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return x(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>x(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return x(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return x(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),x(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return x(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let l=0;if(o!==a){const t=o-a;switch(o){case h:l=(r-n)/t+(r<n?6:0);break;case r:l=(n-h)/t+2;break;case n:l=(h-r)/t+4;break;default:l=0}return l=l/6*360,x(l,.8,e)}return x(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>x(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>jr([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>jr([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>jr([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>jr([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>jr([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>jr([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},jr=(t,i,s)=>{const e=Qr(i,s),[h,r]=Jr(e,t),n=Zr(t[h]),o=Zr(t[r]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:Hr(n.h,o.h,a),s:Hr(n.s,o.s,a),v:Hr(n.v,o.v,a)};return x(l.h,l.s,l.v)},Zr=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,l=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(b(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},Qr=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},Jr=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class Kr{constructor(){this.type="simple"}}const qr=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),tn=new Kr;class sn{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=b("#000"),this.specularColor=b("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const en=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),hn=new sn,rn={Simple:Kr,Phong:sn};var nn;!function(t){t[t.Fill=0]="Fill",t[t.Fit=1]="Fit",t[t.Stretch=2]="Stretch",t[t.Center=3]="Center",t[t.Tile=4]="Tile"}(nn||(nn={}));const on=i({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:v(0,0,0,0),sourceMissingColor:v(0,0,0,0),fitMode:nn.Fill});class an extends on{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return S(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return S(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const ln=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),un={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},cn=i({type:"linestyle",lineType:"dashed",pattern:un.DashedEqual,fillStyle:new U({color:v(255,255,255)}),thickness:1,patternScale:3});class dn extends cn{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}V(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const fn=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),An=i({type:"icon",width:void 0,height:void 0,rc:void 0,nc:Bt,oc:Bt});class gn extends An{constructor(t,i,s,e){super({...e,rc:t,nc:i,oc:s})}dispose(){return this.oc(this),this}setWidth(t){const i=this.set("width",t);return this.nc(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.nc(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.nc(s),s}oi(){if(!this.rc)return{x:0,y:0};const t=this.rc.width,i=this.rc.height;if(0===t||0===i)return{x:0,y:0};const s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const mn=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),yn=i({type:"glow",color:v(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class pn extends yn{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}const Sn=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type);class vn{constructor(t){this.ac=0,this.lc=0,this.uc=0,this.cc=!1,this.dc=!0,this.fc=!1,this.Ac={warningDisplayed:!1,expandEvents:[]},this.D=new s,this.dc=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,void 0!==(null==t?void 0:t.dataPattern)&&(this.gc={userSpecified:null===t.dataPattern?void 0:t.dataPattern}),this.mc=void 0!==(null==t?void 0:t.lookupValues)&&t.lookupValues,this.yc=void 0!==(null==t?void 0:t.colors)&&t.colors,this.Sc=void 0!==(null==t?void 0:t.ids)&&t.ids,this.vc=void 0!==(null==t?void 0:t.sizes)&&t.sizes,this.bc=void 0!==(null==t?void 0:t.rotations)&&t.rotations,this.xc=(null==t?void 0:t.dataStorage)?t.dataStorage:Float64Array,this.Mc=!1!==(null==t?void 0:t.allowInputModification)}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,i){return this.appendSamples({xValues:t,yValues:i}),this}appendJSON(t,i={x:"x",y:"y"}){const s=t.length,e=i.x,h=i.y,r=i.lookupValue,n=i.size,o=i.rotation,a=i.color,l=i.id;let u,c,d,f,A,g,m;if(e){u=new this.xc(s);for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[e]}}if(h){c=new this.xc(s);for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[h]}}if(r){d=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];d[i]=s[r]}}if(a){f=[];for(let i=0;i<s;i+=1){const s=t[i];f[i]=s[a]}}if(l){A=new Uint32Array(s);for(let i=0;i<s;i+=1){const s=t[i];A[i]=s[l]}}if(n){g=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];g[i]=s[n]}}if(o){m=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];m[i]=s[o]}}return this.appendSamples({xValues:u,yValues:c,ids:A,colors:f,lookupValues:d,sizes:g,rotations:m,start:i.start,step:i.step}),this}appendSample(t){const{samplesCacheX:i,samplesCacheY:s,samplesCacheColors:e,samplesCacheIDs:h,samplesCacheLookup:r,samplesCacheSize:n,samplesCacheRotation:o,maxSampleCount:a,dataPattern:l}=this._c({appendCount:1}),u=this.wc(),c=void 0!==t.step?t.step:1,d=void 0!==t.x?t.x:u?u.x+c:0,f=void 0!==t.y?t.y:u?u.y+c:0;if(l&&this.dc&&this.Cc&&this.kc&&!this.Tc(l,d,f)&&!this.fc)return this.Fc(this.Cc,this.kc,new this.xc([d]),new this.xc([f]),void 0!==t.lookupValue?new Float32Array([t.lookupValue]):void 0,void 0!==t.color?this.Ic((t.color,[t.color])):void 0,void 0!==t.id?new Uint32Array([t.id]):void 0,void 0!==t.size?new Float32Array([t.size]):void 0,void 0!==t.rotation?new Float32Array([t.rotation]):void 0,l),this;if(i[this.ac]=d,s[this.ac]=f,void 0!==t.lookupValue&&r&&(r[this.ac]=t.lookupValue),void 0!==t.color&&e){const i=this.Ic((t.color,[t.color]));void 0!==i&&(e[this.ac]=i[0])}return void 0!==t.id&&h&&(h[this.ac]=t.id),void 0!==t.size&&n&&(n[this.ac]=t.size),void 0!==t.rotation&&o&&(o[this.ac]=t.rotation),this.Pc(this.ac,this.ac),this.ac+=1,this.ac>a-1&&(this.ac=0,this.cc=!0),this.lc=Math.min(this.lc+1,a),this.uc+=1,this}appendSamples(t){const{lookupValues:i,colors:s,ids:e,sizes:h,rotations:r,start:n,step:o}=t;let a=t.offset,l=t.count;const u=t.xValues||t.yValues;if(!u)return this;const c=u.length;if(a=void 0!==a?a:0,l=void 0!==l?l:c-a,l<=0)return this;const d=void 0!==t.offsetLookupValues?t.offsetLookupValues:a,f=void 0!==t.offsetColors?t.offsetColors:a,A=void 0!==t.offsetIds?t.offsetIds:a,g=void 0!==t.offsetSizes?t.offsetSizes:a,m=void 0!==t.offsetRotations?t.offsetRotations:a,[y,p]=this.Dc(l,t.xValues,"x",n,o,a),[S,v]=this.Dc(l,t.yValues,"y",n,o,a),b=this.Ic(s),{samplesCacheX:x,samplesCacheY:M,samplesCacheLookup:_,samplesCacheColors:w,samplesCacheIDs:C,samplesCacheSize:k,samplesCacheRotation:T,maxSampleCount:F,dataPattern:I,incomingDataReplacedCache:P}=this._c({appendCount:l,...0===p&&0===v&&0===a&&0===d&&0===f&&0===A&&0===g&&0===m?{incomingDataX:y,incomingDataY:S,incomingDataLookup:i,incomingDataIDs:e,incomingDataColors:b,incomingDataSize:h,incomingDataRotation:r}:{}});if(!P&&I&&this.dc&&this.Cc&&this.kc){const t=y[p],s=S[v];if(!this.Tc(I,t,s)&&!this.fc)return this.Fc(this.Cc,this.kc,Cn(y,p,p+l),Cn(S,v,v+l),Cn(i,d,d+l),Cn(b,f,f+l),Cn(e,A,A+l),Cn(h,g,g+l),Cn(r,m,m+l),I),this}const D=F-this.ac,B=Math.min(l,D);if(B>0&&(P||(_n(x,y,p,B,this.ac),_n(M,S,v,B,this.ac),i&&_&&_n(_,i,d,B,this.ac),e&&C&&_n(C,e,A,B,this.ac),b&&w&&_n(w,b,f,B,this.ac),h&&k&&_n(k,h,g,B,this.ac),r&&T&&_n(T,r,m,B,this.ac)),this.Pc(this.ac,this.ac+B-1),this.ac+=B,this.ac>F-1&&(this.ac=0,this.cc=!0)),this.lc=Math.min(this.lc+B,F),this.uc+=B,this.Bc(),l-B>0){const t={xValues:y?Cn(y,p+B,void 0):void 0,yValues:S?Cn(S,v+B,void 0):void 0,lookupValues:i?Cn(i,d+B,void 0):void 0,ids:e?Cn(e,A+B,void 0):void 0,colors:b?Cn(b,f+B,void 0):void 0,sizes:h?Cn(h,g+B,void 0):void 0,rotations:r?Cn(r,m+B,void 0):void 0};this.appendSamples(t)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const i=this.Cc||this.kc;if(!i)return this;const s=i.length;if(void 0!==t.x&&(this.Cc=this.Cc||new this.xc(s),this.Cc.fill(t.x)),void 0!==t.y&&(this.kc=this.kc||new this.xc(s),this.kc.fill(t.y)),void 0!==t.lookupValue&&(this.Lc=this.Lc||new Float32Array(s),this.Lc.fill(t.lookupValue)),void 0!==t.color){const i=this.Ic([t.color]);i&&(this.Rc=this.Rc||new Uint32Array(s),this.Rc.fill(i[0]))}return void 0!==t.size&&(this.Ec=this.Ec||new Float32Array(s),this.Ec.fill(t.size)),void 0!==t.rotation&&(this.zc=this.zc||new Float32Array(s),this.zc.fill(t.rotation)),this.D.emit("cleared"),this}alterSamples(t,i){const{xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a}=i;let l=i.offset,u=i.count;const c=s||e||h||r||n||o||a;if(!c)return this;const d=c.length;if(l=void 0!==l?l:0,u=void 0!==u?u:d-l,u<=0)return this;const f=void 0!==i.offsetLookupValues?i.offsetLookupValues:l,A=void 0!==i.offsetColors?i.offsetColors:l,g=void 0!==i.offsetIds?i.offsetIds:l,m=void 0!==i.offsetSizes?i.offsetSizes:l,y=void 0!==i.offsetRotations?i.offsetRotations:l,p=this.Ic(r),S=this.uc-1,v=void 0!==this.Vc?Math.max(this.uc-this.Vc,0):0,b=t+u-1,x=Math.max(t,v),M=Math.min(b,S),_=M-x+1;if(this.uc>0&&_>0){const{samplesCacheX:i,samplesCacheY:r,samplesCacheColors:u,samplesCacheIDs:c,samplesCacheLookup:d,samplesCacheSize:S,samplesCacheRotation:b}=this._c({appendCount:0}),w=i.length;if(void 0!==this.Vc&&this.cc&&this.uc%this.Vc!=0){const v=this.uc-this.uc%this.Vc,_=this.uc-1,C=this.uc-this.lc,k=v-1,T=Math.max(x,C),F=Math.min(M,k)-T+1;if(F>0){const v=T-t,x=bn(T,this.uc,w,this.ac);s&&_n(i,s,l+v,F,x),e&&_n(r,e,l+v,F,x),h&&d&&_n(d,h,f+v,F,x),n&&c&&_n(c,n,g+v,F,x),p&&u&&_n(u,p,A+v,F,x),o&&S&&_n(S,o,m+v,F,x),a&&b&&_n(b,a,y+v,F,x)}const I=Math.max(x,v),P=Math.min(M,_)-I+1;if(P>0){const v=I-t,x=bn(I,this.uc,w,this.ac);s&&_n(i,s,l+v,P,x),e&&_n(r,e,l+v,P,x),h&&d&&_n(d,h,f+v,P,x),n&&c&&_n(c,n,g+v,P,x),p&&u&&_n(u,p,A+v,P,x),o&&S&&_n(S,o,m+v,P,x),a&&b&&_n(b,a,y+v,P,x)}}else{const t=x-v;s&&_n(i,s,l,_,t),e&&_n(r,e,l,_,t),h&&d&&_n(d,h,f,_,t),n&&c&&_n(c,n,g,_,t),p&&u&&_n(u,p,A,_,t),o&&S&&_n(S,o,m,_,t),a&&b&&_n(b,a,y,_,t)}this.D.emit("cleared")}const w=t+u-1-S;if(w>0){const i=M+1-t;this.appendSamples({xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l+i,offsetLookupValues:f+i,offsetColors:A+i,offsetIds:g+i,offsetSizes:m+i,offsetRotations:y+i,count:w})}return this}alterSamplesByID(t,i){if(!this.Sc)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const s=t.length,e=this.Oc;if(s<=0||!e)return this;const h=(("object"==typeof i.color?this.Ic([i.color]):"number"==typeof i.color?[i.color]:[])||[])[0],r=Array.isArray(i.xValues)?new this.xc(i.xValues):i.xValues,n=Array.isArray(i.yValues)?new this.xc(i.yValues):i.yValues,o=Array.isArray(i.yValues)?new Float32Array(i.yValues):i.yValues,a=this.Ic(i.colors),l=Array.isArray(i.sizes)?new Float32Array(i.sizes):i.sizes,u=Array.isArray(i.rotations)?new Float32Array(i.rotations):i.rotations,c=e.length,d=this.lc,f=this.uc-1,A=Math.max(f-d+1,0);for(let d=0;d<s;d+=1){const s=t[d],g=Mn(s,A,f,(t=>e[bn(t,this.uc,c,this.ac)])),m=bn(g,this.uc,c,this.ac);e[m]===s&&(void 0!==i.x&&this.Cc&&(this.Cc[m]=i.x),void 0!==i.y&&this.kc&&(this.kc[m]=i.y),void 0!==i.lookupValue&&this.Lc&&(this.Lc[m]=i.lookupValue),void 0!==i.size&&this.Ec&&(this.Ec[m]=i.size),void 0!==i.rotation&&this.zc&&(this.zc[m]=i.rotation),void 0!==h&&this.Rc&&(this.Rc[m]=h),r&&this.Cc&&(this.Cc[m]=r[d]),n&&this.kc&&(this.kc[m]=n[d]),o&&this.Lc&&(this.Lc[m]=o[d]),a&&this.Rc&&(this.Rc[m]=a[d]),l&&this.Ec&&(this.Ec[m]=l[d]),u&&this.zc&&(this.zc[m]=u[d]))}return this.D.emit("cleared"),this}clear(){return this.ac=0,this.lc=0,this.uc=0,this.cc=!1,this.D.emit("cleared"),this}getSampleCount(){return this.lc}getNextSampleIndex(){return this.uc}setMaxSampleCount(t){if("object"==typeof t){this.Nc&&this.offMaxSampleCountExceeded(this.Nc);const i=t.max;this.Nc=this.onMaxSampleCountExceeded(((t,s,e,h)=>{if(void 0!==i&&e>=i)return;let r=2*e;void 0!==i&&(r=Math.min(r,i)),this.setMaxSampleCount(r)})),void 0===this.Vc&&this.setMaxSampleCount(1e5)}else if("number"==typeof t){const i=t;if(void 0!==this.Vc&&this.Vc>i)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.Cc||!this.kc)return this.Vc=i,this;if(i===this.Vc)return this;if(this.cc&&0!==this.ac)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Vc=i,this.lc<i?(this.ac=this.lc,this.cc=!1):(this.ac=0,this.cc=!0);const s=new this.xc(this.Vc);s.set(this.Cc);const e=new this.xc(this.Vc);if(e.set(this.kc),this.Cc=s,this.kc=e,this.mc){const t=new Float32Array(this.Vc);this.Lc&&t.set(this.Lc),this.Lc=t}if(this.Sc){const t=new Uint32Array(this.Vc);this.Oc&&t.set(this.Oc),this.Oc=t}if(this.yc){const t=new Uint32Array(this.Vc);this.Rc&&t.set(this.Rc),this.Rc=t}if(this.vc){const t=new Float32Array(this.Vc);this.Ec&&t.set(this.Ec),this.Ec=t}if(this.bc){const t=new Float32Array(this.Vc);this.zc&&t.set(this.zc),this.zc=t}}return this}getMaxSampleCount(){return this.Vc}readBack(t){if(!this.Cc||!this.kc)return{xValues:new this.xc,yValues:new this.xc};const i=this.Cc.length;let s=[];if(null==t?void 0:t.onlyInRange){const i=this.Gc();if(!i)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const e=Math.min(t.onlyInRange.start,t.onlyInRange.end),h=Math.max(t.onlyInRange.start,t.onlyInRange.end),r=xn(e,h,this.Cc,this.uc,this.lc,this.ac,i,0);if(!r)return{xValues:new this.xc,yValues:new this.xc};s=r.dataRanges}else if(void 0!==this.Vc&&this.cc&&this.uc%this.Vc!=0){const t=this.ac,e=i-t,h=this.ac-1;s.push({offset:t,count:e}),s.push({offset:0,count:h+1})}else s.push({offset:0,count:this.lc});const e=s.reduce(((t,i)=>t+i.count),0),h=new this.xc(e),r=new this.xc(e),n=this.yc?new Uint32Array(e):void 0,o=this.mc?new Float32Array(e):void 0,a=this.Sc?new Uint32Array(e):void 0,l=this.vc?new Float32Array(e):void 0,u=this.bc?new Float32Array(e):void 0;let c=0;for(const t of s)h.set(this.Cc.subarray(t.offset,t.offset+t.count),c),r.set(this.kc.subarray(t.offset,t.offset+t.count),c),this.yc&&n&&this.Rc&&n.set(this.Rc.subarray(t.offset,t.offset+t.count),c),this.mc&&o&&this.Lc&&o.set(this.Lc.subarray(t.offset,t.offset+t.count),c),this.Sc&&a&&this.Oc&&a.set(this.Oc.subarray(t.offset,t.offset+t.count),c),this.vc&&l&&this.Ec&&l.set(this.Ec.subarray(t.offset,t.offset+t.count),c),this.bc&&u&&this.zc&&u.set(this.zc.subarray(t.offset,t.offset+t.count),c),c+=t.count;return{xValues:h,yValues:r,lookupValues:o,colors:n,ids:a,sizes:l,rotations:u}}onMaxSampleCountExceeded(t){return this.D.on("maxSampleCountExceeded",t)}offMaxSampleCountExceeded(t){return this.D.off(t)}Dc(t,i,s,e,h,r){if(void 0===i){const i=this.wc();h=void 0!==h?h:1,e=void 0!==e?e:i?i[s]+h:0;const r=new this.xc(t);for(let i=0;i<t;i+=1)r[i]=e+i*h;return[r,0]}return[i,r]}Ic(t){if(!t||0===t.length)return;const i=t[0];if(S(i)){const i=t.length,s=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e],h=255*i.a<<24|255*i.b<<16|255*i.g<<8|255*i.r;s[e]=h}return s}return t}Wc(){return{min:0,max:void 0!==this.Vc&&this.cc?this.Vc-1:this.lc-1}}Uc(t){t=Math.min(t,this.lc),this.uc-=t,this.lc-=t,this.ac-=t,this.ac<0&&void 0!==this.Vc&&(this.ac+=this.Vc)}Fc(t,i,s,e,h,r,n,o,a,l){var u;const c=s.length,d=s[0],f=s[c-1],A=e[c-1];if(this.Tc(l,f,A)){const t=(null===(u=this.wc())||void 0===u?void 0:u.x)||0;let i=0;for(let e=0;e<c;e+=1)if(s[e]>t){i=e;break}const l={xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:i};this.fc=!0,this.appendSamples(l),this.fc=!1}else{const l=t.length,u=this.lc,f=this.uc-1,A=Math.max(f-u+1,0),g=Mn(d,A,f,(i=>t[bn(i,this.uc,l,this.ac)])),m=g-1,y=g+1,p=t[bn(g,this.uc,l,this.ac)],S=y<=this.uc-1?t[bn(y,this.uc,l,this.ac)]:void 0,v=void 0!==S&&S<d?y+1:p<d?g+1:m+1,b=f-v+1,x=new this.xc(b),M=new this.xc(b),_=this.mc?new Float32Array(b):void 0,w=this.yc?new Uint32Array(b):void 0,C=this.Sc?new Uint32Array(b):void 0,k=this.vc?new Float32Array(b):void 0,T=this.bc?new Float32Array(b):void 0;let F=0;for(let s=v;s<=f;s+=1){const e=bn(s,this.uc,l,this.ac);x[F]=t[e],M[F]=i[e],_&&this.Lc&&(_[F]=this.Lc[e]),w&&this.Rc&&(w[F]=this.Rc[e]),C&&this.Oc&&(C[F]=this.Oc[e]),k&&this.Ec&&(k[F]=this.Ec[e]),T&&this.zc&&(T[F]=this.zc[e]),F+=1}this.Uc(b);const I=new this.xc(c+b);I.set(s),I.set(x,c);const P=new this.xc(c+b);let D,B,L,R,E;P.set(e),P.set(M,c),h&&_&&(D=new Float32Array(c+b),D.set(h),D.set(_,c)),r&&w&&(B=new Uint32Array(c+b),B.set(r),B.set(w,c)),n&&C&&(L=new Uint32Array(c+b),L.set(n),L.set(C,c)),o&&k&&(R=new Float32Array(c+b),R.set(o),R.set(k,c)),a&&T&&(E=new Float32Array(c+b),E.set(a),E.set(T,c)),this.fc=!0,this.appendSamples({xValues:I,yValues:P,lookupValues:D,colors:B,ids:L,sizes:R,rotations:E}),this.fc=!1,this.D.emit("cleared")}}Gc(){return this.Bc()}Bc(){let t;if(this.gc&&"userSpecified"in this.gc)t=this.gc.userSpecified;else if(this.gc&&"autoDetectResult"in this.gc)t=this.gc.autoDetectResult;else if(this.Cc&&this.kc&&this.uc>0){const i=void 0!==this.Vc&&this.cc?this.ac:0,s=this.lc-1,e=void 0!==this.Vc&&this.cc?0:void 0,h=void 0!==this.Vc&&this.cc?this.ac-1:void 0,[r,n]=void 0!==e&&void 0!==h&&Math.abs(h-e)>Math.abs(s-i)?[e,h]:[i,s];if(1+n-r>=2){let i,s,e=this.Cc[r],h=this.kc[r];for(let t=r+1;t<=n;t+=1){if(!1!==i){const s=this.Cc[t],h=Math.sign(s-e);0!==h&&i&&i.direction!==h?i=!1:0===h||i||(i={direction:h}),e=s}if(!1!==s){const i=this.kc[t],e=Math.sign(i-h);0!==e&&s&&s.direction!==e?s=!1:0===e||s||(s={direction:e}),h=i}}t=i&&i.direction>0?Vh.ProgressiveX:i&&i.direction<0?Vh.RegressiveX:s&&s.direction>0?Vh.ProgressiveY:s&&s.direction<0?Vh.RegressiveY:void 0,this.gc={autoDetectResult:t},t&&Tt.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${t}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nAdd { dataPattern: '${t}'} } to your application when creating series or DataSetXY to get clear this warning.`)}}if(t&&"ProgressiveX"!==t)throw new Error("LightningChart JS New XY rework beta features do not yet support other data patterns than ProgressiveX. This will be introduced in near future.");return t}Tc(t,i,s){const e=this.wc();return!e||("ProgressiveX"===t?i>e.x:"RegressiveX"===t?i<e.x:"ProgressiveY"===t?s>e.y:"RegressiveY"!==t||s<e.y)}_c(t){if(t.incomingDataX&&t.incomingDataY&&0===this.lc&&!this.Cc&&!this.kc&&(void 0===this.Vc||this.Vc===t.appendCount)&&this.Mc)return this.Cc=wn(t.incomingDataX,this.xc)||new this.xc,this.kc=wn(t.incomingDataY,this.xc)||new this.xc,this.Lc=this.mc?wn(t.incomingDataLookup,Float32Array):void 0,this.Oc=this.Sc?wn(t.incomingDataIDs,Uint32Array):void 0,this.Rc=this.yc?wn(t.incomingDataColors,Uint32Array):void 0,this.Ec=this.vc?wn(t.incomingDataSize,Float32Array):void 0,this.zc=this.bc?wn(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(void 0===this.Vc){const i=this.lc+t.appendCount;if(!this.Cc||!this.kc)return this.Cc=new this.xc(i),this.kc=new this.xc(i),this.Lc=this.mc?new Float32Array(i):void 0,this.Oc=this.Sc?new Uint32Array(i):void 0,this.Rc=this.yc?new Uint32Array(i):void 0,this.Ec=this.vc?new Float32Array(i):void 0,this.zc=this.bc?new Float32Array(i):void 0,{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:i};const s=this.Cc.length;if(s<i){if(!this.Ac.warningDisplayed){const s=Tt.performance.now();if(this.Ac.expandEvents=this.Ac.expandEvents.filter((t=>s-t.timestamp<5e3)),i>1e3&&this.Ac.expandEvents.push({timestamp:s}),this.Ac.expandEvents.length>5)return Tt.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.Ac.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this._c(t)}const s=new this.xc(i);s.set(this.Cc),this.Cc=s;const e=new this.xc(i);if(e.set(this.kc),this.kc=e,this.mc){const t=new Float32Array(i);this.Lc&&t.set(this.Lc),this.Lc=t}if(this.Sc){const t=new Uint32Array(i);this.Oc&&t.set(this.Oc),this.Oc=t}if(this.yc){const t=new Uint32Array(i);this.Rc&&t.set(this.Rc),this.Rc=t}if(this.vc){const t=new Float32Array(i);this.Ec&&t.set(this.Ec),this.Ec=t}if(this.bc){const t=new Float32Array(i);this.zc&&t.set(this.zc),this.zc=t}return this.ac=this.lc,{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:i}}if(s>4*i){const t=new this.xc(i);t.set(this.Cc.subarray(0,this.lc)),this.Cc=t;const s=new this.xc(i);if(s.set(this.kc.subarray(0,this.lc)),this.kc=s,this.mc){const t=new Float32Array(i);this.Lc&&t.set(this.Lc.subarray(0,this.lc)),this.Lc=t}if(this.Sc){const t=new Uint32Array(i);this.Oc&&t.set(this.Oc.subarray(0,this.lc)),this.Oc=t}if(this.yc){const t=new Uint32Array(i);this.Rc&&t.set(this.Rc.subarray(0,this.lc)),this.Rc=t}if(this.vc){const t=new Float32Array(i);this.Ec&&t.set(this.Ec.subarray(0,this.lc)),this.Ec=t}if(this.bc){const t=new Float32Array(i);this.zc&&t.set(this.zc.subarray(0,this.lc)),this.zc=t}return{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:i}}return{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:s}}return t.appendCount+this.lc>this.Vc&&this.D.emit("maxSampleCountExceeded",this,this.lc,this.Vc,this.lc+t.appendCount),this.Cc=this.Cc||new this.xc(this.Vc),this.kc=this.kc||new this.xc(this.Vc),this.Lc=this.Lc||(this.mc?new Float32Array(this.Vc):void 0),this.Oc=this.Oc||(this.Sc?new Uint32Array(this.Vc):void 0),this.Rc=this.Rc||(this.yc?new Uint32Array(this.Vc):void 0),this.Ec=this.Ec||(this.vc?new Float32Array(this.Vc):void 0),this.zc=this.zc||(this.bc?new Float32Array(this.Vc):void 0),{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:this.Vc}}Yc(){if(!this.Cc||!this.kc||0===this.lc)return;if(void 0===this.Vc)return this.uc>0?{x:this.Cc[0],y:this.kc[0]}:void 0;if(!this.cc)return{x:this.Cc[0],y:this.kc[0]};let t=this.ac-this.lc;return t<0&&(t+=this.Vc),{x:this.Cc[t],y:this.kc[t]}}wc(){if(!this.Cc||!this.kc||0===this.lc)return;if(void 0===this.Vc){const t=this.lc-1;return t>=0?{x:this.Cc[t],y:this.kc[t]}:void 0}let t=this.ac-1;return t<0&&(t+=this.Vc),{x:this.Cc[t],y:this.kc[t]}}Hc(t,i,s,e){const h=this.Bc(),r=this.Cc,n=this.kc;if(!r||!n)return;const o=t=>({x:r[t],y:n[t],lookupValue:this.mc&&this.Lc?this.Lc[t]:void 0,id:this.Sc&&this.Oc?this.Oc[t]:void 0,color:this.yc&&this.Rc?this.Rc[t]:void 0,size:this.vc&&this.Ec?this.Ec[t]:void 0,rotation:this.bc&&this.zc?this.zc[t]:void 0}),a=r.length,l=this.lc,u=this.uc-1,c=Math.max(u-l+1,0);if(h){const s=this.Yc(),e=this.wc();if(!(s&&e&&this.Cc&&this.kc))return;const r="ProgressiveX"===h||"RegressiveX"===h?"x":"y",n="x"===r?"y":"x",l="x"===r?this.Cc:this.kc,d="x"===n?this.Cc:this.kc,f=t[r],A=Math.min(s[r],e[r]),g=Math.max(s[r],e[r]);if(f<A||f>g)return;const m=Mn(f,c,u,(t=>l[bn(t,this.uc,a,this.ac)])),y=bn(m,this.uc,a,this.ac);if(!i)return o(y);const p=m-1,S=m+1,v=f>=l[y]&&("ProgressiveX"===h||"ProgressiveY"===h)?S<=u?bn(S,this.uc,a,this.ac):void 0:p>=c?bn(p,this.uc,a,this.ac):void 0;if(void 0===v)return;const b=l[y],x=d[y],M=l[v],_=d[v],w=Math.min(b,M),C=w===b?x:_,k=Math.max(b,M),T=Hr(C,k===b?x:_,(f-w)/(k-w));return"ProgressiveX"===h||"RegressiveX"===h?{x:f,y:T}:{x:T,y:f}}let d,f=Number.MAX_VALUE;const A=At(t,s,e),g=this.lc-1;for(let t=0;t<=g;t+=1){const i=r[t],h=n[t];if(!Number.isNaN(i)&&!Number.isNaN(h)){const r=ft(i,s.x,e.x),n=ft(h,s.y,e.y),o=(r-A.x)**2+(n-A.y)**2;o<f&&(f=o,d=t)}}return void 0===d?void 0:o(d)}Pc(t,i){this.D.emit("changed",t,i)}Ut(t){return this.D.off(t)}$c(t){return this.D.on("changed",t)}Xc(t){return this.D.on("cleared",t)}}const bn=(t,i,s,e)=>t%s,xn=(t,i,s,e,h,r,n,o)=>{if(0===e||0===h)return;const a=s.length,l=e-1,u=Math.max(l-h+1,0),c=Mn(t,u,l,(t=>s[bn(t,e,a)])),d=Mn(i,u,l,(t=>s[bn(t,e,a)])),f=Math.max(c-o,u),A=Math.min(d+o,l),g=bn(f,e,a),m=bn(A,e,a);return g>m?{iFirstSample:f,iLastSample:A,iFirstSampleDataArray:g,iLastSampleDataArray:m,dataRanges:[{offset:g,count:a-g},{offset:0,count:m+1}]}:{iFirstSample:f,iLastSample:A,iFirstSampleDataArray:g,iLastSampleDataArray:m,dataRanges:[{offset:g,count:m-g+1}]}},Mn=(t,i,s,e)=>{const h=s;for(;i!==s;){const h=Math.ceil((i+s)/2);t<e(h)?s=h-1:i=h}const r=Math.abs(t-e(i));return i<h&&Math.abs(t-e(i+1))<r?i+1:i},_n=(t,i,s,e,h)=>{const r=i.length;if(Array.isArray(i))for(let r=0;r<e;r+=1)t[h+r]=i[s+r];else t.set(r===e?i:i.subarray(s,s+e),h)},wn=(t,i)=>void 0===t?void 0:Array.isArray(t)?new i(t):t instanceof i?t:new i(t),Cn=(t,i,s)=>{if(void 0!==t)return Array.isArray(t)?t.slice(i,s):t.subarray(i,s)};class kn extends Wr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.la="label",this.Na=this.ks.Pr(this.renderingScale).Rh(this.la).Ce(O).Fr(Ri).Ir(Ri),this.setMargin(5),this.xu(this.Na)}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}Te(){const t=this.getPosition(n(0,0),_t.Content),i=At(t,this.scale,this.renderingScale);return this.Na.Fe(i),this}Ps(){this.Na.Ps();const t=0===this.la.length?n(0,0):this.Na.jc();return this.setContentSize(t),super.Ps()}setText(t){return this.la=t,this.Na.Rh(this.la),this.ks.Ss(),this}getText(){return this.la}setFont(t){return this.Na.Oh(t),this.ks.Ss(),this}getFont(){return this.Na.Vh()}setTextRotation(t){return this.Na.Nh(t),this.ks.Ss(),this}getTextRotation(){return this.Na.Gh()}}const Tn={...Er,...Vr,uiElement:kn};class Fn extends Ur{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Zc=!1,this.fitTo=this.Bu.bind(this),this.setSize=this.fitTo,this.Na=this.ks.ic(i).Ce(O).we(at),this.xu(this.Na)}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}setStrokeStyle(t){return this.Na.we(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.ao()}Te(){const t=is([this.getPosition(n(-1,-1),_t.Content),this.getPosition(n(1,1),_t.Content)].map((t=>At(t,this.scale,this.renderingScale))));return this.Zc?this.Na.pl([{x:(t.min.x+t.max.x)/2,y:t.min.y},{x:t.min.x,y:(t.min.y+t.max.y)/2},{x:(t.min.x+t.max.x)/2,y:t.max.y},{x:t.max.x,y:(t.min.y+t.max.y)/2}]):this.Na.pl([t.min,{x:t.min.x,y:t.max.y},t.max,{x:t.max.x,y:t.min.y}]),this}Bu(t){return this.setContentSize(t),this.ks.Ss(),this}Lu(){return 0}Ru(){return 0}zu(){return 0}Eu(){return 0}}class In extends Ur{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Qc=n(0,0),this.Na=t.Jc(i).eu(0).ze(360).Ce(O).we(at),this.xu(this.Na)}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}setStrokeStyle(t){return this.Na.we(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.ao()}Te(){const t=this.getSize(_t.Content).x/2;return this.Na.ru(t*this.renderingScale.Wi().x).nu(t*this.renderingScale.Wi().y).Fe(At(this.getPosition(n(0,0),_t.Content),this.scale,this.renderingScale)).au(255).Ps(),this}Bu(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(n(2*i,2*i)),this.Qc=t,this.ks.Ss(),this}Lu(){return(this.getSize(_t.Content).x-this.Qc.x)/2}Ru(){return(this.getSize(_t.Content).x-this.Qc.x)/2}zu(){return(this.getSize(_t.Content).y-this.Qc.y)/2}Eu(){return(this.getSize(_t.Content).y-this.Qc.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(n(i,i)),this.Qc=t,this}}class Pn extends Yr{constructor(t,i,s,e,h){super(t,i,s,fr.Simple,e,h),this.Kc=f(n(0,0)),this.qc=!1,this.ks=t,this.sc()}hc(){const t=this.Kc.M();if(this.qc){const i=Math.min(t.x,t.y);return[n(0,0),n(i/2,i/2),n(0,i),n(-i/2,i/2)]}const i=2*Math.sqrt(this.Kc.M().x*this.Kc.M().x/4+this.Kc.M().y*this.Kc.M().y/4),s=n(Math.cos(Math.PI/4)*i,0),e=n(0,Math.sin(Math.PI/4)*i),h=n(0,0),r=ds(h,ds(s,e)),o=ds(r,ds(e,cs(s,-1)));return[h,r,o,fs(o,ds(s,e))]}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}setStrokeStyle(t){return this.Na.we(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.ao()}Bu(t){return this.Kc.S(t),this.qc=!1,this.ks.Ss(),this}Lu(){return this.qc?0:(this.getSize(_t.Content).x-this.Kc.M().x)/2}Ru(){return this.qc?0:(this.getSize(_t.Content).x-this.Kc.M().x)/2}zu(){return this.qc?0:(this.getSize(_t.Content).y-this.Kc.M().y)/2}Eu(){return this.qc?0:(this.getSize(_t.Content).y-this.Kc.M().y)/2}fitTo(t){return this.Kc.S(t),this.qc=!0,this.ks.Ss(),this}}class Dn extends Yr{constructor(t,i,s,e,h){super(t,i,s,fr.Simple,e,h),this.td=f(n(0,0)),this.sd=f(10),this.ed=f(void 0),this.Uu=f(kt.Right),this.sc()}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}setStrokeStyle(t){return this.Na.we(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.ao()}setDirection(t){return this.Uu.S(t),this.ks.Ss(),this}getDirection(){return this.Uu.M()}setPointerLength(t){return this.sd.S(t),this.ks.Ss(),this}getPointerLength(){return this.sd.M()}setPointerAngle(t){return this.ed.S(t),this.ks.Ss(),this}getPointerAngle(){let t=this.ed.M();if(void 0===t){const i=this.hd();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}Bu(t){return this.td.S(t),this.ks.Ss(),this}rd(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}nd(){return ti(this.Uu.M())?this.td.M().x:this.td.M().y}hd(){return ti(this.Uu.M())?this.td.M().y:this.td.M().x}Lu(){switch(this.Uu.M()){case kt.Right:return 0;case kt.Left:return this.getPointerLength();case kt.Up:case kt.Down:return Math.max(0,this.rd()-this.hd());default:return 0}}Ru(){switch(this.Uu.M()){case kt.Right:return this.getPointerLength();case kt.Left:return 0;case kt.Up:case kt.Down:return Math.max(0,this.rd()-this.hd());default:return 0}}zu(){switch(this.Uu.M()){case kt.Right:case kt.Left:return Math.max(0,this.rd()-this.hd());case kt.Up:return this.getPointerLength();case kt.Down:default:return 0}}Eu(){switch(this.Uu.M()){case kt.Right:case kt.Left:return Math.max(0,this.rd()-this.hd());case kt.Up:return 0;case kt.Down:return this.getPointerLength();default:return 0}}hc(){const t=qt(this.Uu.M()),i=ls(n(0,0),t),s=this.getPointerLength(),e=this.rd(),h=this.nd(),r=this.hd();if(!(0!==s&&0!==e||0!==h&&0!==r))return[];const o=n(0,0),a=ds(ds(o,cs(t,-s)),cs(i,e/2)),l=ds(a,cs(i,(r-e)/2)),u=ds(l,cs(t,-h)),c=ds(ds(o,cs(t,-s)),cs(i,-e/2)),d=ds(c,cs(i,-(r-e)/2)),f=ds(d,cs(t,-h));let A;return A=0===h||0===r?[o,a,c]:0===s||0===e?[l,u,f,d]:Lt(r,e)?[o,a,u,f,c]:[o,a,l,u,f,d,c],A}}class Bn extends Wr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.Bu.bind(this),this.setSize=this.fitTo,this.od=new vn,this.Na=this.ks.dd(i).Re(at).ud(O).ld(O).ad(this.od),this.xu(this.Na)}Fu(){return[this.Na]}setShape(t){return this.Na.fd(t),this}getShape(){return this.Na.Ad()}setRotation(t){return this.Na.gd(t),this}getRotation(){return this.Na.md()}setFillStyle(t){return this.Na.ld(t),this.ks.Ss(),this}getFillStyle(){return this.Na.yd()}Te(){const t=At(this.getPosition({x:0,y:0},_t.Content),this.scale,this.renderingScale),i=Math.max(this.size.x,this.size.y);if(this.od.clear(),i>0){const s=this.Na.Ad(),e=this.Na.yd(),h=mn(s)&&s,r=ln(e)&&e;if(h){const t=i/h.oi().y;this.Na.pd(t)}else if(r){const t=r.source;if(t instanceof Image){const s=i/t.height;this.Na.pd(s)}}else this.Na.pd(i);this.od.appendSample(t)}return this}Bu(t){return this.setContentSize(t),this.ks.Ss(),this}Lu(){return 0}Ru(){return 0}zu(){return 0}Eu(){return 0}}const Ln={...Er,...Vr,uiElement:Bn};class Rn extends Nr{setSize(t){return this.setContentSize(t),this.ks.Ss(),this}}class En extends Fr{constructor(){super(...arguments),this.Sd=[],this.vd=0,this.bd=t=>{const i=this.Sd.indexOf(t);i>=0&&this.Sd.splice(i,1)}}getMembers(){return this.Sd}getMemberCount(){return this.Sd.length}setMinimumSize(t){return this.xd=t,this.ks.Ss(),this}getMinimumSize(){return this.xd}addElement(t,i=-1){const s=t.Zu(this.ks,this.renderingScale,this.scale,this.bd,this.qi,!1);return s.setMouseInteractions(this.getMouseInteractions()),i>=0?this.Sd.splice(i,0,s):this.Sd.push(s),s.setVisible(this.getVisible()),this.xu(s),this.$i&&(bi(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.Sd.slice().forEach(Dt),this}setVisible(t){return super.setVisible(t),this.Sd.forEach((i=>i.setVisible(t))),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let i=0;i<this.Sd.length;i+=1)this.Sd[i].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.Sd.length;t+=1)if(this.Sd[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let s=0;s<this.Sd.length;s+=1){const e=this.Sd[s];"getHighlight"in(i=e)&&"setHighlight"in i&&e.setHighlight(t)}var i;return this}}class zn extends En{Te(){super.Te();const t=this.getPosition(n(-1,1),_t.Content),i=this.Sd.reduce(((t,i)=>t+ +(i instanceof Rn)),0),s=i>0?(this.size.x-this.vd)/i:0;return this.Sd.reduce(((i,e)=>e instanceof Rn?this.scale.mi({x:i,y:t.y},{x:s+e.getSize().x,y:0}).x:e.setOrigin(n(-1,1)).setPosition(n(i,t.y)).Te().getPosition(n(1,0)).x),t.x),this}Ps(){for(let t=0;t<this.Sd.length;t+=1){const i=this.Sd[t];i instanceof Vn&&i.setMinimumSize(0),i.Ps()}const t=this.Sd.reduce(this.Md.bind(this),o(0,0));this.vd=t.x;const i=void 0===this.xd?t:n(Math.max(t.x,this.xd),t.y);this.setContentSize(i);for(let t=0;t<this.Sd.length;t+=1){const s=this.Sd[t];s instanceof Vn&&s.setMinimumSize(i.y).Ps()}return super.Ps()}Md(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(On,i).setSize(n(0,t))}}class Vn extends En{Te(){super.Te();const t=this.getPosition(n(-1,1),_t.Content),i=this.Sd.reduce(((t,i)=>t+ +(i instanceof Rn)),0),s=i>0?(this.size.y-this.vd)/i:0;return this.Sd.reduce(((i,e)=>e instanceof Rn?this.scale.mi({x:t.x,y:i},{x:0,y:-(s+e.getSize().y)}).y:e.setOrigin(n(-1,1)).setPosition(n(t.x,i)).Te().getPosition(n(0,-1)).y),t.y),this}Ps(){for(let t=0;t<this.Sd.length;t+=1){const i=this.Sd[t];i instanceof zn&&i.setMinimumSize(0),i.Ps()}const t=this.Sd.reduce(this.Md.bind(this),o(0,0));this.vd=t.y;const i=void 0===this.xd?t:n(t.x,Math.max(t.y,this.xd));this.setContentSize(i);for(let t=0;t<this.Sd.length;t+=1){const s=this.Sd[t];s instanceof zn&&s.setMinimumSize(i.x).Ps()}return super.Ps()}Md(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(On,i).setSize(n(0,t))}}const On={...Er,...Vr,uiElement:Rn};class Nn extends zn{constructor(){super(...arguments),this.Sd=[]}addColumn(){return this.addElement(Un,void 0)}getColumn(t,i=!1){return i&&this.Sd.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.Sd[t]}}class Gn extends Vn{constructor(){super(...arguments),this.Sd=[]}addRow(){return this.addElement(Yn,void 0)}getRow(t,i=!1){return i&&this.Sd.length<=t?(this.addRow(),this.getRow(t,!0)):this.Sd[t]}}const Wn={...Er,...zr,...Or},Un={...Wn,uiElement:Vn,background:Fn},Yn={...Wn,uiElement:zn,background:Fn},Hn={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},$n=(t,i)=>{const s={},e=`stylable${t}s`;return s[e]=i,s[`set${t}FillStyle`]=function(t){return this[e].forEach((i=>i.setFillStyle(t))),this},s[`get${t}FillStyle`]=function(){return this[e][0].getFillStyle()},s[`set${t}Font`]=function(t){return this[e].forEach((i=>i.setFont(t))),this},s[`get${t}Font`]=function(){return this[e][0].getFont()},s[`set${t}Rotation`]=function(t){return this[e].forEach((i=>i.setTextRotation(t))),this},s[`get${t}Rotation`]=function(){return this[e][0].getTextRotation()},s},Xn=$n("Text",[]),jn={button:void 0,isLocked:!1,setOn(t){const i=this.button.getOn()!==t;return this.button.setOn(t),i&&this.D.emit("switch",t),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},onSwitch(t){return this.D.on("switch",(i=>t(this,i)))},offSwitch(t){return this.D.off(t,"switch")},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},Zn={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},Qn={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},Jn={...Er,...zr,background:Fn,Zu(t,i,s,e,h,r){const n=new zn(t,i,s,this.background,e,h),o=n.addElement(Tn,void 0),a=Object.assign(n,Hn,{setTextLabel:o},Xn,{stylableTexts:[o]});return Rr(a,h,r),this.applyStylers(a,h)}}.addStyler(Br),Kn={...Er,...zr,background:Dn,Zu(t,i,s,e,h,r){const n=new zn(t,i,s,this.background,e,h),o=n.addElement(Tn,void 0),a=n.getBackground(),l=Object.assign(n,Hn,{setTextLabel:o},Xn,{stylableTexts:[o]},Qn,{pointable:a},{setTickLabelPadding(t){return this.getDirection()===kt.Up?(this.setPadding({top:t}),o.setMargin({top:0})):this.getDirection()===kt.Down?(this.setPadding({bottom:t}),o.setMargin({bottom:0})):this.getDirection()===kt.Right?(this.setPadding({right:t}),o.setMargin({right:0})):this.getDirection()===kt.Left&&(this.setPadding({left:t}),o.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===kt.Up?this.getPadding().top:this.getDirection()===kt.Down?this.getPadding().bottom:this.getDirection()===kt.Right?this.getPadding().right:this.getPadding().left}});return l.Qu="other",l.setPointerLength(h.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(h.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(h.uiTextFont).setTextFillStyle(h.uiTextFillStyle).setBackground((t=>t.setFillStyle(h.uiBackgroundFillStyle).setStrokeStyle(h.uiBackgroundStrokeStyle))),Rr(l,h,r),this.applyStylers(l,h)}};class qn extends Tr{constructor(t,i,e,h,r,n){super(t,i,e,r,n),this.Ds=!1,this.D=new s,this._d=O,this.wd=O,this.getOn=()=>this.Ds,this.Cd=this.xu(new Bn(this.ks,this.renderingScale,this.scale,Bt,n).setShape(h)),this.wd=n.uiButtonFillStyleHidden||n.uiButtonFillStyle}Fu(){return[...this.Cd.Fu()]}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}setOn(t){return this.Ds=t,this.Cd.setFillStyle(t?this._d:this.wd),this.ks.Ss(),this}setOffFillStyle(t){return this.wd="function"==typeof t?t(this.wd):t,this.Ds||this.Cd.setFillStyle(this.wd),this}getOffFillStyle(){return this.wd}setSize(t){return this.Cd.fitTo("number"==typeof t?n(t,t):t),this}getSize(){return this.Cd.getSize()}setOnFillStyle(t){return this._d="function"==typeof t?t(this._d):t,this.Ds&&this.Cd.setFillStyle(this._d),this}getOnFillStyle(){return this._d}setButtonShape(t){return this.Cd.setShape(t),this.ks.Ss(),this}getButtonShape(){return this.Cd.getShape()}Te(){return super.Te(),this.Cd.setVisible(this.getVisible()).setPosition(this.getPosition(n(0,0),_t.Content)).Te(),this}Ps(){const t=this.Cd.Ps().getSize();return this.setContentSize(t),super.Ps()}dispose(){return super.dispose(),this.Cd.dispose(),this}setMouseInteractions(t){return this.Cd.setMouseInteractions(t),this}getMouseInteractions(){return this.Cd.getMouseInteractions()}setHighlight(t){const i=Ci(t);return this.Cd.setHighlight(i),this.D.emit("highlight",this,t),this.ks.Ss(),this}getHighlight(){return this.Cd.getHighlight()}}const to={...Er,uiElement:qn,buttonShape:zh.Circle,setButtonShape(t){return{...this,buttonShape:t}},Zu(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.buttonShape,e,h),h);return Rr(n,h,r),n}},io={...Er,...zr,background:Fn,buttonBuilder:to,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},Zu(t,i,s,e,h,r){const n=new zn(t,i,s,this.background,e,h),o=n.addElement(Un);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(Un);l.addGap();const u=l.addElement(Tn);l.addGap(),n.addGap();const c=Object.assign(n,Hn,{setTextLabel:u},Xn,{stylableTexts:[u]},jn,{button:a},Zn);let d;return c.onMouseClick(((t,i)=>{c.getLocked()||c.setOn(!c.getOn())})),c.onMouseEnter((()=>c.setHighlight(!0))),c.onMouseLeave((()=>c.setHighlight(!1))),c.setMouseStyle(Pe.Point),c.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),c.onSwitch(((t,i)=>{i?d&&c.setTextFillStyle(d):(d=c.getTextFillStyle(),c.setTextFillStyle(c.getTextFillStyleHidden()))})),c.setPadding({left:5}),Rr(c,h,r),this.applyStylers(c,h)}}.addStyler(Br).addStyler(Lr);class so extends Tr{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.kd=[],this.Td=2,this.Fd="",this.Id=(t,i)=>void 0!==t.label?t.label:i.percentageValues?`${(100*t.value).toFixed(0)}%`:Rs(t.value,i.min,i.max),this.Pd=0,this.Dd=0,this.Bd=!1,this.ks=t,this.Ld=r,this.Rd=this.xu(t.ke(i).we(at)),this.Ed=this.xu(t.Pr(i).Ce(h.uiTextFillStyle).Oh(h.uiTextFont).setMouseInteractions(!1)),"vertical"===r?(this.zd=140,this.Vd=25):(this.zd=160,this.Vd=15)}Fu(){return[this.Rd,this.Ed]}Od(t){this.Nd=t;const i=ro(t,"vertical"===this.Ld?0:90,this.Bd);return this.Rd.Ce(i),this.ks.Ss(),this}Gd(){return this.Nd}Wd(t){return this.zd=t,this.ks.Ss(),this}Ud(){return this.zd}Yd(t){return this.Vd=t,this.ks.Ss(),this}Hd(){return this.Vd}$d(t){return this.Fd=t,this.ks.Ss(),this}Xd(){return this.Fd}jd(t){return this.Id=t,this.ks.Ss(),this}setLUTDisplayProportionalSteps(t){if(this.Bd=t,this.Nd){const t=ro(this.Nd,"vertical"===this.Ld?0:90,this.Bd);this.Rd.Ce(t)}return this.ks.Ss(),this}getLUTDisplayProportionalSteps(){return this.Bd}setFillStyle(t){return this.Ed.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Ed.Eh()}setFont(t){return this.Ed.Oh(t),this.ks.Ss(),this}getFont(){return this.Ed.Vh()}setTextRotation(t){return this.Dd=t,this.Ed.Nh(t),this.ks.Ss(),this}getTextRotation(){return this.Ed.Gh()}Te(){var t,i,s,e;if(super.Te(),this.$i||!this.getVisible())return this;const h=this.Nd;if(h){const r=this.renderingScale.Wi(),n=h.min,o=h.max;if("vertical"===this.Ld){const s=this.getPosition({x:-1,y:-1},_t.Content),e=ds(s,{x:this.Rd.oi().x+this.Td*r.x,y:0}),a={x:e.x,y:e.y+(this.Fd.length>0?this.Pd*r.y+this.Ed.oi().y:0)+.5*((null===(t=this.kd[0])||void 0===t?void 0:t.oi().y)||0)},l={x:a.x,y:this.getPosition({x:-1,y:1},_t.Content).y-.5*((null===(i=this.kd[this.kd.length-1])||void 0===i?void 0:i.oi().y)||0)};this.Rd.Fe({x:s.x,y:a.y}),this.Ed.Ea({x:-1,y:-1}).Fe(e),h.getSteps().forEach(((t,i)=>{const s=qi(a,l,this.Bd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.kd[i].Ea({x:-1,y:0}).Fe(s)}))}else{const t=this.getPosition({x:-1,y:-1},_t.Content),i=this.getPosition({x:1,y:1},_t.Content),a=this.kd.reduce(((t,i)=>Math.max(t,i.oi().y)),0),l=ds(t,{x:.5*((null===(s=this.kd[0])||void 0===s?void 0:s.oi().x)||0),y:a}),u={x:i.x,y:l.y},c={x:u.x-(.5*((null===(e=this.kd[this.kd.length-1])||void 0===e?void 0:e.oi().x)||0)+(this.Fd.length>0?this.Pd*r.x+this.Ed.oi().x:0)),y:l.y},d={x:l.x,y:l.y+this.Td*r.y};this.Rd.Fe(d),this.Ed.Ea({x:1,y:1}).Fe(u),h.getSteps().forEach(((t,i)=>{const s=qi(l,c,this.Bd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.kd[i].Ea({x:0,y:1}).Fe(s)}))}}return this}Ps(){if(this.Nd&&this.getVisible()){const t=this.Nd.getSteps();for(let i=this.kd.length;i<t.length;i+=1)this.kd.push(this.xu(this.ks.Pr(this.renderingScale).setMouseInteractions(!1)));for(let i=0;i<t.length;i+=1)this.kd[i].Ce(this.Ed.Eh()).Oh(this.Ed.Vh()).Rh(this.Id(t[i],this.Nd)).Nh(this.Dd);for(let i=t.length;i<this.kd.length;i+=1)this.kd[i].dispose();if(this.kd.length=t.length,this.Ed.Rh(this.Fd),"vertical"===this.Ld){const t=this.Vd,i=this.zd;this.Rd.q({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=t+Math.max(this.kd.reduce(((t,i)=>Math.max(t,i.Ps().jc().x)),0),this.Ed.Ps().jc().x),e=(this.Fd.length>0?this.Pd+this.Ed.Ps().jc().y:0)+i+.5*this.kd[0].Ps().jc().y+.5*this.kd[this.kd.length-1].Ps().jc().y;this.setContentSize({x:s,y:e})}else{const t=this.zd,i=this.Vd;this.Rd.q({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Fd.length>0?this.Pd+this.Ed.Ps().jc().x:0,.5*this.kd[this.kd.length-1].Ps().jc().x),e=t+.5*this.kd[0].Ps().jc().x+s,h=i+this.Td+this.kd.reduce(((t,i)=>Math.max(t,i.Ps().jc().y)),0);this.setContentSize({x:e,y:h})}}else this.kd.forEach((t=>t.dispose())),this.kd.length=0,this.Ed.setVisible(!1),this.Rd.setVisible(!1),this.setContentSize({x:0,y:0});return super.Ps()}dispose(){return super.dispose(),this.Rd.dispose(),this.kd.forEach(Dt),this.Ed.dispose(),this}setMouseInteractions(t){return this.Rd.setMouseInteractions(t),this}getMouseInteractions(){return this.Rd.getMouseInteractions()}}const eo={lutElement:{},setLUT(t){return this.lutElement.Od(t),this},getLUT(){return this.lutElement.Gd()},setLUTLength(t){return this.lutElement.Wd(t),this},getLUTLength(){return this.lutElement.Ud()},setLUTThickness(t){return this.lutElement.Yd(t),this},getLUTThickness(){return this.lutElement.Hd()},setLookUpUnit(t){return this.lutElement.$d(t),this},getLookUpUnit(){return this.lutElement.Xd()},setLUTStepValueFormatter(t){return this.lutElement.jd(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},ho={...Er,...zr,background:Fn,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},Zu(t,i,s,e,h,r){const n=new Vn(t,i,s,this.background,e,h),o=n.addElement({Zu:()=>new so(t,i,s,Bt,h,this.alignment)}),a=Object.assign(n,Xn,{stylableTexts:[o]},eo,{lutElement:o});return Rr(a,h,r),this.applyStylers(a,h)}}.addStyler(Br),ro=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new rt({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new rt({angle:i,stops:n})},no={...Er,...zr,background:Fn,buttonBuilder:to,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},Zu(t,i,s,e,h){const r=new Vn(t,i,s,this.background,e,h),n=r.addElement(Yn),o=n.addElement(Un);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(Un);l.addGap();const u=l.addElement(Tn);l.addGap();const c=r.addElement({Zu:()=>new so(t,i,s,Bt,h,this.alignment)});"vertical"===this.alignment&&c.setMargin({left:h.uiButtonSize+6});const d=Object.assign(r,Hn,{setTextLabel:u},Xn,{stylableTexts:[u,c]},$n("LUTText",[c]),jn,{button:a},eo,{lutElement:c},Zn);let f;return d.onMouseClick((()=>{d.getLocked()||d.setOn(!d.getOn())})),d.onMouseEnter((()=>d.setHighlight(!0))),d.onMouseLeave((()=>d.setHighlight(!1))),d.setMouseStyle(Pe.Point),d.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),d.onSwitch(((t,i)=>{i?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))})),d.setPadding({left:5}),this.applyStylers(d,h)}}.addStyler(Br).addStyler(Lr),oo={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,i){const s=!i||"object"!=typeof i||void 0===i.toggleVisibilityOnClick||i.toggleVisibilityOnClick,e=null==i?void 0:i.matchStyleExactly,h=i&&"object"==typeof i&&void 0!==i.builder?i.builder:void 0;return this.legendBoxDisposed()||(t instanceof pa?this.addChart(t,s,h,e):"attach"in t?this.addAttachable(t,s,h,e):t&&this.addDashboard(t,s,h,e)),this},addAttachable(t,i,s,e){const h=t.Gd&&t.Gd(),r=t.Cs&&t.Cs(),n=void 0!==e&&e;let o=s;if(!o){let t=h?no.setAlignment(this.alignment):io;void 0!==r&&(t=t.setButtonShape(r)),o=t}const a=this.addElement(o);if(h&&"setLUT"in a){a.setLUT(h.lut);const t=h.lut.getUnits(),i=h.lookUpProperty,s=t.length>0?t:"x"===i?"x":"y"===i?"y":"z"===i?"z":"";a.setLookUpUnit(s)}return this.entryStylers.forEach((t=>t(a))),this.entries.push({entry:a,component:t}),t.attach(a,i,n),i||a.setLocked(!0),this},addChart(t,i,s,e){return t.Zd().forEach((t=>this.addAttachable(t,i,s,e))),this},addDashboard(t,i,s,e){return t.getCells().filter((t=>t.panel instanceof pa)).forEach((t=>this.addChart(t.panel,i,s,e))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.forEach((i=>t(i.entry,i.component))),this}},ao={alignment:"vertical",layoutBuilder:Un,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?Yn:Un}},getAlignment(){return this.alignment},titleBuilder:Jn,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},lo={...Er,...zr,...ao,background:Fn,Zu(t,i,s,e,h,r){const n=this.layoutBuilder.setBackground(this.background).Zu(t,i,s,e,h,!1);let o=Object.assign(n,oo,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>n.$i});o.entries=[];const a=o.addElement("horizontal"===this.alignment?Un:Yn),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(h.legendTitleFillStyle).setTextFont(h.legendTitleFont);return a.addGap(),o=Object.assign(o,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),Rr(o,h,r),this.applyStylers(o,h)}}.addStyler(((t,i)=>t.setPadding(5)));class uo extends Tr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Qd=10,this.Jd=kt.Up,this.Kd=0,this.Qu="major",this.la=this.xu(t.Pr(this.renderingScale).Fr(Ri).Ir(Ri)),this.Le=this.xu(t.Ee(this.renderingScale))}Fu(){return[this.la]}Te(){if(super.Te(),this.$i)return this;const t=At(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.mi(t,{x:this.Jd===kt.Right?-this.Qd:this.Jd===kt.Left?this.Qd:0,y:this.Jd===kt.Up?-this.Qd:this.Jd===kt.Down?this.Qd:0}),s=this.renderingScale.mi(i,{x:this.Jd===kt.Right?-this.Kd:this.Jd===kt.Left?this.Kd:0,y:this.Jd===kt.Up?-this.Kd:this.Jd===kt.Down?this.Kd:0});return this.Le.Ve(t).ze(i),this.la.Fe(s).Ea(this.Jd===kt.Up?{x:0,y:1}:this.Jd===kt.Down?{x:0,y:-1}:this.Jd===kt.Right?{x:1,y:0}:{x:-1,y:0}),this}Ps(){const t=this.Le.uu().getThickness();return this.size=this.Jd===kt.Left||this.Jd===kt.Right?{x:this.Qd+this.Kd+this.la.Ps().jc().x,y:t}:{y:this.Qd+this.Kd+this.la.Ps().jc().y,x:t},super.Ps()}dispose(){return super.dispose(),this.la.dispose(),this.Le.dispose(),this}setVisible(t){return super.setVisible(t),this.la.setVisible(t),this.Le.setVisible(t),this}setMouseInteractions(t){return this.la.setMouseInteractions(t),this.Le.setMouseInteractions(t),this}getMouseInteractions(){return this.la.getMouseInteractions()}getText(){return this.la.Bh()}setTextFillStyle(t){return this.la.Ce(t),this.ks.Ss(),this}getTextFillStyle(){return this.la.Eh()}setTextFont(t){return this.la.Oh(t),this}setTextRotation(t){return this.la.Nh(t),this}getTextRotation(){return this.la.Gh()}getTextFont(){return this.la.Vh()}setText(t){return this.la.Rh(t),this.ks.Ss(),this}setDirection(t){return this.Jd=t,this.ks.Ss(),this}getDirection(){return this.Jd}setPointerLength(t){return this.Qd=t,this.ks.Ss(),this}getPointerLength(){return this.Qd}setTickLabelPadding(t){return this.Kd=t,this.ks.Ss(),this}getTickLabelPadding(){return this.Kd}setTickStyle(t){return this.Le.Re(t),this.ks.Ss(),this}getTickStyle(){return this.Le.uu()}}const co={...Er,Zu(t,i,s,e,h,r){const n=new uo(t,i,s,e,h);return Rr(n,h,r),this.applyStylers(n,h)}}.addStyler(Br),fo=co.addStyler(((t,i)=>(t.Qu="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Ao=co.addStyler(((t,i)=>(t.Qu="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),go=io.addStyler((t=>t.onSwitch(((i,s)=>!0===s?setTimeout((()=>t.setOn(!1)),300):void 0)))),mo=lo.setAlignment("horizontal"),yo=lo.setAlignment("vertical"),po={TextBox:Jn,CheckBox:io,ButtonBox:go,PointableTextBox:Kn,AxisTickMajor:fo,AxisTickMinor:Ao,LUTRange:ho},So={HorizontalLegendBox:mo,VerticalLegendBox:yo},vo=(t,i)=>{if(Hs(t)){const s=i.Po(t);return{x:s.engineX,y:s.engineY}}return t},bo=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},xo=(t,i,s,e=1)=>Rt(t+.1*e*(i-t)+.5*e*s.getPixelSize()*Math.sign(i-t),t,i),Mo=(t,i,s,e=1)=>{const h=s.ct(t),r=s.ct(i);return Rt(s.ut(h+.1*e*(r-h)+.5*e*Math.sign(r-h)),t,i)},_o={qd:0,tf:1,if:2,sf:3,ef:4,hf:5,rf:6,nf:7,af:8,lf:9,uf:10,cf:11,df:12,ff:13,Af:14,gf:15,mf:16,yf:17,pf:18,Sf:19,vf:20,bf:21,xf:22,Mf:23};class wo extends hh{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this._f=h}}class Co extends eh{constructor(t,i,e,h,r,o,a,l,u,c,d,f,A,g,m,y){var p,S,v;super(c,u,a,g,m,{numeric:u.getWidth({x:g.xAxisNumericTicks,y:g.yAxisNumericTicks}),datetime:u.getWidth({x:g.xAxisDateTimeTicks,y:g.yAxisDateTimeTicks}),time:u.getWidth({x:g.xAxisTimeTicks,y:g.yAxisTimeTicks})},y),this.wf=new Map,this.Cf=void 0,this.kf=0,this.Tf=[],this.Ff=[],this.Je=Ye.fitting,this.If=!0,this.Pf=8,this.Df=void 0,this.Bf=void 0,this.Lf=20,this.Rf=1,this.Ef=!0,this.zf=!0,this.Vf=!0,this.Of=!0,this.Nf=!0,this.Gf=!0,this.Wf=!0,this.Uf=!0,this.Yf=!0,this.Hf=!0,this.$f=this.wh.defaultDragMouseStyle,this.Xf=this.wh.defaultDragMouseStyle,this.jf=this.wh.defaultDragMouseStyle,this.Zf=this.wh.defaultDragMouseStyle,this.Qf=this.wh.defaultDragMouseStyle,this.D=new s,this.Jf=[],this.Kf=t=>{const i=this.Ff.indexOf(t);i>=0&&this.Ff.splice(i,1)},this.qf=t=>(this.Ff.indexOf(t)<0&&this.Ff.push(t),this.Kf),this.Et=(t,i)=>this.D.emit("axisAreaTouch",this,i),this.tA=ri(this.Jf),this.onAxisInteractionAreaMouseClick=t=>this.D.on("axisAreaMouseClick",t),this.onAxisInteractionAreaMouseDoubleClick=t=>this.D.on("axisAreaDoubleClick",t),this.onAxisInteractionAreaMouseDown=t=>this.D.on("axisAreaMouseDown",t),this.onAxisInteractionAreaMouseUp=t=>this.D.on("axisAreaMouseUp",t),this.onAxisInteractionAreaMouseEnter=t=>this.D.on("axisAreaMouseEnter",t),this.onAxisInteractionAreaMouseLeave=t=>this.D.on("axisAreaMouseLeave",t),this.onAxisInteractionAreaMouseMove=t=>this.D.on("axisAreaMouseMove",t),this.onAxisInteractionAreaMouseWheel=t=>this.D.on("axisAreaMouseWheel",t),this.onAxisInteractionAreaMouseDragStart=t=>this.D.on("axisAreaMouseDragStart",t),this.onAxisInteractionAreaMouseDrag=t=>this.D.on("axisAreaMouseDrag",t),this.onAxisInteractionAreaMouseDragStop=t=>this.D.on("axisAreaMouseDragStop",t),this.onAxisInteractionAreaTouchStart=t=>this.D.on("axisAreaTouchStart",t),this.onAxisInteractionAreaTouch=t=>this.D.on("axisAreaTouch",t),this.onAxisInteractionAreaTouchStop=t=>this.D.on("axisAreaTouchEnd",t),this.offAxisInteractionAreaMouseClick=t=>this.D.off(t,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=t=>this.D.off(t,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=t=>this.D.off(t,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=t=>this.D.off(t,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=t=>this.D.off(t,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=t=>this.D.off(t,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=t=>this.D.off(t,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=t=>this.D.off(t,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=t=>this.D.off(t,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=t=>this.D.off(t,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=t=>this.D.off(t,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=t=>this.D.off(t,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=t=>this.D.off(t,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=t=>this.D.off(t,"axisAreaTouchEnd"),this.zd={relative:1},this.iA=0,this.sA=0,this.eA=(t,i)=>i.getAllocatesAxisSpace()?Math.max(t,i.update().qu()):t,this.hA=t=>{const i=this.Tf.indexOf(t);-1!==i&&this.Tf.splice(i,1)},this.rA=(t,i)=>{this.D.emit("axisAreaDoubleClick",this,i),this.Of&&(this.setStopped(!1),ii(i))},this.nA=t=>{this.D.emit("axisAreaMouseEnter",this),(this.zf||this.Ef||this.Vf||this.Of)&&this.oA(t)},this.aA=t=>{this.lA(t),this.D.emit("axisAreaMouseLeave",this)},this.uA=(t,i,s)=>{var e,h;this.D.emit("axisAreaMouseDragStart",this,i,s);const r=zt(null===(e=this.chart.cA.Yn)||void 0===e?void 0:e.axisXYZoomMouseButton,0),o=zt(null===(h=this.chart.cA.Yn)||void 0===h?void 0:h.axisXYPanMouseButton,2),a=n(i.clientX,i.clientY);s===o&&this.zf?(this.dA(t),ii(i)):s===r&&this.Ef&&(this.fA(t,a),ii(i))},this.AA=(t,i,s,e,h)=>{var r,o;this.D.emit("axisAreaMouseDrag",this,i,s,e,h);const a=zt(null===(r=this.chart.cA.Yn)||void 0===r?void 0:r.axisXYZoomMouseButton,0),l=zt(null===(o=this.chart.cA.Yn)||void 0===o?void 0:o.axisXYPanMouseButton,2),u=n(i.clientX,i.clientY);s===l&&this.zf?(this.gA(t,h),ii(i)):s===a&&this.Ef&&(this.mA(t,e,u,h),ii(i))},this.yA=(t,i,s,e)=>{var h,r;this.D.emit("axisAreaMouseDragStop",this,i,s,e);const o=zt(null===(h=this.chart.cA.Yn)||void 0===h?void 0:h.axisXYZoomMouseButton,0),a=zt(null===(r=this.chart.cA.Yn)||void 0===r?void 0:r.axisXYPanMouseButton,2),l=n(i.clientX,i.clientY);s===a&&this.zf?(this.pA(t),ii(i)):s===o&&this.Ef&&(this.SA(t,e,l),ii(i)),t.getIsUnderMouse()&&(this.zf||this.Ef||this.Vf||this.Of)&&this.oA(t)},this.vA=(t,i)=>{if(this.D.emit("axisAreaMouseWheel",this,i),this.Vf){this.setStopped(!0);const t=this.wh.getWidth(this.bA.us.Pe(i.clientX,i.clientY)),s=this.dt.ut(t);this.zoom(s,vi(i)),ii(i)}},this.xA=(t,i)=>this.D.emit("axisAreaMouseClick",this,i),this.MA=(t,i)=>this.D.emit("axisAreaMouseDown",this,i),this._A=(t,i)=>this.D.emit("axisAreaMouseUp",this,i),this.wA=(t,i)=>this.D.emit("axisAreaMouseMove",this,i),this.CA=(t,i,s)=>{this.D.emit("axisAreaTouchStart",this,s),this.Ef&&(this.oA(t),this.fA(t,i),ii(s))},this.kA=(t,i,s,e,h)=>{this.D.emit("axisAreaTouch",this,h),this.Ef&&(this.mA(t,i,s,e),ii(h))},this.TA=(t,i,s,e)=>{this.D.emit("axisAreaTouchEnd",this,e),this.Ef&&(this.SA(t,i,s),this.lA(t),ii(e))},this.FA=(t,i,s,e)=>{(this.zf||this.Vf)&&(this.oA(t),this.dA(t),ii(e))},this.IA=(t,i,s,e,h,r)=>{if(this.zf){const i=n((e.x+h.x)/2,(e.y+h.y)/2);this.gA(t,i),ii(r)}if(this.Vf){const t=this.bA.us.Pe(i.x,i.y),n=this.bA.us.Pe(s.x,s.y),o=Math.abs(this.wh.getWidth(fs(t,e))-this.wh.getWidth(fs(n,h)))-Math.abs(this.wh.getWidth(t)-this.wh.getWidth(n)),a=this.dt.mi(this.Ih,-o),l=this.dt.mi(this.Ph,o);this.Qh(a,l,!0),ii(r)}},this.PA=(t,i,s,e)=>{(this.zf||this.Vf)&&(this.pA(t),this.lA(t),ii(e))},this.DA=(t,i)=>{(this.Nf||this.Gf)&&this.BA(t)},this.LA=(t,i)=>{this.RA(t)},this.EA=(t,i,s)=>{const e=n(i.clientX,i.clientY);this.Nf&&this.zA(t,e)},this.VA=(t,i,s,e,h)=>{const r=n(i.clientX,i.clientY);this.Nf&&this.OA(t,r,e,h)},this.NA=(t,i,s,e,h)=>{const r=n(i.clientX,i.clientY);this.Nf&&this.GA(t,r,e,h)},this.WA=(t,i,s,e)=>{const h=n(i.clientX,i.clientY);(this.Nf||this.Gf)&&this.UA(t,h,e),(this.Nf||this.Gf)&&this.BA(t)},this.YA=(t,i)=>{this.Gf&&(this.setStopped(!0),this.zoom(this.Ih,vi(i)),ii(i))},this.HA=(t,i)=>{this.Gf&&(this.setStopped(!0),this.zoom(this.Ph,vi(i)),ii(i))},this.$A=(t,i,s)=>{this.Nf&&(this.BA(t),this.zA(t,i),ii(s))},this.XA=(t,i,s,e,h)=>{this.Nf&&(this.OA(t,i,s,e),ii(h))},this.jA=(t,i,s,e,h)=>{this.Nf&&(this.GA(t,i,s,e),ii(h))},this.ZA=(t,i,s,e)=>{this.Nf&&(this.UA(t,i,s),this.RA(t),ii(e))},this.QA=t,this.bA=i,this.JA=h,this.KA=r,this.chart=c,this.qA=f,this.tg=e,this.ss=o,"logarithmic"===y.type&&this.chart.us.Nn(_o.Sf),A(this,this.qf),a.ig=this,this.sg=d,this.eg=this.sg>50?1:-1,this.hg=(v=this.wh.toPoint(0,-this.eg),Math.abs(v.x)>=Math.abs(v.y)?v.x>=0?kt.Right:kt.Left:v.y>=0?kt.Up:kt.Down),this.rg=l,this.ng=this.dt instanceof Vs?(new Gs).Ri(this.wh.toVec2(this.dt,this.rg)):(new Ws).Ri(this.wh.toVec2(this.dt,this.rg)),this.og=this.chart.pixelScale,this.ag=(new Gs).Ri(this.wh.toVec2(this.wh.getWidth(this.og),this.rg)),this.lg=this.bA.Ee(this.ng).setMouseInteractions(!1),this.ug=this.bA.Ee(this.ng).setMouseInteractions(!1),this.cg=this.bA.Ee(this.ng).setMouseInteractions(!1),this.dg=this.tg.ke(this.og).Ce(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).we(at).Xo(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Ag=this.tg.ke(this.og).Ce(u.getWidth({x:g.xAxisZoomingBandFillStyle,y:g.yAxisZoomingBandFillStyle})).we(u.getWidth({x:g.xAxisZoomingBandStrokeStyle,y:g.yAxisZoomingBandStrokeStyle})),this.gg=this.tg.ke(this.og).Ce(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).we(at).Xo(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.mg=this.tg.ke(this.og).Ce(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).we(at).Xo(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Lh=this.tg.Pr(this.ng).setMouseInteractions(!1).Nh(this.wh.getTitleTextRotation(this.eg)).Ir(Ri).Fr(Ri),this.chart.us.ls.os(this.dg,(t=>this.dg.cs(t)),{animationEnabled:this.th}),this.chart.us.ls.os(this.gg,(t=>this.gg.cs(t)),{animationEnabled:this.th}),this.chart.us.ls.os(this.mg,(t=>this.mg.cs(t)),{animationEnabled:this.th});const b=Ks(new te(this.CA,this.kA,this.TA,1),new ie(this.FA,this.IA,this.PA),new qs(this.rA)),x=Ks(new te(this.$A,this.XA,this.ZA)),M=Ks(new te(this.$A,this.jA,this.ZA));this.dg.setMouseEnterEventHandler(this.nA).setMouseLeaveEventHandler(this.aA).setMouseDragStartEventHandler(this.uA).setMouseDragEventHandler(this.AA).setMouseDragStopEventHandler(this.yA).setMouseWheelEventHandler(this.vA).setMouseDoubleClickEventHandler(this.rA).setMouseClickEventHandler(this.xA).setMouseDownEventHandler(this.MA).setMouseUpEventHandler(this._A).setMouseMoveEventHandler(this.wA).setTouchStartEventHandler(b.onTouchStart).setTouchMoveEventHandler(b.onTouchMove).setTouchEndEventHandler(b.onTouchEnd),this.gg.setMouseEnterEventHandler(this.DA).setMouseLeaveEventHandler(this.LA).setMouseDragStartEventHandler(this.EA).setMouseDragEventHandler(this.VA).setMouseDragStopEventHandler(this.WA).setMouseWheelEventHandler(this.YA).setTouchStartEventHandler(x.onTouchStart).setTouchMoveEventHandler(x.onTouchMove).setTouchEndEventHandler(x.onTouchEnd),this.mg.setMouseEnterEventHandler(this.DA).setMouseLeaveEventHandler(this.LA).setMouseDragStartEventHandler(this.EA).setMouseDragEventHandler(this.NA).setMouseDragStopEventHandler(this.WA).setMouseWheelEventHandler(this.HA).setTouchStartEventHandler(M.onTouchStart).setTouchMoveEventHandler(M.onTouchMove).setTouchEndEventHandler(M.onTouchEnd),this.lg.Re(u.getWidth({x:g.xAxisStrokeStyle,y:g.yAxisStrokeStyle})),this.ug.Re(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.cg.Re(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.Lh.Ce(u.getWidth({x:g.xAxisTitleFillStyle,y:g.yAxisTitleFillStyle})).Oh(u.getWidth({x:g.xAxisTitleFont,y:g.yAxisTitleFont})),this.es=o.hs(this,{}),this.Wh=this.es.yg([this.Lh]).ps(g.effectsText),this.pg=null!==(p=u.getWidth({x:g.xAxisMarginAfterTicks,y:g.yAxisMarginAfterTicks}))&&void 0!==p?p:7,this.Sg=null!==(S=u.getWidth({x:g.xAxisMarginAfterTitle,y:g.yAxisMarginAfterTitle}))&&void 0!==S?S:7}kr(){return this.eh}Tr(){return void 0!==this.Zh}setTickStrategy(t,i){return super.Fh(t,i)}getTickStrategy(){return this.je}addBand(t=!0){const i=t?this.KA:this.JA,s=new We(i,this.chart,this.tA,this,this.ng,this.wh,this.qi,this.ss);return this.Jf.push(s),s}addConstantLine(t=!0){const i=t?this.KA:this.JA,s=new Ue(i,this.chart,this.tA,this,this.ng,this.wh,this.qi,this.ss);return this.Jf.push(s),s}vg(t){this.Jf.forEach(t)}bg(t){return this.Jf.map(t)}getHighlighters(){return this.Jf}setThickness(t){return"number"==typeof t?(this.xg=t,this.Mg=t):"object"==typeof t&&(this.xg=t.min,this.Mg=t.max),this.chart.us.Ss(),this}getThickness(){return{min:this.xg,max:this.Mg}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}_g(){return this.Ff}ur(t,i){return new wo(i,t,this.bA,this.ng,this.ng)}Uh(){if(this.wf){for(const t of this.wf)t[1].grid.dispose(),t[1].tick.dispose();this.wf.clear()}super.Uh()}cr(t,i){const{tickStart:s}=i,e=t.Sh.lr,h=s+e.getTickLength()*this.eg+e.getTickPadding()*this.eg;t.Ue.Fe(this.wh.toPoint(t.u,h)).Ea(this.wh.toPoint(e.getLabelAlignment(),-this.eg)).Nh(e.labelRotation).setVisible(this.getVisible())}wg(t,i){const{startPosition:s,gridStrokeLen:e,gridStrokeStart:h,tickStart:r}=i,n=t.Sh.lr,o=s-e*n.getGridStrokeLength(),a=r+n.getTickLength()*this.eg;return{gridStroke:{start:this.wh.toPoint(t.u,h),end:this.wh.toPoint(t.u,o)},tickStroke:{start:this.wh.toPoint(t.u,r),end:this.wh.toPoint(t.u,a)}}}_r(t,i){return"linear"===this.kh.type?xo(t,i,this.dt):Mo(t,i,this.dt)}Cg(t,i){return i instanceof Vs?xo:Mo}Cr(t,i,s){if("logarithmic"!==this.kh.type){const e=this.dt.Li(i-t);return{min:t-s*e,max:i+s*e}}const e=this.dt;return{min:e.mi(t,-s),max:e.mi(i,s)}}Ps(){if(!this.Xi)return{kg:0,Tg:0,Vd:0};const t=!(this.Ze.size>0),i=this.Lh&&this.Lh.Bh().length>0&&this.getTitleFillStyle()!==O,s=this.wh.getHeight(i?this.chart.us.Ig.Fg(this.getTitle(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0})+(i?this.Sg:0),e=this.Xe===je?new Map:rh(this.Xe,Math.min(this.Ih,this.Ph),Math.max(this.Ih,this.Ph),this.Ih,this.Ph,0),h=this.dt;let r=0;e.forEach(((i,s)=>{if((t=>void 0!==t.lr&&void 0!==t.nr)(s)){const e=Math.max(...i.map((i=>{if(!Qi(i,this.Ih,this.Ph))return 0;const e=this.chart.us.Ig.Fg(s.nr(i,h),s.lr.labelFont,s.lr.labelRotation);return t||!e.isEstimate?this.wh.getHeight(e):0})))+s.lr.tickLength+s.lr.tickPadding+s.lr.labelPadding;r=Math.max(r,e)}}));const n=this.Tf.reduce(this.eA,0);r=Math.max(r,n),r+=this.pg;const o=Rt(s+r,void 0!==this.xg?this.xg:0,void 0!==this.Mg?this.Mg:Oi);return this.kf=o,{kg:r,Tg:s,Vd:o}}Te(t){const i=this.getVisible()&&t.Pg>0;this.Dg=t;const s=this.lg.uu(),e=this.dt.getInnerStart()<this.dt.getInnerEnd()?this.dt.getInnerStart():this.dt.getInnerEnd(),h=this.dt.getInnerEnd()>this.dt.getInnerStart()?this.dt.getInnerEnd():this.dt.getInnerStart(),r=s.getThickness()*this.eg/2,n=this.rg.getInnerInterval(),o=this.sg/100*n,a=o+t.Bg,l=n*this.eg,u=a+r;if(i||this.Uh(),this.Xe!==je&&i){const t=this.dt.ri();this.qh({physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});for(const[i,s]of this.Ze){let e=this.wf.get(i);if(!e)if(i.Oe)e={grid:this.QA[0].Lg(this.ng).setMouseInteractions(!1),tick:this.QA[0].Lg(this.ng).setMouseInteractions(!1)};else if("Rg"in i){const t=Array.from(this.Ze.keys()).filter((t=>"Rg"in t)).reverse().indexOf(i),s=this.QA[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");e={grid:s.Lg(this.ng).setMouseInteractions(!1),tick:s.Lg(this.ng).setMouseInteractions(!1)}}if(e){e.grid.Nt(),e.tick.Nt();for(const[i,h]of s){const i=this.wg(h,{physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});e.grid.zr().Eg(i.gridStroke.start,i.gridStroke.end),e.tick.zr().Eg(i.tickStroke.start,i.tickStroke.end)}e.grid.Re(i.lr.getGridStrokeStyle()),e.tick.Re(i.lr.getTickStyle()),this.wf.set(i,e)}}}const c=u,d=c+this.eg*t.zg,f=this.Nf||this.Gf?Math.min(this.Lf,.25*t.Pg):0,A={start:this.wh.toVec2(this.dt.mi(this.dt.getInnerStart(),f),c),end:this.wh.toVec2(this.dt.mi(this.dt.getInnerEnd(),-f),d)},g=At(this.wh.toVec2(this.dt.getInnerStart(),d),this.ng,this.og),m=At(A.start,this.ng,this.og),y=At(A.end,this.ng,this.og),p=At(this.wh.toVec2(this.dt.getInnerEnd(),c),this.ng,this.og);this.lg.Ve(this.wh.toPoint(e,a)).ze(this.wh.toPoint(h,a)).setVisible(i),this.ug.Ve(this.wh.toPoint(this.dt.mi(this.dt.getInnerStart(),this.Pf),a)).ze(this.wh.toPoint(this.dt.getInnerStart(),a)).setVisible(i),this.cg.Ve(this.wh.toPoint(this.dt.mi(this.dt.getInnerEnd(),-this.Pf),a)).ze(this.wh.toPoint(this.dt.getInnerEnd(),a)).setVisible(i);const S=a+t.kg*this.eg;if(this.Lh.Fe(this.wh.toPoint(this.wh.getWidth(At(cs(ds(g,p),.5),this.og,this.ng)),S)).Ea(this.wh.toPoint(0,-1*this.eg)).setVisible(i),this.Cf){const i=this.sg/100*n+t.Bg,s=-this.eg*n-t.Bg,e={start:this.wh.toVec2(this.Cf.min,u+this.eg*this.kf),end:this.wh.toVec2(this.Cf.max,i+s)},h=At(e.start,this.ng,this.og),r=At(e.end,this.ng,this.og);this.Ag.Fe(h).q(fs(r,h)).setVisible(!0)}else this.Ag.setVisible(!1);this.dg.Fe(m).q(fs(y,m)).setVisible(i),this.gg.Fe(g).q(fs(m,g)).setVisible(i),this.mg.Fe(y).q(fs(p,y)).setVisible(i);for(const s of this.Tf)s.update().plot(i,a,l,t.Bg,u);for(const t of this.Jf)t.Te()}setLength(t){return this.zd=t,this.chart.us.Ss(),this}getLength(){return this.zd}setMargins(t,i){return this.iA=t,this.sA=i,this.chart.us.Ss(),this}getMargins(){return{start:this.iA,end:this.sA}}getStackIndex(){var t,i;return null!==(i=null===(t=[...this.chart.Vg,...this.chart.Og,...this.chart.Ng,...this.chart.Gg].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==i?i:0}getParallelIndex(){var t,i;return null!==(i=null===(t=[...this.chart.Vg,...this.chart.Og,...this.chart.Ng,...this.chart.Gg].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==i?i:0}Wg(){const t=this.Dg;if(!t)return;const i=this.getVisible()&&t.Pg>0,s=this.lg.uu().getThickness()*this.eg/2,e=this.rg.getInnerInterval(),h=this.sg/100*e+t.Bg,r=e*this.eg,n=h+s;for(const s of this.Tf)s.update().plot(i,h,r,t.Bg,n);for(const t of this.Jf)t.Te()}Ug(){return this.kf}Yg(t,i){i=i||po.AxisTickMajor;const s=new Dr(this,t?this.QA[0]:this.tg,this.tg,this.dt,this.ag,this.ag,this.wh,this.hg,this.hA,this.qi,i).setTextFormatter(this.formatValue);return this.Tf.push(s),s}oA(t){this.chart.us.ls.Ms(t,1),this.Df=t.us.Wr(this.$f,this.Df)}lA(t){this.chart.us.ls.Ms(t,0),t.us.Ur(this.Df)}dA(t){this.setStopped(!0),t.us.Ur(this.Df)}gA(t,i){const s=-this.wh.getWidth(i);this.pan(s),this.Df=t.us.Wr(this.Xf,this.Df)}pan(t){const i=this.Ih,s=this.Ph,e=this.dt.mi(i,t),h=this.dt.mi(s,t);this.Qh(e,h,!1)}zoom(t,i){const s=this.dt.ct(this.Ih),e=this.dt.ct(this.Ph),h=this.dt.ct(t),r=Rt((h-s)/(e-s),0,1),n=.2*this.dt.ri(),o=r*this.Rf*n*-i,a=(1-r)*this.Rf*n*i,l=this.dt.mi(this.Ih,o),u=this.dt.mi(this.Ph,a);this.Qh(l,u,!0)}pA(t){this.Cf=void 0,t.us.Ur(this.Df)}fA(t,i){this.setStopped(!0),t.us.Ur(this.Df),this.chart.us.ls.Ms(this.dg,0)}mA(t,i,s,e){const h=At(this.bA.us.Pe(s.x,s.y),this.bA.us.dt,this.ng),r=Rt(this.wh.getWidth(h),this.Ih,this.Ph),n=this.wh.getWidth(At(this.bA.us.Pe(i.x,i.y),this.bA.us.dt,this.ng));Math.abs(this.dt.ct(r)-this.dt.ct(n))>10?(this.Cf=c(Math.min(r,n),Math.max(r,n)),this.Df=t.us.Wr(this.jf,this.Df)):(this.Cf=void 0,this.Df=t.us.Wr(this.$f,this.Df)),this.bA.Ss()}SA(t,i,s){if(this.Cf){const t=this.Cf.min,i=this.Cf.max,s=this.Ph<this.Ih;this.St(s?i:t,s?t:i,!0,!0,"interactionSetInterval")}this.Cf=void 0,t.us.Ur(this.Df)}BA(t){this.chart.us.ls.Ms(t,1),this.Bf=t.us.Wr(this.Zf,this.Bf)}RA(t){this.chart.us.ls.Ms(t,0),t.us.Ur(this.Bf)}zA(t,i){this.setStopped(!0),this.Bf=t.us.Wr(this.Qf,this.Bf)}OA(t,i,s,e){const h=this.wh.getWidth(e);this.Qh(this.dt.mi(this.Ih,h),this.Ph,!0)}GA(t,i,s,e){const h=this.wh.getWidth(e);this.Qh(this.Ih,this.dt.mi(this.Ph,h),!0)}UA(t,i,s){t.us.Ur(this.Bf),t.getIsUnderMouse()&&(this.Bf=t.us.Wr(this.Zf)),this.bA.Ss()}addCustomTick(t){return this.Yg(!0,t)}getUiPosition(){return this.sg}setStrokeStyle(t){return this.lg.Re(t),this.bA.Ss(),this}getStrokeStyle(){return this.lg.uu()}getOverlayStyle(){return this.dg.Eh()}setOverlayStyle(t){return this.dg.Ce(t),this.bA.Ss(),this}setAxisInteractionZoomByDragging(t){return this.Ef=t,this}getAxisInteractionZoomByDragging(){return this.Ef}setAxisInteractionPanByDragging(t){return this.zf=t,this}getAxisInteractionPanByDragging(){return this.zf}setAxisInteractionZoomByWheeling(t){return this.Vf=t,this}getAxisInteractionZoomByWheeling(){return this.Vf}setAxisInteractionReleaseByDoubleClicking(t){return this.Of=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.Of}setAxisMouseHoverStyle(t=this.wh.defaultDragMouseStyle){return this.$f=t,this}getAxisMouseHoverStyle(){return this.$f}setAxisMousePanStyle(t=this.wh.defaultDragMouseStyle){return this.Xf=t,this}getAxisMousePanStyle(){return this.Xf}setAxisMouseZoomStyle(t=this.wh.defaultDragMouseStyle){return this.jf=t,this}getAxisMouseZoomStyle(){return this.jf}setAnimationHighlight(t){return this.chart.us.ls._s(this.dg,t),this.chart.us.ls._s(this.gg,t),this.chart.us.ls._s(this.mg,t),this}getAnimationHighlight(){return this.chart.us.ls.ws(this.dg)}getTitleMargin(){return this.getMarginAfterTicks()}setTitleMargin(t){return this.setMarginAfterTicks(t)}getMarginAfterTicks(){return this.pg}setMarginAfterTicks(t){return this.pg=t,this.bA.Ss(),this}getMarginAfterTitle(){return this.Sg}setMarginAfterTitle(t){return this.Sg=t,this.bA.Ss(),this}getNibLength(){return this.Pf}setNibLength(t){return this.Pf=t,this.bA.Ss(),this}getNibStyle(){return this.ug.uu()}setNibStyle(t){return this.ug.Re(t),this.cg.Re(t),this.bA.Ss(),this}getNibOverlayStyle(){return this.gg.Eh()}setNibOverlayStyle(t){return this.gg.Ce(t),this.mg.Ce(t),this.bA.Ss(),this}setNibMousePickingAreaSize(t){return this.Lf=t,this.bA.Ss(),this}getNibMousePickingAreaSize(){return this.Lf}setNibInteractionScaleByDragging(t){return this.Nf=t,this}getNibInteractionScaleByDragging(){return this.Nf}setNibInteractionScaleByWheeling(t){return this.Gf=t,this}getNibInteractionScaleByWheeling(){return this.Gf}setNibMouseHoverStyle(t=this.wh.defaultDragMouseStyle){return this.Zf=t,this}getNibMouseHoverStyle(){return this.Zf}setNibMouseScaleStyle(t=this.wh.defaultDragMouseStyle){return this.Qf=t,this}getNibMouseScaleStyle(){return this.Qf}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.Wf=t,this}getChartInteractionPanByDrag(){return this.Wf}setChartInteractionZoomByWheel(t){return this.Uf=t,this}getChartInteractionZoomByWheel(){return this.Uf}setChartInteractionZoomByDrag(t){return this.Yf=t,this}getChartInteractionZoomByDrag(){return this.Yf}setChartInteractionFitByDrag(t){return this.Hf=t,this}getChartInteractionFitByDrag(){return this.Hf}j(){return this.dt.j(),this}Z(){return this.dt.Z(),this}dispose(){this.ug.dispose(),this.cg.dispose(),this.lg.dispose(),this.dg.dispose(),this.Ag.dispose(),this.gg.dispose(),this.mg.dispose(),this.Lh.dispose(),this.Kh(Dt);for(const t of this.wf.values())t.grid.dispose(),t.tick.dispose();return this.Ff.slice().forEach(Dt),this.Jf.slice().forEach(Dt),this.qA(this),this.D.emit("dispose",this),this}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setVisible(t){this.ug.setVisible(t),this.cg.setVisible(t),this.lg.setVisible(t),this.Lh.setVisible(t),this.dg.setVisible(t),this.gg.setVisible(t),this.mg.setVisible(t),this.Kh((i=>{i.ys(t)}));for(const i of this.wf.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.chart.us.Ss(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.th),this}}const ko={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>n(t,i)},To={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>n(i,t)},Fo=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof Co&&"y"in t&&t.y instanceof Co),Io=i({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new ee,tickLength:7,tickStyle:new ee,tickPadding:0,labelFont:new uh,labelFillStyle:new U,labelPadding:0,labelAlignment:0,labelRotation:0});class Po extends Io{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelPadding(t){return this.set("labelPadding",t)}getLabelPadding(){return this.get("labelPadding")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const Do=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),Bo=new Po({labelFillStyle:O,gridStrokeStyle:at,tickStyle:at}),Lo=t=>Do(t)&&N(t.labelFillStyle)&&lt(t.gridStrokeStyle)&&lt(t.tickStyle),Ro=(t,i,s,e,h)=>(r,n)=>o=>{const a=new Date(o+r),l={year:n?a.getUTCFullYear():a.getFullYear(),monthIndex:n?a.getUTCMonth():a.getMonth(),day:n?a.getUTCDate():a.getDate(),hours:n?a.getUTCHours():a.getHours(),minutes:n?a.getUTCMinutes():a.getMinutes(),seconds:n?a.getUTCSeconds():a.getSeconds(),millis:n?a.getUTCMilliseconds():a.getMilliseconds()},u=e?e(l):void 0;if(0===t&&!0===u)return o;const c=l[i];h.includes("year")&&(l.year=Math.floor(l.year/s)*s),h.includes("monthIndex")&&(l.monthIndex=0),h.includes("day")&&(l.day=1),h.includes("hours")&&(l.hours=0),h.includes("minutes")&&(l.minutes=0),h.includes("seconds")&&(l.seconds=0),h.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*s;return-1===t&&!1===u&&(d=0),0!==d&&(l[i]=s*(d>0?Math.floor((c+d)/s):Math.ceil((c+d)/s))),n?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-r:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-r},Eo=(t,i,s,...e)=>Ro(-1,t,i,s,e),zo=(t,i,s,...e)=>Ro(-1,t,i,s,e),Vo=(t,i,s,...e)=>Ro(0,t,i,s,e),Oo=(t,i,...s)=>Ro(1,t,i,void 0,s),No=t=>(i,s)=>e=>{const h=new Date(e+i),r=s?h.getUTCDay():h.getDay(),n=1===r&&0===(s?h.getUTCHours():h.getHours())&&0===(s?h.getUTCMinutes():h.getMinutes())&&0===h.getSeconds()&&0===h.getMilliseconds();if(0===t&&!0===n)return e;let o=s?h.getUTCDate():h.getDate();return-1===t&&1===r&&!1===n||(-1===t?o-=r>=2?r-1:r+6:o+=r>0?8-r:1),s?Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),o,0,0,0,0)-i:new Date(h.getFullYear(),h.getMonth(),o,0,0,0,0).getTime()-i},Go=[{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:qe({ignore:"first"},2,5)},minorTicks:{amount:4,fitFunction:qe(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:Eo("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:th(5,10,15,30)},minorTicks:{amount:4,fitFunction:qe(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:Eo("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:th(5,10,15,30)},minorTicks:{amount:12,fitFunction:qe(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:Eo("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:th(3,6,12)},minorTicks:{amount:8,fitFunction:qe(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:Eo("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:qe({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:qe({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:No(-1),getNextKeyValueIncludingRef:No(0),getNextKeyValue:No(1),greatTicks:!0,majorTicks:{fitFunction:qe(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:zo("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Vo("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:Oo("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:qe(void 0,2,3)},minorTicks:{fitFunction:qe(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:zo("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Vo("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Oo("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:qe({ignore:"first"},2,5)},minorTicks:{fitFunction:qe(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:zo("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Vo("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Oo("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:qe(void 0,2,4)},minorTicks:{fitFunction:qe(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:zo("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Vo("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Oo("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:zo("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Vo("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Oo("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],Wo=(t,i,s)=>{let e=((t,i,s,e,h)=>{const r=i-t;let n;for(let t=0;t<Go.length;t+=1){const i=r/Go[t].unit;if(i<=1){n=Go[t];break}}return n})(i,s);if(void 0!==e&&0===Go.indexOf(e)&&(e=Go[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=Go[Go.indexOf(e)-h];return void 0===r?Go[0]:r},Uo=(t,i,s)=>(e,h,r,n)=>{const o=Wo("great",e,h);if(void 0===o)return[];if("Decade"===o.label||"Century"===o.label||"Millennium"===o.label)return[];const a=n>r?e:h,l=(e+h)/2,u=n>r?h:e;if(Go.indexOf(o)<=Go.findIndex((t=>"Hour"===t.label)))return"left"===s?[a]:[];let c;if(!0===o.irregular)c=Ke(e,h,o.getPrevKeyValue(t,i),o.getNextKeyValue(t,i));else{const s=o.greatTicks.getReferenceKeyValue(t,i)(e);c=Je(e,h,o.unit,s,1)}const d=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(e,h,c);return"left"===s?void 0===d||Qi(d,l,u)?[a]:[d]:void 0!==d&&Qi(d,l,u)?[d]:[u]},Yo=(t,i,s)=>(e,h,r,n)=>{const o=Wo(t,r,n);let a;if(void 0===o)return[];if("great"===t&&void 0!==o.greatTicks)if(!0===o.irregular)a=Ke(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s));else{const t=o.greatTicks.getReferenceKeyValue(i,s)(e);a=Je(e,h,o.unit,t,1)}else if("major"===t&&void 0!==o.majorTicks)a=!0===o.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s)):((t,i,s)=>{const e=[];let h=t,r=0;for(;h<i;)if(e.push(h),h+=s,r+=1,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(e,h,o.unit);else{if("minor"!==t||void 0===o.minorTicks)return[];if(!0===o.irregular)a=((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(e,h,o.getNextKeyValueIncludingRef(i,s),o.getNextKeyValue(i,s));else{const t=(t=>{if(void 0!==t)return Go[Go.indexOf(t)+1]})(o);if(void 0===t)return[];a=Qe(e,h,t.unit/o.minorTicks.amount,1)}}return a},Ho=t=>(i,s,e,h,r,n)=>{const o=Wo(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},$o=i({type:"date-time-ticks",utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new Po,majorTickStyle:new Po,minorTickStyle:new Po,formatOptionsMajorCentury:{year:"numeric"},formatOptionsMinorDecade:{year:"numeric"},formatOptionsMajorDecade:{year:"numeric"},formatOptionsMinorYear:{year:"numeric"},formatOptionsMajorYear:{year:"numeric"},formatOptionsMinorMonth:{month:"short"},formatOptionsGreatYear:{year:"numeric"},formatOptionsMajorMonth:{month:"long"},formatOptionsMinorWeek:{day:"numeric"},formatOptionsGreatMonth:{year:"numeric",month:"long"},formatOptionsMajorWeek:{day:"numeric",weekday:"short"},formatOptionsMinorDay:{day:"numeric",weekday:"short"},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long"}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric"},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},formatOptionsMajorSecond:{second:"2-digit"},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return`${(i.getSeconds()+i.getUTCMilliseconds()/1e3).toFixed(2)}`},formatOptionsGreatSecond:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsMajorMilliSecond:t=>{const i=new Date(t);return`${(i.getSeconds()+i.getUTCMilliseconds()/1e3).toFixed(1)}`}});class Xo extends $o{Yh(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>Go.map((i=>{const s=((t,i,s)=>{switch(s.label){case"MilliSecond100":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorMilliSecond:t.formatOptionsMinorMillisecond;case"Second":return"Great"===i?t.formatOptionsGreatSecond:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;Tt.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r+i;const a=n.getInnerStart(),l=n.getInnerEnd(),u=a>l,c=Wo(t,u?l:a,u?a:l);if(void 0===c)return h(o);if("great"===t){const t=Lt(r,"left"===s?a:l);let e;if(e=!1===t?r:!1===c.irregular?"left"===s&&!1===u||"right"===s&&!0===u?c.greatTicks.getReferenceKeyValue(i,this.utc)(r):c.greatTicks.getReferenceKeyValue(i,this.utc)(r+1*c.unit):"left"===s&&!1===u||"right"===s&&!0===u?c.getPrevKeyValue(i,this.utc)(r):c.getNextKeyValue(i,this.utc)(r),o=e+i,"right"===s&&!0===t)return""}const d=e.get(t);if(void 0===d)return h(o);const f=d[Go.indexOf(c)];return void 0===f?"":"function"==typeof f?f(o,n,this.locale):f.format(o)},n=[],o=[{Ue:"Great ticks (directive)",Rg:0,Ne:!0,Br:Yo("great",i,this.utc),Lr:void 0},{Ue:"Major ticks",Rg:1,lr:this.majorTickStyle,nr:r("major"),Br:Yo("major",i,this.utc),bh:{dr:Ho("major")},Lr:void 0}];Lo(this.greatTickStyle)||(n.push({Ue:"Great ticks (left)",lr:this.greatTickStyle.setLabelAlignment(-1),nr:r("great","left"),Br:Uo(i,this.utc,"left"),Oe:!0,mr:!1}),n.push({Ue:"Great ticks (right)",lr:this.greatTickStyle.setLabelAlignment(1),nr:r("great","right"),Br:Uo(i,this.utc,"right"),Oe:!0,mr:!1})),Lo(this.minorTickStyle)||o.push({Ue:"Minor ticks",Rg:2,lr:this.minorTickStyle,nr:r("minor"),Br:Yo("minor",i,this.utc),bh:{dr:Ho("minor"),xh:(t,i,s,e,h,r)=>{const n=Wo("minor",h,r);return!n||"Week"!==n.label}},Lr:void 0});const a=this.cursorFormatter;return{He:n,$e:o,Ge:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=new Date(i+t);return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric",minute:"2-digit",hour:"2-digit"}).format(h)} `},Xh:1e3,jh:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return this.set("greatTickStyle",t(i))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsGreatSecond",t||this.formatOptionsGreatSecond).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMajorMilliSecond",i||this.formatOptionsMajorMilliSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const jo=t=>!(!t||"object"!=typeof t||!("type"in t)||"date-time-ticks"!==t.type),Zo=(t,i)=>(s,e)=>{const h=e-s;if(i){const i=Math.log10(h/2);let r=10**Math.floor(i-t);const n=1/r;r=Math.round(r*n)/n;const o=Math.round(Math.floor(s/(10*r))*r*10*n)/n;return Je(o,e,r,void 0,n)}const r=Math.log10(h);let n=10**Math.round(r-t);const o=1/n;return n=Math.round(n*o)/o,Qe(s,e,n,o)},Qo=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):void 0,Jo=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%3==0)):2===i?t.filter(((t,i)=>i%4==0)):3===i?t.filter(((t,i)=>i%5==0)):void 0,Ko=qe(void 0,2,5),qo=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,ta=(t,i)=>{const s=Is(t),e=Ps(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,l=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},ia=i({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new Po,majorTickStyle:new Po,minorTickStyle:new Po,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class sa extends ia{Yh(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(i,s)=>Es.LogarithmicNoExponents(i,s,void 0,t.base):Es.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Es.LogarithmicNoExponents(i,s,void 0,t.base):Es.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Es.LogarithmicNoExponents(i,s,void 0,t.base):Es.Numeric),r=[],n=[];Lo(this.extremeTickStyle)||r.push({Ue:"Extreme ticks",lr:this.extremeTickStyle,nr:void 0===i?s:(t,e,h)=>s(i+t,e,h),Br:Ze,Oe:!0,mr:!0}),n.push({Ue:"Major ticks",Rg:0,lr:this.majorTickStyle,nr:void 0===i?e:(t,s,h)=>e(i+t,s,h),Br:"logarithmic"===t.type?ta(t.base,!0):Zo(0,!0),bh:"logarithmic"===t.type?{dr:Jo}:{dr:Qo},Lr:void 0}),Lo(this.minorTickStyle)||n.push({Ue:"Minor ticks",Rg:1,lr:this.minorTickStyle,nr:void 0===i?h:(t,s,e)=>h(i+t,s,e),Br:"logarithmic"===t.type?ta(t.base,!1):Zo(1,!1),bh:"logarithmic"===t.type?{dr:qo}:{dr:Ko},Lr:50});const o=this.cursorFormatter?this.cursorFormatter:Es.Numeric;return{He:r,$e:n,Ge:void 0===i?o:(t,s,e)=>o(i+t,s,e),Xh:1e-9,jh:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(i))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const i=this.setMajorTickStyle(t).setMinorTickStyle(t);return i.extremeTickStyle!==Bo?i.setExtremeTickStyle(t):i}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const ea=t=>!(!t||"object"!=typeof t||!("type"in t)||"numeric-ticks"!==t.type),ha=i({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new Po,minorTickStyle:new Po,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),ra=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=36e5?"MajorHours":s>=6e5?"MajorMinutes15":s>=9e4?"MajorMinutes":s>=10500?"MajorSeconds15":s>=1e3?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},na={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);return`${s}${pi(e,2)}:${pi(h,2)}:${pi(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);i%=1e3;const n=Math.floor(i/1);return`${s}${pi(e,2)}:${pi(h,2)}:${pi(r,2)}.${pi(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${pi(e,2)}:${pi(h,2)}:${pi(r,2)}.${pi(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${pi(e,2)}:${pi(h,2)}:${pi(r,2)}.${pi(n,3)}${o}`}},oa={MajorHours12:{major:{format:na.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,Je(t,i,h,void 0,1e6)},fitKeyValues:qe({ignore:"first"},2,4)},minor:{format:na.hhmmss,getKeyValues:(t,i,s,e)=>Qe(t,i,36e5,1e6),fitKeyValues:qe({},2,3,4,6)},defaultValueFormatter:na.hhmmss},MajorHours:{major:{format:na.hhmmss,getKeyValues:(t,i,s,e)=>{const h=36e5;return t=Math.floor(t/(12*h))*h*12,Je(t,i,h,void 0,1e6)},fitKeyValues:qe({ignore:"first"},2,6,12)},minor:{format:na.hhmmss,getKeyValues:(t,i,s,e)=>Qe(t,i,3e5,1e6),fitKeyValues:qe({},2,4,6)},defaultValueFormatter:na.hhmmss},MajorMinutes15:{major:{format:na.hhmmss,getKeyValues:(t,i,s,e)=>(t=36e5*Math.floor(t/36e5),Je(t,i,9e5,void 0,1e6)),fitKeyValues:qe({ignore:"first"},2)},minor:{format:na.hhmmss,getKeyValues:(t,i,s,e)=>Qe(t,i,6e4,1e6),fitKeyValues:qe({},3,5)},defaultValueFormatter:na.hhmmss},MajorMinutes:{major:{format:na.hhmmss,getKeyValues:(t,i,s,e)=>{const h=6e4;return t=Math.floor(t/6e5)*h*10,Je(t,i,h,void 0,1e6)},fitKeyValues:qe({ignore:"first"},2,5)},minor:{format:na.hhmmss,getKeyValues:(t,i,s,e)=>Qe(t,i,5e3,1e6),fitKeyValues:qe({},2,3,4,6)},defaultValueFormatter:na.hhmmss},MajorSeconds15:{major:{format:na.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,Je(t,i,h,void 0,1e6)},fitKeyValues:qe({ignore:"first"},2,4)},minor:{format:na.hhmmss,getKeyValues:(t,i,s,e)=>Qe(t,i,1e3,1e6),fitKeyValues:qe({},3,5)},defaultValueFormatter:na.hhmmss},MajorSeconds:{major:{format:na.hhmmssmmm,getKeyValues:(t,i,s,e)=>{const h=1e3;return t=Math.floor(t/1e4)*h*10,Je(t,i,h,void 0,1e6)},fitKeyValues:qe({ignore:"first"},2,5)},minor:{format:na.hhmmssmmm,getKeyValues:(t,i,s,e)=>Qe(t,i,100,1e6),fitKeyValues:qe({},2,3,5)},defaultValueFormatter:na.hhmmssmmm},MajorMilliseconds100:{major:{format:na.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,Je(t,i,100,void 0,1e6)),fitKeyValues:qe({ignore:"first"},2,5)},minor:{format:na.hhmmssmmm,getKeyValues:(t,i,s,e)=>Qe(t,i,10,1e6),fitKeyValues:qe({},2,3,5)},defaultValueFormatter:na.hhmmssmmm},MajorMilliseconds10:{major:{format:na.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,Je(t,i,10,void 0,1e6)),fitKeyValues:qe({ignore:"first"},2,5)},minor:{format:na.hhmmssmmm,getKeyValues:(t,i,s,e)=>Qe(t,i,1,1e6),fitKeyValues:qe({},2,3,5)},defaultValueFormatter:na.hhmmssmmm},MajorMilliseconds:{major:{format:na.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,Je(t,i,1,void 0,1e6)),fitKeyValues:qe({ignore:"first"},2,5)},minor:{format:na.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Qe(t,i,.1,1e6),fitKeyValues:qe({},2)},defaultValueFormatter:na.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:na.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,Je(t,i,.1,void 0,1e6)),fitKeyValues:qe({ignore:"first"},2,5)},minor:{format:na.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Qe(t,i,.01,1e6),fitKeyValues:qe({},2,3,5)},defaultValueFormatter:na.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:na.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,Je(t,i,h,void 0,1e6)},fitKeyValues:qe({ignore:"first"},2,5)},minor:{format:na.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Qe(t,i,.001,1e6),fitKeyValues:qe({},2,3,5)},defaultValueFormatter:na.hhmmssmmmuuu},MajorMicroseconds:{major:{format:na.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,Je(t,i,h,void 0,1e6)},fitKeyValues:qe({ignore:"first"},2,5)},minor:{format:na.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Qe(t,i,100*1e-6,1e6),fitKeyValues:qe({},2,3,5)},defaultValueFormatter:na.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:na.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*1e-6;return t=Math.floor(t/.001)*h*10,Je(t,i,h,void 0,1e6)},fitKeyValues:qe({ignore:"first"},2,5)},minor:{format:na.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Qe(t,i,10*1e-6,1e6),fitKeyValues:qe({},2,3,5)},defaultValueFormatter:na.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class aa extends ha{Yh(t){const i=this.timeOrigin||0,s=[{Ue:"Major ticks",Rg:0,lr:this.majorTickStyle,nr:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const h=ra(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,oa[h].major.format)(t+i,s,e)},Br:(t,i,s,e)=>{const h=ra(s,e);return(0,oa[h].major.getKeyValues)(t,i,s,e)},bh:{dr:(t,i,s,e,h,r)=>{const n=ra(h,r),o=oa[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Lr:void 0}];return Do(this.minorTickStyle)&&s.push({Ue:"Minor ticks",Rg:1,lr:this.minorTickStyle,nr:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const h=ra(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,oa[h].minor.format)(t+i,s,e)},Br:(t,i,s,e)=>{const h=ra(s,e);return(0,oa[h].minor.getKeyValues)(t,i,s,e)},bh:{dr:(t,i,s,e,h,r)=>{const n=ra(h,r),o=oa[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Lr:void 0}),{He:[],$e:s,Ge:this.cursorFormatter||((t,s,e)=>{const h=ra(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return oa[h].defaultValueFormatter(t+i,s,e)}),Xh:1e-4,jh:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const la=t=>!(!t||"object"!=typeof t||!("type"in t)||"time-ticks"!==t.type),ua=(t,i,s="image/png",e)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(Tt.navigator.msSaveBlob)Tt.navigator.msSaveBlob(h,i);else{const t=Tt.document.createElement("a");Tt.document.body.appendChild(t);const s=Tt.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{Tt.URL.revokeObjectURL(s),Tt.document.body.removeChild(t)}),0)}},ca=(t,i,s,e,h,r)=>{const n=t.Zu(i,s,e,h,r,!0);return n.setDraggingMode(Ct.draggable),n},da=(t,i)=>{if("relative"===t)return i;if(t instanceof Ns)return t;const s=t.x instanceof eh?t.x.dt:t.x.x,e=t.y instanceof eh?t.y.dt:t.y.y;return Us(s,e)},fa=(t,i,s,e,h)=>{if(s){const r=t,n=i,o=Fo(n)?n:$s(n)?e:void 0;if(o&&Ys(s)){const t=At(r,o,h.dt);return h.Do({engineX:t.x,engineY:t.y})}if(o&&$s(s))return At(r,o,e);if(o&&Fo(s))return At(r,o,s)}else{const s=t;if($s(i)){const t=h.Po(s);return At({x:t.engineX,y:t.engineY},h.dt,e)}if(Fo(i)){const t=i,e=h.Po(s);return At({x:e.engineX,y:e.engineY},h.dt,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class Aa{constructor(t,i,e,h,r,o,a,l){this.coordsRelative="relative",this.coordsClient="client",this.Hg=[],this.$g=[],this.D=new s,this.Xg=void 0,this.jg=void 0,this.Zg=void 0,this.Xt=A(0,0,0,0),this.Qg=!1,this.$i=!1,this.Jg=()=>{this.Kg=!0,this.qg.Ss()},this.tm=t=>i=>{const s=this.Hg.indexOf(i);-1!==s&&this.Hg.splice(s,1),this.us.Ss(),t.W()},this.im=t=>{const i=this.$g.indexOf(t);-1!==i&&this.$g.splice(i,1),this.us.Ss()},this.Kg=!0,this.onInViewChange=t=>this.D.on("inViewChange",t),this.offInViewChange=t=>this.D.off(t,"inViewChange"),this.cA=t,this.sm=e,this.qg=h,this.removePanel=r,this.qi=i.us.qi;const u=i.us.oi();if(this.uiScale=e.d2({scaleXYConstructor:Gs}).Vi(0,100).Oi(0,100).q(u),this.pixelScale=e.d2({scaleXYConstructor:Gs}).Vi(0,this.uiScale.x.getCellSize()).Oi(0,this.uiScale.y.getCellSize()).q(u),this.engine=i.us.hm,this.us=i.us.rm,this.es=this.us.es.hs(this,{}),this.nm=()=>i.om("unidentified ui"),this.am=i.lm(),this.um=this.qg.ke(this.uiScale).Fe(n(0,0)).q(n(100,100)).Ce(o).we(a).setMouseMoveEventHandler(((t,i)=>this.D.emit("mouseMovePanelBackground",this,i))).setMouseEnterEventHandler(((t,i)=>this.D.emit("mouseEnterPanelBackground",this,i))).setMouseLeaveEventHandler(((t,i)=>this.D.emit("mouseLeavePanelBackground",this,i))).setMouseDownEventHandler(((t,i)=>this.D.emit("mouseDownPanelBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.D.emit("mouseUpPanelBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.D.emit("mouseClickPanelBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.D.emit("mouseDoubleClickPanelBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.D.emit("mouseWheelPanelBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.D.emit("mouseDragStartPanelBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.D.emit("mouseDragPanelBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.D.emit("mouseDragStopPanelBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.D.emit("touchStartPanelBackground",this,i))).setTouchMoveEventHandler(((t,i)=>this.D.emit("touchMovePanelBackground",this,i))).setTouchEndEventHandler(((t,i)=>this.D.emit("touchEndPanelBackground",this,i))),l){const t=l.on(this.Jg);this.dm=()=>l.off(t)}else{const t=i.us.Co(this.Jg);this.fm=i.us.ko.bind(i.us,t)}const c=i.us.Fo((t=>{this.Qg=t,this.D.emit("inViewChange",this,t)}));this.Am=i.us.Io.bind(i.us,c),this.Xg=r}getTheme(){return this.qi}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.um.Ce(t),this.qg.Ss(),this}getBackgroundFillStyle(){return this.um.Eh()}setBackgroundStrokeStyle(t){return this.um.we(t),this.qg.Ss(),this}getBackgroundStrokeStyle(){return this.um.ao()}translateCoordinate(t,i,s){return fa(t,i,s,this.pixelScale,this.us)}gm(t){return this.Hg.push(t),this.us.Ss(),t}ym(t){return this.$g.push(t),this.us.Ss(),t}addUIElement(t=Jn,i=this.uiScale){i=da(i,this.pixelScale);const s=this.nm();return this.gm(ca(t,s,this.uiScale,i,this.tm(s),this.qi))}addLegendBox(t=lo,i=this.uiScale){i=da(i,this.pixelScale);const s=this.ym(ca(t,this.am,this.uiScale,i,this.im,this.qi));return s.setDraggingMode(Ct.notDraggable),void 0!==i&&i!==this.uiScale||(void 0===t||"vertical"===t.getAlignment()?s.setOrigin(De.RightCenter).setPosition({x:100,y:50}):s.setOrigin(De.CenterBottom).setPosition(this.uiScale.mi({x:50,y:0},{x:0,y:3}))),s}getLegendBoxes(){return this.$g}dispose(){return this.$i||(this.$i=!0,this.fm&&this.fm(),this.dm&&this.dm(),ga(this.uiScale),ga(this.pixelScale),this.Am&&this.Am(),this.jg&&this.jg(),this.qg.W(),this.am.W(),this.Hg.slice().forEach((t=>{t.dispose()})),this.$g.slice().forEach((t=>{t.dispose()})),this.us.Ss(),this.Xg&&this.Xg(this),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}saveToFile(t,i,s){return ua(this.engine,t,i,s),this}Fr(t){this.Xt=t,this.Jg()}j(){return this.pixelScale.j(),this.uiScale.j(),this}Z(){return this.pixelScale.Z(),this.uiScale.Z(),this}Te(t){if(this.Kg){const t=this.qg.us.oi(),i=t.x,s=t.y;this.uiScale.q(i,s),this.pixelScale.q(i,s);const e=[this.Xt.left,this.Xt.right],h=[this.Xt.bottom,this.Xt.top];this.uiScale.Ei(e),this.uiScale.zi(h);const r=this.uiScale.getInnerIntervalPixels();this.pixelScale.Vi(0,r.x).Ei(e).Oi(0,r.y).zi(h),this.D.emit("resize",this,r.x,r.y,i,s)}this.Kg=!1}pm(){for(let t=0;t<this.Hg.length;t+=1)this.Hg[t].Ps().Te();for(let t=0;t<this.$g.length;t+=1)this.$g[t].Ps().Te();this.Zg&&this.Zg()}Sm(t,i){if(t){const s=t(i);this.onResize(s.Ps.bind(s)),this.jg=s.W.bind(s),this.Zg=s.Ps.bind(s)}}onBackgroundMouseEnter(t){return this.D.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.D.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.D.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.D.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.D.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.D.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.D.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.D.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.D.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.D.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.D.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.D.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.D.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.D.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.D.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.D.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.D.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.D.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.D.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.D.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.D.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.D.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.D.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.D.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.D.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.D.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.D.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.D.off(t,"touchEndPanelBackground")}onResize(t){return this.D.on("resize",t)}offResize(t){return this.D.off(t,"resize")}getIsInView(){return this.Qg}}const ga=t=>{t.ii&&t.ii()};class ma extends Aa{constructor(t,i,s,e,h,r){super(t,i,s,i.vm("uipanel bg",0),e,i.us.qi.uiPanelBackgroundFillStyle,i.us.qi.uiPanelBackgroundStrokeStyle,r),this.Sm(h,this.pixelScale)}setMinimumSize(t){return this.xd=t,this.us.Ss(),this}getMinimumSize(){return this.xd}Te(t){super.Te(t),super.pm()}}const ya=A(10,10,10,10);class pa extends Aa{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,u),this.bm={},this.ya=ya,this.th=!0,this.xm=i.Mm("chart internal ui",0),this._m=this.xm.Pr(this.uiScale).Rh("Chart").Fe(n(50,100)).Ea(n(0,1)).Oh(a).Ce(l).setMouseInteractions(!1),this.wm=this.es.yg([this._m]).ps(this.qi.effectsText)}setAnimationsEnabled(t){return this.th=t,this}getAnimationsEnabled(){return this.th}setTitle(t){return this._m.Rh(t),this.us.Ss(),this}getTitle(){return this._m.Bh()}getTitleSize(){return this._m.Ps().jc()}setTitleFillStyle(t){return this._m.Ce(t),this.Jg(),this}getTitleFillStyle(){return this._m.Eh()}setTitleFont(t){return this._m.Oh(t),this.Jg(),this}getTitleFont(){return this._m.Vh()}setTitleRotation(t){return this._m.Nh(t),this.us.Ss(),this}getTitleRotation(){return this._m.Gh()}setTitleEffect(t){return this.wm.ps(t),this.us.Ss(),this}getTitleEffect(){return this.wm.vs()}setTitleMargin(t){var i,s;return this.bm="object"==typeof t?this.bm?(i=this.bm,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.Jg(),this}getTitleMargin(){return this.bm}setPadding(t){return this.ya="object"==typeof t?m(this.ya,t):{left:t,top:t,right:t,bottom:t},this.Jg(),this}getPadding(){return this.ya}Cm(t){const i=t.km(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.xm.W(),this}}const Sa={Tm:(t,i)=>t.Eh()!==O&&0!==t.Bh().length&&t.getVisible()?t.Ps().jc().y:0,Fm(t,i){t.Fe(n(50,100)).Fr({top:void 0!==i.top?i.top:10,right:i.right||0,left:i.left||0,bottom:i.bottom||0})}};var va;!function(t){t[t.disabled=0]="disabled",t[t.snapToClosest=1]="snapToClosest",t[t.onHover=2]="onHover"}(va||(va={}));const ba={Im(t,i,s,e,h,r){let n;const o=t.getAutoCursorMode();if(!s&&o!==va.disabled){const s=t.us.On(),a=e.find((t=>t.getIsUnderMouse()));o===va.snapToClosest&&h?(i||void 0!==a)&&(n=s&&h(s)):void 0===a||a.getCursorEnabled&&!a.getCursorEnabled()||(n=s&&r(a,s))}n?t.Pm.pointAt(n).setVisible(!0):t.Pm.setVisible(!1),t.Pm.Ps().Te()},Hc(t,i,s){if(i.x<t.uiScale.x.ei()||i.x>t.uiScale.x.hi()||i.y<t.uiScale.y.ei()||i.y>t.uiScale.y.hi())return;let e,h=Number.MAX_VALUE;for(const r of s)if(r.getCursorEnabled()&&r.getVisible()){const s=r.Hc(i);if(s){const r=At(s.location,s.scale,t.engine.scale),n=Ji(i,r);Number.isNaN(n)||e&&!(n<h)||(e=s,h=n)}}return e||void 0},Dm(t){t.onSeriesBackgroundMouseEnter((()=>{t.getAutoCursorMode()!==va.disabled&&t.us.Ss()})),t.onSeriesBackgroundMouseMove((()=>{t.getAutoCursorMode()!==va.disabled&&t.us.Ss()})),t.onSeriesBackgroundMouseLeave((()=>{t.getAutoCursorMode()!==va.disabled&&t.us.Ss()})),t.onSeriesBackgroundTouchStart((()=>{t.getAutoCursorMode()!==va.disabled&&t.us.Ss()})),t.onSeriesBackgroundTouchMove((()=>{t.getAutoCursorMode()!==va.disabled&&t.us.Ss()})),t.onSeriesBackgroundTouchEnd((()=>{t.getAutoCursorMode()!==va.disabled&&t.us.Ss()}))},Bm(t,i){i.onMouseEnter(((i,s)=>{t.getAutoCursorMode()!==va.disabled&&t.us.Ss()})),i.onMouseMove(((i,s)=>{t.getAutoCursorMode()!==va.disabled&&t.us.Ss()})),i.onMouseLeave((()=>{t.getAutoCursorMode()!==va.disabled&&t.us.Ss()}))}};class xa{constructor(t,i){this.Lm=t,this.Rm=i}alter(t){this.Em=void 0!==this.Em?this.Em:this.Rm(),this.zm=t,this.Lm(t)}resetValue(){void 0!==this.zm&&(void 0!==this.Em&&this.isAltered()&&this.Lm(this.Em),this.Em=void 0,this.zm=void 0)}getNormalValue(){return void 0!==this.Em?this.Em:this.Rm()}isAltered(){return void 0!==this.zm&&this.Rm()===this.zm}}class Ma{constructor(t,i){this.Vm=[],this.Om=t,this.dt=i}update(){return this.Om.getVisible()?!(this.Nm()&&(!this.Gm()||(this.resetTable(),this.Om.Ps(),this.Nm()))&&(this.Wm(),this.Om.Ps(),this.Nm()&&(this.resetTable(),this.Om.Ps(),1))):(this.Gm()&&this.resetTable(),!0)}Gm(){for(let t=0;t<this.Vm.length;t+=1)if(this.Vm[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.Vm.length;t+=1)this.Vm[t].resetValue();return this}Nm(){return((t,i)=>{const s=At(t.getPosition(n(-1,-1),_t.PaddedBackground),t.scale,i),e=At(t.getPosition(n(1,1),_t.PaddedBackground),t.scale,i);return s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd()||s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()})(this.Om,this.dt)}Um(){return((t,i)=>{const s=At(t.getPosition(n(-1,-1),_t.PaddedBackground),t.scale,i),e=At(t.getPosition(n(1,1),_t.PaddedBackground),t.scale,i);return s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd()})(this.Om,this.dt)}Ym(){return((t,i)=>{const s=At(t.getPosition(n(-1,-1),_t.PaddedBackground),t.scale,i),e=At(t.getPosition(n(1,1),_t.PaddedBackground),t.scale,i);return s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()})(this.Om,this.dt)}Hm(t){return this.Vm.push(t),t}}class _a extends Ma{constructor(){super(...arguments),this.ma=this.Hm(new xa((t=>this.Om.setOrigin(t)),(()=>this.Om.getOrigin())))}Wm(){const t=this.ma.getNormalValue(),i=n(this.Um()?-t.x:t.x,this.Ym()?-t.y:t.y);this.ma.alter(i)}}class wa extends Ma{constructor(t,i,s,e){super(t,i),this.$m=this.Hm(new xa((t=>this.Om.setTextFont((i=>i.setSize(t)))),(()=>this.Om.getTextFont().getSize()))),this.Xm=s,this.jm=e}Wm(){const t=this.$m.getNormalValue(),i=this.Xm;if(i<t)for(let s=1;s<=this.jm;s+=1){const e=t-(t-i)*(s/this.jm);if(this.$m.alter(e),this.Om.Ps(),!this.Nm())return}}}const Ca={Flip:(t,i)=>new _a(t,i),FontSize:(t=5,i=5)=>(s,e)=>new wa(s,e,t,i)};class ka{constructor(){this.Zm=[]}addRow(...t){return this.Zm.push(t),this}}class Ta extends ka{Zu(){const t=this.Zm;return this.Zm=[],t}Qm(){return this.Zm.length=0,this}}class Fa extends Gn{constructor(){super(...arguments),this.Nu=this.qi.cursorResultTableTextFont,this.Dd=0,this.Jm=this.qi.cursorResultTableTextFillStyle}setContent(t){for(let i=0;i<t.length;i+=1){const s=t[i];let e=!1;for(let t=0;t<s.length;t+=1){const i=s[t],h="object"==typeof i&&"text"in i?i.text:"string"==typeof i?i:void 0,r="object"==typeof i&&"icon"in i?i.icon:mn(i)?i:void 0;if((void 0===h||0===h.length)&&!r){e=!0;break}}e||(s.unshift(""),s.push(""))}this.Km();const i=t.length;let s=this.getMembers().length;for(let e=0;e<Math.max(i,s);e+=1){const h=this.getRow(e,!0);if(e>=i)this.getMembers()[e].dispose(),e-=1,s-=1;else{const i=t[e].length;let s=h.getMembers().length;for(let r=0;r<Math.max(i,s);r+=1){const n=t[e][r],o="object"==typeof n&&"font"in n?n.font:void 0,a="object"==typeof n&&"fillStyle"in n?n.fillStyle:void 0,l="object"==typeof n&&"text"in n?n.text:"string"==typeof n?n:void 0,u="object"==typeof n&&"icon"in n?n.icon:mn(n)?n:void 0,c=h.getMembers();if(r>=i)h.getMembers()[r].dispose(),r-=1,s-=1;else if(void 0!==l&&l.length>0||u){for(let t=c.length;t<r;t+=1)h.addGap(void 0,void 0);const t=o?this.Nu.withMutations((t=>{for(const i of Object.keys(o)){const s=o[i];t.set(i,s)}return t})):this.Nu,i=a||this.Jm,s=c[r];if(l){let e;s&&s instanceof kn?e=s:(s&&s.dispose(),e=h.addElement(Tn,r)),e.setFont(t).setFillStyle(i).setText(l).setTextRotation(this.Dd)}else if(u){let e;s&&s instanceof Bn?e=s:(s&&s.dispose(),e=h.addElement(Ln,r)),e.setFillStyle(i).setShape(u).setSize({y:t.size,x:t.size}),e.setMargin(5)}}else{for(let t=c.length;t<r;t+=1)h.addGap(void 0,void 0);const t=c[r];t&&t instanceof Rn||(t&&t.dispose(),h.addGap(void 0,r))}}}}return this.ks.Ss(),this}setTextFillStyle(t){this.Jm="function"==typeof t?t(this.Jm):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof kn&&s.setFillStyle(this.Jm)}}return this.ks.Ss(),this}getTextFillStyle(){return this.Jm}setTextFont(t){return ch(t)?this.Nu=t:this.Nu=t(this.Nu),this.ks.Ss(),this}getTextFont(){return this.Nu}setTextRotation(t){return this.Dd=t,this.ks.Ss(),this}getTextRotation(){return this.Dd}Km(){for(let t=0;t<this.Sd.length;t+=1)for(let i=0;i<this.Sd[t].getMembers().length;i+=1)this.Sd[t].getMembers()[i].dispose()}Ps(){for(let t=0;t<this.Sd.length;t+=1)this.Sd[t].setMinimumSize(void 0);super.Ps();for(let t=0;t<this.Sd.length;t+=1)this.Sd[t].setMinimumSize(this.size.x);return super.Ps(),this}}class Ia{constructor(t,i,s,e,h){this.qm=!0,this.ty=!0,this.Qg=!1,this.ua=n(0,0),this.Xi=!0,this.ks=t,this.renderingScale=i,this.scale=s,this.iy=e,this.sy=new Bn(this.ks,this.renderingScale,this.scale,Bt,h).setMouseInteractions(!1).setFillStyle(h.cursorPointMarkerFillStyle).setSize(h.cursorPointMarkerSize).setShape(h.cursorPointMarkerShape),this.Om=new Fa(this.ks,this.renderingScale,this.scale,this.iy,Bt,h).setMouseInteractions(!1).setBackground((t=>t.setFillStyle(h.cursorResultTableFillStyle).setStrokeStyle(h.cursorResultTableStrokeStyle))).setTextFillStyle(h.cursorResultTableTextFillStyle).setTextFont(h.cursorResultTableTextFont),this.ey=Ca.Flip(this.Om,this.scale)}dispose(){return this.sy.dispose(),this.Om.dispose(),this}pointAt(t){return this.ua=t.scale===this.scale?t.location:At(t.location,t.scale,this.scale),this.sy.setPosition(this.ua),this.Om.setPosition(this.ua).setContent(t.resultTableContent),this.ks.Ss(),this}getPosition(){return this.ua}setVisible(t){return this.Xi=t,this.ks.Ss(),this}getVisible(){return this.Xi}setPointMarkerVisible(t){return this.qm=t,this.ks.Ss(),this}getPointMarkerVisible(){return this.qm}setPointMarker(t){return t(this.sy),this.ks.Ss(),this}getPointMarker(){return this.sy}setResultTableVisible(t){return this.ty=t,this.ks.Ss(),this}getResultTableVisible(){return this.ty}setResultTable(t){return t(this.Om),this.ks.Ss(),this}getResultTable(){return this.Om}setAutoFitStrategy(t){return this.ey&&this.ey.resetTable(),this.ey=t?t(this.Om,this.ks.us.dt):void 0,this.ks.Ss(),this}getAutoFitStrategy(){return void 0!==this.ey}Te(){return this.ey&&this.ey.update(),this.Om.setVisible(this.Qg&&this.Xi&&this.ty),this.sy.setVisible(this.Qg&&this.Xi&&this.qm),this.sy.Te(),this.Om.Te(),this}Ps(){return this.sy.Ps(),this.Om.Ps(),this.Qg=((t,i,s=i)=>{const e=i!==s?At(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(this.ua,this.scale),this}}class Pa extends Ia{constructor(){super(...arguments),this.hy=!1}pointAt(t){return this.ny(t.fillStyle),super.pointAt(t)}ny(t){t&&this.hy&&this.Om.setTextFillStyle(t)}setResultTableAutoTextStyle(t){return this.hy=t,this.ks.Ss(),this}getResultTableAutoTextStyle(){return this.hy}}class Da extends Ia{setPosition(t){return this.ua=t,this.sy.setPosition(t),this.Om.setPosition(t),this.ks.Ss(),this}}class Ba{constructor(t,i=[]){this.oy=[],this.ly=(t,i)=>(this.oy.forEach((s=>s(t,i))),t),this.iy=t,this.oy=i}}class La extends Ba{constructor(){super(...arguments),this.uy=(t,i,s,e)=>this.ly(new Pa(t,i,s,this.iy,e),e),this.addStyler=t=>new La(this.iy,this.oy.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new La(t,this.oy.map((t=>t)))}}class Ra extends Ba{constructor(){super(...arguments),this.Ay=(t,i,s,e)=>this.ly(new Da(t,i,s,this.iy,e),e),this.addStyler=t=>new Ra(this.iy,this.oy.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Ra(t,this.oy.map((t=>t)))}}const Ea=t=>t.setResultTable((t=>t.setEffect(!0).setOrigin(n(-1,-1)).setMargin(5))),za=(t,i)=>t.setPointMarker((t=>t.setFillStyle(i.chartMarkerPointMarkerFillStyle).setSize(i.chartMarkerPointMarkerSize).setShape(i.chartMarkerPointMarkerShape))).setResultTable((t=>t.setEffect(!0).setBackground((t=>t)).setOrigin(n(-1,-1)).setMargin(10))),Va=new La(Fn,[Ea]),Oa=new La(Dn,[Ea,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(n(0,-1)).setMargin(0).setBackground((t=>{t instanceof Dn&&t.setDirection(kt.Down).setPointerLength(10).setPointerAngle(60)}))))]),Na=Va,Ga=Va,Wa=Oa,Ua=new Ra(Fn,[za,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(De.LeftBottom)))]),Ya=(t,i,s,e,h)=>({location:t,scale:i,resultTableContent:s,owner:e,fillStyle:h});var Ha;!function(t){t[t.LabelsInsideSlices=0]="LabelsInsideSlices",t[t.LabelsOnSides=1]="LabelsOnSides"}(Ha||(Ha={}));const $a={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>t.getAnimatedValue()-i.getAnimatedValue(),SortByValueDescending:(t,i)=>i.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},Xa={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`},ja=(t,i,s,e)=>t.addRow(s.getName()).addRow(s.getAnimatedValue().toString());class Za extends Zs{constructor(){super(...arguments),this.xs="Slice",this.u=0}}const Qa=(t,i)=>{ii(i),t.setExploded(!t.getExploded())};class Ja extends Za{}class Ka extends Ja{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.gy=!1,this.my=O,this.yy=O,this.py=this.u,this.Sy=this.gy?1:0,this.vy=this.getVisible(),this.by=K((()=>this.Ji.us.Ss())),this.xy=K((()=>this.Ji.us.Ss())),this.My=()=>{this._y=void 0},this.wy=()=>{this.Cy=void 0},this.index=t,this.Ji=e,this.scale=h,this.Ki=r,this.ky=i.Jc(h).cs(this.getHighlight()),this.ds(this.ky),this.Ue=s.Pr(h).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0}),this.onMouseClick(Qa),this.onTouchEnd(Qa)}setValue(t){return this.Ji.getAnimationsEnabled()?this.vy&&this.Ty(this.py,t):this.py=t,this.u=t,this.Ji.us.Ss(),this}getValue(){return this.u}setExploded(t){if(t&&!1===this.Ji.getMultipleSliceExplosion()){const t=this.Ji.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.Ji.getAnimationsEnabled()?(this.Cy&&this.Cy.finish(),this.Cy=this.xy(300,Q.ease)([[this.Sy,t?1:0]],(([t])=>{this.Sy=t,this.Ji.us.Ss()})),this.Cy.onEveryAnimationEnd(this.wy),this.gy=!this.gy):!1!==this.Ji.getMultipleSliceExplosion()||t?(this.Sy=this.gy?0:1,this.gy=!this.gy):(this.Sy=0,this.gy=!this.gy),this.Ji.us.Ss(),this}getExploded(){return this.gy}setVisible(t){return this.vy=t,!1===t?this.Ji.getAnimationsEnabled()&&this.py>0?(this._y&&(this._y.finish(!1),this._y=void 0),this.Ty(this.py,0,(()=>super.setVisible(!1)))):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this._y&&(this._y.finish(!1),this._y=void 0),super.setVisible(!0),this.Ty(this.py,this.u)):(this.py=this.u,super.setVisible(!0)),this}Ty(t,i,s){this._y=this.by(300,Q.ease)([[t,i]],(([t])=>{this.py=t,this.Ji.us.Ss()})),this._y.onEveryAnimationEnd(this.My),s&&this._y.onAnimationEnd(s)}setStyle(t,i,s,e){this.my=t,this.yy=s,this.ky.Ce(this.my).we(i),this.Ue.Ce(this.yy).Oh(e);for(let t=0;t<this.Qi.length;t+=1)this.styleAttachedEntry(this.Qi[t])}getAnimatedValue(){return this.py}getAnimatedExplosion(){return this.Sy}attach(t,i=!0,s=!1){return super.attach(t,i,s),this.styleAttachedEntry(t,i,s),this}styleAttachedEntry(t,i=!0,s=!1){gi(t,this.qi,s,{fill:this.my,stroke:this.ky.ao()})}}const qa=(t,i,s)=>ds(i,cs(Ms(.5*(t.Jl()+t.Ti())*Math.PI/180),s)),tl=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],u=o-360*i[a],c=l.getAnimatedExplosion();if(0===c||1===n)l.ky.Fe(s);else{const t=ds(s,cs(Ms(.5*(o+u)*Math.PI/180),r*c));l.ky.Fe(t)}l.ky.eu(o).ze(u).ru(e).nu(e).ou(h),o=u}},il=t=>{const i=t.getSlices();for(let t=0;t<i.length;t+=1)i[t].setExploded(!1)};class sl extends pa{constructor(t,i,s,e,h,r,n){super(t,i,s,i.vm("pieChart bg",0),e,i.us.qi.pieChartBackgroundFillStyle,i.us.qi.pieChartBackgroundStrokeStyle,i.us.qi.pieChartTitleFont,i.us.qi.pieChartTitleFillStyle,r),this.Fy=[],this.Iy=$a.SortByName,this.Yl=0,this.Py=this.qi.pieChartSliceFillStylePalette,this.Dy=this.qi.pieChartSliceStrokeStyle,this.By=!0,this.Ly=this.qi.pieChartSliceLabelFont,this.Ry=this.qi.pieChartSliceLabelFillStyle,this.Ey=0,this.zy=!1,this.Vy=20,this.Oy=!0,this.Ny=!0,this.Gy=va.onHover,this.Wy=ja,this.Uy=t=>{const i=this.Fy.indexOf(t);i>=0&&(this.Fy.splice(i,1),this.Yy())},this.us.Nn(_o.af),this.Hy=i.$y("pieChart bottom",0),this.Xy=i.$y("pieChart top",1),this._m.Rh("Pie Chart"),this.Sm(h,this.pixelScale),this.onBackgroundMouseDoubleClick(il);const o=Ks(new qs(il));this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd),this.jy=i.Zy();const a=zt(n?n.autoCursorBuilder:void 0,Ga);this.Pm=a.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.setAnimationsEnabled(!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled))}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}addSlice(t,i){const s=new Ka(this.Ey,this.Hy,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);this.Ey+=1,s.setName(t);const e=this.th;return this.th=!1,s.setValue(i),this.th=e,s.setEffect(this.Oy),this.Qy(s),this.Fy.push(s),this.Yy(),s.setHighlightOnHover(this.By),s.onMouseMove((()=>{this.Gy&&this.us.Ss()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Fy}setMultipleSliceExplosion(t){return this.zy=t,this}getMultipleSliceExplosion(){return this.zy}setInnerRadius(t){return this.Yl=t,this.us.Ss(),this}getInnerRadius(){return this.Yl}setSliceExplosionOffset(t){return this.Vy=t,this.us.Ss(),this}getSliceExplosionOffset(){return this.Vy}setLUT(t){return this.Nd=t,this.us.Ss(),this}setSliceFillStyle(t){this.Py=t;for(let t=0;t<this.Fy.length;t+=1)this.Qy(this.Fy[t]);return this.us.Ss(),this}getSliceFillStyle(){return this.Py}setSliceStrokeStyle(t){this.Dy="function"==typeof t?t(this.Dy):t;for(let t=0;t<this.Fy.length;t+=1)this.Qy(this.Fy[t]);return this.us.Ss(),this}getSliceStrokeStyle(){return this.Dy}setSliceEffect(t){return this.Oy=t,this.Fy.forEach((i=>i.es.ns.ps(t))),this.us.Ss(),this}getSliceEffect(){return this.Oy}setSliceSorter(t){return this.Iy=t,this.Fy=this.Fy.sort(this.Iy),this.us.Ss(),this}getSliceSorter(){return this.Iy}setLabelFillStyle(t){this.Ry="function"==typeof t?t(this.Ry):t;for(let t=0;t<this.Fy.length;t+=1)this.Qy(this.Fy[t]);return this.us.Ss(),this}getLabelFillStyle(){return this.Ry}setLabelFont(t){this.Ly="function"==typeof t?t(this.Ly):t;for(let t=0;t<this.Fy.length;t+=1)this.Qy(this.Fy[t]);return this.us.Ss(),this}getLabelFont(){return this.Ly}setLabelEffect(t){return this.Ny=t,this.Fy.forEach((i=>i.es.rs.ps(t))),this.us.Ss(),this}getLabelEffect(){return this.Ny}setLabelFormatter(t){return this.Jy=t,this.us.Ss(),this}getLabelFormatter(){return this.Jy}setSliceHighlightOnHover(t){return this.By=t,this.Fy.forEach((i=>i.setHighlightOnHover(t))),this}Te(t){super.Te(t),Sa.Fm(this._m,this.bm),super.pm();const i=Sa.Tm(this._m,this.bm),s=n(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+i)),e=n(this.ya.left+s.x/2,this.ya.bottom+s.y/2);if(this.Nd){const t=this.Nd;this.Fy.forEach((i=>{this.Qy(i,new U({color:t.getColors(i.getAnimatedValue())}))}))}for(let t=0;t<this.Fy.length;t+=1){const i=this.Fy[t].getAnimatedValue()>0;this.Fy[t].ky.setVisible(i),this.Fy[t].Ue.setVisible(i)}this.Fy=this.Fy.sort(this.Iy);const h=this.Fy.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.Ue.Rh(this.Jy(i,o[t])).Ps()}ba.Im(this,!1,!1,this.Fy,void 0,((t,i)=>Ya(i,this.engine.scale,this.Wy(new Ta,this,t,o[h.indexOf(t)]||0).Zu(),t,void 0))),this.Ky(h,o,e,s)}Qy(t,i=this.Py(t.index,t)){t.setStyle(i,this.Dy,this.Ry,this.Ly)}Yy(){this.Fy=this.Fy.sort(this.Iy),this.us.Ss()}Zd(){return this.Fy}dispose(){return super.dispose(),this.Fy.slice().forEach((t=>t.dispose())),this.Pm.dispose(),this.Xy.W(),this.Hy.W(),this.jy.W(),this}}const el={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},hl=(...t)=>{const i=[];return t.forEach((t=>{var s;t&&"object"==typeof(s=t)&&s&&"pattern"in s&&i.push({type:"DataPattern",args:t})})),i};class rl extends sl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.Jy=Xa.NamePlusValue,this.qy=[],this.tp=40,this.ip=5,this.sp=10,this.ep=this.qi.pieChartConnectorStrokeStyle,this.setPadding({bottom:50})}setLabelConnectorStyle(t){this.ep=t;for(let t=0;t<this.qy.length;t+=1)this.qy[t].Re(this.ep);return this.us.Ss(),this}getLabelConnectorStyle(){return this.ep}setLabelSliceOffset(t){return this.tp=t,this.us.Ss(),this}getLabelSliceOffset(){return this.tp}setLabelConnectorGapStart(t){return this.ip=t,this.us.Ss(),this}getLabelConnectorGapStart(){return this.ip}setLabelConnectorEndLength(t){return this.sp=t,this.us.Ss(),this}getLabelConnectorEndLength(){return this.sp}Ky(t,i,s,e){const h=this.Ly.getSize(),r=this.tp,n=this.sp,o=this.ip,a=Math.min(this.Vy,r-o);let l=0;if(1===t.length)l=t[0].Ue.jc().x;else for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].Ue.jc().x);const u=Math.max(.5*(Math.min(e.x-2*l-2*n,e.y-2*h)-2*r),0);tl(t,i,s,u,this.Yl,a);let c=90;const d=t.map(((t,e)=>{const h=360*i[e],o=c-h,a=Ms(vs(.5*(c+o))),l=a.x>=0?-1:1,d=ds(ds(s,cs(a,u+r)),{x:l*-n,y:0});c=o;const f={x:l,y:0};t.Ue.Fe(d).Ea(f),t.Ue.Ps();const A=is(t.Ue.We());return{position:d,alignment:f,shape:t.Ue,boundaries:A,sliceAngleVec:a,slice:t}})),f=[];for(let t=0;t<d.length;t+=1){const i=d[t],s=f[f.length-1];s&&!1!==Xi([s.boundaries,i.boundaries])?i.shape.setVisible(!1):(f.push(i),i.shape.setVisible(!0))}for(let t=0;t<this.qy.length;t+=1)this.qy[t].setVisible(!1);f.forEach(((t,i)=>{const e=t.slice.ky,h=qa(e,s,u+o+a*t.slice.getAnimatedExplosion()),r=Ss(t.position.y,h,s),n=t.position;this.hp([h,r,n])}))}getMinimumSize(){return n(500,300)}hp(t){let i;for(let t=0;t<this.qy.length;t+=1)if(!this.qy[t].getVisible()){i=this.qy[t].setVisible(!0);break}void 0===i&&(i=this.Xy.rp(this.pixelScale,void 0,[el.InternalUI]).Re(this.ep).setMouseInteractions(!1),this.qy.push(i)),i.Nt().nl(t)}}class nl extends sl{constructor(){super(...arguments),this.Jy=Xa.Name,this.np=.5}Ky(t,i,s,e){const h=this.Vy,r=Math.max(0,.5*Math.min(e.x,e.y)-h);tl(t,i,s,r,this.Yl,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.ky,o=e.Ue,a=this.Yl/100,l=((1-a)*this.np+a)*r+e.getAnimatedExplosion()*h,u=qa(n,s,l);o.Fe(u).Da(0).La(0)}}getMinimumSize(){return n(200,200)}setLabelPosition(t){return this.np=t,this.us.Ss(),this}getLabelPosition(){return this.np}}const ol={LabelsOnSides:rl,LabelsInsideSlices:nl},al=t=>{if(he(t)){const i=t.getThickness(),s=t.getFillStyle();if(Y(s))return 1===i?fh:new gh({size:i,fillStyle:s,shape:"sphere"})}return fh};class ll{constructor(t,i,s,e){this.op=[],this.ap=new Map,this.lp=t,this.up=i,this.cp=s,this.dp=e}fp(){this.cp&&this.cp();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];let s=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const e=this.op.slice(),h=[];i.forEach((t=>{let i=e.pop();i||(i=this.lp(),this.op.push(i));const r=[],n=i.Ap().slice();t.instances.forEach(((t,i)=>{const s=n.shift();r.push({...t,existingMember:s})}));const o=this.up(i,r,t.sharedProperties);s=ci(s,o,{canReturnB:!0});for(let s=0;s<t.instances.length;s+=1)h.push({No:t.instances[s].No,collection:i,member:o[s]});n.forEach((t=>{null==i||i.bd(t)}))})),e.forEach((t=>{t.dispose();const i=this.op.indexOf(t);i<0?bi(0,(()=>{})):this.op.splice(i,1)})),h.forEach((t=>{const i=this.ap.get(t.No);i&&t.collection.us.qn({entity:i.collection,collectionMember:i.member},{entity:t.collection,collectionMember:t.member})})),this.ap.clear(),h.forEach((t=>{this.ap.set(t.No,t)})),this.dp&&this.dp(this.op,s)}}}gp(){this.op.forEach((t=>{t.dispose()})),this.op.length=0}}class ul{constructor(t){this.mp=[],this.yp=t}fp(){return this.pp(),{add:()=>this.sl(),finishPlot:()=>{this.Sp()}}}sl(){let t=this.mp.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.yp()},this.mp.push(t)),t.isFree=!1,t.shape}pp(){this.mp.forEach((t=>{t.isFree=!0}))}Sp(){this.mp.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.mp.splice(this.mp.indexOf(t),1)}))}gp(){this.mp.forEach((t=>t.shape.dispose())),this.mp.length=0}}class cl{constructor(t,i,e,h,r,n,o,a,l,u){this.D=new s,this.u=0,this.Xi=!0,this.$i=!1,this.Ss=t,this.vp=i,this.bp=e,this.xp=h,this.Mp=r,this._p=n,this.Dd=o,this.Jm=a,this.wp=l,this.Ju=u}setValue(t){return t===this.u||(this.u=t,this.Ss(),this.D.emit("valueChange",this,this.u)),this}getValue(){return this.u}setTickStyle(t){return this.bp="function"==typeof t?t(this.bp):t,this.Ss(),this}getTickStyle(){return this.bp}setTickLength(t){return this.xp=t,this.Ss(),this}getTickLength(){return this.xp}setGridStrokeStyle(t){return this.Mp="function"==typeof t?t(this.Mp):t,this.Ss(),this}getGridStrokeStyle(){return this.Mp}setTextPadding(t){return this._p=t,this.Ss(),this}getTextPadding(){return this._p}setTextRotation(t){return this.Dd=t,this.Ss(),this}getTextRotation(){return this.Dd}setTextFillStyle(t){return this.Jm="function"==typeof t?t(this.Jm):t,this.Ss(),this}getTextFillStyle(){return this.Jm}setTextFont(t){return this.wp="function"==typeof t?t(this.wp):t,this.Ss(),this}getTextFont(){return this.wp}setTextFormatter(t){return this.Ju=t,this.Ss(),this}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}dispose(){return this.$i||(this.$i=!0,this.vp(),this.Ss(),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setVisible(t){const i=this.Xi!==t;return this.Xi=t,i&&(this.D.emit("visibleStateChanged",this,this.Xi),this.Ss()),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}}class dl extends eh{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.Cp({x:t.us.qi.xAxis3DNumericTicks,y:t.us.qi.yAxis3DNumericTicks,z:t.us.qi.zAxis3DNumericTicks}),datetime:i.Cp({x:t.us.qi.xAxis3DDateTimeTicks,y:t.us.qi.yAxis3DDateTimeTicks,z:t.us.qi.zAxis3DDateTimeTicks}),time:i.Cp({x:t.us.qi.xAxis3DTimeTicks,y:t.us.qi.yAxis3DTimeTicks,z:t.us.qi.zAxis3DTimeTicks})},{type:"linear"}),this.Tf=[],this.kp=()=>{},this.Tp=()=>{},this.Fp=()=>{},this.Ip=()=>{},this.chart=t,this.At=h,this.Pp=r,this.Dp=n,this.Bp=this.At.dt;const l=this.wh.Cp({x:this.qi.xAxis3DStrokeStyle,y:this.qi.yAxis3DStrokeStyle,z:this.qi.zAxis3DStrokeStyle});this.Lp=this.At.rp([el.InternalUI]).Re(l).Rp(al(l)).setMouseInteractions(!1),this.Lh=this.Pp.Pr(this.Dp).setMouseInteractions(!1).Ce(i.Cp({x:t.us.qi.xAxis3DTitleFillStyle,y:t.us.qi.yAxis3DTitleFillStyle,z:t.us.qi.zAxis3DTitleFillStyle})).Oh(i.Cp({x:t.us.qi.xAxis3DTitleFont,y:t.us.qi.yAxis3DTitleFont,z:t.us.qi.zAxis3DTitleFont})),this.Ep=new ul((()=>this.Pp.Pr(this.Dp))),this.zp=new ll((()=>this.At.Lg().setMouseInteractions(!1)),((t,i,s)=>(t.Nt().Re(s.lineStyle),i.map((({positions:i,existingMember:s})=>s||t.nl(i)))))),this.es=a,this.Wh=this.es.yg([this.Lh]).ps(e.effectsText),this.Lp.setMouseEnterEventHandler(this.kp).setMouseLeaveEventHandler(this.Tp).setMouseDragEventHandler(this.Fp).setMouseDragStopEventHandler(this.Ip),s.ig=this}setTickStrategy(t,i){return super.Fh(t,i)}getTickStrategy(){return this.je}addCustomTick(){const t=new cl((()=>this.chart.us.Ss()),(()=>{const i=this.Tf.indexOf(t);i>=0&&this.Tf.splice(i,1)}),this.qi.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickLength,this.qi.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.qi.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)));return this.Tf.push(t),this.chart.us.Ss(),t}setStrokeStyle(t){return this.Lp.Re(t).Rp(al(this.Lp.uu())),this.chart.us.Ss(),this}getStrokeStyle(){return this.Lp.uu()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.Lp.setVisible(t),!1===t&&(this.zp.gp(),this.Ep.gp()),this.Pp.Ss(),this}_g(){return this.chart.getSeries()}Vp(t){return Math.abs(this.dt.tt(t)*this.At.Op(1))}Cr(t,i,s){const e=Math.abs(this.dt.tt(i-t)*this.At.Op(1));return{min:t-s*e,max:i+s*e}}ur(t,i){return new fl(i,t,this.Pp,this.Dp,this.At)}cr(t,i){const s=this.Np(i,t.u,t.Sh.lr.tickLength,t.Sh.lr.tickPadding);return t.Ue.Fe(s.labelPosition).Ea(s.labelAlignment),s}Np(t,i,s,e){const{wuSize:h,start:r,end:o,tickDirection3D:a,tickDirection2D:l}=t,u=(i-this.dt.getInnerStart())/(this.dt.getInnerEnd()-this.dt.getInnerStart()),c=Vi.addVec(ts(r,o,u),Vi.multiplyVec(Vi.multiply(a,this.At.Op(.5*this.Lp.uu().getThickness())),h)),d=Vi.addVec(c,Vi.multiplyVec(Vi.multiply(a,this.At.Op(s)),h)),f=this.At.Gp(d)||n(0,0);return{labelPosition:ds(At(f,this.chart.engine.scale,this.Dp),cs(l,e)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:u}}Wp(t,i,s){const{wuSize:e,start:h,end:r,tickDirection3D:o}=i,a=(t-this.dt.getInnerStart())/(this.dt.getInnerEnd()-this.dt.getInnerStart()),l=Vi.addVec(ts(h,r,a),Vi.multiplyVec(Vi.multiply(o,this.At.Op(.5*this.Lp.uu().getThickness())),e)),u=Vi.addVec(l,Vi.multiplyVec(Vi.multiply(o,this.At.Op(10)),e)),c=this.At.Gp(l)||n(0,0),d=this.At.Gp(u)||n(0,0);return this.Pp.Ee(this.Dp).Ve(c).ze(d).Re(new ee({fillStyle:new U({color:x(120*s)}),thickness:1}))}_r(t,i){return Al(t,i,this.dt)}Te(t){if(!this.Xi)return;const i=Math.min(this.Ih,this.Ph),s=Math.max(this.Ih,this.Ph),e=this.Bp,h=l(e.x.et(),e.y.et(),e.z.et());let r,o;this.Yp()?(r=l(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerStart()),o=l(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerEnd())):(r=l(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),o=this.wh.Hp(l(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),r));const a=this.wh.Jd,u=this.At.Gp(r)||n(0,0),c=this.At.Gp(o)||n(0,0),d=ts(r,o,.5),f=Vi.addVec(d,Vi.multiplyVec(Vi.multiply(a,-1),h)),A=this.At.Gp(d)||n(0,0),g=this.At.Gp(f)||n(0,0),m=as(fs(At(A,this.chart.engine.scale,this.Dp),At(g,this.chart.engine.scale,this.Dp)));this.Lp.Nt().nl([r,o]);const{gridlinePositionA:y,gridlinePositionB:p,gridlinePositionC:S}=this.wh.$p(t),v=t=>({x:-1===t.x?this.Bp.x.getInnerStart():1===t.x?this.Bp.x.getInnerEnd():0,y:-1===t.y?this.Bp.y.getInnerStart():1===t.y?this.Bp.y.getInnerEnd():0,z:-1===t.z?this.Bp.z.getInnerStart():1===t.z?this.Bp.z.getInnerEnd():0}),b=v(y),x=v(p),M=v(S),_={physicalAxisSize:us(fs(u,c)),wuSize:h,start:r,end:o,tickDirection3D:a,tickDirection2D:m,gridlinePositionA:b,gridlinePositionB:x,gridlinePositionC:M},w=this.qh(_),C=this.zp.fp();for(const[t,i]of this.Ze)for(const[,s]of i){const i=w.get(s);if(!i)continue;const e=this.Xp(_,i);C.add({No:0,positions:[e.tickStroke.start,e.tickStroke.end]},{lineStyle:t.lr.tickStyle}),e.gridStroke&&C.add({No:0,positions:e.gridStroke},{lineStyle:t.lr.gridStrokeStyle})}const k=this.Ep.fp(),T={x:0,y:0};this.Tf.forEach((t=>{if(!t.Xi||t.u<i||t.u>s)return;const e=this.Np(_,t.u,t.xp,t._p),h=this.Xp(_,e),r=k.add().Fe(e.labelPosition).Ea(e.labelAlignment).Ce(t.Jm).Oh(t.wp).Rh(t.Ju(t.u)).Nh(t.Dd).Ps().oi();T.x=Math.max(T.x,r.x),T.y=Math.max(T.y,r.y),C.add({No:0,positions:[h.tickStroke.start,h.tickStroke.end]},{lineStyle:t.bp}),h.gridStroke&&C.add({No:0,positions:h.gridStroke},{lineStyle:t.Mp})})),k.finishPlot(),C.finishPlot();const F=this.gr(((t,i)=>{const s=i.Ue.oi();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:T.x,y:T.y}),I=Math.atan((c.y-u.y)/(c.x-u.x));this.Lh.Ea({x:0,y:0}).Nh(180*-I/Math.PI);const P=Vi.addVec(d,Vi.multiplyVec(Vi.multiply(a,this.At.Op(.5*this.Lp.uu().getThickness()+this.yr(((t,i)=>Math.max(t,i.tickLength)),0))),h)),D=this.At.Gp(P)||n(0,0),B=ds(At(D,this.chart.engine.scale,this.Dp),ds(ds(As(F,m),cs(m,this.yr(((t,i)=>Math.max(t,i.labelPadding)),0))),As(cs(this.Lh.Ps().oi(),.5),m)));this.Lh.Fe(B),this.Lp.jp={overrideFollowing:!1,skipMousePicking:!1}}Xp(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:h}=t,r=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return Lt(o,0)||Lt(o,1)||(a=[this.Zp()?{...s,x:r.x}:this.Qp()?{...s,y:r.y}:this.Yp()?{...s,z:r.z}:{x:0,y:0,z:0},this.Zp()?{...e,x:r.x}:this.Qp()?{...e,y:r.y}:this.Yp()?{...e,z:r.z}:{x:0,y:0,z:0},this.Zp()?{...h,x:r.x}:this.Qp()?{...h,y:r.y}:this.Yp()?{...h,z:r.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:r,end:n}}}Uh(){super.Uh(),this.zp.gp(),this.Ep.gp()}Zp(){return this.wh.Zp()}Qp(){return this.wh.Qp()}Yp(){return this.wh.Yp()}}class fl extends hh{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Jp=h}}const Al=(t,i,s)=>Rt(t+.1*(i-t)+Math.abs(s.et())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),gl=(t,i,s,e)=>({pr:()=>{const s=t();let e;for(const t of s){if(!t.Kp())continue;const s=i(t);e=void 0===s?e:void 0!==e?Math.min(e,s):s}return e},Sr:()=>{const i=t();let e;for(const t of i){if(!t.Kp())continue;const i=s(t);e=void 0===i?e:void 0!==e?Math.max(e,i):i}return e},br:()=>{const i=t();let s;for(const t of i){if(!t.Kp())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),ml=t=>({...gl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.br().y)),Cp:t=>t.y,Hp:(t,i)=>({x:i.x,y:t.y,z:i.z}),Jd:l(-1,0,0),$p:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(i.x,0,i.z),gridlinePositionB:l(i.x,0,-i.z),gridlinePositionC:l(-i.x,0,-i.z)}},Zp:()=>!1,Qp:()=>!0,Yp:()=>!1}),yl=t=>({...gl(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.br().z)),Cp:t=>t.z,Hp:(t,i)=>({x:i.x,y:i.y,z:t.z}),Jd:l(1,0,0),$p:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(i.x,-i.y,0),gridlinePositionB:l(i.x,i.y,0),gridlinePositionC:l(-i.x,i.y,0)}},Zp:()=>!1,Qp:()=>!1,Yp:()=>!0});class pl extends Zs{constructor(t,i,s,e,h){super(t,i,e,h),this.qp=hn,this.tS=!0,this.iS=!0,this.Ji=t,this.At=s,this.ts=new Map,this.onMouseWheel(this.Ji.sS),this.onMouseDrag(this.Ji.eS),this.onTouchStart(this.Ji.hS.onTouchStart),this.onTouchMove(this.Ji.hS.onTouchMove),this.onTouchEnd(this.Ji.hS.onTouchEnd)}setAutoScrollingEnabled(t){return this.tS=t,this.Ji.us.Ss(),this}getAutoScrollingEnabled(){return this.tS}setColorShadingStyle(t){return this.qp=t,this.ts.forEach(((i,s)=>s.rS(t))),this.At.Ss(),this}getColorShadingStyle(){return this.qp}setDepthTestEnabled(t){return this.iS=t,this.ts.forEach(((i,s)=>s.nS(t))),this.At.Ss(),this}getDepthTestEnabled(){return this.iS}oS(){}Te(){}dp(){}getXMax(){const t=this.Na;return t?t.bt():void 0}getXMin(){const t=this.Na;return t?t.vt():void 0}getYMax(){const t=this.Na;return t?t.Mt():void 0}getYMin(){const t=this.Na;return t?t.xt():void 0}getZMax(){const t=this.Na;return t?t.aS():void 0}getZMin(){const t=this.Na;return t?t.lS():void 0}br(){const t=this.Na;return t?l(t.vl(),t.bl(),t.uS()):l(0,0,0)}}class Sl extends pl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.xs="Box Series 3D",this.cS=.25,this.dS=!1,this.Gd=()=>mi(this.be),this.be=Si(this.qi.boxSeries3DFillStyle,h),this.Na=this.At.AS().nS(this.iS).Ce(this.be).fS(this.cS).cs(this.getHighlight()),this.ds(this.Na)}invalidateData(t){const i=t.length;if(0===i)return this;this.dS&&this.Ji.us.Nn(_o.vf);const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.Na.gS(e.slice()),this.Ji.us.Ss(),this.dS=!0,this}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Na.Ce(t),this.Ji.us.Ss(),this}getFillStyle(){return this.be}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.cS=void 0!==t?Rt(t,0,1):void 0,this.Na.fS(this.cS),this.At.Ss(),this}getRoundedEdges(){return this.cS}Kp(){return this.tS&&this.getVisible()}Ie(t,i){t.cs(i),this.Ji.us.Ss()}Te(){super.Te(),this.Na.Ps(!1)}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{fill:this.be}),this}}class vl extends pl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.dS=!1,this.Gd=()=>mi(this.lu.getFillStyle())}setStrokeStyle(t){this.lu="function"==typeof t?t(this.lu):t;const i=this.lu;return this.Na.Re(i),this.At.Ss(),this}getStrokeStyle(){return this.lu}add(t){return this.dS&&this.Ji.us.Nn(_o.vf),this.dS=!0,(t=Array.isArray(t)?t:[t])?(this.Na.nl(t.slice()),this.At.Ss(),this):this}clear(){return this.Na.Nt(),this}getPointAmount(){const t=this.Na;return t.ol()+t.al()}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}Ie(t,i){t.cs(i),this.At.Ss()}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{stroke:this.lu}),this}}class bl extends vl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.xs="Line Series 3D",this.lu=Si(e.lineSeries3DStrokeStyle,h),this.mS=Ph.pointStyle3D,this.yS(this.lu),this.Na=this.At.rp([el.UserSeries]).nS(this.iS).Re(this.lu).Rp(this.mS).cs(this.getHighlight()),this.ds(this.Na)}setStrokeStyle(t){super.setStrokeStyle(t),this.yS(this.lu);const i=this.mS;return this.Na.Rp(i),this}yS(t){const i=new vh.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.mS=i}}class xl extends vl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.xs="Point Line Series 3D",this.Gd=()=>mi(this.lu.getFillStyle())||mi(this.mS.getFillStyle()),this.mS=Si(e.pointLineSeries3DPointStyle,h),this.lu=Si(e.lineSeries3DStrokeStyle,h),this.pS(),this.Na=this.At.rp([el.UserSeries]).nS(this.iS).Re(this.lu).Rp(this.mS).cs(this.getHighlight()),this.ds(this.Na)}setPointStyle(t){return this.mS="function"==typeof t?t(this.mS):t,this.pS(),this.Na.Rp(this.mS),this.At.Ss(),this}getPointStyle(){return this.mS}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.lu,s=Math.abs(i.getThickness()),e=this.mS,h=e.getSize();s>("object"==typeof h?Math.max(h.x,h.y,h.z):h)&&(this.mS=e.setSize(s)),this.pS();const r=this.mS;return this.Na.Rp(r),this.At.Ss(),this}pS(){const t=this.mS,i=t.getSize();this.mS=t.setSize(i)}Ie(t,i){t.cs(i),this.At.Ss()}}class Ml extends pl{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.dS=!1,((null==r?void 0:r.individualPointSizeAxisEnabled)||(null==r?void 0:r.individualPointSizeEnabled))&&this.Ji.us.Nn(_o.bf)}add(t){return this.dS&&this.Ji.us.Nn(_o.vf),this.dS=!0,(t=Array.isArray(t)?t:[t])?(this.Na.nl(t.slice()),this.At.Ss(),this):this}clear(){return this.Na.Nt(),this}getPointAmount(){const t=this.Na;return t.ol()+t.al()}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}Ie(t,i){t.cs(i),this.At.Ss()}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{point3D:this.SS}),this}}class _l extends Ml{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.xs="Point Series 3D",this.Gd=()=>mi(this.SS.getFillStyle());const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.Ji.getSeries().length;this.SS=Si(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.Na=this.At.bS(o).nS(this.iS).vS(this.SS).cs(this.getHighlight()),this.ds(this.Na)}setPointStyle(t){this.SS="function"==typeof t?t(this.SS):t;const i=this.SS;return this.Na.vS(i),this.At.Ss(),this}getPointStyle(){return this.SS}}class wl extends Ml{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.xs="Point Cloud Series 3D",this.Gd=()=>mi(this.SS.getFillStyle());const n=this.Ji.getSeries().length;this.SS=Si(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.Na=this.At.bS(o).vS(this.SS).cs(this.getHighlight()),this.ds(this.Na)}setPointStyle(t){this.SS="function"==typeof t?t(this.SS):t;const i=this.SS;return this.Na.vS(i),this.At.Ss(),this}getPointStyle(){return this.SS}}const Cl={Triangulated:_l,Pixelated:wl};class kl extends pa{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.xS=[],this.MS=0,this._S=t=>{const i=this.xS.indexOf(t);i>=0&&(this.xS.splice(i,1),this.D.emit("seriesDispose",this,t))},this.wS=()=>{this.MS+=1},this.CS=()=>{this.MS-=1},this.onSeriesBackgroundMouseEnter=t=>this.D.on("mouseEnterSeriesBackground",t),this.onSeriesBackgroundMouseLeave=t=>this.D.on("mouseLeaveSeriesBackground",t),this.onSeriesBackgroundMouseMove=t=>this.D.on("mouseMoveSeriesBackground",t),this.onSeriesBackgroundMouseDown=t=>this.D.on("mouseDownSeriesBackground",t),this.onSeriesBackgroundMouseUp=t=>this.D.on("mouseUpSeriesBackground",t),this.onSeriesBackgroundMouseClick=t=>this.D.on("mouseClickSeriesBackground",t),this.onSeriesBackgroundMouseDoubleClick=t=>this.D.on("mouseDoubleClickSeriesBackground",t),this.onSeriesBackgroundMouseDragStart=t=>this.D.on("mouseDragStartSeriesBackground",t),this.onSeriesBackgroundMouseDrag=t=>this.D.on("mouseDragSeriesBackground",t),this.onSeriesBackgroundMouseDragStop=t=>this.D.on("mouseDragStopSeriesBackground",t),this.onSeriesBackgroundMouseWheel=t=>this.D.on("mouseWheelSeriesBackground",t),this.onSeriesBackgroundTouchStart=t=>this.D.on("touchStartSeriesBackground",t),this.onSeriesBackgroundTouchMove=t=>this.D.on("touchMoveSeriesBackground",t),this.onSeriesBackgroundTouchEnd=t=>this.D.on("touchEndSeriesBackground",t),this.offSeriesBackgroundMouseEnter=t=>this.D.off(t,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=t=>this.D.off(t,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=t=>this.D.off(t,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=t=>this.D.off(t,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=t=>this.D.off(t,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=t=>this.D.off(t,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=t=>this.D.off(t,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=t=>this.D.off(t,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=t=>this.D.off(t,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=t=>this.D.off(t,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=t=>this.D.off(t,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=t=>this.D.off(t,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=t=>this.D.off(t,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=t=>this.D.off(t,"touchEndSeriesBackground"),this.kS=this.es.yg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.xS.forEach((i=>i.setAnimationHighlight(t))),this}TS(t,i){this.kS.fs([i]),t.setMouseMoveEventHandler(((t,i)=>{this.D.emit("mouseMoveSeriesBackground",this,i)})).setMouseEnterEventHandler(((t,i)=>{this.D.emit("mouseEnterSeriesBackground",this,i)})).setMouseLeaveEventHandler(((t,i)=>{this.D.emit("mouseLeaveSeriesBackground",this,i)})).setMouseDownEventHandler(((t,i)=>this.D.emit("mouseDownSeriesBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.D.emit("mouseUpSeriesBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.D.emit("mouseClickSeriesBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.D.emit("mouseDoubleClickSeriesBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.D.emit("mouseWheelSeriesBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.D.emit("mouseDragStartSeriesBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.D.emit("mouseDragSeriesBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.D.emit("mouseDragStopSeriesBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>{this.D.emit("touchStartSeriesBackground",this,i)})).setTouchMoveEventHandler(((t,i)=>{this.D.emit("touchMoveSeriesBackground",this,i)})).setTouchEndEventHandler(((t,i)=>{this.D.emit("touchEndSeriesBackground",this,i)}))}setSeriesBackgroundFillStyle(t){return this.FS.Ce(t),this.us.Ss(),this}getSeriesBackgroundFillStyle(){return this.FS.Eh()}setSeriesBackgroundStrokeStyle(t){return this.IS.we(t),this.us.Ss(),this}getSeriesBackgroundStrokeStyle(){return this.IS.ao()}setSeriesBackgroundEffect(t){return this.kS.ps(t),this.us.Ss(),this}getSeriesBackgroundEffect(){return this.kS.vs()}PS(t){this.xS.push(t),t.onMouseEnter(this.wS),t.onMouseLeave(this.CS),void 0!==this.DS&&t.setHighlightOnHover(this.DS),this.D.emit("seriesAdded",this,t)}Zd(){return this.xS}BS(){return this.MS}setSeriesHighlightOnHover(t){return this.DS=t,this.xS.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.xS.slice().forEach(Dt),super.dispose()}LS(t){return this.D.on("seriesAdded",t)}RS(t){return this.D.off(t)}ES(t){return this.D.on("seriesDispose",t)}zS(t){return this.D.off(t)}}const Tl=Vi.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class Fl{constructor(t,i,s,e){this.VS=!0,this.OS=!0,this.NS=2*-Math.PI/2160,this.GS=2*Math.PI/2160,this.WS=.1,this.US=1*Math.PI/180,this.YS=t,this.HS=i,this.$S=s,this.Gp=e}getDefaultCameraConfiguration(t){const i={direction:Tl,location:Vi.multiply(Tl,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:i.direction,cameraLocation:i.location})||i}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.XS(s,t):"wheel-zoom"===t.type?s=this.jS(s,t):"rotate+zoom"===t.type?s=this.ZS(s,t):"fixed-rotate"===t.type?s=this.QS(s,t):"move"===t.type&&(s=this.JS(s,t))})),this.VS?s=this.KS(t.boundingBox,s):this.OS&&(s=this.qS(t.boundingBox,s)),s}XS(t,i){const{rotation:s}=i,e=t.location,h=Vi.multiply(Vi.normalize(t.location),-1),{Right:r,Up:n}=this.tv(h);let o=e;const a=this.sv(h),l=s.x*this.NS*a;o=Vi.rotateAroundAxis(o,n,l);const u=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.GS,a-this.US);return 0!==u&&(o=Vi.rotateAroundAxis(o,r,u)),{location:o,direction:Vi.multiply(Vi.normalize(o),-1)}}jS(t,i){const{deltaY:s}=i;this.VS&&this.ev(!1);const e=t.location,h=Vi.multiply(Vi.normalize(e),-1),r=s*this.WS,n=Vi.length(e)*-r;return{direction:h,location:Vi.addVec(e,Vi.multiply(h,n))}}ZS(t,i){const{rotation:s,cameraDistance:e}=i;this.VS&&this.ev(!1);let h=this.XS(t,{type:"rotate",rotation:s});const r=h.location,n=Vi.multiply(Vi.normalize(r),-1),o=Vi.multiply(n,-e);return h={direction:Vi.multiply(Vi.normalize(o),-1),location:o},h}QS(t,i){this.VS&&this.ev(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.tv(h),o=s.x*this.NS;let a=Vi.normalize(Vi.rotateAroundAxis(h,n,o));const l=s.y*this.GS;return a=Vi.normalize(Vi.rotateAroundAxis(a,r,l)),{location:e,direction:a}}JS(t,i){this.VS&&this.ev(!1),this.OS=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.tv(r);return{location:Vi.addVec(h,Vi.multiply(r,.01*e),Vi.multiply(n,.01*s)),direction:r}}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:Vi.multiply(Vi.normalize(t.cameraLocation),-1)};return this.VS?this.KS(t.boundingBox,i):this.qS(t.boundingBox,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:Vi.multiply(Vi.normalize(t.cameraLocation),-1)};return this.VS?this.KS(t.boundingBox,i):this.qS(t.boundingBox,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:Vi.multiply(Vi.normalize(t.cameraLocation),-1)};if(this.VS)return this.KS(t.boundingBox,i)}KS(t,i,s){let e=i;s=void 0!==s?s:0,e=this.hv(t,e,100,20,1,s,5);const h=this.sv(e.direction);return e=this.rv(e,this.nv(t,e,100,1),h),e}hv(t,i,s,e,h,r,n){return Il(r,n,(t=>({direction:i.direction,location:Vi.multiply(i.direction,-t)})),(i=>this.ov(t,i)),s,h,"linear",e)}nv(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.tv(i.direction),a=this.av(t,!1,i);let l=i;const u=e,c=.1;return Math.abs(a.bottom-a.top)>u&&(l=a.bottom<a.top?Pl(0,c,(t=>({location:l.location,direction:Vi.normalize(Vi.lerp(l.direction,o,t))})),(i=>this.lv(t,i)),0,u,!0,s):Pl(0,c,(t=>({location:l.location,direction:Vi.normalize(Vi.lerp(l.direction,n,t))})),(i=>this.lv(t,i)),0,u,!0,s)),Math.abs(a.left-a.right)>u&&(l=a.left<a.right?Pl(0,c,(t=>({location:l.location,direction:Vi.normalize(Vi.lerp(l.direction,r,t))})),(i=>this.uv(t,i)),0,u,!0,s):Pl(0,c,(t=>({location:l.location,direction:Vi.normalize(Vi.lerp(l.direction,h,t))})),(i=>this.uv(t,i)),0,u,!0,s)),l}ov(t,i){const s=this.av(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}uv(t,i){const s=this.av(t,!1,i);return Math.abs(s.left-s.right)}lv(t,i){const s=this.av(t,!1,i);return Math.abs(s.top-s.bottom)}av(t,i,s){const e=is(this.cv(t,i,s).map((t=>At(t,this.YS,this.HS))));return{left:e.min.x,right:this.HS.x.getInnerEnd()-e.max.x,top:this.HS.y.getInnerEnd()-e.max.y,bottom:e.min.y}}cv(t,i,s){const e=this.$S,h=l(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=l(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),n=[],o=i?16:4,a=(h.x+r.x)/2,u=(h.z+r.z)/2,c=Math.sqrt(2)*(r.x-a),d=Math.sqrt(2)*(r.z-u);return[h.y,r.y].forEach((t=>{for(let i=0;i<o;i+=1){const s=Math.PI/4+2*Math.PI*i/o,e=a+Math.cos(s)*c,h=u+Math.sin(s)*d;n.push({x:e,y:t,z:h})}})),n.map((t=>this.Gp(t,s))).filter((t=>void 0!==t))}qS(t,i){const s=Vi.length(i.location),e=this.dv(t);return s<e?{direction:i.direction,location:Vi.multiply(i.direction,-e)}:i}dv(t){return.8*Math.sqrt(t.x**2+t.y**2+t.z**2)}tv(t){const i=l(0,1,0),s=Vi.normalize(Vi.cross(i,Vi.multiply(t,-1)));let e=Vi.cross(s,t);return e.y=Math.abs(e.y),e=Vi.normalize(e),{Right:s,Up:e,Down:Vi.multiply(e,-1),Left:Vi.multiply(s,-1)}}sv(t){const i={x:0,y:1,z:0},s=Vi.angle(t,i),e=Vi.angle(t,Vi.multiply(i,-1));return Math.min(s,e)}rv(t,i,s){return{location:Vi.lerp(t.location,i.location,s),direction:Vi.normalize(Vi.lerp(t.direction,i.direction,s))}}ev(t){return this.VS=t,this}fv(){return this.VS}}const Il=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=(i+t)/2;do{const o=s(u);if(a={value:u,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const c=a.score>h;c&&"linear"===n||!c&&"reversed"===n?(u=(a.value+t)/2,i=a.value):(u=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},Pl=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=t;do{const c=s(u),d=e(c);if(void 0===a||Math.abs(d-h)<Math.abs(a.score-h)){if(a={value:u,result:c,score:e(c)},Math.abs(a.score-h)<=r)break}else if(n)break;l+=1,u+=1/(o-1)*(i-t)}while(l<o);return a.result};class Dl extends pl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.xs="Surface Grid Series 3D",this.Av={},this.dS=!1,this.Gd=()=>mi(this.be),this.qp=tn;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.Ji.getSeries().length;this.be=Si(this.qi.surfaceGridSeries3DFillStyle,n),this.gv=Si(this.qi.surfaceGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows};this.Un=o,this.Na=this.At.yv(o).Ce(this.be).mv(this.gv).rS(this.qp).cs(this.getHighlight()),this.ds(this.Na),e.start&&this.setStart(e.start),e.end&&this.setEnd(e.end),e.step&&this.setStep(e.step)}pv(){const t=this.Av.start||{x:0,z:0};let i;i=this.Av.end?{x:(this.Av.end.x-t.x)/this.Un.columns,z:(this.Av.end.z-t.z)/this.Un.rows}:this.Av.step?this.Av.step:{x:1,z:1},this.Na.Sv(t,i),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.Na.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.Na.vv().step}setEnd(t){return this.Av.end=t,this.pv(),this}getEnd(){return this.Na.vv().end}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Na.Ce(this.be),this.At.Ss(),this}getFillStyle(){return this.be}setWireframeStyle(t){return this.gv="function"==typeof t?t(this.gv):t,this.Na.mv(this.gv),this.At.Ss(),this}getWireframeStyle(){return this.Na.bv()}setIntensityInterpolation(t){return t=t||"disabled",this.Na.xv(t),this.At.Ss(),this}getIntensityInterpolation(){return this.Na.Mv()}invalidateIntensityValues(t){if(this.dS&&this.Ji.us.Nn(_o.vf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Un.dataOrder?t.length:t[0].length,rows:"rows"===this.Un.dataOrder?t.length:t[0].length},s="columns"===this.Un.dataOrder?this.Un.columns:this.Un.rows,e="columns"===this.Un.dataOrder?this.Un.rows:this.Un.columns;if(i.x>s||i.y>e){if(!0===this.Ji.cA.Hn){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Un.columns}x${this.Un.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.Na._v({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Un.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Un.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Un.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Un.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Un.dataOrder?this.Un.columns:this.Un.rows)-1,o=("columns"===this.Un.dataOrder?this.Un.rows:this.Un.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.Ji.cA.Hn){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Un.columns}x${this.Un.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.Na._v({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.At.Ss(),this.dS=!0,this}invalidateHeightMap(t){if(this.dS&&this.Ji.us.Nn(_o.vf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Un.dataOrder?t.length:t[0].length,rows:"rows"===this.Un.dataOrder?t.length:t[0].length},s="columns"===this.Un.dataOrder?this.Un.columns:this.Un.rows,e="columns"===this.Un.dataOrder?this.Un.rows:this.Un.columns;if(i.x>s||i.y>e){if(!0===this.Ji.cA.Hn){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Un.columns}x${this.Un.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.Na.wv({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Un.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Un.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Un.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Un.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Un.dataOrder?this.Un.columns:this.Un.rows)-1,o=("columns"===this.Un.dataOrder?this.Un.rows:this.Un.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.Ji.cA.Hn){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Un.columns}x${this.Un.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.Na.wv({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.At.Ss(),this.dS=!0,this}setCullMode(t){return this.Na.Cv("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Na.kv()}oS(){}Te(){}dp(){}Kp(){return this.tS&&this.getVisible()}Ie(t,i){t.cs(i),this.At.Ss()}}class Bl extends pl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.xs="Surface Grid Series 3D",this.Av={},this.Gd=()=>mi(this.be),this.Ji.us.Nn(_o.vf),this.qp=tn;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.Ji.getSeries().length;this.be=Si(this.qi.surfaceScrollingGridSeries3DFillStyle,n),this.gv=Si(this.qi.surfaceScrollingGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows};this.Un=o,this.Na=this.At.Tv(o).Ce(this.be).mv(this.gv).rS(this.qp).cs(this.getHighlight()),this.ds(this.Na),e.start&&this.setStart(e.start),e.step&&this.setStep(e.step)}pv(){const t=this.Av.start||{x:0,z:0};let i;i=this.Av.step?this.Av.step:{x:1,z:1},this.Na.Sv(t,i),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.Na.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.Na.vv().step}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Na.Ce(this.be),this.At.Ss(),this}getFillStyle(){return this.be}setWireframeStyle(t){return this.gv="function"==typeof t?t(this.gv):t,this.Na.mv(this.gv),this.At.Ss(),this}getWireframeStyle(){return this.Na.bv()}setIntensityInterpolation(t){return t=t||"disabled",this.Na.xv(t),this.At.Ss(),this}getIntensityInterpolation(){return this.Na.Mv()}clear(){return this.Na.Nt(),this.At.Ss(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),i){const t=i[0].length,s=0+t-1,e="columns"===this.Un.scrollDimension?this.Un.rows:this.Un.columns;if(s>e-1){if(!0===this.Ji.cA.Hn){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.Un.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.Un.scrollDimension?this.Un.rows:this.Un.columns;if(i>e-1){if(!0===this.Ji.cA.Hn){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.Un.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.Ji.cA.Hn){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;Tt.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.Na.Fv({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this.At.Ss(),this}setCullMode(t){return this.Na.Cv("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Na.kv()}oS(){}Te(){}dp(){}Kp(){return this.tS&&this.getVisible()}Ie(t,i){t.cs(i),this.At.Ss()}}const Ll=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof Vl),Rl=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z),El={translation:(t,i,s)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,i,s,1],xRotation(t){const i=Math.cos(t),s=Math.sin(t);return[1,0,0,0,0,i,s,0,0,-s,i,0,0,0,0,1]},yRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,0,-s,0,0,1,0,0,s,0,i,0,0,0,0,1]},zRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,s,0,0,-s,i,0,0,0,0,1,0,0,0,0,1]},scaling:(t,i,s)=>[t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],translate:(t,i,s,e)=>El.multiply(t,El.translation(i,s,e)),xRotate:(t,i)=>El.multiply(t,El.xRotation(i)),yRotate:(t,i)=>El.multiply(t,El.yRotation(i)),zRotate:(t,i)=>El.multiply(t,El.zRotation(i)),rotateXYZ(t,i){let s=El.xRotate(t,i.x);return s=El.yRotate(s,i.y),s=El.zRotate(s,i.z),s},scale:(t,i,s,e)=>El.multiply(t,El.scaling(i,s,e)),multiply(t,i){const s=i[0],e=i[1],h=i[2],r=i[3],n=i[4],o=i[5],a=i[6],l=i[7],u=i[8],c=i[9],d=i[10],f=i[11],A=i[12],g=i[13],m=i[14],y=i[15],p=t[0],S=t[1],v=t[2],b=t[3],x=t[4],M=t[5],_=t[6],w=t[7],C=t[8],k=t[9],T=t[10],F=t[11],I=t[12],P=t[13],D=t[14],B=t[15],L=[];return L[0]=s*p+e*x+h*C+r*I,L[1]=s*S+e*M+h*k+r*P,L[2]=s*v+e*_+h*T+r*D,L[3]=s*b+e*w+h*F+r*B,L[4]=n*p+o*x+a*C+l*I,L[5]=n*S+o*M+a*k+l*P,L[6]=n*v+o*_+a*T+l*D,L[7]=n*b+o*w+a*F+l*B,L[8]=u*p+c*x+d*C+f*I,L[9]=u*S+c*M+d*k+f*P,L[10]=u*v+c*_+d*T+f*D,L[11]=u*b+c*w+d*F+f*B,L[12]=A*p+g*x+m*C+y*I,L[13]=A*S+g*M+m*k+y*P,L[14]=A*v+g*_+m*T+y*D,L[15]=A*b+g*w+m*F+y*B,L},inverse(t){const i=[],s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],A=t[12],g=t[13],m=t[14],y=t[15],p=d*y,S=m*f,v=a*y,b=m*l,x=a*f,M=d*l,_=h*y,w=m*r,C=h*f,k=d*r,T=h*l,F=a*r,I=u*g,P=A*c,D=n*g,B=A*o,L=n*c,R=u*o,E=s*g,z=A*e,V=s*c,O=u*e,N=s*o,G=n*e,W=p*o+b*c+x*g-(S*o+v*c+M*g),U=S*e+_*c+k*g-(p*e+w*c+C*g),Y=v*e+w*o+T*g-(b*e+_*o+F*g),H=M*e+C*o+F*c-(x*e+k*o+T*c),$=1/(s*W+n*U+u*Y+A*H);return i[0]=$*W,i[1]=$*U,i[2]=$*Y,i[3]=$*H,i[4]=$*(S*n+v*u+M*A-(p*n+b*u+x*A)),i[5]=$*(p*s+w*u+C*A-(S*s+_*u+k*A)),i[6]=$*(b*s+_*n+F*A-(v*s+w*n+T*A)),i[7]=$*(x*s+k*n+T*u-(M*s+C*n+F*u)),i[8]=$*(I*l+B*f+L*y-(P*l+D*f+R*y)),i[9]=$*(P*r+E*f+O*y-(I*r+z*f+V*y)),i[10]=$*(D*r+z*l+N*y-(B*r+E*l+G*y)),i[11]=$*(R*r+V*l+G*f-(L*r+O*l+N*f)),i[12]=$*(D*d+R*m+P*a-(L*m+I*a+B*d)),i[13]=$*(V*m+I*h+z*d-(E*d+O*m+P*h)),i[14]=$*(E*a+G*m+B*h-(N*m+D*h+z*a)),i[15]=$*(N*d+L*h+O*a-(V*a+G*d+R*h)),i},projectionPerspective(t,i,s,e){const h=1/Math.tan(t*Math.PI/180/2),r=1/(s-e);return[h/i,0,0,0,0,h,0,0,0,0,(s+e)*r,-1,0,0,s*e*r*2,0]},projectionOrthographic:(t,i,s,e,h,r)=>[2/(i-t),0,0,-(i+t)/(i-t),0,2/(e-s),0,-(e+s)/(e-s),0,0,-2/(r-h),-(r+h)/(r-h),0,0,0,1]};class zl extends pl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.xs="Mesh Model 3D",this.Iv=new Float32Array,this.dt={x:1,y:1,z:1},this.Pv={x:0,y:0,z:0},this.Dv={x:0,y:0,z:0},this.Bv={x:0,y:0,z:0},this.Lv={x:0,y:0,z:0},this.Ya=Wi,this.Gd=()=>mi(this.getFillStyle());const n=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.Ji.getSeries().length;this.Na=this.At.Rv().nS(this.iS).Ce(Si(this.qi.meshModel3DFillStyle||this.qi.pointSeriesFillStyle,n)).cs(this.getHighlight()),this.ds(this.Na)}setModelGeometry(t){const{indices:i,vertices:s,normals:e}=t;let h=Ni,r=Oi,n=Ni,o=Oi,a=Ni,l=Oi;for(let t=0;t<s.length;t+=3){const i=s[t],e=s[t+1],u=s[t+2];h=Math.max(h,i),r=Math.min(r,i),n=Math.max(n,e),o=Math.min(o,e),a=Math.max(a,u),l=Math.min(l,u)}this.Ya={min:{x:r,y:o,z:l},max:{x:h,y:n,z:a}};for(let t=0;t<s.length;t+=3)s[t]-=this.Ya.min.x,s[t+1]-=this.Ya.min.y,s[t+2]-=this.Ya.min.z;return this.Lv={x:this.Ya.max.x-this.Ya.min.x,y:this.Ya.max.y-this.Ya.min.y,z:this.Ya.max.z-this.Ya.min.z},this.Iv=s instanceof Float32Array?s:new Float32Array(s),this.checkedNormals=e&&!Number.isNaN(e[0])?e instanceof Float32Array?e:new Float32Array(e):void 0,this.checkedNormals||this.setColorShadingStyle(tn),this.Na.Ev({vertices:this.Iv,normals:this.checkedNormals,indices:i instanceof Uint16Array?i:new Uint16Array(i),modelSize:this.Lv}),this.Ji.us.Ss(),this}setVertexValues(t){const i=this.Dv,s=this.Pv,e=this.dt,h=this.Lv,r=this.Bv,n=gt(i,this.Ji.axes,this.Ji.world);let o;if(this.zv)o=t(this.zv);else{const i=[],a=El.projectionOrthographic(-1,1,-1,1,1,-1);let l=El.translate(a,h.x/2,h.y/2,h.z/2);l=El.rotateXYZ(l,r),l=El.translate(l,-h.x/2,-h.y/2,-h.z/2);const u=(s.x+1)*(h.x/2),c=(s.y+1)*(h.y/2),d=(s.z+1)*(h.z/2);for(let t=0;t<this.Iv.length;t+=3){const s=El.multiply(l,[this.Iv[t],this.Iv[t+1],this.Iv[t+2],1]),h={x:n.x+(s[0]-u)*e.x,y:n.y+(s[1]-c)*e.y,z:n.z+(s[2]-d)*e.z};i.push(h)}this.zv=i,o=t(i)}return 0===o.length||(o.length!==this.zv.length&&!0===this.Ji.us.Un.Hn&&Tt.console.warn("LightningChart JS warning - MeshModel3D.setVertexValues returned array length is not equal to vertex locations array length.\nThis is most likely an application error."),this.Na.Vv(o instanceof Float32Array?o:new Float32Array(o)),this.Ji.us.Ss()),this}setScale(t){const i={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.dt=i,this.zv=void 0,this.Na.Ov(i),this.Ji.us.Ss(),this}getScale(){return this.dt}setModelLocation(t){return this.Dv=t,this.zv=void 0,this.Na.Nv(t),this.Ji.us.Ss(),this}getModelLocation(){return this.Dv}setModelAlignment(t){return this.Pv=t,this.zv=void 0,this.Na.Gv(t),this.Ji.us.Ss(),this}getModelAlignment(){return this.Pv}setModelRotation(t){const i={x:vs(t.x),y:vs(t.y),z:vs(t.z)};return this.Bv=i,this.zv=void 0,this.Na.Wv(this.Bv),this.Ji.us.Ss(),this}getModelRotation(){return this.Bv}setBackfaceCullingMode(t){return this.Na.Uv(t),this.Ji.us.Ss(),this}getBackfaceCullingMode(){return this.Na.Yv()}setFillStyle(t){return this.Na.Ce(t),this.Ji.us.Ss(),this}getFillStyle(){return this.Na.Eh()}setColorShadingStyle(t){return this.checkedNormals||t!==hn?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new rn.Simple))}Kp(){return!1}Ie(t,i){t.cs(i),this.Ji.us.Ss()}attach(t,i=!0,s=!1){return super.attach(t,i),gi(t,this.qi,s,{fill:this.getFillStyle()}),this}}class Vl extends kl{constructor(t,i,s,e,h,r,o){var a;let u;super(t,i,s,i.vm("chart3D bg",0),e,i.us.qi.chart3DBackgroundFillStyle,i.us.qi.chart3DBackgroundStrokeStyle,i.us.qi.chart3DTitleFont,i.us.qi.chart3DTitleFillStyle,r),this.Hv=1,this.$v=[],this.Xv=2,this.jv=!0,this.Zv=!0,this.Qv=!0,this.Jv=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.axes={id:"axes",chart:this},this.world={id:"world",chart:this},this.an=[],this.fn=()=>{const t=this.At.Kv();this.tb.qv(t),this.ib.qv(t);const i=this.sb.viewportChanged(this.eb());i&&this.hb(i),this.us.Ss()},this.eS=(t,i,s,e,h)=>{if(this.Qv){const t=h;this.$v.push({type:"rotate",rotation:t}),this.us.Ss(),ii(i)}},this.sS=(t,i)=>{if(this.Zv){if(this.jv)Math.sign(this.Jv)!==Math.sign(i.deltaY)?this.Jv=vi(i):this.Jv+=vi(i);else{const t=vi(i);this.$v.push({type:"wheel-zoom",deltaY:t})}this.us.Ss(),ii(i)}},this.us.Nn(_o.df),this._m.Rh("Chart3D"),this.rb=s.d3(),this.rb.x.J(-1,1),this.rb.y.J(-1,1),this.rb.z.J(-1,1),this.At=i.nb("chart3D layer3D",0,this.rb),this.tb=i.ob("chart3D series bg",0),this.ib=i.$y("chart3D axis ui",1),this.ab={x:new dl(this,(a=()=>this.xS,{...gl(a,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.br().x)),Cp:t=>t.x,Hp:(t,i)=>({x:t.x,y:i.y,z:i.z}),Jd:l(0,-1,0),$p:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(0,i.y,i.z),gridlinePositionB:l(0,i.y,-i.z),gridlinePositionC:l(0,-i.y,-i.z)}},Zp:()=>!0,Qp:()=>!1,Yp:()=>!1}),this.rb.x,this.qi,this.At,this.ib,this.pixelScale,!1,this.es),y:new dl(this,ml((()=>this.xS)),this.rb.y,this.qi,this.At,this.ib,this.pixelScale,!1,this.es),z:new dl(this,yl((()=>this.xS)),this.rb.z,this.qi,this.At,this.ib,this.pixelScale,!1,this.es)},this.lb=this.At.rp([el.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.qi.chart3DBoundingBoxStrokeStyle),this.FS=this.tb.ic(this.engine.scale,fr.Simple).Ce(this.qi.chart3DSeriesBackgroundFillStyle).we(at).setMouseInteractions(!0),this.IS=this.tb.ic(this.engine.scale,fr.Simple).Ce(O).we(this.qi.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.TS(this.FS,this.IS),this.ub({x:1,y:1,z:1},!0),this.sb=new Fl(this.engine.scale,this.pixelScale,this.rb,((t,i)=>(i&&this.hb(i),this.At.Gp(t)))),this.cb=this.sb.getDefaultCameraConfiguration(this.fb(this.Ab)),this.hb(this.cb),this.hS=Ks(new ie(((t,i,s)=>{u={locationOne:i,locationTwo:s,cameraLocation:this.At.getCameraLocation()}}),((t,i,s,e,h,r)=>{if(!this.Qv&&!this.Zv)return;const o=(u.locationOne.x-u.locationTwo.x)**2+(u.locationOne.y-u.locationTwo.y)**2,a=(i.x-s.x)**2+(i.y-s.y)**2,l=Vi.length(u.cameraLocation),c=o/a*l,d=n((e.x+h.x)/2,(e.y+h.y)/2);this.$v.push({type:"rotate+zoom",rotation:this.Qv?d:{x:0,y:0},cameraDistance:this.Zv?c:l}),this.us.Ss(),ii(r)}),(t=>{})),new te((t=>{}),((t,i,s,e,h)=>{if(this.Qv){const t=e;this.$v.push({type:"rotate",rotation:t}),this.us.Ss(),ii(h)}}),(t=>{}))),this.onBackgroundTouchStart(this.hS.onTouchStart),this.onBackgroundTouchMove(this.hS.onTouchMove),this.onBackgroundTouchEnd(this.hS.onTouchEnd),this.onSeriesBackgroundTouchStart(this.hS.onTouchStart),this.onSeriesBackgroundTouchMove(this.hS.onTouchMove),this.onSeriesBackgroundTouchEnd(this.hS.onTouchEnd),this.onBackgroundMouseDrag(this.eS),this.onBackgroundMouseWheel(this.sS),this.onBackgroundMouseDown(((t,i)=>{ii(i)})),this.onSeriesBackgroundMouseDrag(this.eS),this.onSeriesBackgroundMouseWheel(this.sS),this.onSeriesBackgroundMouseDown(((t,i)=>{ii(i)})),this.setAnimationsEnabled(!0!==(null==o?void 0:o.disableAnimations)&&!1!==(null==o?void 0:o.animationsEnabled)),this.onResize(this.fn),this.fn(),this.Sm(h,this.pixelScale)}addPointSeries(t){const i=new(t&&t.type||_l)(this,this._S,this.At,this.qi,this.us.es,t);return this.PS(i),i}addLineSeries(t){const i=new bl(this,this._S,this.At,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(i),i}addPointLineSeries(t){const i=new xl(this,this._S,this.At,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(i),i}addSurfaceGridSeries(t){const i=new Dl(this,this._S,this.At,t,this.qi,this.us.es);return this.PS(i),i}addSurfaceScrollingGridSeries(t){const i=new Bl(this,this._S,this.At,t,this.qi,this.us.es);return this.PS(i),i}addBoxSeries(t){const i=new Sl(this,this._S,this.At,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(i),i}addMeshModel(t){const i=new zl(this,this._S,this.At,this.qi,t,this.us.es);return this.PS(i),i}translateCoordinate(t,i,s){if(Ll(i)||Ll(s)||Rl(t)){if(Ll(i)&&Ll(s)&&Rl(t)){if("axes"===i.id&&"world"===s.id)return this.At.ft(t);if("world"===i.id&&"axes"===s.id)return this.At.yt(t);if(i.id===s.id)return t}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return fa(t,i,s,this.pixelScale,this.us)}getDefaultAxisX(){return this.ab.x}getDefaultAxisY(){return this.ab.y}getDefaultAxisZ(){return this.ab.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.ab.x,this.ab.y,this.ab.z]}setCameraLocation(t){let i={location:t,direction:Vi.normalize(Vi.multiply(t,-1))};const s=this.sb.cameraLocationChanged(this.eb(i));return s&&(i=s),this.hb(i),this.us.Ss(),this}getCameraLocation(){return this.At.getCameraLocation()}getCameraDirection(){return this.At.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.sb.ev(t);const i=this.sb.cameraLocationChanged(this.eb());return i&&this.hb(i),this}getCameraAutomaticFittingEnabled(){return this.sb.fv()}onCameraChange(t){return this.D.on("cameraChange",t)}offCameraChange(t){return this.D.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.lb.Re(t).Rp(al(this.lb.uu())),this.At.Ss(),this}getBoundingBoxStrokeStyle(){return this.lb.uu()}setBoundingBox(t){return this.ub(t,!1),this}ub(t,i){this.Ab=t;const s=this.fb(t);if(this.rb.x.q(s.x),this.rb.y.q(s.y),this.rb.z.q(-s.z),!i){const t=this.sb.boundingBoxChanged(this.eb());t&&this.hb(t)}this.us.Ss()}getBoundingBox(){return this.Ab}Te(t){if(Sa.Fm(this._m,this.bm),0!==this.Jv){const i=this.Jv*t*.006;this.$v.push({type:"wheel-zoom",deltaY:i}),this.Jv=Math.sign(this.Jv)*Math.max(Math.abs(this.Jv)-.01*t,0),0!==this.Jv&&this.us.Ss(!0)}const i=this.getCameraDirection();if(this.$v.length>0){const t=this.sb.applyCameraInteractions(this.eb(),this.$v);t&&this.hb(t),this.$v.length=0}this.gb&&Vi.equals(this.gb.location,this.cb.location)&&Vi.equals(this.gb.direction,this.cb.direction)||this.D.emit("cameraChange",this,this.getCameraLocation()),this.gb=this.cb,super.Te(t);for(let t=0;t<this.xS.length;t+=1)this.xS[t].oS();for(let t=0;t<this.xS.length;t+=1)this.xS[t].Te();this.ab.x.Mr(),this.ab.y.Mr(),this.ab.z.Mr(),this.ab.x.Te(i),this.ab.y.Te(i),this.ab.z.Te(i),super.pm();const s=this.rb,e=l(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),h=l(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd());this.lb.Nt().nl([l(h.x,e.y,e.z),l(h.x,h.y,e.z),l(h.x,h.y,h.z),l(h.x,e.y,h.z),l(e.x,e.y,h.z),l(e.x,h.y,h.z),l(h.x,h.y,h.z),l(h.x,h.y,e.z),l(e.x,h.y,e.z),l(e.x,h.y,h.z),l(e.x,e.y,h.z),l(e.x,e.y,e.z)]);const r=[l(e.x,e.y,e.z),l(h.x,e.y,e.z),l(e.x,h.y,e.z),l(h.x,h.y,e.z),l(e.x,e.y,h.z),l(h.x,e.y,h.z),l(e.x,h.y,h.z),l(h.x,h.y,h.z)].map((t=>this.At.Gp(t))),n=this.At.Gp(l((e.x+h.x)/2,(e.y+h.y)/2,(e.z+h.z)/2)),o=ui(r,n),a=[];for(let t=0;t<o.length;t+=1){const i=o[t];rs(i,n,o[t>0?t-1:o.length-1],o[t<o.length-1?t+1:0])||a.push(i)}const u=ui(a,n);this.FS.pl(u),this.IS.pl(u);for(let t=0;t<this.xS.length;t+=1)this.xS[t].dp()}dispose(){return this.an.forEach((t=>{t()})),this.an.length=0,this.rb.W(),this.At.W(),this.ib.W(),this.tb.W(),super.dispose()}j(){return this.rb.x.j(),this.rb.y.j(),this.rb.z.j(),super.j()}Z(){return super.Z()}hb(t){this.At.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(Vi.addVec(t.location,Vi.multiply(t.direction,-this.Xv))),this.cb=t,this.us.Ss()}fb(t){return Vi.divide(t,Vi.length(t)/this.Hv)}eb(t=this.cb){return{boundingBox:this.fb(this.Ab),cameraLocation:t.location,cameraDirection:t.direction}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.Zv=t,this}getMouseInteractionZoom(){return this.Zv}setMouseInteractionRotate(t){return this.Qv=t,this}getMouseInteractionRotate(){return this.Qv}forEachAxis(t){return t(this.ab.x),t(this.ab.y),t(this.ab.z),this}getSeries(){return this.xS}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.jv=!!t,this}getAnimationZoom(){return this.jv}}const Ol={Column:Un,Row:Yn};class Nl extends ma{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.mb=new Map,this.yb=this.addUIElement(Ol.Row).setPosition({x:0,y:100}).setOrigin(De.LeftTop).setBackground((t=>t.setFillStyle(O).setStrokeStyle(at)))}add(t,i){return(t instanceof pa?[t]:t instanceof qf?t.getCells().filter((t=>t.panel instanceof pa)).map((t=>t.panel)):[]).forEach((t=>{const s=this.yb.addElement(So.VerticalLegendBox).setBackground((t=>t.setFillStyle(O).setStrokeStyle(at))).add(t,i).setTitle(t.getTitle());this.mb.set(t,s)})),this.us.Ss(),this}setLegendBoxes(t){return this.mb.forEach(((i,s)=>t(i,s))),this}getMinimumSize(){return super.getMinimumSize()||this.yb.getSize()}}const Gl={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},Wl=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),Ul=(t,i)=>{let s=i.geometry;return s=Yl(t,i,s),s=Hl(t,i,s),s},Yl=(t,i,s)=>{if(t===Gl.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},Hl=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===Gl.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=is(Et(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},$l={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},Xl={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class jl extends pa{constructor(t,i,s,e,h,r,n){super(t,i,s,i.vm("mapChart bg",0),e,i.us.qi.mapChartBackgroundFillStyle,i.us.qi.mapChartBackgroundStrokeStyle,i.us.qi.mapChartTitleFont,i.us.qi.mapChartTitleFillStyle,n),this.pb=[],this.dt=this.sm.d2({scaleXYConstructor:Gs}),this.Yi=!0,this.Sb=this.qi.mapChartSeparateRegionFillStyle,this.vb=this.qi.mapChartSeparateRegionStrokeStyle,this.bb=va.onHover,this.Wy=Zl,this.th=!0,this.xb=0,this.Mb=!0,this._b=new Map,this.onMouseEnter=t=>this.D.on("mouseEnter",t),this.onMouseLeave=t=>this.D.on("mouseLeave",t),this.onMouseClick=t=>this.D.on("mouseClick",t),this.onMouseDoubleClick=t=>this.D.on("mouseDoubleClick",t),this.onMouseDown=t=>this.D.on("mouseDown",t),this.onMouseUp=t=>this.D.on("mouseUp",t),this.onMouseMove=t=>this.D.on("mouseMove",t),this.offMouseEnter=t=>this.D.off(t,"mouseEnter"),this.offMouseLeave=t=>this.D.off(t,"mouseLeave"),this.offMouseClick=t=>this.D.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.D.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.D.off(t,"mouseDown"),this.offMouseUp=t=>this.D.off(t,"mouseUp"),this.offMouseMove=t=>this.D.off(t,"mouseMove"),this.offMouseDragStart=t=>this.D.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.D.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.D.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.D.off(t,"mouseWheel"),this.onMapDataReady=t=>{const i=this.D.on("mapDataReady",t);return this.wb&&Tt.setTimeout((()=>t())),i},this.onViewChange=t=>this.D.on("viewChange",t),this.Cb=(t,i,s,e,h)=>{this.dt.x.q(e).si([this.Xt.left+this.ya.left,this.Xt.right+this.ya.right]),this.dt.y.q(h).si([this.Xt.bottom+this.ya.bottom,this.Xt.top+this.ya.top+Sa.Tm(this._m,this.bm)]),this.kb&&this.Tb(this.Fb,this.dt,this.kb)},this.wt=(t,i)=>{const s=i;if(!s||!this.wb)return;const{iRegion:e,region:h}=this.Ib(this.wb,s);this.bb!==va.disabled&&(this.Pb(h,e),ii(t)),this.Mb&&this.us.ls.Ms(h,!0),this.Db=h,this.D.emit("mouseEnter",this,t)},this.Ct=(t,i)=>{const s=i;if(!s||!this.wb)return;const{iRegion:e,region:h}=this.Ib(this.wb,s);this.Bb(h,e),this.Mb&&this.us.ls.Ms(h,!1),this.Db=void 0,this.D.emit("mouseLeave",this,t),t&&ii(t)},this.Pt=(t,i)=>{const s=i;if(!s||!this.wb)return;const{iRegion:e,region:h}=this.Ib(this.wb,s);this.bb!==va.disabled&&(this.Pb(h,e),ii(t)),this.Db=h,this.D.emit("mouseMove",this,t)},this.kt=(t,i)=>this.D.emit("mouseClick",this,t),this.Tt=(t,i)=>this.D.emit("mouseDoubleClick",this,t),this.Ft=(t,i)=>this.D.emit("mouseDown",this,t),this.It=(t,i)=>this.D.emit("mouseUp",this,t),this.Bt=(t,i,s)=>{this.D.emit("mouseDragStart",this,t,i)},this.Dt=(t,i,s,e,h)=>{this.D.emit("mouseDrag",this,t,i,s,e)},this.Lt=(t,i,s,e)=>{this.D.emit("mouseDragStop",this,t,i,s)},this.Rt=(t,i)=>{this.D.emit("mouseWheel",this,t)},this.Et=(t,i)=>{const s=i;if(!s||!this.wb)return;const{iRegion:e,region:h}=this.Ib(this.wb,s);this.Lb=this.engine.clientLocation2Engine(t.clientX,t.clientY),this.Pb(h,e),this.Mb&&this.us.ls.Ms(h,!0),this.Db=h,this.D.emit("touchStart",this,t),ii(t)},this.zt=(t,i)=>{const s=i;if(!s||!this.wb)return;const{iRegion:e,region:h}=this.Ib(this.wb,s);this.Lb=this.engine.clientLocation2Engine(t.clientX,t.clientY),this.Pb(h,e),this.Db=h,this.D.emit("touchMove",this,t),ii(t)},this.Vt=(t,i)=>{const s=i;if(!s||!this.wb)return;const{iRegion:e,region:h}=this.Ib(this.wb,s);this.Lb=void 0,this.Bb(h,e),this.Mb&&this.us.ls.Ms(h,!1),this.Db=void 0,this.D.emit("touchEnd",this,t),ii(t)},this.us.Nn(_o.Af),this.th=!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled),this.Rb=i.$y("mapChart plotting",0),this.onResize(this.Cb),this._m.Rh("Map Chart");const o=zt(r?r.autoCursorBuilder:void 0,Ua);this.Eb=o.Ay(i.Zy(),this.dt,this.dt,this.qi).setVisible(!1),this.zb=this.es.yg(),this.Sm(h,this.uiScale),this.Vb=this.Rb.Ob(this.dt).setMouseInteractions(this.Yi).setMouseEnterEventHandler(((t,i,s)=>this.wt(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this.Ct(i,s))).setMouseClickEventHandler(((t,i,s)=>this.kt(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Tt(i,s))).setMouseDownEventHandler(((t,i,s)=>this.Ft(i,s))).setMouseUpEventHandler(((t,i,s)=>this.It(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Pt(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Bt(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.Dt(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Lt(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Rt(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Et(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.zt(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Vt(i,s))).Ce(this.qi.mapChartFillStyle).we(this.qi.mapChartStrokeStyle),this.Nb=this.Rb.Ob(this.dt).setMouseInteractions(this.Yi).Ce(this.qi.mapChartOutlierRegionFillStyle).we(this.qi.mapChartOutlierRegionStrokeStyle);const a=zt(r&&r.type,Gl.World);this.Fb=a,this.Gb(a).then((()=>{this.D.emit("mapDataReady")}))}getRegionUnderMouse(){return this.Db}setFillStyle(t){return this.Vb.Ce(t),this.us.Ss(),this}getFillStyle(){return this.Vb.Eh()}setStrokeStyle(t){return this.Vb.we(t),this.us.Ss(),this}getStrokeStyle(){return this.Vb.ao()}setEffect(t){return this.zb.ps(t),this.us.Ss(),this}getEffect(){return this.zb.vs()}setOutlierRegionFillStyle(t){return this.Nb.Ce(t),this.us.Ss(),this}getOutlierRegionFillStyle(){return this.Nb.Eh()}setOutlierRegionStrokeStyle(t){return this.Nb.we(t),this.us.Ss(),this}getOutlierRegionStrokeStyle(){return this.Nb.ao()}setSeparateRegionFillStyle(t){return this.Sb="function"==typeof t?t(this.Sb):t,this.pb.forEach((t=>t.Ce(this.Sb))),this.us.Ss(),this}getSeparateRegionFillStyle(){return this.Sb}setSeparateRegionStrokeStyle(t){return this.vb="function"==typeof t?t(this.vb):t,this.pb.forEach((t=>t.we(this.vb))),this.us.Ss(),this}getSeparateRegionStrokeStyle(){return this.vb}invalidateRegionValues(t){if(!this.wb||!this.Wb)return this.Ub=this.Ub||[],this.Ub.push(t),this;if("function"==typeof t)for(let i=0;i<this.wb.regions.length;i+=1){const s=this.wb.regions[i],e=this.Wb[i],h=t({...s,geometry:void 0},e);if(void 0!==h&&h!==e){this.Wb[i]=h;const t=this._b.get(s);null==t||t.forEach((t=>{t.Yb(h)}))}}else for(const i of t)if(i)for(let t=0;t<this.wb.regions.length;t+=1){const s=this.wb.regions[t],e=this.Wb[t];if(void 0!==i.value&&i.value!==e&&Wl(s,i)){this.Wb[t]=i.value;const e=this._b.get(s);null==e||e.forEach((t=>{t.Yb(i.value)}))}}return this.us.Ss(),this}setAutoCursor(t){return this.Eb&&t(this.Eb),this.us.Ss(),this}getAutoCursor(){return this.Eb}setAutoCursorMode(t){return this.bb=t,this.us.Ss(),this}getAutoCursorMode(){return this.bb}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}onMouseDragStart(t){return this.D.on("mouseDragStart",t)}onMouseDrag(t){return this.D.on("mouseDrag",t)}onMouseDragStop(t){return this.D.on("mouseDragStop",t)}onMouseWheel(t){return this.D.on("mouseWheel",t)}onTouchStart(t){return this.D.on("touchStart",t)}onTouchMove(t){return this.D.on("touchMove",t)}onTouchEnd(t){return this.D.on("touchEnd",t)}offTouchStart(t){return this.D.off(t,"touchStart")}offTouchMove(t){return this.D.off(t,"touchMove")}offTouchEnd(t){return this.D.off(t,"touchEnd")}setMouseInteractions(t){return this.Yi=t,this.Vb.setMouseInteractions(t),this}getMouseInteractions(){return this.Yi}setHighlight(t){var i;return t=Ci(t),this.xb=t,null===(i=this.wb)||void 0===i||i.regions.forEach((i=>{this.us.ls.Ms(i,t)})),this.D.emit("highlight",this,t),this}getHighlight(){return this.xb}setAnimationHighlight(t){var i;return null===(i=this.wb)||void 0===i||i.regions.forEach((i=>{this.us.ls._s(i,t)})),this}getAnimationHighlight(){var t;return this.us.ls.ws(null===(t=this.wb)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.Mb=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Mb}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}offMapDataReady(t){return this.D.off(t,"mapDataReady")}offViewChange(t){return this.D.off(t,"viewChange")}async Gb(t){const i=await((t,i)=>{let s;if(t===Gl.World)s="countries_world.json";else if(t===Gl.NorthAmerica)s="countries_northAmerica.json";else if(t===Gl.SouthAmerica)s="countries_southAmerica.json";else if(t===Gl.Africa)s="countries_africa.json";else if(t===Gl.Europe)s="countries_europe.json";else if(t===Gl.Asia)s="countries_asia.json";else if(t===Gl.USA)s="states_usa.json";else if(t===Gl.Canada)s="territoriesProvinces_canada.json";else{if(t!==Gl.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw Tt.alert(i),new Error(i)}s="territories_australia.json"}const e=`${i}/maps/${s}`;return Tt.fetch(e).then((t=>t.json())).catch((t=>{Di(i,e,"Map Chart",{shouldCrash:!0})}))})(t,this.cA.$s);this.Wb=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=$l[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.Nb.zr().pl(i);if(t===Gl.USA){const t=25.8,i=29.7;this.pb.push(this.Rb.ke(this.dt).setMouseInteractions(!1).Ce(this.Sb).we(this.vb).Fe({x:-126,y:t}).q({x:10,y:i-t}),this.Rb.ke(this.dt).setMouseInteractions(!1).Ce(this.Sb).we(this.vb).Fe({x:-113,y:t}).q({x:7,y:i-t}))}const e=this.us.ls.Er(this.Vb,{animationEnabled:this.th});for(let s=0;s<i.regions.length;s+=1){const h=i.regions[s],r=Ul(t,h),n=[];for(const t of r)t.length<3||n.push(this.Vb.zr().pl(t));this._b.set(h,n),e.zr(h,(t=>{n.forEach((i=>i.cs(t)))}))}if(this.zb.fs([this.Vb]),this.kb=s,this.Tb(t,this.dt,s),this.wb=i,this.Ub){for(const t of this.Ub)this.invalidateRegionValues(t);this.Ub=void 0}this.us.Ss()}Tb(t,i,s){const e=Xl[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.J(n.min.x,n.max.x),i.y.J(n.min.y,n.max.y);const o=this.dt.x.li(),a=this.dt.y.li();this.D.emit("viewChange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}Pb(t,i){this.Hb={region:t,iRegion:i},this.us.Ss()}Bb(t,i){this.Hb&&t===this.Hb.region&&(this.Hb=void 0,this.us.Ss())}Ib(t,i){const s=Array.from(this._b.entries()).findIndex((([t,s])=>s.includes(i)));return{iRegion:s,region:null==t?void 0:t.regions[s]}}setAnimationsEnabled(t){return this.th=!t,this}getAnimationsEnabled(){return this.th}getMinimumSize(){}Zd(){return[this]}Te(t){super.Te(t),super.pm(),Sa.Fm(this._m,this.bm);const i=d(this.dt.x.ei(),this.dt.y.ei(),this.dt.x.ri(),this.dt.y.ri());this.Rb.qv(i);const s=this.us.On()||this.Lb;if(this.Hb&&s){const t=this.Wb&&this.Wb[this.Hb.iRegion];let i=At(s,this.engine.scale,this.dt);i={x:Rt(i.x,this.dt.x.getInnerStart(),this.dt.x.getInnerEnd()),y:Rt(i.y,this.dt.y.getInnerStart(),this.dt.y.getInnerEnd())};let e=i.x,h=i.y;const r=this.Hb.region.transform;this.Hb.region.outlier&&r&&(e=(e-r.translate.x-r.vertexBoundaries.min.x)/r.scale.x+r.vertexBoundaries.min.x,h=(h-r.translate.y-r.vertexBoundaries.min.y)/r.scale.y+r.vertexBoundaries.min.y),this.Eb.setPosition(i).setVisible(!0).getResultTable().setContent(this.Wy(new Ta,this.Hb.region,t,e,h,this).Zu())}else this.Eb.setVisible(!1);return this.Eb.Ps().Te(),this}dispose(){return this.Rb.W(),this.Eb.dispose(),ga(this.dt),super.dispose()}j(){return super.j(),this.dt.j(),this}Z(){return super.Z(),this.dt.Z(),this}Gd(){return mi(this.getFillStyle())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.onMouseEnter((()=>{this.setHighlight(!0)})),t.onMouseLeave((()=>{this.setHighlight(!1)})),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),gi(t,this.qi,s,{fill:this.getFillStyle()}),this}}const Zl=(t,i,s,e,h,r)=>(t.addRow(`${i.name}`).addRow(Ql(e,h)),void 0!==s&&t.addRow(`Region value: ${s.toFixed(1)}`),t),Ql=(t,i)=>{const s=t>0,e=i>0;return`${[pi(Math.abs(0|t),2),"° ",pi(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[pi(Math.abs(0|i),2),"° ",pi(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`};class Jl extends eh{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.$b(s),e,h,{numeric:i.Xb({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.Xb({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.Xb({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.jb=r,this.Zb=n,this.Qb=o,this.es=a,this.Jb=s,this.Kb=i.Xb({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.Lh=o.Pr(s).setMouseInteractions(!1).Oh(i.Xb({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).Ce(i.Xb({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.Wh=this.es.yg([this.Lh]).ps(e.effectsText)}setTickStrategy(t,i){return super.Fh(t,i)}setStrokeStyle(t){return this.Kb="function"==typeof t?t(this.Kb):t,this.Zb.Ss(),this}getStrokeStyle(){return this.Kb}ur(t,i){return new Kl(i,t,this.Jb,this.Qb,this.qb(this.jb,this.Jb),this.Qb.Ee(this.Jb).setMouseInteractions(!1))}cr(t,i){const s=this.tx(this.Jb,t);this.ix&&!1===this.ix(t)?t.Ue.setVisible(!1):t.Ue.setVisible(!0).Fe(ds(this.sx(this.Jb,t.u),s.padding)).Ea(s.alignment).Nh(s.rotation).Ia(s.offset.x,s.offset.y),this.hx(this.Jb,t.nx,t.ox,t)}setMouseInteractions(t){return this}Te(){this.qh({physicalAxisSize:0});const t=this.gr(((t,i)=>{const s=i.Sh.lr,e=.5*this.Kb.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.Ue.Ps().jc().y)+s.labelPadding;return Math.max(t,e)}),0);return this.lx(this.Jb,this.Kb,t),this.ux(this.Jb,this.Lh,t),t}}class Kl extends hh{constructor(t,i,s,e,h,r,n){super(t,i,e,s,n),this.nx=h,this.ox=r,h.setMouseInteractions(!1),this.ts.push(h,r)}}class ql extends Jl{constructor(t,i,s,e,h,r,n,o,a){super(t,tu((()=>this._g())),i,s,e,h,r,n,o),this.Lp=this.Zb.Ee(this.Jb).setMouseInteractions(!1),this.Ax=a,this.setScrollStrategy(Ye.expansion),this.setTickStrategy(He.Numeric),this.setTitle("Amplitude")}_g(){return this.Ax()}_r(t,i){return xo(t,i,this.Jb.y)}Cr(t,i,s){const e=2*(i-t),h=this.Jb.x.Li(e);return{min:t-s*h,max:i+s*h}}sx(t,i){return{x:t.gx()?i-t.mx().start:t.mx().start-i,y:0}}qb(t,i){return t.Jc(i)}hx(t,i,s,e){const h=e.Sh.lr,r=t.gx()?e.u-t.mx().start:t.mx().start-e.u;Lt(e.u,t.mx().start)||Lt(e.u,t.mx().end)?i.setVisible(!1):i.setVisible(!0).eu(0).ze(360).au(void 0).ou(0).hu(r).au(60).Ce(O).we(h.gridStrokeStyle);const n=.5*this.Kb.getThickness();s.Ve({x:r,y:-n*t.Wi().y}).ze({x:r,y:-(n+h.tickLength)*t.Wi().y}).Re(h.tickStyle)}tx(t,i){const s=i.Sh.lr;return{alignment:{x:0,y:1},padding:{x:0,y:t.Wi().y*-(.5*this.Kb.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}lx(t,i,s){const e=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;this.Lp.Ve({x:0,y:0}).ze({x:e,y:0}).Re(i)}ux(t,i,s){const e=t.gx()?(t.mx().start+t.mx().end)/2-t.mx().start:t.mx().start-(t.mx().start+t.mx().end)/2;i.Ea({x:0,y:1}).Fe({x:e,y:-s*t.Wi().y})}}const tu=t=>({...gl(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),$b:t=>({getInnerStart:()=>t.mx().start,getInnerEnd:()=>t.mx().end,J:(i,s)=>t.yx(i,s),nt:(i,s,e,h,r)=>t.y.nt(i,s,e,h,r)}),Xb:t=>t.amplitude});class iu extends Jl{constructor(t,i,s,e,h,r,n,o){super(t,eu,i,s,e,h,r,n,o),this.Sx=90,this.vx=12,this.bx=su,this.Lp=this.Zb.Jc(this.Jb).setMouseInteractions(!1),this.ix=t=>{let i=180*(t.u-this.Jb.xx())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;if(i>=0&&i<=20||i>=340&&i<=360)return!1},this.Je=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.Sx)}setTickStyle(t){return this.Mx="function"==typeof t?t(this.Mx):t,this._x(),this.Zb.Ss(),this}getTickStyle(){return this.Mx}setTickFormattingFunction(t){return this.bx=t,this._x(),this.Zb.Ss(),this}getTickFormattingFunction(){return this.bx}setClockwise(t){this.Jb.wx(t);const i=this.Sx*Math.PI/180;return t?this.Jb.Cx(i+Math.PI/2):this.Jb.Cx(i-Math.PI/2),this.Zb.Ss(),this}getClockwise(){return!this.Jb.kx()}setNorth(t){for(;t<0;)t+=360;t%=360,this.Sx=t;const i=t*Math.PI/180;return this.getClockwise()?this.Jb.Cx(i+Math.PI/2):this.Jb.Cx(i-Math.PI/2),this.Zb.Ss(),this}getNorth(){return 180*this.Jb.xx()/Math.PI}setDivision(t){return this.vx=t,this._x(),this.Zb.Ss(),this}getDivision(){return this.vx}_g(){return[]}_r(t,i){return i}Cr(t,i,s){return{min:t,max:i}}sx(t,i){const s=t.kx()?1:-1,e=t.xx(),h=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}qb(t,i){return t.Ee(i)}hx(t,i,s,e){const h=this.Mx,r=t.kx()?1:-1,n=t.xx(),o=(e.u-n)*r,a=Math.cos(o),l=Math.sin(o),u=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end,c={x:a*u,y:l*u};i.Ve({x:0,y:0}).ze(c);const d={x:c.x+a*h.tickLength*t.Wi().x,y:c.y+l*h.tickLength*t.Wi().y};s.Ve(c).ze(d),i.Re(h.gridStrokeStyle),s.Re(h.tickStyle)}tx(t,i){const s=this.Mx,e=t.kx()?1:-1,h=t.xx();let r,n=(i.u-h)*e;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const o=s.tickLength+s.tickPadding,a=Math.cos(n)*o*t.Wi().x,l=Math.sin(n)*o*t.Wi().y;return{alignment:{x:0,y:0},padding:{x:a,y:l},rotation:180*r/Math.PI,offset:{x:a,y:l}}}lx(t,i,s){const e=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;this.Lp.eu(0).ze(360).ou(0).hu(e+.5*i.getThickness()*t.Wi().x).au(360).Ce(O).we(i)}ux(t,i,s){const e=t.xx(),h=this.tx(t,{u:0+e}),r=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;i.Ea(h.alignment).Nh(h.rotation).Ia(h.offset.x,h.offset.y).Fe(ds({x:r,y:0},h.padding))}_x(){this.$h({He:[],$e:[{Ue:"Radial ticks",Rg:0,lr:this.Mx,nr:this.bx,Br:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.vx;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},bh:{dr:()=>{},xh:()=>!1},Lr:void 0}],Ge:su,Xh:void 0,jh:void 0})}}const su=(t,i,s)=>(180*t/Math.PI).toFixed(0),eu={pr:()=>{},Sr:()=>{},br:()=>{},$b:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,J:(t,i)=>{},nt:(i,s,e,h,r)=>t.x.nt(i,s,e,h,r)}),Xb:t=>t.radial},hu=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),ru=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class nu extends Zs{constructor(t,i,s,e,h,r){super(i,s,h,r),this.xs="Sector",this.Tx=0,this.Fx=1*Math.PI/2,this.Ix=void 0,this.Px=void 0,this.ks=t,this.Jb=e,this.ky=this.ks.Jc(this.Jb).cs(this.getHighlight()),this.ds(this.ky),this.be=h.polarSectorFillStyle,this.xe=h.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.Tx=Rt(t,0,360),this.ks.Ss(),this}getAngleStart(){return this.Tx}setAngleEnd(t){return this.Fx=Rt(t,0,360),this.ks.Ss(),this}getAngleEnd(){return this.Fx}setAmplitudeStart(t){return this.Ix=t,this.ks.Ss(),this}getAmplitudeStart(){return this.Ix}setAmplitudeEnd(t){return this.Px=t,this.ks.Ss(),this}getAmplitudeEnd(){return this.Px}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.ks.Ss(),this}getStrokeStyle(){return this.xe}Te(){const t=this.Jb.mx(),i=180*this.Jb.xx()/Math.PI,s=void 0!==this.Ix?Rt(this.Ix,t.start,t.end):t.start,e=void 0!==this.Px?Rt(this.Px,t.start,t.end):t.end,h=this.Jb.gx()?s-t.start:t.start-s,r=this.Jb.gx()?e-t.start:t.start-e,n=Math.min(h,r),o=Math.max(h,r),a=this.Jb.kx()?1:-1,l=Math.abs(this.Fx-this.Tx);this.ky.eu((this.Tx-i)*a).ze((this.Fx-i)*a).ou(100*n/o).hu(o).Ce(this.be).we(this.xe).au(Math.ceil(l/2))}Ie(t,i){t.cs(i),this.ks.Ss()}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{fill:this.be,stroke:this.xe}),this}}class ou extends Zs{constructor(){super(...arguments),this.tS=!0,this.Dx=!0}setAutoScrollingEnabled(t){return this.tS=t,this.Ji.us.Ss(),this}getAutoScrollingEnabled(){return this.tS}oS(){}Te(){}dp(){}setCursorEnabled(t){return this.Dx=t,this}getCursorEnabled(){return this.Dx}}class au extends ou{constructor(t,i,s,e,h,r){super(i,s,h,r),this.ks=t,this.Ji=i,this.scale=e}getAmplitudeMin(){return this.Bx?this.Bx.min:void 0}getAmplitudeMax(){return this.Bx?this.Bx.max:void 0}}const lu=(t,i,s,e,h)=>{const r=i.getIcon();return r?t.addRow(r,i.getName()):t.addRow(i.getName()),t.addRow("Angle:","",Math.round(s).toString()).addRow("Amplitude","",h(e))},uu=(t,i)=>{const s=[],e=i.mx().start,h=i.mx().end,r=i.gx(),n=i.kx()?1:-1,o=i.xx(),a=Math.abs(h-e),l=Math.min(e,h)+.001*a,u=Math.max(e,h)-.001*a;for(const i of t){const t=Rt(i.amplitude,l,u),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),c=Math.sin(h*n)*(r?t-e:e-t),d=i.color;s.push({x:a,y:c,color:d})}return s},cu=t=>{const i={min:Oi,max:Ni};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},du=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),fu=(t,i)=>{let s=xs(t);for(i.kx()||(s*=-1),s+=180*i.xx()/Math.PI;s<0;)s+=360;s%=360;const e=us(t),h=i.mx(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:Hr(h.start,h.end,e/r)}};class Au extends au{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.xs="Heatmap Series",this.Lx=!0,this.dS=!1,this.Wy=gu,this.Gd=()=>mi(this.be);const o=this.Ji.getSeries().length;this.be=Si(this.qi.polarHeatmapSeriesFillStyle||this.qi.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,u={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.Un=u,this.Rx=t.Ex(e,[],u).Ce(this.be).cs(this.getHighlight()),this.ds(this.Rx);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),d=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.Bx={min:c,max:d},this.setHighlightOnHover(!1)}invalidateIntensityValues(t){if(this.dS&&this.Ji.us.Nn(_o.vf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.Un.dataOrder?t[0].length:t.length,annuli:"annuli"===this.Un.dataOrder?t.length:t[0].length},s="annuli"===this.Un.dataOrder?this.Un.annuli:this.Un.sectors,e="annuli"===this.Un.dataOrder?this.Un.sectors:this.Un.annuli;if(i.x>s||i.y>e){if(!0===this.Ji.cA.Hn){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);if(0===(t=h).length||0===t[0].length)return this}this.Rx._v({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.Un.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.Un.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.Un.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,h="annuli"===this.Un.dataOrder?t.iSector:t.iAnnulus,r=h+i.secondary-1,n="annuli"===this.Un.dataOrder?this.Un.annuli-1:this.Un.sectors-1,o="annuli"===this.Un.dataOrder?this.Un.sectors-1:this.Un.annuli-1;if(s<0||h<0){if(!0===this.Ji.cA.Hn){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;Tt.console.warn(i)}return this}if(e>n||r>o){if(!0===this.Ji.cA.Hn){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${h}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,u=Math.max(r-o,0),c=[];for(let i=0;i<l;i+=1)c[i]=t.values[i].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.Rx._v({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.ks.Ss(),this.dS=!0,this}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Rx.Ce(this.be),this.ks.Ss(),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}clear(){return this.Rx.Nt(),this.ks.Ss(),this}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.Rx.xv(t),this.ks.Ss(),this}getIntensityInterpolation(){return this.Rx.Mv()}Kp(){return this.tS&&this.getVisible()}Ie(t,i){t.cs(i),this.ks.Ss()}Hc(t,i){const s=At(t,this.Ji.engine.scale,this.scale),e=fu(s,this.scale),h=this.Lx?this.Rx.zx(e):this.Rx.Hc(e);if(h)return Ya(uu([h],this.scale)[0],this.scale,this.Wy(new Ta,this,{angleDeg:h.angle,amplitude:h.amplitude,intensity:h.cellValue,iAnnulus:h.iAnnulus,iSector:h.iSector},this.Ji.getAmplitudeAxis().formatValue).Zu(),this,this.be)}solveNearestFromScreen(t){return this.Hc(vo(t,this.Ji.us),!1)}Te(){}attach(t,i=!0,s=!1){return super.attach(t,i),gi(t,this.qi,s,{fill:this.be}),this}}const gu=(t,i,s,e)=>{const h=i.getIcon();return h?t.addRow(h,i.getName()):t.addRow(i.getName()),t.addRow("Angle:","",Math.round(s.angleDeg).toString()).addRow("Amplitude","",e(s.amplitude)).addRow("Intensity","",s.intensity.toFixed(1))};class mu extends au{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.xs="Line Series",this.Vx=[],this.Ox=!1,this.Nx=!1,this.Wy=lu,this.lu=Si(this.qi.polarLineSeriesStrokeStyle,r),this.Gx=t.rp(e,void 0,[el.UserSeries]).Re(this.lu).cs(this.getHighlight()).Ka(Oh.Nearest),this.ds(this.Gx)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){return 0!==this.Vx.length&&this.Ji.us.Nn(_o.vf),this.Vx=du(t),this.Ox=!0,this.Bx=cu(this.Vx),this.ks.Ss(),this}setStrokeStyle(t){this.lu="function"==typeof t?t(this.lu):t;const i=this.lu;return this.Gx.Re(i),this.ks.Ss(),this}getStrokeStyle(){return this.lu}setConnectDataAutomaticallyEnabled(t){return this.Nx=t,this.ks.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Nx}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}Ie(t,i){t.cs(i),this.ks.Ss()}Hc(t,i){return this.Wx(t,this.Gx)}solveNearestFromScreen(t){return this.Wx(vo(t,this.Ji.us),this.Gx)}Wx(t,i){const s=i.Ux(t);if(!s)return;const{angle:e,amplitude:h}=fu(s,this.scale);return Ya(s,this.scale,this.Wy(new Ta,this,e,h,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,this.lu.getFillStyle())}Te(){if(this.Ox||this.scale.Yx()){const t=uu(this.Vx,this.scale),i=is(t);this.Nx?(t.push({...t[0]}),this.Gx.zl(!0)):this.Gx.zl(!1),this.Gx.Nt().nl(t).Yo(i),this.Ox=!1,this.Gx.Ps()}}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{stroke:this.lu}),this}}class yu extends au{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.xs="Point Line Series",this.Vx=[],this.Ox=!1,this.Nx=!1,this.Hx=3,this.Aa=0,this.$x=zh.Circle,this.Wy=lu,this.be=Si(this.qi.polarPointLineSeriesFillStyle,r),this.lu=Si(this.qi.polarPointLineSeriesStrokeStyle,r),this.Gx=t.rp(e,void 0,[el.UserSeries]).Re(this.lu).cs(this.getHighlight()).Ka(Oh.Nearest),this.ds(this.Gx),this.Xx=t.bS(e).Ce(this.be).il(this.$x).q(this.Hx).cs(this.getHighlight()).Ka(Oh.Nearest),this.ds(this.Xx)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){return 0!==this.Vx.length&&this.Ji.us.Nn(_o.vf),this.Vx=du(t),this.Ox=!0,this.Bx=cu(this.Vx),this.ks.Ss(),this}setStrokeStyle(t){this.lu="function"==typeof t?t(this.lu):t;const i=this.lu;return this.Gx.Re(i),this.ks.Ss(),this}getStrokeStyle(){return this.lu}setPointFillStyle(t){this.be="function"==typeof t?t(this.be):t;const i=this.be;return this.Xx.Ce(i),this.ks.Ss(),this}getPointFillStyle(){return this.be}setPointSize(t){return this.Hx=t,this.Xx.q(t),this.ks.Ss(),this}getPointSize(){return this.Hx}setPointShape(t){return this.$x=t,this.Xx.il(this.$x),this}getPointShape(){return this.$x}setPointRotation(t){return this.Aa=t,this.Xx.Nh(t),this.ks.Ss(),this}getPointRotation(){return this.Aa}setConnectDataAutomaticallyEnabled(t){return this.Nx=t,this.ks.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Nx}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}Ie(t,i){t.cs(i),this.ks.Ss()}Hc(t,i){return this.Wx(t,this.Gx)}solveNearestFromScreen(t){return this.Wx(vo(t,this.Ji.us),this.Gx)}Wx(t,i){const s=i instanceof or?i.Hc(t):i.Ux(t);if(!s)return;const{angle:e,amplitude:h}=fu(s,this.scale);return Ya(s,this.scale,this.Wy(new Ta,this,e,h,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,"color"in s&&$(this.be)?new U({color:s.color}):this.be)}Te(){if(this.Ox||this.scale.Yx()){const t=uu(this.Vx,this.scale),i=is(t);this.Nx?(t.push({...t[0]}),this.Gx.zl(!0)):this.Gx.zl(!1),this.Gx.Nt().nl(t).Yo(i),this.Xx.Nt().nl(t).Yo(i),this.Ox=!1,this.Gx.Ps(),this.Xx.Ps()}}Cs(){return this.bs||this.$x}}class pu extends _r{constructor(t,i,e,h,r,n,o,a,l){super(),this.No=Ei(),this.D=new s,this.$i=!1,this.jx=h,this.Zx=r,this.Qx=n,this.Jx=o,this.Kx=a,this.ks=t,this.scale=i,this.qx=e,this.qi=l}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}dispose(){return this.qx&&this.qx(this),this.ks.us.Ss(),this.D.emit("dispose",this),this.$i=!0,this}setVisible(t){return super.setVisible(t),this.Qx(),this.ks.us.Ss(),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setMouseInteractions(t){return this.Jx(this,t),this}getMouseInteractions(){return this.Kx(this)}}class Su extends pu{constructor(t,i,s,e,h,r,n,o,a,l,u,d,f,A,g,m,y){super(t,i,s,e,h,r,n,o,y),this.tM=1,this.iM=1,this.ks=t,this.scale=i,this.dimensionStrategy=a,this.start=l,this.end=u,this.lowerExtreme=d,this.lowerQuartile=f,this.median=A,this.upperQuartile=g,this.upperExtreme=m,this.boundaries=c(this.dimensionStrategy.toPoint(l,d),this.dimensionStrategy.toPoint(u,m)),this.sM=this.qi.boxSeriesBodyFillStyle,this.eM=this.qi.boxSeriesBodyStrokeStyle,this.lu=this.qi.boxSeriesStrokeStyle,this.hM=this.qi.boxSeriesMedianStrokeStyle,this.Ps()}getBoundaries(){return this.boundaries}setBodyWidth(t){return this.tM=t,this.Ps(),this}getBodyWidth(){return this.tM}setBodyFillStyle(t){return this.sM="function"==typeof t?t(this.sM):t,this.Zx(),this}getBodyFillStyle(){return this.sM}setBodyStrokeStyle(t){return this.eM="function"==typeof t?t(this.eM):t,this.Zx(),this}getBodyStrokeStyle(){return this.eM}setTailWidth(t){return this.iM=t,this.Ps(),this}getTailWidth(){return this.iM}setStrokeStyle(t){return this.lu="function"==typeof t?t(this.lu):t,this.Zx(),this}getStrokeStyle(){return this.lu}setMedianStrokeStyle(t){return this.hM="function"==typeof t?t(this.hM):t,this.Zx(),this}getMedianStrokeStyle(){return this.hM}Ps(){this.jx()}getDominantStyle(){return this.getBodyFillStyle()}}const vu=(t,i,s)=>{const e=i.dt,h=s.dt;let r=(t.x-e.getInnerStart())/(e.getInnerEnd()-e.getInnerStart()),o=(t.y-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart());return 1===s.eg&&(r=1-r),1===i.eg&&(o=1-o),n(o,r)};class bu extends Da{constructor(t,i,s,e,h,r,n,o){super(t,i,Us(s.dt,e.dt),h,o),this.rM=!1,this.nM=!1,this.oM=!0,this.aM=!0,this.lM=!1,this.uM=!1,this.setGridStrokeYStyle=t=>(this.cM.setGridStrokeStyle(t),this),this.getGridStrokeYStyle=()=>this.cM.getGridStrokeStyle(),this.axisX=s,this.axisY=e,this.dM=r,this.fM=n,this.AM=this.axisX.Yg(!1,this.dM).setMouseInteractions(!1).setAllocatesAxisSpace(!1),this.cM=this.axisY.Yg(!1,this.fM).setMouseInteractions(!1).setAllocatesAxisSpace(!1)}dispose(){return super.dispose(),this.AM.dispose(),this.cM.dispose(),this}pointAt(t){return super.pointAt(t),this.setPosition(At(t.location,t.scale,this.scale)),this}setPosition(t){super.setPosition(t),this.AM.setValue(t.x),this.cM.setValue(t.y);const i=vu(n(this.AM.getValue(),this.cM.getValue()),this.axisX,this.axisY);return this.AM.setGridStrokeLength(this.lM?i.x:1),this.cM.setGridStrokeLength(this.uM?i.y:1),this}Te(){this.AM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.rM),this.cM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.nM);const t=vu(n(this.AM.getValue(),this.cM.getValue()),this.axisX,this.axisY);return this.AM.setGridStrokeLength(this.lM?t.x:1),this.cM.setGridStrokeLength(this.uM?t.y:1),super.Te()}setGridStrokeXCut(t){return this.lM=t,this.ks.Ss(),this}getGridStrokeXCut(){return this.lM}setGridStrokeYCut(t){return this.uM=t,this.ks.Ss(),this}getGridStrokeYCut(){return this.uM}setGridStrokeXStyle(t){return this.AM.setGridStrokeStyle(t),this}getGridStrokeXStyle(){return this.AM.getGridStrokeStyle()}setTickMarkerXVisible(t){return this.rM=t,this.ks.Ss(),this}getTickMarkerXVisible(){return this.rM}setTickMarkerYVisible(t){return this.nM=t,this.ks.Ss(),this}getTickMarkerYVisible(){return this.nM}setTickMarkerX(t){return this.AM.setMarker(t),this}setTickMarkerY(t){return this.cM.setMarker(t),this}getTickMarkerX(){return this.AM.getMarker()}getTickMarkerY(){return this.cM.getMarker()}}class xu extends Pa{constructor(t,i,s,e,h,r,n){super(t,i,s,e,n),this.lM=!1,this.uM=!1,this.gM=!1,this.mM=!1,this.yM=new Map,this.pM=new Map,this.rM=!0,this.nM=!0,this.iy=e,this.dM=h,this.fM=r,this.SM=n.cursorGridStrokeStyleX,this.vM=n.cursorGridStrokeStyleY}dispose(){return super.dispose(),this.yM.forEach((t=>t.dispose())),this.pM.forEach((t=>t.dispose())),this.bM=void 0,this.xM=void 0,this}Te(){return this.bM&&this.bM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.rM),this.xM&&this.xM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.nM),super.Te()}pointAt(t){const{location:i}=t,s=t.owner instanceof Eu&&t.owner;if(!s)return this;const{axisX:e}=s,{axisY:h}=s,r=this.Ah(e,!0),o=this.Ah(h,!1);r!==this.bM&&this.bM&&this.bM.setVisible(!1),o!==this.xM&&this.xM&&this.xM.setVisible(!1),r.setValue(i.x),o.setValue(i.y);const a=vu(n(i.x,i.y),e,h);return r.setGridStrokeLength(this.lM?a.x:1),o.setGridStrokeLength(this.uM?a.y:1),this.bM=r,this.xM=o,super.pointAt(t)}ny(t){if(super.ny(t),t){const i=i=>i.setTextFillStyle(t);this.bM&&this.gM&&this.bM.setMarker(i),this.xM&&this.mM&&this.xM.setMarker(i)}}Ah(t,i){let s=(i?this.yM:this.pM).get(t);return s||(i?(s=t.Yg(!1,this.dM),this.yM.set(t,s)):(s=t.Yg(!1,this.fM),this.pM.set(t,s)),this.ar(s,i),s.setMouseInteractions(!1).setAllocatesAxisSpace(!1)),s}ar(t,i){const s=i?this.SM:this.vM;return t.setGridStrokeStyle(s),t.setMouseInteractions(!1),(i?this.rM:this.nM)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.lM=t,this.ks.Ss(),this}getGridStrokeXCut(){return this.lM}setGridStrokeYCut(t){return this.uM=t,this.ks.Ss(),this}getGridStrokeYCut(){return this.uM}setGridStrokeXStyle(t){return this.SM=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.yM.forEach((t=>t.setGridStrokeStyle(this.SM))),this}getGridStrokeXStyle(){return this.SM}setGridStrokeYStyle(t){return this.vM=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.pM.forEach((t=>t.setGridStrokeStyle(this.vM))),this}getGridStrokeYStyle(){return this.vM}setTickMarkerXVisible(t){return this.rM=t,this.ks.Ss(),this}getTickMarkerXVisible(){return this.rM}setTickMarkerYVisible(t){return this.nM=t,this.ks.Ss(),this}getTickMarkerYVisible(){return this.nM}setTickMarkerX(t){return this.yM.forEach((i=>i.setMarker(t))),this.dM=this.dM.addStyler(t),this.ks.Ss(),this}setTickMarkerY(t){return this.pM.forEach((i=>i.setMarker(t))),this.fM=this.fM.addStyler(t),this.ks.Ss(),this}setTickMarkerXAutoTextStyle(t){return this.gM=t,this.ks.Ss(),this}getTickMarkerXAutoTextStyle(){return this.gM}setTickMarkerYAutoTextStyle(t){return this.mM=t,this.ks.Ss(),this}getTickMarkerYAutoTextStyle(){return this.mM}}class Mu extends Ba{constructor(t,i,s,e){super(t,e),this.iy=t,this.dM=i,this.fM=s,this.oy=e}}class _u extends Mu{constructor(){super(...arguments),this.uy=(t,i,s,e)=>this.ly(new xu(t,i,s,this.iy,this.dM,this.fM,e),e),this.addStyler=t=>new _u(this.iy,this.dM,this.fM,this.oy.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new _u(t,this.dM,this.fM,this.oy.map((t=>t)))}}class wu extends Mu{constructor(){super(...arguments),this.Ay=(t,i,s,e,h)=>this.ly(new bu(t,i,s,e,this.iy,this.dM,this.fM,h),h),this.addStyler=t=>new wu(this.iy,this.dM,this.fM,this.oy.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new wu(t,this.dM,this.fM,this.oy.map((t=>t)))}}const Cu=new _u(Fn,po.PointableTextBox,po.PointableTextBox,[(t,i)=>{Ea(t),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Ir(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Ir(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),ku=new wu(Fn,po.PointableTextBox,po.PointableTextBox,[(t,i)=>{za(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Ir(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Ir(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),Tu=new wu(Fn,po.PointableTextBox,po.PointableTextBox,[(t,i)=>{((t,i)=>{t.setPointMarker((t=>t.setFillStyle(i.seriesMarkerPointMarkerFillStyle).setSize(i.seriesMarkerPointMarkerSize).setShape(i.seriesMarkerPointMarkerShape))).setResultTable((t=>t.setEffect(!0).setBackground((t=>t)).setOrigin(n(-1,-1)).setMargin(10)))})(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Ir(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Ir(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),Fu=(t,i,s)=>{switch(t){case wt.always:return!0;case wt.never:return!1;case wt.whenDragged:return s;case wt.whenHovered:return i&&!s;case wt.whenHoveredOrDragged:return s||i;case wt.whenNotDragged:return!s;default:return!1}},Iu=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class Pu{constructor(t,i,e,h,r,o){this.MM=wt.always,this._M=wt.always,this.Bo=!0,this.$i=!1,this.wM=!1,this.CM=!1,this.ua=n(0,0),this.Mu=Ct.draggable,this._u=void 0,this.D=new s,this.Xi=!0,this.kM=(t,i,s)=>{this.wM=!0,this.ks.Ss();const e=this.Mu===Ct.notDraggable?this.Mu:s||this.Mu;this._u=this.ks.us.Wr(e===Ct.notDraggable?Pe.Restricted:e===Ct.draggable?Pe.Move:e===Ct.onlyHorizontal?Pe.Horizontal:Pe.Vertical)},this.TM=()=>{this.wM=!1,this.ks.Ss(),this.ks.us.Ur(this._u)},this.FM=(t,i)=>{this.CM=!0,ii(i),this.ks.Ss()},this.IM=(t,i)=>{if(this.Mu!==Ct.notDraggable){const s=i||this.Mu,e=At(this.ks.us.Pe(t.x,t.y),this.ks.us.dt,this.scale),h=n(s!==Ct.onlyVertical?Iu(e.x,this.scale.x):this.ua.x,s!==Ct.onlyHorizontal?Iu(e.y,this.scale.y):this.ua.y);return this.setPosition(h),!0}return!1},this.PM=(t,i)=>{this.CM=!1,ii(i),this.ks.Ss()},this.onDispose=t=>this.D.on("dispose",t),this.offDispose=t=>this.D.off(t,"dispose"),this.ks=t,this.renderingScale=i,this.scale=e,this.Eb=h,this.DM=r,this.qi=o;const a=h.getPointMarker().setMouseInteractions(!0);a.onMouseEnter(((t,i)=>this.kM(t,i))),a.onMouseLeave(this.TM),a.onMouseDragStart(this.FM),a.onMouseDrag(((t,i)=>this.IM(n(i.clientX,i.clientY))&&ii(i))),a.onMouseDragStop(this.PM),a.onTouchStart(this.FM),a.onTouchMove(((t,i)=>this.IM(n(i.clientX,i.clientY))&&ii(i))),a.onTouchEnd(this.PM),h.getResultTable().setMouseInteractions(!0),this.setPosition(this.ua)}setPosition(t){return this.ua=t,this.Eb.setPosition(t),this.D.emit("positionChange",this,this.ua),this}getPosition(){return this.ua}onPositionChange(t){return this.D.on("positionChange",t)}offPositionChange(t){return this.D.off(t,"positionChange")}setPointMarkerVisibility(t){return this.MM=t,this.ks.Ss(),this}getPointMarkerVisibility(){return this.MM}setResultTableVisibility(t){return this._M=t,this.ks.Ss(),this}getResultTableVisibility(){return this._M}setMouseInteractions(t){return this.Bo=t,this.Eb.getPointMarker().setMouseInteractions(t),this.Eb.getResultTable().setMouseInteractions(t),this}getMouseInteractions(){return this.Bo}setAutoFitStrategy(t){return this.Eb.setAutoFitStrategy(t),this}getAutoFitStrategy(){return this.Eb.getAutoFitStrategy()}isAttached(){return!0}Te(){const t=this.isAttached();return Fu(this.MM,this.wM,this.CM)?this.Eb.setPointMarkerVisible(!0):this.Eb.setPointMarkerVisible(!1),t&&Fu(this._M,this.wM,this.CM)?this.Eb.setResultTableVisible(!0):this.Eb.setResultTableVisible(!1),this.Eb.Te(),this}Ps(){return this.Eb.Ps(),this}pointAt(t){return this.Eb.pointAt(t),this}dispose(){return this.$i||(this.$i=!0,this.DM(this),this.Eb.dispose(),this.D.emit("dispose")),this}isDisposed(){return this.$i}setVisible(t){const i=this.Xi!==t;return this.Xi=t,this.Eb.setVisible(t),i&&this.D.emit("visibleStateChanged",this,this.Xi),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}setPointMarker(t){return this.Eb.setPointMarker(t),this}getPointMarker(){return this.Eb.getPointMarker()}setResultTable(t){return this.Eb.setResultTable(t),this}getResultTable(){return this.Eb.getResultTable()}setDraggingMode(t=Ct.notDraggable){return this.Mu=t,this.ks.Ss(),this}getDraggingMode(){return this.Mu}}class Du extends Pu{constructor(t,i,s,e,h,r){super(t,i,s,e.Ay(t,i,s,r),h,r)}}class Bu extends Pu{constructor(t,i,s,e,h,r,o){super(t,i,Us(s.dt,e.dt),h.Ay(t,i,s,e,o),r,o),this.BM=wt.always,this.LM=wt.always,this.RM=wt.always,this.EM=wt.always,this.gridStrokeStyleX=this.Eb.getGridStrokeXStyle(),this.gridStrokeStyleY=this.Eb.getGridStrokeYStyle(),this.ks=t,this.axisX=s,this.axisY=e,this.DM=r;const a=this.Eb.getTickMarkerX().setMouseInteractions(!0);a.onMouseEnter(((t,i)=>this.kM(t,i,Ct.onlyHorizontal))),a.onMouseLeave(this.TM),a.onMouseDragStart(this.FM),a.onMouseDrag(((t,i)=>this.IM(n(i.clientX,i.clientY),Ct.onlyHorizontal)&&ii(i))),a.onMouseDragStop(this.PM),a.onTouchStart(this.FM),a.onTouchMove(((t,i)=>this.IM(n(i.clientX,i.clientY),Ct.onlyHorizontal)&&ii(i)));const l=this.Eb.getTickMarkerY().setMouseInteractions(!0);l.onMouseEnter(((t,i)=>this.kM(t,i,Ct.onlyVertical))),l.onMouseLeave(this.TM),l.onMouseDragStart(this.FM),l.onMouseDrag(((t,i)=>this.IM(n(i.clientX,i.clientY),Ct.onlyVertical)&&ii(i))),l.onMouseDragStop(this.PM),l.onTouchStart(this.FM),l.onTouchMove(((t,i)=>this.IM(n(i.clientX,i.clientY),Ct.onlyVertical)&&ii(i)))}Te(){const t=this.isAttached();return this.Xi&&t&&Fu(this.RM,this.wM,this.CM)?this.Eb.setTickMarkerXVisible(!0):this.Eb.setTickMarkerXVisible(!1),this.Xi&&t&&Fu(this.EM,this.wM,this.CM)?this.Eb.setTickMarkerYVisible(!0):this.Eb.setTickMarkerYVisible(!1),this.Eb.setGridStrokeXStyle(this.Xi&&t&&Fu(this.BM,this.wM,this.CM)?this.gridStrokeStyleX:at),this.Eb.setGridStrokeYStyle(this.Xi&&t&&Fu(this.LM,this.wM,this.CM)?this.gridStrokeStyleY:at),super.Te()}setGridStrokeXVisibility(t){return this.BM=t,this.ks.Ss(),this}getGridStrokeXVisibility(){return this.BM}setGridStrokeYVisibility(t){return this.LM=t,this.ks.Ss(),this}getGridStrokeYVisibility(){return this.LM}setTickMarkerXVisibility(t){return this.RM=t,this.ks.Ss(),this}getTickMarkerXVisibility(){return this.RM}setTickMarkerYVisibility(t){return this.EM=t,this.ks.Ss(),this}getTickMarkerYVisibility(){return this.EM}setGridStrokeXCut(t){return this.Eb.setGridStrokeXCut(t),this}getGridStrokeXCut(){return this.Eb.getGridStrokeXCut()}setGridStrokeYCut(t){return this.Eb.setGridStrokeYCut(t),this}getGridStrokeYCut(){return this.Eb.getGridStrokeYCut()}setGridStrokeXStyle(t){return this.gridStrokeStyleX="function"==typeof t?t(this.gridStrokeStyleX):t,this}getGridStrokeXStyle(){return this.Eb.getGridStrokeXStyle()}setGridStrokeYStyle(t){return this.gridStrokeStyleY="function"==typeof t?t(this.gridStrokeStyleY):t,this}getGridStrokeYStyle(){return this.Eb.getGridStrokeYStyle()}setTickMarkerX(t){return this.Eb.setTickMarkerX(t),this}getTickMarkerX(){return this.Eb.getTickMarkerX()}setTickMarkerY(t){return this.Eb.setTickMarkerY(t),this}getTickMarkerY(){return this.Eb.getTickMarkerY()}setMouseInteractions(t){return super.setMouseInteractions(t),this.Eb.getTickMarkerX().setMouseInteractions(t),this.Eb.getTickMarkerY().setMouseInteractions(t),this}}class Lu extends Bu{}class Ru extends Lu{constructor(t,i,s,e,h,r){super(t,i,s.axisX,s.axisY,e,h,r),this.zM=!1,this.ks=t,this.owningSeries=s}setPosition(t){return super.setPosition(t),this.zM=!1,this.ks.Ss(),this}Ps(){if(!this.zM){const t=this.owningSeries.solveNearestFromScreen(At(this.ua,this.scale,this.ks.us.dt));t?(this.ua=At(t.location,this.owningSeries.scale,this.scale),this.Eb.pointAt(t),this.zM=!0):this.Eb.setPosition(this.ua)}return super.Ps()}isAttached(){return this.zM}}class Eu extends ou{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,a,l),this.VM=[],this.addMarker=(t=Tu)=>{const i=new Ru(this.OM(),this.Ji.uiScale,this,t,this.removeMarker,this.qi);return this.VM.push(i),i},this.removeMarker=t=>{const i=this.VM.indexOf(t);-1!==i&&this.VM.splice(i,1)},this.ts=new Map,this.chart=t,this.ks=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.OM=o,this.scale=Us(e.dt,h.dt),this.NM=t.GM,t.GM+=1,this.WM(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.UM),this.onMouseLeave(this.chart.YM),this.onMouseWheel(this.chart.sS),this.onMouseDragStart(this.chart.HM),this.onMouseDrag(this.chart.eS),this.onMouseDragStop(this.chart.$M),this.onTouchStart(this.chart.hS.onTouchStart),this.onTouchMove(this.chart.hS.onTouchMove),this.onTouchEnd(this.chart.hS.onTouchEnd)}get xAxis(){return this.axisX}get yAxis(){return this.axisY}attacheAxis(){this.XM=this.axisXAttachHandler(this),this.jM=this.axisYAttachHandler(this)}Te(){super.Te();for(let t=0;t<this.VM.length;t+=1)this.VM[t].Ps().Te()}ds(t,i){super.ds(t,i),t.Jo(this.NM)}setDrawOrder(t){return this.NM=t.seriesDrawOrderIndex,this.ts.forEach(((t,i)=>{i.Jo(this.NM)})),this.Ji.us.Ss(),this}dispose(){return super.dispose(),this.VM.slice().forEach((t=>t.dispose())),this.XM(this),this.jM(this),this}ZM(){for(let t=0;t<this.VM.length;t+=1)this.VM[t].setPosition(this.VM[t].getPosition());this.ks.Ss()}getBoundaries(){return c(n(this.getXMin()||0,this.getYMin()||0),n(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const zu=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}},Vu=(t,i=(t=>t))=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.tl()),n=e.qa(),o=n?i(n):[];let a=!1,l=!1;"El"in e&&(a=e.El(),l=e.Vl()),s.push.apply(s,r.slice(a?1:0,r.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(l?1:0)))}return s},Ou=(t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:e+i*s,y:t[s]};return h},Nu=(t,i,s,e)=>{const h=i.getIcon();return h?t.addRow(h,i.getName()):t.addRow(i.getName()),t.addRow("X","",i.axisX.formatValue(s)).addRow("Y","",i.axisY.formatValue(e))};class Gu extends Eu{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,l,u),this.QM=[],this.yu=[],this.JM=0,this.ji=!1,this.Hi=js.onHover,this.Wy=Nu,this.Ji.us.Nn(_o.mf),this.KM=a}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.JM=void 0!==i&&i>0?i:0,this.ks.Ss(),this}add(t){if(0!==this.QM.length&&this.Ji.us.Nn(_o.vf),Array.isArray(t)?this.qM(t):this.qM([t]),this.yu.length>0){const t=this.yu[this.yu.length-1];this.t_={x:t.x,y:t.y}}return this}addArrayX(t,i=1,s){let e=s;return e||(e=this.t_?this.t_.y+i:0),this.add(((t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:t[s],y:e+i*s};return h})(t,i,e)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.t_?this.t_.x+i:0),this.add(Ou(t,i,e)),this}addArraysXY(t,i){if(t.length!==i.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,i)=>{const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]={x:t[e],y:i[e]};return s})(t,i)),this}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}getPointAmount(){return this.QM.reduce(((t,i)=>t+i.ol()+i.al()),this.yu.length)}clear(){this.i_=void 0;for(let t=0;t<this.QM.length;t+=1)this.QM[t].Nt();return this.yu.length=0,this.t_=void 0,this.ks.Ss(),this.D.emit("dataClear",this),this}getLastPoint(){return this.t_}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.KM.getXMax(this.QM,this.i_)||0}getXMin(){return this.KM.getXMin(this.QM,this.i_)||0}getYMax(){return this.KM.getYMax(this.QM,this.i_)||0}getYMin(){return this.KM.getYMin(this.QM,this.i_)||0}br(){const t=n(0,0);for(const i of this.QM)t.x=Math.max(t.x,i.vl()),t.y=Math.max(t.y,i.bl());return t}s_(t,i,s,e){this.KM.s_(t,i,s,e,this.scale,(t=>{}))}oS(){super.oS();const t=this.QM.length;this.e_&&this.s_(this.QM,this.getPointAmount(),this.e_,this.JM),t!==this.QM.length&&this.ZM()}Te(){super.Te();const t=this.getBoundaries();this.yu.length>0&&(this.h_(this.yu),this.yu=[]);for(const i of this.QM)i.Yo(t);return super.Te()}dp(){super.dp(),this.i_=void 0,this.yu.length=0}qM(t){0!==t.length&&(this.i_?this.i_=es(this.i_,is(t)):this.i_=is(t),this.D.emit("dataAdd",this,t,this.i_),this.yu=ci(this.yu,t,{canReturnB:!1}),this.ks.Ss())}r_(){return Vu(this.QM)}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}}const Wu=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===h||i<n)&&(h=l,r=a,n=i)}}return h&&r?[h,r]:void 0};class Uu extends Eu{constructor(){super(...arguments),this.u_=[],this.c_=void 0,this.d_=!1,this.qx=t=>{const i=this.u_.findIndex((i=>i===t));i>=0&&this.u_.splice(i,1),this.d_=!0,this.c_=void 0,this.ks.Ss()},this.jx=()=>{this.c_=void 0,this.d_=!0,this.Ji.us.Ss()},this.Zx=()=>{this.d_=!0,this.Ji.us.Ss()},this.Qx=()=>{this.c_=void 0,this.d_=!0,this.chart.us.Ss()},this.Jx=(t,i)=>{this.setMouseInteractions(i)},this.f_=t=>this.getMouseInteractions()}Te(){super.Te(),this.d_&&(this.A_(this.u_),this.d_=!1)}clear(){return this.u_.slice().forEach(Dt),this.u_.length=0,this.d_=!0,this.c_=void 0,this.ks.Ss(),this}g_(t,i){void 0!==i?this.u_.splice(i,0,t):this.u_.push(t),this.d_=!0,this.m_&&this.m_(t),t.onMouseEnter(((t,i)=>this.wt(t,i))),t.onMouseLeave(((t,i)=>this.Ct(t,i))),t.onMouseClick(((t,i)=>this.kt(t,i))),t.onMouseDoubleClick(((t,i)=>this.Tt(t,i))),t.onMouseDown(((t,i)=>this.Ft(t,i))),t.onMouseUp(((t,i)=>this.It(t,i))),t.onMouseMove(((t,i)=>this.Pt(t,i))),t.onMouseDragStart(((t,i,s)=>this.Bt(t,i,s))),t.onMouseDrag(((t,i,s,e,h)=>this.Dt(t,i,s,e,h))),t.onMouseDragStop(((t,i,s,e)=>this.Lt(t,i,s,e))),t.onMouseWheel(((t,i)=>this.Rt(t,i))),t.onTouchStart(((t,i)=>this.Et(t,i))),t.onTouchMove(((t,i)=>this.zt(t,i))),t.onTouchEnd(((t,i)=>this.Vt(t,i))),this.ks.Ss()}Kp(){return this.tS&&this.u_.length>0&&this.getVisible()}setDefaultStyle(t){this.m_=t,this.u_.forEach(t),t(this.y_);for(let t=0;t<this.Qi.length;t+=1)this.p_(this.Qi[t]);return this.d_=!0,this.Ji.us.Ss(),this}Hc(t,i){const s=Wu(t,i?this.u_.filter((t=>t.getVisible()&&t.getIsUnderMouse())):this.u_.filter((t=>t.getVisible())),this.S_,Ji);if(void 0!==s)return{location:At(s[0],this.ks.us.dt,this.scale),scale:this.scale,resultTableContent:this.Wy(new Ta,this,s[1]).Zu(),owner:this,fillStyle:s[1].getDominantStyle(),figure:s[1]}}solveNearestFromScreen(t){return this.Hc(vo(t,this.Ji.us),!1)}getXMax(){return this.c_||(this.c_=this.v_()),this.c_.max.x}getXMin(){return this.c_||(this.c_=this.v_()),this.c_.min.x}getYMax(){return this.c_||(this.c_=this.v_()),this.c_.max.y}getYMin(){return this.c_||(this.c_=this.v_()),this.c_.min.y}br(){return n(0,0)}v_(){const t=c(o(Oi,Oi),o(Ni,Ni));for(let i=0;i<this.u_.length;i+=1)if(this.u_[i].getVisible()){const s=this.u_[i].getBoundaries();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}attach(t,i=!0,s=!1){return super.attach(t,i),this.p_(t,i,s),this}p_(t,i=!0,s=!1){gi(t,this.qi,s,{fill:this.u_.length>0?this.u_[0].getDominantStyle():this.y_.getDominantStyle()})}}const Yu=(t,i,s)=>t.addRow(i.getName()).addRow("Lower extreme","",s.lowerExtreme.toFixed(2)).addRow("Lower quartile","",s.lowerQuartile.toFixed(2)).addRow("Median","",s.median.toFixed(2)).addRow("Upper quartile","",s.upperQuartile.toFixed(2)).addRow("Upper extreme","",s.upperExtreme.toFixed(2));class Hu extends Uu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.xs="Box Series",this.Wy=Yu,this.b_=Li(),this.S_=t=>At(this.Ts.toPoint((t.start+t.end)/2,t.median),this.scale,this.ks.us.dt),this.Ji.us.Nn(_o.pf),this.Ts=a,this.y_=new Su(this.ks,this.scale,this.qx,Bt,Bt,Bt,Bt,(t=>!1),this.Ts,0,0,0,0,0,0,0,this.qi).dispose(),this.x_=new ll((()=>{const t=this.ks.Lg(this.scale);return this.ds(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Re(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.zr();return s.Eg(i.start,i.end),s}))))),this.M_=new ll((()=>{const t=this.b_._t(this.ks.Ob(this.scale));return this.ds(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ce(s.fillStyle).we(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.zr();return s.pl(i.vertices),this.b_.Ot(s,i.figure),s})))),(()=>{this.b_.Nt()}),((t,i)=>{this.gs(i)}))}WM(t){if(!(t instanceof Gs||t instanceof Ws))throw new Error("BoxSeries only supports Linear Axes")}A_(t){const i=this.M_.fp(),s=this.x_.fp();t.forEach((t=>{if(!t.getVisible())return;const e=this.Ts.toPoint((t.start+t.end-t.tM*(t.end-t.start))/2,t.lowerQuartile),h=this.Ts.toPoint((t.end-t.start)*t.tM,t.upperQuartile-t.lowerQuartile),r=this.Ts.toPoint((t.start+t.end)/2,t.lowerQuartile),n=this.Ts.toPoint((t.start+t.end)/2,t.lowerExtreme),o=this.Ts.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.Ts.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Ts.toPoint((t.start+t.end-t.iM*(t.end-t.start))/2,t.lowerExtreme),u=this.Ts.toPoint((t.start+t.end+t.iM*(t.end-t.start))/2,t.lowerExtreme),c=this.Ts.toPoint((t.start+t.end-t.iM*(t.end-t.start))/2,t.upperExtreme),d=this.Ts.toPoint((t.start+t.end+t.iM*(t.end-t.start))/2,t.upperExtreme),f=this.Ts.toPoint((t.start+t.end-t.tM*(t.end-t.start))/2,t.median),A=this.Ts.toPoint((t.start+t.end+t.tM*(t.end-t.start))/2,t.median);i.add({No:t.No,vertices:[{x:e.x,y:e.y},{x:e.x,y:e.y+h.y},{x:e.x+h.x,y:e.y+h.y},{x:e.x+h.x,y:e.y}],figure:t},{fillStyle:t.sM,strokeStyle:t.eM}),s.add({No:0,start:r,end:n,figure:t},{strokeStyle:t.lu}),s.add({No:0,start:o,end:a,figure:t},{strokeStyle:t.lu}),s.add({No:0,start:l,end:u,figure:t},{strokeStyle:t.lu}),s.add({No:0,start:c,end:d,figure:t},{strokeStyle:t.lu}),s.add({No:0,start:f,end:A,figure:t},{strokeStyle:t.hM})})),i.finishPlot(),s.finishPlot()}add(t){const i=new Su(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.Ts,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.qi);return this.g_(i),this.d_=!0,this.Ji.us.Ss(),i}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class $u extends pu{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.Ya=c(n(0,0),n(0,0)),this.ks=t,this.scale=i,this.be=Si(l.ellipseSeriesFillStyle,u),this.xe=Si(l.ellipseSeriesStrokeStyle,u)}getBoundaries(){return this.Ya}setDimensions(t){return this.dimensions=t,this.Ya=c(n(t.x-t.radiusX,t.y-t.radiusY),n(t.x+t.radiusX,t.y+t.radiusY)),this.jx(),this.ks.Ss(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Zx(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.be}}class Xu extends Uu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.xs="Ellipse Series",this.Wy=(t,i,s)=>t.addRow(i.xs).addRow("X","",i.axisX.formatValue(s.getDimensions().x)).addRow("Y","",i.axisY.formatValue(s.getDimensions().y)).addRow("Radius X","",i.axisX.formatValue(s.getDimensions().radiusX)).addRow("Radius Y","",i.axisY.formatValue(s.getDimensions().radiusY)),this.b_=Li(),this.S_=t=>{const i=t.getDimensions(),s=n(i.x,i.y);return At(s,this.scale,this.ks.us.dt)},this.Ji.us.Nn(_o.pf),this.__=c,this.y_=new $u(this.ks,this.scale,Bt,Bt,Bt,Bt,Bt,(t=>!1),this.qi,this.__).dispose(),this.M_=new ll((()=>{const t=this.b_._t(this.ks.Ob(this.scale));return this.ds(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ce(s.fillStyle).we(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.zr();return s.pl(i.vertices),this.b_.Ot(s,i.figure),s})))),(()=>{this.b_.Nt()}),((t,i)=>{this.gs(i)}))}WM(t){if(!(t instanceof Gs||t instanceof Ws))throw new Error("EllipseSeries only supports Linear Axes")}A_(t){const i=this.M_.fp();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=[],h=void 0!==s.drawSteps?s.drawSteps:72;for(let t=0;t<=h;t+=1){const i=t/h*2*Math.PI,r=s.x+s.radiusX*Math.cos(i),n=s.y+s.radiusY*Math.sin(i);e.push({x:r,y:n})}const r=t.getFillStyle(),n=t.getStrokeStyle();i.add({No:t.No,vertices:e,figure:t},{fillStyle:r,strokeStyle:n})})),i.finishPlot()}add(t){const i=new $u(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(i),this.d_=!0,this.Ji.us.Ss(),i}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class ju extends pu{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a),this.w_=[],this.Ya=Gi,this.ks=t,this.scale=i,this.be=Si(a.polygonSeriesFillStyle,l),this.xe=Si(a.polygonSeriesStrokeStyle,l)}getBoundaries(){return this.Ya}setDimensions(t){return this.w_=t,this.Ya=is(this.w_),this.jx(),this.ks.Ss(),this}getDimensions(){return this.w_}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Zx(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.be}}class Zu extends Uu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.xs="Polygon Series",this.Wy=(t,i,s)=>t.addRow(i.getName()),this.b_=Li(),this.S_=t=>{const i=t.getBoundaries(),s=n((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return At(s,this.scale,this.ks.us.dt)},this.Ji.us.Nn(_o.pf),this.__=c,this.y_=new ju(this.ks,this.scale,Bt,Bt,Bt,Bt,Bt,(t=>!1),this.qi,this.__).dispose(),this.M_=new ll((()=>{const t=this.b_._t(this.ks.Ob(this.scale));return this.ds(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ce(s.fillStyle).we(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.zr();return s.pl(i.vertices),this.b_.Ot(s,i.figure),s})))),(()=>{this.b_.Nt()}),((t,i)=>{this.gs(i)}))}WM(t){}A_(t){const i=this.M_.fp();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({No:t.No,vertices:s,figure:t},{fillStyle:e,strokeStyle:h})})),i.finishPlot()}add(t){const i=new ju(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(i),this.d_=!0,this.Ji.us.Ss(),i}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class Qu extends pu{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.C_={x:0,y:0,width:0,height:0},this.k_={x1:0,y1:0,x2:0,y2:0},this.Ya=c(n(0,0),n(0,0)),this.be=Si(l.rectangleSeriesFillStyle,u),this.ks=t,this.scale=i,this.xe=Si(l.rectangleSeriesStrokeStyle,u)}getBoundaries(){return this.Ya}setDimensions(t){return"x"in t?(this.C_=t,this.k_={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.k_=t,this.C_={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.Ya=is([this.C_,n(this.C_.x+this.C_.width,this.C_.y+this.C_.height)]),this.jx(),this.ks.Ss(),this}getDimensionsPositionAndSize(){return this.C_}getDimensionsTwoPoints(){return this.k_}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Zx(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.be}}class Ju extends Uu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.xs="Rectangle Series",this.Wy=(t,i,s)=>{const e=s.getDimensionsPositionAndSize();return t.addRow(i.xs).addRow("X","",i.axisX.formatValue(e.x)).addRow("Y","",i.axisX.formatValue(e.y)).addRow("Width","",i.axisX.formatValue(e.width)).addRow("Height","",i.axisX.formatValue(e.height))},this.b_=Li(),this.S_=t=>{const i=t.getDimensionsPositionAndSize(),s=n(i.x+i.width/2,i.y+i.height/2);return At(s,this.scale,this.ks.us.dt)},this.Ji.us.Nn(_o.pf),this.__=c,this.y_=new Qu(this.ks,this.scale,Bt,Bt,Bt,Bt,Bt,(t=>!1),this.qi,this.__).dispose(),this.M_=new ll((()=>{const t=this.b_._t(this.ks.Ob(this.scale));return this.ds(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ce(s.fillStyle).we(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.zr();return s.pl(i.vertices),this.b_.Ot(s,i.figure),s})))),(()=>{this.b_.Nt()}),((t,i)=>{this.gs(i)}))}WM(t){}A_(t){const i=this.M_.fp();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensionsTwoPoints(),e=[{x:s.x1,y:s.y1},{x:s.x1,y:s.y2},{x:s.x2,y:s.y2},{x:s.x2,y:s.y1}],h=t.getFillStyle(),r=t.getStrokeStyle();i.add({No:t.No,vertices:e,figure:t},{fillStyle:h,strokeStyle:r})})),i.finishPlot()}add(t){const i=new Qu(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(i),this.d_=!0,this.Ji.us.Ss(),i}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class Ku extends pu{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.Ya=c(n(0,0),n(0,0)),this.qi=l,this.ks=t,this.scale=i,this.xe=Si(l.segmentSeriesStrokeStyle,u)}getBoundaries(){return this.Ya}setDimensions(t){return this.dimensions=t,this.Ya=c(n(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),n(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.jx(),this.ks.Ss(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){const t=this.xe;return t!==at?t.getFillStyle():O}}class qu extends Uu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.xs="Segment Series",this.Wy=(t,i,s)=>t.addRow(i.xs).addRow("Start",i.axisX.formatValue(s.getDimensions().startX),",",i.axisY.formatValue(s.getDimensions().startY)).addRow("End",i.axisX.formatValue(s.getDimensions().endX),",",i.axisY.formatValue(s.getDimensions().endY)),this.T_=Li(),this.S_=t=>{const i=t.getDimensions(),s=n((i.startX+i.endX)/2,(i.startY+i.endY)/2);return At(s,this.scale,this.ks.us.dt)},this.Ji.us.Nn(_o.pf),this.__=c,this.y_=new Ku(this.ks,this.scale,Bt,Bt,Bt,Bt,Bt,(t=>!1),this.qi,this.__).dispose(),this.x_=new ll((()=>{const t=this.T_._t(this.ks.Lg(this.scale));return this.ds(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Re(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.zr();return s.Eg(i.start,i.end),this.T_.Ot(s,i.figure),s})))),(()=>{this.T_.Nt()}),((t,i)=>{this.gs(i)}))}WM(t){}A_(t){const i=this.x_.fp();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e={x:s.startX,y:s.startY},h={x:s.endX,y:s.endY},r=t.getStrokeStyle();i.add({No:t.No,start:e,end:h,figure:t},{strokeStyle:r})})),i.finishPlot()}add(t){const i=new Ku(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(i),this.d_=!0,this.Ji.us.Ss(),i}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}const tc=(t,i,s)=>{const e=i.getIcon();return e?t.addRow(e,i.getName()):t.addRow(i.getName()),t.addRow("X:","",i.axisX.formatValue(s.x)).addRow("Y:","",i.axisY.formatValue(s.y)).addRow("Intensity:","",s.intensity.toFixed(1))};class ic extends Eu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.xs="Heatmap Grid Series",this.Wy=tc,this.Lx=!1,this.Av={},this.Ji.us.Nn(_o.yf),this.F_=a,this.qi=l;const d=c;this.be=Si(l.heatmapGridSeriesFillStyle,d),this.gv=Si(this.qi.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows};this.Un=f,this.I_=this.ks.P_(this.scale,[],f).Ce(this.be).mv(this.gv).cs(this.getHighlight()),this.ds(this.I_),a.start&&this.setStart(a.start),a.end&&this.setEnd(a.end),a.step&&this.setStep(a.step),this.setHighlightOnHover(!1)}pv(){const t=this.Av.start||{x:0,y:0};let i;i=this.Av.end?{x:(this.Av.end.x-t.x)/this.Un.columns,y:(this.Av.end.y-t.y)/this.Un.rows}:this.Av.step?this.Av.step:{x:1,y:1},this.I_.Sv(t,i),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.I_.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.I_.vv().step}setEnd(t){return this.Av.end=t,this.pv(),this}getEnd(){return this.I_.vv().end}clear(){return this.I_.Nt(),this.ks.Ss(),this.D.emit("dataClear",this),this}setWireframeStyle(t){return this.gv="function"==typeof t?t(this.gv):t,this.I_.mv(this.gv),this.ks.Ss(),this.D.emit("styleChange",this),this}getWireframeStyle(){return this.gv}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.I_.xv(t),this.ks.Ss(),this.D.emit("styleChange",this),this}getIntensityInterpolation(){return this.I_.Mv()}Kp(){return this.tS&&this.getVisible()}Gd(){return mi(this.be)}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{fill:this.be}),this}D_(t){this.I_.D_().forEach((i=>{t.I_._v(i)}))}l_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}B_(t){return this.D.on("styleChange",t)}L_(t){return this.D.off(t)}Hc(t,i,s=this.Lx){const e=At(t,this.ks.us.dt,this.scale),h=i?this.I_.getIsUnderMouse()?this.I_:void 0:this.I_;if(!h)return;const r=s?h.zx(e):h.Hc(e);if(r){const t={x:r.x,y:r.y,column:r.column,row:r.column,intensity:r.cellValue};return{location:t,scale:this.scale,resultTableContent:this.Wy(new Ta,this,t).Zu(),owner:this}}}solveNearestFromScreen(t,i=this.Lx){return this.Hc(vo(t,this.Ji.us),!1,i)}getXMax(){const t=this.I_;return t?t.bt():void 0}getXMin(){const t=this.I_;return t?t.vt():void 0}getYMax(){const t=this.I_;return t?t.Mt():void 0}getYMin(){const t=this.I_;return t?t.xt():void 0}br(){const t=n(0,0);return t.x=Math.max(t.x,this.I_.vl()),t.y=Math.max(t.y,this.I_.bl()),t}WM(t){if(!(t instanceof Gs))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Gs&&t._i())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}Ie(t,i){t.cs(i),this.ks.Ss()}Te(){return super.Te(),this.I_.Yo(this.getBoundaries()),this}}class sc extends ic{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.dS=!1,this.Wy=tc}invalidateIntensityValues(t){if(this.dS&&this.Ji.us.Nn(_o.vf),Array.isArray(t)){if(0===t.length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Un.dataOrder?t.length:t[0].length,rows:"rows"===this.Un.dataOrder?t.length:t[0].length},s="columns"===this.Un.dataOrder?this.Un.columns:this.Un.rows,e="columns"===this.Un.dataOrder?this.Un.rows:this.Un.columns;if(i.x>s||i.y>e){if(!0===this.chart.cA.Hn){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Un.columns}x${this.Un.rows}, input ${i.columns}x${i.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.I_._v({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Un.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Un.dataOrder?t.values.length:t.values[0].length},s="columns"===this.Un.dataOrder?t.iColumn:t.iRow,e=s+i.primary-1,h="columns"===this.Un.dataOrder?t.iRow:t.iColumn,r=h+i.secondary-1,n=("columns"===this.Un.dataOrder?this.Un.columns:this.Un.rows)-1,o=("columns"===this.Un.dataOrder?this.Un.rows:this.Un.columns)-1;if(s<0||h<0){if(!0===this.chart.cA.Hn){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Tt.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.cA.Hn){const s=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Un.columns}x${this.Un.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(s)}const s=Math.max(e-n,0),h=i.primary-s,a=Math.max(r-o,0),l=[];for(let i=0;i<h;i+=1)l[i]=t.values[i].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.I_._v({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.D.emit("invalidateIntensity",this,t),this.ks.Ss(),this.dS=!0,this}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.I_.Ce(this.be),this.D.emit("styleChange",this),this.ks.Ss(),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}R_(t){return this.D.on("invalidateIntensity",t)}E_(t){return this.D.off(t)}}class ec extends Eu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.xs="Scrolling Heatmap Grid Series",this.Wy=tc,this.Lx=!1,this.Av={},this.Ji.us.Nn(_o.yf),this.Ji.us.Nn(_o.vf);const d=c;this.be=Si(l.heatmapScrollingGridSeriesFillStyle,d),this.gv=Si(this.qi.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.Un=f,this.z_=this.ks.V_(this.scale,[],f).Ce(this.be).mv(this.gv).cs(this.getHighlight()),this.ds(this.z_),a.start&&this.setStart(a.start),a.step&&this.setStep(a.step),this.setHighlightOnHover(!1)}pv(){const t=this.Av.start||{x:0,y:0};let i;i=this.Av.step?this.Av.step:{x:1,y:1},this.z_.Sv(t,i),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.z_.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.z_.vv().step}clear(){return this.z_.Nt(),this.ks.Ss(),this}setWireframeStyle(t){return this.gv="function"==typeof t?t(this.gv):t,this.z_.mv(this.gv),this.ks.Ss(),this}getWireframeStyle(){return this.gv}setPixelInterpolationMode(t){return t=t||"disabled",this.z_.xv(t),this.ks.Ss(),this}getPixelInterpolationMode(){return this.z_.Mv()}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorEnabled(t){return super.setCursorEnabled(t)}setDataCleaning(t){return this.z_.Su(t),this.ks.Ss(),this}Kp(){return this.tS&&this.getVisible()}Gd(){return mi(this.be)}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{fill:this.be}),this}Ce(t){return this.be="function"==typeof t?t(this.be):t,this.z_.Ce(this.be),this.ks.Ss(),this}Hc(t,i,s=this.Lx){const e=At(t,this.ks.us.dt,this.scale),h=i?this.z_.getIsUnderMouse()?this.z_:void 0:this.z_;if(!h)return;const r=s?h.zx(e):h.Hc(e);return r?Ya(r,this.scale,this.Wy(new Ta,this,{x:r.x,y:r.y,column:r.column,row:r.column,intensity:r.cellValue}).Zu(),this):void 0}solveNearestFromScreen(t,i=this.Lx){return this.Hc(vo(t,this.Ji.us),!1,i)}WM(t){if(!(t instanceof Gs))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Gs&&t._i())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.z_.bt()||0}getXMin(){return this.z_.vt()||0}getYMax(){return this.z_.Mt()||0}getYMin(){return this.z_.xt()||0}br(){const t=n(0,0);return t.x=Math.max(t.x,this.z_.vl()),t.y=Math.max(t.y,this.z_.bl()),t}Ie(t,i){t.cs(i),this.ks.Ss()}}class hc extends ec{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.Wy=tc}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.Un.scrollDimension?t.length:t[0].length,"rows"===this.Un.scrollDimension?t.length:t[0].length,0+s-1),h=this.Un.resolution-1;if(e>h){if(!0===this.chart.cA.Hn){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.Un.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.z_.Fv(t),this.ks.Ss(),this}invalidateIntensityValues(t){return this.z_._v(t.iSample,t.values),this.ks.Ss(),this}getSampleCount(){return this.z_.O_()}setFillStyle(t){return this.Ce(t),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class rc extends Eu{constructor(){super(...arguments),this.QM=[],this.yu=[],this.N_=[],this.G_=[],this.e_=1e3,this.JM=0,this.Hi=js.onHover,this._l={type:"disabled",packager:(t,i,s)=>t.slice()},this.Lx=!0,this.W_=[],this.U_=[],this.Y_=!1,this.Gd=()=>mi(this.H_)||mi(this.X_),this.j_=t=>{const i=t.length;if(this.QM.length>0){const s=this.QM.length-1,e=this.QM[s];if(i>0){const[i,s]=e.tl(),[h,r]=e.qa();if((h?i.length+h.length:i.length)>=this.e_){const o=h&&h.length>0?h[h.length-1]:i[i.length-1],l=r&&r.length>0?r[r.length-1]:s[i.length-1],u=(o.x+t[0].position)/2,d=ps(u,o,n(t[0].position,t[0].high)).y,f=ps(u,l,n(t[0].position,t[0].low)).y,A=a(u,d,f);e.nl(A,c(n(u,f),n(u,d))).zl(!0),this.Z_([A].concat(t)).Rl(!0)}else e.nl(t)}}else i>0&&this.Z_(t)},this.Q_=t=>{const i=this.W_,s=t.length;if(this.W_.length>0){if(s>0){const s=i[i.length-1],e=s.tl(),h=s.qa();if(e.length+h.length>=this.e_){const r=h.length>0?h[h.length-1]:e[e.length-1],o=(r.x+t[0].x)/2,a=ps(o,r,n(t[0].x,t[0].y)).y,l=n(o,a);s.nl(l,c(n(o,a),n(o,a))).zl(!0),i.push(this.J_([l].concat(t),this.i_).Rl(!0))}else s.nl(t)}}else s>0&&i.push(this.J_(t))},this.K_=t=>{const i=this.U_,s=t.length;if(this.U_.length>0){if(s>0){const s=i[i.length-1],e=s.tl(),h=s.qa();if(e.length+h.length>=this.e_){const r=h.length>0?h[h.length-1]:e[e.length-1],o=(r.x+t[0].x)/2,a=ps(o,r,n(t[0].x,t[0].y)).y,l=n(o,a);s.nl(l,c(n(o,a),n(o,a))).zl(!0),i.push(this.q_([l].concat(t)).Rl(!0))}else s.nl(t)}}else s>0&&i.push(this.q_(t))},this.tw=(t,i)=>{const s=t.Ux(i);if(s)return[At(s[0],this.scale,this.ks.us.dt),At(s[1],this.scale,this.ks.us.dt)]},this.iw=(t,i)=>{const s=t.sw(i);if(s)return[At(s[0],this.scale,this.ks.us.dt),At(s[1],this.scale,this.ks.us.dt)]}}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.JM=void 0!==i&&i>0?i:0,this.ks.Ss(),this}clear(){for(let t=0;t<this.QM.length;t+=1)this.QM[t].dispose();for(let t=0;t<this.W_.length;t+=1)this.W_[t].dispose();for(let t=0;t<this.U_.length;t+=1)this.U_[t].dispose();return this.yu.length=0,this.N_.length=0,this.G_.length=0,this.i_=void 0,this.QM.length=0,this.W_.length=0,this.U_.length=0,this.ks.Ss(),this.D.emit("dataClear",this),this}getPointAmount(){return this.QM.reduce(((t,i)=>t+i.ol()+i.al()),this.yu.length)}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}setCursorEnabled(t){return super.setCursorEnabled(t)}getCursorResultTableFormatter(){return this.Wy}getXMax(){return $t(this.QM,Ot,Math.max,Ut,this.i_)||0}getXMin(){return $t(this.QM,Vt,Math.min,Wt,this.i_)||0}getYMax(){return $t(this.QM,Gt,Math.max,Ht,this.i_)||0}getYMin(){return $t(this.QM,Nt,Math.min,Yt,this.i_)||0}br(){const t=n(0,0);for(const i of this.QM)t.x=Math.max(t.x,i.vl()),t.y=Math.max(t.y,i.bl());return t}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}WM(t){}qM(t,i,s){this.yu=ci(this.yu,t,{canReturnB:!1}),this.N_=ci(this.N_,i,{canReturnB:!1}),this.G_=ci(this.G_,s,{canReturnB:!1}),this.ks.Ss()}ew(t,i,s,e){this.hw(i,s,e),this.qM(Array.isArray(t)?t:[t],i,s)}hw(t,i,s){const e=es(is(t),is(i));this.i_?this.i_=es(this.i_,e):this.i_=e,s&&(this.i_=es(this.i_,s))}rw(){const t=this.QM.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.mi(this.QM[e].bt(),this.QM[e].vl())<i&&(s+=1);return s}s_(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}nw(t){const i=this.QM.length>0?this.QM[this.QM.length-1]:void 0,s=i?i.tl()[0].length+(i.qa()[0]?i.qa()[0].length:0):void 0;zu(t,s,this.e_,this.j_)}ow(t){const i=this.W_.length>0?this.W_[this.W_.length-1].tl().length+this.W_[this.W_.length-1].qa().length:void 0;zu(t,i,this.e_,this.Q_)}aw(t,i){const s=this.W_.length>0?this.W_[this.W_.length-1].tl().length+this.W_[this.W_.length-1].qa().length:void 0;zu(t,s,this.e_,this.Q_),zu(i,s,this.e_,this.K_)}Z_(t,i){const s=this.ks.lw(this.scale).nl(t,i).Ce(this.H_).Bl(this.X_).Pl(this._l).cs(this.getHighlight());return this.QM.push(s),this.ds(s),s}uw(t,i,s){const e=this.ks.rp(this.scale,void 0,[el.UserSeries]).nl(t,s).setMouseInteractions(!1).Re(i).cs(this.getHighlight());return this.ds(e),e}J_(t,i){return this.uw(t,this.cw,i)}q_(t,i){return this.uw(t,this.dw,i)}fw(t){this.H_="function"==typeof t?t(this.H_):t;const i=this.H_;for(let t=0;t<this.QM.length;t+=1)this.QM[t].Ce(i);this.ks.Ss()}Aw(t){this.X_="function"==typeof t?t(this.X_):t;const i=this.X_;for(let t=0;t<this.QM.length;t+=1)this.QM[t].Bl(i);this.ks.Ss()}gw(){return this.H_}Ll(){return this.X_}mw(t){this.cw="function"==typeof t?t(this.cw):t;const i=this.cw;for(let t=0;t<this.W_.length;t+=1)this.W_[t].Re(i);this.ks.Ss()}yw(t){this.dw="function"==typeof t?t(this.dw):t;const i=this.dw;for(let t=0;t<this.U_.length;t+=1)this.U_[t].Re(i);this.ks.Ss()}pw(){return this.cw}Sw(){return this.dw}Ie(t,i){t.cs(i),this.bw(i),this.ks.Ss()}bw(t){for(let i=0;i<this.W_.length;i+=1)this.W_[i].cs(t);for(let i=0;i<this.U_.length;i+=1)this.U_[i].cs(t)}oS(){if(super.oS(),this.Y_=!1,this.JM>0){const t=this.QM.length,i=this.rw();this.s_(this.QM,this.e_,this.JM,i);const s=this.QM.length;this.W_.length>0&&this.s_(this.W_,this.e_,this.JM,i),this.U_.length>0&&this.s_(this.U_,this.e_,this.JM,i),t!==s&&this.ZM(),this.Y_=!0}}Te(){if(super.Te(),this.yu.length>0&&(this.nw(this.yu),this.xw(this.N_,this.G_),this.Y_=!0),this.Y_){const t=this.getBoundaries();for(const i of this.QM)i.Yo(t);for(const i of this.W_)i.Yo(t);for(const i of this.U_)i.Yo(t)}}dp(){this.i_=void 0,this.yu.length=0,this.N_.length=0,this.G_.length=0}Hc(t,i,s=this.Lx){const e=((t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=Ji(t,a[0]),s=Ji(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0})(t,i?this.QM.filter((t=>t.getIsUnderMouse())):this.QM,s?this.iw:this.tw);if(void 0!==e&&void 0!==e[0]){const t=At(e[0][0],this.ks.us.dt,this.scale),i=At(e[0][1],this.ks.us.dt,this.scale);return Ya(t,this.scale,this.Wy(new Ta,this,t.x,t.y,i.y).Zu(),this,e[1].Eh())}}solveNearestFromScreen(t,i=this.Lx){return this.Hc(vo(t,this.Ji.us),!1,i)}}const nc=(t,i,s,e,h)=>{const r=i.getIcon();return r?t.addRow(r,i.getName()):t.addRow(i.getName()),t.addRow("Position","",i.axisX.formatValue(s)).addRow("Value","",i.axisY.formatValue(e)).addRow("Base","",i.axisY.formatValue(h))};class oc extends rc{constructor(t,i,s,e,h,r,n,o,a=0,l,u){super(t,i,s,e,h,r,n,o,l,u),this.xs="Area Series",this.Wy=nc,this.Ji.us.Nn(_o.mf),this.Mw=a}add(t){0!==this.QM.length&&this.Ji.us.Nn(_o.vf);const i=Array.isArray(t)?t:[t];if(i.length>0){const t=this._w(i),[s,e]=this.ww(t);this.ew(t,s,e,c(n(Oi,this.Mw),n(Ni,this.Mw)));const h=this.yu[this.yu.length-1];this.t_=h?{position:h.position,high:h.high,low:h.low}:void 0,this.D.emit("dataAdd",this,i,this.i_)}return this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.t_?this.t_.position+i:0),this.add(Ou(t,i,e)),this}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}}class ac extends oc{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.H_=Si(this.qi.areaSeriesBipolarHighFillStyle,c),this.cw=Si(this.qi.areaSeriesBipolarHighStrokeStyle,c),this.X_=Si(this.qi.areaSeriesBipolarLowFillStyle,c),this.dw=Si(this.qi.areaSeriesBipolarLowStrokeStyle,c)}_w(t){return this.Cw(t)}xw(t,i){return this.aw(t,i)}Cw(t){let i=0;const s=[],e=t.length,h=this.Mw;return e>0&&(this.kw&&(this.kw.y<=h&&h<=t[0].y||this.kw.y>=h&&h>=t[0].y)&&(s[i]=a(.5*(this.kw.x+t[0].x),h,h),i+=1),this.kw=t[e-1],1===e?this.Tw(t[0],s,i):this.Fw(t,s)),s}Tw(t,i,s=0){return i[s]=a(t.x,t.y,this.Mw),s+1}Fw(t,i){let s=0,e=0;const h=t.length-1,r=this.Mw;for(;e<h;){const h=t[e],n=t[e+=1],o=a(h.x,h.y,r);if(0!==s&&Xt(i[s-1],o)||(i[s]=o,s+=1),h.y<=r&&r<=n.y||h.y>=r&&r>=n.y){const t=h.y,e=n.y,o=r,l=t===e?n.x:Hr(h.x,n.x,(o-t)/(e-t));i[s]=a(l,r,r),s+=1}i[s]=a(n.x,n.y,r),s+=1}return s}ww(t){const i=t.length,s=Array(i),e=Array(i),h=this.Mw;for(let r=0;r<i;r+=1){const i=t[r];i.high>h?(s[r]=n(i.position,i.high),e[r]=n(i.position,h)):i.high<h?(s[r]=n(i.position,h),e[r]=n(i.position,i.high)):(s[r]=n(i.position,i.high),e[r]=n(i.position,i.high))}return[s,e]}r_(){return Vu(this.QM,(t=>t[0]))}setPositiveFillStyle(t){return this.fw(t),this}setNegativeFillStyle(t){return this.Aw(t),this}setPositiveStrokeStyle(t){return this.mw(t),this}setNegativeStrokeStyle(t){return this.yw(t),this}getPositiveFillStyle(){return this.gw()}getNegativeFillStyle(){return this.Ll()}getPositiveStrokeStyle(){return this.pw()}getNegativeStrokeStyle(){return this.Sw()}attach(t,i=!0,s=!1){return gi(t,this.qi,s,{fill:this.H_,fill2:this.X_,behavior:{colorStep:!0}}),super.attach(t,i,s)}}class lc extends oc{constructor(){super(...arguments),this.dw=at}xw(t){return this.ow(t)}ww(t){const i=t.length,s=Array(i);for(let e=0;e<i;e+=1){const i=t[e];s[e]=n(i.position,i.high)}return[s,[]]}setStrokeStyle(t){return this.mw(t),this}getStrokeStyle(){return this.pw()}}class uc extends lc{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.H_=O,this.X_=Si(this.qi.areaSeriesNegativeFillStyle,c),this.cw=Si(this.qi.areaSeriesNegativeStrokeStyle,c)}_w(t){return this.Iw(t)}Iw(t){const i=[];return 1===t.length?this.Tw(t[0],i):this.Fw(t,i),i}Tw(t,i,s=0){const e=this.Mw;return i[s]=t.y>e?a(t.x,e,e):a(t.x,t.y,e),s+1}Fw(t,i,s=0){let e=0;const h=t.length-1,r=this.Mw;for(;e<h;){const h=t[e],o=t[e+=1];if(h.y<=r){const t=a(h.x,h.y,r);if(0!==s&&Xt(i[s-1],t)||(i[s]=t,s+=1),o.y>r){const t=ws(n(Ni,r),n(Oi,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,r,r),s+=1}else i[s]=a(o.x,o.y,r),s+=1}else{const t=a(h.x,r,r);if(0!==s&&Xt(i[s-1],t)||(i[s]=t,s+=1),o.y<=r){const t=ws(n(Ni,r),n(Oi,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,o.y,r),s+=1}else i[s]=a(o.x,r,r),s+=1}}return s}r_(){return Vu(this.QM,(t=>t[1]))}setFillStyle(t){return this.Aw(t),this}getFillStyle(){return this.Ll()}attach(t,i=!0,s=!1){return gi(t,this.qi,s,{fill:this.X_,stroke:this.cw}),super.attach(t,i,s)}}class cc extends lc{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u);const d=c;this.H_=Si(this.qi.areaSeriesPositiveFillStyle,d),this.X_=O,this.cw=Si(this.qi.areaSeriesPositiveStrokeStyle,d)}_w(t){return this.Pw(t)}Pw(t){const i=[];return 1===t.length?this.Tw(t[0],i):this.Fw(t,i),i}Tw(t,i,s=0){const e=this.Mw;return i[s]=t.y<e?a(t.x,e,e):a(t.x,t.y,e),s+1}Fw(t,i,s=0){let e=0;const h=t.length-1,r=this.Mw;for(;e<h;){const h=t[e],o=t[e+=1];if(h.y>=r){const t=a(h.x,h.y,r);if(0!==s&&Xt(i[s-1],t)||(i[s]=t,s+=1),o.y<r){const t=ws(n(Ni,r),n(Oi,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,r,r),s+=1}else i[s]=a(o.x,o.y,r),s+=1}else{const t=a(h.x,r,r);if(0!==s&&Xt(i[s-1],t)||(i[s]=t,s+=1),o.y>=r){const t=ws(n(Ni,r),n(Oi,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,o.y,r),s+=1}else i[s]=a(o.x,r,r),s+=1}}return s}r_(){return Vu(this.QM,(t=>t[0]||[]))}setFillStyle(t){return this.fw(t),this}getFillStyle(){return this.gw()}attach(t,i=!0,s=!1){return gi(t,this.qi,s,{fill:this.H_,stroke:this.cw}),super.attach(t,i,s)}}const dc={Positive:cc,Negative:uc,Bipolar:ac},fc=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Position","",i.axisX.formatValue(s)).addRow("High","",i.axisY.formatValue(e)).addRow("Low","",i.axisY.formatValue(h));class Ac extends rc{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.xs="Area Range Series",this.Wy=fc,this.Ji.us.Nn(_o.mf);const c=u;this.H_=Si(this.qi.areaRangeSeriesFillStyle,c),this.cw=Si(this.qi.areaRangeSeriesStrokeStyle,c),this.X_=Si(this.qi.areaRangeSeriesFillStyleInverted,c),this.dw=Si(this.qi.areaRangeSeriesStrokeStyleInverted,c)}add(t){const i=Array.isArray(t)?t:[t],[s,e]=u(i);this.ew(t,s,e);const h=this.yu[this.yu.length-1];return this.t_=h?{position:h.position,high:h.high,low:h.low}:void 0,this.D.emit("dataAdd",this,i,this.i_),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.t_?this.t_.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}xw(t,i){this.aw(t,i)}setHighFillStyle(t){return this.fw(t),this}setLowFillStyle(t){return this.Aw(t),this}setHighStrokeStyle(t){return this.mw(t),this}setLowStrokeStyle(t){return this.yw(t),this}getHighFillStyle(){return this.gw()}getLowFillStyle(){return this.Ll()}getHighStrokeStyle(){return this.pw()}getLowStrokeStyle(){return this.Sw()}r_(){return Vu(this.QM,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}attach(t,i=!0,s=!1){return gi(t,this.qi,s,{fill:this.H_,fill2:this.X_,behavior:{colorStep:!0}}),super.attach(t,i,s)}}var gc;!function(t){t[t.before=0]="before",t[t.middle=.5]="middle",t[t.after=1]="after"}(gc||(gc={}));const mc=(t,i)=>{const s=[],e=t.length,h=i;if(e>0){let i=0,r=t[0];s[i]=r,i+=1;for(let o=1;o<e;o+=1){const e=t[o];if(h<=0)s[i]=n(r.x,e.y),i+=1;else{const t=r.x*(1-h)+e.x*h;s[i]=n(t,r.y),i+=1,s[i]=n(t,e.y),i+=1}s[i]=e,i+=1,r=e}}return s},yc=(t,i)=>{const s=t*t,e=s*t,h=1-t,r=h*h,o=r*h;return n(o*i[0].x+3*t*r*i[1].x+3*s*h*i[2].x+e*i[3].x,o*i[0].y+3*t*r*i[1].y+3*s*h*i[2].y+e*i[3].y)},pc=(t,i=32)=>{if(2===t.length)return[t[0],t[1]];const s=(t=>{const i=1e-5,s=t.length-1,e=Array(s);if(s>1){let h=n(0,0),r=n(0,0),o=n(0,0),a=as(fs(t[1],t[0]));const l=3;let u=0,c=0;for(let d=0;d<s;d+=1){const f=Array(4);if(f[0]=t[d],f[1]=t[d],f[3]=t[d+1],f[2]=t[d+1],o=a,h=r,d+1<s?(a=t[d+2]===t[d+1]?n(0,0):as(fs(t[d+2],t[d+1])),r=as(ds(o,a))):r=n(0,0),t[d+1].y===t[d].y)u=0,c=0;else{const s=t[d+1].x-t[d].x;u=Math.abs(h.x)>i?Math.abs(s/(l*h.x)):1,c=Math.abs(r.x)>i?Math.abs(s/(l*r.x)):1}f[1]=ds(cs(h,u),f[1]),f[2]=fs(f[2],cs(r,c)),e[d]=f}}return e.length>0?e:[]})(t),e=s.length,h=Array(e*i);let r=0;for(let t=0;t<e;t+=1)for(let e=0;e<=i;e+=1)h[r]=yc(e/i,s[t]),r+=1;return h};class Sc extends Gu{constructor(t,i,s,e,h,r,o,a,l,u,d,f,A,g,m){super(t,i,s,e,h,r,o,a,l,d,f),this.QM=[],this.xs="Point Line series",this.e_=1e5,this.Hx=5,this.Aa=0,this.Ga=!1,this.Wa=!1,this.Ua=!1,this.Lx=!0,this.Dw="nearest-x",this.Bw=1,this.Lw=[],this.Rw=t=>{if(this.QM.length>0){const i=this.QM[this.QM.length-1];if(t.length>0){const s=i.tl(),e=i.qa(),h=s.length+e.length-+i.El();if(h>=this.e_){const r=e.length>0?e[e.length-1]:s[i.El()?h:h-1],o=n((r.x+t[0].x)/2,(r.y+t[0].y)/2);i.nl(o,c(n(o.x,o.y),n(o.x,o.y))).zl(!0),this.Ew([o].concat(t)).Rl(!0)}else i.nl(t,this.i_)}}else t.length>0&&this.Ew(t)},this.zw=t=>{if(this.Lw.length>0){const i=this.Lw[this.Lw.length-1];t.length>0&&((i.tl().length+i.qa().length)*this.Bw>=this.e_?this.Vw(t):i.nl(t))}else t.length>0&&this.Vw(t)},this.Ow=(t,i)=>{const s=t.Hc(i);if(s)return At(s,this.scale,this.ks.us.dt)},this.Nw=(t,i)=>{const s=t.sw(i);if(s)return At(s,this.scale,this.ks.us.dt)},this.Un=m,this.$x=u,this.Gw=A,this.Ww=Si(d.pointLineSeriesFillStyle,g),this.lu=Si(this.qi.pointLineSeriesStrokeStyle,g)}add(t){return super.add(t),this}r_(){return Vu(this.Lw)}setStrokeStyle(t){this.lu="function"==typeof t?t(this.lu):t;const i=this.lu;for(let t=0;t<this.QM.length;t+=1)this.QM[t].Re(i);return this.ks.Ss(),this}getStrokeStyle(){return this.lu}setPointFillStyle(t){this.Ww="function"==typeof t?t(this.Ww):t;const i=this.Ww;for(let t=0;t<this.Lw.length;t+=1)this.Lw[t].Ce(i);return this.ks.Ss(),this}getPointFillStyle(){return this.Ww}setPointSize(t){this.Hx=t;for(let i=0;i<this.Lw.length;i+=1)this.Lw[i].q(t);return this.ks.Ss(),this}getPointSize(){return this.Hx}getPointShape(){return this.$x}setPointRotation(t){this.Aa=t;for(let i=0;i<this.Lw.length;i+=1)this.Lw[i].Nh(t);return this.ks.Ss(),this}getPointRotation(){return this.Aa}setIndividualPointSizeEnabled(t){this.Ga=t,t&&this.Ji.us.Nn(_o.bf);for(let i=0;i<this.Lw.length;i+=1)this.Lw[i].el(t);return this.ks.Ss(),this}getIndividualPointSizeEnabled(){return this.Ga}setIndividualPointRotationEnabled(t){this.Wa=t;for(let i=0;i<this.Lw.length;i+=1)this.Lw[i].hl(t);return this.ks.Ss(),this}getIndividualPointRotationEnabled(){return this.Wa}setIndividualPointValueEnabled(t){this.Ua=t;for(let i=0;i<this.Lw.length;i+=1)this.Lw[i].rl(t);return this.ks.Ss(),this}getIndividualPointValueEnabled(){return this.Ua}setVisible(t){return super.setVisible(t),this.Lw.forEach((i=>i.setVisible(t))),this}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorSolveBasis(t){return this.Dw=t,this.QM.forEach((i=>i.Ka(Nh(t)))),this.Lw.forEach((i=>i.Ka(Nh(t)))),this.ks.Ss(),this}getCursorSolveBasis(){return this.Dw}Gd(){return mi(this.Ww)||mi(this.lu.getFillStyle())}Cs(){return this.bs||this.$x}WM(t){}Ie(t,i){t.cs(i),this.ks.Ss()}h_(t){const i=this.QM.length>0?this.QM[this.QM.length-1].tl().length+this.QM[this.QM.length-1].qa().length-+this.QM[this.QM.length-1].El():void 0;zu(t,i,this.e_,this.Rw),zu(t,i,this.e_,this.zw)}Vw(t,i){const s=this.ks.bS(this.scale).nl(t,i).setMouseInteractions(this.Yi).Ce(this.Ww).il(this.$x).q(this.Hx).Nh(this.Aa).el(this.Ga).hl(this.Wa).rl(this.Ua).Ka(Nh(this.Dw)).cs(this.getHighlight());return this.ds(s),this.Lw.push(s),s}Ew(t,i){const s=this.ks.rp(this.scale,void 0,[el.UserSeries,...this.Gw]).nl(t,i).setMouseInteractions(this.Yi).Re(this.lu).Ka(Nh(this.Dw)).cs(this.getHighlight());return this.ds(s),this.QM.push(s),s}attach(t,i=!0,s=!1){return gi(t,this.qi,s,{stroke:this.lu,fill:this.Ww}),super.attach(t,i,s)}getPointAmount(){return this.Lw.reduce(((t,i)=>t+i.ol()+i.al()),this.yu.length)}clear(){super.clear();for(let t=0;t<this.QM.length;t+=1)this.QM[t].dispose();this.QM.length=0;for(let t=0;t<this.Lw.length;t+=1)this.Lw[t].dispose();return this.Lw.length=0,this}s_(t,i,s,e){super.s_(t,i,s,e),this.KM.s_(this.Lw,i,s,e,this.scale,(t=>{}))}Hc(t,i,s=this.Lx){const e=s?Wu(t,i?this.QM.filter((t=>t.getIsUnderMouse())):this.QM,this.Nw,"nearest-x"===this.Dw?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.Dw?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2):Wu(t,i?this.Lw.filter((t=>t.getIsUnderMouse())):this.Lw,this.Ow,"nearest-x"===this.Dw?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.Dw?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==e){const t=At(e[0],this.ks.us.dt,this.scale),i=e[1]instanceof xr?e[1].uu():e[1].Eh(),s=e[1]instanceof or?e[1].Eh():void 0,h=e[1]instanceof xr?e[1].uu().getFillStyle():void 0,r=$(i)?e[0].color?new U({color:e[0].color}):new U({color:i.getFallbackColor()}):void 0;return Ya(t,this.scale,this.Wy(new Ta,this,t.x,t.y,t).Zu(),this,h||r||s)}}solveNearestFromScreen(t,i=this.Lx){return this.Hc(vo(t,this.Ji.us),!1,i)}}const vc=(t,i)=>t.qa().length>=i?t.qa().slice(-i):Array.prototype.concat(t.tl(),t.qa()).slice(-i),bc=(t,i,s)=>{const e=Array.prototype.concat(t.tl(),t.qa()).slice(0,-s-1).concat(i.slice(s+1,2*s+2));t.Nt().nl(e).Ps()};class xc extends Sc{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A){super(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A),this.xs="Spline Series",this.Bw=32,this.e_=8e3,this.Uw=t=>{if(0===t.length)return;const i=this.Lw.length;if(i>0){const s=i>1,e=this.Lw[i-1];if(s){const s=Array.prototype.concat(e.tl(),e.qa()),h=s.length;if(32*h>=this.e_){const s=vc(e,3),h=Array.prototype.concat(s,t),r=pc(h,32);bc(this.QM[i-1],r,32),this.Ew(r.slice(66))}else if(h<5){const e=this.Lw[i-2],h=vc(e,3),r=Array.prototype.concat(h,s,t),n=pc(r,32),o=this.QM[i-1],a=n.slice(66);o.Nt().nl(a).Ps()}else{const s=this.QM[i-1],h=Array.prototype.concat(s.tl(),s.qa()),r=vc(e,4),n=Array.prototype.concat(r,t),o=pc(n,32),a=h.slice(0,-66).concat(o.slice(33));s.Nt().nl(a).Ps()}}else{const s=Array.prototype.concat(e.tl(),e.qa()),h=s.length,r=this.QM[i-1];if(32*h>=this.e_){const i=vc(e,3),s=Array.prototype.concat(i,t),h=pc(s,32);bc(this.QM[0],h,32),this.Ew(h.slice(66))}else if(h+t.length>1){const i=Array.prototype.concat(s,t),e=pc(i,32);r.Nt().nl(e).Ps()}else r.nl(t)}}else{const i=t.length>0?pc(t,32):t,s=is(i);this.Ew(i,s)}this.zw(t)}}setCursorInterpolationEnabled(t){return super.setCursorInterpolationEnabled(t)}h_(t){const i=this.Lw.length,s=this.Lw.length>0?this.Lw[i-1].tl().length+this.Lw[i-1].qa().length:void 0;zu(t,s,Math.ceil(this.e_/this.Bw),this.Uw)}solveNearestFromScreen(t,i=this.Lx){if(i)return super.solveNearestFromScreen(vo(t,this.Ji.us),i);const s=Wu(vo(t,this.Ji.us),this.Lw,this.Ow,"nearest-x"===this.Dw?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.Dw?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==s){const t=At(s[0],this.ks.us.dt,this.scale);return Ya(t,this.scale,this.Wy(new Ta,this,t.x,t.y,t).Zu(),this,s[1].Eh())}}}class Mc{constructor(){this.Gi="FreeformPattern",this._l={type:"disabled",packager:(t,i,s)=>t.slice()}}s_(t,i,s,e,h,r){if(e>0){const h=Math.trunc((i-e)/s);if(h>0&&t.length>1){const i=t.splice(0,h);for(let t=0;t<i.length;t+=1)r(i[t]),i[t].dispose()}}}Yw(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}getXMax(t=[],i){return $t(t,Ot,Math.max,Ut,i)}getXMin(t=[],i){return $t(t,Vt,Math.min,Wt,i)}getYMax(t=[],i){return $t(t,Gt,Math.max,Ht,i)}getYMin(t=[],i){return $t(t,Nt,Math.min,Yt,i)}}const _c=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},wc=i({_l:{type:"disabled",packager:(t,i,s)=>t.slice()}});class Cc extends wc{s_(t,i,s,e,h,r){if(e>0){const i=Math.ceil(e/s),n=t.length-i;if(n>0){const i=this.rw(t,h);if(i>0){const s=n-i>0?i:n;if(s>0){for(let i=0;i<s;i+=1)r(t[i]),t[i].dispose();t.splice(0,s)}}}}}}const kc=(t,i)=>{const s=i.xt();return t?Math.min(s,t):s},Tc=(t,i)=>{const s=i.Mt();return t?Math.max(s,t):s};class Fc extends Cc{Yw(t,i){return Math.abs(t.x-i.x)}getYMax(t=[],i){return t.reduce(Tc,i?i.max.y:void 0)}getYMin(t=[],i){return t.reduce(kc,i?i.min.y:void 0)}}const Ic=(t,i)=>{const s=i.vt();return t?Math.min(s,t):s},Pc=(t,i)=>{const s=i.bt();return t?Math.max(s,t):s};class Dc extends Cc{Yw(t,i){return Math.abs(t.y-i.y)}getXMax(t=[],i){return t.reduce(Pc,i?i.max.x:void 0)}getXMin(t=[],i){return t.reduce(Ic,i?i.min.x:void 0)}}const Bc={horizontalProgressive:new class extends Fc{constructor(){super({_l:Bh()}),this.Gi="HorizontalProgressivePattern"}rw(t,i){const s=t.length,e=Math.min(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.x.mi(t[r].bt(),t[r].vl())<e&&(h+=1);return h}getXMax(t=[],i){return void 0!==i?i?i.max.x:void 0:t.length>0?t[t.length-1].bt():void 0}getXMin(t=[],i){return t.length>0&&t[0].ol()>0?t[0].vt():i?i.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",Bh(_c(t)))}},horizontalRegressive:new class extends Fc{constructor(){super({_l:Lh()}),this.Gi="HorizontalRegressivePattern"}rw(t,i){const s=t.length,e=Math.max(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.x.mi(t[r].vt(),-t[r].vl())&&(h+=1);return h}getXMax(t=[],i){return t.length>0&&t[0].ol()>0?t[0].bt():i?i.max.x:void 0}getXMin(t=[],i){return void 0!==i?i?i.min.x:void 0:t.length>0?t[t.length-1].vt():void 0}setPrecision(t){return this.set("_columnPackaging",Lh(_c(t)))}},verticalProgressive:new class extends Dc{constructor(){super({_l:Rh()}),this.Gi="VerticalProgressivePattern"}rw(t,i){const s=t.length,e=Math.min(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.y.mi(t[r].Mt(),t[r].bl())<e&&(h+=1);return h}getYMax(t=[],i){return void 0!==i?i?i.max.y:void 0:t.length>0?t[t.length-1].Mt():void 0}getYMin(t=[],i){return t.length>0&&t[0].ol()>0?t[0].xt():i?i.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",Rh(_c(t)))}},verticalRegressive:new class extends Dc{constructor(){super({_l:Eh()}),this.Gi="VerticalRegressivePattern"}rw(t,i){const s=t.length,e=Math.max(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.y.mi(t[r].xt(),-t[r].bl())&&(h+=1);return h}getYMax(t=[],i){return t.length>0&&t[0].ol()>0?t[0].Mt():i?i.max.y:void 0}getYMin(t=[],i){return void 0!==i?i?i.min.y:void 0:t.length>0?t[t.length-1].xt():void 0}setPrecision(t){return this.set("_columnPackaging",Eh(_c(t)))}},freeform:new Mc};class Lc extends Sc{constructor(t,i,s,e,h,r,o,a,l,u,d,f,A,g,m){super(t,i,s,e,h,r,o,a,Bc.horizontalProgressive,l,d,f,A,g,m),this.xs="Step Series",this.Rw=t=>{const i=this.QM.length>0?this.QM[this.QM.length-1].tl().length+this.QM[this.QM.length-1].qa().length:void 0;zu(t,i,this.e_,this.Hw)},this.Hw=t=>{const i=t.length;if(this.QM.length>0){const s=this.QM[this.QM.length-1];if(i>0){const i=s.tl(),e=s.qa(),h=e.length>0?e[e.length-1]:i[i.length-1],r=mc([h].concat(t),this.$w);r.shift();const o=n((h.x+r[0].x)/2,(h.y+r[0].y)/2),a=Array.prototype.concat(o,r);(e.length>0?i.length+e.length:i.length)>=this.e_?(s.nl(o,c(n(o.x,o.y),n(o.x,o.y))).zl(!0),this.Ew(a).Rl(!0),this.Vw(t)):s.nl(a)}}else i>0&&this.Ew(mc(t,this.$w));this.zw(t)},this.$w=u,void 0===this.Gw.find((t=>"DataPattern"===t.type))&&this.Gw.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class Rc extends Eu{constructor(t,i,s,e,h,r,n,a,l,u){super(t,i,s,e,h,r,n,a,l,u),this.xs="OHLC Series",this.Xw=t=>t[4]>=t[1],this.c_=c(o(Oi,Oi),o(Ni,Ni)),this.jw=[],this.Zw=!1,this.Qw=-1,this.Jw=[],this.Kw=!0,this.qw=!1,this.tC=4,this.Wy=(t,i,s)=>(t.addRow(i.getName()).addRow("Time","",i.axisX.formatValue(s.position)).addRow("Open","",s.open.toFixed(3)).addRow("High","",s.high.toFixed(3)).addRow("Low","",s.low.toFixed(3)).addRow("Close","",s.close.toFixed(3)),t),this.iC=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.Ji.us.Nn(_o.rf)}r_(){return this.Jw}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}Kp(){return this.tS&&this.Jw.length>0&&this.getVisible()}sC(t){if(!(this.Jw.length<1))return[this.Jw[t][0],this.Jw[t][1],this.Jw[t][2],this.Jw[t][3],this.Jw[t][4]]}Hc(t){if(0===this.Jw.length)return;const i=At(t,this.ks.us.dt,this.scale).x,s=void 0!==this.getPackDataState();let e,h,r,o,a;if(s){const t=this.eC;if(!t)return;const s=Bi(i,t.length-1,(i=>t[i][0])),n=void 0!==s&&t[s];if(!n)return;o=n[3],r=n[2],h=n[1],a=n[4],e=n[0]}else{const t=Bi(i,this.Jw.length-1,(t=>this.Jw[t][0])),s=void 0!==t&&this.Jw[t];if(!s)return;e=s[0],h=s[1],r=s[2],o=s[3],a=s[4]}const l={position:e,open:h,high:r,low:o,close:a,isPacked:s};return{location:n(l.position,l.close),scale:this.scale,resultTableContent:this.Wy(new Ta,this,l).Zu(),owner:this,isPacked:s,position:e,open:h,high:r,low:o,close:a}}WM(t){if(!(t.x instanceof Vs))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.hC=t.x}br(){return n(5,5)}Y_(t){const i=t.length-1;if(i<0)return this;for(let s=0;s<=i;s+=1)t[s][3]<this.c_.min.y&&(this.c_.min.y=t[s][3]),this.c_.max.y<t[s][2]&&(this.c_.max.y=t[s][2]);return this.c_.min.x=Math.min(this.c_.min.x,t[0][0]),this.c_.max.x=Math.max(this.c_.max.x,t[i][0]),this}getXMax(){return this.c_.max.x}getXMin(){return this.c_.min.x}getYMax(){return this.c_.max.y}getYMin(){return this.c_.min.y}add(t){this.Jw.length>0&&this.Ji.us.Nn(_o.vf);const i=Array.isArray(t[0])?t:[t[0]];if(i.length>0){this.Zw=!0;const t=this.Jw.length,s=this.jw.length,e=i.length;this.Jw.length=t+e,this.jw.length=s+e;for(let h=0;h<e;h+=1)this.Jw[t+h]=i[h],this.jw[s+h]=this.Jw[t+h];this.Y_(i),this.D.emit("dataAdd",this,i,void 0),this.ks.Ss()}return this}setPackData(t){return t!==this.Kw&&(this.qw=!0,this.Kw=t,this.Ji.us.Ss()),this}getPackData(){return this.Kw}getPackDataState(){const t=this.Qw;if(!(t<0||void 0===this.eC||this.eC.length===this.Jw.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.rC=t,this.Ji.us.Ss(),this}getFigureWidth(){return this.rC}setFigureMinimumGap(t){return this.tC=t,this.Ji.us.Ss(),this}getFigureMinimumGap(){return this.tC}solveNearestFromScreen(t){return this.Hc(vo(t,this.Ji.us))}clear(){return this.Jw=[],this.jw=[],this.eC=void 0,this.nC(),this.c_.min.x=Oi,this.c_.min.y=Oi,this.c_.max.x=Ni,this.c_.max.y=Ni,this.D.emit("dataClear",this),this}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}oC(t){return this.hC.getPixelSize()*t/1e3}aC(){const t=this.iC.length-1,i=this.oC(this.rC+this.tC);let s=Bi(i,t,(t=>this.iC[t]));return void 0===s?s=i<this.iC[0]?0:this.iC[t]<i?t:this.iC.length/2:this.iC[s]<i&&(s+=1),this.iC.length<=s&&(s=t),1e3*this.iC[s]}Te(){if(super.Te(),!this.Kw){this.eC=void 0;let t=null;if(this.qw?(this.qw=!1,t=this.Jw,this.nC()):t=this.jw,t.length>=1){for(let i=0;i<t.length;i+=1){const s=t[i],e=s[0];this.Xw(s)?this.lC(e,s):this.uC(e,s)}this.jw.length=0,this.Zw=!1,this.Qw=-1}}}dp(){super.dp();const t=this.aC();if(this.Kw&&this.Jw.length>=1&&(t!==this.Qw||this.Zw||this.qw)){this.qw=!1,this.Qw=t,this.Zw=!1,this.nC(),this.eC=[];const i=this.Jw.length;let s=this.Jw[0][0]-this.Jw[0][0]%(t/2)+t,e=0;for(;e<i;){let h=this.sC(e);if(void 0===h)break;let r=h[3],n=h[2];const o=e;for(e+=1;e<i&&this.Jw[e][0]<s;)h=this.Jw[e],this.Jw[e][3]<r&&(r=this.Jw[e][3]),n<this.Jw[e][2]&&(n=this.Jw[e][2]),e+=1;const a=e-1;let l=h[0];o<a&&(l=this.Jw[a][0],h=[l,this.Jw[o][1],n,r,this.Jw[a][4]]),h[1]<h[4]?this.lC(l,h):this.uC(l,h),this.eC.push(h),s+=t}}}}class Ec extends Rc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.cC=1175494351e-14,this.rC=this.qi.ohlcCandleThicknessPixels||5,this.dC=this.qi.ohlcCandleTailStrokeStylePositive,this.fC=this.qi.ohlcCandleTailStrokeStyleNegative,this.AC=this.qi.ohlcCandleBodyFillStylePositive,this.gC=this.qi.ohlcCandleBodyFillStyleNegative,this.mC=s.Lg(this.scale).Re(new ee({thickness:this.rC,fillStyle:this.AC})),this.mC.mu=!0,this.mC.gu={x:0,y:1},this.yC=s.Lg(this.scale).Re(new ee({thickness:this.rC,fillStyle:this.gC})),this.yC.mu=!0,this.yC.gu={x:0,y:-1},this.pC=s.Lg(this.scale).Re(this.dC),this.pC.mu=!0,this.SC=s.Lg(this.scale).Re(this.fC),this.SC.mu=!0,this.ds(this.mC),this.ds(this.yC),this.ds(this.pC),this.ds(this.SC)}setBodyThickness(t){return this.rC=t,this.mC.Re(new ee({thickness:this.rC,fillStyle:this.AC})),this.yC.Re(new ee({thickness:this.rC,fillStyle:this.gC})),this.Ji.us.Ss(),this}getBodyThickness(){return this.rC}setBodyFillStylePositive(t){return this.AC="function"==typeof t?t(this.AC):t,this.mC.Re(new ee({thickness:this.rC,fillStyle:this.AC})),this.Ji.us.Ss(),this}getBodyFillStylePositive(){return this.AC}setBodyFillStyleNegative(t){return this.gC="function"==typeof t?t(this.gC):t,this.yC.Re(new ee({thickness:this.rC,fillStyle:this.gC})),this.Ji.us.Ss(),this}getBodyFillStyleNegative(){return this.gC}setTailStrokeStylePositive(t){return this.dC="function"==typeof t?t(this.dC):t,this.pC.Re(this.dC),this.Ji.us.Ss(),this}getTailStrokeStylePositive(){return this.dC}setTailStrokeStyleNegative(t){return this.fC="function"==typeof t?t(this.fC):t,this.SC.Re(this.fC),this.Ji.us.Ss(),this}getTailStrokeStyleNegative(){return this.fC}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{fill:this.AC,fill2:this.gC,behavior:{colorStep:!0}}),this}nC(){return this.pC.Nt(),this.SC.Nt(),this.mC.Nt(),this.yC.Nt(),this}lC(t,i){return Math.abs(i[1]-i[4])<this.cC?this.mC.zr().Eg({x:t,y:i[1]-this.cC},{x:t,y:i[1]+this.cC}):this.mC.zr().Eg({x:t,y:i[1]},{x:t,y:i[4]}),i[4]<i[2]&&this.pC.zr().Eg({x:t,y:i[4]},{x:t,y:i[2]}),i[3]<i[1]&&this.pC.zr().Eg({x:t,y:i[3]},{x:t,y:i[1]}),this}uC(t,i){return Math.abs(i[1]-i[4])<this.cC?this.yC.zr().Eg({x:t,y:i[1]-this.cC},{x:t,y:i[1]+this.cC}):this.yC.zr().Eg({x:t,y:i[1]},{x:t,y:i[4]}),i[3]<i[4]&&this.SC.zr().Eg({x:t,y:i[3]},{x:t,y:i[4]}),i[1]<i[2]&&this.SC.zr().Eg({x:t,y:i[1]},{x:t,y:i[2]}),this}}class zc extends Rc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.rC=this.qi.ohlcBarThicknessPixels||10,this.vC=this.qi.ohlcBarStrokeStylePositive,this.bC=this.qi.ohlcBarStrokeStyleNegative,this.xC=s.Lg(this.scale).Re(this.vC),this.xC.mu=!0,this.ds(this.xC),this.MC=s.Lg(this.scale).Re(this.vC),this.MC.mu=!0,this.MC.gu={x:-this.rC/2,y:0},this.ds(this.MC),this._C=s.Lg(this.scale).Re(this.vC),this._C.mu=!0,this._C.gu={x:this.rC/2,y:0},this.ds(this._C),this.wC=s.Lg(this.scale).Re(this.bC),this.wC.mu=!0,this.ds(this.wC),this.CC=s.Lg(this.scale).Re(this.bC),this.CC.mu=!0,this.CC.gu={x:-this.rC/2,y:0},this.ds(this.CC),this.kC=s.Lg(this.scale).Re(this.bC),this.kC.mu=!0,this.kC.gu={x:this.rC/2,y:0},this.ds(this.kC)}setStrokeStylePositive(t){return this.vC="function"==typeof t?t(this.vC):t,this.xC.Re(this.vC),this.MC.Re(this.vC),this._C.Re(this.vC),this.Ji.us.Ss(),this}getStrokeStylePositive(){return this.vC}setStrokeStyleNegative(t){return this.bC="function"==typeof t?t(this.bC):t,this.wC.Re(this.bC),this.CC.Re(this.bC),this.kC.Re(this.bC),this.Ji.us.Ss(),this}getStrokeStyleNegative(){return this.bC}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{fill:this.vC.getFillStyle(),fill2:this.bC.getFillStyle(),behavior:{colorStep:!0}}),this}setFigureWidth(t){return super.setFigureWidth(t),this.MC.gu={x:-t/2,y:0},this.CC.gu={x:-t/2,y:0},this._C.gu={x:t/2,y:0},this.kC.gu={x:t/2,y:0},this}nC(){return this.wC.Nt(),this.xC.Nt(),this.CC.Nt(),this.MC.Nt(),this.kC.Nt(),this._C.Nt(),this}lC(t,i){return this.xC.zr().Eg({x:t,y:i[3]},{x:t,y:i[2]}),this.MC.zr().Eg({x:t,y:i[1]},{x:t,y:i[1]}),this._C.zr().Eg({x:t,y:i[4]},{x:t,y:i[4]}),this}uC(t,i){return this.wC.zr().Eg({x:t,y:i[3]},{x:t,y:i[2]}),this.CC.zr().Eg({x:t,y:i[1]},{x:t,y:i[1]}),this.kC.zr().Eg({x:t,y:i[4]},{x:t,y:i[4]}),this}}const Vc={Candlesticks:Ec,Bars:zc},Oc=t=>({defaultDragMouseStyle:Pe.Horizontal,getTitleTextRotation:()=>0,...gl(t,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.br().x))}),Nc=t=>({defaultDragMouseStyle:Pe.Vertical,getTitleTextRotation:t=>90*t,...gl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.br().y))});class Gc extends Gu{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f){super(t,i,s,e,h,r,n,o,a,l,u),this.QM=[],this.xs="Line Series",this.Lx=!0,this.e_=void 0,this.Dw="nearest-x",this.pu=void 0,this.Gd=()=>mi(this.lu.getFillStyle()),this.TC=(t,i)=>{const s=t.Ux(i);if(s)return At(s,this.scale,this.ks.us.dt)},this.Nw=(t,i)=>{const s=t.sw(i);if(s)return At(s,this.scale,this.ks.us.dt)},this.Gw=c,this.Un=f,this.lu=Si(this.qi.lineSeriesStrokeStyle,d),this.FC={individualLookupValuesEnabled:void 0!==(null==f?void 0:f.individualLookupValuesEnabled)&&f.individualLookupValuesEnabled}}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.lu="function"==typeof t?t(this.lu):t;const i=this.lu;for(let t=0;t<this.QM.length;t+=1)this.QM[t].Re(i);return this.ks.Ss(),this}getStrokeStyle(){return this.lu}setDataCleaning(t){return this.pu=t,this.QM.forEach((t=>t.Su(this.pu))),this.ks.Ss(),this}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorSolveBasis(t){return this.Dw=t,this.QM.forEach((i=>i.Ka(Nh(t)))),this.ks.Ss(),this}getCursorSolveBasis(){return this.Dw}WM(t){}h_(t){let i=this.QM[0];i||(i=this.Ew(),this.QM.push(i),this.ds(i)),i.nl(t,this.i_)}Ew(){return this.ks.rp(this.scale,this.FC,[el.UserSeries,...this.Gw]).Re(this.lu).Su(this.pu).Ka(Nh(this.Dw)).cs(this.getHighlight())}attach(t,i=!0,s=!1){return gi(t,this.qi,s,{stroke:this.lu}),super.attach(t,i,s)}Ie(t,i){t.cs(i),this.ks.Ss()}s_(t,i,s,e){}Hc(t,i,s=this.Lx){const e=Wu(t,i?this.QM.filter((t=>t.getIsUnderMouse())):this.QM,s?this.Nw:this.TC,"nearest-x"===this.Dw?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.Dw?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==e){const t=At(e[0],this.ks.us.dt,this.scale),i=e[1].uu();return Ya(t,this.scale,this.Wy(new Ta,this,t.x,t.y,t).Zu(),this,i.getFillStyle())}}solveNearestFromScreen(t,i=this.Lx){return this.Hc(vo(t,this.Ji.us),!1,i)}}class Wc extends Gu{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,new Mc,l,u),this.QM=[],this.xs="Point series",this.Hx=5,this.Aa=0,this.Ga=!1,this.Wa=!1,this.Ua=!1,this.e_=void 0,this.Ow=(t,i)=>{const s=t.Hc(i);if(s)return At(s,this.scale,this.ks.us.dt)},this.Un=d,this.$x=a,this.be=Si(l.pointSeriesFillStyle,c)}add(t){return super.add(t),this}Gd(){return mi(this.be)}Cs(){return this.bs||this.$x}WM(t){}attach(t,i=!0,s=!1){return gi(t,this.qi,s,{fill:this.be}),super.attach(t,i)}Ie(t,i){t.cs(i),this.ks.Ss()}setPointFillStyle(t){this.be="function"==typeof t?t(this.be):t;const i=this.be;for(let t=0;t<this.QM.length;t+=1)this.QM[t].Ce(i);return this.ks.Ss(),this}getPointFillStyle(){return this.be}setPointSize(t){this.Hx=t;for(let i=0;i<this.QM.length;i+=1)this.QM[i].q(t);return this.ks.Ss(),this}getPointSize(){return this.Hx}getPointShape(){return this.$x}setPointRotation(t){this.Aa=t;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Nh(t);return this.ks.Ss(),this}getPointRotation(){return this.Aa}setIndividualPointSizeEnabled(t){this.Ga=t,t&&this.Ji.us.Nn(_o.bf);for(let i=0;i<this.QM.length;i+=1)this.QM[i].el(t);return this.ks.Ss(),this}getIndividualPointSizeEnabled(){return this.Ga}setIndividualPointRotationEnabled(t){this.Wa=t;for(let i=0;i<this.QM.length;i+=1)this.QM[i].hl(t);return this.ks.Ss(),this}getIndividualPointRotationEnabled(){return this.Wa}setIndividualPointValueEnabled(t){this.Ua=t;for(let i=0;i<this.QM.length;i+=1)this.QM[i].rl(t);return this.ks.Ss(),this}getIndividualPointValueEnabled(){return this.Ua}h_(t){let i=this.QM[0];i||(i=this.Ew()),i.nl(t,this.i_)}Ew(){const t=this.ks.bS(this.scale).il(this.$x).q(this.Hx).Nh(this.Aa).el(this.Ga).hl(this.Wa).rl(this.Ua).Ce(this.be).cs(this.getHighlight());return this.QM.push(t),this.ds(t),t}Hc(t,i){const s=Wu(t,i?this.QM.filter((t=>t.getIsUnderMouse())):this.QM,this.Ow,Ji);if(void 0!==s){const t=At(s[0],this.ks.us.dt,this.scale),i=s[1].Eh(),e=$(i)?s[0].color?new U({color:s[0].color}):new U({color:i.getFallbackColor()}):i;return Ya(t,this.scale,this.Wy(new Ta,this,t.x,t.y,t).Zu(),this,e)}}solveNearestFromScreen(t){return this.Hc(vo(t,this.Ji.us),!1)}setCursorResultTableFormatter(t){return super.setCursorResultTableFormatter(t)}}class Uc{constructor(t,i,e,h){this.IC=!1,this.D=new s,this.chart=e,this.PC=h,this.$s=t.$s,this.qs=h||Oe,this.DC=Tt.document.createElement("div"),this.DC.style.position="absolute",this.DC.style.pointerEvents="none",Tt.document.body.append(this.DC);const r=()=>{const t=e.engine.container.getBoundingClientRect();this.DC.style.left=`${t.left}px`,this.DC.style.top=`${t.top}px`,this.DC.style.width=`${t.width}px`,this.DC.style.height=`${t.height}px`};r(),e.onResize(r),this.BC(this.DC),this.LC(),this.RC(),this.EC(),this.zC(i),this.chart.VC().push(this)}BC(t){this.OC=Tt.document.createElement("div"),this.OC.style.pointerEvents="all",t.append(this.OC),this.NC=Tt.document.createElement("div"),this.GC=new Ie(this.$s,this.qs,this.chart,this.NC),this.WC=Tt.document.createElement("table"),this.WC.style.borderSpacing="0",this.OC.appendChild(this.GC.oe()),this.OC.appendChild(this.NC),this.NC.appendChild(this.WC)}RC(){let t=0,i=0,s=0,e=0,h=!1;this.IC=!1,this.OC.onmousedown=r=>{r=r||Tt.event,s=r.clientX,e=r.clientY,h=!0,Tt.document.onmouseup=t=>{this.IC?this.OC.addEventListener("click",ii,!0):this.OC.removeEventListener("click",ii,!0),h=!1,this.IC=!1,Tt.document.onmouseup=null,Tt.document.onmousemove=null},Tt.document.onmousemove=r=>{r=r||Tt.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.IC=!0,this.OC.style.top=this.OC.offsetTop-i+"px",this.OC.style.left=this.OC.offsetLeft-t+"px",this.OC.style.removeProperty("right"),this.OC.style.removeProperty("bottom"))}}}EC(){let t=0,i=0,s=0,e=0,h=!1;this.OC.ontouchstart=r=>{r=r||Tt.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.OC.ontouchend=()=>{h=!1,Tt.document.ontouchend=null,Tt.document.ontouchmove=null},this.OC.ontouchmove=r=>{h&&(ii(r),r=r||Tt.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.OC.style.top=this.OC.offsetTop-i+"px",this.OC.style.left=this.OC.offsetLeft-t+"px",this.OC.style.removeProperty("right"),this.OC.style.removeProperty("bottom"))}}}LC(){this.OC.style.setProperty("top","10px"),this.OC.style.setProperty("left","10px"),this.OC.style.position="absolute",this.OC.style.display="flex",this.OC.style.alignItems="flex-start",this.NC.style.setProperty("display","none")}removePositionProperty(){this.OC.style.removeProperty("top"),this.OC.style.removeProperty("left"),this.OC.style.removeProperty("bottom"),this.OC.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case Ge.BottomLeft:this.OC.style.setProperty("bottom","10px"),this.OC.style.setProperty("left","10px");break;case Ge.TopLeft:this.OC.style.setProperty("top","10px"),this.OC.style.setProperty("left","10px");break;case Ge.BottomRight:this.OC.style.setProperty("bottom","10px"),this.OC.style.setProperty("right","10px");break;case Ge.TopRight:default:this.OC.style.setProperty("top","10px"),this.OC.style.setProperty("right","10px")}}zC(t){for(let i=0;i<t.length;i+=1){const s=this.WC.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.UC(r,h):this.addCustomButton(r,h)}}}UC(t,i){switch(t){case ne.ZoomIn:this.YC(new be(this.$s,this.chart,this.qs),i);break;case ne.ZoomInX:this.YC(new xe(this.$s,this.chart,this.qs),i);break;case ne.ZoomInY:this.YC(new Me(this.$s,this.chart,this.qs),i);break;case ne.ZoomOut:this.YC(new _e(this.$s,this.chart,this.qs),i);break;case ne.ZoomOutX:this.YC(new we(this.$s,this.chart,this.qs),i);break;case ne.ZoomOutY:this.YC(new Ce(this.$s,this.chart,this.qs),i);break;case ne.ZoomToFit:this.YC(new Te(this.$s,this.chart,this.qs),i);break;case ne.ToggleAnimations:this.YC(new ke(this.$s,this.chart,this.qs),i);break;default:console.error(`No predefined button like "${ne[t]}" exists.`)}}YC(t,i){i.rowSpan=t.Xs.rows,i.colSpan=t.Xs.columns,t.ne(i)}addCustomButton(t,i){const s=new Fe(this.$s,t,this.chart);return this.YC(s,i),this}dispose(){this.DC.remove(),this.D.emit("dispose",this)}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}}class Yc extends Eu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){var d;super(t,i,s,e,h,r,n,o,a,l),this.xs="Point Line Area Series",this.Wy=Hc,this.Lx=!1,this.HC=0,this.Un=c,this.Na=this.ks.dd(this.scale).Re(Si(this.qi.lineSeriesStrokeStyle,u)).ld(Si(this.qi.pointSeriesFillStyle,u)).ud(Si(this.qi.areaSeriesPositiveFillStyle,u)).$C(void 0).pd(7),this.Na.XC=!1!==(null===(d=this.Un)||void 0===d?void 0:d.allowDataGrouping),this.ds(this.Na)}setDataSet(t){var i;return t===(null===(i=this.od)||void 0===i?void 0:i.Wt)||(t.yc&&this.Ji.us.Nn(_o.xf),t.vc&&this.Ji.us.Nn(_o.bf),this.od=zi(t,this.od,(()=>[t.$c((()=>{this.HC+=1,this.HC>1&&this.Ji.us.Nn(_o.vf),this.Ji.us.Ss()})),t.Xc((()=>this.Ji.us.Ss()))])),this.Na.ad(t),this.chart.us.Ss()),this}getDataSet(){return this.jC()}setStrokeStyle(t){return this.Na.Re(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.uu()}setAreaFillStyle(t){return this.Na.ud(t),this.ks.Ss(),this}getAreaFillStyle(){return this.Na.ZC()}setPointFillStyle(t){return this.Na.ld(t),this.ks.Ss(),this}getPointFillStyle(){return this.Na.yd()}setPointSize(t){return this.Na.pd(t),this.ks.Ss(),this}getPointSize(){return this.Na.QC()}setPointShape(t){return this.Na.fd(t),this.ks.Ss(),this}getPointShape(){return this.Na.Ad()}setPointRotation(t){return this.Na.gd(t),this.ks.Ss(),this}getPointRotation(){return this.Na.md()}setPointAlignment(t){return this.Na.JC(t),this.Ji.us.Ss(),this}getPointAlignment(){return this.Na.KC()}setCurvePreprocessing(t){return this.Na.$C(t),this.ks.Ss(),this}getCurvePreprocessing(){return this.Na.qC()}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}add(t){return this.jC().add(t),this.ks.Ss(),this}addArraysXY(t,i){return this.jC().addArraysXY(t,i),this.ks.Ss(),this}appendJSON(t,i){return this.jC().appendJSON(t,i),this.ks.Ss(),this}appendSample(t){return this.jC().appendSample(t),this.ks.Ss(),this}appendSamples(t){return this.jC().appendSamples(t),this.ks.Ss(),this}fill(t){return this.jC().fill(t),this.ks.Ss(),this}setSamples(t){return this.jC().setSamples(t),this.ks.Ss(),this}alterSamples(t,i){return this.jC().alterSamples(t,i),this.ks.Ss(),this}alterSamplesByID(t,i){return this.jC().alterSamplesByID(t,i),this.ks.Ss(),this}getSampleCount(){return this.jC().getSampleCount()}getNextSampleIndex(){return this.jC().getNextSampleIndex()}clear(){return this.jC().clear(),this.ks.Ss(),this}setMaxSampleCount(t){return this.jC().setMaxSampleCount(t),this.ks.Ss(),this}getMaxSampleCount(){return this.jC().getMaxSampleCount()}readBack(t){return this.jC().readBack(t)}onMaxSampleCountExceeded(t){return this.jC().onMaxSampleCountExceeded(t)}offMaxSampleCountExceeded(t){return this.jC().offMaxSampleCountExceeded(t)}tk(){return this.jC()}Gd(){return mi(this.getPointFillStyle())||mi(this.getStrokeStyle().getFillStyle())||mi(this.getAreaFillStyle())}Kp(){var t;const i=null===(t=this.od)||void 0===t?void 0:t.Wt;return this.getAutoScrollingEnabled()&&void 0!==i&&i.uc>0}WM(t){}getXMax(){return this.Na.bt()}getXMin(){return this.Na.vt()}getYMax(){return this.Na.Mt()}getYMin(){return this.Na.xt()}br(){return{x:this.Na.vl(),y:this.Na.bl()}}jC(){if(!this.od){const t=new vn(this.Un);t.yc&&this.Ji.us.Nn(_o.xf),t.vc&&this.Ji.us.Nn(_o.bf),this.od=zi(t,this.od,(()=>[t.$c((()=>{this.HC+=1,this.HC>1&&this.Ji.us.Nn(_o.vf),this.Ji.us.Ss()})),t.Xc((()=>{this.Ji.us.Ss()}))])),this.Na.ad(t)}return this.od.Wt}attach(t,i=!0,s=!1){super.attach(t,i,s);const e=this.getPointFillStyle(),h=this.getAreaFillStyle();return gi(t,this.qi,s,{stroke:this.getStrokeStyle(),fill:e!==O?e:h}),super.attach(t,i)}Cs(){return this.bs||this.getPointShape()}Ie(t,i){t.cs(i),this.ks.Ss()}Hc(t,i,s=this.Lx){void 0!==this.getCurvePreprocessing()&&(s=!1);const e=this.tk(),h=At(t,this.Ji.us.dt,this.scale),r=!i||this.Na.getIsUnderMouse()?e.Hc(h,s,this.scale,this.Ji.pixelScale):void 0;if(void 0!==r){const t=[this.getStrokeStyle().getFillStyle(),this.getPointFillStyle(),this.getAreaFillStyle()];return Ya(r,this.scale,this.Wy(new Ta,this,r).Zu(),this,t.filter((t=>!N(t)))[0])}}solveNearestFromScreen(t,i=!1){return this.Hc(vo(t,this.Ji.us),!1,i)}}const Hc=(t,i,s)=>{const e=i.getIcon();return e?t.addRow(e,i.getName()):t.addRow(i.getName()),t.addRow("X","",i.axisX.formatValue(s.x)).addRow("Y","",i.axisY.formatValue(s.y)),void 0!==s.lookupValue&&t.addRow("Value","",s.lookupValue.toFixed(1)),t},$c=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.axis.dt.q(i),t.axis.rg.q(s)})))),Xc=n(10,10);var jc;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(jc||(jc={}));const Zc=new Set([jc.Top,jc.Bottom,jc.Left,jc.Right]),Qc=t=>t.setStopped(!0),Jc=t=>t.getChartInteractionFitByDrag()?t.fit(!0):void 0,Kc=(t,i)=>{const s="linear-highPrecision"===t.kh.type||"linear-highPrecision"===i.kh.type,e="logarithmic"===t.kh.type||"logarithmic"===i.kh.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.kh.type}, y: ${i.kh.type})`;throw new Error(s)}};var qc,td,id;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(qc||(qc={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(td||(td={}));class sd extends kl{constructor(t,i,s,e,h,r,o){super(t,i,s,i.vm("chartXY bg",0),e,i.us.qi.chartXYBackgroundFillStyle,i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.chartXYTitleFont,i.us.qi.chartXYTitleFillStyle,o),this.ik=this.sm.d2({scaleXYConstructor:Gs}),this.Vg=[],this.Og=[],this.Gg=[],this.Ng=[],this.sk=new Map,this.ek=!0,this.hk=!0,this.rk=!0,this.Rf=2,this.nk=!0,this.ak=!0,this.lk=[],this.uk=this.xm.ke(this.ik).Ce(O).we(at).setMouseInteractions(!1),this.ck=this.xm.Ee(this.ik).Re(at).setMouseInteractions(!1),this.dk=this.xm.Ee(this.ik).Re(at).setMouseInteractions(!1),this.fk=this.qi.chartXYZoomingRectangleFillStyle,this.Ak=this.qi.chartXYZoomingRectangleStrokeStyle,this.gk=this.qi.chartXYFittingRectangleFillStyle,this.mk=this.qi.chartXYFittingRectangleStrokeStyle,this.yk=Pe.Default,this.pk=Pe.Move,this.Sk=Pe.ZoomIn,this.vk=Pe.Default,this.bk=void 0,this.xk=ed,this.GM=0,this.Gy=va.snapToClosest,this.Mk=$c(this.Og,this.Vg),this._k=$c(this.Gg,this.Ng),this.wk=(t,i,s,e,h)=>{this.Mk(e,h),this._k(h,e),this.ik.q(e,h),this.us.Ss()},this.Ck=(t,i)=>{this.sk.set(t,i)},this.qA=t=>{const i=this.Og.findIndex((i=>i.axis===t)),s=this.Vg.findIndex((i=>i.axis===t)),e=this.Gg.findIndex((i=>i.axis===t)),h=this.Ng.findIndex((i=>i.axis===t));i>=0&&this.Og.splice(i,1),s>=0&&this.Vg.splice(s,1),e>=0&&this.Gg.splice(e,1),h>=0&&this.Ng.splice(h,1),this.sk.delete(t),this.us.Ss()},this.addAreaSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);const e=t&&t.baseline?t.baseline:0,h=new(t&&t.type?t.type:dc.Positive)(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length);return this.PS(h),h},this.addAreaRangeSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);const e=new Ac(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length);return this.PS(e),e},this.Tk=!1,this.Fk=!1,this.UM=()=>{(this.ek||this.hk)&&(this.bk=this.engine.setMouseStyle(this.yk))},this.YM=()=>{this.Tk=!1,this.engine.restoreMouseStyle(this.bk)},this.HM=(t,i,s)=>{var e,h;const r=zt(null===(e=this.cA.Yn)||void 0===e?void 0:e.chartXYRectangleZoomFitMouseButton,0),n=zt(null===(h=this.cA.Yn)||void 0===h?void 0:h.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.bk);const o=this.xm.us.Pe(i.clientX,i.clientY);s===r&&(this.ek||this.hk)?(this.Ik(t,o),ii(i)):s===n&&this.nk&&(this.bk=this.engine.setMouseStyle(this.pk),this.Fk=!0,ii(i))},this.eS=(t,i,s,e,h)=>{var r,o;const a=n(i.clientX,i.clientY),l=zt(null===(r=this.cA.Yn)||void 0===r?void 0:r.chartXYRectangleZoomFitMouseButton,0),u=zt(null===(o=this.cA.Yn)||void 0===o?void 0:o.chartXYPanMouseButton,2);s===l&&(this.ek||this.hk)?(this.Pk(t,e,a),ii(i)):s===u&&this.nk&&(this.Dk(cs(h,-1)),ii(i)),this.us.Ss()},this.$M=(t,i,s,e)=>{var h,r;const o=zt(null===(h=this.cA.Yn)||void 0===h?void 0:h.chartXYRectangleZoomFitMouseButton,0),a=zt(null===(r=this.cA.Yn)||void 0===r?void 0:r.chartXYPanMouseButton,2);if(s===o&&(this.ek||this.hk)){const s=n(i.clientX,i.clientY);this.Bk(t,e,s),ii(i)}else s===a&&this.nk&&ii(i);this.engine.restoreMouseStyle(this.bk),this.FS.getIsUnderMouse()&&(this.bk=this.engine.setMouseStyle(this.yk)),this.Tk=!1,this.Fk=!1},this.sS=(t,i)=>{if(this.rk){const t=this.xm.us.Pe(i.clientX,i.clientY);this.Lk(t,n(vi(i),vi(i))),ii(i)}},this.Rk=(t,i,s,e)=>{},this.Ek=(t,i,s,e,h,r)=>{if(this.nk){const t=n(-(e.x+h.x)/2,-(e.y+h.y)/2);this.Dk(t),ii(r),this.Fk=!0}if(this.rk){const t=this.engine.clientLocation2Engine(i.x,i.y),o=this.engine.clientLocation2Engine(s.x,s.y),a=fs(n(Math.abs(t.x-e.x-(o.x-h.x)),Math.abs(t.y-e.y-(o.y-h.y))),n(Math.abs(t.x-o.x),Math.abs(t.y-o.y)));this.forEachAxisX((t=>{t.getChartInteractionZoomByWheel()&&t.St(t.dt.mi(t.getInterval().start,-a.x),t.dt.mi(t.getInterval().end,a.x),!1,!0,"interactionZoom")})),this.forEachAxisY((t=>{t.getChartInteractionZoomByWheel()&&t.St(t.dt.mi(t.getInterval().start,-a.y),t.dt.mi(t.getInterval().end,a.y),!1,!0,"interactionZoom")})),ii(r),this.Tk=!0}},this.zk=(t,i,s,e)=>{this.Fk=!1,this.Tk=!1},this.Vk=(t,i,s)=>{(this.hk||this.ek)&&(this.Ik(t,i),ii(s))},this.Ok=(t,i,s,e,h)=>{(this.hk||this.ek)&&(this.Pk(t,i,s),ii(h))},this.Nk=(t,i,s,e)=>{(this.hk||this.ek)&&(this.Bk(t,i,s),ii(e))},this.us.Nn(_o.gf),this.setPadding({right:24}),this.Gk=i.ob("chartXY series bg",qc.seriesBackground),this.Wk=[qc.gridLine0,qc.gridLine1,qc.gridLine2].map((t=>i.Uk(`chartXY gridline #${t}`,t))),this.JA=i.Uk("chartXY highlighters below",qc.highlightersBelow),this.Rb=i.$y("chartXY plotting",td.plotting),this.KA=i.$y("chartXY highlighters above",td.highlightersAbove),this.bA=i.$y("chartXY fg",td.fg),this.ik.x.J(0,this.uiScale.x.getCellSize()-(this.Xt.left+this.Xt.right+this.ya.left+this.ya.right)),this.ik.y.J(0,this.uiScale.y.getCellSize()-(this.Xt.bottom+this.Xt.top+this.ya.bottom+this.ya.top)),this.ik.q(this.uiScale.oi().x,this.uiScale.oi().y),this.FS=this.Gk.ke(this.ik).Ce(this.qi.chartXYSeriesBackgroundFillStyle).we(at),this.IS=this.bA.ke(this.ik).Ce(O).we(this.qi.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.TS(this.FS,this.IS),this.setSeriesBackgroundEffect(!1),this.jy=i.Zy();const a=zt(r?r.autoCursorBuilder:void 0,Cu);this.Pm=a.uy(this.jy,this.ik,this.ik,this.qi),ba.Dm(this),this.LS(((t,i)=>{ba.Bm(this,i)})),this.addAxisX(r&&r.defaultAxisX),this.addAxisY(r&&r.defaultAxisY),this.onResize(this.wk),this._m.Rh("ChartXY"),this.hS=Ks(new te(this.Vk,this.Ok,this.Nk,1),new ie(this.Rk,this.Ek,this.zk)),this.onSeriesBackgroundMouseEnter(this.UM),this.onSeriesBackgroundMouseLeave(this.YM),this.onSeriesBackgroundMouseWheel(this.sS),this.onSeriesBackgroundMouseDragStart(this.HM),this.onSeriesBackgroundMouseDrag(this.eS),this.onSeriesBackgroundMouseDragStop(this.$M),this.onSeriesBackgroundTouchStart(this.hS.onTouchStart),this.onSeriesBackgroundTouchMove(this.hS.onTouchMove),this.onSeriesBackgroundTouchEnd(this.hS.onTouchEnd),this.setAnimationsEnabled(!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled)),this.Sm(h,this.ik)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}solveNearest(t){const i=t||this.us.On();if(i)return ba.Hc(this,vo(i,this.us),this.xS)}getMinimumSize(){const t={x:0,y:0};t.x+=this.Xt.left+this.Xt.right+this.ya.left+this.ya.right,t.y+=this.Xt.top+this.Xt.bottom+this.ya.top+this.ya.bottom;const i=this._m.Ps().jc(),s=m(hd(this.xk||ed),this.bm);return t.x+=i.x+s.left+s.right,t.y+=i.y+s.top+s.bottom,this.Yk&&(t.x+=this.Yk.left,t.x+=this.Yk.right,t.y+=this.Yk.top,t.y+=this.Yk.bottom),t.x+=Xc.x,t.y+=Xc.y,t}addChartMarkerXY(t=ku,i,s){const e=this.nm(),h=new Lu(e,this.uiScale,i||this.getDefaultAxisX(),s||this.getDefaultAxisY(),t,this.tm(e),this.qi);return this.gm(h),h}addAxisX(t){var i,s;const{opposite:e,type:h}=bo(t);let r;r="linear"===h.type?this.sm.d1({dimension:"x",scale1DConstructor:Vs}):"linear-highPrecision"===h.type?this.sm.d1({dimension:"x",scale1DConstructor:Vs}).Mi():this.sm.d1({dimension:"x",scale1DConstructor:Fs}).Ai(h.base),r.q(this.ik.x.oi());const n=e?this.Vg:this.Og,o=new Co(this.Wk,this.bA,this.xm,this.JA,this.KA,this.us.es,r,this.ik.y,(a=()=>o._g(),{...ko,...Oc(a)}),this,e?100:0,this.qA,this.Ck,this.qi,this.th,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iStack:u,iParallel:l}),this.us.Ss(),o}addAxisY(t){var i,s;const{opposite:e,type:h}=bo(t);let r;r="linear"===h.type?this.sm.d1({dimension:"y",scale1DConstructor:Vs}):"linear-highPrecision"===h.type?this.sm.d1({dimension:"y",scale1DConstructor:Vs}).Mi():this.sm.d1({dimension:"y",scale1DConstructor:Fs}).Ai(h.base),r.q(this.ik.y.oi());const n=e?this.Ng:this.Gg,o=new Co(this.Wk,this.bA,this.xm,this.JA,this.KA,this.us.es,r,this.ik.x,(a=()=>o._g(),{...To,...Nc(a)}),this,e?100:0,this.qA,this.Ck,this.qi,this.th,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iParallel:l,iStack:u}),this.us.Ss(),o}swapAxes(t,i){const s=[this.Og,this.Gg,this.Ng,this.Vg],e=s.find((i=>void 0!==i.find((i=>i.axis===t)))),h=s.find((t=>void 0!==t.find((t=>t.axis===i))));if(!e||!h)return this;if(e!==h)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const r=e.find((i=>i.axis===t)),n=e.find((t=>t.axis===i));if(!r||!n)return this;const o=r.iParallel,a=r.iStack;return r.iParallel=n.iParallel,r.iStack=n.iStack,n.iParallel=o,n.iStack=a,this.us.Ss(),this}dispose(){return this.Pm.dispose(),this.Gk.W(),this.Rb.W(),this.bA.W(),this.Wk.forEach((t=>t.W())),this.KA.W(),this.JA.W(),this.jy.W(),this.VC().forEach((t=>t.dispose())),ga(this.ik),this.Og.slice().forEach((t=>t.axis.dispose())),this.Gg.slice().forEach((t=>t.axis.dispose())),this.Ng.slice().forEach((t=>t.axis.dispose())),this.Vg.slice().forEach((t=>t.axis.dispose())),this.xS.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.Og,...this.Vg].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.Gg,...this.Ng].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):Zc;return Et(Array.from(i).map((t=>{switch(t){default:case jc.Top:return this.Vg.map((t=>t.axis));case jc.Bottom:return this.Og.map((t=>t.axis));case jc.Left:return this.Gg.map((t=>t.axis));case jc.Right:return this.Ng.map((t=>t.axis))}})))}Hk(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.Og.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.Vg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}forEachAxisY(t){this.Gg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.Ng.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}setTitlePosition(t){return this.xk=t,this.us.Ss(),this}getTitlePosition(){return this.xk}$k(t,i,s,e){const h=this.xk||ed;let r,n=m(hd(h),this.bm);this.getTitleFillStyle()===O||0===this.getTitle().length?(r={x:0,y:0},n={left:0,top:0,right:0,bottom:0}):r=this._m.Ps().jc();const o=Math.abs(e)+this.ya.bottom+this.Xt.bottom,a=Math.abs(s)+this.ya.top+this.Xt.top,l={left:Math.abs(t)+this.ya.left+this.Xt.left,right:Math.abs(i)+this.ya.right+this.Xt.right,top:a,bottom:o},u=this.uiScale.Wi(),{horizontalAlignment:c,verticalAlignment:d,position:f,marginsWithTitle:A}=rd(h,u,l,r,n,this.ya);return this._m.Fe(f).Da(c).La(d),A}Te(t){super.Te(t);for(const t of this.xS)t.oS();for(const t of this.xS)t.Te();const i=this.Gg.map((t=>t.axis.Mr().Ps())),s=this.Og.map((t=>t.axis.Mr().Ps())),e=this.Vg.map((t=>t.axis.Mr().Ps())),h=this.Ng.map((t=>t.axis.Mr().Ps()));let r=!1;this.forEachAxis((t=>{(t.kr()||t.Tr())&&(r=!0)}));const o=this.Tk||this.Fk||!this.ak&&r;ba.Im(this,this.FS.getIsUnderMouse(),o,this.xS,(t=>ba.Hc(this,t,this.xS)),((t,i)=>t.Hc(i,!0)));const a=nd(this.Gg,i),l=nd(this.Og,s),u=nd(this.Vg,e),c=nd(this.Ng,h),f=this.$k(a.thicknessTotal,c.thicknessTotal,u.thicknessTotal,l.thicknessTotal),A=this.ik.x.getCellSize()-(f.left+f.right),g=this.ik.y.getCellSize()-(f.bottom+f.top),m=[f.left,f.right],y=[f.bottom,f.top];this.ik.x.J(0,A),this.ik.y.J(0,g),this.ik.x.si(m),this.ik.y.si(y);const p=(t,i,s,e)=>{let h=0;t.groups.forEach((t=>{let r=0;const n=t.stacks.reduce(((t,i)=>Math.max(t,i.kg)),0),o=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()?i.axis.iA+i.axis.sA:0)),0),a=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"pixels"in i.axis.zd?i.axis.zd.pixels:0)),0),l=i-o-a;t.stacks.forEach((e=>{const o=e.axis,a=o.getVisible(),u=Math.max(i-r,0),c=Math.min(a?"pixels"in o.zd?o.zd.pixels:o.zd.relative/t.sumRelativeSize*l:0,u),d=a?s[0]+r+o.iA:0,f=a?s[1]+(i-r)-c-o.iA:0;o.dt.si([d,f]),o.Te({kg:n,Tg:e.Tg,Pg:c,Xk:r,zg:n+e.Tg,Bg:h}),a&&(r+=c+o.iA+o.sA)})),h+=e*t.thicknessMax}))};p(a,g,y,-1),p(c,g,y,1),p(l,A,m,-1),p(u,A,m,1),this.Yk={left:a.thicknessTotal,top:u.thicknessTotal,right:c.thicknessTotal,bottom:l.thicknessTotal},this.FS.Fe(n(0,0)).q(n(A,g)),this.IS.Fe(n(0,0)).q(n(A,g));const S=d(this.ik.x.ei(),this.ik.y.ei(),this.ik.x.ri(),this.ik.y.ri());this.Rb.qv(S),this.JA.qv(S),this.KA.qv(S),this.Zg&&this.Zg(),this.Og.forEach((t=>t.axis.Wg())),this.Vg.forEach((t=>t.axis.Wg())),this.Gg.forEach((t=>t.axis.Wg())),this.Ng.forEach((t=>t.axis.Wg())),super.pm();for(const t of this.xS)t.dp()}j(){for(let t=0;t<this.Og.length;t+=1)this.Og[t].axis.j();for(let t=0;t<this.Vg.length;t+=1)this.Vg[t].axis.j();for(let t=0;t<this.Gg.length;t+=1)this.Gg[t].axis.j();for(let t=0;t<this.Ng.length;t+=1)this.Ng[t].axis.j();return super.j()}kk(t){if(this.sk.has(t))return this.sk.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);let e=Bc.freeform;t&&t.dataPattern&&(e="ProgressiveX"===t.dataPattern.pattern?Bc.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Bc.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Bc.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Bc.verticalRegressive:Bc.freeform);const h=new Gc(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,e,this.qi,this.us.es,hl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,t);return this.PS(h),h}addPointLineAreaSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);const e=new Yc(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,t);return this.PS(e),e}addPointSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);const e=t&&t.pointShape&&Object.values(zh).includes(t.pointShape)?"string"==typeof t.pointShape?zh[t.pointShape]:t.pointShape:zh.Square,h=new Wc(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,t);return this.PS(h),h}addPointLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);const e=t&&t.pointShape&&Object.values(zh).includes(t.pointShape)?"string"==typeof t.pointShape?zh[t.pointShape]:t.pointShape:zh.Square;let h=Bc.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?Bc.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Bc.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Bc.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Bc.verticalRegressive:Bc.freeform);const r=new Sc(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,h,e,this.qi,this.us.es,hl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,t);return this.PS(r),r}addStepSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);const e=t&&t.pointShape?t.pointShape:zh.Square,h=t&&t.mode?t.mode:gc.before,r=new Lc(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,e,h,this.qi,this.us.es,hl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,t);return this.PS(r),r}addSplineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);const e=t&&t.pointShape?t.pointShape:zh.Square;let h=Bc.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?Bc.horizontalProgressive:"RegressiveX"===t.dataPattern.pattern?Bc.horizontalRegressive:Bc.freeform);const r=new xc(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,h,e,this.qi,this.us.es,hl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,t);return this.PS(r),r}addRectangleSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);const e=new Ju(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length);return this.PS(e),e}addPolygonSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),e=new Zu(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length);return this.PS(e),e}addSegmentSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);const e=new qu(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length);return this.PS(e),e}addEllipseSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);const e=new Xu(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length);return this.PS(e),e}addBoxSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);const e=t&&t.dimensionStrategy?t.dimensionStrategy:ko,h=new Hu(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length);return this.PS(h),h}addHeatmapGridSeries(t){const i=t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t.yAxis?t.yAxis:this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new sc(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,t,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length),this.PS(e),e}addHeatmapScrollingGridSeries(t){const i=t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t.yAxis?t.yAxis:this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new hc(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,t,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length),this.PS(e),e}addOHLCSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Kc(i,s);const e=new(t&&t.type?t.type:Vc.Candlesticks)(this,this._S,this.Rb,i,s,this.kk(i),this.kk(s),this.nm,this.qi,this.us.es);return this.PS(e),e}addOnScreenMenu(t,i){return new Uc(this.cA,t,this,i)}setMouseBackgroundStyle(t=Pe.Default){return this.yk=t,this}setMouseZoomStyle(t=Pe.ZoomIn){return this.Sk=t,this}setMouseFitStyle(t=Pe.Default){return this.vk=t,this}setMousePanStyle(t=Pe.Move){return this.pk=t,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.ek=t,this}getMouseInteractionRectangleZoom(){return this.ek}setMouseInteractionRectangleFit(t){return this.hk=t,this}getMouseInteractionRectangleFit(){return this.hk}setMouseInteractionPan(t){return this.nk=t,this}getMouseInteractionPan(){return this.nk}setMouseInteractionWheelZoom(t){return this.rk=t,this}getMouseInteractionWheelZoom(){return this.rk}setZoomingRectangleFillStyle(t){return this.fk="function"==typeof t?t(this.fk):t,this.us.Ss(),this}getZoomingRectangleFillStyle(){return this.fk}setZoomingRectangleStrokeStyle(t){return this.Ak="function"==typeof t?t(this.Ak):t,this.us.Ss(),this}getZoomingRectangleStrokeStyle(){return this.Ak}setFittingRectangleFillStyle(t){return this.gk="function"==typeof t?t(this.gk):t,this.us.Ss(),this}getFittingRectangleFillStyle(){return this.gk}setFittingRectangleStrokeStyle(t){return this.mk="function"==typeof t?t(this.mk):t,this.us.Ss(),this}getFittingRectangleStrokeStyle(){return this.mk}addLegendBox(t,i){const s=super.addLegendBox(t,i);if(void 0===i||i===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(De.RightCenter).setPosition({x:this.uiScale.x.ut(this.uiScale.x.hi()-this.ya.right),y:ft(this.ik.y.ut(this.ik.y.ei()+this.ik.y.ri()/2),this.ik.y,this.uiScale.y)});else{const t=this.xk||ed,i=rd(t,this.uiScale.Wi(),this.ya,this.getTitleFillStyle()===O||0===this.getTitle().length?{x:0,y:0}:this._m.Ps().jc(),m(hd(t),this.bm),this.ya).marginsWithTitle.top;s.setOrigin(De.RightTop).setPosition(At({x:this.pixelScale.x.getInnerEnd()-this.ya.right,y:this.pixelScale.y.getInnerEnd()-i},this.pixelScale,this.uiScale))}return s}Ik(t,i){this.forEachAxis(Qc);const s=At(this.engine.clientLocation2Engine(i.x,i.y),this.xm.us.dt,this.ik);this.uk.Fe(s).q(n(0,0))}Pk(t,i,s){const e=At(this.engine.clientLocation2Engine(i.x,i.y),this.xm.us.dt,this.ik),h=At(this.engine.clientLocation2Engine(s.x,s.y),this.xm.us.dt,this.ik),r=Qi(h.x,this.ik.x.getInnerStart(),this.ik.x.getInnerEnd())&&Qi(h.y,this.ik.y.getInnerStart(),this.ik.y.getInnerEnd()),o=n(Math.min(e.x,h.x),Math.min(e.y,h.y)),a=n(Math.max(e.x,h.x),Math.max(e.y,h.y));this.uk.Fe(o).q(fs(a,o));const l=Math.min(a.x-o.x,a.y-o.y)>=10;r&&l&&a.x===e.x&&this.hk?(this.Tk=!0,this.uk.Ce(this.gk).we(this.mk),this.ck.Re(this.mk).Ve(e).ze(h),this.dk.Re(this.mk).Ve(n(e.x,h.y)).ze(n(h.x,e.y)),this.bk=this.engine.setMouseStyle(this.vk,this.bk)):r&&l&&(this.ek||this.hk)?(this.Tk=!0,this.uk.Ce(this.fk).we(this.Ak),this.ck.Re(at),this.dk.Re(at),this.bk=this.engine.setMouseStyle(this.Sk,this.bk)):(this.Tk=!1,this.uk.we(at).Ce(O),this.ck.Re(at),this.dk.Re(at),this.engine.restoreMouseStyle(this.bk)),this.us.Ss()}Bk(t,i,s){if(this.Tk){const t=At(this.engine.clientLocation2Engine(s.x,s.y),this.xm.us.dt,this.ik),e=Qi(t.x,this.ik.x.getInnerStart(),this.ik.x.getInnerEnd())&&Qi(t.y,this.ik.y.getInnerStart(),this.ik.y.getInnerEnd()),h=s.x>=i.x||!this.hk?"zoom":"fit",r=this.uk.Fa(),n=ds(r,this.uk.oi()),o=Math.min(this.uk.oi().x,this.uk.oi().y)>=10;e&&o&&"zoom"===h&&this.ek?(this.forEachAxisX((t=>{if(t.getChartInteractionZoomByDrag()){const i=At(r,this.ik,t.ng).x,s=At(n,this.ik,t.ng).x;t.St(i,s,!0,!0,"interactionSetInterval")}})),this.forEachAxisY((t=>{if(t.getChartInteractionZoomByDrag()){const i=At(r,this.ik,t.ng).y,s=At(n,this.ik,t.ng).y;t.St(i,s,!0,!0,"interactionSetInterval")}}))):e&&o&&"fit"===h&&this.hk&&this.forEachAxis(Jc)}this.uk.we(at).Ce(O),this.ck.Re(at),this.dk.Re(at),this.us.Ss()}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}Dk(t){this.forEachAxisX((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(Qc),this.forEachAxisX((s=>{s.zoom(s.dt.ut(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.dt.ut(t.y),i.y)}))}Lk(t,i){this.forEachAxisX((s=>{s.getChartInteractionZoomByWheel()&&(Qc(s),s.zoom(s.dt.ut(t.x),i.x))})),this.forEachAxisY((s=>{s.getChartInteractionZoomByWheel()&&(Qc(s),s.zoom(s.dt.ut(t.y),i.y))}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}Zd(){const t=[];return this.forEachAxis((i=>i.vg((i=>t.push(i))))),super.Zd().concat(t)}VC(){return this.lk}me(){return this.Cm(this.Rb)}setAutoCursorEnabledDuringAxisAnimation(t){return this.ak=t,this}getAutoCursorEnabledDuringAxisAnimation(){return this.ak}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,h=i,r=Fo(h)?h:$s(h)?this.pixelScale:void 0;if(r&&Ys(s)){const t=At(e,r,this.engine.scale);return this.us.Do({engineX:t.x,engineY:t.y})}if(r&&$s(s))return At(e,r,this.pixelScale);if(r&&Fo(s))return At(e,r,s)}else{const s=t;if($s(i)){const t=this.us.Po(s);return At({x:t.engineX,y:t.engineY},this.engine.scale,this.pixelScale)}if(Fo(i)){const t=i,e=this.us.Po(s);return At({x:e.engineX,y:e.engineY},this.engine.scale,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}!function(t){t.CenterTop="center-top",t.RightTop="right-top",t.LeftTop="left-top",t.CenterBottom="center-bottom",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.SeriesCenterTop="series-center-top",t.SeriesRightTop="series-right-top",t.SeriesLeftTop="series-left-top",t.SeriesCenterBottom="series-center-bottom",t.SeriesRightBottom="series-right-bottom",t.SeriesLeftBottom="series-left-bottom"}(id||(id={}));const ed=id.CenterTop,hd=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return Ti(0,`Unexpected ChartXY title position selection ${t}`)},rd=(t,i,s,e,h,r)=>{e.x,h.left,h.right;const n=e.y+h.bottom+h.top,o=(h.left-h.right)*i.x,a=(h.bottom-h.top)*i.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(r.top+h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:s.left*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-s.right*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:s.left*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-s.right*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s}}return Ti(0,`Unexpected ChartXY title position selection ${t}`)},nd=(t,i)=>{const s=[];t.forEach(((t,e)=>{const h=i[e],r=s.find((i=>i.iParallel===t.iParallel));r?(r.stacks.push({...t,...h}),r.stacks.sort(((t,i)=>t.iStack-i.iStack))):s.push({iParallel:t.iParallel,stacks:[{...t,...h}]})}));const e=s.map((t=>{const i=t.stacks.reduce(((t,i)=>Math.max(t,i.kg)),0),s=t.stacks.reduce(((t,i)=>Math.max(t,i.Tg)),0),e=t.stacks.reduce(((t,i)=>Math.max(t,i.Vd)),0),h=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"relative"in i.axis.zd?i.axis.zd.relative:0)),0);return{...t,ticksSizeMax:i,titleSizeMax:s,sumRelativeSize:h,thicknessMax:e}}));return e.sort(((t,i)=>t.iParallel-i.iParallel)),{groups:e,thicknessTotal:e.reduce(((t,i)=>t+i.thicknessMax),0)}},od=t=>t instanceof Gu||t instanceof oc||t instanceof Ac||t instanceof sc||t instanceof Rc||t instanceof Lc||t instanceof Yc;class ad{constructor(t,i,e,h,r,n,o){this.coordsRelative="relative",this.coordsClient="client",this.D=new s,this.jk=[],this.Zk=new Map,this.xS=new Map,this.Qk=(t,i,s)=>{0!==this.xS.size&&void 0!==[...this.xS.values()].find((({series:t})=>!0===t.getVisible()))||this.Jk.St(i,s,!1,!1,"zoomBandChart"),this.Kk.us.Ss()},i.us.Nn(_o.ff),this.cA=t,this.qk=(null==n?void 0:n.orientation)||"x",this.tT=void 0!==(null==n?void 0:n.useSharedValueAxis)&&n.useSharedValueAxis,this.iT=h,this.Wu="x"===this.qk?ko:To;const a={...n,defaultAxisX:this.Wu.getWidth({x:null==n?void 0:n.defaultAxis,y:void 0}),defaultAxisY:this.Wu.getHeight({x:null==n?void 0:n.defaultAxis,y:void 0})};this.Kk=new sd(t,i,e,Bt,r,a,o).setTitle("Zoom Band Chart").setMouseInteractions(!1).setAutoCursorMode(va.disabled),this.engine=this.Kk.engine;const l=this.Kk.getDefaultAxisX().setMouseInteractions(!1),u=this.Kk.getDefaultAxisY().setMouseInteractions(!1);this.Jk=this.Wu.getWidth({x:l,y:u}).setScrollStrategy(Ye.fitting).setAnimationScroll(!1).setStrokeStyle(at).setTickStrategy(He.Empty),(null==n?void 0:n.useSharedValueAxis)?this.sT=this.Wu.getHeight({x:l,y:u}):this.Wu.getHeight({x:l,y:u}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new U({color:this.getTheme().isDark?v(0,0,0,180):v(255,255,255,180)});this.eT=[this.Kk.bA.ke(this.Jk.ng).Ce(c).we(at),this.Kk.bA.ke(this.Jk.ng).Ce(c).we(at)];const d=this.Kk.bA.Lg(this.Jk.ng).Re(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.hT={collection:d,members:new Array(5).fill(0).map((t=>d.zr()))};const f=this.getTheme(),A="function"==typeof f.zoomBandChartKnobFillStyle?f.zoomBandChartKnobFillStyle(this.cA.$s):f.zoomBandChartKnobFillStyle||O;this.rT=[this.Kk.bA.ke(this.Kk.pixelScale).Ce(A).we(at),this.Kk.bA.ke(this.Kk.pixelScale).Ce(A).we(at)],this.nT=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.oT()}add(t){var i,s,e,h,r;const n=this.jk.map((t=>t.axis)),o="x"===this.qk?t.axisX:t.axisY;if(!n.includes(o)){const t=o.onIntervalChange(this.Qk);this.jk.push({axis:o,deattach:()=>{o.offIntervalChange(t)}}),this.Jk.$h(o.Hh()),this.aT&&this.aT.remove(),this.aT=St(...this.jk.map((t=>t.axis)))}const a=this.Wu.getHeight({x:t.axisX,y:t.axisY});let l;if(this.tT)l=this.sT;else{const t=this.Zk.get(a);t?l=t:(l=this.Wu.getHeight({x:this.Kk.addAxisX.bind(this.Kk),y:this.Kk.addAxisY.bind(this.Kk)})(),this.lT(l)),this.Zk.set(a,l)}const u=this.Wu.getWidth({x:this.Jk,y:l}),c=this.Wu.getHeight({x:this.Jk,y:l});let d;const f=[],A=(t,i)=>{const s=t=>{if(0!==t.length)if("x"in t[0]){const s=t;i.add(s)}else{const s=t,e=[];for(let t=0;t<s.length;t+=1){const i=s[t];e.push({x:i[0],y:i[4]})}i.add(e)}},e=t.r_();s(e);const h=t.n_(((t,i)=>s(i)));f.push((()=>t.o_(h)));const r=t.a_((()=>i.clear()));f.push((()=>{t.l_(r)}))};if(t instanceof Yc)d=this.Kk.addPointLineAreaSeries({...t.Un,xAxis:u,yAxis:c}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setCurvePreprocessing(t.getCurvePreprocessing()),d.setDataSet(t.tk());else if(t instanceof Gc||t instanceof Rc){const s=this.Kk.addLineSeries({xAxis:u,yAxis:c,dataPattern:t instanceof Gc?null===(i=t.Un)||void 0===i?void 0:i.dataPattern:void 0});if(t instanceof Gc)s.setStrokeStyle(t.getStrokeStyle());else{const i=ld(t);i&&s.setStrokeStyle(i)}A(t,s),d=s}else if(t instanceof lc){const i=this.Kk.addAreaSeries({xAxis:u,yAxis:c,baseline:t.Mw}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());A(t,i),d=i}else if(t instanceof Wc){const i=this.Kk.addPointSeries({xAxis:u,yAxis:c,pointShape:null===(s=t.Un)||void 0===s?void 0:s.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Lc){const i=this.Kk.addStepSeries({xAxis:u,yAxis:c,pointShape:null===(e=t.Un)||void 0===e?void 0:e.pointShape,mode:t.$w}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof xc){const i=this.Kk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(h=t.Un)||void 0===h?void 0:h.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Sc){const i=this.Kk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(r=t.Un)||void 0===r?void 0:r.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Ac){const i=this.Kk.addAreaRangeSeries({xAxis:u,yAxis:c}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.r_()),s=t.n_(((t,s)=>i.add(s)));f.push((()=>t.o_(s))),d=i;const e=t.a_((()=>i.clear()));f.push((()=>{t.l_(e)}))}else{if(!(t instanceof ic))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const i=this.Kk.addHeatmapGridSeries({xAxis:u,yAxis:c,...t.F_}),s=()=>{i.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};s(),d=i,t.D_(d);const e=t.R_(((t,s)=>i.invalidateIntensityValues(s))),h=t.B_(s);f.push((()=>{t.E_(e),t.L_(h)}));const r=t.a_((()=>i.clear()));f.push((()=>{t.l_(r)}))}}d.setMouseInteractions(!1);const g=t.onVisibleStateChanged(((t,i)=>{d.setVisible(i)}));f.push((()=>{t.offVisibleStateChanged(g)}));const m=t.onHighlight(((t,i)=>d.setHighlight(i)));f.push((()=>{t.offHighlight(m)}));const y=t.onDispose((()=>{this.disposeSeries(t)}));return f.push((()=>{t.offDispose(y)})),this.xS.set(t,{series:d,clearReferences:()=>f.forEach((t=>t()))}),d}disposeSeries(t){const i=this.xS.get(t);if(i){const{clearReferences:s}=i;s(),this.xS.delete(t),i.series.dispose();const e=this.Wu.getHeight({x:t.axisX,y:t.axisY}),h=this.Zk.get(e);h&&0===h._g().length&&(this.Zk.delete(e),h.dispose())}const s="x"===this.qk?t.axisX:t.axisY;if(!Array.from(this.xS.keys()).find((t=>s===("x"===this.qk?t.axisX:t.axisY)))){const t=this.jk.findIndex((t=>t.axis===s));this.jk[t].deattach(),this.jk.splice(t,1)}return this}setDefocusOverlayFillStyle(t){return this.eT.forEach((i=>i.Ce(t))),this.Kk.us.Ss(),this}getDefocusOverlayFillStyle(){return this.eT[0].Eh()}setSplitterStrokeStyle(t){return this.hT.collection.Re(t),this.Kk.us.Ss(),this}getSplitterStrokeStyle(){return this.hT.collection.uu()}setKnobFillStyle(t){return this.rT.forEach((i=>i.Ce(t))),this.Kk.us.Ss(),this}getKnobFillStyle(){return this.rT[0].Eh()}setKnobStrokeStyle(t){return this.rT.forEach((i=>i.we(t))),this.Kk.us.Ss(),this}getKnobStrokeStyle(){return this.rT[0].ao()}setKnobSize(t){return this.nT=t,this.Kk.us.Ss(),this}getKnobSize(){return this.nT}getDefaultAxisX(){return this.Kk.getDefaultAxisX()}getDefaultAxisY(){return this.Kk.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}lT(t){t.setTickStrategy(He.Empty).setMouseInteractions(!1).setNibStyle(at).setStrokeStyle(at)}oT(){let t;const i=(t,i,s)=>{var e,h;const r="x"===this.qk?null===(e=Array.from(this.xS.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.xS.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Jk.getInterval();Math.abs(this.Jk.dt.ct(t)-this.Jk.dt.ct(i))<10||Math.sign(i-t)!==Math.sign(n.end-n.start)||Math.min(t,i)<Math.min(o.start,o.end)||Math.max(t,i)>Math.max(o.start,o.end)&&Math.max(n.start,n.end)<Math.max(t,i)||r.St(t,i,s,!0,"zoomBandChart")};this.rT.forEach(((s,e)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(this.Wu.getWidth({x:Pe.Horizontal,y:Pe.Vertical}),t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const h=t=>{var s,h;const r="x"===this.qk?null===(s=Array.from(this.xS.keys())[0])||void 0===s?void 0:s.axisX:null===(h=Array.from(this.xS.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=this.Wu.getWidth(this.Kk.translateCoordinate(t,this.Kk.coordsAxis)),o=r.getInterval(),a=0===e?n:o.start,l=1===e?n:o.end;i(a,l,!1),ii(t)};s.setMouseDragEventHandler(((t,i,s,e,r)=>h(i)));const r=Ks(new te(void 0,((t,i,s,e,r)=>h(r))));s.setTouchStartEventHandler(r.onTouchStart),s.setTouchMoveEventHandler(r.onTouchMove),s.setTouchEndEventHandler(r.onTouchEnd)})),this.Kk.onSeriesBackgroundMouseEnter((()=>{t=this.engine.setMouseStyle(Pe.Move,t)})),this.Kk.onSeriesBackgroundMouseLeave((()=>{this.engine.restoreMouseStyle(t)}));const s=(t,s)=>{var e,h;const r="x"===this.qk?null===(e=Array.from(this.xS.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.xS.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Jk.dt.mi(n.start,this.Wu.getWidth(t)),a=this.Jk.dt.mi(n.end,this.Wu.getWidth(t));i(o,a,!1),ii(s)};this.Kk.onSeriesBackgroundMouseDrag(((t,i,e,h,r)=>s(r,i)));const e=Ks(new te(void 0,((t,i,e,h,r)=>s(h,r))));this.Kk.onSeriesBackgroundMouseWheel(((t,s)=>{var e,h;const r="x"===this.qk?null===(e=Array.from(this.xS.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.xS.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Jk.getInterval(),a=this.Wu.getWidth(this.Kk.translateCoordinate(s,this.Kk.coordsAxis)),l=this.Jk.dt.ct(n.start),u=this.Jk.dt.ct(n.end),c=this.Jk.dt.ct(a),d=Rt((c-l)/(u-l),0,1),f=.2*Math.abs(u-l)*r.Rf,A=d*f*-Math.sign(s.deltaY),g=(1-d)*f*Math.sign(s.deltaY),m=Rt(this.Jk.dt.mi(n.start,A),o.start,o.end),y=Rt(this.Jk.dt.mi(n.end,g),o.start,o.end);i(m,y,!1),ii(s)})),this.Kk.onSeriesBackgroundTouchStart(e.onTouchStart),this.Kk.onSeriesBackgroundTouchMove(e.onTouchMove),this.Kk.onSeriesBackgroundTouchEnd(e.onTouchEnd),this.eT.forEach(((s,e)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(Pe.Point,t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const h=t=>{var s,e;const h="x"===this.qk?null===(s=Array.from(this.xS.keys())[0])||void 0===s?void 0:s.axisX:null===(e=Array.from(this.xS.keys())[0])||void 0===e?void 0:e.axisY;if(!h)return;const r=this.Wu.getWidth(this.Kk.translateCoordinate(t,this.Kk.coordsAxis)),n=h.getInterval(),o=this.Jk.getInterval(),a=Rt(r-(n.end-n.start)/2,Math.min(o.start,o.end),Math.max(o.start,o.end)-Math.abs(n.end-n.start)),l=a+(n.end-n.start);i(a,l,!0),ii(t)};s.setMouseClickEventHandler(((t,i)=>h(i)));const r=Ks(new class{constructor(t,i=300){this.Ds=!1,this.Bs=[],this.Ls=300,this.Rs=t,this.Ls=i}Is(t,i){const s=Tt.performance.now();let e=!1;for(let t=0;t<this.Bs.length;t+=1)s-this.Bs[t].time>=this.Ls?(this.Bs.splice(t,1),t-=1):this.Bs[t].state&&(e=!0);return this.Ds?0===i.interactions.length&&(this.Bs.push({state:!1,time:s}),this.Ds=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Bs.push({state:!0,time:s}),e=!0,this.Ds=!0),e}Ps(t,i,s){if(s&&!this.Ds){const s=this.Bs.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=1&&s.off>=1&&(this.Rs(t,i),this.Bs.length=0)}}}(((t,i)=>h(i))));s.setTouchStartEventHandler(r.onTouchStart),s.setTouchMoveEventHandler(r.onTouchMove),s.setTouchEndEventHandler(r.onTouchEnd)}))}getSizePixels(){return this.Kk.getSizePixels()}onResize(t){return this.Kk.onResize(((i,s,e,h,r)=>t(this,s,e,h,r)))}offResize(t){return this.Kk.offResize(t)}Fr(t){this.Kk.Fr(t)}getMinimumSize(){return this.Kk.getMinimumSize()}j(){return this.Kk.j()}Z(){return this.Kk.Z()}Te(t){var i,s,e,h;const r=_i(Array.from(this.xS.keys()).map((t=>t.chart))),n="x"===this.qk?null===(i=Array.from(this.xS.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this.xS.keys())[0])||void 0===s?void 0:s.axisY;if("x"===this.qk){const t=r.reduce(((t,i)=>{let s=0;return i.forEachAxisY((t=>{s+=0===t.sg?t.Ug():0})),Math.max(t,s)}),0),i=r.reduce(((t,i)=>{let s=0;return i.forEachAxisY((t=>{s+=100===t.sg?t.Ug():0})),Math.max(t,s)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=r.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);null===(e=this.getDefaultAxisY())||void 0===e||e.setThickness(t),this.Kk.setPadding({left:s+(0===r.length?10:0),right:h+i+(0===r.length?10:0)})}else{const t=r.reduce(((t,i)=>{let s=0;return i.forEachAxisX((t=>{s+=0===t.sg?t.Ug():0})),Math.max(t,s)}),0),i=r.reduce(((t,i)=>{let s=0;return i.forEachAxisX((t=>{s+=100===t.sg?t.Ug():0})),Math.max(t,s)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),e=r.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);null===(h=this.getDefaultAxisX())||void 0===h||h.setThickness(t),this.Kk.setPadding({bottom:s+(0===r.length?10:0),top:e+i+(0===r.length?10:0)})}this.Kk.Te(t);const o=this.Jk.getInterval().start,a=this.Jk.getInterval().end,l=Rt(n?n.getInterval().start:o,o,a),u=Rt(n?n.getInterval().end:a,o,a),c=this.Wu.getHeight(this.Kk.ik.getInnerIntervalPixels());this.eT[0].Fe(this.Wu.toPoint(o,0)).q(this.Wu.toPoint(l-o,c)),this.eT[1].Fe(this.Wu.toPoint(u,0)).q(this.Wu.toPoint(a-u,c)),this.hT.members[0].Eg(this.Wu.toPoint(o,c),this.Wu.toPoint(l,c)),this.hT.members[1].Eg(this.Wu.toPoint(l,c),this.Wu.toPoint(l,0)),this.hT.members[2].Eg(this.Wu.toPoint(l,0),this.Wu.toPoint(u,0)),this.hT.members[3].Eg(this.Wu.toPoint(u,0),this.Wu.toPoint(u,c)),this.hT.members[4].Eg(this.Wu.toPoint(u,c),this.Wu.toPoint(a,c));const d=At(this.Wu.toPoint(l,c/2),this.Jk.ng,this.Kk.pixelScale),f=At(this.Wu.toPoint(u,c/2),this.Jk.ng,this.Kk.pixelScale),A=this.nT;this.rT[0].Fe({x:d.x-A.x/2,y:d.y-A.y/2}).q({x:A.x,y:A.y}).Nh(this.Wu.getWidth({x:0,y:90})),this.rT[1].Fe({x:f.x-A.x/2,y:f.y-A.y/2}).q({x:A.x,y:A.y}).Nh(this.Wu.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.Kk.setSeriesBackgroundFillStyle(t),this.Kk.us.Ss(),this}getSeriesBackgroundFillStyle(){return this.Kk.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.Kk.setSeriesBackgroundStrokeStyle(t),this.Kk.us.Ss(),this}getSeriesBackgroundStrokeStyle(){return this.Kk.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.Kk.setSeriesBackgroundEffect(t),this.Kk.us.Ss(),this}getSeriesBackgroundEffect(){return this.Kk.getSeriesBackgroundEffect()}getTheme(){return this.Kk.getTheme()}setTitle(t){return this.Kk.setTitle(t),this}getTitle(){return this.Kk.getTitle()}setTitleFillStyle(t){return this.Kk.setTitleFillStyle(t),this}getTitleFillStyle(){return this.Kk.getTitleFillStyle()}setTitleFont(t){return this.Kk.setTitleFont(t),this}getTitleFont(){return this.Kk.getTitleFont()}setTitleMargin(t){return this.Kk.setTitleMargin(t),this}getTitleMargin(){return this.Kk.getTitleMargin()}setPadding(t){return this.Kk.setPadding(t),this}getPadding(){return this.Kk.getPadding()}setBackgroundFillStyle(t){return this.Kk.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.Kk.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.Kk.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.Kk.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return fa(t,i,s,this.Kk.pixelScale,this.Kk.us)}addUIElement(t,i){return this.Kk.addUIElement(t,i)}addLegendBox(t,i){return this.Kk.addLegendBox(t,i)}getLegendBoxes(){return this.Kk.getLegendBoxes()}saveToFile(t,i,s){return this.Kk.saveToFile(t,i,s),this}dispose(){return this.Kk.dispose(),this.Zk.clear(),this.xS.clear(),this.iT(this),this}isDisposed(){return this.Kk.isDisposed()}onDispose(t){return this.Kk.onDispose((()=>t(this)))}offDispose(t){return this.Kk.offDispose(t)}}const ld=t=>{if("getStrokeStyle"in t)return t.getStrokeStyle();const i=(t=>t instanceof Gc||t instanceof lc?t.getStrokeStyle().getFillStyle():t instanceof Wc||t instanceof Sc?t.getPointFillStyle():void 0)(t);return i?new ee({thickness:2,fillStyle:i}):void 0};class ud extends au{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.xs="Point Series",this.Vx=[],this.Ox=!1,this.Hx=3,this.Aa=0,this.Wy=lu,this.be=Si(this.qi.polarPointSeriesFillStyle,r),this.od=new vn({dataPattern:null}),this.Na=t.dd(e).Re(at).ud(O).ld(this.be).fd(zh.Circle).pd(this.Hx).cs(this.getHighlight()).ad(this.od),this.ds(this.Na)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){return 0!==this.Vx.length&&this.Ji.us.Nn(_o.vf),this.Vx=du(t),this.Ox=!0,this.Bx=cu(this.Vx),this.ks.Ss(),this}setPointAlignment(t){return this.Na.JC(t),this.Ji.us.Ss(),this}getPointAlignment(){return this.Na.KC()}setPointFillStyle(t){this.be="function"==typeof t?t(this.be):t;const i=this.be;return this.Na.ld(i),this.ks.Ss(),this}getPointFillStyle(){return this.be}setPointSize(t){return this.Hx=t,this.Na.pd(t),this.ks.Ss(),this}getPointSize(){return this.Hx}setPointShape(t){return this.Na.fd(t),this.Ji.us.Ss(),this}getPointShape(){return this.Na.Ad()}setPointRotation(t){return this.Aa=t,this.Na.gd(t),this.ks.Ss(),this}getPointRotation(){return this.Aa}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}Ie(t,i){t.cs(i),this.ks.Ss()}Hc(t,i){const s=At(t,this.Ji.us.dt,this.scale),e=this.od.Hc(s,!1,this.scale,this.Ji.pixelScale);if(!e)return;const{angle:h,amplitude:r}=fu(e,this.scale);return Ya(e,this.scale,this.Wy(new Ta,this,h,r,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,"color"in e&&void 0!==e.color&&$(this.be)?new U({color:_(e.color)}):this.be)}solveNearestFromScreen(t){return this.Hc(vo(t,this.Ji.us),!1)}Te(){if(this.Ox||this.scale.Yx()){const t=uu(this.Vx,this.scale),i=is(t);this.od.clear().add(t),this.Na.Yo(i),this.Ox=!1,this.Na.Ps()}}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{fill:this.be}),this}Cs(){return this.bs||this.getPointShape()}}class cd{constructor(t,i,e,h){this.D=new s,this.uT=!1,this.Ji=t,this.cT=i,this.xS=e,this.Na=h}setGeometry(t){return this.dT=t,this.uT=!0,this.Ji.us.Ss(),this}getGeometry(){return this.dT}setMouseInteractions(t){return this.Na.setMouseInteractions(t),this}dispose(){return this.Na.dispose(),this.cT(this),this.D.emit("dispose",this),this}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setVisible(t){const i=this.Na.getVisible()!==t;return this.Na.setVisible(t),i&&this.D.emit("visibleStateChanged",this,t),this.Ji.us.Ss(),this}getVisible(){return this.Na.getVisible()}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}}class dd extends au{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.xs="Polygon Series",this.fT=[],this.AT=[],this.Wy=lu,this.gT=t=>{const i=this.AT.indexOf(t);i>=0&&this.AT.splice(i,1);const s=this.fT.findIndex((i=>i===t.Na));s>=0&&this.fT.splice(s,1),this.ks.Ss()},this.be=Si(this.qi.polarPolygonSeriesFillStyle,r),this.xe=Si(this.qi.polarPolygonSeriesStrokeStyle,r)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}addPolygon(){const t=new cd(this.Ji,this.gT,this,this.mT());return this.AT.push(t),t}setFillStyle(t){this.be="function"==typeof t?t(this.be):t;const i=this.be;for(const t of this.fT)t.Ce(i);return this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){this.xe="function"==typeof t?t(this.xe):t;const i=this.xe;for(const t of this.fT)t.we(i);return this.ks.Ss(),this}getStrokeStyle(){return this.xe}Kp(){return this.tS&&void 0!==this.AT.find((t=>void 0!==t.yT))&&this.getVisible()}Te(){this.AT.forEach((t=>{(t.uT||this.scale.Yx())&&t.pT&&(t.Na.pl(uu(t.pT,this.scale)),t.uT=!1,t.Na.Ps())}))}oS(){super.oS();const t=c(Oi,Ni);this.AT.forEach((i=>{if(!i.dT)return;const s=!i.uT&&i.pT?i.pT:du(i.dT);i.pT=s;const e=!i.uT&&i.yT?i.yT:cu(s);i.yT=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.Bx=t}Ie(t,i){t.cs(i),this.ks.Ss()}Hc(t,i){const s=Wu(t,this.fT,((t,i)=>{const s=t.Hc(i);if(s)return At(s,this.scale,t.us.dt)}),Ji);if(!s)return;const e=At(s[0],s[1].us.dt,this.scale),h=this.ST(s[1]);if(!h)return;const{angle:r,amplitude:n}=fu(e,this.scale);return{location:e,scale:this.scale,resultTableContent:this.Wy(new Ta,this,r,n,this.Ji.getAmplitudeAxis().formatValue).Zu(),owner:this,fillStyle:this.be,polarPolygon:h}}solveNearestFromScreen(t){return this.Hc(vo(t,this.Ji.us),!1)}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{fill:this.be,stroke:this.xe}),this}mT(){const t=this.ks.ic(this.scale,fr.Simple).Ce(this.be).we(this.xe).cs(this.getHighlight());return this.fT.push(t),this.ds(t),t}ST(t){return this.AT.find((i=>i.Na===t))}}class fd extends au{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.xs="Area Series",this.Vx=[],this.Ox=!1,this.Nx=!1,this.vT=!1,this.Wy=lu,this.be=Si(this.qi.polarAreaSeriesFillStyle,r),this.xe=Si(this.qi.polarAreaSeriesStrokeStyle,r)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){0!==this.Vx.length&&this.Ji.us.Nn(_o.vf);const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(Lt(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.vT&&(console.warn(`${this.xs} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.vT=!0),this.Vx=i.progressivePoints,this.Ox=!0,this.Bx=cu(this.Vx),this.ks.Ss(),this}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.ks.Ss(),this}getStrokeStyle(){return this.xe}setConnectDataAutomaticallyEnabled(t){return this.Nx=t,this.ks.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Nx}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{fill:this.be,stroke:this.xe}),this}}class Ad extends fd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.bT=this.ks.ic(this.scale,fr.Simple).cs(this.getHighlight()),this.ds(this.bT)}Te(){if(this.Ox||this.scale.Yx()){const t=this.Vx,i=!0===this.Nx?uu(t.concat((t=>{if(0===t.length)return t;const i=t[0],s=t[t.length-1];if(Lt(i.angle,s.angle))return t;const e=1*Math.sign(s.angle-i.angle);let h=0;const r=[];for(let t=s.angle+e;!Lt(t%360,i.angle%360);t+=e)if(r.push({angle:t,amplitude:0}),h+=1,h>360)return[];for(let t=0;t<r.length;t+=1)r[t].amplitude=Hr(s.amplitude,i.amplitude,(t+1)/(r.length+1));return r})(t)),this.scale):[...uu(t,this.scale),{x:0,y:0}];this.bT.pl(i).Ce(this.be).we(this.xe),this.Ox=!1,this.bT.Ps()}}Ie(t,i){t.cs(i),this.ks.Ss()}Hc(t,i){const s=this.bT.Hc(t);if(!s)return;const{angle:e,amplitude:h}=fu(s,this.scale);return Ya(s,this.scale,this.Wy(new Ta,this,e,h,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,this.be)}solveNearestFromScreen(t){return this.Hc(vo(t,this.Ji.us),!1)}}class gd extends Ns{constructor(){super(...arguments),this.Gi="RadialScale",this.xT={start:0,end:1},this.MT=!1,this._T=0,this.X=n(0,0),this.wT=[0,0],this.CT=[0,0],this.i=!0,this.vi=!0,this.kT=!0,this.TT=!0,this.FT={x:0,y:0},this.di={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}yx(t,i){return t===this.xT.start&&i===this.xT.end||(this.xT={start:t,end:i},this.kT=!0,this.IT()),this}mx(){return this.xT}gx(){return this.xT.end>=this.xT.start}wx(t){this.MT=t,this.TT=!0}kx(){return!1===this.MT}Cx(t){this._T=t,this.TT=!0}xx(){return this._T}yi(){return this.vi}_i(){return!1}ot(t,i,s,e){return this.x=new Vs(t.x,i.x,s.x,e?e.x:void 0),this.y=new Vs(t.y,i.y,s.y,e?e.y:void 0),this}pi(){return this.di}Yx(){return this.kT}PT(){return this.TT}Wi(){return this.FT}j(){return this.i=!1,this.vi=!1,this.kT=!1,this.TT=!1,this}Z(){return this.i=!0,this.vi=!0,this.kT=!0,this.TT=!0,this}q(t,i){return"object"==typeof t?(this.X.x=t.x,this.X.y=t.y):(this.X.x=t,this.X.y=i),this.IT(),this}Ei(t){return this.wT=t,this.IT(),this}zi(t){return this.CT=t,this.IT(),this}ni(){return n(this.wT[0]+this.wT[1],this.CT[0]+this.CT[1])}oi(){return this.X}IT(){const t=this.xT,i=n(this.x.ai(this.X.x),this.y.ai(this.X.y)),s=this.wT[0]+this.wT[1],e=this.CT[0]+this.CT[1],h=Math.max(i.x-s,0),r=Math.max(i.y-e,0),o=.5*(h>r?r:h),a=[this.wT[0]+Math.max((h-2*o)/2,0),this.wT[1]+Math.max((h-2*o)/2,0)],l=[this.CT[0]+Math.max((r-2*o)/2,0),this.CT[1]+Math.max((r-2*o)/2,0)],u=Math.abs(t.end-t.start);this.x.q(this.X.x).si(a).J(-u,u),this.y.q(this.X.y).si(l).J(-u,u),this.FT={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.di={x:this.x.pi(),y:this.y.pi()},this.Z()}mi(t,i){const s=this.Wi();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Ui(t,i,s,e){const h=this.Wi(),r=ls(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class md extends kl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.vm("polarChart bg",0),e,i.us.qi.polarChartBackgroundFillStyle,i.us.qi.polarChartBackgroundStrokeStyle,i.us.qi.polarChartTitleFont,i.us.qi.polarChartTitleFillStyle,n),this.coordsClient="client",this.Jf=[],this.Bo=!0,this.Gy=va.onHover,this.DT=(t,i,s,e,h)=>{this.Jb.q(e,h)},this.tA=ri(this.Jf),this.BT=t=>{this.Jf.push(t)},this.LT=()=>this.xS,this.us.Nn(_o.cf),this.Gk=i.ob("polarChart series bg",0),this.RT=i.$y("polarChart axis gridlines",0),this.ET=i.$y("polarChart series",1),this.zT=i.$y("polarChart axis lines",2),this.VT=i.$y("polarChart axis ticks",3),this.Jb=s.d2({scaleXYConstructor:gd}),this.onResize(this.DT),this._m.Rh("Polar Chart"),this.FS=this.Gk.Jc(this.Jb).Ce(this.qi.polarChartSeriesBackgroundFillStyle).we(at).eu(0).ze(360).ou(0),this.IS=this.Gk.Jc(this.Jb).Ce(O).we(this.qi.polarChartSeriesBackgroundStrokeStyle).eu(0).ze(360).ou(0),super.TS(this.FS,this.IS),this.Sm(h,this.pixelScale),this.OT=new ql(this,this.Jb,this.qi,!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled),this.RT,this.zT,this.VT,this.es,this.LT),this.NT=new iu(this,this.Jb,this.qi,!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled),this.RT,this.zT,this.VT,this.es),this.coordsAxis={axisAmplitude:this.OT,axisRadial:this.NT},this.jy=i.Zy();const o=zt(r?r.autoCursorBuilder:void 0,Wa);this.Pm=o.uy(this.jy,this.uiScale,this.uiScale,this.qi),ba.Dm(this),this.LS(((t,i)=>{ba.Bm(this,i)})),this.setAnimationsEnabled(!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled))}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}solveNearest(t){const i=t||this.us.On();if(i)return ba.Hc(this,vo(i,this.us),this.xS)}translateCoordinate(t,i,s){if(s){const i=t,e=this.pixelScale,h=s;if(Ys(h)){const t=At(i,e,this.engine.scale);return this.us.Do({engineX:t.x,engineY:t.y})}if($s(h))return i;if(hu(h)){const t=At(i,e,this.Jb);return fu(t,this.Jb)}}else{const s=t,e=i;if(Hs(s)){if(hu(e)){const t=this.us.Po(s),i=At({x:t.engineX,y:t.engineY},this.engine.scale,this.Jb);return fu(i,this.Jb)}if(Ys(e))return s;if($s(e)){const t=this.us.Po(s);return At({x:t.engineX,y:t.engineY},this.us.dt,this.pixelScale)}}else if(ru(s)){if(hu(e))return s;const t=uu([s],this.Jb)[0];if(Ys(e)){const i=At(t,this.Jb,this.engine.scale),s={engineX:i.x,engineY:i.y};return this.us.Do(s)}if($s(e))return At(t,this.Jb,this.pixelScale)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new mu(this.ET,this,this._S,this.Jb,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(i),i}addPointSeries(t){const i=new ud(this.ET,this,this._S,this.Jb,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(i),i}addPointLineSeries(t){const i=new yu(this.ET,this,this._S,this.Jb,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(i),i}addAreaSeries(t){const i=new Ad(this.ET,this,this._S,this.Jb,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(i),i}addPolygonSeries(t){const i=new dd(this.ET,this,this._S,this.Jb,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(i),i}addHeatmapSeries(t){const i=new Au(this.ET,this,this._S,this.Jb,this.qi,this.us.es,t);return this.PS(i),i}addSector(){const t=new nu(this.ET,this,this.tA,this.Jb,this.qi,this.us.es);return this.BT(t),t}getAmplitudeAxis(){return this.OT}get amplitudeAxis(){return this.OT}get axisAmplitude(){return this.OT}getRadialAxis(){return this.NT}get radialAxis(){return this.radialAxis}get axisRadial(){return this.radialAxis}Te(t){var i,s;super.Te(t),Sa.Fm(this._m,this.bm);for(const t of this.xS)t.oS();this.OT.Mr(),this.NT.Mr();for(const t of this.xS)t.Te();for(let t=1;t<=2;t+=1){const i=this.OT.Te(),s=this.NT.Te(),e=Sa.Tm(this._m,this.bm),h=[this.ya.left+s,this.ya.right+s],r=[this.ya.bottom+s,this.ya.top+s+e];this.Jb.Ei(h).zi(r);const n=4;if(!(!this.GT||Math.abs(this.GT.amplitude-i)>=n||Math.abs(this.GT.radial-s)>=n)||1!==t){this.GT={amplitude:i,radial:s};break}}const e=this.Jb.mx().start,h=this.Jb.mx().end,r=this.Jb.gx()?((null===(i=this.GT)||void 0===i?void 0:i.radial)||0)*this.Jb.x.getPixelSize()+h-e:((null===(s=this.GT)||void 0===s?void 0:s.radial)||0)*this.Jb.x.getPixelSize()+e-h;this.FS.hu(r).au(360),this.IS.hu(r).au(360);for(const t of this.Jf)t.Te();ba.Im(this,this.FS.getIsUnderMouse(),!1,this.xS,(t=>ba.Hc(this,t,this.xS)),((t,i)=>t.Hc(i,!0)));for(const t of this.xS)t.dp();return super.pm(),this.WT(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.OT.setAnimationsEnabled(t),this.NT.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Bo=t,this}getMouseInteractions(){return this.Bo}getMinimumSize(){return n(yd,yd)}WT(){}forEachAxis(t){return t(this.OT),t(this.NT),this}dispose(){return this.Jf.slice().forEach((t=>t.dispose())),this.Pm.dispose(),this.Gk.W(),this.RT.W(),this.ET.W(),this.zT.W(),this.VT.W(),this.jy.W(),super.dispose()}Zd(){return[...this.xS,...this.Jf]}}const yd=300;class pd extends Za{}class Sd extends pd{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.xs="Slice",this.u=0,this.gy=!1,this.UT=O,this.yy=O,this.py=this.u,this.by=K((()=>this.Ji.us.Ss())),this.My=()=>{this._y=void 0},this.index=t,this.Ji=e,this.scale=h,this.Ki=r,this.bT=i.ic(h,fr.Simple).cs(this.getHighlight()),this.ds(this.bT),this.Ue=s.Pr(h).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0})}setValue(t){return this.Ji.getAnimationsEnabled()?this.getVisible()&&this.Ty(this.py,t):this.py=t,this.u=t,this.Ji.us.Ss(),this}getValue(){return this.u}setVisible(t){return!1===t?this.Ji.getAnimationsEnabled()&&this.py>0?(this._y&&(this._y.finish(!1),this._y=void 0),this.Ty(this.py,0,(()=>super.setVisible(!1)))):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this._y&&(this._y.finish(!1),this._y=void 0),super.setVisible(!0),this.Ty(this.py,this.u)):(this.py=this.u,super.setVisible(!0)),this}Ty(t,i,s){this._y=this.by(300,Q.ease)([[t,i]],(([t])=>{this.py=t,this.Ji.us.Ss()})),this._y.onEveryAnimationEnd(this.My),s&&this._y.onAnimationEnd(s)}setStyle(t,i,s,e){this.UT=t,this.yy=s,this.bT.Ce(this.UT).we(i),this.Ue.Ce(this.yy).Oh(e);for(let t=0;t<this.Qi.length;t+=1)this.styleAttachedEntry(this.Qi[t])}getAnimatedValue(){return this.py}Ie(t,i){return t.cs(i),this.Ji.us.Ss(),this}attach(t,i=!0,s=!1){return super.attach(t,i,s),this.styleAttachedEntry(t,i,s),this}styleAttachedEntry(t,i=!0,s=!1){gi(t,this.qi,s,{fill:this.UT,stroke:this.bT.ao()})}}var vd;!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(vd||(vd={}));const bd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},xd=(t,i,s,e,h,r=0,n=vd.VariableHeight,o)=>{i=bd(i,e.x),s=bd(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,m=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;m+=t[i].getAnimatedValue();const o=n===vd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-m/l*e.y;if(n===vd.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const y=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const m=t[g];u+=m.getAnimatedValue();const p=n===vd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let S=0;g>0&&(c={x:f.x+y*r,y:f.y-r},d={x:A.x-y*r,y:A.y-r}),S=(i+u/l*(s-i))/2,f={x:o-S,y:parseInt(`${n===vd.VariableWidth?c.y-p:p}`,10)},A={x:o+S,y:parseInt(`${n===vd.VariableWidth?d.y-p:p}`,10)},d.x>=c.x&&A.x>f.x&&m.bT.pl([f,c,d,A])}};class Md extends pa{constructor(t,i,s,e,h,r,n){super(t,i,s,i.vm("funnelChart bg",0),e,i.us.qi.funnelChartBackgroundFillStyle,i.us.qi.funnelChartBackgroundStrokeStyle,i.us.qi.funnelChartTitleFont,i.us.qi.funnelChartTitleFillStyle,r),this.Fy=[],this.Iy=$a.None,this.By=!0,this.Ey=0,this.YT=80,this.HT=20,this.$T=0,this.XT=vd.VariableHeight,this.Oy=!0,this.Gy=va.onHover,this.Wy=ja,this.Uy=t=>{const i=this.Fy.indexOf(t);i>=0&&(this.Fy.splice(i,1),this.Yy())},this.us.Nn(_o.af),this.Ny=this.qi.effectsText,this.Hy=i.$y("funnelChart bottom",0),this.Xy=i.$y("funnelChart top",1),this._m.Rh("Funnel Chart"),this.Py=this.qi.funnelChartSliceFillStylePalette,this.Dy=this.qi.funnelChartSliceStrokeStyle,this.Ly=this.qi.funnelChartSliceLabelFont,this.Ry=this.qi.funnelChartSliceLabelFillStyle,this.jy=i.Zy();const o=zt(n?n.autoCursorBuilder:void 0,Ga);this.Pm=o.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.setAnimationsEnabled(!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled)),this.Sm(h,this.pixelScale)}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}addSlice(t,i){const s=new Sd(this.Ey,this.Hy,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);return this.Ey+=1,s.setName(t),s.setValue(i),s.es.rs.ps(this.Ny),s.es.ns.ps(this.Oy),this.Fy.push(s),this.us.Ss(),s.setHighlightOnHover(this.By),s.onMouseMove((()=>{this.Gy&&this.us.Ss()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Fy}setHeadWidth(t){return this.YT=t,this.us.Ss(),this}getHeadWidth(){return this.YT}setNeckWidth(t){return this.HT=t,this.us.Ss(),this}getNeckWidth(){return this.HT}setSliceGap(t){return this.$T=Math.min(Math.max(t,0),20),this.us.Ss(),this}setSliceMode(t){return this.XT=t,this.us.Ss(),this}getFunnelSliceMode(){return this.XT}setLUT(t){return this.Nd=t,this.us.Ss(),this}setSliceFillStyle(t){return this.Py=t,this.us.Ss(),this}getSliceFillStyle(){return this.Py}setSliceStrokeStyle(t){return this.Dy="function"==typeof t?t(this.Dy):t,this.us.Ss(),this}getSliceStrokeStyle(){return this.Dy}setSliceEffect(t){return this.Oy=t,this.Fy.forEach((i=>i.es.ns.ps(t))),this.us.Ss(),this}getSliceEffect(){return this.Oy}setSliceSorter(t){return this.Iy=t,this.Fy=this.Fy.sort(this.Iy),this.us.Ss(),this}getSliceSorter(){return this.Iy}setLabelFillStyle(t){return this.Ry="function"==typeof t?t(this.Ry):t,this.us.Ss(),this}getLabelFillStyle(){return this.Ry}setLabelFont(t){return this.Ly="function"==typeof t?t(this.Ly):t,this.us.Ss(),this}getLabelFont(){return this.Ly}setLabelEffect(t){return this.Ny=t,this.Fy.forEach((i=>i.es.rs.ps(t))),this.us.Ss(),this}getLabelEffect(){return this.Ny}setLabelFormatter(t){return this.Jy=t,this.us.Ss(),this}getLabelFormatter(){return this.Jy}setSliceHighlightOnHover(t){return this.By=t,this.Fy.forEach((i=>i.setHighlightOnHover(t))),this}Te(t){super.Te(t),Sa.Fm(this._m,this.bm),super.pm();const i=Sa.Tm(this._m,this.bm),s=n(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+i)),e=n(this.ya.left+s.x/2,this.ya.bottom+s.y/2);this.Fy=this.Fy.sort(this.Iy);for(let t=0,{length:i}=this.Fy;t<i;t+=1)this.Qy(this.Fy[t],t);const h=this.Fy.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.Ue.Rh(this.Jy(i,o[t])).Ps()}o.push(r),ba.Im(this,!1,!1,this.Fy,void 0,((t,i)=>Ya(i,this.engine.scale,this.Wy(new Ta,this,t,o[h.indexOf(t)]||0).Zu(),t,void 0))),this.Ky(h,o,e,s)}Qy(t,i){t.setStyle(this.Nd?new U({color:this.Nd.getColors(t.getAnimatedValue())}):this.Py(i,t),this.Dy,this.Ry,this.Ly)}Yy(){this.Fy=this.Fy.sort(this.Iy),this.us.Ss()}Zd(){return this.Fy}dispose(){return this.Fy.slice().forEach((t=>t.dispose())),this.Pm.dispose(),this.Hy.W(),this.Xy.W(),this.jy.W(),super.dispose()}}const _d=(t,i,s)=>{const e=t.Sl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===Fd.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},wd=t=>{const i=t.Sl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Cd extends Md{constructor(){super(...arguments),this.Jy=Xa.NamePlusValue,this.jT=10,this.ZT=Fd.Left,this.QT=Ha.LabelsOnSides,this.qy=[],this.ep=this.qi.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.ep=t;for(let t=0;t<this.qy.length;t+=1)this.qy[t].Re(this.ep);return this.us.Ss(),this}getLabelConnectorStyle(){return this.ep}setLabelConnectorGap(t){return this.jT=t,this.us.Ss(),this}getLabelConnectorGap(){return this.jT}setLabelSide(t){return this.ZT=t,this.us.Ss(),this}getLabelSide(){return this.ZT}Ky(t,i,s,e){const h=this.jT;let r=0;for(let i=0;i<t.length;i+=1)r=Math.max(r,t[i].Ue.oi().x);const o=e.x+this.ya.left+this.ya.right,a=this.ZT===Fd.Right?(this.ya.left+(o-(this.ya.right+r)))/2:(this.ya.left+r+(o-this.ya.right))/2,l=e.x-r,u=n(l,e.y);xd(t,this.YT,this.HT,u,this.ya,this.$T,this.XT,a),this.JT(t,this.ZT===Fd.Left?-1:1,-1,s,e);for(let t=0;t<this.qy.length;t+=1)this.qy[t].setVisible(!1);for(let i=0;i<t.length;i+=1)t[i].getVisible()&&this.hp(this.KT(t[i],-1,s,h))}getMinimumSize(){return n(500,300)}JT(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];if(0===h.bT.Sl().length)h.Ue.setVisible(!1);else{let t;h.Ue.setVisible(!0),a&&(t=a.Ue.Fa().y+s*(a.Ue.oi().y+10));const e=(_d(h.bT,this.ZT,0)||n(0,0)).y,l=void 0===t?e:o(e,t);h.Ue.Fe(n(r,l)).Da(i).La(0),a=h}}}KT(t,i,s,e){const h=t.bT,r=t.Ue,o=_d(h,this.ZT,e);if(o){const t={x:ps(this.ZT===Fd.Left?r.Fa().x-i*(e+r.oi().x):r.Fa().x+i*(e+r.oi().x),o,s).x,y:Ss(r.Fa().y,o,s).y};return[o,t,n(this.ZT===Fd.Left?r.Fa().x-i*(e+r.oi().x):r.Fa().x+i*(e+r.oi().x),t.y)]}}hp(t){if(t){let i;for(let t=0;t<this.qy.length;t+=1)if(!this.qy[t].getVisible()){i=this.qy[t].setVisible(!0);break}void 0===i&&(i=this.Xy.rp(this.pixelScale,void 0,[el.InternalUI]).Re(this.ep),this.qy.push(i)),i.Nt().nl(t)}}}class kd extends Md{constructor(){super(...arguments),this.Jy=Xa.Name,this.QT=Ha.LabelsInsideSlices}Ky(t,i,s,e){const h=this.ya.left+e.x/2;xd(t,this.YT,this.HT,e,this.ya,this.$T,this.XT,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.bT,h=s.Ue,r=wd(e);r&&h.Fe(r).Da(0).La(0)}}getMinimumSize(){return n(200,200)}}const Td={LabelsOnSides:Cd,LabelsInsideSlices:kd};var Fd,Id;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Fd||(Fd={}));class Pd extends pa{constructor(t,i,s,e,h,r,n){super(t,i,s,i.vm("gaugeChart bg",0),e,i.us.qi.gaugeChartBackgroundFillStyle,i.us.qi.gaugeChartBackgroundStrokeStyle,i.us.qi.gaugeChartTitleFont,i.us.qi.gaugeChartTitleFillStyle,r),this.Fy=[],this.Uy=t=>{const i=this.Fy.indexOf(t);i>=0&&this.Fy.splice(i,1)},this.us.Nn(_o.lf),this.ks=i.$y("gaugeChart layer",0),this.Xy=i.$y("gaugeChart top layer",1),this._m.Rh("Gauge Chart"),this.Sm(h,this.pixelScale);const o=Ks();this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd),this.setAnimationsEnabled(void 0===n||n)}dispose(){return this.ks.W(),this.Xy.W(),this.Fy.slice().forEach((t=>t.dispose())),super.dispose()}}class Dd extends Pd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.Xl=90,this.jl=-270,this.qT={min:this.Xl,max:this.jl},this.tF=K((()=>this.ks.Ss())),this.iF=()=>{this.sF=void 0},this.eF=i.$y("radialGaugeChart bg arc",2),this.hF=this.ks.Jc(this.pixelScale).Ce(this.qi.gaugeChartEmptyGaugeFillStyle).we(this.qi.gaugeChartEmptyGaugeStrokeStyle)}setAngleInterval(t,i){t===i?i-=360:Math.abs(i-t)>360&&(i-=(i-t)%360);const s=this.Xl,e=this.jl,h=this.qT;return this.getAnimationsEnabled()?this.rF(h,{min:t,max:i}):(h.min=t,h.max=i,this.Xl=t,this.jl=i),this.D.emit("angleIntervalChange",this,{min:s,max:e},{min:t,max:i}),this.us.Ss(),this}getAngleInterval(){return{min:this.Xl,max:this.jl}}setGaugeFillStyle(t){return this.hF.Ce(t),this.us.Ss(),this}setGaugeStrokeStyle(t){return this.hF.we(t),this.us.Ss(),this}rF(t,i,s){this.sF=this.tF(1e3,Q.ease)([[t.min,i.min],[t.max,i.max]],(([t,i])=>{this.qT={min:t,max:i},this.Xl=t,this.jl=i,this.ks.Ss()})),this.sF.onEveryAnimationEnd(this.iF),s&&this.sF.onAnimationEnd(s)}onAngleIntervalChange(t){return this.D.on("angleIntervalChange",t)}offAngleIntervalChange(t){return this.D.off(t,"angleIntervalChange")}dispose(){return super.dispose(),this.eF.W(),this}}class Bd extends Za{nF(t){return this.D.on("valueChange",t)}oF(t){return this.D.on("valueIntervalChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}offIntervalChange(t){return this.D.off(t,"valueIntervalChange")}attach(t,i=!0,s=!1){return super.attach(t,i,s),this.styleAttachedEntry(t,i,s),this}styleAttachedEntry(t,i=!0,s=!1){gi(t,this.qi,s,{fill:this.aF})}}class Ld extends Bd{onValueChange(t){return this.nF(t)}onIntervalChange(t){return this.oF(t)}}class Rd extends Ld{constructor(t,i,s,e,h,r,n){super(s,h,r,n),this.Xl=0,this.jl=0,this.lF=0,this.uF=0,this.cF=0,this.dF=100,this.fF=!0,this.py=this.u,this.vy=this.getVisible(),this.by=Fi(),this.AF=t=>{this.py=t,this.Ji.us.Ss()},this.gF=t,this.Dr=i,this.Ji=s,this.scale=e,this.aF=this.qi.gaugeChartGaugeFillStyle,this.ky=t.Jc(e).Ce(this.aF).we(at).cs(this.getHighlight()),this.ds(this.ky),this.mF=i.Pr(e).cs(this.getHighlight()),this.ds(this.mF,{isText:!0}),this.yF=i.Pr(e).cs(this.getHighlight()),this.ds(this.yF,{isText:!0}),this.Ue=i.Pr(e).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0}),this.mF.Ce(r.gaugeChartIntervalLabelsFillStyle).Oh(r.gaugeChartIntervalLabelsFont),this.yF.Ce(r.gaugeChartIntervalLabelsFillStyle).Oh(r.gaugeChartIntervalLabelsFont),this.Ue.Ce(r.gaugeChartValueLabelFillStyle).Oh(r.gaugeChartValueLabelFont),this.setName("Gauge Slice")}Te(){const t=this.Ji.getDataLabelFormatter(),i=this.Xl/90<this.jl/90?1:-1;let s=this.Ji.getAnimationsEnabled()?this.py:this.u;const[e,h]=this.cF<this.dF?[this.cF,this.dF]:[this.dF,this.cF];s<e?s=e:s>h&&(s=h);const r=this.jl-i*this.uF,n=this.Xl+i*this.lF,o=this.dF-this.cF,a=(0!==o?(r-n)/o:1/0)*(s-this.cF);this.ky.eu(n).ze(n+a);const l="function"==typeof t?t(s,{getInnerStart:()=>e,getInnerEnd:()=>h}):t.format(s);this.Ue.Rh(l)}pF(){const t=this.Ji.getIntervalLabelFormatter(),i="function"==typeof t?t(this.cF,{getInnerStart:()=>this.cF,getInnerEnd:()=>this.dF}):t.format(this.cF);return this.mF.Rh(i).Ps(),this.mF.oi()}SF(){const t=this.Ji.getIntervalLabelFormatter(),i="function"==typeof t?t(this.dF,{getInnerStart:()=>this.cF,getInnerEnd:()=>this.dF}):t.format(this.dF);return this.yF.Rh(i).Ps(),this.yF.oi()}setName(t){return super.setName(t),this.Ji.us.Ss(),this}setValue(t){const i=this.u;return this.Ji.getAnimationsEnabled()?this.vy&&this.by(i,t,this.AF):this.py=t,this.u=t,this.D.emit("valueChange",this,i,t),this.Ji.us.Ss(),this}getValue(){return this.u}setVisible(t){return this.vy=t,!1===t?this.Ji.getAnimationsEnabled()&&this.py>0?this.by(this.py,0,this.AF,{onCompleted:()=>super.setVisible(!1)}):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(super.setVisible(!0),this.by(this.py,this.u,this.AF)):(this.py=this.u,super.setVisible(!0)),this}setInterval(t,i){const s=this.cF,e=this.dF;return this.D.emit("valueIntervalChange",this,{min:s,max:e},{min:t,max:i}),this.cF=t,this.dF=i,this.Ji.us.Ss(),this}setIntervalLabelsFont(t){return this.mF.Oh(t),this.yF.Oh(t),this.Ji.us.Ss(),this}getIntervalLabelsFont(){return this.mF.Vh()}setIntervalLabelsFillStyle(t){return this.mF.Ce(t),this.yF.Ce(t),this.Ji.us.Ss(),this}getIntervalLabelsFillStyle(){return this.mF.Eh()}setIntervalLabelsVisible(t){return t?(this.mF.setVisible(!0),this.yF.setVisible(!0)):(this.mF.setVisible(!1),this.yF.setVisible(!1)),this.fF=t,this}getIntervalLabelsVisible(){return this.fF}setAngleInterval(t,i){return this.Xl=t,this.jl=i,this.Ji.us.Ss(),this}setMinAngle(t){return this.Xl=t,this.Ji.us.Ss(),this}setMaxAngle(t){return this.jl=t,this.Ji.us.Ss(),this}setMarginInDegrees(t=this.lF,i=this.uF){return t!==this.lF&&(this.lF=t),i!==this.uF&&(this.uF=i),this.Ji.us.Ss(),this}setFillStyle(t){this.aF="function"==typeof t?t(this.aF):t;const i=this.aF;this.ky.Ce(i);for(let t=0;t<this.Qi.length;t+=1)this.styleAttachedEntry(this.Qi[t]);return this.Ji.us.Ss(),this}vF(t){return this.Ue.Ce(t),this.Dr.Ss(),this}bF(){return this.Ue.Eh()}getAnimatedValue(){return this.py}}function Ed(t,i,s,e,h,r=Math.floor(Math.sqrt(e>h?25*e:25*h))){const o=Array(r+2),a=Math.PI;let l=0,u=0;const c=i*a/180,d=(s*a/180-c)/r;for(o[l]=n(t.x,t.y),l+=1;l<=r+1;)o[l]=n(t.x+e*Math.cos(c+u*d),t.y+h*Math.sin(c+u*d)),l+=1,u+=1;return[o,r]}class zd extends Dd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.Vd=20,this.xF=new Intl.NumberFormat,this.MF=new Intl.NumberFormat,this._F=!1,this.wF=5;const o=new Rd(this.ks,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);this.CF=o,this.Fy.push(o),this.setPadding(10)}Te(t){super.Te(t),Sa.Fm(this._m,this.bm),super.pm();const i=Sa.Tm(this._m,this.bm),s=is([this.CF.pF(),this.CF.SF()]),e=n(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right+2*s.max.x),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+1*s.max.y+i)),h=Math.max(.5*Math.min(e.x,e.y),0),r=n(this.ya.left+s.max.x+.5*e.x,this.ya.bottom+s.max.y+.5*e.y),o=this._F?this.kF(r,h):r,a=this.hF.xe.getThickness(),l=h-.5*a,u=h-this.Vd;let c=u/h*100;c=c>100||c<0?99:c;const d=100*(1-(this.Vd-a)/h);this.TF(o,u)&&(this.hF.hu(h).ou(c),this.CF.ky.hu(l).ou(d));const f=.5*(A=h,(g=this.jl-this.Xl)/(2*Math.PI*A*(g/360))*a);var A,g;this.hF.eu(this.Xl).ze(this.jl).Fe(o),this.CF.ky.Fe(o),this.CF.Ue.Fe(o),this.Nd&&this.CF.setFillStyle(new U({color:this.Nd.getColors(this.CF.getAnimatedValue())})),this.CF.setMinAngle(this.Xl).setMaxAngle(this.jl).setMarginInDegrees(f,f).Te();const m=this.hF.Zl();if(this.CF.getIntervalLabelsVisible()){this.FF(this.Xl,this.jl,o,m+this.wF);const t=this.CF.mF.Ps().We(),i=this.CF.yF.Ps().We();Hi(t,i)&&this.IF(t,i,o,m+this.wF)}}TF(t,i){const s=cs(this.CF.Ue.Ps().oi(),.5),e=t.x+i,h=t.x-i,r=t.y+i,n=t.y-i;return!(t.x+s.x>e||t.x-s.x<h||t.y+s.y>r||t.y-s.y<n)}IF(t,i,s,e){const h=$i(t,i),[r,o]=[_s(vs(this.Xl)),_s(vs(this.jl))],[a,l]=r!==o||1!==r&&3!==r?[fs(h.min,s),fs(h.max,s)]:[fs(n(h.min.x,h.max.y),s),fs(n(h.max.x,h.min.y),s)],u=a.x*l.x+a.y*l.y,c=us(a)*us(l),d=.7*bs(Math.acos(u/c)),[f,A]=this.PF();this.FF(this.Xl-f*d,this.jl-A*d,s,e)}PF(){const t=this.jl-this.Xl,i=Math.sign(t);let s=Math.sign(this.Xl),e=Math.sign(this.jl);return s===e&&(i>=0?s=-e:e=-s),[s,e]}kF(t,i){const[s]=Ed(t,this.Xl,this.jl,i,i),e=is(s),h=.5*(e.max.x-e.min.x),r=.5*(e.max.y-e.min.y);return ds(fs(t,n(e.min.x+h,e.min.y+r)),t)}FF(t,i,s,e){const h=vs(t),r=vs(i);this.CF.mF.Fe(ns(n(s.x+e,s.y),s,-h)),this.CF.yF.Fe(ns(n(s.x+e,s.y),s,-r)),this.CF.mF.Ea(n(-Math.cos(h),-Math.sin(h))),this.CF.yF.Ea(n(-Math.cos(r),-Math.sin(r)))}getDefaultSlice(){return this.CF}setAutoScaling(t){return this._F=t,this.us.Ss(),this}getAutoScaling(){return this._F}setDataLabelFormatter(t){return this.MF=t,this.us.Ss(),this}getDataLabelFormatter(){return this.MF}setIntervalLabelFormatter(t){return this.xF=t,this.us.Ss(),this}getIntervalLabelFormatter(){return this.xF}setIntervalLabelPadding(t){return this.wF=t,this.us.Ss(),this}getIntervalLabelPadding(){return this.wF}setThickness(t){return this.Vd=t,this}setLUT(t){return this.Nd=t,this.us.Ss(),this}setDataLabelFont(t){return this.CF.Ue.Oh(t),this.us.Ss(),this}getDataLabelFont(){return this.CF.Ue.Vh()}getMinimumSize(){return n(500,300)}setDataLabelFillStyle(t){return this.CF.vF(t),this.us.Ss(),this}getDataLabelFillStyle(){return this.CF.bF()}Zd(){return this.Fy}dispose(){return this.CF.dispose(),super.dispose()}}class Vd extends Za{}class Od extends Vd{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.xs="Slice",this.u=0,this.gy=!1,this.UT=O,this.yy=O,this.py=this.u,this.by=K((()=>this.Ji.us.Ss())),this.My=()=>{this._y=void 0},this.index=t,this.Ji=e,this.scale=h,this.Ki=r,this.bT=i.ic(h,fr.Simple).cs(this.getHighlight()),this.ds(this.bT),this.Ue=s.Pr(h).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0})}setValue(t){return this.Ji.getAnimationsEnabled()?this.getVisible()&&this.Ty(this.py,t):this.py=t,this.u=t,this.Ji.us.Ss(),this}getValue(){return this.u}setVisible(t){return!1===t?this.Ji.getAnimationsEnabled()&&this.py>0?(this._y&&(this._y.finish(!1),this._y=void 0),this.Ty(this.py,0,(()=>super.setVisible(!1)))):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this._y&&(this._y.finish(!1),this._y=void 0),super.setVisible(!0),this.Ty(this.py,this.u)):(this.py=this.u,super.setVisible(!0)),this}Ty(t,i,s){this._y=this.by(300,Q.ease)([[t,i]],(([t])=>{this.py=t,this.Ji.us.Ss()})),this._y.onEveryAnimationEnd(this.My),s&&this._y.onAnimationEnd(s)}setStyle(t,i,s,e){this.UT=t,this.yy=s,this.bT.Ce(this.UT).we(i),this.Ue.Ce(this.yy).Oh(e);for(let t=0;t<this.Qi.length;t+=1)this.styleAttachedEntry(this.Qi[t])}getAnimatedValue(){return this.py}attach(t,i=!0,s=!1){return super.attach(t,i,s),this.styleAttachedEntry(t,i,s),this}styleAttachedEntry(t,i=!0,s=!1){gi(t,this.qi,s,{fill:this.UT,stroke:this.bT.ao()})}}!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(Id||(Id={}));const Nd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Gd=(t,i,s,e,h,r=0,n=Id.VariableHeight,o)=>{i=Nd(i,e.x),s=Nd(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,m=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;m+=t[i].getAnimatedValue();const o=n===Id.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-m/l*e.y;if(n===Id.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const y=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const m=t[g];u+=m.getAnimatedValue();const p=n===Id.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let S=0;g>0&&(c={x:f.x+y*r,y:f.y-r},d={x:A.x-y*r,y:A.y-r}),S=(i+u/l*(s-i))/2,f={x:o-S,y:parseInt(`${n===Id.VariableWidth?c.y-p:p}`,10)},A={x:o+S,y:parseInt(`${n===Id.VariableWidth?d.y-p:p}`,10)},d.x>=c.x&&A.x>=f.x&&m.bT.pl([f,c,d,A])}};class Wd extends pa{constructor(t,i,s,e,h,r,n){super(t,i,s,i.vm("pyramidChart bg",0),e,i.us.qi.pyramidChartBackgroundFillStyle,i.us.qi.pyramidChartBackgroundStrokeStyle,i.us.qi.pyramidChartTitleFont,i.us.qi.pyramidChartTitleFillStyle,r),this.Fy=[],this.Iy=$a.None,this.Py=this.qi.pyramidChartSliceFillStylePalette,this.Dy=this.qi.pyramidChartSliceStrokeStyle,this.By=!0,this.Ly=this.qi.pyramidChartSliceLabelFont,this.Ry=this.qi.pyramidChartSliceLabelFillStyle,this.Ey=0,this.YT=0,this.HT=80,this.$T=0,this.XT=Id.VariableHeight,this.Oy=!0,this.Gy=va.onHover,this.Wy=ja,this.Uy=t=>{const i=this.Fy.indexOf(t);i>=0&&(this.Fy.splice(i,1),this.Yy())},this.us.Nn(_o.af),this.Ny=this.qi.effectsText,this.Hy=i.$y("pyramidChart bottom",0),this.Xy=i.$y("pyramidChart top",1),this._m.Rh("Pyramid Chart"),this.jy=i.Zy();const o=zt(n?n.autoCursorBuilder:void 0,Ga);this.Pm=o.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.Sm(h,this.pixelScale),this.setAnimationsEnabled(!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled))}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}addSlice(t,i){const s=new Od(this.Ey,this.Hy,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);return this.Ey+=1,s.setName(t),s.setValue(i),s.es.rs.ps(this.Ny),s.es.ns.ps(this.Oy),this.Fy.push(s),this.us.Ss(),s.onMouseMove((()=>{this.Gy&&this.us.Ss()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Fy}setNeckWidth(t){return this.HT=t,this.us.Ss(),this}getNeckWidth(){return this.HT}setSliceGap(t){return this.$T=Math.min(Math.max(t,0),20),this.us.Ss(),this}setSliceMode(t){return this.XT=t,this.us.Ss(),this}getPyramidSliceMode(){return this.XT}setLUT(t){return this.Nd=t,this.us.Ss(),this}setSliceFillStyle(t){return this.Py=t,this.us.Ss(),this}getSliceFillStyle(){return this.Py}setSliceStrokeStyle(t){return this.Dy="function"==typeof t?t(this.Dy):t,this.us.Ss(),this}getSliceStrokeStyle(){return this.Dy}setSliceEffect(t){return this.Oy=t,this.Fy.forEach((i=>i.es.ns.ps(t))),this.us.Ss(),this}getSliceEffect(){return this.Oy}setSliceSorter(t){return this.Iy=t,this.Fy=this.Fy.sort(this.Iy),this.us.Ss(),this}getSliceSorter(){return this.Iy}setLabelFillStyle(t){return this.Ry="function"==typeof t?t(this.Ry):t,this.us.Ss(),this}getLabelFillStyle(){return this.Ry}setLabelFont(t){return this.Ly="function"==typeof t?t(this.Ly):t,this.us.Ss(),this}getLabelFont(){return this.Ly}setLabelEffect(t){return this.Ny=t,this.Fy.forEach((i=>i.es.rs.ps(t))),this.us.Ss(),this}getLabelEffect(){return this.Ny}setLabelFormatter(t){return this.Jy=t,this.us.Ss(),this}getLabelFormatter(){return this.Jy}setSliceHighlightOnHover(t){return this.By=t,this.Fy.forEach((i=>i.setHighlightOnHover(t))),this}Te(t){super.Te(t),Sa.Fm(this._m,this.bm),super.pm();const i=Sa.Tm(this._m,this.bm),s=n(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+i)),e=n(this.ya.left+s.x/2,this.ya.bottom+s.y/2);this.Fy=this.Fy.sort(this.Iy);for(let t=0,{length:i}=this.Fy;t<i;t+=1)this.Qy(this.Fy[t],t);const h=this.Fy.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.Ue.Rh(this.Jy(i,o[t])).Ps()}o.push(r),ba.Im(this,!1,!1,this.Fy,void 0,((t,i)=>Ya(i,this.engine.scale,this.Wy(new Ta,this,t,o[h.indexOf(t)]||0).Zu(),t,void 0))),this.Ky(h,o,e,s)}Qy(t,i){t.setStyle(this.Nd?new U({color:this.Nd.getColors(t.getAnimatedValue())}):this.Py(i,t),this.Dy,this.Ry,this.Ly)}Yy(){this.Fy=this.Fy.sort(this.Iy),this.us.Ss()}Zd(){return this.Fy}dispose(){return this.Fy.slice().forEach((t=>t.dispose())),this.Pm.dispose(),this.Hy.W(),this.Xy.W(),this.jy.W(),super.dispose()}}const Ud=(t,i,s)=>{const e=t.Sl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===jd.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},Yd=t=>{const i=t.Sl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Hd extends Wd{constructor(){super(...arguments),this.Jy=Xa.NamePlusValue,this.jT=10,this.ZT=jd.Left,this.QT=Ha.LabelsOnSides,this.qy=[],this.ep=this.qi.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.ep=t;for(let t=0;t<this.qy.length;t+=1)this.qy[t].Re(this.ep);return this.us.Ss(),this}getLabelConnectorStyle(){return this.ep}setLabelConnectorGap(t){return this.jT=t,this.us.Ss(),this}getLabelConnectorGap(){return this.jT}setLabelSide(t){return this.ZT=t,this.us.Ss(),this}getLabelSide(){return this.ZT}Ky(t,i,s,e){const h=this.jT;let r=0;for(let i=0;i<t.length;i+=1)r=Math.max(r,t[i].Ue.oi().x);const o=e.x+this.ya.left+this.ya.right,a=this.ZT===jd.Right?(this.ya.left+(o-(this.ya.right+r)))/2:(this.ya.left+r+(o-this.ya.right))/2,l=e.x-r,u=n(l,e.y);Gd(t,this.YT,this.HT,u,this.ya,this.$T,this.XT,a),this.JT(t,this.ZT===jd.Left?-1:1,-1,s,e);for(let t=0;t<this.qy.length;t+=1)this.qy[t].setVisible(!1);for(let i=0;i<t.length;i+=1)if(t[i].getVisible()){const e=this.KT(t[i],-1,s,h);e&&this.hp(e)}}getMinimumSize(){return n(500,300)}JT(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];let l;0===h.bT.Sl().length?h.Ue.setVisible(!1):h.Ue.setVisible(!0),a&&(l=a.Ue.Fa().y+s*(a.Ue.oi().y+10));const u=Ud(h.bT,this.ZT,0);if(u){const t=u.y,s=void 0===l?t:o(t,l);h.Ue.Fe(n(r,s)).Da(i).La(0)}a=h}}KT(t,i,s,e){const h=t.bT,r=t.Ue,o=Ud(h,this.ZT,e);if(o){const t={x:ps(this.ZT===jd.Left?r.Fa().x-i*(e+r.oi().x):r.Fa().x+i*(e+r.oi().x),o,s).x,y:Ss(r.Fa().y,o,s).y};return[o,t,n(this.ZT===jd.Left?r.Fa().x-i*(e+r.oi().x):r.Fa().x+i*(e+r.oi().x),t.y)]}}hp(t){let i;for(let t=0;t<this.qy.length;t+=1)if(!this.qy[t].getVisible()){i=this.qy[t].setVisible(!0);break}void 0===i&&(i=this.Xy.rp(this.pixelScale,void 0,[el.InternalUI]).Re(this.ep),this.qy.push(i)),i.Nt().nl(t)}}class $d extends Wd{constructor(){super(...arguments),this.Jy=Xa.Name,this.QT=Ha.LabelsInsideSlices}Ky(t,i,s,e){const h=this.ya.left+e.x/2;Gd(t,this.YT,this.HT,e,this.ya,this.$T,this.XT,h);for(let i=0;i<t.length;i+=1){const s=t[i].bT,e=t[i].Ue,h=Yd(s);h&&e.Fe(h).Da(0).La(0)}}getMinimumSize(){return n(200,200)}}const Xd={LabelsOnSides:Hd,LabelsInsideSlices:$d};var jd;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(jd||(jd={}));const Zd=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),Qd=(t,i,s,e,h,r,n,o)=>{if(0===i)return t.paddingX=o,t.alignmentX=-1,t};var Jd;!function(t){t[t.Normal=0]="Normal",t[t.Circle=1]="Circle"}(Jd||(Jd={}));class Kd{constructor(t,i,e,h,r,n,o,a){this.D=new s,this.DF=t,this.Dr=i,this.scale=e,this.chart=h,this.tag=r,this.axisScale=n,this.BF=o,this.LF=a,this.RF=this.DF.Ee(this.scale).setMouseInteractions(!1),this.EF=this.Dr.Pr(this.scale).Rh(this.tag).setMouseInteractions(!1),this.zF=this.BF(this,this.DF.rp(this.scale,void 0,[el.InternalUI])).Re(this.chart.getNibStyle()),this.LF.fs([this.EF])}Ky(t,i,s,e,h,r,o){const a=i.length,l=i[s>0?s-1:a-1],u=i[s],c=i[s<a-1?s+1:0],d=this.chart.getNibLength();this.RF.Ve(t).ze(u).Re(this.chart.getAxisStyle()),this.zF.Nt().nl(r===Jd.Normal?[qi(u,l,Rt(.5*d/us(fs(l,u)),0,1)),u,qi(u,c,Rt(.5*d/us(fs(c,u)),0,1))]:((t,i,s,e,h=2)=>{const r=e/s,o=[];for(let a=-e/2;a<=e/2;a+=h){const h=r*(a/e)+i,l=n(t.x+Math.cos(h)*s,t.y+Math.sin(h)*s);o.push(l)}return o})(t,e,h,d)),o?this.EF.setVisible(!0).Fe(ds(u,n(o.paddingX,o.paddingY))).Da(o.alignmentX).La(o.alignmentY):this.EF.setVisible(!1)}getLabelSize(){return this.EF.Oh(this.chart.getAxisLabelFont()).Ce(this.chart.getAxisLabelStyle()).Ps().oi()}dispose(){this.RF&&this.RF.dispose(),this.EF&&this.EF.dispose(),this.zF&&this.zF.dispose()}}const qd=(t,i,s,e,h)=>{const r=i.getIcon();return r?t.addRow(r,i.getName()):t.addRow(i.getName()),t.addRow("Axis:","",e).addRow("Value:","",h(s))};class tf extends ou{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,a,l,c),this.xs="Spider Series",this.yu=new Map,this.Hi=js.onHover,this.Wy=qd,this.Hx=8,this.Aa=0,this.VF=Fi(),this.OF={},this.NF={},this.vy=this.getVisible(),this.GF=1,this.WF=((t,i)=>{const s=K((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const l=(null==a?void 0:a.easing)||Q.ease,u=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r?(e=s(u,l)([[r,0]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0,i(!1)}))):(r=0,i(!1)):o?(i(!0),e=s(u,l)([[r,1]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.GF=t,this.ks.us.Ss()}),(t=>{super.setVisible(t)})),this.Ji=t,this.ks=i,this.$x=e,this.UF=h,this.ab=r,this.YF=n,this.HF=o,this.scale=s,this.$F=Si(l.spiderSeriesFillStyle,u),this.XF=Si(l.spiderSeriesStrokeStyle,u),this.jF=Si(l.spiderSeriesPointFillStyle,u)}Kp(){return this.tS&&this.yu.size>0&&this.getVisible()}addPoints(...t){this.yu.size>0&&this.Ji.us.Nn(_o.vf),t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1)this.UF(t[i].axis);if(this.Ji.getAnimationsEnabled()&&void 0!==this.OF){const i=new Map;let s;t.forEach((t=>i.set(t.axis,t.value))),this.VF(0,1,(t=>{i.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.yu.set(e,h+t*(i-h)),this.ks.us.Ss()}))}),{easing:this.OF.easing,durationMs:this.OF.durationMs,onStart:()=>{s=new Map(this.yu)}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.yu.set(s,t[i].value)}return this.ks.Ss(),this}getValue(t,i=!1){const s=this.yu.get(t),e=this.Ji.getOriginValue();if(void 0!==s)return i?e+this.GF*(s-e):s}setAnimationAddPoints(t,i){return this.OF=t?{easing:t,durationMs:i}:void 0,this.ks.Ss(),this}setVisibleStateChangedAnimation(t,i){return this.NF=t?{easing:t,durationMs:i}:void 0,this.ks.Ss(),this}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setCursorEnabled(t){return super.setCursorEnabled(t)}setFillStyle(t){return this.$F="function"==typeof t?t(this.$F):t,this.bT&&(this.bT.Ce(this.$F),this.ks.Ss()),this}getFillStyle(){return this.$F}setStrokeStyle(t){return this.XF="function"==typeof t?t(this.XF):t,this.bT&&(this.bT.we(this.XF),this.ks.Ss()),this}getStrokeStyle(){return this.XF}setPointFillStyle(t){return this.jF="function"==typeof t?t(this.jF):t,this.Xx&&(this.Xx.Ce(this.jF),this.ks.Ss()),this}getPointFillStyle(){return this.jF}setPointSize(t){return this.Hx=t,this.Xx&&this.Xx.q(t),this}getPointSize(){return this.Hx}getPointShape(){return this.$x}setPointRotation(t){return this.Aa=t,this.Xx&&this.Xx.Nh(t),this.ks.Ss(),this}getPointRotation(){return this.Aa}Te(){if(super.Te(),!this.$i){const t=new Array(this.ab.length),i=this.Ji.getOriginValue();for(let s=0;s<this.ab.length;s+=1){const e=this.yu.get(this.ab[s].tag);t[s]=void 0!==e?this.YF(this.ab[s].tag,i+this.GF*(e-i)):this.YF(this.ab[s].tag,i)}ni(t),t.length>=3&&(this.bT||(this.bT=this.ks.ic(this.scale,fr.Simple).we(this.XF).Ce(this.$F).cs(this.getHighlight()),this.ds(this.bT)),this.bT.pl(t),this.Xx||(this.Xx=this.ks.bS(this.scale).q(this.Hx).il(this.$x).Nh(this.Aa).Ce(this.jF).cs(this.getHighlight()),this.ds(this.Xx)),this.Xx.Nt().nl(t))}}attach(t,i=!0,s=!1){return super.attach(t,i,s),gi(t,this.qi,s,{fill:this.$F,stroke:this.XF}),this}Cs(){return this.bs||this.$x}ZF(){for(let t=0;t<this.Qi.length;t+=1)gi(this.Qi[t],this.qi,!1,{fill:this.$F,stroke:this.XF})}Hc(t,i){if(this.bT){const i=this.HF(t);if(void 0!==i&&this.yu.has(i.tag)){const t=this.yu.get(i.tag),s=this.YF(i.tag,t);return Ya(s,this.scale,this.Wy(new Ta,this,t,i.tag,this.Ji.formatValue).Zu(),this,this.$F)}}}solveNearestFromScreen(t){return this.Hc(vo(t,this.Ji.us),!1)}Ie(t,i){return t.cs(i),this.ks.Ss(),this}setVisible(t){var i,s;return this.vy=t,this.WF(t,this.Ji.getAnimationsEnabled()&&void 0!==this.NF,{easing:null===(i=this.NF)||void 0===i?void 0:i.easing,durationMs:null===(s=this.NF)||void 0===s?void 0:s.durationMs}),this}}const sf=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},ef=t=>is(t.EF.We()),hf=t=>is(t.We()),rf=(t,i,s,e)=>t.ou(0).Fe(s).eu(90).ze(-270).au(i===Jd.Circle?void 0:e.length),nf={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},of={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},af=()=>{of.alignmentX=0,of.alignmentY=0,of.paddingX=0,of.paddingY=0};class lf extends kl{constructor(t,i,s,e,h,r,o){super(t,i,s,i.vm("spiderChart bg",0),e,i.us.qi.spiderChartBackgroundFillStyle,i.us.qi.spiderChartBackgroundStrokeStyle,i.us.qi.spiderChartTitleFont,i.us.qi.spiderChartTitleFillStyle,o),this.ya=A(20,20,20,20),this.axisScale=dt.d1({scale1DConstructor:Vs,dimension:"x"}).J(0,1),this.ab=[],this.QF=[],this.JF=[],this.KF=Ye.expansion,this.qF=!0,this.tI=Qd,this.iI=Zd,this.Bo=!0,this.sI=Jd.Normal,this.eI=4,this.hI=this.qi.spiderChartWebStyle,this.rI=this.qi.spiderChartScaleLabelFillStyle,this.nI=this.qi.spiderChartScaleLabelFont,this.oI=5,this.aI=this.qi.spiderChartAxisLabelFillStyle,this.lI=this.qi.spiderChartAxisLabelFont,this.uI=5,this.cI=this.qi.spiderChartAxisStrokeStyle,this.dI=this.qi.spiderChartAxisNibStrokeStyle,this.Pf=10,this.fI=A(),this.Gy=va.onHover,this.hasAxis=t=>this.ab.reduce(((i,s)=>i||s.tag===t),!1),this.formatValue=t=>this.axisScale.Di(t,Es.Numeric),this.AI=()=>{const t=this.ab.map(ef).concat(this.JF.map(hf));return Xi(t)},this.gI=()=>this.mI.Jc(this.pixelScale).setMouseInteractions(!1),this.yI=t=>t.dispose(),this.pI=()=>this.bA.Pr(this.pixelScale).setMouseInteractions(!1),this.SI=t=>t.dispose(),this.vI=t=>this.formatValue(this.axisScale.getInnerStart()+t*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.bI=(t,i)=>{let s,e;const h=()=>{void 0!==this.xI&&this.xI.finish(),s=c(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),e=this.KF,this.KF=void 0},r=(i,e,h,r,o)=>{const a=n(h.x-e.x,e.y-h.y),l=this.ab.findIndex((i=>i===t));if(l>=0&&void 0!==s){const i=sf(l,this.ab.length),e=n(Math.cos(i),Math.sin(i)),h=a.x*e.x+a.y*e.y,r=us(fs(t.RF.Ii(),t.RF.Ti())),u=s.min+(s.max-s.min)*Math.max(1+h/r,.01);this.axisScale.J(s.min,u),ii(o),this.us.Ss()}},o=()=>{if(s=void 0,void 0!==e)if(this.th){const t=c(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),i=this.MI(),s=e;if(void 0!==i){const e=s.start(t.min,t.max,i.min,i.max),h=s.end(t.min,t.max,i.min,i.max);this.xI=this.qg.us.sn(300,Q.ease)([[0,1]],(([i])=>{this.axisScale.J(t.min+i*(e-t.min),t.max+i*(h-t.max))})),this.xI.onAnimationEnd((()=>{this.xI=void 0,this.KF=s}))}else this.KF=e}else this.KF=e;e=void 0};i.setMouseEnterEventHandler(this._I).setMouseLeaveEventHandler(this.wI).setMouseDragStartEventHandler(h).setMouseDragEventHandler(((t,i,s,e,h)=>r(0,n(i.clientX,i.clientY),e,0,i))).setMouseDragStopEventHandler(o);const a=Ks(new te(((t,i,s)=>{this._I(t),h(),ii(s)}),r,((t,i,s,e)=>{this.wI(t),o(),ii(e)})));return i.setTouchStartEventHandler(a.onTouchStart).setTouchMoveEventHandler(a.onTouchMove).setTouchEndEventHandler(a.onTouchEnd)},this.CI=t=>{this.qF&&!this.hasAxis(t)&&this.addAxis(t)},this.YF=(t,i)=>{for(const s of this.ab)if(s.tag===t){const t=Math.max(Math.min((i-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return qi(s.RF.Ii(),s.RF.Ti(),t)}},this.HF=t=>{if(0===this.ab.length)return;const i=fs(At(t,this.engine.scale,this.pixelScale),this.ab[0].RF.Ii()),s=Math.atan2(i.y,i.x);let e,h=Oi;for(const t of this.ab){const i=fs(t.RF.Ti(),t.RF.Ii()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this._I=t=>{this.Bo&&(t.Re(this.dI),this.us.Ss())},this.wI=t=>{t.Re(this.dI),this.us.Ss()},this.us.Nn(_o.uf),this.Gk=i.ob("spiderChart series bg",0),this.mI=i.$y("spiderChart web shapes",0),this.kI=i.$y("spiderChart axis bg",1),this.Rb=i.$y("spiderChart plotting",2),this.bA=i.$y("spiderChart fg",3),this.LF=this.es.yg().ps(this.qi.effectsText),this._m.Rh("Spider Chart"),this.FS=this.Gk.Jc(this.pixelScale).Ce(this.qi.spiderChartSeriesBackgroundFillStyle).we(at).eu(90).ze(-270).ou(0),this.IS=this.Gk.Jc(this.pixelScale).Ce(O).we(this.qi.spiderChartSeriesBackgroundStrokeStyle).eu(90).ze(-270).ou(0),super.TS(this.FS,this.IS),this.jy=i.Zy();const a=zt(r?r.autoCursorBuilder:void 0,Oa);this.Pm=a.uy(this.jy,this.uiScale,this.uiScale,this.qi),ba.Dm(this),this.LS(((t,i)=>{ba.Bm(this,i)})),this.setAnimationsEnabled(!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled)),this.Sm(h,this.pixelScale)}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}solveNearest(t){const i=t||this.us.On();if(i)return ba.Hc(this,vo(i,this.us),this.xS)}addAxis(t){if("string"==typeof t){if(!this.hasAxis(t)){const i=new Kd(this.kI,this.bA,this.pixelScale,this,t,this.axisScale,this.bI,this.LF);this.ab.push(i)}}else t&&this.ab.push(t);return this.LF.fs(this.ab.map((t=>t.EF))),this.us.Ss(),this}addSeries(t){const i="object"==typeof t?t.pointShape?t.pointShape:zh.Circle:t||zh.Circle,s="object"==typeof t&&t.automaticColorIndex?t.automaticColorIndex:this.xS.length,e=new tf(this,this.Rb,this.pixelScale,i,this.CI,this.ab,this.YF,this.HF,this._S,this.qi,s,this.us.es);return this.PS(e),e}getSeriesCount(){return this.xS.length}setWebMode(t){return this.sI=t,this.us.Ss(),this}getWebMode(){return this.sI}setWebCount(t){return this.eI=t,this.us.Ss(),this}getWebCount(){return this.eI}setWebStyle(t){return this.hI="function"==typeof t?t(this.hI):t,this.us.Ss(),this}getWebStyle(){return this.hI}setScaleLabelStyle(t){return this.rI="function"==typeof t?t(this.rI):t,this.us.Ss(),this}getScaleLabelStyle(){return this.rI}setScaleLabelFont(t){return this.nI="function"==typeof t?t(this.nI):t,this.us.Ss(),this}getScaleLabelFont(){return this.nI}setScaleLabelPadding(t){return this.oI=t,this.us.Ss(),this}getScaleLabelPadding(){return this.oI}setScaleLabelStrategy(t){return this.tI=t,this.us.Ss(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.us.Ss(),this}setAxisLabelStyle(t){return this.aI="function"==typeof t?t(this.aI):t,this.us.Ss(),this}getAxisLabelStyle(){return this.aI}setAxisLabelFont(t){return this.lI="function"==typeof t?t(this.lI):t,this.us.Ss(),this}getAxisLabelFont(){return this.lI}setAxisLabelEffect(t){return this.LF.ps(t),this.us.Ss(),this}getAxisLabelEffect(){return this.LF.vs()}setAxisLabelPadding(t){return this.uI=t,this.us.Ss(),this}getAxisLabelPadding(){return this.uI}setAxisLabelStrategy(t){return this.iI=t,this.us.Ss(),this}setAxisStyle(t){return this.cI="function"==typeof t?t(this.cI):t,this.us.Ss(),this}getAxisStyle(){return this.cI}setNibStyle(t){return this.dI="function"==typeof t?t(this.dI):t,this.us.Ss(),this}getNibStyle(){return this.dI}setNibLength(t){return this.Pf=t,this.us.Ss(),this}getNibLength(){return this.Pf}setAutoAxis(t){return this.qF=t,this}getAutoAxis(){return this.qF}setMouseInteractions(t){return this.Bo=t,this}getMouseInteractions(){return this.Bo}setAxisScrollStrategy(t){return this.KF=t,this.us.Ss(),this}getAxisScrollStrategy(){return this.KF}setAxisInterval(t,i=0){return this.axisScale.J(i,t),this.us.Ss(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}Te(t){super.Te(t),Sa.Fm(this._m,this.bm);const i=this.ab.length,s=Sa.Tm(this._m,this.bm),e=n(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+s)),h=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.iI){const t=Math.min(e.x,e.y)/2;for(let s=0;s<i;s+=1){const e=sf(s,i),r=Math.cos(e),o=Math.sin(e),a=this.ab[s].getLabelSize();af();const l=this.iI(of,s,i,this.ab[s].tag,e,this.uI),u=n(r*t+l.paddingX,o*t+l.paddingY);r>0?h.right=Math.max(h.right,u.x+.5*(1-l.alignmentX)*a.x-t):h.left=Math.max(h.left,-u.x+.5*(l.alignmentX+1)*a.x-t),o>0?h.top=Math.max(h.top,u.y+.5*(1-l.alignmentY)*a.y-t):h.bottom=Math.max(h.bottom,-u.y+.5*(l.alignmentY+1)*a.y-t)}}if(this.KF){const t=this.MI();if(void 0!==t){const i=this.KF.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),s=this.KF.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.J(i,s)}}const r=n(this.pixelScale.x.getInnerStart()+(h.left+this.pixelScale.x.getInnerInterval()-h.right)/2,this.pixelScale.y.getInnerStart()+(h.bottom+this.pixelScale.y.getInnerInterval()-h.top)/2),o=Math.min(e.x/2-(h.left+h.right)/2,e.y/2-(h.bottom+h.top)/2);this.fI=A(this.Xt.left+this.ya.left+h.left,this.Xt.top+this.ya.top+s+h.top,this.Xt.right+this.ya.right+h.right,this.Xt.bottom+this.ya.bottom+h.bottom),this.Ky(r,o);for(const t of this.xS)t.oS();for(const t of this.xS)t.Te();super.pm(),ba.Im(this,this.FS.getIsUnderMouse(),!1,this.xS,(t=>ba.Hc(this,t,this.xS)),((t,i)=>t.Hc(i,!0)));for(const t of this.xS)t.dp()}dispose(){return this.Gk.W(),this.mI.W(),this.kI.W(),this.Rb.W(),this.bA.W(),this.Pm.dispose(),this.jy.W(),super.dispose()}getMinimumSize(){return n(this.fI.left+this.fI.right+100,this.fI.bottom+this.fI.top+100)}Ky(t,i){const s=this.ab.length,e=[];for(let h=0;h<s;h+=1){const r=sf(h,s),o=n(t.x+Math.cos(r)*i,t.y+Math.sin(r)*i);e.push(o)}rf(this.FS,this.sI,t,e),rf(this.IS,this.sI,t,e),this.FS.hu(i),this.IS.hu(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,l=r.length,u=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(u&&l<i){l>=a&&t.push(n());const o=t[l];rf(o,s,e,r);const u=h*((l+1)/i);o.hu(u)}else l<t.length&&o(t[l]);t.length=u?i:0})(this.QF,this.eI,this.sI,t,i,e,this.gI,this.yI);for(const t of this.QF)t.Ce(O).we(this.hI);for(let h=0;h<s;h+=1){const r=this.ab[h],n=sf(h,s);af();const o=void 0!==this.iI?this.iI(of,h,s,this.ab[h].tag,n,this.uI):void 0;r.Ky(t,e,h,n,i,this.sI,o)}((t,i,s,e,h,r,o,a,l,u)=>{const c=h.length,d=t.length;let f=0;if(void 0!==i)for(let l=0;l<c;l+=1){const A=h[l].tag,g=sf(l,c);for(let h=0;h<s+ +(0===l);h+=1){nf.alignmentX=0,nf.alignmentY=0,nf.paddingX=0,nf.paddingY=0;const m=i(nf,l,c,A,g,h,s,e);if(void 0!==m){f>=d&&t.push(a());const i=t[f];f+=1;const e=(s-h)/s,c=qi(r,o[l],e);i.Fe(ds(c,n(m.paddingX,m.paddingY))).Da(m.alignmentX).La(m.alignmentY).Rh(u(e))}}}for(let i=f;i<d;i+=1)l(t[i]);t.length=f})(this.JF,this.tI,this.eI,this.oI,this.ab,t,e,this.pI,this.SI,this.vI);for(const t of this.JF)t.Ce(this.rI).Oh(this.nI)}MI(){let t,i;const s=this.getSeriesCount()>1;for(const e of this.ab)for(const h of this.xS){const r=h.getValue(e.tag,s);void 0!==r&&(t=void 0===t?r:Math.min(t,r),i=void 0===i?r:Math.max(i,r))}if(void 0!==t&&void 0!==i)return c(t,i)}}const uf=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99998/i),n=Math.floor(99999/(i+1)),o=Math.floor(89999/(i+1)),a=510001+i*o;let l=0;return{TI:()=>{const i=t.FI("dashboard ui",a+l);return l+=1,i},II:()=>t.FI("dashboard legend",51e4),DI:i=>{const a=1+i*s,l=100001+i*e,u=200002+i*h,c=300002+i*r,d=400001+i*n,f=510001+i*o;let A=0;return{us:t,vm:(i,s)=>{const e=a+s;return t.FI(i,e)},ob:(i,s)=>{const e=l+s;return t.FI(i,e)},Uk:(i,s)=>{const e=u+s;return t.FI(i,e)},$y:(i,s)=>{const e=c+s;return t.FI(i,e)},nb:(i,s,e)=>{const h=c+s;return t.BI(i,h,e)},Mm:(i,s)=>{const e=d+s;return t.FI(i,e)},om:i=>{const s=f+A,e=t.FI(i,s);return A+=1,e},lm:()=>t.FI("panel legend",500002+i),Zy:()=>t.FI("panel cursor",600001+i)}}}};class cf{constructor(t){this.D=new s,this.u=t}S(t){return this.u=t,this.D.emit("set",t),this}M(){return this.u}O(t){return this.D.on("set",t)}G(t){return this.D.off(t,"set")}}const df={uh:()=>{},ih:!1,sh:0,eh:!1,rh:0,hh:!1,oh:0,ah:0,Je:Ye.fitting},ff=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},Af=(t,i,s,e,h,r,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const u=[e,h];"spark-line"===a&&Mf(t,i,u,r,n,o),"spark-bar"===a&&_f({...t,winLoss:!1},i,u,r,n,o),"spark-win-loss"===a&&_f({...t,winLoss:!0},i,u,r,n,o),"spark-area"===a&&wf(t,i,u,r,n,o),"spark-pie"===a&&Cf(t,i,u,r,n,o)},gf=(t,i,s,e)=>({x:yf(t.x,i.x,s.x,e),y:pf(t.y,i.y,s.y,e)}),mf=(t,i,s,e)=>({position:yf(t.position,i.x,s.x,e),high:pf(t.high,i.y,s.y,e),low:pf(t.low,i.y,s.y,e)}),yf=(t,i,s,e)=>{const h=Rt(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},pf=(t,i,s,e)=>{const h=Rt(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},Sf=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&vf(a,i,s,h,r,n,o),"axis-band"===a.type&&bf(a,s,h,r,n,o),"constant-line"===a.type&&xf(a,s,e,h,r,n,o)},vf=(t,i,s,e,h,r,n)=>{const{value:o,fillStyle:a,shape:l,size:u,rotation:c}=t;let d={x:NaN,y:NaN};if("start"===o&&(d=i[0]),"end"===o&&(d=i[i.length-1]),"min"===o){d=i[0];for(const t of i)d=d.y<t.y?d:t}if("max"===o){d=i[0];for(const t of i)d=d.y>t.y?d:t}("object"!=typeof o||(d=gf(o,s,e,h),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(d,h)))&&r.pointSet.add().Nt().il(void 0!==l?l:zh.Circle).Nh(c||0).q(u||5).Ce(a||n.sparkPointChartFillStyle).nl(d)},bf=(t,i,s,e,h,r)=>{const{axis:o,start:a,end:l,fillStyle:u,strokeStyle:c}=t;let d=n(Ni,Oi),f=n(Ni,Oi);"x"===o&&(d=gf({x:a,y:Ni},i,s,e),f=gf({x:l,y:Oi},i,s,e)),"y"===o&&(d=gf({x:Ni,y:a},i,s,e),f=gf({x:Oi,y:l},i,s,e));const A=e[0],g=e[1],m=Rt(d.x,A.x,A.x+g.x),y=Rt(d.y,A.y,A.y+g.y),p=Rt(f.x,A.x,A.x+g.x),S=Rt(f.y,A.y,A.y+g.y);h.rect.add().cl(m).dl(y).q(n(p-m,S-y)).Ce(u||r.sparkChartBandFillStyle).we(c||r.sparkChartBandStrokeStyle).we(at)},xf=(t,i,s,e,h,r,o)=>{const{axis:a,value:l,strokeStyle:u}=t,c=l||0,d=i.y,f=s.y,A=i.x,g=s.x,m=[];if("y"===a&&d<=c&&c<=f){const t=gf(n(A,c),{x:A,y:d},e,h),i=gf(n(g,c),{x:A,y:d},e,h);m.push([t,i])}if("x"===a&&A<=c&&c<=g){const t=gf(n(c,d),{x:A,y:d},e,h),i=gf(n(c,f),{x:A,y:d},e,h);m.push([t,i])}m.length>0&&r.line.add().Re(u||o.sparkChartConstantLineStrokeStyle).Ve(m[0][0]).ze(m[0][1])},Mf=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&h.Hn&&Tt.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=Oi,c=Ni,d=Oi,f=Ni;for(let t=0;t<l;t+=1){const i=o[t];u=Math.min(u,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const A={x:c-u,y:f-d},g=o.map((t=>gf(t,{x:u,y:d},A,s)));i.lineSet.add().cs(r).Re(n||e.sparkLineChartStrokeStyle).Nt().nl(g),a&&Sf(a,g,{x:u,y:d},{x:c,y:f},A,s,i,e)},_f=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=t,d=t.barSize||1,f=t.gap||1,A=t.winLoss,g=l||0,m=f/d*1;let y=Oi,p=Ni;if(A)y=-1,p=1;else for(const t of n)y=Math.min(y,t),p=Math.max(p,t);const S={x:0,y:A?-1:Math.min(0,y)},v={x:1*n.length+(n.length-1)*m,y:A?2:Math.max(p,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*m,y:A?t>=g?1:0:t},h=gf({x:1*i+i*m,y:A?t>=g?0:-1:0},S,v,s),r=gf(e,S,v,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.add().cs(r).Fe(t.position).Al(t.height).fl(t.width).Ce((s=t.value,A?(s>=g?u:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).we(a||e.sparkBarChartStrokeStyle)}))},wf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:l,markers:u}=t,c=n.length;c>1e4&&h.Hn&&Tt.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=Oi,f=Ni,A=Oi,g=Ni;for(let t=0;t<c;t+=1){const i=n[t];d=Math.min(d,i.x),f=Math.max(f,i.x),A=Math.min(A,i.y),g=Math.max(g,i.y)}const m={x:f-d,y:g-A},y=[],p=[];for(const t of n){const i=a(t.x,t.y,A);y.push(mf(i,{x:d,y:A},m,s)),p.push(gf(t,{x:d,y:A},m,s))}i.junction.add().cs(r).Nt().nl(y).Ce(o||e.sparkAreaChartFillStyle),i.lineSet.add().cs(r).Nt().nl(p).Re(l||e.sparkAreaChartStrokeStyle),u&&Sf(u,p,{x:d,y:A},{x:f,y:g},m,s,i,e)},Cf=(t,i,s,e,h,r)=>{const{data:o,strokeStyle:a}=t,l=o.map((t=>"number"==typeof t?t:t.value)),u=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=l.reduce(((t,i)=>t+i),0),d=gf(n(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],A=f.x<=f.y?f.x/2:f.y/2;let g=90;l.forEach(((t,s)=>{const h=t/c*360;i.arc.add().cs(r).Fe(d).hu(A).ou(0).eu(g).ze(g+h).Ce(u[s]||Si(e.sparkPieChartFillStyle,s)).we(a||e.sparkPieChartStrokeStyle),g+=h}))};var kf,Tf,Ff;!function(t){t[t.UpToDown=0]="UpToDown",t[t.LeftToRight=1]="LeftToRight"}(kf||(kf={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal",t[t.Both=2]="Both"}(Tf||(Tf={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Ff||(Ff={}));class If extends _r{constructor(t,i,s,e,h){super(),this.Ds=!1,this.C_={x:0,y:0,height:20,width:20},this.LI={x:10,y:10},this.ks=t,this.RI=h,this.EI=new Fn(t,i,s,Bt,e).setMouseInteractions(!0),this.zI=t.ic(i,fr.Simple).Ce(e.dataGridScrollBarButtonArrowFillStyle).we(e.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.xu(this),this.EI.onMouseEnter((t=>t.setHighlight(1))),this.EI.onMouseLeave((t=>t.setHighlight(0)))}VI(){switch(this.RI){case Ff.Up:this.zI.pl([{x:this.C_.x,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y-this.LI.y/2},{x:this.C_.x-this.LI.x/2,y:this.C_.y-this.LI.y/2}]);break;case Ff.Down:this.zI.pl([{x:this.C_.x-this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x,y:this.C_.y-this.LI.y/2}]);break;case Ff.Left:this.zI.pl([{x:this.C_.x-this.LI.x/2,y:this.C_.y},{x:this.C_.x+this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y-this.LI.y/2}]);break;case Ff.Right:this.zI.pl([{x:this.C_.x-this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y},{x:this.C_.x-this.LI.x/2,y:this.C_.y-this.LI.y/2}])}}Fe(t){return this.C_.x=t.x,this.C_.y=t.y,this}Fa(){return n(this.C_.x,this.C_.y)}q(t){return this.C_.height=t.x,this.C_.width=t.y,this}oi(){return{x:this.C_.height,y:this.C_.width}}onMouseDown(t){return this.EI.onMouseDown(t)}onMouseUp(t){return this.EI.onMouseUp(t)}setFillStyle(t){return this.EI.setFillStyle(t),this}getFillStyle(){return this.EI.getFillStyle()}setStrokeStyle(t){return this.EI.setStrokeStyle(t),this}getStrokeStyle(){return this.EI.getStrokeStyle()}Te(){return this.EI.Te(),this.VI(),this}Ps(){return this.EI.setSize(n(this.C_.height,this.C_.width)).setPosition(n(this.C_.x,this.C_.y)),this}setVisible(t){return this.EI.setVisible(t),this.zI.setVisible(t),this}dispose(){return this.EI.dispose(),this.zI.dispose(),this}setMouseInteractions(t){return this.EI.setMouseInteractions(t),this}getMouseInteractions(){return this.EI.getMouseInteractions()}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}getHighlight(){return this.EI.getHighlight()}setHighlight(t){return this.EI.setHighlight(Ci(t)),this.D.emit("highlight",this,Boolean(t)),this.ks.Ss(),this}}const Pf=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class Df{constructor(t,i,e,h,r,o,a){this.Kc={x:0,y:0},this.C_={x:0,y:0,height:0,width:0},this.D=new s,this.OI={min:n(0,0),max:n(0,0)},this.wM=!1,this.CM=!1,this.NI={x:0,y:0},this._u=void 0,this.GI=n(0,0),this.WI={x:0,y:0},this.UI=0,this.YI=15,this.kM=(t,i)=>{this.wM=!0,this.bA.Ss();const s=this.HI.getDraggingMode();this._u=this.bA.us.Wr(s===Ct.notDraggable?Pe.Restricted:s===Ct.draggable?Pe.Move:s===Ct.onlyHorizontal?Pe.Horizontal:Pe.Vertical),this.$I&&clearInterval(this.$I)},this.TM=()=>{this.wM=!1,this.bA.Ss(),this.bA.us.Ur(this._u)},this.FM=t=>(this.CM=!0,this.NI=At(this.bA.us.Pe(t.x,t.y),this.bA.us.dt,this.scale),!0),this.XI=(t,i)=>(this.jI(i),this.$I=setInterval((()=>this.jI(i)),300),!0),this.ZI=()=>(clearInterval(this.$I),!0),this.IM=(t,i)=>{const s=this.HI.getDraggingMode();if(s!==Ct.notDraggable){const e=i||s,h=At(this.bA.us.Pe(t.x,t.y),this.bA.us.dt,this.scale),r=n(e!==Ct.onlyVertical?Pf(h.x,this.scale.x):this.C_.x,e!==Ct.onlyHorizontal?Pf(h.y,this.scale.y):this.C_.y),o=n(r.x-this.NI.x,r.y-this.NI.y),a=n(this.HI.getPosition().x+o.x,this.HI.getPosition().y+o.y),l=this.QI(a),u={x:Math.abs(this.GI.x-l.x),y:Math.abs(this.GI.y-l.y)};return this.JI(u),this.WI.y>o.y&&(this.NI=h),this.Te(),!0}return!1},this.PM=(t,i)=>{this.CM=!1,ii(i),this.bA.Ss()},this.bA=t,this.qg=i,this.scale=h,this.contentScale=r,this.KI=a,this.qI=new If(t,e,h,o,a===kf.UpToDown?Ff.Up:Ff.Left).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.tP=new If(t,e,h,o,a===kf.UpToDown?Ff.Down:Ff.Right).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.HI=new Fn(t,e,h,Bt,o).setFillStyle(o.dataGridScrollBarFillStyle).setStrokeStyle(o.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(a===kf.UpToDown?Ct.onlyVertical:a===kf.LeftToRight?Ct.onlyHorizontal:Ct.notDraggable),this.iP=new Fn(i,e,h,Bt,o).setFillStyle(o.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(o.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.HI.onMouseEnter(this.kM),this.HI.onMouseLeave(this.TM),this.HI.onMouseDragStart(((t,i)=>this.FM(n(i.clientX,i.clientY))&&ii(i))),this.HI.onMouseDrag(((t,i)=>this.IM(n(i.clientX,i.clientY))&&ii(i))),this.HI.onMouseDragStop(this.PM),this.HI.onTouchStart(((t,i)=>this.FM(n(i.clientX,i.clientY))&&ii(i))),this.HI.onTouchMove(((t,i)=>this.IM(n(i.clientX,i.clientY))&&ii(i))),this.HI.onTouchEnd(this.PM),this.qI.onMouseDown(((t,i)=>this.XI(t,i)&&ii(i))),this.tP.onMouseDown(((t,i)=>this.XI(t,i)&&ii(i))),this.qI.onMouseUp(((t,i)=>this.ZI()&&ii(i))),this.tP.onMouseUp(((t,i)=>this.ZI()&&ii(i))),this.iP.onMouseWheel(((t,i)=>this.sP(i))),this.HI.onMouseWheel(((t,i)=>this.sP(i))),this.iP.onMouseDown(((t,i)=>this.XI(t,i)&&ii(i))),this.iP.onMouseUp(((t,i)=>this.ZI()&&ii(i)))}eP(t){return this.C_=t,this}fl(t){return this.C_.width=t,this}hP(){return this.C_.width}rP(t){return this.GI=t,this}nP(t){return this.Kc=t,this}oP(){return this.Kc}aP(t){return this.YI=t,this}lP(){return this.KI}uP(t){let i;switch(this.KI){case kf.UpToDown:return i=t>0?Math.min(this.GI.y-this.OI.max.y,this.WI.y+t):Math.max(0,this.WI.y+t),i!==this.WI.y&&(this.JI({x:0,y:i}),this.Te(),!0);case kf.LeftToRight:return i=Math.min(this.OI.max.x-this.GI.x,this.WI.x+t),i!==this.WI.x&&(this.JI({y:0,x:i}),this.Te(),!0);default:return!1}}cP(t){let i;switch(this.KI){case kf.UpToDown:return i=Math.max(0,this.WI.y-t),i!==this.WI.y&&(this.JI({x:0,y:i}),this.Te(),!0);case kf.LeftToRight:return i=t>0?Math.max(0,this.WI.x-t):Math.min(this.OI.max.x-this.GI.x,this.WI.x-t),i!==this.WI.x&&(this.JI({x:i,y:0}),this.Te(),!0);default:return!0}}dP(t){switch(this.KI){case kf.UpToDown:return this.D.on("scrollY",t);case kf.LeftToRight:return this.D.on("scrollX",t)}return this.D.on("scrollY",t)}QI(t){switch(this.KI){case kf.UpToDown:if(t.y>this.OI.min.y)return n(t.x,this.OI.min.y);if(t.y<this.OI.max.y)return n(t.x,this.OI.max.y);break;case kf.LeftToRight:if(t.x<this.OI.min.x)return n(this.OI.min.x,t.y);if(t.x>this.OI.max.x)return n(this.OI.max.x,t.y)}return t}sP(t){t.deltaY>0&&this.fP()&&ii(t),t.deltaY<0&&this.AP()&&ii(t)}jI(t){const i=At(this.bA.us.Pe(t.clientX,t.clientY),this.bA.us.dt,this.scale);let s;const e=this.HI.getPosition(),h=this.HI.getSize();this.gP(i,e,h)?clearInterval(this.$I):(s=this.KI===kf.UpToDown?n(0,i.y-e.y>0?this.YI:-this.YI):n(e.x-i.x>0?this.YI:-this.YI,0),(s.x>0||s.y>0)&&this.mP(0!==s.x?Math.abs(s.x):Math.abs(s.y)),(s.x<0||s.y<0)&&this.yP(0!==s.x?Math.abs(s.x):Math.abs(s.y)))}gP(t,i,s){return this.KI===kf.UpToDown?t.y<i.y+s.y/2&&t.y>i.y-s.y/2:t.x>i.x-s.x/2&&t.x<i.x+s.x/2}pP(t){this.OI=t}mP(t){switch(this.KI){case kf.UpToDown:{const i=Math.max(0,this.WI.y-t);return i!==this.WI.y&&(this.JI({x:0,y:i}),this.Te(),!0)}case kf.LeftToRight:{const i=Math.max(0,this.WI.x-t);return i!==this.WI.x&&(this.JI({x:i,y:0}),this.Te(),!0)}default:return!1}}yP(t){switch(this.KI){case kf.UpToDown:{let i;return i=this.Kc.x>this.C_.height?Math.min(this.GI.y-this.OI.max.y,this.WI.y+t):0,i!==this.WI.y&&(this.JI({x:0,y:i}),this.Te(),!0)}case kf.LeftToRight:{const i=Math.min(this.OI.max.x-this.GI.x,this.WI.x+t);return i!==this.WI.x&&(this.JI({y:0,x:i}),this.Te(),!0)}default:return!1}}AP(){return this.mP(this.YI)}fP(){return this.yP(this.YI)}JI(t){if(t.x===this.WI.x&&t.y===this.WI.y)return;let i;switch(this.WI=t,this.KI){case kf.UpToDown:i=this.WI.y*this.UI*this.contentScale.Wi().y,this.D.emit("scrollY",Tf.Vertical,i),this.bA.us.Ss();break;case kf.LeftToRight:i=this.WI.x*this.UI*this.contentScale.Wi().x,this.D.emit("scrollX",Tf.Horizontal,i)}}setVisible(t){return this.qI.setVisible(t),this.tP.setVisible(t),this.iP.setVisible(t),this.HI.setVisible(t),this}dispose(){return this.qI.dispose(),this.tP.dispose(),this.iP.dispose(),this.HI.dispose(),this.$I&&clearInterval(this.$I),this}Ps(){switch(this.SP(),this.vP(),this.KI){case kf.UpToDown:this.qI.Fe({x:this.C_.x,y:this.C_.y+this.C_.height-this.qI.oi().x/2}).q(n(this.C_.width,this.C_.width)).Ps(),this.tP.Fe({x:this.C_.x,y:this.C_.y+10}).q(n(this.C_.width,this.C_.width)).Ps(),this.iP.setSize({x:this.C_.width,y:this.C_.height-2*this.qI.oi().x}).setPosition({x:this.C_.x,y:this.C_.y+this.tP.oi().y+this.iP.getSize().y/2}),this.HI.setSize(n(this.C_.width,this.bP())),this.GI={x:this.C_.x,y:this.qI.Fa().y-this.qI.oi().y/2-this.HI.getSize().y/2},this.pP({min:{x:this.C_.x,y:this.qI.Fa().y-this.qI.oi().y/2-this.HI.getSize().y/2},max:{x:this.C_.x,y:this.tP.Fa().y+this.tP.oi().x/2+this.HI.getSize().y/2}});break;case kf.LeftToRight:this.qI.Fe({x:this.C_.x,y:this.C_.y}).q(n(this.C_.height,this.C_.height)).Ps(),this.tP.Fe({x:this.C_.x+this.C_.width-this.tP.oi().x,y:this.C_.y}).q(n(this.C_.height,this.C_.height)).Ps(),this.iP.setSize({y:this.C_.height,x:this.C_.width-2*this.qI.oi().y}).setPosition({x:this.C_.x+this.qI.oi().x/2+this.iP.getSize().x/2,y:this.C_.y}),this.HI.setSize(n(this.bP(),this.C_.height)),this.GI={x:this.qI.Fa().x+this.qI.oi().x/2+this.HI.getSize().x/2,y:this.C_.y},this.pP({min:{x:this.qI.Fa().x+this.qI.oi().x/2+this.HI.getSize().x/2,y:this.C_.y},max:{x:this.tP.Fa().x-this.tP.oi().x/2-this.HI.getSize().x/2,y:this.C_.y}})}return this.xP(),this}SP(){switch(this.KI){case kf.UpToDown:this.MP()||this.setVisible(!1),this.MP()&&this.setVisible(!0);break;case kf.LeftToRight:this._P()||this.setVisible(!1),this._P()&&this.setVisible(!0)}}vP(){switch(this.KI){case kf.UpToDown:this.MP()||this.JI({x:0,y:0});break;case kf.LeftToRight:this._P()||this.JI({x:0,y:0})}}MP(){return this.Kc.x>this.C_.height}_P(){return this.Kc.y>this.C_.width}bP(){switch(this.KI){case kf.UpToDown:return this.C_.height*(this.C_.height-2*this.qI.oi().x)/this.Kc.x;case kf.LeftToRight:return this.C_.width*(this.C_.width-2*this.qI.oi().y)/this.Kc.y;default:return 0}}xP(){switch(this.KI){case kf.UpToDown:this.UI=(this.Kc.x-this.C_.height)/(this.OI.min.y-this.OI.max.y);break;case kf.LeftToRight:this.UI=(this.Kc.y-this.C_.width)/(this.OI.max.x-this.OI.min.x)}}Te(){switch(this.qI.Te(),this.tP.Te(),this.iP.Te(),this.KI){case kf.UpToDown:this.HI.setPosition({x:this.C_.x,y:this.qI.Fa().y-this.qI.oi().y/2-this.HI.getSize().y/2-this.WI.y}).Te();break;case kf.LeftToRight:this.HI.setPosition({y:this.C_.y,x:this.qI.Fa().x+this.qI.oi().x/2+this.HI.getSize().x/2+this.WI.x}).Te()}return this}}class Bf{constructor(t,i,s,e,h,r,n){switch(this.bA=t,this.qg=i,this.scale=e,this.contentScale=h,n){case Tf.Vertical:this.wP=this.CP(s,r,kf.UpToDown);break;case Tf.Horizontal:this.kP=this.CP(s,r,kf.LeftToRight);break;case Tf.Both:this.wP=this.CP(s,r,kf.UpToDown),this.kP=this.CP(s,r,kf.LeftToRight)}this.TP=Ks(new te(void 0,((t,i,s,e,h)=>{var r,n;0!==e.x&&(null===(r=this.kP)||void 0===r?void 0:r.cP(e.x))&&ii(h),0!==e.y&&(null===(n=this.wP)||void 0===n?void 0:n.uP(e.y))&&ii(h)})))}CP(t,i,s){return new Df(this.bA,this.qg,t,this.scale,this.contentScale,i,s)}hP(){return 20}nP(t){var i,s;return null===(i=this.wP)||void 0===i||i.nP(t),null===(s=this.kP)||void 0===s||s.nP(t),this}FP(t){var i;return null===(i=this.kP)||void 0===i||i.aP(t),this}IP(t){var i;return null===(i=this.wP)||void 0===i||i.aP(t),this}PP(t){const i=this.wP;return i&&i.sP(t),this}DP(t){return this.TP.onTouchStart(this,t),this}BP(t){return this.TP.onTouchMove(this,t),this}LP(t){return this.TP.onTouchEnd(this,t),this}onScroll(t){var i,s;return null===(i=this.kP)||void 0===i||i.dP(t),null===(s=this.wP)||void 0===s||s.dP(t),this}dispose(){var t,i;return null===(t=this.wP)||void 0===t||t.dispose(),null===(i=this.kP)||void 0===i||i.dispose(),this}Te(){var t,i;return null===(t=this.wP)||void 0===t||t.Te(),null===(i=this.kP)||void 0===i||i.Te(),this}Ps(){var t,i,s,e;const h=this.scale.x,r=this.scale.y;return null===(t=this.wP)||void 0===t||t.eP({x:h.getInnerEnd()-10,y:r.getInnerStart()+20,height:r.getInnerEnd()-20,width:20}),null===(i=this.kP)||void 0===i||i.eP({x:h.getInnerStart()+10,y:r.getInnerStart()+10,height:20,width:h.getInnerEnd()-20}),null===(s=this.wP)||void 0===s||s.Ps(),null===(e=this.kP)||void 0===e||e.Ps(),this}}class Lf extends pa{constructor(t,i,s,e,h,r){super(t,i,s,i.vm("dataGrid bg",0),e,i.us.qi.dataGridBackgroundFillStyle,i.us.qi.dataGridBackgroundStrokeStyle,i.us.qi.dataGridTitleFont,i.us.qi.dataGridTitleFillStyle,r),this.RP=[],this.EP=[],this.zP=[],this.VP=new Map,this.OP=!0,this.NP=!0,this.GP=!0,this.WP=!0,this.UP=!0,this.YP=!0,this.HP=!0,this.$P=!0,this.XP=!0,this.jP=!0,this.ZP=!0,this.QP=!0,this.JP=!0,this.KP=!0,this.qP=!0,this.tD=!0,this.iD=new Set,this.sD=new Set,this.eD=!0,this.hD=!0,this.rD=(t,i)=>{t.borders=void 0===i?Of:{...t.borders,...i},this.nD(t),this.QP=!0,this.us.Ss()},this.nD=t=>{t.borders&&(!1===t.borders.top&&this.oD(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.aD,bottom:!1}})),!1===t.borders.bottom&&this.oD(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.aD,top:!1}})),!1===t.borders.left&&this.oD(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.aD,right:!1}})),!1===t.borders.right&&this.oD(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.aD,left:!1}})),!0===t.borders.top&&this.oD(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.aD,bottom:!0}})),!0===t.borders.bottom&&this.oD(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.aD,top:!0}})),!0===t.borders.left&&this.oD(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.aD,right:!0}})),!0===t.borders.right&&this.oD(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.aD,left:!0}})))},this.lD=(t,i)=>{const s=this.VP.get(t);s&&this.D.emit(Rf.cellMouseEnter,s,i)},this.uD=(t,i)=>{const s=this.VP.get(t);s&&this.D.emit(Rf.cellMouseLeave,s,i)},this.cD=(t,i)=>{const s=this.VP.get(t);s&&this.D.emit(Rf.cellMouseClick,s,i)},this.dD=(t,i)=>{const s=this.VP.get(t);s&&this.D.emit(Rf.cellMouseDoubleClick,s,i)},this.fD=(t,i)=>{const s=this.VP.get(t);s&&this.D.emit(Rf.cellMouseDown,s,i)},this.AD=(t,i)=>{const s=this.VP.get(t);s&&this.D.emit(Rf.cellMouseUp,s,i)},this.gD=(t,i)=>{const s=this.VP.get(t);s&&this.D.emit(Rf.cellMouseMove,s,i)},this.mD=(t,i)=>{const s=this.VP.get(t);s&&this.D.emit(Rf.cellMouseDrag,s,i)},this.yD=(t,i)=>{const s=this.VP.get(t);s&&this.D.emit(Rf.cellMouseDragStart,s,i)},this.pD=(t,i)=>{const s=this.VP.get(t);s&&this.D.emit(Rf.cellMouseDragStop,s,i)},this.SD=(t,i)=>{const s=this.VP.get(t);s&&(this.D.emit(Rf.cellMouseWheel,s,i),!i.defaultPrevented&&this.eD&&this.vD.PP(i))},this.bD=(t,i)=>{const s=this.VP.get(t);s&&(this.D.emit(Rf.cellTouchStart,s,i),!i.defaultPrevented&&this.hD&&this.vD.DP(i))},this.xD=(t,i)=>{const s=this.VP.get(t);s&&(this.D.emit(Rf.cellTouchMove,s,i),!i.defaultPrevented&&this.hD&&this.vD.BP(i))},this.MD=(t,i)=>{const s=this.VP.get(t);s&&(this.D.emit(Rf.cellTouchEnd,s,i),!i.defaultPrevented&&this.hD&&this.vD.LP(i))},this.us.Nn(_o.if),this._m.Rh("Data Grid"),this._D=s.d2({scaleXYConstructor:Gs}),this._D.x.ig=df,this.wD=s.d2({scaleXYConstructor:Gs}),this.CD={x:0,y:0},this.kD=this.qi.dataGridTextFont,this.TD=this.qi.dataGridTextFillStyle,this.aD={top:!0,bottom:!0,left:!0,right:!0},this.FD=this.qi.dataGridCellBackgroundFillStyle,this.ID=this.qi.dataGridBorderStrokeStyle,this.PD="left-center",this.DD={left:5,right:5,bottom:5,top:5},this.BD=i.ob("dataGrid grid bg",0),this.LD=i.ob("dataGrid cell bg",1),this.RD=i.$y("dataGrid cell content",0),this.ED=i.$y("dataGrid scrollbar bg",1),this.zD=i.$y("dataGrid scrollbar fg",2),this.vD=this.VD(),this.onBackgroundMouseWheel(((t,i)=>{this.eD&&this.vD.PP(i)})),this.onBackgroundTouchStart(((t,i)=>{this.hD&&this.vD.DP(i)})),this.onBackgroundTouchMove(((t,i)=>{this.hD&&this.vD.BP(i)})),this.onBackgroundTouchEnd(((t,i)=>{this.hD&&this.vD.LP(i)})),this.OD=this.BD.ke(this._D).Ce(this.qi.dataGridBackgroundFillStyle).we(at).setMouseInteractions(!1),this.ND=this.RD.Lg(this._D).setMouseInteractions(!1),this.GD=new ul((()=>this.LD.ke(this._D).setMouseInteractions(!0).setMouseEnterEventHandler(this.lD).setMouseLeaveEventHandler(this.uD).setMouseClickEventHandler(this.cD).setMouseDoubleClickEventHandler(this.dD).setMouseDownEventHandler(this.fD).setMouseUpEventHandler(this.AD).setMouseMoveEventHandler(this.gD).setMouseDragEventHandler(this.mD).setMouseDragStartEventHandler(this.yD).setMouseDragStopEventHandler(this.pD).setMouseWheelEventHandler(this.SD).setTouchStartEventHandler(this.bD).setTouchMoveEventHandler(this.xD).setTouchEndEventHandler(this.MD))),this.WD=new ul((()=>this.RD.ke(this._D).setMouseInteractions(!1))),this.UD=new ul((()=>this.RD.Pr(this._D).setMouseInteractions(!1))),this.YD=new ul((()=>this.RD.rp(this._D,{},[el.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1))),this.HD=new ul((()=>this.RD.Ee(this._D).setMouseInteractions(!1))),this.$D=new ul((()=>this.RD.bS(this._D).setMouseInteractions(!1))),this.XD=new ul((()=>this.RD.ke(this._D).setMouseInteractions(!1))),this.jD=new ul((()=>this.RD.lw(this._D).setMouseInteractions(!1))),this.ZD=new ul((()=>this.RD.Jc(this._D).setMouseInteractions(!1))),this.Sm(h,this.uiScale),this.onResize((()=>{this.OP=!0,this.us.Ss(),this._D.q(this.pixelScale.oi()),this.wD.q(this.pixelScale.oi())})),this.QD=this.es.yg([this.OD])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}Zd(){return[]}dispose(){return super.dispose(),this.BD.W(),this.LD.W(),this.RD.W(),this.ED.W(),this.zD.W(),ga(this._D),ga(this.wD),this.vD.dispose(),this.UD.gp(),this.GD.gp(),this.WD.gp(),this.YD.gp(),this.HD.gp(),this.$D.gp(),this.XD.gp(),this.jD.gp(),this.ZD.gp(),this}j(){return super.j(),this._D.j(),this.wD.j(),this}Z(){return super.Z(),this._D.Z(),this.wD.Z(),this}setBackgroundEffect(t){return this.QD.ps(t),this.us.Ss(),this}getBackgroundEffect(){return this.QD.vs()}setInteractionScrollOnWheel(t){return this.eD=t,this}getInteractionScrollOnWheel(){return this.eD}setInteractionPanOnTouch(t){return this.hD=t,this}getInteractionPanOnTouch(){return this.hD}onCellMouseEnter(t){return this.D.on(Rf.cellMouseEnter,t)}offCellMouseEnter(t){return this.D.off(t)}onCellMouseLeave(t){return this.D.on(Rf.cellMouseLeave,t)}offCellMouseLeave(t){return this.D.off(t)}onCellMouseClick(t){return this.D.on(Rf.cellMouseClick,t)}offCellMouseClick(t){return this.D.off(t)}onCellMouseDoubleClick(t){return this.D.on(Rf.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.D.off(t)}onCellMouseDown(t){return this.D.on(Rf.cellMouseDown,t)}offCellMouseDown(t){return this.D.off(t)}onCellMouseUp(t){return this.D.on(Rf.cellMouseUp,t)}offCellMouseUp(t){return this.D.off(t)}onCellMouseMove(t){return this.D.on(Rf.cellMouseMove,t)}offCellMouseMove(t){return this.D.off(t)}onCellMouseDrag(t){return this.D.on(Rf.cellMouseDrag,t)}offCellMouseDrag(t){return this.D.off(t)}onCellMouseDragStart(t){return this.D.on(Rf.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.D.off(t)}onCellMouseDragStop(t){return this.D.on(Rf.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.D.off(t)}onCellMouseWheel(t){return this.D.on(Rf.cellMouseWheel,t)}offCellMouseWheel(t){return this.D.off(t)}onCellTouchStart(t){return this.D.on(Rf.cellTouchStart,t)}offCellTouchStart(t){return this.D.off(t)}onCellTouchMove(t){return this.D.on(Rf.cellTouchMove,t)}offCellTouchMove(t){return this.D.off(t)}onCellTouchEnd(t){return this.D.on(Rf.cellTouchEnd,t)}offCellTouchEnd(t){return this.D.off(t)}setGridBackgroundFillStyle(t){return this.OD.Ce(t),this.us.Ss(),this}getGridBackgroundFillStyle(){return this.OD.Eh()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const r=s,n=e,o=h;let a=[];for(let s=t;s<t+r;s+=1)for(let t=i;t<i+n;t+=1){const i=this.oD(s,t);i&&a.push(i)}a=_i(a);let l={highlight:0};for(const t of a){const i=this.RP.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.RP.splice(i,1))}const u={...l,column:t,row:i,columnSpan:r,rowSpan:n,content:o};this.RP.push(u),this.WP=!0,"string"==typeof u.content||"number"==typeof u.content?this.NP=!0:this.GP=!0,this.us.Ss()}else this.JD(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.JD(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.JD(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.JD(e,s,i)}return this}setColumnWidth(t,i){let s=this.EP.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.EP.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.EP.splice(this.EP.indexOf(s),1):(s.min=i,s.max=i),this.YP=!0,this.us.Ss(),this}setRowHeight(t,i){let s=this.zP.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.zP.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.zP.splice(this.zP.indexOf(s),1):(s.min=i,s.max=i),this.YP=!0,this.us.Ss(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=g(i,i,i,i)),this.KD(t,(t=>this.qD(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=g(i,i,i,i)),this.tB(t,(t=>this.qD(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=g(s,s,s,s)),this.oD(t,i,(t=>this.qD(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=g(t,t,t,t)),this.DD={...this.DD,...t},this.iB((t=>this.qD(t,this.DD))),this}setCellBorders(t,i,s){return this.oD(t,i,(t=>this.rD(t,s))),this}setRowBorders(t,i){return this.tB(t,(t=>this.rD(t,i))),this}setColumnBorders(t,i){return this.KD(t,(t=>this.rD(t,i))),this}setCellsBorders(t){return this.aD=void 0===t?Of:t,this.iB((t=>this.rD(t,this.aD))),this}setCellsBorderStrokeStyle(t){return this.ID="function"==typeof t?t(this.ID):t,this.KP=!0,this.us.Ss(),this}setColumnTextFillStyle(t,i){return this.KD(t,(t=>this.sB(t,i))),this}setRowTextFillStyle(t,i){return this.tB(t,(t=>this.sB(t,i))),this}setCellTextFillStyle(t,i,s){return this.oD(t,i,(t=>this.sB(t,s))),this}setCellsTextFillStyle(t){return this.TD="function"==typeof t?t(this.TD):t,this.iB((t=>this.sB(t,this.TD))),this}setColumnTextFont(t,i){return this.KD(t,(t=>this.eB(t,i))),this}setRowTextFont(t,i){return this.tB(t,(t=>this.eB(t,i))),this}setCellTextFont(t,i,s){return this.oD(t,i,(t=>this.eB(t,s))),this}setCellsTextFont(t){return this.kD="function"==typeof t?t(this.kD):t,this.iB((t=>this.eB(t,this.kD))),this}setColumnContentAlignment(t,i){return this.KD(t,(t=>this.hB(t,i))),this}setRowContentAlignment(t,i){return this.tB(t,(t=>this.hB(t,i))),this}setCellContentAlignment(t,i,s){return this.oD(t,i,(t=>this.hB(t,s))),this}setCellsContentAlignment(t){return this.PD=t,this.iB((t=>this.hB(t,this.PD))),this}setCellBackgroundFillStyle(t,i,s){return this.oD(t,i,(t=>this.rB(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.KD(t,(t=>this.rB(t,i))),this}setRowBackgroundFillStyle(t,i){return this.tB(t,(t=>this.rB(t,i))),this}setCellsBackgroundFillStyle(t){return this.FD="function"==typeof t?t(this.FD):t,this.iB((t=>this.rB(t,this.FD))),this}setCellHighlight(t,i,s){return this.oD(t,i,(t=>{t.highlight=Ci(s)})),this.JP=!0,this.us.Ss(),this}setColumnHighlight(t,i){const s=Ci(i);return this.KD(t,(t=>{t.highlight=s})),this.JP=!0,this.us.Ss(),this}setRowHighlight(t,i){const s=Ci(i);return this.tB(t,(t=>{t.highlight=s})),this.JP=!0,this.us.Ss(),this}removeCell(t,i){return this.oD(t,i,(t=>this.RP.splice(this.RP.indexOf(t),1))),this.UP=!0,this.us.Ss(),this}removeRow(t){return this.tB(t,(t=>this.RP.splice(this.RP.indexOf(t),1))),this.RP.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.UP=!0,this.us.Ss(),this}removeColumn(t){return this.KD(t,(t=>this.RP.splice(this.RP.indexOf(t),1))),this.RP.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.UP=!0,this.us.Ss(),this}removeCells(){return this.RP.splice(0),this.UP=!0,this.us.Ss(),this}getColumnMax(){return 0===this.RP.length?0:this.RP.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.RP.length?0:this.RP.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}Te(t){super.Te(t),Sa.Fm(this._m,this.bm),super.pm();const i=Math.round(this.ID.V()),s=i/2;let e=this.NP||this.GP||this.WP||this.UP||this.YP||this.HP||this.ZP||this.QP||this.KP||this.tD;if(e){this.RP.forEach((t=>{this.sD.add(t.column)})),this.RP.forEach((t=>{this.iD.add(t.row)}));const t=this.UD.fp(),h=this.nB(s,t);t.finishPlot();const r=this.oB(this.sD.size,h),n=this.aB(this.iD.size,h),o=r.reduce(ji,0)+i,a=n.reduce(ji,0)+i,l=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.lB){const t=this.lB.columnWidths.every(((t,i)=>t===r[i])),i=this.lB.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(e=!1)}this.lB={columnWidths:r,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:h}}const h=e||this.GP||this.WP||this.UP||this.$P||this.XP||this.jP||this.QP||this.JP||this.KP||this.OP||this.tD;if((h||this.qP)&&this.lB){const t=this.pixelScale.getInnerIntervalPixels(),e=Sa.Tm(this._m,this.bm),r=[this.ya.left+s,this.ya.right+s],n=[this.ya.bottom+s,this.ya.top+e+s],o={x:t.x-r[0]-r[1],y:t.y-n[0]-n[1]},a=[this.ya.left,this.ya.right],l=[this.ya.bottom,this.ya.top+e],u={x:Math.round(t.x-a[0]-a[1]),y:Math.round(t.y-l[0]-l[1])},c={x:Math.ceil(s),y:Math.floor(u.y-s)};this.wD.Ei(r).zi(n).Vi(0,o.x).Oi(0,o.y),this.vD.nP({x:this.lB.dataGridHeight,y:this.lB.dataGridWidth}).Ps().Te();const d={x:Math.round(this.CD.x),y:Math.round(Math.min(0,this.CD.y))};this._D.Ei(a).zi(l).Vi(d.x,u.x+d.x).Oi(d.y,u.y+d.y),this.OD.Fe({x:c.x,y:c.y});const f={x:this._D.x.ei(),y:this._D.y.ei()+this.vD.hP(),width:this._D.x.ri()+i-this.vD.hP(),height:this._D.y.ri()+i};this.RD.qv(f),this.LD.qv(f),this.BD.qv(f);const A=this.lB,g=[{x:this._D.x.getInnerStart(),y:this._D.y.getInnerStart()},{x:this._D.x.getInnerEnd(),y:this._D.y.getInnerStart()},{x:this._D.x.getInnerEnd(),y:this._D.y.getInnerEnd()},{x:this._D.x.getInnerStart(),y:this._D.y.getInnerEnd()}];A.cellsContentSizes.forEach((t=>{var i;const s={x:c.x+A.columnWidthsCumulative[t.cell.column],y:c.y-A.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},e={x:s.x+A.columnWidths[t.cell.column],y:s.y+A.rowHeights[t.cell.row]},h=Hi([s,{x:e.x,y:s.y},e,{x:s.x,y:e.y}],g);null===(i=t.text)||void 0===i||i.setVisible(h)})),h&&this.uB(c,this.lB,i)}this.OP=!1,this.NP=!1,this.GP=!1,this.WP=!1,this.UP=!1,this.YP=!1,this.HP=!1,this.$P=!1,this.XP=!1,this.jP=!1,this.ZP=!1,this.QP=!1,this.JP=!1,this.KP=!1,this.qP=!1,this.tD=!1}nB(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.RP){const{content:h}=t,r={...this.DD,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof h||"number"==typeof h){const s=String(h);n=i.add(),l=n.Rh(s).Oh(t.textFont||this.kD).Ps().jc()}if(ff(h)&&(o=h,l={x:200,y:50}),mn(h)){const t=this.us.cB(h);t.dB()?(a=h,l=a.oi()):t.fB((()=>{this.tD=!0,this.us.Ss()}))}if(n||o||a){r.top=Math.round(r.top),r.left=Math.round(r.left),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom);const i={x:Math.round(l.x+r.left+r.right+e.left+e.right),y:Math.round(l.y+r.top+r.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:r,cellMargin:e})}}return s}uB(t,i,s){const{dataGridWidth:e,dataGridHeight:h,cellsContentSizes:r,columnWidths:n,columnWidthsCumulative:o,rowHeights:a,rowHeightsCumulative:l}=i,u={x:e-s,y:-h+s};this.OD.q(u),this.ND.Re(this.ID),this.VP.clear();const c={cellBackground:this.GD.fp(),cellIconRect:this.WD.fp(),lineSet:this.YD.fp(),line:this.HD.fp(),pointSet:this.$D.fp(),rect:this.XD.fp(),junction:this.jD.fp(),arc:this.ZD.fp()},d=[];for(const i of r){const{cell:e,text:h,sparkChart:r,icon:u,cellPadding:f,cellMargin:A}=i,g={column:e.column,row:e.row},m={x:t.x+o[e.column],y:t.y-l[e.row+e.rowSpan]},y={x:m.x+A.left,y:m.y+A.bottom},p={x:y.x+f.left,y:y.y+f.bottom},S={x:new Array(e.columnSpan).fill(0).reduce(((t,i,s)=>t+n[e.column+s]),0),y:new Array(e.rowSpan).fill(0).reduce(((t,i,s)=>t+a[e.row+s]),0)},v={x:S.x-A.left-A.right,y:S.y-A.top-A.bottom},b={x:v.x-f.left-f.right,y:v.y-f.top-f.bottom};if(h){const t=Vf(p,b,e.contentAlignment||this.PD);h.Fe(t[0]).Ea({x:t[1],y:t[2]}).Ce(this.AB(e.textFillStyle||this.TD,e.content,this.TD)).cs(e.highlight)}const x=this.AB(e.backgroundFillStyle||this.FD,e.content);if(x!==O){const t=c.cellBackground.add();t.Fe(m).q(S).Ce(x).we(at).cs(e.highlight),this.VP.set(t,g)}const M=e.borders||this.aD;if(M&&zf(m,S,M,s,d),r){const t=p,i=b;Af(r,c,this._D,t,i,this.qi,this.cA,e.highlight)}if(u){const t=u.oi(),i=Vf(p,b,e.contentAlignment||this.PD);c.cellIconRect.add().Fe({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).q(t).Ce(new an({source:u.rc,fitMode:nn.Stretch})).we(at).cs(e.highlight)}}this.ND.Nt();for(const t of d)this.ND.zr().Eg(t[0],t[1]);c.cellBackground.finishPlot(),c.cellIconRect.finishPlot(),c.lineSet.finishPlot(),c.line.finishPlot(),c.pointSet.finishPlot(),c.rect.finishPlot(),c.junction.finishPlot(),c.arc.finishPlot()}oB(t,i){const s=new Array(t).fill(0);for(const t of this.sD.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.EP.find((i=>i.column===t)),r=h?Rt(e,void 0!==h.min?h.min:Ni,void 0!==h.max?h.max:Oi):e;s[t]=r}return s}aB(t,i){const s=new Array(t).fill(0);for(const t of this.iD.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.zP.find((i=>i.row===t)),r=h?Rt(e,void 0!==h.min?h.min:Ni,void 0!==h.max?h.max:Oi):e;s[t]=r}return s}AB(t,i,s){if(Z(t)){try{const s=Number(i);return new U({color:t.getPalette().getColors(s)})}catch(t){}return s||O}return t}sB(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.TD):i,this.jP=!0,this.us.Ss()}eB(t,i){t.textFont="function"==typeof i?i(t.textFont||this.kD):i,this.ZP=!0,this.us.Ss()}rB(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.FD):i,this.XP=!0,this.us.Ss()}hB(t,i){t.contentAlignment=i,this.$P=!0,this.us.Ss()}qD(t,i){t.padding={...t.padding,...i},this.HP=!0,this.us.Ss()}JD(t,i,s){let e=this.oD(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.RP.push(e),this.WP=!0),"string"==typeof e.content||"number"==typeof e.content?this.NP=!0:this.GP=!0,this.us.Ss()}iB(t){this.RP.forEach((i=>t(i)))}oD(t,i,s){const e=this.RP.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}KD(t,i){const s=this.RP.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}tB(t,i){const s=this.RP.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}VD(){return new Bf(this.zD,this.ED,this.wD,this.wD,this._D,this.qi,Tf.Both).onScroll(((t,i)=>{this.lB&&(t===Tf.Vertical&&(this.CD.y=-i),t===Tf.Horizontal&&(this.CD.x=i),this.qP=!0,this.us.Ss())})).FP(50).IP(12)}}const Rf={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var Ef;!function(t){t.Center="center",t.RightCenter="right-center",t.LeftCenter="left-center",t.RightTop="right-top",t.LeftTop="left-top",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.CenterTop="center-top",t.CenterBottom="center-bottom"}(Ef||(Ef={}));const zf=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},Vf=(t,i,s)=>{const e=t.x,h=t.x+i.x,r=t.x+i.x/2,o=t.y+i.y,a=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[n(e,l),-1,0];case"right-center":return[n(h,l),1,0];case"center":return[n(r,l),0,0];case"left-bottom":return[n(e,a),-1,-1];case"right-bottom":return[n(h,a),1,-1];case"center-bottom":return[n(r,a),0,-1];case"left-top":return[n(e,o),-1,1];case"right-top":return[n(h,o),1,1];case"center-top":return[n(r,o),0,1]}return Ti(0,`Unidentified DataGrid cell content alignment option: ${s}`)},Of={top:!1,bottom:!1,left:!1,right:!1};class Nf extends eh{constructor(t,i,s,e,h,r){super(t,{Sr(){},pr(){},br(){}},e,i,s,{numeric:i.xAxisNumericTicks,datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.es=r,this.ks=h,this.Lh=h.Pr(t.gB).Oh(this.qi.barChartCategoryAxisTitleFont||this.qi.xAxisTitleFont).Ce(this.qi.barChartCategoryAxisTitleFillStyle||this.qi.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Ts.getWidth({x:0,y:-90})),this.Wh=this.es.yg([this.Lh]).ps(i.effectsText),this.mB=h.Ee(t.gB).Re(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.xg=t,this.Mg=t):"object"==typeof t&&(this.xg=t.min,this.Mg=t.max),this.chart.us.Ss(),this}getThickness(){return{min:this.xg,max:this.Mg}}setStrokeStyle(t){return this.mB.Re(t),this.chart.us.Ss(),this}getStrokeStyle(){return this.mB.uu()}Ps(){if(!this.Xi)return{kg:0,Tg:0,Vd:Rt(0,void 0!==this.xg?this.xg:0,void 0!==this.Mg?this.Mg:Oi)};const t=this.mB.uu().V()/2,i=this.chart.Ts.getHeight(this.Lh.Ps().jc());return{kg:t,Tg:i,Vd:t+i}}Te(t,i,s,e){const h=this.getInterval(),r=this.chart.valueAxis.getInterval();this.mB.Ve(this.chart.Ts.toPoint(h.start,r.start)).ze(this.chart.Ts.toPoint(h.end,r.start)).setVisible(this.Xi),this.Lh.Fe(this.chart.Ts.toPoint(.5*(h.start+h.end),this.chart.valueAxis.dt.mi(r.start,-(t.kg+e.labelMarginBeforeCategoryAxisPixels)))).Ea(this.chart.Ts.toPoint(0,1)).setVisible(this.Xi)}setMouseInteractions(t){return this}ur(t,i){return new hh(i,t,this.ks,this.chart.gB)}cr(t,i){return{}}_r(t,i){return i}Cr(t,i,s){return{min:t,max:i}}}class Gf extends eh{constructor(t,i,s,e,h,r,n){super(t,{Sr:()=>{var i;if(t.yB){if("positive"===t.pB||"bipolar"===t.pB){if("after-bar"===(null===(i=t.SB)||void 0===i?void 0:i.position)){const i=this.dt.ri();return this.dt.mi(t.yB.max,Math.min(this.chart.Ts.getHeight(this.chart.vB())+t.SB.labelMargin,.3*i))}return t.yB.max}return t.bB?Rt(-1,-1e-6,t.yB.max):0}},pr:()=>{var i;if(t.yB){if("negative"===t.pB||"bipolar"===t.pB){if("after-bar"===(null===(i=t.SB)||void 0===i?void 0:i.position)){const i=this.dt.ri();return this.dt.mi(t.yB.min,-Math.min(this.chart.Ts.getHeight(this.chart.vB())+t.SB.labelMargin,.3*i))}return t.yB.min}return t.bB?Rt(1,1e-6,t.yB.min):0}},br:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.chart=t,this.es=r,this.ks=h,this.Lh=h.Pr(t.gB).Oh(this.qi.barChartValueAxisTitleFont||this.qi.yAxisTitleFont).Ce(this.qi.barChartValueAxisTitleFillStyle||this.qi.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Ts.getHeight({x:0,y:-90})),this.Wh=this.es.yg([this.Lh]).ps(i.effectsText),this.mB=h.Ee(t.gB).Re(i.barChartValueAxisStrokeStyle||this.qi.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.xg=t,this.Mg=t):"object"==typeof t&&(this.xg=t.min,this.Mg=t.max),this.chart.us.Ss(),this}getThickness(){return{min:this.xg,max:this.Mg}}setStrokeStyle(t){return this.mB.Re(t),this.chart.us.Ss(),this}getStrokeStyle(){return this.mB.uu()}setTickStrategy(t,i){return super.Fh(t,i)}Ps(t){if(!this.Xi)return this.Uh(),{kg:0,Tg:0,Vd:Rt(0,void 0!==this.xg?this.xg:0,void 0!==this.Mg?this.Mg:Oi)};const i=this.chart.Ts.getWidth(this.chart.gB).ri(),s=this.dt.ri();this.qh({physicalAxisSize:s,oppositeAxisSize:i,plotLines:t});let e=0;for(const t of this.Ze.values())for(const i of t.values()){const t=i.Sh.lr,s=this.chart.Ts.getWidth(i.Ue.jc()),h=t.getTickLength()+t.getTickPadding()+s+t.getLabelPadding();e=Math.max(e,h)}const h=e+this.mB.uu().V()/2,r=this.chart.Ts.getWidth(this.Lh.Ps().jc());return{kg:h,Tg:r,Vd:Rt(h+r,void 0!==this.xg?this.xg:0,void 0!==this.Mg?this.Mg:Oi)}}Te(t){const i=this.getInterval();this.mB.Ve(this.chart.Ts.toPoint(-.5,this.Ih)).ze(this.chart.Ts.toPoint(-.5,this.Ph)).setVisible(this.Xi);const s="logarithmic"===this.kh.type?Math.sqrt(i.start+i.end):.5*(i.start+i.end),e=this.chart.Ts.toPoint(this.chart.categoryAxis.dt.mi(-.5,t.kg*this.chart.Ts.xB),s),h=this.chart.Ts.toPoint(this.chart.Ts.MB,0);this.Lh.Fe(e).Ea(h).setVisible(this.Xi)}setMouseInteractions(t){return this}ur(t,i){return new hh(i,t,this.ks,this.chart.gB)}cr(t,i){const s=t.Sh.lr,e=this.chart.Ts.toPoint(-.5,t.u),h=this.chart.gB.mi(e,this.chart.Ts.toPoint(s.getTickLength()*this.chart.Ts.xB,0)),r=this.chart.gB.mi(e,this.chart.Ts.toPoint(s.gridStrokeLength*i.oppositeAxisSize*-this.chart.Ts.xB,0)),n=this.chart.gB.mi(h,this.chart.Ts.toPoint(s.getTickPadding()*this.chart.Ts.xB,0));t.Ue.Fe(n).Ea(this.chart.Ts.toPoint(this.chart.Ts.MB,s.getLabelAlignment())).Nh(s.getLabelRotation()),s.tickStyle!==at&&0!==s.tickLength&&i.plotLines.add({positions:[e,h]},{lineStyle:s.tickStyle}),s.gridStrokeStyle!==at&&s.gridStrokeLength>0&&i.plotLines.add({positions:[e,r]},{lineStyle:s.gridStrokeStyle})}_r(t,i){return"linear"===this.kh.type?xo(t,i,this.dt):Mo(t,i,this.dt)}Cr(t,i,s){return{min:t,max:i}}}class Wf extends ou{constructor(t,i,s,e,h,r,n){super(t,i,s,e),this.No=Ei(),this.u=0,this._B=!1,this.chart=t,this.Ji=t,this.category=h,this.subCategory=r,this.xs=h,this.be=Si(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,n),this.xe=Si(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,n),this.onVisibleStateChanged((()=>{this.Ji.wB()})),this.onDispose((()=>{this.Ji.wB(),this.Ji.CB.delete(this)}))}setValue(t){return this._B=!0,this.u=t,this.Ji.wB(),this.Ji.us.Ss(),this.Ji.CB.delete(this),this}getValue(){return this.u}get value(){return this.u}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Ji.wB(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe="function"==typeof t?t(this.xe):t,this.Ji.wB(),this}getStrokeStyle(){return this.xe}Kp(){return this.tS}Hc(t,i){return Ya(t,this.Ji.engine.scale,this.Ji.Wy(new Ta,this.category,this.u,this).Zu(),this,void 0)}solveNearestFromScreen(t){}setEffect(t){return this.Ji.setBarsEffect(t),this}}const Uf=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value),Yf=(t,i,s)=>{const e=t.kd.filter((t=>void 0!==t)),h=e.map((t=>s(t.sizePixels))).reduce(((t,i)=>Math.max(t,i)),1),r=Math.ceil(h/(i/e.length));return r<=1?e:e.filter(((t,i)=>i%r==0))};class Hf extends kl{constructor(t,i,s,e,h,r,n){var o;let a;super(t,i,s,i.vm("barChart bg",0),e,i.us.qi.barChartBackgroundFillStyle||i.us.qi.chartXYBackgroundFillStyle,i.us.qi.barChartBackgroundStrokeStyle||i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.barChartTitleFont||i.us.qi.chartXYTitleFont,i.us.qi.barChartTitleFillStyle||i.us.qi.chartXYTitleFillStyle,r),this.coordsBars="barChart",this.kB=Xf.Descending,this.TB=this.qi.barChartCategoryLabels,this.SB=this.qi.barChartValueLabelsAfterBars,this.FB=!1,this.b_=Li(),this.IB=new Map,this.CB=new Map,this.pB="positive",this.PB="columns",this.DB=!0,this.BB=new Map,this.LB={speed:1},this._y={speed:1},this.RB=.08,this.Gy=va.snapToClosest,this.Wy=(t,i,s,e)=>{this.categoryAxis.getTitle().length>0&&t.addRow(this.categoryAxis.getTitle()),t.addRow({text:i,font:{weight:"bold"}}),this.valueAxis.getTitle().length>0&&t.addRow(this.valueAxis.getTitle());const h=[];return e.subCategory&&e.subCategory.length>0&&h.push(e.subCategory),h.push(this.valueAxis.formatValue(s)),t.addRow(...h),t},this.fn=(t,i,s,e,h)=>{this.gB.q(e,h)},this.us.Nn(_o.nf),this.Ts="horizontal"===(null==n?void 0:n.type)?Zf:jf,this._m.Rh("Bar Chart"),this.EB=i.$y("barChart plotting 1",0),this.zB=i.$y("barChart plotting 2",1),this.bB="logarithmic"===(null===(o=null==n?void 0:n.valueAxis)||void 0===o?void 0:o.type),this.bB?"horizontal"===this.Ts.VB?(a=s.d1({scale1DConstructor:Vs,dimension:"y"}),this.gB=(new Ws).Ri(s.d1({scale1DConstructor:Fs,dimension:"x"}),a)):(a=s.d1({scale1DConstructor:Vs,dimension:"x"}),this.gB=(new Ws).Ri(a,s.d1({scale1DConstructor:Fs,dimension:"y"}))):(this.gB=s.d2({scaleXYConstructor:Gs}),a=this.Ts.getWidth(this.gB)),this.OB=this.es.yg(),this.M_=new ll((()=>this.b_._t(this.EB.Ob(this.gB).Jo(0))),((t,i,s)=>(t.Ce(s.fillStyle).we(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.zr();return s.pl(i.vertices),this.b_.Ot(s,i.bar),i.bar.gs([s]),s})))),(()=>{this.b_.Nt()}),(t=>{this.OB.fs(t)})),this.FS=this.qg.ke(this.gB).Ce(this.qi.barChartSeriesBackgroundFillStyle||O).we(at),this.IS=this.qg.ke(this.gB).Ce(O).we(this.qi.barChartSeriesBackgroundStrokeStyle||at).setMouseInteractions(!1),super.TS(this.FS,this.IS),this.categoryAxis=new Nf(this,this.qi,!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled),a,this.zB,this.es);const l=bo(null==n?void 0:n.valueAxis);this.valueAxis=new Gf(this,this.qi,!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled),this.Ts.getHeight(this.gB),this.zB,this.es,l.type),this.NB=new ul((()=>this.zB.Pr(this.gB).Ir(Ri).Fr(Ri).Jo(1))),this.GB=new ll((()=>this.qg.Lg(this.gB).setMouseInteractions(!1)),((t,i,s)=>(t.Re(s.lineStyle),i.map((({positions:i,existingMember:s})=>(s||t.zr()).Eg(i[0],i[1])))))),this.jy=i.Zy();const u=zt(n?n.autoCursorBuilder:void 0,Na);this.Pm=u.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.onResize(this.fn),this.Sm(h,this.gB),this.setAutoCursorMode(va.onHover),this.setAnimationsEnabled(!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled)),this.LS(((t,i)=>{ba.Bm(this,i)}))}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}setBarsMargin(t){return this.RB=Rt(t,0,.49),this.FB=!0,this.us.Ss(),this}getBarsMargin(){return this.RB}setBarsEffect(t){return this.OB.ps(t),this.us.Ss(),this}getBarsEffect(){return this.OB.vs()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}return this.WB("columns",i),this}setDataStacked(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.WB("stacks",s),this}setDataGrouped(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.WB("groups",s),this}WB(t,i){this.xS.length>0&&this.us.Nn(_o.vf),this.PB=t,this.UB(i);const s=_i(i.map((t=>t.category))),e=s.length,h=_i(i.map((t=>t.subCategory))).filter((t=>void 0!==t));if(i.forEach((t=>{let i=this.xS.find((i=>i.category===t.category&&i.subCategory===t.subCategory));if(!i){const e=s.indexOf(t.category),r=h.includes(t.subCategory)?h.indexOf(t.subCategory):void 0;i=new Wf(this,this._S,this.qi,this.us.es,t.category,t.subCategory,zt(r,e)),this.PS(i),this.BB.set(i,{category:e,valueStart:this.bB?1e-6:0,valueEnd:void 0!==t.value?t.value:0})}void 0!==t.value&&i.setValue(t.value)})),this.xS.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category&&i.subCategory===t.subCategory))&&(t.dispose(),this.BB.delete(t))})),this.categoryAxis.setInterval(this.Ts.getWidth({x:{start:-.5,end:e-.5},y:{start:e-.5,end:-.5}})),this.yB=0===this.xS.length?void 0:"stacks"!==t?this.xS.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:Oi,max:Ni}):{min:0,max:s.reduce(((t,s)=>Math.max(t,i.reduce(((t,i)=>i.category!==s?t:void 0!==i.value?t+i.value:t),0))),0)},this.yB&&(this.pB=this.yB.min>=0?"positive":this.yB.max<=0?"negative":"bipolar",("bipolar"===this.pB||"negative"===this.pB)&&this.bB))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");this.UB(this.xS),this.IB.clear(),this.CB.clear(),this.FB=!0,this.us.Ss()}setCategoryLabels(t){const i="function"==typeof t?this.TB?t(this.TB):this.TB:t;return this.TB=i?{...this.qi.barChartCategoryLabels,...i}:void 0,this.IB.clear(),this.us.Ss(),this}getCategoryLabels(){return this.TB}setValueLabels(t){var i;const s="function"==typeof t?this.SB?t(this.SB):this.SB:t,e=(null==s?void 0:s.position)||(null===(i=this.SB)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.SB={...this.qi.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.SB={...this.qi.barChartValueLabelsInsideBars,...s}):this.SB=void 0,this.CB.clear(),this.us.Ss(),this}getValueLabels(){return this.SB}setLabelFittingEnabled(t){return this.DB=t,this.us.Ss(),this}getLabelFittingEnabled(){return this.DB}getBar(t,i){if(("groups"===this.PB||"stacks"===this.PB)&&void 0===i)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const s=this.xS.find((s=>s.category===t&&(void 0===i||i===s.subCategory)));if(!s)throw new Error(`BarChart.getBar() no such bar: "${t}" ${i?`"${i}"`:""}`);return s}getBars(){return this.xS}setSorting(t){return this.kB=t,this.UB(this.xS),this.us.Ss(),this}getSorting(){return this.kB}setAnimationCategoryPosition(t,i=1){return this.LB=t?{speed:i}:void 0,this.us.Ss(),this}setAnimationValues(t,i=1){return this._y=t?{speed:i}:void 0,this.us.Ss(),this}translateCoordinate(t,i,s){if(s&&Xs(t)&&$s(i))return super.translateCoordinate(t,i,s);const e=i;let h;if(Hs(t))h=this.us.Po(t);else if(Xs(t)){const i=At(t,this.pixelScale,this.us.dt);h={engineX:i.x,engineY:i.y}}else{if(!Uf(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=At(this.Ts.toPoint(t.iCategory,t.value),this.gB,this.us.dt);h={engineX:i.x,engineY:i.y}}}if(Ys(e))return this.us.Do(h);if("barChart"===e){const t=At({x:h.engineX,y:h.engineY},this.us.dt,this.gB);return{iCategory:this.Ts.getWidth(t),value:this.Ts.getHeight(t)}}if($s(e))return At({x:h.engineX,y:h.engineY},this.us.dt,this.pixelScale);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}Zd(){if("columns"===this.PB)return this.xS;const t=_i(wi(this.xS.map((t=>t.subCategory))));return wi(t.map((t=>{const i=this.xS.filter((i=>i.subCategory===t)),s=i[0];if(s)return(t=>{let i=!1;t.forEach((s=>s.onHighlight(((e,h)=>{i||(i=!0,t.forEach((t=>s!==t?t.setHighlight(h):void 0)),i=!1)})))),t.forEach((i=>i.onDispose((()=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)}))))})(i),{attach(e,h){return ki(e,i,{toggleVisibilityOnClick:!0,label:t,style:s.getFillStyle()}),this}}})))}Te(t){var i,s;super.Te(t);const e=this.NB.fp(),h=this.GB.fp(),r=this.xS.filter((t=>t.getVisible()&&t._B)),n=_i(r.map((t=>t.category))),o=_i(wi(r.map((t=>t.subCategory)))),a=5e-4*t*((null===(i=this.LB)||void 0===i?void 0:i.speed)||0),l=.003*t*((null===(s=this.LB)||void 0===s?void 0:s.speed)||0),u=this.valueAxis.dt,c=u instanceof Vs?(t,i)=>{var s;return xo(t,i,u,(null===(s=this._y)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return Mo(t,i,u,(null===(s=this._y)||void 0===s?void 0:s.speed)||0)};let d;"columns"===this.PB?d=r.map((t=>({bar:t,position:{category:n.indexOf(t.category),valueStart:this.bB?1e-6:0,valueEnd:t.value}}))):"groups"===this.PB?d=r.map((t=>{const i=n.indexOf(t.category),s=o.indexOf(t.subCategory),e=1/(o.length+2*(o.length+1)*this.RB),h=this.RB*e;return{bar:t,position:{category:i+(s-(o.length-1)/2)*(e+h),valueStart:this.bB?1e-6:0,valueEnd:t.value}}})):(d=[],n.forEach(((t,i)=>{const s=r.filter((i=>i.category===t));let e=this.bB?1e-6:0;s.forEach(((i,s)=>{d.push({bar:i,position:{category:n.indexOf(t),valueStart:e,valueEnd:e+i.value}}),e+=i.value}))}))),d.forEach((t=>{const{bar:i,position:s}=t;let e,h,r=this.BB.get(i);void 0===r&&(r=s);const n=s.valueStart;if(this.LB&&r.category!==s.category){const t=Math.sign(s.category-r.category);e=r.category+a*t+l*(s.category-r.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this._y&&r.valueEnd!==s.valueEnd){const t=Math.sign(s.valueEnd-r.valueEnd);h=c(r.valueEnd,s.valueEnd),t!==Math.sign(s.valueEnd-h)&&(h=s.valueEnd)}else h=s.valueEnd;this.BB.set(i,{category:e,valueStart:n,valueEnd:h}),e===s.category&&h===s.valueEnd||this.us.Ss(!0),e===r.category&&h===r.valueEnd||(this.FB=!0)})),Sa.Fm(this._m,this.bm);const f=r.length>0;this.categoryAxis.Mr(),this.valueAxis.Mr();const A=this.categoryAxis.setVisible(f).Ps(),g=this.valueAxis.setVisible(f).Ps(h),{labelMarginBeforeCategoryAxisPixels:m}=f?this.YB(n,r,e,h):{labelMarginBeforeCategoryAxisPixels:0};this.categoryAxis.Te(A,e,h,{labelMarginBeforeCategoryAxisPixels:m}),this.valueAxis.Te(g);const y=this.categoryAxis.getThickness(),p=Rt(A.Vd+m,void 0!==y.min?y.min:0,void 0!==y.max?y.max:Oi),S={x:Math.min(this.gB.x.getInnerStart(),this.gB.x.getInnerEnd()),y:Math.min(this.gB.y.getInnerStart(),this.gB.y.getInnerEnd())},v=Math.max(this.gB.x.getInnerStart(),this.gB.x.getInnerEnd()),b=Math.max(this.gB.y.getInnerStart(),this.gB.y.getInnerEnd()),x={x:v-S.x,y:b-S.y};this.FS.Fe(S),this.FS.q(x),this.IS.Fe(S),this.IS.q(x),super.pm(),ba.Im(this,this.FS.getIsUnderMouse(),!1,this.xS,void 0,((t,i)=>t.Hc(i,!0)));const M=Sa.Tm(this._m,this.bm);if(this.gB.zi([this.Xt.bottom+this.ya.bottom+("vertical"===this.Ts.VB?p:0),this.Xt.top+this.ya.top+M+("horizontal"===this.Ts.VB?g.Vd:0)]),this.gB.Ei([this.Xt.left+this.ya.left+this.Ts.getHeight({x:p,y:g.Vd}),this.Xt.right+this.ya.right]),this.EB.qv({x:this.gB.x.ei(),y:this.gB.y.ei(),width:this.gB.x.ri(),height:this.gB.y.ri()}),this.Zg&&this.Zg(),this.FB){const t=this.M_.fp(),i="groups"===this.PB?1/(o.length+2*(o.length+1)*this.RB):1-2*this.RB;r.forEach((s=>{const e=this.BB.get(s);if(void 0===e)return;const h=e.category-.5*i,r=e.category+.5*i,n=[this.Ts.toPoint(h,e.valueStart),this.Ts.toPoint(h,e.valueEnd),this.Ts.toPoint(r,e.valueEnd),this.Ts.toPoint(r,e.valueStart)];t.add({No:s.No,vertices:n,bar:s},{fillStyle:s.be,strokeStyle:s.xe})})),t.finishPlot()}e.finishPlot(),h.finishPlot(),this.FB=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}solveNearest(t){}dispose(){return this.zB.W(),this.EB.W(),this.Pm.dispose(),this.jy.W(),super.dispose()}UB(t){const i=this.kB;i&&t.sort(((s,e)=>i({category:s.category,value:t.reduce(((t,i)=>t+(i.category===s.category&&i.value||0)),0)},{category:e.category,value:t.reduce(((t,i)=>t+(i.category===e.category&&i.value||0)),0)})))}YB(t,i,s,e){let h=0;const r=this.TB,n=this.SB,o=this.valueAxis.getInterval(),a=this.Ts.getWidth({x:this.gB.x.ri(),y:this.gB.y.ri()});if(r&&r.labelFillStyle!==O){const n=r.tickLength+r.labelMargin,l=this.Ts.toPoint(0,1),u={kd:t.map(((t,s)=>{const e=i.reduce(((i,s)=>s.category!==t?i:i+s.value),0),h=r.formatter(t,e);if(!h)return;const a=s;return void 0!==a?{text:h,position:this.Ts.toPoint(a,this.valueAxis.dt.mi(o.start,-n)),alignment:l,rotation:r.labelRotation,sizePixels:this.HB(t,e)}:void 0})),Nu:r.labelFont,dt:this.gB},c=u?this.DB?Yf(u,a,this.Ts.getWidth):u.kd:[];c.forEach((t=>{t&&s.add().Rh(t.text).Fe(t.position).Ea(t.alignment).Nh(t.rotation).Ce(r.labelFillStyle).Oh(r.labelFont)})),r.tickStyle!==at&&0!==r.tickLength&&c.forEach((t=>{if(!t)return;const i=this.Ts.getWidth(t.position);e.add({positions:[this.Ts.toPoint(i,this.valueAxis.dt.getInnerStart()),this.Ts.toPoint(i,this.valueAxis.dt.mi(o.start,-r.tickLength))]},{lineStyle:r.tickStyle})})),h=c.reduce(((t,i)=>i?Math.max(t,this.Ts.getHeight(i.sizePixels)):t),0)+r.tickLength+r.labelMargin}if(n&&n.labelFillStyle!==O){let t;"after-bar"===n.position?t={kd:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.BB.get(t);return void 0!==e?{text:s,position:this.Ts.toPoint(e.category,this.valueAxis.dt.mi(e.valueEnd,n.labelMargin*Math.sign(e.valueEnd))),alignment:this.Ts.toPoint(0,-1*Math.sign(e.valueEnd)),rotation:n.labelRotation,sizePixels:this.$B(t)}:void 0})),Nu:n.labelFont,dt:this.gB}:"inside-bar"!==n.position&&"inside-bar-start"!==n.position&&"inside-bar-centered"!==n.position&&"inside-bar-end"!==n.position||(t={kd:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.BB.get(t);if(void 0===e)return;const h="bipolar"===this.pB?Math.sign(e.valueEnd):"negative"===this.pB?-1:1,r=this.Ts.toPoint(0,"inside-bar"===n.position||"inside-bar-end"===n.position?1*h:"inside-bar-centered"===n.position?0:-1*h);return{text:s,position:this.Ts.toPoint(e.category,"inside-bar"===n.position||"inside-bar-end"===n.position?this.valueAxis.dt.mi(e.valueEnd,-n.labelMargin*h):"inside-bar-centered"===n.position?(e.valueStart+e.valueEnd)/2:this.valueAxis.dt.mi(e.valueStart,n.labelMargin*h)),alignment:r,rotation:n.labelRotation,sizePixels:this.$B(t)}})),Nu:n.labelFont,dt:this.gB}),t&&(t?this.DB?Yf(t,a,this.Ts.getWidth):t.kd:[]).forEach((t=>{t&&s.add().Rh(t.text).Fe(t.position).Ea(t.alignment).Nh(t.rotation).Ce(n.labelFillStyle).Oh(n.labelFont).setMouseInteractions(!1)}))}return{labelMarginBeforeCategoryAxisPixels:h}}HB(t,i){if(!this.TB||this.TB.labelFillStyle===O)return{x:0,y:0};const s=this.IB.get(t);if(s)return s;const e=this.TB.formatter(t,i),h=this.us.Ig.Fg(e,this.TB.labelFont,this.TB.labelRotation);return h.isEstimate?this.us.Ss(!0):this.IB.set(t,h),h}$B(t){if(!this.SB||this.SB.labelFillStyle===O)return{x:0,y:0};const i=this.CB.get(t);if(i)return i;const s=this.us.Ig.Fg(this.SB.formatter(t,t.category,t.value),this.SB.labelFont,this.SB.labelRotation);return s.isEstimate?this.us.Ss(!0):this.CB.set(t,s),s}vB(){return this.xS.reduce(((t,i)=>{const s=this.$B(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}wB(){this.FB=!0,this.us.Ss()}getMinimumSize(){return{x:200,y:200}}}const $f={Horizontal:"horizontal",Vertical:"vertical"},Xf={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},jf={...ko,VB:"vertical",xB:-1,MB:1},Zf={...To,VB:"horizontal",xB:1,MB:-1},Qf=(t,i)=>i?t.x:t.y,Jf=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),Kf=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(Qf(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const u=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>Jf(t,o,r,i))).reduce(((t,i)=>Math.max(t,Qf(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&c>Qf(h,r)-e||-1===o&&c<0+e){u.fill(0);break}if(i!==s&&(1===o?n>c:n<c))break;u[i-1]=c-n,c+=e*o}const d=u.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/Qf(h,r)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class qf{constructor(t,i,e,h,r){this.coordsRelative="relative",this.coordsClient="client",this.$i=!1,this.RP=new Array,this.D=new s,this.XB=[],this.$g=[],this.jB=void 0,this.ZB=!0,this.QB=!0,this.JB=!0,this.Qg=!1,this.KB=!0,this.qB=()=>{this.KB=!0,this.us.Ss()},this.tL=[],this.onInViewChange=t=>this.D.on("inViewChange",t),this.offInViewChange=t=>this.D.off(t,"inViewChange"),this.iL=t=>{for(let i=0;i<this.RP.length;i+=1)if(this.RP[i].panel===t){this.RP.splice(i,1),this.ZB=!0,this.us.Ss();break}},this.sL=t=>{const i=this.XB.indexOf(t);i>=0&&this.XB.splice(i,1)},this.im=t=>{const i=this.$g.indexOf(t);i>=0&&this.$g.splice(i,1)},this.eL=(t,i,s,e,h)=>{if(this.hL(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.RP.push(r),this.rL(r),this.ZB=!0,t}throw new bt("Out of dashboard range.")},this.nL=i.numberOfRows,this.oL=i.numberOfColumns,this.cA=t,this.aL=i,this.lL=h;const n=this.oL*this.nL;this.uL={x:new cf(new Array(this.oL).fill(1)),y:new cf(new Array(this.nL).fill(1))},this.qi=e.qi,this.cL=this.qi.dashboardSplitterStyle,this.th=!0!==(null==i?void 0:i.disableAnimations)&&!1!==(null==i?void 0:i.animationsEnabled),this.dL=uf(e,n),this.fL=e.FI("dashboard splitters",500001),this.OM=()=>this.dL.TI(),this.am=this.dL.II(),this.es=e.es.hs(this,{AL:{}}),this.es.AL.ps(this.qi.effectsDashboardSplitters);const o=e.oi();this.uiScale=dt.d2({scaleXYConstructor:Gs}).Vi(0,100).Oi(0,100).q(o),this.pixelScale=dt.d2({scaleXYConstructor:Gs}).Vi(0,this.uiScale.x.getCellSize()).Oi(0,this.uiScale.y.getCellSize()).q(o),this.gL=e.mL.bind(e),this.yL=e.pL.bind(e),this.SL=e.vL.bind(e),this.bL=e.xL.bind(e),this.eo=e.eo.bind(e),this.ro=e.ro.bind(e),this.engine=e.hm,this.us=e.rm,e.Co((()=>this.qB())),e.Ss();const a=e.Fo((t=>{this.Qg=t,this.D.emit("inViewChange",this,t)}));this.Am=e.Io.bind(e,a),this.ML(),this.setAnimationsEnabled(this.th);const l=("resize",{on:(u=this.D).on.bind(u,"resize"),off:u.off.bind(u)});var u;this.createChartXY=t=>{const i=tA(t,this.aL,this.th);return this.eL(new sd(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=tA(t,this.aL,this.th);return this.eL(new lf(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=tA(t,this.aL,this.th);return this.eL(new md(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=tA(t,this.aL,this.th),s=i&&i.type?i.type:rl;return this.eL(new s(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=tA(t,this.aL,this.th),s=i&&i.type?i.type:zd;return this.eL(new s(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,l,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=tA(t,this.aL,this.th),s=i&&i.type?i.type:Cd;return this.eL(new s(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=tA(t,this.aL,this.th),s=t&&t.type?t.type:Hd;return this.eL(new s(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=tA(t,this.aL,this.th);return this.eL(new ma(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendBoxPanel=t=>{const i=tA(t,this.aL,this.th);return this.eL(new Nl(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=tA(t,this.aL,this.th);return this.eL(new ad(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=tA(t,this.aL,this.th);return this.eL(new jl(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=tA(t,this.aL,this.th),s=new Vl(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,l,i);return this.eL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=tA(t,this.aL,this.th),s=new Lf(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,l);return this.eL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=tA(t,this.aL,this.th),s=new Hf(this.cA,this.dL.DI(this._L(t.columnIndex,t.rowIndex)),this.wL(i,this.uL),this.iL,r,l,i);return this.eL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}_L(t,i){return t+i*this.oL}wL(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.oL:this.nL,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).ot({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.oL,y:this.nL},i),d3:()=>new ut({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.oL,y:this.nL},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.gL(t[0]),this.yL(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.SL(t[0]),this.bL(t[1]),this}getWidth(){return this.eo()}getHeight(){return this.ro()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.fL.Ss(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.fL.Ss(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.qi}setSplitterStyle(t){const i=this.cL;return this.cL="function"==typeof t?t(this.cL):t,this.CL(i),this}getSplitterStyle(){return this.cL}setSplitterEffect(t){return this.es.AL.ps(t),this.us.Ss(),this}getSplitterEffect(){return this.es.AL.vs()}setAnimationHighlight(t){return this.JB=t,this.tL.forEach((i=>this.us.ls._s(i.line,t))),this}getAnimationHighlight(){return this.JB}CL(t){for(const t of this.tL)t.line.Re(this.cL);this.ML()}setColumnWidth(t,i){const s=this.uL.x.M();return t>=0&&t<s.length&&(s[t]=i,this.uL.x.S(s)),this.qB(),this}getColumnWidth(t){const i=this.uL.x.M();if(t>=i.length)throw new bt("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.uL.y.M();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.uL.y.S(s)),this.qB(),this}getRowHeight(t){const i=this.uL.y.M();if(t>=i.length)throw new bt("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}onResize(t){return this.D.on("resize",t)}offResize(t){return this.D.off(t,"resize")}kL(t,i,s){if(s&&Math.abs(t.x)>0)this.TL(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.FL(i,t.y)}for(const t of this.RP)t.panel.Z();this.qB()}FL(t,i){const s=Kf(this.RP,this.uL.y.M(),t,i,this.pixelScale.oi(),!1);this.uL.y.S(s),this.qB()}TL(t,i){const s=Kf(this.RP,this.uL.x.M(),t,i,this.pixelScale.oi(),!0);this.uL.x.S(s),this.qB()}IL(){this.tL.forEach((t=>t.line.dispose())),this.tL.length=0;for(let t=1;t<=this.oL-1;t+=1)for(let i=0;i<=this.nL-1;i+=1)if(void 0!==this.RP.find((s=>Qi(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=Ks(new te((()=>{this.PL(t)}),((i,s,e,h,r)=>{this.kL(h,t,!0),ii(r)}),(()=>{this.DL(t)}))),e=this.fL.Ee(this.pixelScale).Re(this.cL).setMouseEnterEventHandler((()=>{this.PL(t)})).setMouseLeaveEventHandler((()=>{this.DL(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.kL(r,t,!0),ii(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.us.ls.os(e,(t=>e.cs(t)),{animationEnabled:this.JB}),this.tL.push({row:i,column:t,line:e,alignment:"vertical"})}for(let t=1;t<=this.nL-1;t+=1)for(let i=0;i<=this.oL-1;i+=1)if(void 0!==this.RP.find((s=>Qi(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=Ks(new te((()=>{this.BL(t)}),((i,s,e,h,r)=>{this.kL(h,t,!1),ii(r)}),(()=>{this.LL(t)}))),e=this.fL.Ee(this.pixelScale).Re(this.cL).setMouseEnterEventHandler((()=>{this.BL(t)})).setMouseLeaveEventHandler((()=>{this.LL(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.kL(r,t,!1),ii(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.us.ls.os(e,(t=>e.cs(t)),{animationEnabled:this.JB}),this.tL.push({row:t,column:i,line:e,alignment:"horizontal"})}this.es.AL.fs(this.tL.map((t=>t.line)))}RL(){const t=this.pixelScale.oi(),i=this.uL.x.M(),s=i.reduce(((t,i)=>t+i)),e=this.uL.y.M(),h=e.reduce(((t,i)=>t+i));this.tL.forEach((r=>{if("vertical"===r.alignment){const o=n(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),a=n(o.x,t.y*e.slice(0,r.row+1).reduce(((t,i)=>t+i),0)/h);r.line.Ve(o).ze(a)}else{const o=n(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),a=n(t.x*i.slice(0,r.column+1).reduce(((t,i)=>t+i),0)/s,o.y);r.line.Ve(o).ze(a)}}))}PL(t){this.tL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.us.ls.Ms(i.line,1),this.fL.EL(i.line))})),this.jB=this.engine.setMouseStyle(Pe.ResizeColumn),this.us.Ss()}BL(t){this.tL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.us.ls.Ms(i.line,1),this.fL.EL(i.line))})),this.jB=this.engine.setMouseStyle(Pe.ResizeRow),this.us.Ss()}DL(t){this.tL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.us.ls.Ms(i.line,0)})),this.engine.restoreMouseStyle(this.jB),this.us.Ss()}LL(t){this.tL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.us.ls.Ms(i.line,0)})),this.engine.restoreMouseStyle(this.jB),this.us.Ss()}setAnimationsEnabled(t){return this.th=t,this.getCells().filter((t=>t.panel instanceof pa)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.th),this}getAnimationsEnabled(){return this.th}getCells(){return this.RP.slice()}dispose(){return this.$i||(this.Am&&this.Am(),this.RP.slice().forEach((t=>t.panel.dispose())),this.XB.slice().forEach((t=>t.dispose())),this.$g.slice().forEach((t=>t.dispose())),this.$i=!0,this.lL(),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}getIsInView(){return this.Qg}saveToFile(t,i,s){return ua(this.engine,t,i,s),this}zL(t){if(this.KB){const t=this.us.dt.oi(),i=t.x,s=t.y;this.uiScale.q(i,s),this.pixelScale.q(i,s);const e=this.uiScale.getInnerIntervalPixels();this.pixelScale.Vi(0,e.x).Oi(0,e.y),this.D.emit("resize",this,e.x,e.y,i,s),this.QB=!0}this.ZB&&(this.IL(),this.ZB=!1,this.QB=!0),this.QB&&(this.RL(),this.QB=!1);for(const i of this.RP)i.panel.Te(t);return this.XB.forEach((t=>t.Ps())),this.XB.forEach((t=>t.Te())),this.$g.forEach((t=>t.Ps())),this.$g.forEach((t=>t.Te())),this.KB=!1,this}j(){for(const t of this.RP)t.panel.j();return this.pixelScale.x.j(),this.pixelScale.y.j(),this.uiScale.x.j(),this.uiScale.y.j(),this}Z(){for(const t of this.RP)t.panel.Z();return this.pixelScale.x.Z(),this.pixelScale.y.Z(),this.uiScale.x.Z(),this.uiScale.y.Z(),this}translateCoordinate(t,i,s){return fa(t,i,s,this.pixelScale,this.us)}addUIElement(t=Jn,i=this.uiScale){i=da(i,this.pixelScale);const s=ca(t,this.OM(),this.uiScale,i,this.sL,this.qi);return this.XB.push(s),s}addLegendBox(t=lo,i=this.uiScale){i=da(i,this.pixelScale);const s=ca(t,this.am,this.uiScale,i,this.im,this.qi);return s.setDraggingMode(Ct.notDraggable),this.$g.push(s),s}getLegendBoxes(){return this.$g}hL(t,i,s,e){return i>=0&&t>=0&&i+e<=this.nL&&t+s<=this.oL}rL(t){const i=this.cL,s=i===at?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.nL-1?s:0,right:t.columnIndex<this.oL-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.Fr(e)}ML(){this.uiScale.x.si([0,0]),this.uiScale.y.si([0,0]),this.pixelScale.x.si([0,0]),this.pixelScale.y.si([0,0]);for(const t of this.RP)this.rL(t);this.us.Ss()}}const tA=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.disableAnimations?!t.disableAnimations:void 0!==t.animationsEnabled?t.animationsEnabled:s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},iA={None:Gr,Rectangle:Fn,Circle:In,Diamond:Pn,Pointer:Dn},sA={ChartMarkerXY:ku,SeriesMarkerXY:Tu},eA={XY:Cu,Spider:Oa,BarChart:Na,Map:Ua,Polar:Oa},hA={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},rA={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},nA={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},oA={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},aA={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},lA={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},uA={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},cA={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},dA={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},fA={World:lA,USA:uA,NorthAmerica:cA,SouthAmerica:dA,Canada:oA,Europe:aA,Asia:rA,Africa:hA,Australia:nA},AA={Solid:zd},gA=(t,i)=>Math.abs(t)+Math.abs(i);function mA(t,i){const s=t.reduce(gA,0),e=(h=t,Math.max(...h.map((t=>t))));var h;const r=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(i**2*e/s**2,s**2/(i**2*r))}const yA=({height:t,width:i})=>t>i?{value:i,vertical:!1}:{value:t,vertical:!0},pA=({data:t,dimensions:i})=>{const{x:s,y:e,width:h,height:r}=i,n=t.map((t=>t.value)).reduce(gA,0),o=t.map((t=>t.animatedValue)).reduce(gA,0),a=t.map((t=>t.animatedValue*r*h/o)),l=a.reduce(((t,i)=>t+i),0),u=a.map((t=>t/l*100)),c=a.filter(((t,i)=>u[i])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:n,animatedValue:o,x:s,y:e,width:h,height:r,nodeIndex:-1,userNode:{name:"Main Rectangle"}};if(1===t.length){const s={...t[0],x:i.x,y:i.y,width:i.width,height:i.height};d.children.push(s)}else vA(c,yA(d).value,t,d);return d.children},SA=(t,i,s,e,h)=>{const r=t.reduce(gA,0)/i;t.forEach(((t,i)=>{const n=Math.abs(t)/r,{x:o,y:a,children:l}=h,u={...e[l.length],x:o,y:a,width:s?r:n,height:s?n:r};s?h.y+=n:h.x+=n,l.push(u)})),s?(h.x+=r,h.y-=i,h.width-=r):(h.x-=i,h.y+=r,h.height-=r)},vA=(t,i,s,e)=>{const h=[{children:t,width:i,row:[]}];for(;h.length>0;){const t=h.pop();if(!t)continue;const{children:i,width:r,row:n}=t;let o=0;const a=[...n];for(;o<i.length;){const t=[...a,i[o]],n=mA(a,r),l=mA(t,r);if(!(0===a.length||n>l)){SA(a,r,yA(e).vertical,s,e),h.push({children:i.slice(o),width:yA(e).value,row:[]});break}a.push(i[o]),o+=1}o===i.length&&SA(a,r,yA(e).vertical,s,e)}};class bA extends pa{constructor(t,i,s,e,h,r,n){if(super(t,i,s,i.vm("treeMapChart bg",0),e,i.us.qi.treeMapChartBackgroundFillStyle||i.us.qi.chartXYSeriesBackgroundFillStyle,i.us.qi.treeMapChartBackgroundStrokeStyle||i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.treeMapChartTitleFont||i.us.qi.chartXYTitleFont,i.us.qi.treeMapChartTitleFillStyle||i.us.qi.chartXYTitleFillStyle,n),this.VL=new Map,this.OL=[],this.NL={},this.GL=f([]),this._y={speed:1},this.WL=Oi,this.UL=!0,this.YL="Go Back",this.HL=[],this.$L=this.qi.treeMapChartPathLabelFillStyle||this.qi.uiTextFillStyle,this.XL=this.qi.treeMapChartPathLabelFont||this.qi.uiTextFont,this.jL=this.qi.treeMapChartLabelHeaderFillStyle||this.qi.uiTextFillStyle,this.ZL=this.qi.treeMapChartLabelHeaderFont||this.qi.uiTextFont,this.QL=this.qi.treeMapChartLabelFillStyle||this.qi.uiTextFillStyle,this.JL=this.qi.treeMapChartLabelFont||this.qi.uiTextFont,this.Yi=!0,this.bb=va.onHover,this.Wy=xA,this.Mb=!0,this.KL=!1,this.qL=this.qi.treeMapChartParentColor||F,this.tR=this.qi.treeMapChartNodeStrokeStyle||this.qi.uiBackgroundStrokeStyle,this.onNodeMouseEnter=t=>this.D.on("mouseEnter",t),this.onNodeMouseLeave=t=>this.D.on("mouseLeave",t),this.onNodeMouseClick=t=>this.D.on("mouseClick",t),this.onNodeMouseDoubleClick=t=>this.D.on("mouseDoubleClick",t),this.onNodeMouseDown=t=>this.D.on("mouseDown",t),this.onNodeMouseUp=t=>this.D.on("mouseUp",t),this.onNodeMouseMove=t=>this.D.on("mouseMove",t),this.offNodeMouseEnter=t=>this.D.off(t,"mouseEnter"),this.offNodeMouseLeave=t=>this.D.off(t,"mouseLeave"),this.offNodeMouseClick=t=>this.D.off(t,"mouseClick"),this.offNodeMouseDoubleClick=t=>this.D.off(t,"mouseDoubleClick"),this.offNodeMouseDown=t=>this.D.off(t,"mouseDown"),this.offNodeMouseUp=t=>this.D.off(t,"mouseUp"),this.offNodeMouseMove=t=>this.D.off(t,"mouseMove"),this.offNodeMouseDragStart=t=>this.D.off(t,"mouseDragStart"),this.offNodeMouseDrag=t=>this.D.off(t,"mouseDrag"),this.offNodeMouseDragStop=t=>this.D.off(t,"mouseDragStop"),this.offNodeMouseWheel=t=>this.D.off(t,"mouseWheel"),this.Cb=(t,i,s,e,h)=>{this.us.Ss(),this.KL=!0},this.wt=(t,i)=>{const s=this.iR(i);s&&(this.bb!==va.disabled&&(this.Hb=s,ii(t)),this.Mb&&this.us.ls.Ms(i,!0),this.UL&&this.engine.setMouseStyle(Pe.Point),this.D.emit("mouseEnter",this,t,s.userNode),this.us.Ss())},this.Ct=(t,i)=>{const s=this.iR(i);s&&(this.bb!==va.disabled&&(this.Hb=void 0,t&&ii(t)),this.Mb&&this.us.ls.Ms(i,!1),this.engine.setMouseStyle(Pe.Default),this.D.emit("mouseLeave",this,t,s.userNode),this.us.Ss())},this.Pt=(t,i)=>{const s=this.iR(i);s&&(this.bb!==va.disabled&&(this.Hb=s,ii(t)),this.Mb&&this.us.ls.Ms(i,!0),this.UL&&this.engine.setMouseStyle(Pe.Point),this.D.emit("mouseEnter",this,t,s.userNode),this.us.Ss())},this.kt=(t,i)=>{const s=this.iR(i);if(s){if(this.UL){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.NL[s.parentID]:void 0;i&&(this.GL.S([i]),this.Hb=void 0,this.D.emit("viewChange",this.GL.M()),this.KL=!0),t&&ii(t)}this.D.emit("mouseClick",this,t,s.userNode),this.us.Ss()}},this.Tt=(t,i)=>{var s;const e=null===(s=this.VL.get(i))||void 0===s?void 0:s.userNode;this.D.emit("mouseDoubleClick",this,t,e)},this.Ft=(t,i)=>{var s;const e=null===(s=this.VL.get(i))||void 0===s?void 0:s.userNode;this.D.emit("mouseDown",this,t,e)},this.It=(t,i)=>{var s;const e=null===(s=this.VL.get(i))||void 0===s?void 0:s.userNode;this.D.emit("mouseUp",this,t,e)},this.Bt=(t,i,s)=>{var e;const h=null===(e=this.VL.get(s))||void 0===e?void 0:e.userNode;this.D.emit("mouseDragStart",this,t,i,h)},this.Dt=(t,i,s,e,h)=>{var r;const n=null===(r=this.VL.get(h))||void 0===r?void 0:r.userNode;this.D.emit("mouseDrag",this,t,i,s,e,n)},this.Lt=(t,i,s,e)=>{var h;const r=null===(h=this.VL.get(e))||void 0===h?void 0:h.userNode;this.D.emit("mouseDragStop",this,t,i,s,r)},this.Rt=(t,i)=>{var s;const e=null===(s=this.VL.get(i))||void 0===s?void 0:s.userNode;this.D.emit("mouseWheel",this,t,e)},this.Et=(t,i)=>{const s=this.iR(i);s&&(this.bb!==va.disabled&&(this.Hb=s),this.Mb&&this.us.ls.Ms(i,!0),this.D.emit("touchStart",this,t,s.userNode),this.us.Ss(),ii(t))},this.zt=(t,i)=>{const s=this.iR(i);s&&(this.bb!==va.disabled&&(this.Hb=s),this.Mb&&this.us.ls.Ms(i,!0),this.D.emit("touchMove",this,t,s.userNode),this.us.Ss(),ii(t))},this.Vt=(t,i)=>{const s=this.iR(i);if(s){if(this.bb!==va.disabled&&(this.Hb=void 0),this.UL){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.NL[s.parentID]:void 0;i&&(this.GL.S([i]),this.D.emit("viewChange",this.GL.M()),this.KL=!0),t&&ii(t)}this.Mb&&this.us.ls.Ms(i,!1),this.D.emit("touchEnd",this,t,s.userNode),this.us.Ss(),ii(t)}},this.sR=t=>{const i=this.NL[this.HL[t].id]?[this.NL[this.HL[t].id]]:this.OL;this.GL.S(i),this.D.emit("viewChange",i),this.KL=!0,this.us.Ss()},this.qi.treeMapChartNodeColors)this.eR=this.qi.treeMapChartNodeColors;else{const t=this.qi.pointSeriesFillStyle,i=t=>Y(t)?t.getColor():F;this.eR="function"==typeof t?new Array(5).fill(0).map(((s,e)=>i(t(e)))):[i(t)]}this.us.Nn(_o.Mf),this.Hy=i.ob("TreeMapChart plotting",0),this.Xy=i.ob("TreeMap UI plotting",1),this.onResize(this.Cb),this._m.Rh("TreeMap Chart");const o=zt(void 0,Ua);this.Eb=o.Ay(i.Zy(),this.pixelScale,this.pixelScale,this.qi).setVisible(!1),this.hR=this.es.yg(),this.Sm(h,this.uiScale),this.Vb=this.Hy.Ob(this.pixelScale).Ce(new H).we(this.tR),this.rR=this.us.ls.Er(this,{animationEnabled:!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled)}),this.nR=new ul((()=>this.Xy.Pr(this.pixelScale).setMouseInteractions(!1))),this.oR=new ul((()=>this.Xy.Pr(this.uiScale))),this.Vb.setMouseInteractions(this.Yi).setMouseEnterEventHandler(((t,i,s)=>this.wt(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this.Ct(i,s))).setMouseClickEventHandler(((t,i,s)=>this.kt(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Tt(i,s))).setMouseDownEventHandler(((t,i,s)=>this.Ft(i,s))).setMouseUpEventHandler(((t,i,s)=>this.It(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Pt(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Bt(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.Dt(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Lt(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Rt(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Et(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.zt(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Vt(i,s))),this.setAnimationsEnabled(!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled))}setData(t){t=Array.isArray(t)?t.slice():[t];const{aR:i}=(()=>{let t=0;return{aR:i=>{var s;const e=i.map(((t,i)=>({node:t,parent:null}))),h=[];for(;e.length>0;){const i=e.pop();if(!i)continue;const{node:r,parent:n}=i;t+=1;const o={id:t,parentID:null==n?void 0:n.id,name:r.name,value:r.value||0,animatedValue:r.value||0,children:[],nodeIndex:n?n.nodeIndex:-1,userNode:r};n?n.children.push(o):h.push(o),null===(s=r.children)||void 0===s||s.forEach((t=>{e.push({node:t,parent:o})}))}const r=t=>{t.children.forEach(r),t.children.length>0&&(t.value+=t.children.reduce(((t,i)=>t+i.value),0),t.animatedValue+=t.children.reduce(((t,i)=>t+i.animatedValue),0),t.children.sort(((t,i)=>i.animatedValue-t.animatedValue)))};h.forEach(r);const n=1===i.length?h[0].children:h;return n.sort(((t,i)=>i.animatedValue-t.animatedValue)),n.forEach(((t,i)=>{t.nodeIndex=i;const s=i=>{i.children.forEach((i=>{i.nodeIndex=t.nodeIndex,s(i)}))};s(t)})),h}}})(),s=i(t);return s.forEach((t=>{const i=this.NL[t.id];i&&this.lR(t,i)})),this.Hb=void 0,this.GL.S(s),this.OL=s,this.NL=this.uR(s),this.KL=!0,this.us.Ss(),this}setAnimationValues(t,i=1){return this._y=t?{speed:i}:void 0,this.us.Ss(),this}setInitPathButtonText(t){return this.YL=t,this.KL=!0,this.us.Ss(),this}setDisplayedLevelsCount(t){return this.WL=t,this.KL=!0,this.us.Ss(),this}setDrillDownEnabled(t){return this.UL=t,this.KL=!0,this.us.Ss(),this}setDrillDownNode(t){var i,s;if(this.Hb=void 0,void 0===t)this.GL.S(this.OL);else{const e=[...this.OL];for(;e.length>0;){const h=e.pop();if(h){if(void 0!==h.value&&h.userNode===t||h.parentID&&Array.isArray(t)&&(null===(s=null===(i=this.NL[h.parentID])||void 0===i?void 0:i.userNode)||void 0===s?void 0:s.children)===t){const t=h.children.length?h:h.parentID?this.NL[h.parentID]:this.OL[0];this.GL.S([t]);break}if(h.children)for(let t=h.children.length-1;t>=0;t-=1)e.push(h.children[t])}}}return this.D.emit("viewChange",this.GL.M()),this.KL=!0,this.us.Ss(),this}setNodeColoring(t){return t instanceof Array?(this.Vb.Ce(new H),this.eR=t):this.Vb.Ce(t),this.KL=!0,this.us.Ss(),this}setParentNodeColor(t){return this.qL=t,this.KL=!0,this.us.Ss(),this}setPathLabelFillStyle(t){return this.$L="function"==typeof t?t(this.$L):t,this.KL=!0,this.us.Ss(),this}getPathLabelFillStyle(){return this.$L}setPathLabelFont(t){return ch(t)?this.XL=t:this.XL=t(this.XL),this.KL=!0,this.us.Ss(),this}getPathLabelFont(){return this.XL}setHeaderFont(t){return ch(t)?this.ZL=t:this.ZL=t(this.ZL),this.KL=!0,this.us.Ss(),this}getHeaderFont(){return this.ZL}setHeaderFillStyle(t){return this.jL="function"==typeof t?t(this.jL):t,this.KL=!0,this.us.Ss(),this}getHeaderFillStyle(){return this.jL}setLabelFont(t){return ch(t)?this.JL=t:this.JL=t(this.JL),this.KL=!0,this.us.Ss(),this}getLabelFont(){return this.JL}setLabelFillStyle(t){return this.QL="function"==typeof t?t(this.QL):t,this.KL=!0,this.us.Ss(),this}getLabelFillStyle(){return this.QL}setNodeBorderStyle(t){return this.Vb.we(t),this.KL=!0,this.us.Ss(),this}getNodeBorderStyle(){return this.Vb.ao()}setNodeEffect(t){return this.hR.ps(t),this.us.Ss(),this}getNodeEffect(){return this.hR.vs()}setAutoCursor(t){return this.Eb&&t(this.Eb),this.us.Ss(),this}getAutoCursor(){return this.Eb}setAutoCursorMode(t){return this.bb=t,this.us.Ss(),this}getAutoCursorMode(){return this.bb}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}onNodeMouseDragStart(t){return this.D.on("mouseDragStart",t)}onNodeMouseDrag(t){return this.D.on("mouseDrag",t)}onNodeMouseDragStop(t){return this.D.on("mouseDragStop",t)}onNodeMouseWheel(t){return this.D.on("mouseWheel",t)}onNodeTouchStart(t){return this.D.on("touchStart",t)}onNodeTouchMove(t){return this.D.on("touchMove",t)}onNodeTouchEnd(t){return this.D.on("touchEnd",t)}onViewChange(t){return this.D.on("viewChange",t)}offNodeTouchStart(t){return this.D.off(t,"touchStart")}offNodeTouchMove(t){return this.D.off(t,"touchMove")}offNodeTouchEnd(t){return this.D.off(t,"touchEnd")}offViewChange(t){return this.D.off(t,"viewChange")}setMouseInteractions(t){return this.Yi=t,this.Vb.setMouseInteractions(t),this}getMouseInteractions(){return this.Yi}setAnimationHighlight(t){return this.rR.Or(t),this}getAnimationHighlight(){return this.rR.Nr()}setHighlightOnHover(t){return this.Mb=t,this}getHighlightOnHover(){return this.Mb}getMinimumSize(){}Zd(){return[this]}Te(t){super.Te(t),super.pm(),Sa.Fm(this._m,this.bm);const i=Sa.Tm(this._m,this.bm);if(this.KL&&this.GL.M().length){this.Vb.Nt(),this.VL.clear(),this.rR.Vr(),this.th&&this.cR(t);const s=pA({data:this.GL.M(),dimensions:{x:0+this.ya.left,y:0+this.ya.bottom,width:this.pixelScale.x.getInnerEnd()-this.ya.right-this.ya.left,height:this.pixelScale.y.getInnerEnd()-i-this.ya.top-this.ya.bottom}}),e=this.nR.fp();this.dR(s,e),e.finishPlot(),this.fR(),this.OL!==this.GL.M()&&this.OL.length>1&&this.HL.unshift({name:this.YL,id:0});let h=0;const r=this.oR.fp(),n=this.XL;this.HL.forEach(((t,i)=>{const s=r.add(),e=this.us.Ig.Fg(t.name,n,0);s.Rh(`← ${t.name}`).Oh(n).Fe({x:0,y:100}).Ea({x:-1,y:1}).Fr({left:this.ya.left+h,top:this.ya.top,right:0,bottom:0}).Ce(this.$L).setMouseClickEventHandler((t=>this.sR(i))).setMouseEnterEventHandler((()=>this.engine.setMouseStyle(Pe.Point))).setMouseLeaveEventHandler((()=>this.engine.setMouseStyle(Pe.Default))),h+=e.x+25})),r.finishPlot(),this.GL.M().every((t=>t.value===t.animatedValue))?this.KL=!1:this.us.Ss(!0)}const s=this.us.On();if(this.Hb&&s){const t=s;this.Eb.setPosition(t).setVisible(!0).getResultTable().setContent(this.Wy(new Ta,this.Hb).Zu())}else this.Eb.setVisible(!1);return this.Eb.Ps().Te(),this}dispose(){return this.Xy.W(),this.Hy.W(),this.Eb.dispose(),this.Vb.dispose(),this.VL.clear(),this.nR.gp(),this.oR.gp(),super.dispose()}j(){return super.j(),this}Z(){return super.Z(),this}Gd(){return mi(this.Vb.Eh())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),gi(t,this.qi,s,{}),this}dR(t,i,s=!1,e=0){const h=t.map(((t,i)=>({node:t,isChild:s,depth:e})));for(;h.length>0;){const t=h.pop();if(!t)continue;const{node:s,depth:e,opacity:r}=t,{x:n,y:o,height:a,width:l,children:u,animatedValue:c,name:d,nodeIndex:f}=s,A=this.eR,g=0===e&&1===this.GL.M().length?this.qL:A[f%A.length],m=[{x:n,y:o},{x:n,y:a+o},{x:l+n,y:a+o},{x:l+n,y:o}],y=this.Vb.zr().pl(m).AR(g.setA(r||250)).Yb(c);this.VL.set(y,s),this.rR.zr(y,(t=>y.cs(t)));const p=n+5,S=o+5,v=Math.max(a-25-5,0),b=Math.max(l-5-5,0);if(u&&u.length&&e<this.WL&&b>15&&v>15){const t=pA({data:u,dimensions:{x:b>0?p:n,y:v>0?S:o,width:b,height:v}});for(let i=0;i<t.length;i+=1){const n=(250-(u.length>7?50:150))/(u.length-1),o=1===s.id&&1===this.OL.length||this.OL===this.GL.M()?250:r?r/(e+1):250-i*n;h.push({node:t[i],isChild:!0,depth:e+1,opacity:o})}}const x=0===e&&1===this.GL.M().length?this.jL:this.QL,M=0===e?this.ZL:this.JL,_=this.gR(d,l-25,M),w=this.us.Ig.Fg(_,M,0),C=i.add();l-25>w.x&&a>25?C.Rh(_).Fe({x:n+5,y:a+o-2.5}).Ea({x:-1,y:1}).Ce(x).Oh(M):C.Rh("")}}uR(t){const i={},s=[...t];for(;s.length>0;){const t=s.pop();t&&(i[t.id]=t,t.children&&s.push(...t.children))}return i}iR(t){if(!this.KL&&t)return this.VL.get(t)}fR(){this.HL=[];const t=this.GL.M()[0].id;let i=this.NL[t].parentID;for(;i;)this.HL.push({name:this.NL[i].name,id:i}),i=this.NL[i].parentID;return this.HL.reverse()}gR(t,i,s){let e=this.us.Ig.Fg(t,s,0).x;if(e<=i)return t;const h=t.split(" ");let r=t;for(;h.length>1&&e>i;)h.pop(),r=`${h.join(" ")}...`,e=this.us.Ig.Fg(r,s,0).x;if(e>i)for(r=`${h[0]}...`,e=this.us.Ig.Fg(r,s,0).x;r.length>3&&e>i;)r=`${r.substring(0,r.length-4)}...`,e=this.us.Ig.Fg(r,s,0).x;return r.length<=3&&e>i?"":r}cR(t){var i;const s=[...this.OL];for(;s.length>0;){const e=s.pop();if(!e)continue;const h=e.value-e.animatedValue;if(Math.abs(h)<.0015*e.value||void 0===this._y)e.animatedValue=e.value;else{const s=h/250*((null===(i=this._y)||void 0===i?void 0:i.speed)||1)*t;e.animatedValue+=s,(h>0&&e.animatedValue>e.value||h<0&&e.animatedValue<e.value)&&(e.animatedValue=e.value)}e.children&&e.children.length>0&&s.push(...e.children)}}lR(t,i){const s=[{current:t,previous:i}];for(;s.length>0;){const t=s.pop();if(!t)continue;const{current:i,previous:e}=t;i.animatedValue=this.th?e.animatedValue:i.value,e.nodeIndex<0?i.nodeIndex=0:i.nodeIndex=e.nodeIndex;const h=new Map(e.children.map((t=>[t.id,t])));i.children.forEach(((t,i)=>{const r=h.get(t.id);s.push({current:t,previous:r||e})}))}}}const xA=(t,i)=>{const{name:s,value:e}=i;return t.addRow(`${s}`).addRow(`${e}`),t},MA=(t,i)=>{const s=(t=>{const i=new U({color:t.uiStrokeColorContrastHigh}),s=new U({color:t.uiStrokeColorContrastMedium}),e=new U({color:t.uiStrokeColorContrastLow}),h=new uh({family:t.fontFamily,weight:"normal",style:"normal"}),r=h.setSize(18*t.fontScaler),n=h.setSize(16*t.fontScaler),o=h.setSize(14*t.fontScaler),a=h.setSize(10*t.fontScaler),l=h.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),u=h.setSize(13*t.fontScaler),c=new ee({thickness:2,fillStyle:e}),d=new U({color:t.dataHighlightOverlayColor}),f=new ee({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),A=t.dataColorPalette.map((t=>new U({color:t.stroke}))),g=t=>A[t%A.length],m=A.map((t=>new ee({thickness:2,fillStyle:t}))),y=t=>m[t%m.length],p=t.dataColorPalette.map((t=>new U({color:t.border}))).map((t=>new ee({thickness:2,fillStyle:t}))),S=t=>p[t%p.length],x=t.dataColorPalette.map((t=>{const i=t.area;return new rt({angle:180,stops:[{color:di(i,v(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:di(i,v(0,0,0,i.getA()),.3),offset:1}]})})),M=t=>x[t%x.length],_=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new rt({angle:180,stops:[{color:di(i,v(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:di(i,v(0,0,0,i.getA()),.3),offset:1}]})})),w=t=>_[t%_.length],C=t.dataColorPaletteInverted.map((t=>new U({color:t.border}))).map((t=>new ee({thickness:2,fillStyle:t}))),k=t=>C[t%C.length],T=new U({color:t.dataColorPositive}),F=new U({color:t.dataColorNegative}),I=new ee({thickness:1,fillStyle:new U({color:t.dataStrokeColorContrastHigh.setA(50)})}),P=new ee({thickness:2,fillStyle:t.axisLineFillStyle}),D=at,B=new U({color:v(0,0,0,1)}),L=new ee({thickness:1,fillStyle:t.axisGridMajorFillStyle}),R=new ee({thickness:1,fillStyle:t.axisTickMajorFillStyle}),E=o,z=t.axisLabelMajorFillStyle,V=new ee({thickness:1,fillStyle:t.axisGridMajorFillStyle}),N=new ee({thickness:1,fillStyle:t.axisTickMajorFillStyle}),G=o,W=t.axisLabelMajorFillStyle,Y=new ee({thickness:1,fillStyle:t.axisGridMinorFillStyle}),H=new ee({thickness:1,fillStyle:t.axisTickMinorFillStyle}),$=a,X=t.axisLabelMinorFillStyle,j=Bo,Z=new Po({gridStrokeStyle:L,tickStyle:R,tickLength:50,tickPadding:-14,labelFont:E,labelPadding:0,labelFillStyle:z}),Q=new Po({gridStrokeStyle:V,tickStyle:N,tickLength:7,tickPadding:5,labelFont:G,labelPadding:0,labelFillStyle:W}),J=new Po({gridStrokeStyle:Y,tickStyle:H,tickLength:4,tickPadding:10,labelFont:$,labelPadding:0,labelFillStyle:X}),K=new sa({extremeTickStyle:j,majorTickStyle:Q,minorTickStyle:J}),q=new Xo({greatTickStyle:Z,majorTickStyle:Q,minorTickStyle:J}),tt=new aa({majorTickStyle:Q,minorTickStyle:J}),it=new U({color:t.dataHighlightOverlayColor}),st=new ee({thickness:1,fillStyle:s}),et=new ee({thickness:2,fillStyle:s}),ht=t=>new vh.Triangulated({shape:"sphere",size:10,fillStyle:A[t%A.length]}),nt=A[0],ot=t.uiTextFillStyle,lt=t.legendBackgroundFillStyle,ut=new ee({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),ct=Ai(t.legendButtonDefaultColor),dt=Ai(t.isDark?v(70,70,70,255):v(170,170,170,255)),ft=new U({color:t.isDark?v(70,70,70,255):v(170,170,170,255)}),At=new ee({thickness:1,fillStyle:i}),gt=new dn({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:un.DashedEqual,patternScale:3}),mt=t.zoomBandChartDefocusOverlayFillStyle,yt=new ee({thickness:2,fillStyle:new U({color:t.zoomBandChartSplitterColor})});let pt={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:at,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new ee({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:at,chartXYTitleFont:r,chartXYTitleFillStyle:t.titleFillStyle,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:c,chartXYZoomingRectangleFillStyle:d,chartXYZoomingRectangleStrokeStyle:f,chartXYFittingRectangleFillStyle:d,chartXYFittingRectangleStrokeStyle:f,lineSeriesStrokeStyle:y,pointLineSeriesStrokeStyle:y,pointLineSeriesFillStyle:g,pointSeriesFillStyle:g,ellipseSeriesFillStyle:g,ellipseSeriesStrokeStyle:y,polygonSeriesFillStyle:g,polygonSeriesStrokeStyle:y,rectangleSeriesFillStyle:g,rectangleSeriesStrokeStyle:at,segmentSeriesStrokeStyle:y,boxSeriesBodyFillStyle:g(0),boxSeriesBodyStrokeStyle:at,boxSeriesStrokeStyle:new ee({thickness:1,fillStyle:A[0]}),boxSeriesMedianStrokeStyle:new ee({thickness:1,fillStyle:new U({color:v(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:T,ohlcCandleBodyFillStyleNegative:F,ohlcCandleTailStrokeStylePositive:new ee({thickness:1,fillStyle:new U({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new ee({thickness:1,fillStyle:new U({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new ee({thickness:2,fillStyle:T}),ohlcBarStrokeStyleNegative:new ee({thickness:2,fillStyle:F}),heatmapGridSeriesFillStyle:g,heatmapGridSeriesWireframeStyle:I,heatmapScrollingGridSeriesFillStyle:g,heatmapScrollingGridSeriesWireframeStyle:I,areaRangeSeriesFillStyle:M,areaRangeSeriesStrokeStyle:S,areaRangeSeriesFillStyleInverted:w,areaRangeSeriesStrokeStyleInverted:k,areaSeriesBipolarHighFillStyle:M,areaSeriesBipolarHighStrokeStyle:S,areaSeriesBipolarLowFillStyle:w,areaSeriesBipolarLowStrokeStyle:k,areaSeriesPositiveFillStyle:M,areaSeriesPositiveStrokeStyle:S,areaSeriesNegativeFillStyle:w,areaSeriesNegativeStrokeStyle:k,xAxisTitleFont:n,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:P,xAxisNibStyle:D,xAxisOverlayStyle:B,xAxisZoomingBandFillStyle:d,xAxisZoomingBandStrokeStyle:at,xAxisNumericTicks:K,xAxisDateTimeTicks:q,xAxisTimeTicks:tt,yAxisTitleFont:n,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:P,yAxisNibStyle:D,yAxisOverlayStyle:B,yAxisZoomingBandFillStyle:d,yAxisZoomingBandStrokeStyle:at,yAxisNumericTicks:K,yAxisDateTimeTicks:q,yAxisTimeTicks:tt,bandFillStyle:it,bandStrokeStyle:st,constantLineStrokeStyle:et,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:at,barChartTitleFont:r,barChartTitleFillStyle:t.titleFillStyle,barChartSeriesBackgroundFillStyle:O,barChartSeriesBackgroundStrokeStyle:at,barChartBarFillStyle:g,barChartBarStrokeStyle:new ee({thickness:1,fillStyle:e}),barChartValueAxisTitleFont:n,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:P,barChartValueAxisTicks:K.setMajorTickStyle((t=>t.setGridStrokeStyle(at))).setMinorTickStyle((t=>t.setGridStrokeStyle(at))),barChartCategoryAxisTitleFont:n,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:P,barChartCategoryLabels:{formatter:(t,i)=>t,labelFillStyle:K.majorTickStyle.labelFillStyle,labelFont:K.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:K.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:K.majorTickStyle.labelFillStyle,labelFont:K.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:K.majorTickStyle.labelFillStyle,labelFont:K.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:at,chart3DTitleFont:r,chart3DTitleFillStyle:t.titleFillStyle,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:c,chart3DBoundingBoxStrokeStyle:at,xAxis3DTitleFont:n,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:P,xAxis3DNumericTicks:K,xAxis3DDateTimeTicks:q,xAxis3DTimeTicks:tt,yAxis3DTitleFont:n,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:P,yAxis3DNumericTicks:K,yAxis3DDateTimeTicks:q,yAxis3DTimeTicks:tt,zAxis3DTitleFont:n,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:P,zAxis3DNumericTicks:K,zAxis3DDateTimeTicks:q,zAxis3DTimeTicks:tt,lineSeries3DStrokeStyle:y,pointLineSeries3DStrokeStyle:y,pointLineSeries3DPointStyle:ht,pointSeries3DPointStyle:ht,pointCloudSeries3DPointStyle:t=>new vh.Pixelated({size:5,fillStyle:A[t%A.length]}),surfaceGridSeries3DFillStyle:g,surfaceGridSeries3DWireframeStyle:I,surfaceScrollingGridSeries3DFillStyle:g,surfaceScrollingGridSeries3DWireframeStyle:I,boxSeries3DFillStyle:g,meshModel3DFillStyle:g(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:at,polarChartTitleFont:r,polarChartTitleFillStyle:t.titleFillStyle,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:c,polarSectorFillStyle:it,polarSectorStrokeStyle:st,polarAmplitudeAxisTitleFont:n,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:P,polarAmplitudeAxisNumericTicks:K,polarAmplitudeAxisDateTimeTicks:q,polarAmplitudeAxisTimeTicks:tt,polarRadialAxisTitleFont:n,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:P,polarRadialAxisTickStyle:Q,polarLineSeriesStrokeStyle:y,polarPointLineSeriesFillStyle:g,polarPointLineSeriesStrokeStyle:y,polarPointSeriesFillStyle:g,polarPolygonSeriesFillStyle:M,polarPolygonSeriesStrokeStyle:S,polarAreaSeriesFillStyle:M,polarAreaSeriesStrokeStyle:S,polarHeatmapSeriesFillStyle:g,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:at,mapChartTitleFont:r,mapChartTitleFillStyle:t.titleFillStyle,mapChartFillStyle:nt,mapChartStrokeStyle:new ee({thickness:1,fillStyle:new U({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:O,mapChartOutlierRegionStrokeStyle:new ee({thickness:1,fillStyle:e}),mapChartSeparateRegionFillStyle:lt,mapChartSeparateRegionStrokeStyle:ut,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:at,dataGridTitleFont:r,dataGridTitleFillStyle:t.titleFillStyle,dataGridTextFont:o,dataGridTextFillStyle:nt,dataGridCellBackgroundFillStyle:new U({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new ee({thickness:.4,fillStyle:new U({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:at,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:ut,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:ut,dataGridScrollBarButtonArrowFillStyle:ct,dataGridScrollBarButtonArrowStrokeStyle:ut,sparkLineChartStrokeStyle:y(0),sparkPointChartFillStyle:g(0),sparkBarChartFillStyle:g(0),sparkBarChartStrokeStyle:S(0),sparkAreaChartFillStyle:M(0),sparkAreaChartStrokeStyle:S(0),sparkPieChartFillStyle:g,sparkPieChartStrokeStyle:ut,sparkChartBandFillStyle:it,sparkChartBandStrokeStyle:st,sparkChartConstantLineStrokeStyle:et,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:at,spiderChartTitleFont:r,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:c,spiderChartWebStyle:new ee({thickness:2,fillStyle:e}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:o,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:n,spiderChartAxisStrokeStyle:new ee({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new ee({thickness:2,fillStyle:i}),spiderSeriesFillStyle:M,spiderSeriesStrokeStyle:S,spiderSeriesPointFillStyle:g,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:at,pieChartTitleFont:r,pieChartTitleFillStyle:t.titleFillStyle,pieChartSliceFillStylePalette:g,pieChartSliceStrokeStyle:ut,pieChartSliceLabelFont:u,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:At,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:at,funnelChartTitleFont:r,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartSliceFillStylePalette:g,funnelChartSliceStrokeStyle:ut,funnelChartSliceLabelFont:u,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:At,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:at,pyramidChartTitleFont:r,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartSliceFillStylePalette:g,pyramidChartSliceStrokeStyle:ut,pyramidChartSliceLabelFont:u,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:At,gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:at,gaugeChartTitleFont:r,gaugeChartTitleFillStyle:t.titleFillStyle,gaugeChartEmptyGaugeFillStyle:new U({color:t.uiBackgroundColor}),gaugeChartEmptyGaugeStrokeStyle:ut,gaugeChartGaugeFillStyle:nt,gaugeChartIntervalLabelsFillStyle:ot,gaugeChartIntervalLabelsFont:u,gaugeChartValueLabelFillStyle:ot,gaugeChartValueLabelFont:u,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:at,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new ee({thickness:1,fillStyle:new U({color:b("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleFont:r,treeMapChartPathLabelFillStyle:ot,treeMapChartPathLabelFont:u,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:r,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:u,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:at,zoomBandChartDefocusOverlayFillStyle:mt,zoomBandChartSplitterStrokeStyle:yt,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:v(254,204,0,.7),uiButtonFillStyle:ct,uiButtonFillStyleHidden:dt,uiButtonStrokeStyle:ut,uiButtonSize:10,uiBackgroundFillStyle:lt,uiBackgroundStrokeStyle:ut,uiTextFillStyle:ot,uiTextFillStyleHidden:ft,uiTextFont:u,legendTitleFillStyle:ot,legendTitleFont:l,cursorTickMarkerXBackgroundFillStyle:lt,cursorTickMarkerXBackgroundStrokeStyle:ut,cursorTickMarkerXTextFillStyle:ot,cursorTickMarkerXTextFont:u,cursorTickMarkerYBackgroundFillStyle:lt,cursorTickMarkerYBackgroundStrokeStyle:ut,cursorTickMarkerYTextFillStyle:ot,cursorTickMarkerYTextFont:u,cursorPointMarkerFillStyle:gt.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:zh.Cross,cursorResultTableFillStyle:lt,cursorResultTableStrokeStyle:ut,cursorResultTableTextFillStyle:ot,cursorResultTableTextFont:u,cursorGridStrokeStyleX:gt,cursorGridStrokeStyleY:gt,chartMarkerPointMarkerFillStyle:gt.getFillStyle(),chartMarkerPointMarkerSize:{x:20,y:20},chartMarkerPointMarkerShape:zh.Star,seriesMarkerPointMarkerFillStyle:gt.getFillStyle(),seriesMarkerPointMarkerSize:{x:9,y:9},seriesMarkerPointMarkerShape:zh.Cross};return t.overrideThemeProperties&&(pt={...pt,...t.overrideThemeProperties}),pt})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},_A=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/${i}`;return s.addEventListener("error",(i=>{Di(t,e,"Theme resource",{shouldCrash:!1})})),s.src=e,s},wA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:di(i[e%i.length].stroke,v(255,255,255),.5);return new st({stops:[{color:di(h,v(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:di(h,v(30,30,30),.5*s).setA(100),offset:1}]})},CA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:di(i[e%i.length].stroke,v(255,255,255),.2);return new st({stops:[{color:di(h,v(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:di(h,v(0,0,0),.2*s),offset:1}]})},kA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:di(i[e%i.length].stroke,v(255,255,255),.2);return new rt({angle:90,stops:[{color:di(h,v(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:di(h,v(30,30,30),.5*s),offset:1}]})},TA=(t,i,s)=>(s=>{const e=new Map;return s=>{const h=e.get(s);if(h)return h;const r=(s=>{const e=!0===t?i[s%i.length].stroke:di(i[s%i.length].stroke,v(255,255,255),.3);return new rt({angle:90,stops:[{color:di(e,v(255,255,255),.5),offset:0},{color:e,offset:.35},{color:di(e,v(30,30,30),.5),offset:1}]})})(s);return e.set(s,r),r}})(),FA=(t,i,s)=>{const e=i[0].stroke;return new st({shape:q.ellipse,extent:tt.farthestCorner,position:{x:.5,y:.5},stops:[{color:!0===t?e:di(e,v(255,255,255),.5*s),offset:0},{color:e,offset:.5},{color:!0===t?e:di(e,v(0,0,0),.5*s),offset:1}]})},IA=Ii((()=>{const t=v(255,255,255),i=new U({color:t}),s=!0,e=new pn({spread:1,blur:9,offset:{x:0,y:0},color:v(0,0,0,150)}),h=new st({position:{x:.8,y:.8},extent:tt.farthestCorner,shape:q.ellipse,stops:[{offset:0,color:v(50,51,52)},{offset:.5,color:v(14,15,16)},{offset:1,color:v(0,0,0)}]}),r=new U({color:v(45,45,45)}),n=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:v(120,120,120,100)},{offset:1,color:v(0,0,0,50)}]}),o=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:v(30,30,30,200)},{offset:1,color:v(0,0,0,255)}]}),a=new U({color:v(255,255,220)}),l=new U({color:v(255,255,166)}),u=new U({color:v(255,255,220)}),c=new U({color:v(255,255,220,130)}),d=new U({color:v(255,255,200)}),f=d,A=f,g=new rt({angle:45,stops:[{offset:0,color:v(230,230,230)},{offset:1,color:v(150,150,150)}]}),m=new U({color:v(220,220,220)}),y=new U({color:v(200,200,200,50)}),p=new U({color:v(200,200,200,150)}),S=new U({color:v(200,200,200,20)}),x=new U({color:v(150,150,150)}),M=new rt({angle:0,stops:[{offset:0,color:v(10,10,10,220)},{offset:1,color:v(30,30,30,220)}]}),_=i,w=v(255,255,200),C=M,k=_,T=v(20,20,20),F=v(0,0,0),I=t,P=v(150,150,150),D=v(50,50,50),B=v(50,50,50),L=v(100,100,100),R=v(200,200,200),E=[v(255,255,91,255),v(255,205,91,255),v(255,155,91,255),v(255,196,188,255),v(255,148,184,255),v(219,148,198,255),v(235,196,224,255),v(169,148,198,255),v(148,226,198,255),v(148,255,176,255),v(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),z=t.setA(20),V=v(176,255,157,255),O=v(255,112,76,255),N={mapChartFillStyle:new rt({angle:135,stops:[{color:v(255,255,91,255),offset:0},{color:v(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:wA(s,E,.5),pieChartSliceFillStylePalette:CA(s,E,1),funnelChartSliceFillStylePalette:kA(s,E,1),pyramidChartSliceFillStylePalette:kA(s,E,1),rectangleSeriesFillStyle:TA(s,E),gaugeChartGaugeFillStyle:FA(s,E,1)},G=new U({color:v(176,255,157,255)}),W=new U({color:v(255,146,146,255)}),Y=new U({color:v(176,255,157,255)}),H=new U({color:v(230,63,63,255)}),$=new U({color:v(176,255,157,120)}),X=new U({color:v(229,63,63,180)}),j=new U({color:v(27,37,36,255)}),Z=new U({color:v(62,27,27,255)}),Q=[v(255,0,0),v(255,255,0),v(0,255,0)],J=[v(10,10,255),v(10,190,255),v(251,255,0),v(255,38,0)],K=[v(255,255,0),v(255,204,0),v(255,128,0),v(255,0,0)],it=[v(0,0,0),v(167,4,69,255),v(255,0,0),v(252,252,168,255)],et=new st({stops:[{color:v(61,61,80,100),offset:0},{color:v(44,44,55,30),offset:1}]}),ht=new U({color:v(148,148,198,255)}),nt=$.getColor().setA(255),ot=v(100,100,100),at=[v(255,241,149,200),v(255,230,65,200),v(238,211,32,200),v(238,176,32,200),v(255,159,13,200),v(254,120,37,200),v(253,91,56,200),v(253,75,84,200),v(254,95,124,200),v(227,56,160,200),v(226,53,134,200),v(216,90,166,200),v(254,151,206,200),v(237,151,254,200),v(243,177,255,200),v(233,133,252,200),v(210,101,230,200),v(178,61,200,200),v(193,81,156,200),v(217,95,145,200)];return MA({isDark:s,highlightColorOffset:v(60,60,60,60),highlightColorOffsetAxisOverlay:v(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:h,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:m,axisGridMajorFillStyle:y,axisTickMinorFillStyle:p,axisGridMinorFillStyle:S,cursorGridFillStyle:x,legendBackgroundFillStyle:M,legendBackgroundBorderFillStyle:_,legendButtonDefaultColor:w,resultTableBackgroundFillStyle:C,resultTableBackgroundBorderFillStyle:k,uiBackgroundColor:T,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:P,uiStrokeColorContrastLow:D,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:R,dataColorPalette:E,dataColorPaletteInverted:[{area:v(190,50,50,100),border:v(210,80,80)}],dataHighlightOverlayColor:z,dataColorPositive:V,dataColorNegative:O,zoomBandChartDefocusOverlayFillStyle:new U({color:v(0,0,0,180)}),zoomBandChartSplitterColor:b("#FBFB5A"),zoomBandChartKnobFillStyle:t=>new an({source:_A(t,"zoomBandChart/darkgold-selector.png"),fitMode:nn.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:N,treeMapChartParentColor:b("#181E21"),treeMapChartNodeColors:at,treeMapChartLabelFillStyle:new U({color:v(33,33,33)}),treeMapChartLabelHeaderFillStyle:new U({color:v(250,250,250)})},{positiveTextFillStyle:G,negativeTextFillStyle:W,positiveFillStyle:Y,negativeFillStyle:H,positiveAreaFillStyle:$,negativeAreaFillStyle:X,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:Z,badGoodColorPalette:Q,coldHotColorPalette:J,intensityColorPalette:K,spectrogramColorPalette:it,bollingerFillStyle:et,bollingerBorderFillStyle:ht,highlightPointColor:t,highlightDataGridColor:nt,unfocusedDataColor:ot})})),PA=Ii((()=>{const t=v(255,255,255),i=new U({color:t}),s=!0,e=new pn({spread:0,blur:9,offset:{x:0,y:0},color:v(105,255,236,40)}),h=new U({color:v(2,21,30)}),r=new st({stops:[{color:v(19,40,66,150),offset:0},{color:v(0,0,0,150),offset:1}]}),n=new U({color:v(0,5,8,150)}),o=i,a=i,l=i,u=new U({color:v(255,255,220,130)}),c=i,d=i,f=d,A=new U({color:v(20,224,250,255)}),g=i,m=new U({color:v(61,94,110,100)}),y=new U({color:v(61,94,110,255)}),p=new U({color:v(61,94,110,40)}),S=i,x=new U({color:v(0,18,23,255)}),M=i,_=t,w=new U({color:v(0,17,22,240)}),C=i,k=v(0,38,48,220),T=v(0,0,0),F=t,I=v(150,150,150),P=v(19,78,93),D=v(50,50,50),B=v(0,36,48),L=v(200,200,200),R=[v(45,253,253,255),v(44,172,247,255),v(46,100,248,255),v(96,84,199,255),v(184,104,245,255),v(98,160,218,255),v(43,238,245,255),v(38,140,206,255),v(112,96,224,255),v(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),E=t.setA(50),z=v(3,217,194,255),V=v(230,63,63,255),O={mapChartFillStyle:new rt({angle:135,stops:[{color:v(118,248,231,255),offset:0},{color:v(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:wA(s,R,1),pieChartSliceFillStylePalette:CA(s,R,1),funnelChartSliceFillStylePalette:kA(s,R,1),pyramidChartSliceFillStylePalette:kA(s,R,1),rectangleSeriesFillStyle:TA(s,R),gaugeChartGaugeFillStyle:FA(s,R,1)},N=new U({color:v(45,253,253,255)}),G=new U({color:v(255,146,146,255)}),W=new U({color:v(45,253,253,255)}),Y=new U({color:v(230,63,63,255)}),H=new U({color:v(1,190,164,120)}),$=new U({color:v(229,63,63,180)}),X=new U({color:v(1,53,57,255)}),j=new U({color:v(62,27,27,255)}),Z=[v(1,104,119,255),v(0,165,144,255),v(0,246,214,255)],Q=[v(0,87,95,255),v(0,125,124,255),v(1,209,182,255),v(0,255,221,255),v(218,112,112,255),v(172,47,47,255)],J=[v(126,255,253,255),v(50,233,230,255),v(0,196,193,255),v(62,138,178,255),v(139,88,191,255),v(162,55,143,255)],K=[v(13,31,52,255),v(101,50,118,255),v(1,142,172,255),v(2,196,170,255),v(0,255,221,255)],q=new st({stops:[{color:v(122,103,254,70),offset:0},{color:v(178,168,255,10),offset:1}]}),tt=new U({color:v(122,103,254,255)}),it=H.getColor().setA(255),et=v(15,83,83),ht=[v(139,252,252,150),v(60,239,239,150),v(2,201,201,150),v(26,159,159,150),v(15,146,187,150),v(65,168,200,150),v(67,146,207,150),v(64,108,209,150),v(189,64,233,150),v(219,84,238,150),v(192,55,212,150),v(212,98,229,150),v(248,110,211,150),v(251,154,225,150),v(251,154,184,150),v(233,105,144,150),v(255,133,170,150),v(249,110,135,150),v(245,72,101,150),v(210,57,84,150)];return MA({isDark:s,highlightColorOffset:v(60,60,60,60),highlightColorOffsetAxisOverlay:v(255,255,255,40),effect:e,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new an({source:_A(t,"themes/turquoiseHexagon.jpg"),fitMode:nn.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:m,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:v(170,60,210,100),border:v(210,100,250)}],dataHighlightOverlayColor:E,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new U({color:v(0,0,0,180)}),zoomBandChartSplitterColor:b("#2BF4F4"),zoomBandChartKnobFillStyle:t=>new an({source:_A(t,"zoomBandChart/turquoise-selector.png"),fitMode:nn.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:b("#002329"),treeMapChartNodeColors:ht,treeMapChartLabelFillStyle:new U({color:v(33,33,33)}),treeMapChartLabelHeaderFillStyle:new U({color:v(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:$,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:q,bollingerBorderFillStyle:tt,highlightPointColor:t,highlightDataGridColor:it,unfocusedDataColor:et})})),DA=Ii((()=>{const t=!1,i=new pn({spread:0,blur:6,offset:{x:2,y:-2},color:v(0,0,0,30)}),s=new st({position:{x:.8,y:.8},extent:tt.farthestCorner,shape:q.ellipse,stops:[{offset:0,color:v(255,255,255)},{offset:1,color:v(255,255,255)}]}),e=new U({color:v(219,227,233,255)}),h=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:v(255,255,255,200)},{offset:1,color:v(240,244,246,200)}]}),r=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:v(255,255,255,255)},{offset:1,color:v(255,255,255,255)}]}),n=new U({color:v(33,43,49)}),o=new U({color:v(33,43,49)}),a=new U({color:v(33,43,49)}),l=new U({color:v(33,43,49,150)}),u=new U({color:v(33,43,49)}),c=u,d=c,f=new rt({angle:45,stops:[{offset:0,color:v(225,225,225)},{offset:1,color:v(225,225,225)}]}),A=new U({color:v(150,150,150,255)}),g=new U({color:v(150,150,150,170)}),m=new U({color:v(150,150,150,150)}),y=new U({color:v(150,150,150,100)}),p=new U({color:v(128,146,159)}),S=new rt({angle:0,stops:[{offset:0,color:v(255,255,255,240)},{offset:1,color:v(255,255,255,240)}]}),x=new U({color:v(168,186,199)}),M=v(255,255,200),_=new U({color:v(255,255,255,240)}),w=new U({color:v(128,146,159,255)}),C=v(255,255,255,255),k=v(168,168,199,255),T=v(168,186,199,255),F=v(168,186,199,255),I=v(168,186,199,255),P=v(168,186,199,255),D=v(100,100,100),B=v(200,200,200),L=[v(28,181,140,255),v(255,132,0,255),v(240,39,39,255),v(86,121,251,255),v(2,181,213,255),v(13,212,158,255),v(22,167,3,255),v(234,103,232,255),v(62,183,179,255),v(140,93,3,255),v(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),R=v(150,150,150,80),E=v(46,182,120,255),z=v(255,66,66,255),V=new ee({thickness:2,fillStyle:new U({color:v(168,186,199,255)})}),O={mapChartFillStyle:new rt({angle:-45,stops:[{color:v(2,181,213,255),offset:0},{color:v(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:wA(t,L,.8),pieChartSliceFillStylePalette:CA(t,L,.8),funnelChartSliceFillStylePalette:kA(t,L,.5),pyramidChartSliceFillStylePalette:kA(t,L,.5),rectangleSeriesFillStyle:TA(t,L),gaugeChartGaugeFillStyle:FA(t,L,.8),chartXYSeriesBackgroundStrokeStyle:V,chart3DSeriesBackgroundStrokeStyle:V,polarChartSeriesBackgroundStrokeStyle:V,spiderChartSeriesBackgroundStrokeStyle:V,dataGridTextFillStyle:new U({color:v(0,88,64,255)})},N=new U({color:v(4,146,108,255)}),G=new U({color:v(240,39,39,255)}),W=new U({color:v(28,181,140,255)}),Y=new U({color:v(230,88,88,255)}),H=new U({color:v(28,181,140,180)}),$=new U({color:v(230,88,88,180)}),X=new U({color:v(229,243,228)}),j=new U({color:v(232,225,216)}),Z=[v(193,48,48,255),v(240,234,60,255),v(45,191,55,255)],Q=[v(10,19,255,255),v(15,191,250,255),v(249,255,2,255),v(253,133,0,255),v(255,24,0,255)],J=[v(50,99,213),v(8,179,77),v(255,246,0),v(255,126,0),v(189,36,30)],K=[v(16,64,176),v(8,179,77),v(255,246,0),v(255,126,0),v(168,6,0)],it=new U({color:v(185,198,207,255)}),et=new st({stops:[{color:v(151,190,220,10),offset:0},{color:v(151,190,220,50),offset:1}]}),ht=H.getColor().setA(255),nt=v(150,150,150),ot=[v(255,243,136,125),v(254,237,99,125),v(255,216,109,125),v(255,172,100,125),v(255,133,101,125),v(255,113,142,125),v(230,103,129,125),v(242,126,219,125),v(255,155,235,125),v(255,181,240,125),v(203,143,255,125),v(208,154,255,125),v(171,188,255,125),v(197,209,255,125),v(171,187,255,125),v(84,167,239,125),v(38,196,214,125),v(38,214,196,125),v(69,225,141,125),v(36,191,88,125)];return MA({isDark:t,highlightColorOffset:v(-60,-60,-60,60),highlightColorOffsetAxisOverlay:v(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,axisLabelMinorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:A,axisGridMajorFillStyle:g,axisTickMinorFillStyle:m,axisGridMinorFillStyle:y,cursorGridFillStyle:p,legendBackgroundFillStyle:S,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:C,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:L,dataColorPaletteInverted:[{area:v(190,50,50,100),border:v(210,80,80)}],dataHighlightOverlayColor:R,dataColorPositive:E,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new U({color:v(255,255,255,180)}),zoomBandChartSplitterColor:b("#505D65"),zoomBandChartKnobFillStyle:t=>new an({source:_A(t,"zoomBandChart/light-selector.png"),fitMode:nn.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:b("#D9D9D9"),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new U({color:v(0,0,0)}),treeMapChartLabelHeaderFillStyle:new U({color:v(33,33,33)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:$,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:et,bollingerBorderFillStyle:it,highlightPointColor:v(0,0,0),highlightDataGridColor:ht,unfocusedDataColor:nt})})),BA=Ii((()=>{const t=!1,i=new st({position:{x:.8,y:.8},extent:tt.farthestCorner,shape:q.ellipse,stops:[{offset:0,color:v(255,255,255)},{offset:1,color:v(255,255,255)}]}),s=new U({color:v(214,236,216,255)}),e=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:v(233,244,231,70)},{offset:1,color:v(233,244,231,200)}]}),h=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:v(255,255,255,255)},{offset:1,color:v(255,255,255,255)}]}),r=new U({color:v(1,61,53)}),n=new U({color:v(1,61,53)}),o=new U({color:v(1,61,53)}),a=new U({color:v(1,61,53,150)}),l=new U({color:v(1,61,53)}),u=l,c=u,d=new rt({angle:45,stops:[{offset:0,color:v(225,225,225)},{offset:1,color:v(225,225,225)}]}),f=new U({color:v(188,211,186,255)}),A=new U({color:v(188,211,186,150)}),g=new U({color:v(188,211,186,50)}),m=new U({color:v(188,211,186,50)}),y=new U({color:v(104,148,111,255)}),p=new rt({angle:0,stops:[{offset:0,color:v(255,255,255,240)},{offset:1,color:v(255,255,255,240)}]}),S=new U({color:v(104,148,111)}),x=v(255,255,200),M=new U({color:v(255,255,255,240)}),_=new U({color:v(104,148,111,255)}),w=v(255,255,255,255),C=v(179,201,183,255),k=v(188,211,186,255),T=v(188,211,186,255),F=v(188,211,186,255),I=v(188,211,186,255),P=v(100,100,100),D=v(200,200,200),B=[v(138,195,142,255),v(193,161,114,255),v(178,99,99,255),v(142,156,210,255),v(154,209,219,255),v(164,212,199,255),v(104,156,97,255),v(196,147,195,255),v(92,190,187,255),v(126,100,51,255),v(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),L=v(150,150,150,80),R=v(46,182,84,255),E=v(232,96,96,255),z=new ee({thickness:2,fillStyle:new U({color:v(188,211,186,255)})}),V={mapChartFillStyle:new rt({angle:-45,stops:[{color:v(118,160,121,255),offset:0},{color:v(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:wA(t,B,.8),pieChartSliceFillStylePalette:CA(t,B,.8),pyramidChartSliceFillStylePalette:kA(t,B,.5),funnelChartSliceFillStylePalette:kA(t,B,.5),rectangleSeriesFillStyle:TA(t,B),gaugeChartGaugeFillStyle:FA(t,B,.8),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new U({color:v(77,66,21,255)})},O=new U({color:v(93,151,97,255)}),N=new U({color:v(178,99,99,255)}),G=new U({color:v(138,195,142,255)}),W=new U({color:v(178,99,99,255)}),Y=new U({color:v(138,195,142,180)}),H=new U({color:v(178,99,99,180)}),$=new U({color:v(224,240,237)}),X=new U({color:v(251,227,227)}),j=[v(178,99,99,255),v(215,224,111,255),v(80,186,88,255)],Z=[v(62,64,142,255),v(66,131,77,255),v(250,250,135,255),v(202,161,78,255),v(179,53,53,255)],Q=[v(64,86,138),v(123,192,205),v(255,252,149),v(220,155,92),v(184,78,74)],J=[v(64,86,138),v(123,192,205),v(255,252,149),v(220,155,92),v(132,60,57)],K=new U({color:v(185,198,207,255)}),it=new st({stops:[{color:v(151,190,220,10),offset:0},{color:v(151,190,220,50),offset:1}]}),et=Y.getColor().setA(255),ht=v(150,150,150),nt=[v(242,239,210,150),v(243,238,183,150),v(210,222,136,150),v(204,217,148,150),v(157,190,124,150),v(143,178,72,150),v(198,147,88,150),v(216,148,71,150),v(229,142,103,150),v(225,174,152,150),v(219,149,203,150),v(216,188,209,150),v(109,198,189,150),v(172,206,202,150),v(164,223,217,150),v(174,215,233,150),v(203,225,235,150),v(220,227,243,150),v(207,213,227,150),v(171,182,209,150)];return MA({isDark:t,highlightColorOffset:v(-60,-60,-60,60),highlightColorOffsetAxisOverlay:v(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:e,seriesBackgroundFillStyle:h,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:r,axisTitleFillStyle:n,axisLabelMajorFillStyle:o,axisLabelMinorFillStyle:a,uiTitleFillStyle:l,uiTextFillStyle:u,cursorTextFillStyle:c,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:A,axisTickMinorFillStyle:g,axisGridMinorFillStyle:m,cursorGridFillStyle:y,legendBackgroundFillStyle:p,legendBackgroundBorderFillStyle:S,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:_,uiBackgroundColor:w,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:D,dataColorPalette:B,dataColorPaletteInverted:[{area:v(210,70,70,100),border:v(200,110,110)}],dataHighlightOverlayColor:L,dataColorPositive:R,dataColorNegative:E,zoomBandChartDefocusOverlayFillStyle:new U({color:v(255,255,255,180)}),zoomBandChartSplitterColor:b("#446A40"),zoomBandChartKnobFillStyle:t=>new an({source:_A(t,"zoomBandChart/lightnature-selector.png"),fitMode:nn.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:V,treeMapChartParentColor:b("#EFF7EE"),treeMapChartNodeColors:nt,treeMapChartLabelFillStyle:new U({color:v(0,0,0)}),treeMapChartLabelHeaderFillStyle:new U({color:v(33,33,33)})},{positiveTextFillStyle:O,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:W,positiveAreaFillStyle:Y,negativeAreaFillStyle:H,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:X,badGoodColorPalette:j,coldHotColorPalette:Z,intensityColorPalette:Q,spectrogramColorPalette:J,bollingerFillStyle:it,bollingerBorderFillStyle:K,highlightPointColor:v(0,0,0),highlightDataGridColor:et,unfocusedDataColor:ht})})),LA=Ii((()=>{const t=v(255,255,255),i=new U({color:t}),s=!0,e=new pn({spread:1,blur:9,offset:{x:0,y:0},color:v(255,255,255,30)}),h=new U({color:v(6,15,36)}),r=new st({stops:[{color:v(46,13,87,50),offset:0},{color:v(0,0,0,150),offset:1}]}),n=new U({color:v(0,5,8,150)}),o=i,a=i,l=i,u=new U({color:v(255,255,220,130)}),c=i,d=i,f=d,A=new rt({angle:45,stops:[{offset:0,color:v(241,133,255,255)},{offset:1,color:v(115,207,238,255)}]}),g=i,m=new U({color:v(61,94,110,100)}),y=new U({color:v(61,94,110,255)}),p=new U({color:v(61,94,110,40)}),S=i,x=new U({color:v(0,18,23,255)}),M=i,_=v(115,207,238,255),w=new U({color:v(0,17,22,240)}),C=i,k=v(0,38,48,255),T=v(0,0,0),F=t,I=v(150,150,150),P=v(19,57,93),D=v(50,50,50),B=v(0,17,48),L=v(200,200,200),R=[v(20,211,237,255),v(98,147,252,255),v(164,73,250,255),v(129,117,253,255),v(95,134,252,255),v(22,133,212,255),v(35,200,242,255),v(104,121,233,255),v(137,69,232,255),v(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),E=t.setA(50),z=v(3,217,194,255),V=v(243,21,110,255),O={mapChartFillStyle:new rt({angle:135,stops:[{color:v(118,248,231,255),offset:0},{color:v(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:wA(s,R,.5),pieChartSliceFillStylePalette:CA(s,R,2),funnelChartSliceFillStylePalette:kA(s,R,1),pyramidChartSliceFillStylePalette:kA(s,R,1),rectangleSeriesFillStyle:TA(s,R),gaugeChartGaugeFillStyle:FA(s,R,1)},N=new U({color:v(20,211,237,255)}),G=new U({color:v(253,145,178,255)}),W=new U({color:v(20,211,237,255)}),Y=new U({color:v(239,68,121,255)}),H=new U({color:v(20,211,237,120)}),$=new U({color:v(239,68,121,180)}),X=new U({color:v(1,53,57,255)}),j=new U({color:v(94,19,42,255)}),Z=[v(174,51,132,255),v(204,107,218,255),v(189,215,253,255)],Q=[v(0,63,95,255),v(0,149,255,255),v(0,225,255,255),v(255,154,254,255),v(204,98,170,255),v(139,39,84,255)],J=[v(197,241,255,255),v(70,210,255,255),v(0,164,217,255),v(90,99,222,255),v(138,75,192,255),v(151,27,162,255)],K=[v(13,31,52,255),v(129,54,130,255),v(131,108,176,255),v(7,162,213,255),v(26,247,255,255)],q=new st({stops:[{color:v(219,42,235,60),offset:0},{color:v(237,73,252,10),offset:1}]}),tt=new U({color:v(237,73,252,255)}),it=H.getColor().setA(255),et=v(8,70,100),ht=[v(149,230,255,150),v(93,213,243,150),v(20,189,223,150),v(5,151,181,150),v(2,138,198,150),v(2,113,198,150),v(97,148,236,150),v(93,111,230,150),v(151,120,223,150),v(128,87,227,150),v(153,52,230,150),v(179,92,245,150),v(248,110,211,150),v(255,155,228,150),v(251,88,207,150),v(255,0,162,150),v(214,73,177,150),v(209,71,159,150),v(238,101,169,150),v(210,57,134,150)];return MA({isDark:s,highlightColorOffset:v(60,60,60,60),highlightColorOffsetAxisOverlay:v(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new an({source:_A(t,"themes/cyberSpace.jpg"),fitMode:nn.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:m,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:v(41,130,255,100),border:v(45,110,240)}],dataHighlightOverlayColor:E,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new U({color:v(0,0,0,180)}),zoomBandChartSplitterColor:b("#DB77FF"),zoomBandChartKnobFillStyle:t=>new an({source:_A(t,"zoomBandChart/cyberspace-selector.png"),fitMode:nn.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:b("#1E1E3B"),treeMapChartNodeColors:ht,treeMapChartLabelFillStyle:new U({color:v(33,33,33)}),treeMapChartLabelHeaderFillStyle:new U({color:v(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:$,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:q,bollingerBorderFillStyle:tt,highlightPointColor:t,highlightDataGridColor:it,unfocusedDataColor:et})})),RA={};Object.defineProperty(RA,"darkGold",{get:IA,enumerable:!0}),Object.defineProperty(RA,"turquoiseHexagon",{get:PA,enumerable:!0}),Object.defineProperty(RA,"light",{get:DA,enumerable:!0}),Object.defineProperty(RA,"lightNature",{get:BA,enumerable:!0}),Object.defineProperty(RA,"cyberSpace",{get:LA,enumerable:!0});const EA=RA,zA=EA.darkGold,VA=t=>({...t,effect:void 0}),OA=(t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC")=>{let s,e=0,h=0;const r=[],n=t=>{const i=new Tt.Image;i.src=t,i.onload=()=>{r.forEach((t=>{var s;const r=new an({source:i,fitMode:nn.Stretch});null===(s=t.Rd)||void 0===s||s.Ce(r),e=i.width,h=i.height,l(t)}))}};n(i);const o=t.Gn((t=>n(t)));let a;if(new Tt.Image instanceof Tt.HTMLImageElement){const t=new Tt.Image;t.src=i,a=new an({source:t,fitMode:nn.Stretch})}else if(Tt.lcjs_setup){const t=new Tt.Image;t.src=i;const s=Tt.lcjs_setup(t.naturalWidth,t.naturalHeight);s.getContext("2d").drawImage(t,0,0),a=new an({source:s,fitMode:nn.Stretch})}else a=new U({color:b("#f00")});const l=t=>{if(t.Rd){const i=t.dt.mi({x:t.dt.x.getInnerEnd(),y:t.dt.y.getInnerStart()},{x:-(3+e),y:3}),s=t.dt.mi({x:t.dt.x.getInnerEnd(),y:t.dt.y.getInnerStart()},{x:-3,y:3+h}),r={x:s.x-i.x,y:s.y-i.y};t.Rd.Fe(i).q(r)}s&&s.Ss()};return s=t.FI("logo",Number.MAX_SAFE_INTEGER),i=>{const e={dt:i};return(i=>{i.Rd&&i.Rd.dispose(),s&&(i.Rd=s.ke(i.dt).Ce(a).setMouseInteractions(!0).we(at).setMouseEnterEventHandler((()=>{t.Wr(Pe.Point)})).setMouseLeaveEventHandler((()=>{t.Wr(Pe.None)})).setMouseClickEventHandler(NA).setTouchEndEventHandler(NA),l(i))})(e),r.push(e),{Ps:()=>l(e),W:()=>(i=>{i.Rd&&(i.Rd.dispose(),i.Rd=void 0);const s=r.indexOf(i);s>=0&&r.splice(s,1),r.length<=0&&t.Wn(o)})(e)}}},NA=()=>Tt.open("https://lightningchart.com/lightningchart-js/");class GA{constructor(){this.mR=this.dP.bind(this),Tt.addEventListener("scroll",this.mR,{passive:!0})}W(){this.mR&&Tt.removeEventListener("scroll",this.mR),this.mR=void 0}}class WA{constructor(t,i){this.ma=t,this.X=i,this.yR=!0,this.pR=null,this.SR=null}}class UA{constructor(t){this.vR=!1,this.bR=1,this.xR=t,this.MR={ma:n(0,0),X:n(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),yR:!0,pR:null,SR:null},this._R=n(64,64),this.wR=new Uint8ClampedArray(this._R.x*this._R.y*this.bR)}CR(t,i){if(!t.yR)return null;if(t.pR&&t.SR){const s=this.CR(t.pR,i);return null!==s?s:this.CR(t.SR,i)}const s=o(t.X.x,t.X.y);if(t.ma.x+t.X.x>=Number.MAX_SAFE_INTEGER&&(s.x=this._R.x-t.ma.x-1),t.ma.y+t.X.y>=Number.MAX_SAFE_INTEGER&&(s.y=this._R.y-t.ma.y-1),t.X.x===i.x&&t.X.y===i.y)return t.yR=!1,t;if(s.x<i.x||s.y<i.y)return null;let e,h;const r=s.x-i.x,a=s.y-i.y;let l=r<a;return 0===r&&0===a&&(l=!(t.X.x>t.X.y)),l?(e=new WA(ds(t.ma,{x:0,y:1}),n(t.X.x,i.y)),h=new WA(ds(t.ma,{x:0,y:i.y+1}),n(t.X.x,t.X.y-1-i.y))):(e=new WA(ds(t.ma,{x:1,y:0}),n(i.x,t.X.y)),h=new WA(ds(t.ma,{x:i.x+1,y:0}),n(t.X.x-1-i.x,t.X.y))),t.pR=e,t.SR=h,this.CR(t.pR,i)}kR(t,i){const s={TR:!1,ma:null};let e=this.CR(this.MR,i);if(null===e)for(;null===e&&this._R.x<this.xR&&this._R.y<this.xR;){if(!this.FR(n(2*this._R.x,2*this._R.y)))return this.vR=!0,null;s.TR=!0,e=this.CR(this.MR,i)}if(null===e)return this.vR=!0,null;for(let s=0;s<i.y;s+=1)for(let h=0;h<i.x;h+=1){const r=e.ma.y+s,n=e.ma.x+h;this.wR[r*this.bR*this._R.x+n*this.bR+0]=t[s*this.bR*i.x+h*this.bR+0]}return s.ma=e.ma,s}FR(t){if(t.x>this.xR||t.y>this.xR)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.bR);for(let s=0;s<this._R.y;s+=1)for(let e=0;e<this._R.x;e+=1)i[s*t.x*this.bR+e*this.bR+0]=this.wR[s*this._R.x*this.bR+e*this.bR+0];return this._R=t,this.wR=i,!0}}class YA{constructor(t){this.IR=new Map,this.xR=t,this.IR.set(this.IR.size,new UA(this.xR))}PR(t){return this.IR.get(t)}kR(t,i){let s=-1;const e=Array.from(this.IR.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.vR){s=t;break}}-1===s&&(s=this.IR.size,this.IR.set(this.IR.size,new UA(this.xR)));const h=this.IR.get(s);if(!h)return null;let r=h.kR(t,i);if(!r&&h.vR){const e=this.IR.size,h=new UA(this.xR);this.IR.set(e,h),s=e,r=h.kR(t,i)}return r?{DR:s,...r}:null}}var HA;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(HA||(HA={}));const $A=yi("font-texture");class XA{constructor(t){this.BR=new Map,this.LR=new Map,this.No=$A(),this.RR=t,this.ER=new YA(this.RR.zR||4096)}VR(){return this.LR.forEach((t=>{this.RR.OR(t)})),this.LR.clear(),this}NR(t,i){const s=this.BR.get(i);if(s)return s.get(t)}GR(t,i,s){let e=this.BR.get(i);if(e||(e=new Map,this.BR.set(i,e)),e.has(t.glyph))return HA.Success;const h=this.ER.kR(s,t.size);if(!h||!h.ma)return HA.Fail;h.TR&&this.WR();const r=this.ER.PR(h.DR);if(!r)return HA.Fail;let n=this.LR.get(h.DR);if(!n){const t=this.RR.gl.createTexture();if(!t)throw new xt("Failed to create texture for font!");n=t,this.LR.set(h.DR,t)}const o=h.ma,a=r._R.x,l=r._R.y,u=-t.offsetX,c=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,A=o.x/a,g=(o.y+t.size.y)/l,m=(o.x+t.size.x)/a,y=o.y/l,p=[A,g,m,g,A,y,A,y,m,g,m,y],S=[u,c,d,c,u,f,u,f,d,c,d,f],v={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:S,texCoords:p,packerId:h.DR,texture:n};e.set(t.glyph,v);const b=this.RR.gl;return b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.bindTexture(b.TEXTURE_2D,n),b.texImage2D(b.TEXTURE_2D,0,b.LUMINANCE,r._R.x,r._R.y,0,b.LUMINANCE,b.UNSIGNED_BYTE,this.RR.UR?r.wR:new Uint8Array(r.wR)),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.bindTexture(b.TEXTURE_2D,null),h.TR?HA.Resize:HA.Success}WR(){this.BR.forEach((t=>{t.forEach(((i,s)=>{const e=this.ER.PR(i.packerId);if(!e)return;const h=i.origin,r=e._R.x,n=e._R.y,o=h.x/r,a=(h.y+i.size.y)/n,l=(h.x+i.size.x)/r,u=h.y/n,c=[o,a,l,a,o,u,o,u,l,a,l,u];i.texCoords=c,t.set(s,i)}))}))}}const jA=t=>{if(t instanceof Gs||t instanceof gd)return t._i()?"linear-highPrecision":"linear";if(t instanceof Ws){const i={};return t.x instanceof Fs&&(i.x={base:t.x.gi()}),t.y instanceof Fs&&(i.y={base:t.y.gi()}),["logarithmic",i]}return"linear"},ZA=t=>{const i=Object.keys(t),s={};return i.forEach((i=>{const e=t[i];let h=!1;s[i]=t=>{if(!t)return h;const i=e();return h=i,i}})),s},QA=(t,i,s)=>"value"===t.getLookUpProperty()?s:"x"===t.getLookUpProperty()?{min:i.vt(),max:i.bt()}:"y"===t.getLookUpProperty()?{min:i.xt(),max:i.Mt()}:"z"===t.getLookUpProperty()?{min:i.lS(),max:i.aS()}:void 0,JA=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),KA=t=>(i,s)=>s%2?i:i+t;class qA{constructor(t){this.YR=new Map,this.HR=yi("font"),this.$R=new Map,this.XR=new Set,this.RR=t}VR(t=!1){return(t||0===this.XR.size)&&(this.YR.forEach(((t,i)=>{t.VR(),this.YR.delete(i)})),this.XR.clear()),this}jR(t){this.XR.add(t)}ZR(t){this.XR.delete(t)}QR(t,i,s,e){const h=Tt.devicePixelRatio,r=`${e?"dark":"light"} - ${Mh(i,h).id}`,n=this.$R.get(r),o=this.YR.get(n);let a=0,l=0,u=0;const c=t.split(""),d=i.size,f=.45*i.size*h,A=Math.round(1*i.size);let g=!1;for(let t=0;t<c.length;t+=1){const i=c[t],s=o&&o.NR(i,d);if(s)""!==i.trim()&&(l=Math.max(l,s.baseline),a=Math.min(a,s.baseline-(s.size.y-1))),u+=s.advanceX;else{if(""!==i.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(A-1))}u+=f,g=!0}}const m=((t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,h=Math.cos(e),r=Math.sin(e);return{x:Math.abs(t*h)+Math.abs(i*r),y:Math.abs(t*r)+Math.abs(i*h)}})(u/h,(l-a+1)/h,s);return{x:m.x,y:m.y,isEstimate:g}}JR(t,i,s){const e=`${s?"dark":"light"} - ${i.id}`;let h=this.$R.get(e);h||(h=this.HR(),this.YR.set(h,new XA(this.RR)),this.$R.set(e,h));const r=this.YR.get(h);if(!r)throw new xt("Failed to get font texture!");let o=0,a=0,l=0;const u=t.split(""),d=new Map;let f=0;const A=i.properties.size;for(let t=0;t<u.length;t+=1){const e=u[t],h=Math.ceil(f);let n=r.NR(e,A);if(!n){const h=this.RR.KR(e,i.properties,i.dpr,s);if(!h)continue;const l=r.GR(h[1],A,h[0]);if(l===HA.Resize){this.XR.forEach((t=>{t.la.i=!0})),t=-1,f=0,a=0,o=0,d.clear();continue}if(l===HA.Fail)throw new xt("Failed to create glyph");if(n=r.NR(e,A),!n)throw new xt("Failed to get glyph after creation")}if(""!==e.trim()){let t=d.get(n.texture);t||(t={vertices:[],texCoords:[]},d.set(n.texture,t)),t.vertices.push(...n.vertices.map(KA(h))),t.texCoords.push(...n.texCoords),a=Math.max(a,n.baseline),o=Math.min(o,n.baseline-(n.size.y-1))}f+=n.advanceX}l=f;const g=c(n(0,o),n(l,a)),m=[];return d.forEach(((t,i)=>{m.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[m,g]}}class tg{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>ig(t)));for(const s of i)t=s(t);return`${_i(this.modifiers.filter((t=>sg(t)))).map((t=>t.qR)).join("\n")}\n${t}`}}const ig=t=>"function"==typeof t,sg=t=>t&&"object"==typeof t&&"tE"in t,eg=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},hg=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),rg=(...t)=>i=>{const s=t.filter((t=>!1!==t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},ng=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r},og=(t,...i)=>s=>{const e=i.filter((t=>"string"==typeof t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const h=e.join("\n"),r=s.lastIndexOf(t),n=s.substring(r),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,r+o)}\n${h}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},ag=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},lg=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=eg(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=eg(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return ag(`\t${h} = ${e};`)(s)},ug=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i},cg={roundUnsigned:{tE:"roundUnsigned",qR:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{tE:"linearStep",qR:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},decodeUbyteRGBAEncodedFloat:{tE:"decodeUbyteRGBAEncodedFloat",qR:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{tE:"texelFetchWithFallback",qR:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{tE:"texelFetchWithFallback",qR:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{tE:"texelFetchUnsignedWithFallback",qR:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{tE:"texelFetchUnsignedWithFallback",qR:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{tE:"modulus",qR:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{tE:"computeScreenSpaceWireframe",qR:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},dg=(t,i)=>{const s=i.steps,e=s.length-1,h=[eg("uniform vec4 uFallbackColor")],r=[],n=[];for(let t=0;t<i.steps.length;t+=1)r.push(`uniform float uLUTValue${t}`),n.push(`uniform vec4 uLUTColor${t}`);return h.push(eg(...r,...n),i.percentageValues&&eg("uniform float uMinValue","uniform float uMaxValue")),i.interpolate?h.push(ng("colorFragment","vec4 colorLookup = vec4(0.0)",`if (${t} <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                }`,"float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),"if (value <= uLUTValue0) {\n                    colorLookup = uLUTColor0;\n                }",`if (value >= uLUTValue${e}) {\n                    colorLookup = uLUTColor${e};\n                }`,...s.slice(0,-1).map(((t,i)=>`if (value >= uLUTValue${i} && value <= uLUTValue${i+1}) { colorLookup = uLUTColor${i} + vec4(\n                        uLUTColor${i+1}[0] -  uLUTColor${i}[0],\n                        uLUTColor${i+1}[1] -  uLUTColor${i}[1],\n                        uLUTColor${i+1}[2] -  uLUTColor${i}[2],\n                        uLUTColor${i+1}[3] -  uLUTColor${i}[3]\n                    ) * (value - uLUTValue${i})/(uLUTValue${i+1} - uLUTValue${i});}`)),"vec4 colorFragment = colorLookup")):h.push(ng("colorFragment","vec4 colorLookup = vec4(uLUTValue0)",`if (${t} <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                }`,"float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} >= uLUTValue${e}) { colorLookup = uLUTColor${e};}`,...s.slice(1).reverse().map((t=>{const i=s[s.indexOf(t)-1];return`if (value < uLUTValue${s.indexOf(t)}) { colorLookup = uLUTColor${s.indexOf(i)};}`})),"vec4 colorFragment = colorLookup")),h},fg=[eg("uniform sampler2D uMaskTexture"),eg("varying vec2 vMaskTextureCoord"),og("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],Ag=[eg("uniform sampler2D uMaskTexture"),eg("varying vec2 vMaskTextureCoord"),og("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.a")],gg=[eg("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),og("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")];class mg extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const yg=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},pg=t=>void 0!==t.find((t=>{var i;return null===(i=t.iE)||void 0===i?void 0:i.sE})),Sg=t=>void 0!==t.find((t=>{var i;return null===(i=t.iE)||void 0===i?void 0:i.eE})),vg=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,offset:a,flipXY:l,flipXZ:u,splitPosAttribute:c,normalSource:d}=t,f=[];if("attribute"===d&&e.push(eg("attribute vec3 aNormal"),rg("vec3 normal = aNormal")),"linear-highPrecision"!==r?s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==c?e.push(rg(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`)):e.push(rg(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`)))})):s.forEach((i=>{!0!==t.splitPosAttribute?e.push(rg(`${h} ${i.variableNameAxisCoord}_highpart = ${i.attributeNameAxisCoord}_highpart`),rg(`${h} ${i.variableNameAxisCoord}_lowpart = ${i.attributeNameAxisCoord}_lowpart`)):e.push(rg(`${h} ${i.variableNameAxisCoord}_highpart = vec2(${i.attributeNameAxisCoord}_highpartX, ${i.attributeNameAxisCoord}_highpartY)`),rg(`${h} ${i.variableNameAxisCoord}_lowpart = vec2(${i.attributeNameAxisCoord}_lowpartX, ${i.attributeNameAxisCoord}_lowpartY)`))})),a&&a.rotation){const t=a.rotation.dataType,i="uniform"===t?"u":"a";if("attribute-deg"===t){e.push(eg("attribute float aRotDeg"),eg("uniform float uBaseRotDeg"));const t="cRot",i="aInstanceGeo";e.push(rg(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 rotatedGeo = vec2(${i}.x * ${t}.y + ${i}.y * ${t}.x, ${i}.y * ${t}.y - ${i}.x * ${t}.x)`))}else{const s=`${i}Rot`;e.push(eg(`${t} vec2 ${s}`));const h="aInstanceGeo";e.push(rg(`vec2 rotatedGeo = vec2(${h}.x * ${s}.y + ${h}.y * ${s}.x, ${h}.y * ${s}.y - ${h}.x * ${s}.x)`))}}if(a&&e.push(eg(`attribute ${h} aInstanceGeo`)),!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===u){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(eg(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(eg(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",n=!0===a.symmetric?"float":h;e.push(eg(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",l=a.rotation?"rotatedGeo":"aInstanceGeo",u="offsetGeometry";f.push(`${h} ${u} = ${t} * ${l}${o} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${h} normal = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}if(void 0===r||"linear"===r)e.push(eg(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{f.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(eg(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(eg("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===r)e.push(eg("uniform mat4 uMatrix")),s.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===r[0]){e.push(eg(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${Ps(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(eg(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),f.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){e.push(eg("uniform vec2 uRatioPxClip"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(eg("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const i=("attribute"===a.dataType?"a":"u")+"OffsetPixels",r=!0===a.symmetric?"float":h;e.push(eg(`${a.dataType} ${r} ${i}`));const n=a.halved?" * 0.5":"",o=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${i}${n} * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${o}`)}))}if(a&&"scale"===a.sizeUnit){e.push(eg("uniform vec2 uRatioPxClip")),e.push(eg("uniform vec2 uSizePixels"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(eg("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const i=("uniform"===a.dataType?"u":"a")+"OffsetScale";e.push(eg(`${a.dataType} float ${i}`));const h=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${i} * uSizePixels * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${h}`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",r=!0===a.symmetric?"float":h;e.push(eg(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(a&&"nwu"===a.sizeUnit){e.push(eg("uniform float uRatioNwuWu"));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",r=!0===a.symmetric?"float":h;e.push(eg(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * uRatioNwuWu`)}))}return t.snapToNearestPixel&&(e.push(eg("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(ng("gl_Position =",...f)),e},bg=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(og(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(og(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(og(s,...t))}}return h},xg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.iE)||void 0===i?void 0:i.hE})))(t)?[hg("attribute vec4 aColor"),hg("vColor = aColor"),eg("attribute vec4 aColorA"),eg("attribute vec4 aColorB"),ag("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],Mg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.iE)||void 0===i?void 0:i.rE})))(t)?[hg("attribute float aLookupValue"),hg("vLookupValue = aLookupValue"),eg("attribute float aLookupValueA"),eg("attribute float aLookupValueB"),ag("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],_g={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",iE:{sE:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${yg(t)}`,idFragment:void 0,vertexShaderModifiers:[eg(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),ag(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTextureText,e=t&&t.maskTexture,h=t&&t.overrideOpacity;return{idFeature:"Color",iE:{eE:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,rE:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,hE:"attribute"===t.dataType||void 0},apply:(r,n)=>{let o,a=`Color:${yg(t)}`;const l=[];let u="FragmentShader";const c=[];if("uniform"===i)c.push(eg("uniform vec4 uColor"),rg("vec4 colorFragment = uColor"),...s?fg:[],...e?Ag:[]);else if("attribute"===i)o="colorAttribute",l.push(lg("attribute vec4 aColor","varying vec4 vColor")),c.push(eg("varying vec4 vColor"),rg("vec4 colorFragment = vColor"),...s?fg:[],...e?Ag:[]);else if("texture"===i)o="colorTexCoord",l.push(lg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),c.push(eg("varying vec2 vTextureCoord"),eg("uniform sampler2D uColorTexture"),eg("uniform vec4 uColor"),rg("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        colorFragment = uColor;\n                    }"),...s?fg:[],...e?Ag:[]);else if("texture-coord-calc-gpu"===i)o="colorTexCoord",u="Empty",l.push(eg("attribute vec2 aTextureCoord"),eg("varying vec2 vTextureCoord"),ag("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),c.push(eg("varying vec2 vTextureCoord"),eg("uniform sampler2D uColorTexture"),rg("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","gl_FragColor = colorFragment;"));else if(Array.isArray(i)&&"image"===i[0])o="colorTexCoord",l.push(lg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1].fitMode===nn.Tile?c.push(eg("uniform sampler2D uColorTexture"),eg("varying vec2 vTextureCoord"),rg("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);")):c.push(eg("uniform sampler2D uColorTexture"),eg("varying vec2 vTextureCoord"),eg("uniform vec4 uColor"),rg("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                colorFragment = uColor;\n                            }"));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)o="lookup:value",l.push(lg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;o=`lookup:${t}`,l.push(lg(i,"varying float vLookupValue"))}c.push(eg("varying float vLookupValue"),...dg("vLookupValue",i[2]),...s?fg:[],...e?Ag:[])}else if(Array.isArray(i)&&"gradient"===i[0]){const t=i[1],h=t.getColorStops();et(t)?(a=`rgradient${h.length},${e},${s}`,c.push(eg("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),eg(...Et(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),cg.linearStep,rg("vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),"vec4 colorFragment = color"),...s?fg:[],...e?Ag:[])):nt(t)&&(a=`lgradient${h.length},${e},${s}`,c.push(eg("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),eg(...Et(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),cg.linearStep,rg("vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),"vec4 colorFragment = color"),...s?fg:[],...e?Ag:[]))}if(s||e){const t="maskTexture";o=o?`${o} ${t}`:`Color:${t}`,l.push(lg("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return h&&c.push(eg("uniform float uOpacity"),og("colorFragment =","colorFragment.a *= uOpacity")),{vertexShaderModifiers:l,fragmentShader:u,fragmentShaderModifiers:c,idVertex:o,idFragment:a}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h;const r=`ColorShaded3D:${yg(t)}`;return{idFeature:"ColorShaded3D",iE:{eE:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,rE:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&lg("normal","varying vec3 vNormal"),lg("posWorld","varying vec3 vPosWorld")),"uniform"===i)a.push(eg("uniform vec4 uColorDiffuse"),rg("vec4 colorFragment = uColorDiffuse"));else if("attribute"===i)h="per-vertex-color",o.push(lg("attribute vec4 aColor","varying vec4 vColor")),a.push(eg("varying vec4 vColor"),rg("vec4 colorFragment = vColor"));else if(Array.isArray(i)){const t=i[1];if("value"===t)h="lookup:value",o.push(lg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;h=`lookup:${t}`,o.push(lg(i,"varying float vLookupValue"))}a.push(eg("varying float vLookupValue"),...dg("vLookupValue",i[2]))}if(e){const t="wireframe";h=h?`${h},${t}`:t,o.push(lg("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(eg("varying vec3 vTriangleBary"),eg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),cg.computeScreenSpaceWireframe,og("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return"phong"===s&&a.push(...gg),{idVertex:h,idFragment:r,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=[],e=pg(i),h=t.coordType?t.coordType:e?"vec3":"vec2";return"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?s.push(eg(`attribute ${h} aPos`)):s.push(eg("attribute float aPosX"),eg("attribute float aPosY"),e&&eg("attribute float aPosZ")):!0===t.splitPosAttribute?s.push(eg("attribute float aPos_highpartX"),eg("attribute float aPos_lowpartX"),eg("attribute float aPos_highpartY"),eg("attribute float aPos_lowpartY")):s.push(eg(`attribute ${h} aPos_highpart`),eg(`attribute ${h} aPos_lowpart`)),s.push(...vg(t,e,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:"posAxis",variableNameWorldCoord:"posWorld"})),{idVertex:`VertexLocation:${yg(t)}`,idFragment:void 0,vertexShaderModifiers:s}}}),Model3D:t=>({idFeature:"Model3D",apply:i=>{const s=[];return s.push(eg("attribute vec3 aGeoPos"),eg("uniform mat4 uModelRotation"),eg("uniform mat4 uModelRotationNormals"),eg("uniform vec3 uLocationAxis"),eg("uniform vec3 uModelAlignment"),eg("uniform vec3 uModelScale"),eg("uniform vec3 uModelSize"),...vg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),ng("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&og("vec3 normal ="," normal = (uModelRotationNormals * vec4(normal, 1.0)).xyz;"),...Sg(i)?bg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,"posWorld","posAxis"):[]),{vertexShaderModifiers:s,idVertex:`Model3D:${yg(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>({idFeature:"LineInstanced2D",apply:i=>({idVertex:`LineInstanced2D:${yg(t)}`,idFragment:void 0,vertexShaderModifiers:[eg("uniform float uThicknessPixels"),eg("uniform vec2 uRatioPxClip"),..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[eg("attribute vec2 aLocationA"),eg("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[eg("attribute vec2 aLocationA_highpart"),eg("attribute vec2 aLocationB_highpart"),eg("attribute vec2 aLocationA_lowpart"),eg("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[eg("attribute float aLocationAX"),eg("attribute float aLocationAY"),eg("attribute float aLocationBX"),eg("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[eg("attribute float aLocationA_highpartX"),eg("attribute float aLocationA_highpartY"),eg("attribute float aLocationB_highpartX"),eg("attribute float aLocationB_highpartY"),eg("attribute float aLocationA_lowpartX"),eg("attribute float aLocationA_lowpartY"),eg("attribute float aLocationB_lowpartX"),eg("attribute float aLocationB_lowpartY")]:[],eg("attribute vec2 aSegmentPosition"),eg("attribute float aSegmentSide"),...vg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),t.ensureMinimumSegmentLength&&eg("uniform vec2 uMinSegmentPixelVector"),og("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                        worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                    }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...Mg(i),...xg(i),...Sg(i)?bg(t,!1,"posWorld","posAxis"):[]]})}),Area2D:t=>({idFeature:"Area2D",apply:i=>({idVertex:`Area2D:${yg(t)}`,idFragment:void 0,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[eg("attribute vec2 aLocationA"),eg("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[eg("attribute vec2 aLocationA_highpart"),eg("attribute vec2 aLocationB_highpart"),eg("attribute vec2 aLocationA_lowpart"),eg("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[eg("attribute float aLocationAX"),eg("attribute float aLocationAY"),eg("attribute float aLocationBX"),eg("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[eg("attribute float aLocationA_highpartX"),eg("attribute float aLocationA_highpartY"),eg("attribute float aLocationB_highpartX"),eg("attribute float aLocationB_highpartY"),eg("attribute float aLocationA_lowpartX"),eg("attribute float aLocationA_lowpartY"),eg("attribute float aLocationB_lowpartX"),eg("attribute float aLocationB_lowpartY")]:[],eg("attribute float aCurveOrBaseline"),eg("attribute float aSegmentSide"),...vg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),og("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","float baseline = min(posCoord.y, -1.0)","vec2 posWorld = vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))"),...Mg(i),...xg(i),...Sg(i)?bg(t,!1,"posWorld","posAxis"):[]]})}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${yg(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[eg("uniform float uOffsetWU"),eg("attribute vec3 aLocationA"),eg("attribute vec3 aLocationB"),eg("attribute float aSegmentPosition"),eg("attribute float aPerpendHorizontal"),eg("attribute float aPerpendVertical"),...vg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},pg(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),og("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...Sg(i)?bg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,"posWorld","posAxis"):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[eg("attribute vec3 aEdge"),eg("uniform float uEdgeRoundness"),og("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(h,r)=>({idVertex:void 0,idFragment:`ColorGrid2D:${yg(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[eg("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===s&&cg.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?rg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):rg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)),...dg("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(eg("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&cg.roundUnsigned,cg.modulus,cg.texelFetchWithFallback[o],"ubyte"===h&&cg.decodeUbyteRGBAEncodedFloat,rg(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(eg("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),rg("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${yg(t)}`,idFragment:`DrawToNormalTexture:${yg(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.instanceIdSource,o=t.normalTextureType,a=t.heightmapTextureType,l=t.intensityTextureType,u=t.littleEndian;return{idFeature:"SurfaceGrid",apply:(c,d)=>{const f=[],A=[];return f.push(eg("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===n&&"attribute float aInstanceID"),void 0!==n&&cg.roundUnsigned,cg.modulus,cg.texelFetchWithFallback[d],"ubyte"===a&&cg.decodeUbyteRGBAEncodedFloat,rg(void 0===n?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===a?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${u})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),f.push(...vg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"})),"phong"===h&&f.push(lg("posWorld","varying vec3 vPosWorld"),..."uint"===o?[cg.texelFetchUnsignedWithFallback[d],ag("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[ag("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],ag("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),eg("varying vec3 vNormal",..."uint"===o?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),A.push(eg("varying vec3 vTriangleBary")),"uniform"===i?A.push(eg("uniform vec4 uColorDiffuse"),rg("vec4 colorFragment = uColorDiffuse")):Array.isArray(i)&&"lookup"===i[0]?"value"===i[1]?(f.push(lg("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),A.push(eg("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===l&&cg.decodeUbyteRGBAEncodedFloat,"bilinear"===s?rg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===l?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${u})`),"float intensity01 = "+("float"===l?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${u})`),"float intensity10 = "+("float"===l?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${u})`),"float intensity11 = "+("float"===l?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${u})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):rg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...dg("intensityP",i[2]))):(f.push(lg(`posAxis.${i[1]}`,"varying float vLookupValue")),A.push(eg("varying float vLookupValue"),...dg("vLookupValue",i[2]))):void 0===i&&A.push(rg("vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0)")),"phong"===h&&A.push(...gg),r&&(f.push(eg("attribute vec3 aTriangleBary"),lg("aTriangleBary","varying vec3 vTriangleBary")),A.push(eg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),cg.computeScreenSpaceWireframe,og("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?"if (edge > 0.0) {\n                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));\n                                }":"if (edge > 0.0) {\n                                    colorFragment = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }"))),{idVertex:`SurfaceGrid:${yg(t)}`,idFragment:`SurfaceGrid:${yg(t)}`,vertexShaderModifiers:f,fragmentShader:"FragmentShader",fragmentShaderModifiers:A}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${yg(t)}`,idFragment:`DebugSurfaceGridNormals:${yg(t)}`,vertexShaderModifiers:[eg("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),cg.roundUnsigned,cg.modulus,cg.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&cg.decodeUbyteRGBAEncodedFloat,rg(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[cg.texelFetchUnsignedWithFallback[s]]:[],...vg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"}),og("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[ag("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[eg("uniform vec3 uCameraLoc"),og("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[eg("attribute float aSegmentInside"),eg("varying float vSegmentInside"),eg("varying float vSegmentSide"),og("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[ug("#extension GL_OES_standard_derivatives : enable"),eg("uniform float uAALimit"),eg("varying float vSegmentInside"),eg("varying float vSegmentSide"),og("antiAliasFactor = ","\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                antiAliasFactor = aa;\n                ")]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${yg(t)}`,idFragment:`Glow1D:${yg(t)}`,vertexShaderModifiers:[lg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[eg("uniform sampler2D uTexture"),eg("varying vec2 vTextureCoord"),eg("uniform vec2 uTextureSize"),h&&eg("uniform vec2 uOffsetPx"),!h&&eg("uniform sampler2D uTextureFirstGlowPass"),!h&&eg("uniform vec4 uGlowColor"),og("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...h?[]:["float inverseIntensity =\n                        0.25 * texture2D(uTexture, vTextureCoord).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a","antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),"vec4 colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                            horizontal_dist = sample_horizontal.r * 255.0;\n                                          }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,"vec4 colorFragment = pixelGlowColor"])]}}}),MousePicking:{idFeature:"MousePicking",apply:t=>({idVertex:void 0,idFragment:"MousePicking",fragmentShaderModifiers:[eg("uniform vec4 uColor"),rg("vec4 colorFragment = uColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd")]})},MousePickingAttribute:{idFeature:"MousePickingAttribute",apply:t=>({idVertex:"MousePickingAttribute",idFragment:"MousePickingAttribute",vertexShaderModifiers:[lg("attribute vec4 aColor","varying vec4 vColor")],fragmentShaderModifiers:[eg("varying vec4 vColor"),rg("vec4 colorFragment = vColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd")]})},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[lg("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[eg("attribute vec2 aLengthSoFar"),eg("varying float vLengthSoFar"),eg("uniform vec2 uStippleCount"),ag("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[eg("uniform sampler2D uStippleTexture"),eg("uniform float uStippleScale"),eg("varying float vLengthSoFar"),"webgl1"===i&&eg("uniform float uStippleTextureWidthLimiter"),og("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[eg("attribute vec2 aLengthSoFarA"),eg("attribute vec2 aLengthSoFarB"),eg("varying float vLengthSoFar"),eg("uniform vec2 uStippleCount"),ag("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[eg("uniform sampler2D uStippleTexture"),eg("uniform float uStippleScale"),eg("varying float vLengthSoFar"),"webgl1"===i&&eg("uniform float uStippleTextureWidthLimiter"),og("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,h="interpolation"in t?t:void 0,r="bilinear"===(null==h?void 0:h.interpolation),n=null==h?void 0:h.intensityTextureType,o=null==h?void 0:h.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${yg(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[eg("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",h&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),cg.texelFetchWithFallback[s],"ubyte"===n&&cg.decodeUbyteRGBAEncodedFloat,rg("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep","if (iAnnulus < 0.0 || iAnnulus > uAnnuli) { discard; }"),e&&rg("vec4 colorFragment = uColor"),h&&og("if (iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",h.flipXY&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",h.flipXY&&"cellStart = ivec2(cellStart.y, cellStart.x)",h.flipXY&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)","vec2 tileDimensions = "+(h.flipXY?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),r&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",r&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",r&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",r&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",r&&"float intensity00 = "+("float"===n?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${o})`),r&&"float intensity01 = "+("float"===n?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${o})`),r&&"float intensity10 = "+("float"===n?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${o})`),r&&"float intensity11 = "+("float"===n?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${o})`),r&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",r&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",r&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",r&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!r&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!r&&"float intensityP = "+("float"===n?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${o})`)),...h?dg("intensityP",h.lut):[]]}}})},wg={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},Cg={FragmentShader:"\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    float antiAliasFactor = 1.0;\n    vec4 fragColorEnd = colorFragment;\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);\n}\n",Empty:"\nvoid main(void) {\n}\n"};class kg{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new Mt(`Could not find ${this.nE()} ${this.oE()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}nE(){return this.id.toString()}oE(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class Tg extends kg{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class Fg extends kg{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class Ig{constructor(t,i,s,e){this.aE=new Map,this.lE=new Map,this.uE=s,this.cE=s.createProgram(),this.dE=`${t.nE()} vertex`,this.fE=`${i.nE()} fragment`,s.attachShader(this.cE,t.shader),s.attachShader(this.cE,i.shader),s.bindAttribLocation(this.cE,0,"aPos"),s.linkProgram(this.cE),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}AE(t){return bi(0,(()=>xi()))}gE(t){const i=this.mE(t);if(void 0===i)throw this.AE(`Could not get ${t} uniform from ${this.dE} and ${this.fE} shaders.`);return i}mE(t){const i=this.aE.get(t);if(i)return i;const s=this.uE.getUniformLocation(this.cE,t);return s?(this.aE.set(t,s),s):void 0}yE(t){const i=this.pE(t);if(void 0===i)throw this.AE(`Could not get ${t} attribute from ${this.dE} and ${this.fE} shaders.`);return i}pE(t){const i=this.lE.get(t);if(i||0===i)return i;const s=this.uE.getAttribLocation(this.cE,t);return s>=0?(this.lE.set(t,s),s):void 0}W(){this.uE.deleteProgram(this.cE)}}const Pg=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,Dg=t=>{let i;try{i=Tt.getComputedStyle(t)}catch(t){return null}return i};
/**
 * stacking-order by Rich Harris
 * https://github.com/Rich-Harris/stacking-order
 *
 * @license MIT
 *
 * Converted to TypeScript and edited to match LCJS requirements.
 */function Bg(t){const i=Dg(t);return!!i&&("fixed"===i.position||!!("auto"!==i.zIndex&&"static"!==i.position||function(t){const i=Dg(zg(t)),s=i?i.display:"auto";return"flex"===s||"inline-flex"===s}(t))||+i.opacity<1||"transform"in i&&"none"!==i.transform||"webkitTransform"in i&&"none"!==i.webkitTransform||"mixBlendMode"in i&&"normal"!==i.mixBlendMode||"filter"in i&&"none"!==i.filter||"webkitFilter"in i&&"none"!==i.webkitFilter||"isolation"in i&&"isolate"===i.isolation||!!Pg.test(i.willChange)||"touch"===i.webkitOverflowScrolling)}function Lg(t){let i=t.length;for(;i--;)if(Bg(t[i]))return t[i];return null}function Rg(t){var i;return t&&Number((null===(i=Dg(t))||void 0===i?void 0:i.zIndex)||0)||0}function Eg(t){const i=[];for(;t;)i.push(t),t=zg(t);return i}function zg(t){var i;return(null===(i=t.parentNode)||void 0===i?void 0:i.host)||t.parentNode}class Vg extends GA{constructor(t){if(super(),this.SE=new Map,this.vE=new Map,this.bE=new Map,this.xE=!0,this.ME=null,this._E=null,this.wE=null,this.CE=null,this.kE=0,this.TE=0,this.FE=0,this.IE=!1,this.PE=!0,this.$i=!1,this.DE=yi(`chart-engine-${(new Date).getTime()}${Math.trunc(1e6*Math.random()).toString()}`),this.X={x:100,y:100},this.BE=()=>{this.LE&&clearTimeout(this.LE),this.LE=setTimeout((()=>this.Zr()),12)},this.RE=t=>{const i=t.intersectionRatio>0,s=t.target.getAttribute("data-lcjs-engine-id");if(s){const t=this.SE.get(s);if(t){const e=t.EE();t.zE(i),i?this.vE.set(s,t):this.vE.delete(s),e!==i&&t.Ss()}}},this.VE=(t,i,s,e,h)=>{const r=h[0],n=this.gl;if(n.bindFramebuffer(null==n?void 0:n.FRAMEBUFFER,null),n.useProgram(this._E.cE),n.clear(n.COLOR_BUFFER_BIT),r.Gr.getBoundingClientRect()){const t=r.OE();n.viewport(0,0,t.x,t.y),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r.NE),n.uniform1i(this.kE,0),n.uniformMatrix4fv(this.TE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n.bindBuffer(n.ARRAY_BUFFER,this.wE),n.enableVertexAttribArray(0),n.vertexAttribPointer(this.FE,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),r.GE&&(r.GE.clearRect(0,0,r.GE.canvas.width,r.GE.canvas.height),r.GE.drawImage(this.WE,0,this.WE.height-t.y,t.x,t.y,0,0,r.GE.canvas.width,r.GE.canvas.height))}},this.UE=(t,i,s,e,h)=>{const r=this.gl;r.bindFramebuffer(null==r?void 0:r.FRAMEBUFFER,null),r.useProgram(this._E.cE),r.clear(r.COLOR_BUFFER_BIT),h.forEach((s=>{const h=s.Gr.getBoundingClientRect();if(h){const s=h.right-h.left,n=h.bottom-h.top,o=h.left,a=e-h.bottom;r.viewport(o*this.YE-t*this.YE,a*this.YE+i*this.YE,s*this.YE,n*this.YE)}r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,s.NE),r.uniform1i(this.kE,0),r.uniformMatrix4fv(this.TE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),r.bindBuffer(r.ARRAY_BUFFER,this.wE),r.enableVertexAttribArray(0),r.vertexAttribPointer(this.FE,2,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLES,0,6)})),r.bindFramebuffer(r.FRAMEBUFFER,null)},this.HE=(t,i,s,e,h)=>{const r=h[0],n=this.gl2.ctx;n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.clear(n.COLOR_BUFFER_BIT);const o=r.OE();n.bindFramebuffer(n.READ_FRAMEBUFFER,r.$E[1]),n.blitFramebuffer(0,0,o.x,o.y,0,this.WE.height-o.y,o.x,this.WE.height,n.COLOR_BUFFER_BIT,n.LINEAR),r.GE&&(r.GE.clearRect(0,0,r.GE.canvas.width,r.GE.canvas.height),r.GE.drawImage(this.WE,0,0)),n.bindFramebuffer(n.FRAMEBUFFER,null)},this.XE=(t,i,s,e,h)=>{const r=this.gl2.ctx;r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.clear(r.COLOR_BUFFER_BIT),h.forEach((s=>{const h=s.Gr.getBoundingClientRect();if(h){const n=h.right-h.left,o=h.bottom-h.top,a=h.left,l=e-h.bottom,u=s.OE();r.bindFramebuffer(r.READ_FRAMEBUFFER,s.$E[1]),r.blitFramebuffer(0,0,u.x,u.y,a*this.YE-t*this.YE,l*this.YE+i*this.YE,(a-t+n)*this.YE,(l+i+o)*this.YE,r.COLOR_BUFFER_BIT,r.LINEAR)}})),r.bindFramebuffer(r.FRAMEBUFFER,null)},this.LE=void 0,this.Un=t,!Tt.requestAnimationFrame||!Tt.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");let i=1;if(t&&t.jE)i=!0===t.jE?Tt.devicePixelRatio||1:t.jE||1;else{const t=Tt.document.head.querySelector('meta[name="viewport"]');t&&t.content.includes("width=device-width")&&(i=Tt.devicePixelRatio||1)}this.YE=i,t.Hn=!0===t.Hn,this.PE=!1!==t.ZE,this.QE=!1!==t.JE,this.KE=t.KE||!1;let s=!1;if(t.WE)if("string"==typeof t.WE){const i=Tt.document.getElementById(t.WE);if(!i)throw new Error(`Canvas "${t.WE}" doesn't exist.`);this.WE=i,s=!0}else this.WE=t.WE,s=!0;else this.WE=Tt.document.createElement("canvas");const e={preserveDrawingBuffer:!0,alpha:!0,antialias:!1};if(2!==t.qE&&t.qE){const i=this.WE.getContext("webgl",{...e,antialias:!!t.ZE})||this.WE.getContext("experimental-webgl",{...e,antialias:!!t.ZE});this.gl=i,this.tz=!1}else{const t=this.WE.getContext("webgl2",e);this.gl2={ctx:t},this.gl=t,this.tz=!0}if(!this.gl)throw new xt("No WebGL context available."+((null==t?void 0:t.qE)?`\nSelected explicit target: WebGL ${t.qE}`:""));const h=[];if(this.iz={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.iz).forEach((t=>{null===this.iz[t]&&h.push(t)})),this.tz)this.sz=!0;else{const t={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};t.OES_standard_derivatives||(this.xE=!1),Object.keys(t).forEach((i=>{null===t[i]&&h.push(i)}));const i={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.sz=!!i.OES_texture_float,this.gl1={ctx:this.gl,iz:t,optional:i}}const r=h;if(r.length>0&&!1!==t.Hn){const t=Tt.document.createElement("div");t.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",t.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const i=Tt.document.createElement("button");i.innerText="X",i.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),Tt.document.body.appendChild(t),t.appendChild(i),Tt.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",r.join(", "))}if(this.ez=this.KE?this.hz(this.tz?this.HE.bind(this):this.VE.bind(this)).bind(this):this.rz(this.tz?this.XE.bind(this):this.UE.bind(this)).bind(this),Tt.ResizeObserver){const t=t=>{for(const i of t)i.target===this.WE&&this.nz()};this.Zn=new Tt.ResizeObserver(t.bind(this)),this.Zn.observe(this.WE)}if(this.oz=((t,i)=>{const s=t,e=new Map,h=new Map,r=new Map,n={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},o=(t,s,e=[])=>{const h=[],r=[],n={allAttributeNames:Array.from(t.matchAll(/attribute\s[^\s]*\s(.*);/g)).map((t=>t[1])),allUniformNames:Array.from(t.matchAll(/uniform\s[^\s]*\s(.*);/g)).map((t=>t[1])),allVaryingNames:Array.from(t.matchAll(/varying\s[^\s]*\s(.*);/g)).map((t=>t[1])),removedVariableNames:[]};if(i){const i=t.match(/#extension.*/g);i&&r.push(...i),t=t.replace(/#extension.*/g,"")}else if(h.push("#version 300 es"),(t=(t=(t=t.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&h.push("precision highp usampler2D;"),"vertex"===s)t=t.replace(/varying/g,"out");else{t=t.replace(/varying/g,"in");const i=e.find((t=>"fragOutput"===t.type));t=(t=i?`out ${i.fragOutput} fragOutput;\n${t}`:`out vec4 fragOutput;\n${t}`).replace(/gl_FragColor/g,"fragOutput")}return r&&h.push(...r),h.push("precision highp float;"),h.push("precision highp int;"),{source:t=`${h.join("\n")}\n${t}`,info:n}};return(...t)=>{const a=i?"webgl1":"webgl2";let l,u,c,d,f,A,g,m,y;try{const i=Tt.performance.now();l=t.filter((t=>!1!==t&&void 0!==t)),u=((t,i)=>{const s=t.map((s=>s.apply(t,i))),e=s.map((t=>t.idVertex)).filter((t=>void 0!==t)).sort().join(" "),h=s.map((t=>t.idFragment)).filter((t=>void 0!==t)).sort().join(" "),r=`vert: ${e} frag: ${h}`;let n,o=!1,a=!1;const l=[];let u;const c=[],d=[];if(s.forEach((t=>{if(t.defaultVertexShader&&(o||(n=t.defaultVertexShader)),t.vertexShader){if(n&&o&&n!==t.vertexShader)throw new mg(`Conflicting vertex shader templates ${n} vs ${t.vertexShader}`,r,t);n=t.vertexShader,o=!0}if(t.vertexShaderModifiers)for(const i of t.vertexShaderModifiers)void 0!==i&&!1!==i&&l.push(i);if(t.defaultFragmentShader&&(a||(u=t.defaultFragmentShader)),t.fragmentShader){if(u&&a&&u!==t.fragmentShader)throw new mg(`Conflicting fragment shader templates ${u} vs ${t.fragmentShader}`,r,t);u=t.fragmentShader,a=!0}if(t.fragmentShaderModifiers)for(const i of t.fragmentShaderModifiers)void 0!==i&&!1!==i&&c.push(i);t.hints&&t.hints.forEach((t=>{t&&d.push(t)}))})),!n)throw new mg("No vertex shader template defined",r);if(!u)throw new mg("Fragment shader not defined",r);return{id:r,vertexShader:{id:e,template:n,modifiers:l},fragmentShader:{id:h,template:u,modifiers:c},hints:d}})(l,a);const p=r.get(u.id);if(c="new",p)return c="existing",A=p.vertexShaderSrc,g=p.fragmentShaderSrc,p;const S=u.vertexShader.id;let v=e.get(S);if(v)A=v.src,d="existing";else{d="new";const t=new tg(u.vertexShader.modifiers).build(wg[u.vertexShader.template]),{source:i,info:h}=o(t,"vertex");A=i,m=h,v=new Tg(S,i,s,h),e.set(S,v),n.vertexShaders+=1}const b=u.fragmentShader;let x;const M=b.id;if(x=h.get(M),x)g=x.src,f="existing";else{f="new";const t=Cg[b.template],i=new tg([...b.modifiers]).build(t),{source:e,info:r}=o(i,"fragment",u.hints);g=e,y=r,x=new Fg(M,e,s,r),h.set(M,x),n.fragmentShaders+=1}const _=new Ig(v,x,s,u);return r.set(u.id,_),n.programs+=1,n.totalMs+=Tt.performance.now()-i,_}catch(t){throw bi(0,(()=>{const t="Unexpected LightningChart JS rendering error.\nThis can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).";return Tt.alert(t),new Error(t)}))}}})(this.gl,!this.tz),this.KR=(()=>{const t=Tt.document.createElement("canvas"),i=t.getContext("2d",{willReadFrequently:!0});if(!i)throw new xt("Failed to get Text canvas rendering context");return i.fillStyle="#fff",(s,e,h,r)=>{const o=`${e.style} ${e.weight} ${e.size*h}px ${e.family}`;i.font=o,i.textBaseline="alphabetic",i.textAlign="left";const a=i.measureText(s);if(0===a.width)return;const l=void 0!==a.actualBoundingBoxLeft&&void 0!==a.actualBoundingBoxRight?Math.ceil(a.actualBoundingBoxLeft+a.actualBoundingBoxRight):Math.ceil(a.width),u=a.width,c=Math.round(e.size*h),d=void 0!==a.actualBoundingBoxLeft?a.actualBoundingBoxLeft:0;t.width=l>0?l:u,t.height=2*c,i.font=o,i.textBaseline="alphabetic",i.textAlign="left",r?(i.clearRect(0,0,t.width,t.height),i.fillStyle="#fff"):(i.fillStyle="rgba(255,255,255,0)",i.fillRect(0,0,t.width,t.height),i.fillStyle="#000"),i.fillText(s,d,c);const f=i.getImageData(0,0,t.width,t.height);let A=0,g=0;const m=f.width;for(let t=0;t<f.height;t+=1){for(let i=0;i<m;i+=1)if(0!==f.data[t*m*4+4*i+3]){A=t;break}if(0!==A)break}for(let t=f.height-1;t>=0;t-=1){for(let i=0;i<m;i+=1)if(0!==f.data[t*m*4+4*i+3]){g=t;break}if(0!==g)break}const y=i.canvas.height/2-A,p=g-A+1,S=m,v=new Uint8ClampedArray(S*p*1);for(let t=0;t<p;t+=1)for(let i=0;i<S;i+=1)v[1*t*S+1*i+0]=f.data[(t+A)*S*4+4*i+3];return[v,{advance:u,offsetX:d,baseline:y,glyph:s,size:n(S,p)}]}})(),t.az||(this.KE?this.WE.style.display="none":(this.WE.style.position="absolute",this.WE.style.top="0",this.WE.style.left="0",this.WE.style.right="0",this.WE.style.bottom="0",this.WE.style.width="100%",this.WE.style.height="100%",this.WE.style.boxSizing="content-box",this.WE.style.display="block",this.WE.style.pointerEvents="none")),this.WE.classList.add("lcjs-canvas"),t.lz&&this.WE.setAttribute("data-lcjs-id",t.lz),s||Tt.document.body.appendChild(this.WE),Tt.IntersectionObserver&&(this.uz=new Tt.IntersectionObserver((t=>{for(let i=0;i<t.length;i+=1){const s=t[i];this.RE(s)}}),{threshold:Array.from(Array(100)).map(((t,i)=>i/100))})),Tt.addEventListener("resize",this.BE,{passive:!0}),!this.tz){if(this._E=this.oz(_g["2DCompose"],_g.Color({dataType:"texture-coord-calc-gpu"}),_g.VertexLocation({axisWorldTranslation:"matrix4",normalSource:void 0,coordType:"vec4"})),!this._E.cE)throw new xt("Unable to setup composition shader!");const t=this.gl,i=t.getUniformLocation(this._E.cE,"uColorTexture");if(!i)throw new xt("Unable to setup composition shader! Failed to find uColorTexture");const s=t.getUniformLocation(this._E.cE,"uMatrix");if(!s)throw new xt("Unable to setup composition shader! Failed to find uMatrix");this.kE=i,this.TE=s,this.FE=t.getAttribLocation(this._E.cE,"aPos"),this.wE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.wE),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.CE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.CE),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null)}}hz(t){return i=>{this.ME=null;const s=this.gl.canvas,e=Array.from(this.vE.values());this.IE=!1,e.forEach((e=>{const h=e.OE();(this.X.x<h.x||this.X.y<h.y)&&(this.X.x=Math.max(this.X.x,h.x),this.X.y=Math.max(this.X.y,h.y),s instanceof HTMLCanvasElement&&(s.width=this.X.x,s.height=this.X.y)),e.hn&&e.cz(i),t(0,0,0,0,[e])})),this.IE&&this.nz()}}rz(t){return i=>{this.ME=null,"style"in this.gl.canvas&&!this.Un.dz&&(this.gl.canvas.style.transform=`translateX(${window.scrollX}px) translateY(${window.scrollY}px)`);const s=this.gl.canvas,e=this.WE.clientHeight,h=this.WE.clientWidth;let r=0,n=0;if(s instanceof HTMLCanvasElement){s.width===h*this.YE&&s.height===e*this.YE||(s.width=h*this.YE,s.height=e*this.YE);const t=s.getBoundingClientRect();r=t.x,n=t.y}const o=Array.from(this.vE.values());this.IE=!1,o.sort(((t,i)=>t.fz()-i.fz())).forEach((t=>{t.hn&&t.cz(i)})),t(r,n,h,e,o),this.IE&&this.nz()}}nz(t){return!this.IE&&t&&(this.IE=!0),this.ME||this.$i||(this.ME=Tt.requestAnimationFrame(this.ez)),this}Az(t){const i=this.DE();return t.Gr.setAttribute("data-lcjs-engine-id",i),this.SE.set(i,t),t.gz(this.SE.size-1),t.zE(!0),this.vE.set(i,t),this.uz&&this.uz.observe(t.Gr),this.LE&&clearTimeout(this.LE),this.LE=setTimeout((()=>this.Zr()),0),this}mz(t){const i=t.Gr.getAttribute("data-lcjs-engine-id");return i?(this.SE.delete(i),this.vE.delete(i),this.uz&&this.uz.unobserve(t.Gr),t.Gr.removeAttribute("data-lcjs-engine-id"),this):this}Zr(){if(this.uz){const t=this.uz.takeRecords();for(let i=0;i<t.length;i+=1){const s=t[i];this.RE(s)}}return!this.KE&&this.QE&&Array.from(this.SE.values()).sort(((t,i)=>function(t,i){if(t===i)throw new Error("Cannot compare node with itself");const s={a:Eg(t),b:Eg(i)};let e;for(;s.a[s.a.length-1]===s.b[s.b.length-1];)t=s.a.pop(),i=s.b.pop(),e=t;const h=Rg(Lg(s.a)),r=Rg(Lg(s.b));if(h===r&&e){const t=e.childNodes,i={a:s.a[s.a.length-1],b:s.b[s.b.length-1]};let h=t.length;for(;h--;){const s=t[h];if(s===i.a)return 1;if(s===i.b)return-1}}return Math.sign(h-r)}(t.Gr,i.Gr))).forEach(((t,i)=>t.gz(i))),this.nz(!0),this}dP(){return this.nz(),this}yz(){this.$i||this.SE.forEach((t=>t.hm.layout()))}W(){var t;if(this.$i)return;this.$i=!0,super.W(),this.ME&&(Tt.cancelAnimationFrame(this.ME),this.ME=null),this.IE=!1,this.Zn&&(this.Zn.disconnect(),this.Zn=void 0),this.uz&&(this.uz.disconnect(),this.uz=void 0),Tt.removeEventListener("resize",this.BE),this.BE=void 0,this.SE.forEach((t=>{t.W()})),this.SE.clear(),Array.from(this.bE.values()).forEach((t=>{t.VR(!0)})),this.bE.clear();const i=this.gl;i.deleteBuffer(this.wE),i.deleteBuffer(this.CE),this.WE&&!this.Un.WE?(this.WE.width=1,this.WE.height=1,null===(t=this.WE.parentElement)||void 0===t||t.removeChild(this.WE),this.WE=void 0):this.WE=void 0,this.oz=void 0,this.KR=void 0,this.ez=()=>{},this.iz.WEBGL_lose_context&&this.iz.WEBGL_lose_context.loseContext()}}const Og=(t,i,s,e)=>h=>{const r={theme:zA,...s,...h},n=t(r),o=i||e?OA(n,e):void 0,a=new qf(n.Un,h,n,n.W.bind(n),o);return n.uo((t=>a.zL(t))).lo((()=>a.j())).Ss(),a},Ng=(t,i)=>{t.uo((t=>{i.Te(t)})).lo((()=>i.j())).Ss()},Gg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new ma(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o);return Ng(n,a),a},Wg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new sd(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,h);return Ng(n,a),a},Ug=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new lf(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,h);return Ng(n,a),a},Yg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new md(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,h);return Ng(n,a),a},Hg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new(h&&h.type?h.type:rl)(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,void 0,h);return Ng(n,a),a},$g=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new(h&&h.type?h.type:zd)(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,void 0,!0!==(null==h?void 0:h.disableAnimations)&&!1!==(null==h?void 0:h.animationsEnabled));return Ng(n,a),a},Xg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new(h&&h.type?h.type:Cd)(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,void 0,h);return Ng(n,a),a},jg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new(h&&h.type?h.type:Hd)(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,void 0,h);return Ng(n,a),a},Zg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new jl(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,h,void 0);return Ng(n,a),a},Qg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new Vl(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,void 0,h);return Ng(n,a),a},Jg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new Lf(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,void 0);return Ng(n,a),a},Kg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new Hf(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,void 0,h);return Ng(n,a),a},qg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new ad(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,h);return Ng(n,a),a},tm=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||zA},n=t(r),o=i||e?OA(n,e):void 0,a=new bA(n.Un,uf(n,1).DI(0),dt,n.W.bind(n),o,h);return Ng(n,a),a};function im(t,i,s,e,h,r){let n=i.x.ct(t.max.x),o=i.x.ct(t.min.x),a=i.y.ct(t.max.y),l=i.y.ct(t.min.y),u=n-o,c=a-l;if(u<1){const t=(o+n)/2;o=t-.5,n=t+.5,u=1}if(c<1){const t=(l+a)/2;l=t-.5,a=t+.5,c=1}const d=u/c,f=u*s.x,A=c*s.y,g=u-f,m=c-A,y=f>g?[g,f]:[f,g],p=A>m?[m,A]:[A,m];let S,v,b=1,x=1;switch(e){default:case tt.closestSide:if(S=y[0]/u,v=p[0]/c,h===q.circle){const t=Math.min(S*d,v);b=t,x=t}else b=S*d,x=v;break;case tt.farthestSide:if(S=y[1]/u,v=p[1]/c,h===q.circle){const t=Math.max(S*d,v);b=t,x=t}else b=S*d,x=v;break;case tt.closestCorner:if(v=p[0]/c,h===q.circle){S=y[0]/u*d;const t=Math.sqrt(S*S+v*v);b=t,x=t}else{S=y[0]/u;const t=Math.sqrt(S*S+v*v);b=t*d,x=t}break;case tt.farthestCorner:if(v=p[1]/c,h===q.circle){S=y[1]/u*d;const t=Math.sqrt(S*S+v*v);b=t,x=t}else{S=y[1]/u;const t=Math.sqrt(S*S+v*v);b=t*d,x=t}}return{bounds:[o*r,l*r,u*r,c*r],center:[s.x*d,s.y],distance:[Math.max(b,1e-4),Math.max(x,1e-4)],aspectRatio:d}}function sm(t,i,s,e){const h=i.x.ct(t.max.x),r=i.x.ct(t.min.x),o=i.y.ct(t.max.y),a=i.y.ct(t.min.y),l=h-r,u=o-a,c=Math.abs(l*Math.sin(s))+Math.abs(u*Math.cos(s)),d=n(l/2-Math.sin(s)*(c/2),u/2-Math.cos(s)*(c/2)),f=n(l/2+Math.sin(s)*(c/2),u/2+Math.cos(s)*(c/2));return{bounds:[r*e,a*e,l*e,u*e],startPoint:[d.x*e,d.y*e],endPoint:[f.x*e,f.y*e]}}class em{constructor(t){this.RR=t}}class hm{constructor(){this.pz=new Array,this.Sz=t=>(this.pz.push(t),t),this.vz=this.Sz(new Map),this.bz=this.Sz(new Map),this.xz=this.Sz(new Map),this.Mz=this.Sz(new Map),this._z=this.Sz(new Map),this.wz=this.Sz(new Map),this.Cz=this.Sz(new Map)}kz(){this.pz.forEach((t=>{t.forEach((t=>t.kz())),t.clear()}))}}const rm=(t,i,s)=>()=>{t.Tz=i,s&&s()},nm=(t,i,s,e,h)=>{const r=Math.min(s/t,e/i),n=t*r,o=i*r,a=s/n,l=e/o,u=n/s,c=o/e;let d=0,f=1,A=0,g=1;switch(h){case nn.Fill:l<a?(d=0,f=1,A=.5+-u/2,g=.5+u/2):(A=0,g=1,d=.5+-c/2,f=.5+c/2);break;case nn.Fit:l<a?(A=0,g=1,d=.5+-a/2,f=.5+a/2):(d=0,f=1,A=.5+-l/2,g=.5+l/2);break;case nn.Center:{const h=s/t,r=e/i;d=.5+-h/2,f=.5+h/2,A=.5+-r/2,g=.5+r/2}break;case nn.Tile:d=0,f=s/t,A=0,g=e/i;break;case nn.Stretch:default:d=0,f=1,A=0,g=1}return new Float32Array([d,g,f,g,f,A,d,A])};class om{constructor(t,i){if(this.Fz=0,this.Iz=0,this.Pz=!1,this.Tz=!1,this.Dz=!1,this.Bz=!1,this.Lz=!1,this.Rz=new Set,this.Ez=new Set,this.rc=i,this.uE=t,this.zz=null,this.Pz=i instanceof Tt.HTMLVideoElement,this.rc instanceof Tt.HTMLImageElement)this.rc.addEventListener("load",(()=>{this.Bz=!0,this.Vz()})),this.rc.addEventListener("error",(()=>{this.Lz=!0})),this.rc.complete&&(this.Bz=!0,this.Vz());else if(this.rc instanceof Tt.HTMLVideoElement){const t=this;this.rc.addEventListener("canplay",(function(){t.Iz=this.videoHeight,t.Fz=this.videoWidth,t.Bz=!0,t.Vz()}),!0),this.rc.addEventListener("play",rm(this,!0,(()=>this.Vz()))),this.rc.addEventListener("playing",rm(this,!0,(()=>this.Vz()))),this.rc.addEventListener("pause",rm(this,!1)),this.rc.addEventListener("ended",rm(this,!1)),this.rc.readyState>=1&&(this.Fz=this.rc.videoWidth,this.Iz=this.rc.videoHeight,this.Tz=!this.rc.paused,this.Bz=!0,this.Vz())}else this.Bz=!0,this.Vz()}jR(t){0===this.Ez.size&&this.Bz&&this.Vz(),this.Ez.add(t)}ZR(t){this.Ez.delete(t),0===this.Ez.size&&this.unbindResources()}Oz(t){this.Rz.add(t),this.Dz&&(t(),this.Nz(t))}Nz(t){this.Rz.delete(t)}Vz(){if(this.Lz||this.Dz||!this.Bz)return;const t=this.uE.gl;if(!this.zz&&this.rc&&t){this.zz=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.zz),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.rc,n=this.Fz>0?this.Fz:r.width,o=this.Iz>0?this.Iz:r.height;t.texImage2D(t.TEXTURE_2D,i,s,e,h,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.Fz=n,this.Iz=o,t.bindTexture(t.TEXTURE_2D,null)}this.Dz=!0,this.Rz&&this.Rz.forEach((t=>{t(),this.Nz(t)}))}Ps(){const t=this.uE.gl;if(!this.Lz&&this.Dz&&this.zz){const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.rc;r&&(t.bindTexture(t.TEXTURE_2D,this.zz),t.texImage2D(t.TEXTURE_2D,i,s,e,h,r))}}Gz(){return this.zz}unbindResources(){return this.Dz&&(this.zz&&(this.uE.OR(this.zz),this.zz=null),this.Dz=!1),this}}class am extends jh{constructor(t,i,s){super(t.us,i,s),this.iS=!0,this.jp={},this.qp=f(tn),this.ks=t,this.dt=t.dt}Wz(){var t;return this.qp.i&&this.qp.M().type!==(null===(t=this.Uz)||void 0===t?void 0:t.type)}nS(t){return this.iS=t,this}Yz(t){return this.jp=t,this}}const lm=(t,i,s,e)=>{const h=t.$z(),r=Math.round(Math.min(s.spread,10)*h),n=Math.round(Math.min(s.blur,10)*h),o={x:Math.round(s.offset.x*h),y:Math.round(s.offset.y*h)},a=t.Xz(),l=t.jz(),u=t.Zz(),c=t.Qz(),d=t.Jz();t.Kz("disabled"),t.nS(!1),t.qz(!1);const f=i.tV(),A=r+n/2;((t,i,s,e)=>{const h=t.gl,r=t.$z(),n=t.iV();t.sV(h.FRAMEBUFFER,e.frameBuffer),h.bindRenderbuffer(h.RENDERBUFFER,e.depthBuffer),h.bindTexture(h.TEXTURE_2D,e.texture),h.clearDepth(1),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);const o=e.sizeDpr;t.eV(0,0,o.x,o.y),i.forEach((i=>{let e;if(i instanceof Qh?e=i.ks.km():i instanceof am&&(e=i.ks.Kv()),e){const i=e.x+s.left,h=e.y+s.bottom,n=Math.max(e.width-(s.left+s.right),0),o=Math.max(e.height-(s.bottom+s.top),0);t.hV(i*r,h*r,n*r,o*r)}else t.qz(!1);i.zL(2)})),t.sV(h.FRAMEBUFFER,n),h.bindRenderbuffer(h.RENDERBUFFER,null),h.bindTexture(h.TEXTURE_2D,null),t.qz(!1)})(t,e,{left:A+(o.x<0?-o.x:0),top:A+(o.y>0?o.y:0),right:A+(o.x>0?o.x:0),bottom:A+(o.y<0?-o.y:0)},f);let g=f;const m=r+n+5,y=((t,i,s,e)=>{const h=(t=>{const i=[];for(let s=0;s<t.length;s+=1){let e,h=t[s];do{const t=i.findIndex((t=>Yi(h,t)));e=t>=0?i[t]:void 0,e&&(i.splice(t,1),h=es(h,e))}while(e);i.push(h)}return i})(i.map((t=>{const i=t instanceof Qh||t instanceof am?t.ks.rV(t):Gi;if(Mi(i))return Gi;const h={min:{x:Math.max(i.min.x-s.left,0),y:Math.max(i.min.y-s.bottom,0)},max:{x:Math.min(i.max.x+s.right,e.x),y:Math.min(i.max.y+s.top,e.y)}};return h.max.x<=h.min.x||h.max.y<=h.min.y?Gi:h})).filter((t=>!Mi(t)))),r=6*h.length,n=new Float32Array(4*r);let o=0;return h.forEach((t=>{const i=gs(t.min,e),s=gs(t.max,e),h=i,r=s;n[o+0]=i.x,n[o+1]=i.y,n[o+2]=h.x,n[o+3]=h.y,n[o+4]=s.x,n[o+5]=i.y,n[o+6]=r.x,n[o+7]=h.y,n[o+8]=s.x,n[o+9]=s.y,n[o+10]=r.x,n[o+11]=r.y,n[o+12]=s.x,n[o+13]=s.y,n[o+14]=r.x,n[o+15]=r.y,n[o+16]=i.x,n[o+17]=s.y,n[o+18]=h.x,n[o+19]=r.y,n[o+20]=i.x,n[o+21]=i.y,n[o+22]=h.x,n[o+23]=h.y,o+=24})),{vertexBuffer:t.nV(n),vertexCount:r}})(t,e,{left:m+(o.x<0?-o.x:0),top:m+(o.y>0?o.y:0),right:m+(o.x>0?o.x:0),bottom:m+(o.y<0?-o.y:0)},i.oV()),p=i.tV(f,g),S=t.oz(_g["2D"],_g.Glow1D({spreadPx:r,blurPx:n,firstPass:!0}),_g.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h,r)=>{const n=t.gl,o=t.iV();t.sV(n.FRAMEBUFFER,s.frameBuffer),n.bindRenderbuffer(n.RENDERBUFFER,s.depthBuffer),n.bindTexture(n.TEXTURE_2D,s.texture),n.clearDepth(1),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t.eV(0,0,s.sizeDpr.x,s.sizeDpr.y),t.aV(e,((o,a,l,u)=>(t.jR(e),r&&r(o),t.dV(o("uIsHighlighted"),0).AR(o("uHighlightColorOffset"),T).dV(o("uRenderEffectMask"),0).cV(o("uTexture"),i.texture,0).uV(u("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).uV(o("uScale"),s.uniforms.fV()).uV(o("uDisp"),s.uniforms.AV()).uV(o("uScaling"),[s.size.x,s.size.y]).uV(o("uTranslationAxis"),[0,0]).lV(h.vertexBuffer,void 0,{location:a("aPos"),size:2},{location:a("aTextureCoord"),size:2}).Ky(n.TRIANGLES,h.vertexCount,0),!0))),t.sV(n.FRAMEBUFFER,o),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)})(t,g,p,S,y,((i,s,e,h)=>(t.uV(i("uOffsetPx"),[o.x,o.y]),!0))),g=p,t.qz(l),t.gV(d);const v=t.oz(_g["2D"],_g.Glow1D({spreadPx:r,blurPx:n,firstPass:!1}),_g.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h)=>{const r=t.gl,n={x:t.us.oi().x,y:t.us.oi().y};t.eV(0,0,n.x*t.$z(),n.y*t.$z());const o=dt.d2({scaleXYConstructor:Gs}).q(n).Vi(0,n.x).Oi(0,n.y),a=new fm;a.mV(o),t.aV(s,((o,l,u,c)=>(t.jR(s),h&&h(o),t.dV(o("uIsHighlighted"),0).AR(o("uHighlightColorOffset"),T).dV(o("uRenderEffectMask"),0).cV(o("uTexture"),i.texture,0).uV(c("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).uV(o("uScale"),a.fV()).uV(o("uDisp"),a.AV()).uV(o("uScaling"),[n.x,n.y]).uV(o("uTranslationAxis"),[0,0]).lV(e.vertexBuffer,void 0,{location:l("aPos"),size:2},{location:l("aTextureCoord"),size:2}).Ky(r.TRIANGLES,e.vertexCount,0),!0)))})(t,f,v,y,((i,e,h,r)=>(t.cV(i("uTextureFirstGlowPass"),p.texture,1).AR(i("uGlowColor"),s.color),!0))),t.eV(a.x,a.y,a.width,a.height),t.Kz(u),t.nS(c),t.yV(y.vertexBuffer)};class um{constructor(t){this.pV=[],this.RR=t}SV(t,i){lm(this.RR,this,i,t)}oV(){const t=this.RR.us.oi();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}tV(...t){const i=this.pV,s=this.oV(),e={x:Math.ceil(s.x*this.RR.$z()),y:Math.ceil(s.y*this.RR.$z())},h=this.RR.gl,r=i.find((i=>!t.includes(i)));if(r)return r.sizeDpr.x===e.x&&r.sizeDpr.y===e.y||(r.size=s,r.sizeDpr=e,h.bindTexture(h.TEXTURE_2D,r.texture),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.bindRenderbuffer(h.RENDERBUFFER,r.depthBuffer),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,e.x,e.y),h.bindTexture(h.TEXTURE_2D,null),h.bindRenderbuffer(h.RENDERBUFFER,null),r.scale.q(s).Vi(0,s.x).Oi(0,s.y),r.uniforms.mV(r.scale)),r;const n=h.createTexture(),o=this.RR.vV(),a=this.RR.bV();h.bindTexture(h.TEXTURE_2D,n),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const l=this.RR.iV();this.RR.sV(h.FRAMEBUFFER,o),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),h.bindRenderbuffer(h.RENDERBUFFER,a),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,e.x,e.y),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,a),h.bindTexture(h.TEXTURE_2D,null),this.RR.sV(h.FRAMEBUFFER,l),h.bindRenderbuffer(h.RENDERBUFFER,null);const u=dt.d2({scaleXYConstructor:Gs}).q(s).Vi(0,s.x).Oi(0,s.y),c=new fm;c.mV(u);const d={size:s,sizeDpr:e,texture:n,frameBuffer:o,depthBuffer:a,scale:u,uniforms:c};return i.push(d),d}W(){[this.pV].forEach((t=>{t.forEach((t=>{this.RR.xV(t.depthBuffer),this.RR.MV(t.frameBuffer),this.RR.OR(t.texture)})),t.length=0}))}}class cm{constructor(t,i,s,e,h=!0){this._V=new hm,this.wV=new Map,this.CV=new Map,this.kV=[],this.jE=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const t=new Uint32Array([287454020]),i=new Uint8Array(t.buffer);return 68===i[0]||17!==i[0]&&(Tt.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.iS=!1,this.uV=(t,[i,s])=>(void 0===t||this.gl.uniform2f(t,i,s),this),this.TV=(t,[i,s])=>(void 0===t||this.gl.uniform2i(t,i,s),this),this.FV=(t,[i,s,e,h])=>(void 0===t||this.gl.uniform4f(t,i,s,e,h),this),this.IV=(t,[i,s,e])=>(void 0===t||this.gl.uniform3f(t,i,s,e),this),this.PV=(t,i)=>(void 0===t||this.gl.uniformMatrix3fv(t,!1,i),this),this.DV=(t,i)=>(void 0===t||this.gl.uniformMatrix4fv(t,!1,i),this),this.AR=(t,i)=>(void 0===t||this.gl.uniform4f(t,i.r,i.g,i.b,i.a),this),this.dV=(t,i)=>(void 0===t||this.gl.uniform1f(t,i),this),this.BV=(t,i)=>(this.gl.uniform1i(t,i),this),this.cV=(t,i,s)=>{if(void 0===t)return this;if(i){const e=this.gl.TEXTURE0+s;return this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(t,s),this}throw new xt("Could not bind a texture.")},this.LV=t=>(((t,i)=>{i===nn.Tile?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE))})(this.gl,t),this),this.nV=(t,i=!1,s,e=Float32Array)=>{const h=t.length,r=this.RV(h,s);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof e?t:new e(t),i?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),r)return r;throw new xt("Could not create vertex buffer")},this.EV=(t,i,s,e=Float32Array)=>{const h=s||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),i&&i.length===t?this.gl.bufferData(this.gl.ARRAY_BUFFER,i instanceof e?i:new e(i),this.gl.STATIC_DRAW):(this.gl.bufferData(this.gl.ARRAY_BUFFER,new e(t),this.gl.STATIC_DRAW),i&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,i instanceof e?i:new e(i))),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),h)return h;throw new xt("Could not create vertex buffer")},this.zV=(t,i,s,e=Float32Array)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,i*e.BYTES_PER_ELEMENT,s instanceof e?s:new e(s)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.VV=(t,i,s=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,s?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.OV=(t,i)=>{const s=t.length,e=this.RV(s,i);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new xt("Could not create index buffer")},this.NV=t=>{const i=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),i)return i;throw new xt("Could not create float buffer")},this.GV=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)),this),this.WV=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.lV=(t,i,...s)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t);const e=s.length;let h=0;for(let t=0;t<e;t+=1)h+=s[t].size;for(let t=0;t<e;t+=1){const i=s[t].location;void 0!==i&&i>-1&&this.gl.enableVertexAttribArray(i)}let r=0;for(let t=0;t<e;t+=1){const i=s[t];void 0!==i.location&&i.location>-1&&this.gl.vertexAttribPointer(i.location,i.size,this.gl.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),r+=i.size}if(void 0!==i)for(let t=0;t<e;t+=1){const e=s[t].location;void 0!==e&&e>-1&&this.UV(e,i)}return this},this.YV=(...t)=>{const i=t.length;for(let s=0;s<i;s+=1){const i=t[s];0!==i&&i>-1&&this.gl.disableVertexAttribArray(i)}return this},this.HV=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,0,0)),this),this.$V=(t,i,s)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t),void 0!==s&&this.UV(t,s)),this),this.XV=t=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this),this.jV=null,this.Ky=(t,i,s=0)=>(i>0&&this.gl.drawArrays(t,s,i),this),this.ZV=(t,i=this.gl.TRIANGLES,s=0,e=this.gl.UNSIGNED_SHORT)=>(t>0&&this.gl.drawElements(i,t,e,s),this),this.QV=(t,i,s,e)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(t,i,s,e),this.gl1)){if(!this.gl1.iz.ANGLE_instanced_arrays)return Tt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.iz.ANGLE_instanced_arrays.drawArraysInstancedANGLE(t,i,s,e)}return this},this.JV=(t,i,s,e,h=this.gl.UNSIGNED_SHORT)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(t,i,h,s,e),this.gl1)){if(!this.gl1.iz.ANGLE_instanced_arrays)return Tt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.iz.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,i,h,s,e)}return this},this.UV=(t,i)=>{if(t>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(t,i),this.gl1)){if(!this.gl1.iz.ANGLE_instanced_arrays)return Tt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.iz.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,i)}return this},this.KV=(t,i,s,e=0)=>{const h=this.gl.TEXTURE0+e;this.gl.activeTexture(h);const r=this.iV();this.sV(this.gl.FRAMEBUFFER,i),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,s,0);const n=this.jz();n&&this.qz(!1),t(),n&&this.qz(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.sV(this.gl.FRAMEBUFFER,r)},this.Nt=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this),this.qV=t=>(this.gl.clearColor(t.r,t.g,t.b,t.a),this),this.jR=t=>(this.gl.useProgram(t.cE),this),this.tO=!1,this.iO=[],this.us=t,this.cA=i,this.us=t,this.gl=s.ctx,this.sO=s.antialias,this.eO=!!this.us.Qr.xE&&s.lineAntialias,this.sz=this.us.Qr.sz,this.hO=new Map,this.gl1=this.us.Qr.gl1,this.gl2=this.us.Qr.gl2,h&&(this.gV(!0),this.rO()),this.iz=this.us.Qr.iz,this.zR=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.UR=this.nO(),this.oz=this.us.Qr.oz,this.oO=new gm(this),this.KR=this.us.Qr.KR,this.aO=new um(this),this.bE=this.us.Qr.bE,this.lO=this.nV([0,0,1,0,1,1,0,1]),this.uO=this.nV([0,0,1,0,0,1,0,1,1,0,1,1])}Kz(t){return t!==this.cO&&(this.cO=t,"disabled"===t?this.gl.disable(this.gl.CULL_FACE):"cull-back"===t?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):"cull-front"===t&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}Zz(){return this.cO||"disabled"}nS(t){return t!==this.iS&&(this.iS=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}Qz(){return this.iS}dO(t){return this.jE=t,this}$z(){return this.jE}RV(t,i){let s;if(i){const e=this.hO.get(i);e&&e.size>=t&&e.size-t<1e6?s=i:this.yV(i)}return s||(s=this.gl.createBuffer(),this.hO.set(s,{size:t})),s}fO(t,i=this.gl.RGBA,s=!1,e,h,r=!1,n=this.gl.UNSIGNED_BYTE,o=i){const a=this.gl.createTexture();if(!a)throw new xt("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),t&&null===h?this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,i,n,t):h&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,h.x,h.y,0,i,n,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),s?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),a}OR(t){this.gl.deleteTexture(t)}vV(){const t=this.gl.createFramebuffer();if(!t)throw new xt("Couldn't reserve Framebuffer.");return t}sV(t,i){this.jV=i,this.gl.bindFramebuffer(t,i)}iV(){return this.jV}MV(t){this.gl.deleteFramebuffer(t)}bV(){const t=this.gl.createRenderbuffer();if(!t)throw new xt("Couldn't reserve Render buffer.");return t}xV(t){this.gl.deleteRenderbuffer(t)}eV(t,i,s,e){return this.gl.viewport(t,i,s,e),this.AO&&t===this.AO.x&&i===this.AO.y&&s===this.AO.width&&e===this.AO.height||(this.AO={x:t,y:i,width:s,height:e}),this}Xz(){return this.AO||{x:0,y:0,width:0,height:0}}hV(t,i,s,e){return this.qz(!0),this.gl.scissor(Math.max(t,0),Math.max(i,0),Math.max(s,0),Math.max(e,0)),this}qz(t){return t===this.gO||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.gO=t),this}gV(t){return t!==this.tO&&(this.tO=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}Jz(){return this.tO}rO(t,i,s,e){return t?(void 0!==t&&void 0!==i&&(void 0!==s&&void 0!==e?this.gl.blendFuncSeparate(t,i,s,e):this.gl.blendFunc(t,i)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}jz(){return void 0!==this.gO&&this.gO}aV(t,i){const s=new mm(this,t),e=i(s.uniform,s.attribute,s,s.uniformOptional);s.finish(e)}yV(t){t&&(this.gl.deleteBuffer(t),this.hO.delete(t))}mO(t,i,s){this.uV(t.uniform("uCenter"),i.center).uV(t.uniform("uDistance"),i.distance).FV(t.uniform("uBounds"),i.bounds).dV(t.uniform("uAspect"),i.aspectRatio);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.AR(t.uniform(`color_${i}`),e[i].color).dV(t.uniform(`stop_${i}`),e[i].offset);return this}yO(t,i,s){this.uV(t.uniform("uStartPoint"),i.startPoint).uV(t.uniform("uEndPoint"),i.endPoint).FV(t.uniform("uBounds"),i.bounds);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.AR(t.uniform(`color_${i}`),e[i].color).dV(t.uniform(`stop_${i}`),e[i].offset);return this}Vh(t){const i=this.bE.get(t);if(!i){const i=new qA(this);return this.bE.set(t,i),i}return i}pO(t){const i=this.wV.get(t);if(!i){const i=new om(this,t);return this.SO(t,i),i}return i}SO(t,i){this.wV.set(t,i)}nO(){const t=this.gl,i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const s=0===t.getError();return s||!1!==this.cA.Hn&&Tt.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(i),s}vO(t,i,s,e){if(s)this.lV(i,e,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const s=t.attribute("aPos");this.GV(s,i),void 0!==e&&this.UV(s,e)}return this}bO(){this.iz.WEBGL_lose_context&&this.iz.WEBGL_lose_context.loseContext()}xO(t){if(this.MO&&this.MO.bufferIdsCount>=t)return this.MO.buffer;this.MO&&(this.yV(this.MO.buffer),this.MO=void 0);const i=t,s=new Float32Array(i);for(let t=0;t<i;t+=1)s[t]=t;const e=this.nV(s);return this.MO={buffer:e,bufferIdsCount:i},e}_O(){return this.gl2?void 0:"attribute"}wO(t,i){if("attribute"===this._O()){const s=this.xO(i);this.lV(s,void 0,{location:t.attribute("aVertexID"),size:1})}return this}CO(){return this.gl2?void 0:"attribute"}kO(t,i){if("attribute"===this.CO()){const s=this.xO(i);this.lV(s,1,{location:t.attribute("aInstanceID"),size:1})}return this}TO(t,i,s,e,h,r,n,o,a){const l=t.createBuffer();return this.iO.push(l),t.bindFramebuffer(t.FRAMEBUFFER,i),t.bindBuffer(t.PIXEL_PACK_BUFFER,l),t.bufferData(t.PIXEL_PACK_BUFFER,a.byteLength,t.STREAM_READ),t.readPixels(s,e,h,r,n,o,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),dm(t,t.PIXEL_PACK_BUFFER,l,0,a).then((()=>a)).catch((t=>{throw t})).finally((()=>{t.deleteBuffer(l),this.iO.splice(this.iO.indexOf(l),1)}))}FO(t,i,s,e,h,r,n,o){const a=this.gl,l=this.iV();this.sV(a.FRAMEBUFFER,t),a.readPixels(i,s,e,h,r,n,o),this.sV(this.gl.FRAMEBUFFER,l)}IO(t){const i=this.CV.get(t);if(!i){const i=this.gl.createTexture();if(!i)throw new xt("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,i);const e=[];let h=255;for(let i=0;i<t.length;i+=1){for(let s=0;s<t[i];s+=1)e.push(h);h=255===h?0:255}const r=e.length;if(!this.gl2&&0!=((s=e.length)&s-1)){const t=(t=>{t-=1;for(let i=1;i<32;i<<=1)t|=t>>1;return t+1})(e.length);for(let i=e.length;i<t;i+=1)e[i]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(e)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const n={PO:i,DO:r,BO:e.length};return this.CV.set(t,n),n}var s;return i}LO(t,i,s){const{uniform:e}=t;this.AR(e("uFallbackColor"),i.getFallbackColor());for(let t=0;t<i.steps.length;t+=1)this.dV(e(`uLUTValue${t}`),i.steps[t].value),this.AR(e(`uLUTColor${t}`),i.steps[t].color);if(i.percentageValues){if(!s)return bi(0,(()=>{})),this;this.dV(e("uMinValue"),s.min),this.dV(e("uMaxValue"),s.max)}return this}RO(t,i,s,e,h,r){const n=s&&s.getSource()||e&&e.rc,o=s?s.getFitMode():nn.Stretch,a=t=>{t.texCoordsBuffer=this.nV(r(t.texture.Fz,t.texture.Iz,o),!1,t.texCoordsBuffer)};if(n){let e=i;if((!i||n!==i.source)&&n){i&&(i.texture.ZR(t),this.yV(i.texCoordsBuffer));const h=this.pO(n);h.jR(t);const r=s?s.getSourceMissingColor():Be.color;e={texture:h,source:n,texCoordsBuffer:this.nV([]),sourceMissingTexture:this.fO(new Uint8Array([r.getR(),r.getG(),r.getB(),r.getA()]),this.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{e&&n&&(a(e),this.us.Ss())}},h.Oz(e.textureReadyCallback),a(e)}return e&&e.texture.Dz&&e.texture.Pz&&e.texture.Tz&&(e.texture.Ps(),this.us.Ss()),h&&e&&e.texture.Dz&&a(e),e}i&&this.EO(t,i)}EO(t,i){i&&(i.texture.ZR(t),i.texture.Nz(i.textureReadyCallback),this.OR(i.sourceMissingTexture),this.yV(i.texCoordsBuffer))}zO(t,i,s,e){const{uniform:h,uniformOptional:r,attribute:n}=t,o=s.dt,a=this.$z();this.dV(h("uIsHighlighted"),1===i||2===i?0:s.zo).AR(h("uHighlightColorOffset"),1===i||2===i?F:s.Go).dV(h("uRenderEffectMask"),2===i?1:0).uV(r("uRatioPxClip"),[2/this.us.oi().x,2/this.us.oi().y]).dV(r("uDevicePixelRatio"),a),o instanceof Gs||o instanceof gd?this.uV(h("uScale"),e.uniforms.fV()).uV(h("uDisp"),e.uniforms.AV()).uV(r("uScaleStart_highpart"),e.uniforms.VO()).uV(r("uScaleStart_lowpart"),e.uniforms.OO()):o instanceof Ws&&this.uV(r("uScaleStart"),e.uniforms.MixedScaleXY.uScaleStart).uV(r("uScaleStartLog"),e.uniforms.MixedScaleXY.uScaleStartLog).uV(r("uScaleInterval"),e.uniforms.MixedScaleXY.uScaleInterval).uV(r("uScaleIntervalLog"),e.uniforms.MixedScaleXY.uScaleIntervalLog).uV(h("uViewportStart"),e.uniforms.MixedScaleXY.uViewportStart).uV(h("uViewportSize"),e.uniforms.MixedScaleXY.uViewportSize);const l=!0===e.coordsHighPrecision;if(e.coordsX)if(l){const t=n("aPos_highpartX"),i=n("aPos_lowpartX");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.coordsX),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(i,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(i)}else this.$V(n("aPosX"),e.coordsX);if(e.coordsY)if(l){const t=n("aPos_highpartY"),i=n("aPos_lowpartY");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.coordsY),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(i,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(i)}else this.$V(n("aPosY"),e.coordsY);if(1===i)this.AR(h("uColor"),e.mousePickingColor);else{if(e.fillStyleSolid&&this.AR(h("uColor"),e.fillStyleSolid.getColor()),e.fillStylePaletted){if("value"===e.fillStylePaletted.getLookUpProperty()&&null!==e.lookupValueBuffer){if(!e.lookupValueBuffer)return!1;const t=n("aLookupValue");this.$V(t,e.lookupValueBuffer),void 0!==e.lookupValueAttribDivisor&&this.UV(t,e.lookupValueAttribDivisor)}this.LO(t,e.fillStylePaletted.lut,e.lookupValueRange)}if(e.fillStyleLinearGradient){if(!e.linearGradientInfo)return!1;this.yO(t,e.linearGradientInfo,e.fillStyleLinearGradient)}if(e.fillStyleRadialGradient){if(!e.radialGradientInfo)return!1;this.mO(t,e.radialGradientInfo,e.fillStyleRadialGradient)}if(e.fillStyleIndividual&&null!==e.colorBuffer){if(!e.colorBuffer)return!1;const t=n("aColor");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.colorBuffer),this.gl.vertexAttribPointer(t,4,this.gl.UNSIGNED_BYTE,!0,0,0),this.gl.enableVertexAttribArray(t),void 0!==e.colorAttribDivisor&&this.UV(t,e.colorAttribDivisor)}if(e.fillStyleImage){if(!e.texturedFillGLInfo)return!1;const t=e.texturedFillGLInfo&&e.texturedFillGLInfo.texture.Gz();this.AR(r("uColor"),e.fillStyleImage.getSurroundingColor()).cV(h("uColorTexture"),t||e.texturedFillGLInfo.sourceMissingTexture,0).lV(e.texturedFillGLInfo.texCoordsBuffer,e.texCoordAttribDivisor,{location:n("aTextureCoord"),size:2}).LV(e.fillStyleImage.fitMode)}if(e.maskTexture){const t=e.maskTexture&&e.maskTexture.texture.Gz();this.cV(h("uMaskTexture"),t||e.maskTexture.sourceMissingTexture,0).lV(e.maskTexture.texCoordsBuffer,e.maskTextureCoordsAttribDivisor,{location:n("aMaskTextureCoord"),size:2})}}return!0}NO(t,i,s){if(t)return sm(s||i.Ho(),i.dt,t.getAngle(!0),this.$z())}GO(t,i,s){if(t)return im(s||i.Ho(),i.dt,t.getPosition(),t.getExtent(),t.getShape(),this.$z())}}const dm=async(t,i,s,e,h,r,n)=>{const o=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),((t,i,s)=>{const e=void 0!==s.flags?s.flags:0,h=void 0!==s.retryTimeout?s.retryTimeout:10;return new Promise(((s,r)=>{const n=()=>{const o=t.clientWaitSync(i,e,0);return o===t.WAIT_FAILED?r(new Error(`WebGL Sync WAIT_FAILED ${t.getError()}`)):o!==t.TIMEOUT_EXPIRED?s(void 0):void Tt.setTimeout(n,h)};Tt.setTimeout(n,0)}))})(t,o,{retryTimeout:10}).then((()=>(t.deleteSync(o),t.bindBuffer(i,s),t.getBufferSubData(i,e,h,r,n),t.bindBuffer(i,null),h))).catch((t=>{throw t}))};class fm{mV(t){if(t instanceof Gs||t instanceof gd){const i=t.pi();this.WO=i.x.scaling,this.UO=-i.x.displacement,this.YO=i.y.scaling,this.HO=-i.y.displacement,this.$O=i.x.highPrecisionOffset,this.XO=i.x.highPrecisionOffset-Math.fround(i.x.highPrecisionOffset),this.jO=i.y.highPrecisionOffset,this.ZO=i.y.highPrecisionOffset-Math.fround(i.y.highPrecisionOffset)}else t instanceof Ws&&(this.MixedScaleXY=t.pi());return this}AV(){return[this.UO,this.HO]}fV(){return[this.WO,this.YO]}VO(){return[this.$O,this.jO]}OO(){return[this.XO,this.ZO]}}class Am{constructor(){this.WO=0,this.YO=0,this.QO=0,this.UO=0,this.HO=0,this.JO=0}KO(t){return this.WO=t.et(),this.UO=t.getInnerStart()+.5*this.WO*t.ht(),this}qO(t){return this.YO=t.et(),this.HO=t.getInnerStart()+.5*this.YO*t.ht(),this}tN(t){return this.QO=t.et(),this.JO=t.getInnerStart()+.5*this.QO*t.ht(),this}fV(){return[this.WO,this.YO,this.QO]}AV(){return[this.UO,this.HO,this.JO]}iN(t,i,s,e,h){const r=n(2*(t-s.x)/(s.width-s.x)-1,2*(i-s.y)/(s.height-s.y)-1),o=El.multiply(e,[r.x,r.y,h,1]);return l(o[0],o[1],o[2])}}class gm{constructor(t){this.RR=t}zL(t,i,s,e,h,r=0){const n=this.RR,o=void 0===e;if(!(e=e||n.vV()))throw new xt("Could not bind a framebuffer.");const a=n.Xz(),l=n.Jz();n.gV(!1),n.KV((()=>{n.eV(0,0,s.x,s.y),t()}),e,i,r),o&&n.MV(e),this.RR.qV(h),this.RR.eV(a.x,a.y,a.width,a.height),n.gV(l)}}class mm{constructor(t,i){this.sN=[],this.eN=[],this.uniform=t=>{const i=this.shader.gE(t);return this.eN.push({name:t,optional:!1}),i},this.uniformOptional=t=>{const i=this.shader.mE(t);return this.eN.push({name:t,optional:!0}),i},this.attribute=t=>{const i=this.shader.yE(t);return this.sN.push({name:t,location:i}),i},this.glUtils=t,this.shader=i}finish(t){for(const t of this.sN)this.glUtils.YV(t.location),this.glUtils.UV(t.location,0)}}class ym extends Qh{constructor(t,i,s,e,h){super(t,i,s,e),this.hN=new Map,this.rN=t,this.nN=i,this.RR=t.oN(),this.aN=h,this.nN=i}lN(t){return!1}VR(){return this}zL(t){if(!this.aN||0!==t||0===this.hN.size)return this;const i=Array.from(this.hN.values()).map((t=>t.uN.filter((t=>t.cN)).map((t=>t.ts)).flat().filter((t=>void 0!==t)).filter((t=>t.getVisible())))).flat();if(0===i.length)return this;const s=this.aN;return this.RR.aO.SV(i,s),this}Ps(){return this}bt(){return 0}vt(){return 0}Mt(){return 0}xt(){return 0}vl(){return 0}bl(){return 0}hs(t,i){const s={uN:[]},e=(t,i)=>{const e={ts:t||[],cN:void 0===i||i};s.uN.push(e);const h={fs:t=>(e.ts=t,h),ps:t=>(e.cN=t,h),vs:()=>e.cN};return h},h={};Object.keys(i).forEach((t=>{const s=i[t],r=s.shapes||[],n=void 0===s.themeEffectEnabled||s.themeEffectEnabled,o=e(r,n);h[t]=o}));const r={yg:e,...h};this.hN.set(t,s);const n=t.onDispose((()=>{this.hN.delete(t),t.offDispose(n)}));return r}}const pm=(t,i,s)=>((t,i,s,e)=>{const h=[];let r=0;const o=cs(i,s/2);let a,l,u,c,d=t[t.length-1],f=0;for(let s=0;s<t.length;s+=1){a=t[s],l=s===t.length-1?t[0]:t[s+1],s>0&&(d=t[s-1]),Ft(a,d)&&(d=ds(a,as(cs(fs(l,a),-1)))),Ft(a,l)&&(l=ds(a,as(cs(fs(d,a),-1))));const e=gs(d,i),A=gs(a,i),g=gs(l,i),m=as(fs(A,e)),y=as(fs(g,A)),p=ds(m,y),S=n(-p.y,p.x),v=n(-m.y,m.x),b=1/ys(S,v),x=us(S),M=as(fs(m,y)),_=Math.sign(ys(S,M))||1,w=As(S,cs(o,b)),C=As(S,cs(o,-b));if(x<1||b===1/0){let t={x:0,y:0},i={x:0,y:0},s={x:0,y:0},e={x:0,y:0};const u=n(-y.y,y.x),c=Math.sign(ys(m,S))||_,A=As(v,cs(o,c)),g=As(u,cs(o,c));1===_?(t=A,i=C,s=g,e=C):(t=w,i=A,s=w,e=g);const p=4*Ji(d,a),x=4*Ji(a,l);(b>p||b>x)&&(1===_?(t=A,i=g,s=g,e=A):(t=g,i=A,s=A,e=g));const M=ds(a,t),k=ds(a,i),T=ds(a,s),F=ds(a,e);h[r]=M,r+=1,h[r]=k,r+=1,h[r]=T,r+=1,h[r]=F,r+=1,f=4}else{const t=ds(a,w),i=ds(a,C);h[r]=t,r+=1,h[r]=i,r+=1,f=2}c=u,u=t[s]}return h[r]=h[0],r+=1,h[r]=h[1],r+=1,[h,f,[c,u]]})(t,i,s)[0];class Sm extends dr{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.aE=new fm,this.dN=Gi,this.fN=Gi,this.AN=ZA({arcStyleSolid:()=>Y(this.be)&&this.be,arcStyleRadialGradient:()=>et(this.be)&&this.be,arcStyleLinearGradient:()=>nt(this.be)&&this.be}),this.rN=t,this.nN=i,this.gN=r,this.mN=n,this.RR=t.oN()}yN(t,i){let s=0,e=Array(0),h=0;if(void 0!==i){const h=t.length,r=Array(h+i.length);let n=0,o=0;for(;n<h;)r[o]=t[n],r[o+1]=i[n],o+=2,n+=1;e=r,s=this.RR.gl.TRIANGLE_STRIP}else e=t,s=this.RR.gl.TRIANGLE_FAN;const r=ei(e,this.dt._i());return h=e.length,[e,this.RR.nV(r),h,s]}pN(t,i,s,e){let h=Array(0);if(void 0===i)h=t;else{let s=0,e=0;const r=t.length;for(s=0,e=r,h=Array(r+i.length-2),i.reverse();s<r;)h[s]=t[s],h[e]=i[s],e+=1,s+=1}if(1===s||-1===s)return[ei(h,this.dt._i()),h.length];const r=pm(h,e,s);return[ei(r,this.dt._i()),r.length]}Ps(){const t=this.sa(),i=this.Bo.M();if(this.ea()){const s=Math.abs(this.Fi.M()-this.Gl.M());this.aE.mV(this.dt);const e=this.dt.Ni()||t,h=this.dt.Wi(),r=this.Wl.M(),o=this.Ul.M(),[a,l]=Ed(this.ua.M(),this.Gl.M(),this.Fi.M(),this.Wl.M(),this.Ul.M(),this.Hl.M()),u=this.Yl.M(),d=u>0?Ed(this.ua.M(),this.Gl.M(),this.Fi.M(),this.Wl.M()*u/100,this.Ul.M()*u/100,l)[0]:[this.ua.M()],f=a.length-1;if(2===f){const t=(a[f-1].x+a[1].x)/2,i=(a[f-1].y+a[1].y)/2;this.$l=n(t,i)}else{const t=Math.floor(f/2);this.$l=n(a[t].x,a[t].y)}this.Xl=a[1];const A=a.length-1;this.jl=a[A],this.Yl.M()&&(a.shift(),d.shift());let g=!1;(this.ua.i||this.Gl.i||this.Fi.i||this.Wl.i||this.Ul.i||this.Yl.i||this.Hl.i||e)&&(this.fN=c(n(this.Fa().x-r,this.Fa().y-o),n(this.Fa().x+r,this.Fa().y+o)),g=!0,this.ua.i=!1,this.Gl.i=!1,this.Fi.i=!1,this.Wl.i=!1,this.Ul.i=!1,this.Yl.i=!1,this.Hl.i=!1);const m=this.ta();(g||m)&&this.be!==O&&(this.Yl.M()?(this.SN&&this.RR.yV(this.SN),[this.vN,this.SN,this.bN,this.xN]=this.yN(a,d)):(this.SN&&this.RR.yV(this.SN),[this.vN,this.SN,this.bN,this.xN]=this.yN(a,void 0)),et(this.be)?this.MN=im(this.fN,this.dt,this.be.getPosition(),this.be.getExtent(),this.be.getShape(),this.RR.$z()):nt(this.be)?this._N=sm(this.fN,this.dt,this.be.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0));const y=this.AN.arcStyleSolid(m),p=this.AN.arcStyleLinearGradient(m),S=this.AN.arcStyleRadialGradient(m),v=y||p||S;m&&(this.wN=v?this.RR.oz(_g["2D"],_g.Color({dataType:et(this.be)||nt(this.be)?["gradient",this.be]:"uniform"}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0,this.ha(this.be));const b=this.xe;if(he(b)&&(g||this.oa(b.getThickness())||e)){this.Yl.M()?360===s?(a.pop(),d.pop(),[this.CN,this.kN]=this.pN(a,void 0,b.getThickness(),h),this.TN&&this.CN?this.RR.VV(this.TN,this.CN,!0):!this.TN&&this.CN?this.TN=this.RR.nV(this.CN,!0):this.TN&&!this.CN&&(this.RR.yV(this.TN),this.TN=void 0),[this.FN,this.IN]=this.pN(d,void 0,b.getThickness(),h),this.PN&&this.FN?this.RR.VV(this.PN,this.FN,!0):!this.PN&&this.FN?this.PN=this.RR.nV(this.FN,!0):this.PN&&!this.FN&&(this.RR.yV(this.PN),this.PN=void 0)):([this.CN,this.kN]=this.pN(a,d,b.getThickness(),h),this.TN&&this.CN?this.RR.VV(this.TN,this.CN,!0):!this.TN&&this.CN?this.TN=this.RR.nV(this.CN,!0):this.TN&&!this.CN&&(this.RR.yV(this.TN),this.TN=void 0),this.FN&&(this.PN&&this.RR.yV(this.PN),this.PN=void 0,this.IN=0)):(360===s&&(a.shift(),a.pop()),[this.CN,this.kN]=this.pN(a,void 0,b.getThickness(),h),this.TN&&this.CN?this.RR.VV(this.TN,this.CN,!0):!this.TN&&this.CN?this.TN=this.RR.nV(this.CN,!0):this.TN&&!this.CN&&(this.RR.yV(this.TN),this.TN=void 0));const t=b.getFillStyle();et(t)?this.DN=im(this.fN,this.dt,t.getPosition(),t.getExtent(),t.getShape(),this.RR.$z()):nt(t)?this.LN=sm(this.fN,this.dt,t.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),this.RN=t===O?void 0:this.RR.oz(_g["2D"],_g.Color({dataType:et(t)||nt(t)?["gradient",t]:"uniform"}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})),this.aa(b)}if(g){let t=1,i=1;he(b)&&(t=b.getThickness()*h.x,i=b.getThickness()*h.y),this.dN=c(n(this.fN.min.x-t,this.fN.min.y-i),n(this.fN.max.x+t,this.fN.max.y+i))}this.EN=i&&v?this.EN||this.RR.oz(_g["2D"],_g.MousePicking,_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0,this.zN=i&&this.xe!==at?this.zN||this.RR.oz(_g["2D"],_g.MousePicking,_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0}return this}zL(t){if(this.ea()){const i=1===t?this.EN:this.wN,s=this.be,e=this.SN;i&&e&&this.RR.jR(i).aV(i,((i,h,r,n)=>{if(this.RR.uV(i("uScale"),this.aE.fV()).uV(i("uDisp"),this.aE.AV()).uV(n("uScaleStart_highpart"),this.aE.VO()).uV(n("uScaleStart_lowpart"),this.aE.OO()).vO(r,e,this.dt._i(),void 0).dV(i("uIsHighlighted"),1===t||2===t?0:this.zo).AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0),1===t)this.RR.AR(i("uColor"),this.mN);else if(Y(s))this.RR.AR(i("uColor"),s.getColor());else if(et(s)){if(!this.MN)return!1;this.RR.mO(r,this.MN,s)}else if(nt(s)){if(!this._N)return!1;this.RR.yO(r,this._N,s)}return this.RR.Ky(this.xN,this.bN),!0}));const h=this.xe;he(h)&&(void 0!==this.TN&&this.VN(t,this.TN,this.kN,h),void 0!==this.PN&&this.VN(t,this.PN,this.IN,h))}return this}VN(t,i,s,e){const h=1===t?this.zN:this.RN,r=e.getFillStyle();h&&this.RR.jR(h).aV(h,((h,n,o,a)=>{if(this.RR.uV(h("uScale"),this.aE.fV()).uV(h("uDisp"),this.aE.AV()).vO(o,i,this.dt._i(),void 0).dV(h("uIsHighlighted"),1===t||2===t?0:this.zo).AR(h("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(h("uRenderEffectMask"),2===t?1:0),1===t)this.RR.AR(h("uColor"),this.mN);else if(Y(r))this.RR.AR(h("uColor"),r.getColor());else if(et(r)){if(!this.DN)return!1;this.RR.mO(o,this.DN,r)}else if(nt(r)){if(!this.LN)return!1;this.RR.yO(o,this.LN,r)}const l=e.getThickness(),u=-1===l||1===l;return this.RR.Ky(u?this.RR.gl.LINE_LOOP:this.RR.gl.TRIANGLE_STRIP,s),!0}))}lN(t){return this.gN===t&&{}}VR(){return this.ON&&(this.RR.yV(this.ON),this.ON=void 0),this.NN&&(this.RR.yV(this.NN),this.NN=void 0),this.SN&&(this.RR.yV(this.SN),this.SN=void 0),this.TN&&(this.RR.yV(this.TN),this.TN=void 0),this.PN&&(this.RR.yV(this.PN),this.PN=void 0),this.wN=void 0,this.RN=void 0,this.EN=void 0,this.zN=void 0,this}bt(){return this.fN.max.x}vt(){return this.fN.min.x}Mt(){return this.fN.max.y}xt(){return this.fN.min.y}vl(){return Pi(this.xe)}bl(){return Pi(this.xe)}}class vm{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}GN(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}WN(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}UN(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}YN(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.second,i[s+2]=this.third,s+=3,t.position=s,t.next&&this.WN(),this}HN(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.third,i[s+2]=this.second,i[s+3]=this.third,i[s+4]=this.fourth,i[s+5]=this.second,s+=6,t.position=s,t.next&&this.UN(),this}$N(t,i){i.next=!0,6*t>=i.buffer.length&&(i.buffer=Array(6*t));for(let s=0;s<t;s+=1)this.HN(i);return this}XN(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const bm=((t=0)=>(new vm).GN(t))(),xm=(t,i,s,e,h,r,n,o,a,l)=>(void 0===o&&void 0===n||bm.WN(),r.push(t,i),h.push(bm.first,bm.second,bm.third),o=void 0,n=void 0,h.push(bm.third,bm.fourth,bm.second),a=bm.third,bm.UN(),l&&r.push(s,e),[n,o,a]),Mm=(t,i,s,e,h,r,n,o,a,l,u)=>{void 0===a&&void 0===o||bm.WN(),n.push(t,i),h.push(bm.first,bm.second,bm.third);const c=ws(t,s,i,e);return a=void 0,void 0!==c&&(void 0===a&&(a=c),n.push(a),r.push(bm.third,bm.fourth,bm.fifth),l=bm.fourth),bm.UN(),u&&n.push(s,e),[o,a,l]},_m=(t,i,s,e,h,r,n,o,a,l)=>(void 0===n&&void 0===r||bm.WN(),h.push(t,i),e.push(bm.first,bm.second,bm.third),r=s,n=void 0,o=bm.third,l?h.push(s):a=!0,[r,n,o,a]),wm=(t,i,s,e,h,r,n,o,a,l,u)=>(0!==r.length?(void 0===o&&void 0===n||bm.WN(),bm.WN()):a>0&&(bm.WN(),u>0&&(u-=1)),r.push(t),h.push(bm.first,bm.second,bm.third),a=bm.second,n=t,o=void 0,l&&r.push(s,e),[n,o,a,u]),Cm=(t,i=0)=>{bm.GN(i);const[s,e]=t,h=s.length,r=[],n=[],o=[];let a,l,u=i,c=0,d=s[c],f=e[c],A=s[c],g=e[c],m=!1,y=u>0?A.y!==g.y?2:1:0;if(h>1)for(;c<h-1;){A=d,g=f,c+=1,d=s[c],f=e[c];const t=c===h-1;A.y>g.y?d.y>f.y?[a,l,u]=xm(A,g,d,f,r,o,a,l,u,t):d.y<f.y?[a,l,u]=Mm(A,g,d,f,r,n,o,a,l,u,t):[a,l,u,m]=_m(A,g,d,r,o,a,l,u,m,t):A.y<g.y?d.y<f.y?[a,l,u]=xm(A,g,d,f,n,o,a,l,u,t):d.y>f.y?[a,l,u]=Mm(A,g,d,f,n,r,o,a,l,u,t):[a,l,u,m]=_m(A,g,d,n,o,a,l,u,m,t):d.y===f.y?(a=A,m&&(o.push(A),m=!1,bm.WN()),0===o.length&&u>0&&y>0&&(y-=1)):d.y>f.y?[a,l,u,y]=wm(A,0,d,f,r,o,a,l,u,t,y):[a,l,u,y]=wm(A,0,d,f,n,o,a,l,u,t,y)}return[o,new Uint16Array(r),new Uint16Array(n),u,y]};class km extends cr{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.aE=new fm,this.jN=0,this.Oa=Array(),this.ZN=0,this.QN=new Uint16Array(0),this.JN=new Uint16Array(0),this.AN=ZA({hightFillSolid:()=>Y(this.be)&&this.be,hightFillRadialGradient:()=>et(this.be)&&this.be,hightFillLinearGradient:()=>nt(this.be)&&this.be,hightFillPaletted:()=>Z(this.be)&&this.be,lowFillSolid:()=>Y(this.Tl)&&this.Tl,lowFillRadialGradient:()=>et(this.Tl)&&this.Tl,lowFillLinearGradient:()=>nt(this.Tl)&&this.Tl,lowFillPaletted:()=>Z(this.Tl)&&this.Tl}),this.rN=t,this.nN=i,this.gN=r,this.mN=n,this.RR=t.oN()}Ps(){const t=this.sa(),i=this.Bo.M(),s=this.Qa;if(this.ea()){this.aE.mV(this.dt);const e=this.dt instanceof Ws==0,h=e?this.dt.Wi():void 0,r=this.Dl(),n=this.dt.Ni()||t,o=s||this._l.i||n&&"disabled"!==r.type;if(o){if(this.jN=0,this.QN=new Uint16Array(0),this.JN=new Uint16Array(0),this.Oa.length=0,this.ZN=0,this.wl>1){const[t,i,s,n]=Cm([e?r.packager(this.xl,h,.5):this.xl,e?r.packager(this.Ml,h,.5):this.Ml]);this.jN=n,this.QN=i,this.JN=s,this.Oa=t,this.ZN=t.length}this._l.i=!1}if(this.kl&&this.$a[0].length>1){const[t,i]=this.$a,s=t.length,[n,o,a,l,u]=Cm([e?r.packager(t,h,.5):t,e?r.packager(i,h,.5):i],this.jN);this.jN=l;const c=n.length;for(let t=u;t<c;t+=1)this.Oa[this.ZN]=n[t],this.ZN+=1;this.QN=Cs(this.QN,o),this.JN=Cs(this.JN,a);for(let e=u>0||this.wl>0?1:u;e<s;e+=1)this.xl[this.wl]=t[e],this.Ml[this.wl]=i[e],this.wl+=1;this.Cl=!0,this.kl=!1,this.$a=[]}const a=this.be,l=this.ia!==a,u=this.AN.hightFillSolid(l),c=this.AN.hightFillRadialGradient(l),d=this.AN.hightFillLinearGradient(l),f=this.AN.hightFillPaletted(l),A=u||c||d||f&&["x","y"].includes(f.getLookUpProperty())&&f,g=this.Tl,m=this.Ol!==g,y=this.AN.lowFillSolid(m),p=this.AN.lowFillRadialGradient(m),S=this.AN.lowFillLinearGradient(m),v=this.AN.lowFillPaletted(m),b=y||p||S||v&&["x","y"].includes(v.getLookUpProperty())&&v;if((l||t)&&(this.KN=A?this.RR.oz(_g["2D"],_g.Color({dataType:d?["gradient",d]:c?["gradient",c]:f?["lookup",f.getLookUpProperty(),f.lut]:"uniform"}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0),c?this.MN=im(this.Eo||this.Ya,this.dt,c.getPosition(),c.getExtent(),c.getShape(),this.RR.$z()):d?this._N=sm(this.Eo||this.Ya,this.dt,d.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),(m||t)&&(this.qN=b?this.RR.oz(_g["2D"],_g.Color({dataType:S?["gradient",S]:p?["gradient",p]:v?["lookup",v.getLookUpProperty(),v.lut]:"uniform"}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0),p?this.tG=im(this.Eo||this.Ya,this.dt,p.getPosition(),p.getExtent(),p.getShape(),this.RR.$z()):S?this.iG=sm(this.Eo||this.Ya,this.dt,S.getAngle(!0),this.RR.$z()):(this.tG=void 0,this.iG=void 0),(t||this.Cl||o)&&this.Cl||o){const t=this.Oa,i=ei(t,this.dt._i());this.sG=this.RR.nV(i,!1,this.sG),A&&(this.eG=this.RR.OV(this.QN,this.eG),this.hG=this.QN.length),b&&(this.rG=this.RR.OV(this.JN,this.rG),this.nG=this.JN.length),this.Cl=!1}this.EN=i&&(b||A)?this.EN||this.RR.oz(_g["2D"],_g.MousePicking,_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0,this.ha(this.be),this.Nl(this.Tl),this.Qa=!1}return this}zL(t){const i=this.be,s=this.Tl,e=1===t?this.EN:this.qN;if(e&&this.sG&&this.rG){const i=this.sG,h=this.rG;this.RR.jR(e).aV(e,((e,r,n,o)=>{if(this.RR.vO(n,i,this.dt._i(),void 0).XV(h).dV(e("uIsHighlighted"),1===t||2===t?0:this.zo).AR(e("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(e("uRenderEffectMask"),2===t?1:0),this.dt instanceof Gs||this.dt instanceof gd?this.RR.uV(e("uScale"),this.aE.fV()).uV(e("uDisp"),this.aE.AV()).uV(o("uScaleStart_highpart"),this.aE.VO()).uV(o("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ws&&this.RR.uV(o("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(o("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(o("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(o("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(e("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(e("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),1===t)this.RR.AR(e("uColor"),this.mN);else if(Y(s))this.RR.AR(e("uColor"),s.getColor());else if(et(s)){if(!this.tG)return!1;this.RR.mO(n,this.tG,s)}else if(nt(s)){if(!this.iG)return!1;this.RR.yO(n,this.iG,s)}else if(Z(s)){const t=QA(s,this,void 0);if(!t&&s.lut.percentageValues)return!1;this.RR.LO(n,s.lut,t)}return this.RR.ZV(this.nG),!0}))}const h=1===t?this.EN:this.KN;if(h&&this.sG&&this.eG){const s=this.sG,e=this.eG;this.RR.jR(h).aV(h,((h,r,n,o)=>{if(this.RR.vO(n,s,this.dt._i(),void 0).XV(e).dV(h("uIsHighlighted"),1===t||2===t?0:this.zo).AR(h("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(h("uRenderEffectMask"),2===t?1:0),this.dt instanceof Gs||this.dt instanceof gd?this.RR.uV(h("uScale"),this.aE.fV()).uV(h("uDisp"),this.aE.AV()).uV(o("uScaleStart_highpart"),this.aE.VO()).uV(o("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ws&&this.RR.uV(o("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(o("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(o("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(o("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(h("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(h("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),1===t)this.RR.AR(h("uColor"),this.mN);else if(Y(i))this.RR.AR(h("uColor"),i.getColor());else if(et(i)){if(!this.MN)return!1;this.RR.mO(n,this.MN,i)}else if(nt(i)){if(!this._N)return!1;this.RR.yO(n,this._N,i)}else if(Z(i)){const t=QA(i,this,void 0);if(!t&&i.lut.percentageValues)return!1;this.RR.LO(n,i.lut,t)}return this.RR.ZV(this.hG),!0}))}return this}lN(t){return this.gN===t&&{}}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return 0}bl(){return 0}Ux(t){this.al()>0&&this.Ps();const[i,s]=this.tl(),e=i.length>2&&i[1].x<i[0].x,h=Gh(i,t,Oh.NearestX,this.Fl,this.Il,this.dt,this.us.dt,this.Ya,"x",e);if(void 0===h)return;const r=[i[h],s[h]];return Number.isNaN(r[0].y)||Number.isNaN(r[1].y)?void 0:r}sw(t){this.al()>0&&this.Ps();const[i,s]=this.tl(),e=i.length;if(0===e)return;const h=this.Fl?1:0,r=e-(this.Il?2:1),n=i.length>2&&i[1].x<i[0].x,o=$h(i,At(t,this.us.dt,this.dt),"x",n,h,r);if(!o)return;const a=[qi(i[o.a],i[o.b],o.lerpAmount),qi(s[o.a],s[o.b],o.lerpAmount)];return Number.isNaN(a[0].y)||Number.isNaN(a[1].y)?void 0:a}dispose(){return super.dispose(),this.rG&&(this.RR.yV(this.rG),this.rG=void 0),this.eG&&(this.RR.yV(this.eG),this.eG=void 0),this.sG&&(this.RR.yV(this.sG),this.sG=void 0),this}VR(){return this.dispose(),this}}class Tm extends em{constructor(t,i){super(t),this.oG=i;const{vertices:s,indices:e,indicesCount:h,drawMode:r}=this.aG();this.lG=t.nV(s),this.uG=t.OV(e),this.cG=h,this.dG=r}jR(t,i){return this.RR.lV(this.lG,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:i?t.attribute("aSegmentInside"):void 0,size:1}),this.RR.XV(this.uG),this}Ky(t,i,s){return this.RR.JV(void 0!==i?i:this.dG,this.cG,s||0,t,this.RR.gl.UNSIGNED_BYTE),this}aG(){const t=[];[1,0].forEach((i=>{const s=1===i?.5*Math.PI:1.5*Math.PI;for(let e=0;e<=this.oG;e+=1){const h=s-e*Math.PI/this.oG;t.push(.5*Math.cos(h),.5*Math.sin(h),i,0)}})),t.push(0,0,1,1),t.push(0,0,0,1);const i=t.length/4,s=[];for(let t=0;t<this.oG;t+=1)s.push(t,t+1,i-2),s.push(t+i/2-1,t+i/2,i-1);return s.push(0,i-2,i-1),s.push(i-1,i-2,i/2-1),s.push(0,i-3,i-1),s.push(i/2-2,i-2,i/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(s),indicesCount:s.length,verticesCount:i,drawMode:this.RR.gl.TRIANGLES}}kz(){this.RR.yV(this.lG),this.RR.yV(this.uG)}}const Fm=(t,i,s=!0)=>((t,i)=>{let s=t._V.xz.get(i);return s||(s=new Tm(t,i),t._V.xz.set(i,s),s)})(t,s?i>=50?8:i>=20?6:i>=7?4:i>=4?3:1===i?1:2:1),Im={fG:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.UV(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.UV(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.UV(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.UV(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.UV(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.UV(s,1),o.enableVertexAttribArray(s)}},AG:(t,i,s,e,h,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,s),o.vertexAttribPointer(e,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(h,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),t.UV(h,1),o.enableVertexAttribArray(h)},gG:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.UV(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.UV(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.UV(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.UV(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.UV(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.UV(s,1),o.enableVertexAttribArray(s)}},mG:(t,i,s,e,h,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,s),o.vertexAttribPointer(e,r,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(h,r,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),t.UV(h,1),o.enableVertexAttribArray(h)},zL:(t,i,s,e,h,r,n)=>{const o=t.oN(),{uniform:a,uniformOptional:l}=s,u=1/t.Un.$n,c=(h?Math.max(r,u):Math.max(r,0))+1;o.dV(a("uThicknessPixels"),c).dV(l("uAALimit"),1-(c-1)/c).uV(a("uRatioPxClip"),[2/t.oi().x,2/t.oi().y]),i.jR(s,e).Ky(n)}},Pm={fG:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aPos_highpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t);const i=n("aPos_lowpart");o.vertexAttribPointer(i,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(i)}else{const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},AG:(t,i,s,e,h,r)=>{const n=t.gl;n.bindBuffer(n.ARRAY_BUFFER,s),n.vertexAttribPointer(e,h,n.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),n.enableVertexAttribArray(e)},gG:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),!t){const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},yG:(t,i)=>{const s=t.oN();s.Ky(s.gl.LINE_STRIP,i,0)},pG:(t,i)=>{const s=t.oN();s.Ky(s.gl.LINES,2*i,0)}};class Dm extends vr{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.aE=new fm,this.Ya=Gi,this.AN=ZA({lineStyleSolid:()=>he(this.lu)&&this.lu,lineStyleDashed:()=>fn(this.lu)&&this.lu,strokeFillSolid:()=>{const t=this.lu.getFillStyle();return Y(t)&&t},strokeFillLinearGradient:()=>{const t=this.lu.getFillStyle();return nt(t)&&t},strokeFillRadialGradient:()=>{const t=this.lu.getFillStyle();return et(t)&&t},strokeFillPaletted:()=>{const t=this.lu.getFillStyle();return Z(t)&&t}}),this.rN=t,this.nN=i,this.gN=r,this.mN=n,this.RR=t.oN(),this.SG=this.RR.eO}Ps(){const t=this.ra(),i=this.lu,s=this.AN.lineStyleSolid(t),e=this.AN.lineStyleDashed(t),h=s||e,r=this.AN.strokeFillSolid(t),o=this.AN.strokeFillLinearGradient(t),a=this.AN.strokeFillRadialGradient(t),l=this.AN.strokeFillPaletted(t),u=r||o||a||l&&["x","y"].includes(l.getLookUpProperty())&&l,d=this.Ii(),f=this.Ti(),A=this.Bo.M(),g=this.Bo.i,m=i.V();if(e&&this.dt instanceof Ws)return Tt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.aE.mV(this.dt),this.Au&&(this.vG=this.RR.nV(ei([d,f],this.dt._i()),!1,this.vG),this.Ya=c(n(d.x,d.y),n(f.x,f.y))),t||g){const t=this.ea()&&h&&u&&m>0,i=o?["gradient",o]:a?["gradient",a]:l?["lookup",l.getLookUpProperty(),l.lut]:"uniform";this.bG=t?{type:"triangulated",shader:this.RR.oz(_g["2D"],_g.Color({dataType:i}),_g.LineInstanced2D({axisWorldTranslation:jA(this.dt),normalSource:void 0}),this.SG?_g.AliasedEdge:void 0,e&&_g.StippleTextureInstanced),mousePickingShader:A?this.RR.oz(_g["2D"],_g.MousePicking,_g.LineInstanced2D({axisWorldTranslation:jA(this.dt),normalSource:void 0}),e&&_g.StippleTextureInstanced):void 0,geometry:Fm(this.RR,m),thickness:m,lineStyleSolid:s,lineStyleDashed:e,fillStyleSolid:r,fillStyleLinearGradient:o,fillStyleRadialGradient:a,fillStylePaletted:l}:void 0}if(a?this.DN=im(Kh(this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,a.getPosition(),a.getExtent(),a.getShape(),this.RR.$z()):o?this.LN=sm(Kh(this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,o.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),e){if(t||this.Au){const t=[0,0,Math.abs(f.x-d.x),Math.abs(f.y-d.y)];this.xG=this.RR.nV(t,!1,this.xG)}this.MG=this.RR.IO(e.getPattern())}else this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.MG=void 0;return this.fu(i),this.Au=!1,this.Bo.i=!1,this}zL(t){var i,s;const e=this.vG;if(!e)return this;const h=this.bG;if(!h)return this;const{fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a,lineStyleDashed:l,thickness:u}=h,c=1===t?null===(i=this.bG)||void 0===i?void 0:i.mousePickingShader:null===(s=this.bG)||void 0===s?void 0:s.shader;return c?(this.RR.jR(c).aV(c,((i,s,c,d)=>{if(this.RR.dV(i("uIsHighlighted"),1===t||2===t?0:this.zo).AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0),this.dt instanceof Gs||this.dt instanceof gd?this.RR.uV(i("uScale"),this.aE.fV()).uV(i("uDisp"),this.aE.AV()).uV(d("uScaleStart_highpart"),this.aE.VO()).uV(d("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ws&&this.RR.uV(d("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(d("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(d("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(d("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(i("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(i("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),1===t)this.RR.AR(i("uColor"),this.mN);else if(r)this.RR.AR(i("uColor"),r.getColor());else if(o){if(!this.DN)return!1;this.RR.mO(c,this.DN,o)}else if(n){if(!this.LN)return!1;this.RR.yO(c,this.LN,n)}else if(a){const t=QA(a,this,void 0);if(!t&&a.lut.percentageValues)return!1;this.RR.LO(c,a.lut,t)}if(l){if(!this.xG||!this.MG)return!1;Im.AG(this.RR,c,this.xG,s("aLengthSoFarA"),s("aLengthSoFarB"),2,0),this.RR.uV(i("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(d("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(i("uStippleScale"),l.getPatternScale()).cV(i("uStippleTexture"),this.MG.PO,1)}return Im.fG(this.dt._i(),this.RR,e,c,this.dt._i()?4:2,0),Im.zL(this.rN,h.geometry,c,this.SG&&1!==t,1===t,u,1),!0})),this):this}lN(t){return this.gN===t&&{}}dispose(){return super.dispose(),this.bG=void 0,this.vG&&(this.RR.yV(this.vG),this.vG=void 0),this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.MG=void 0,this}VR(){return this}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Pi(this.lu)}bl(){return Pi(this.lu)}}class Bm extends br{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this._G=[],this.wG=!1,this.CG=!1,this.kG=!1,this.TG=!1,this.aE=new fm,this.Ya=Gi,this.AN=ZA({lineStyleSolid:()=>he(this.lu)&&this.lu,lineStyleDashed:()=>fn(this.lu)&&this.lu,lineFillSolid:()=>{const t=this.lu.getFillStyle();return Y(t)&&t},lineFillRadialGradient:()=>{const t=this.lu.getFillStyle();return et(t)&&t},lineFillLinearGradient:()=>{const t=this.lu.getFillStyle();return nt(t)&&t},lineIndividualPointFill:()=>{const t=this.lu.getFillStyle();return $(t)&&t}}),this.rN=t,this.nN=i,this.FG=r,this.RR=t.oN(),this.SG=this.RR.eO,this.IG=t.Un.jn;const{color:n,id:o}=this.FG();this.mN=n,this.gN=o}zr(){const t=this.mu?void 0:this.FG(),i={ys:t=>this.PG(i,t),cs:t=>this.DG(i,t),Eg:(t,s)=>this.BG(i,t,s),AR:t=>this.LG(i,t),Pi:{x:0,y:0},Fi:{x:0,y:0},zo:0,EG:void 0,gN:null==t?void 0:t.id,mN:null==t?void 0:t.color};return this._G.push(i),i}Nt(){var t;return this._G.length=0,this.wG=!0,this.ji&&this.Tn&&(null===(t=this.us.Cn)||void 0===t?void 0:t.entity)===this&&this.Tn(this,void 0,this.us.Cn.collectionMember),this}zG(){return this._G.length}M(t){const i=this._G[t];return[i.Pi,i.Fi]}Ap(){return this._G}bd(t){var i;const s=this._G.indexOf(t);s>=0&&(this._G.splice(s,1),this.wG=!0,this.ji&&this.Tn&&(null===(i=this.us.Cn)||void 0===i?void 0:i.entity)===this&&this.Tn(this,void 0,this.us.Cn.collectionMember))}PG(t,i){if(i&&!this._G.includes(t))this._G.push(t);else if(!i){const i=this._G.indexOf(t);this._G.splice(i,1)}return this.kG=!0,t}DG(t,i){return t.zo=i,this.CG=!0,t}BG(t,i,s){return t.Pi=i,t.Fi=s,this.wG=!0,t}LG(t,i){return t.EG=i,this.TG=!0,t}Ps(){const t=this.Bo.M(),i=this.Bo.i,s=this.ra(),e=this.lu,h=this._G,r=this.CG,n=this.wG,o=this.kG,a=this.TG,l=this.AN.lineStyleSolid(s),u=this.AN.lineStyleDashed(s),c=l||u,d=this.AN.lineFillSolid(s),f=this.AN.lineIndividualPointFill(s),A=this.AN.lineFillRadialGradient(s),g=this.AN.lineFillLinearGradient(s),m=d||f||g||A,y=e.V(),p=u?"triangulated":e.getThickness()<0?"primitive":"triangulated";if(u&&this.dt instanceof Ws)return Tt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.aE.mV(this.dt);const S=n||o;if(S){const t=[];for(let i=0;i<h.length;i+=1){const s=h[i];t.push(s.Pi),t.push(s.Fi)}this.vG=this.RR.nV(ei(t,this.dt._i()),!1,this.vG),this.Ya=is(t)}if(s||i){const i=d?"uniform":f?"attribute":g?["gradient",g]:A?["gradient",A]:void 0,s=c&&m&&y>0&&i;this.bG=s?"triangulated"===p?{type:"triangulated",shader:this.RR.oz(_g["2D"],_g.Color({dataType:i}),_g.LineInstanced2D({axisWorldTranslation:jA(this.dt),normalSource:void 0,snapToNearestPixel:this.IG,ensureMinimumSegmentLength:void 0!==this.gu}),this.SG?_g.AliasedEdge:void 0,u&&_g.StippleTextureInstanced,_g.AttributeHighlight),mousePicking:t?{shader:this.RR.oz(_g["2D"],this.mu?_g.MousePicking:_g.MousePickingAttribute,_g.LineInstanced2D({axisWorldTranslation:jA(this.dt),normalSource:void 0,snapToNearestPixel:this.IG,ensureMinimumSegmentLength:void 0!==this.gu}),u&&_g.StippleTextureInstanced,_g.AttributeHighlight)}:void 0,geometry:Fm(this.RR,y,!1),thickness:y,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:d,fillStyleIndividual:f,fillStyleLinearGradient:g,fillStyleRadialGradient:A}:{type:"primitive",shader:this.RR.oz(_g["2D"],_g.Color({dataType:i}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0,snapToNearestPixel:this.IG}),_g.AttributeHighlight),mousePicking:t?{shader:this.RR.oz(_g["2D"],this.mu?_g.MousePicking:_g.MousePickingAttribute,_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0,snapToNearestPixel:this.IG}),_g.AttributeHighlight)}:void 0,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:d,fillStyleIndividual:f,fillStyleLinearGradient:g,fillStyleRadialGradient:A}:void 0}if(u){if(s||S){const t=new Float32Array(4*h.length);let i=0;for(let s=0;s<h.length;s+=1){const e=h[s].Pi,r=h[s].Fi;t[i]=0,t[i+1]=0,t[i+2]=Math.abs(r.x-e.x),t[i+3]=Math.abs(r.y-e.y),i+=4}this.xG=this.RR.nV(t,!1,this.xG)}this.MG=this.RR.IO(u.getPattern())}else this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.MG=void 0;if(S||r)if("triangulated"===p){const t=new Float32Array(h.length);let i=0;h.forEach((s=>{t[i]=s.zo,i+=1})),this.VG=this.RR.nV(t,!0,this.VG)}else{const t=new Float32Array(2*h.length);let i=0;h.forEach((s=>{for(let e=i;e<i+2;e+=2)t[e]=s.zo,t[e+1]=s.zo;i+=2})),this.VG=this.RR.nV(t,!1,this.VG)}if(f)if(a||S||s)if("triangulated"===p){const t=new Float32Array(4*h.length);let i=0;h.forEach((s=>{const e=s.EG||f.color;t[i]=e.r,t[i+1]=e.g,t[i+2]=e.b,t[i+3]=e.a,i+=4})),this.OG=this.RR.nV(t,!1,this.OG)}else{const t=new Float32Array(8*h.length);let i=0;h.forEach((s=>{const e=s.EG||f.color;for(let s=i;s<i+8;s+=4)t[s]=e.r,t[s+1]=e.g,t[s+2]=e.b,t[s+3]=e.a;i+=8})),this.OG=this.RR.nV(t,!1,this.OG)}else this.OG&&(this.RR.yV(this.OG),this.OG=void 0);if(t&&!this.mu){if(S)if("triangulated"===p){const t=new Float32Array(4*h.length);let i=0;h.forEach((s=>{var e,h,r,n;t[i+0]=(null===(e=s.mN)||void 0===e?void 0:e.r)||0,t[i+1]=(null===(h=s.mN)||void 0===h?void 0:h.g)||0,t[i+2]=(null===(r=s.mN)||void 0===r?void 0:r.b)||0,t[i+3]=(null===(n=s.mN)||void 0===n?void 0:n.a)||0,i+=4})),this.NG=this.RR.nV(t,!0,this.NG)}else{const t=new Float32Array(8*h.length);let i=0;h.forEach((s=>{var e,h,r,n;for(let o=i;o<i+4;o+=4)t[i+0]=(null===(e=s.mN)||void 0===e?void 0:e.r)||0,t[i+1]=(null===(h=s.mN)||void 0===h?void 0:h.g)||0,t[i+2]=(null===(r=s.mN)||void 0===r?void 0:r.b)||0,t[i+3]=(null===(n=s.mN)||void 0===n?void 0:n.a)||0;i+=8})),this.NG=this.RR.nV(t,!1,this.NG)}}else this.NG&&(this.RR.yV(this.NG),this.NG=void 0);return A?this.MN=im(this.Eo||this.Ya,this.dt,A.getPosition(),A.getExtent(),A.getShape(),this.RR.$z()):g?this._N=sm(this.Eo||this.Ya,this.dt,g.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.fu(e),this.CG=!1,this.kG=!1,this.wG=!1,this.TG=!1,this.Bo.i=!1,this}zL(t){var i;const s=this.vG,e=this.VG,h=this.NG;if(!s||!e)return this;const r=this.bG;if(!r)return this;const{type:n,fillStyleSolid:o,fillStyleIndividual:a,fillStyleLinearGradient:l,fillStyleRadialGradient:u,lineStyleDashed:c}=r,d=1===t?null===(i=r.mousePicking)||void 0===i?void 0:i.shader:r.shader;return d?(this.RR.jR(d).aV(d,((i,d,f,A)=>{if(this.dt instanceof Gs||this.dt instanceof gd?this.RR.uV(i("uScale"),this.aE.fV()).uV(i("uDisp"),this.aE.AV()).uV(A("uScaleStart_highpart"),this.aE.VO()).uV(A("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ws&&this.RR.uV(A("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(A("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(A("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(A("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(i("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(i("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.IG&&this.RR.uV(A("uViewportSizePx"),[this.us.oi().x*this.RR.$z(),this.us.oi().y*this.RR.$z()]),void 0!==this.gu&&this.RR.uV(i("uMinSegmentPixelVector"),[this.gu.x,this.gu.y]),this.RR.AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0),1===t)if(this.mu)this.RR.AR(i("uColor"),this.mN);else{if(!h)return!1;"triangulated"===n?this.RR.lV(h,1,{location:d("aColor"),size:4}):this.RR.HV(d("aColor"),h)}else if(o)this.RR.AR(i("uColor"),o.getColor());else if(a){if(!this.OG)return!1;this.RR.lV(this.OG,"triangulated"===n?1:void 0,{location:d("aColor"),size:4})}else if(u){if(!this.MN)return!1;this.RR.mO(f,this.MN,u)}else if(l){if(!this._N)return!1;this.RR.yO(f,this._N,l)}if(c){if(!this.xG||!this.MG)return!1;Im.mG(this.RR,f,this.xG,d("aLengthSoFarA"),d("aLengthSoFarB"),2,0),this.RR.uV(i("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(A("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(i("uStippleScale"),c.getPatternScale()).cV(i("uStippleTexture"),this.MG.PO,0)}if("triangulated"===n){const{geometry:i,thickness:h}=r;Im.gG(this.dt._i(),this.RR,s,f,this.dt._i()?4:2,0),this.RR.lV(e,1,{location:d("aIsHighlighted"),size:1}),Im.zL(this.rN,i,f,this.SG&&1!==t,1===t,h,this._G.length)}else Pm.gG(this.dt._i(),this.RR,s,f,this.dt._i()?4:2,0),this.RR.$V(d("aIsHighlighted"),e),Pm.pG(this.rN,this._G.length);return!0})),this):this}lN(t){if(t===this.gN)return{};const i=this._G.find((i=>i.gN===t));return!!i&&{collectionMember:i}}dispose(){return super.dispose(),this.bG=void 0,this.vG&&(this.RR.yV(this.vG),this.vG=void 0),this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.VG&&(this.RR.yV(this.VG),this.VG=void 0),this.NG&&(this.RR.yV(this.NG),this.NG=void 0),this.OG&&(this.RR.yV(this.OG),this.OG=void 0),this.MG=void 0,this}VR(){return this}cs(t){super.cs(t);for(const i of this._G)i.cs(t);return this}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Pi(this.lu)}bl(){return Pi(this.lu)}}class Lm{constructor(t,i){this.GG=!1,this.WG=!1,this.UG=!1,this.dt=t,this.YG=i,this.YG.Uo("DataPattern",(t=>{"ProgressiveX"!==t.pattern&&"RegressiveX"!==t.pattern||(this.GG="x"),"ProgressiveY"!==t.pattern&&"RegressiveY"!==t.pattern||(this.GG="y"),"RegressiveX"!==t.pattern&&"RegressiveY"!==t.pattern||(this.WG=!0),!0===t.regularProgressiveStep&&(this.UG=!0)}))}calculateUserDataPointsProgressiveRange(t){if(0===t.length)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:"x"===this.GG?t[0].x:t[0].y,end:"x"===this.GG?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.GG?"x"===this.GG?function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].x,t[0].x),e=Math.min(t[i-1].x,t[0].x);let h=t[0].y,r=t[0].y;for(let s=0;s<i;s+=1){const i=t[s];i.y>h&&(h=i.y),i.y<r&&(r=i.y)}return c(n(e,r),n(s,h))}return Gi}(t):function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].y,t[0].y),e=Math.min(t[i-1].y,t[0].y);let h=t[0].x,r=t[0].x;for(let s=0;s<i;s+=1){const i=t[s];i.x>h&&(h=i.x),i.x<r&&(r=i.x)}return c(n(r,e),n(h,s))}return Gi}(t):is(t)}calculateAvgStepBetweenDataPoints(t,i,s){return Math.abs(t-i)/(s-1)}}const Rm=Math.min(1,1.5);class Em extends Lm{constructor(t,i,s){super(t,i),this.HG=!1,this.$G={enabled:!1,totalDataPointsAtTime:0},this.XG=[],this.Ss=s,this.jG=t instanceof Gs?{type:"linear",scale:t}:t instanceof Ws?{type:"mixed",scale:t}:{type:"unknown"},this.YG.Uo("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.HG=!0)}))}ZG(t,i=!1){if(this.HG||!this.GG||"linear"!==this.jG.type)return!1;!1===i&&this.QG&&(clearTimeout(this.QG),this.QG=void 0);const s="x"===this.GG?this.jG.scale.x.ig:this.jG.scale.y.ig;if(!s)throw new Error("CP helper has no information about Axis state.");const e=t.length;if(e<2)return!1;const h=t[0],r=t[e-1],n=this.calculateAvgStepBetweenDataPoints("x"===this.GG?h.x:h.y,"x"===this.GG?r.x:r.y,e),o=this.jG.scale,a=Math.abs("x"===this.GG?o.Wi().x:o.Wi().y),l=a/n,u=Math.floor(l*Rm),c=u*n,d=Tt.performance.now(),f=!(d-s.ah<500)&&(s.ih?d-s.oh<1e3:d-s.sh<2e3||s.hh),A=e>2*this.$G.totalDataPointsAtTime;if(f&&!A)return this.QG=setTimeout((()=>this.JG(t)),1e3),!1;const g=u>=10,m=this.$G.enabled?this.$G.columnWidthAxis/a<1.5:void 0,y=this.$G.enabled&&u>this.$G.dataPointsPerColumn?u/this.$G.dataPointsPerColumn>=2:void 0;let p;!0===this.$G.enabled?m?y&&(p={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}):p=g?{enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}:{enabled:!1,totalDataPointsAtTime:e}:g&&(p={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e});const S=!1===i;return p?(S&&(this.$G=p),!0):(S&&(this.$G={...this.$G,totalDataPointsAtTime:e}),!1)}Qm(){this.KG=void 0,this.XG.length=0,this.QG&&(clearTimeout(this.QG),this.QG=void 0)}qG(t){if(0===t.length)return t;if(this.HG||!this.GG||"linear"!==this.jG.type||!this.$G.enabled)return t;let i;i=this.XG.length>0?ci(this.XG,t,{canReturnB:!0}):t;const s=i.length,e=[];let h,r,n=void 0===this.KG,o=-1,a=-1,l=0,u=0;if("x"!==this.GG||this.WG)if("x"===this.GG&&this.WG){const t=this.$G.columnWidthAxis;let c=this.KG?this.KG.x:i[0].x,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.x>=d?((!h||s.y>h.y)&&(h=s,o=f),(!r||s.y<r.y)&&(r=s,a=f),u=f):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,d=c-t,h=s,o=f,r=s,a=f,l=f,u=f)}}else if("y"!==this.GG||this.WG){if("y"===this.GG&&this.WG){const t=this.$G.columnWidthAxis;let c=this.KG?this.KG.y:i[0].y,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.y>=d?((!h||s.x>h.x)&&(h=s,o=f),(!r||s.x<r.x)&&(r=s,a=f),u=f):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,d=c-t,h=s,o=f,r=s,a=f,l=f,u=f)}}}else{const t=this.$G.columnWidthAxis;let c=this.KG?this.KG.y:i[0].y,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.y<=d?((!h||s.x>h.x)&&(h=s,o=f),(!r||s.x<r.x)&&(r=s,a=f),u=f):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,d=c+t,h=s,o=f,r=s,a=f,l=f,u=f)}}else{const t=this.$G.columnWidthAxis;let c=this.KG?this.KG.x:i[0].x,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.x<=d?((!h||s.y>h.y)&&(h=s,o=f),(!r||s.y<r.y)&&(r=s,a=f),u=f):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,d=c+t,h=s,o=f,r=s,a=f,l=f,u=f)}}if(h||r){const t=i.slice(l,u+1);this.XG=t}else this.XG.length=0;const c=e.length;return c>0&&(this.KG=e[c-1]),e}tW(t){if(this.GG&&"linear"===this.jG.type){const i="x"===this.GG?this.jG.scale.x.ig:this.jG.scale.y.ig;if(!i)throw new Error("CP helper has no information about Axis state.");if(i.Je===Ye.progressive||i.Je===Ye.regressive){const i=Math.abs("x"===this.GG?this.jG.scale.x.getInnerInterval():this.jG.scale.y.getInnerInterval());if(this.$G.enabled)return 2*i/this.$G.columnWidthAxis;const s=t.length,e=t[0],h=t[s-1];return i/this.calculateAvgStepBetweenDataPoints("x"===this.GG?e.x:e.y,"x"===this.GG?h.x:h.y,s)}}}iW(t,i,s){if(!this.GG)return i;const e=s.length;let h=Hh(s,t.min,this.GG,this.WG,0,e-1);void 0===h&&(h=this.WG?e-1:0);let r=Hh(s,t.max,this.GG,this.WG,0,e-1);return void 0===r&&(r=this.WG?0:e-1),1+Math.abs(r-h)}sW(){this.QG&&(clearTimeout(this.QG),this.QG=void 0)}JG(t){this.ZG(t,!0)&&this.Ss()}}class zm extends Lm{renderVisibleOnly(t,i){const s=this.dt.x.getInnerStart(),e=this.dt.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.dt.y.getInnerStart(),o=this.dt.y.getInnerEnd(),a=Math.min(n,o),l=Math.max(n,o);t.forEach(((t,s)=>{t.existingCoordinatesCount<=1||t.boundaries.max.x<h||t.boundaries.min.x>r||t.boundaries.max.y<a||t.boundaries.min.y>l||i(t)}))}}class Vm{constructor(t,i,s){this.eW=i,this.hW=s,this.rW=t,this.nW=[]}oW(t,i,s,e){const h=t.length;if(0===h)return;let r=t,n=h,o=this.rW[this.rW.length-1];do{const t=this.rW.length;let h;o||(o=this.aW(i,n)),o&&0==o.allocatedCoordinatesCount-o.existingCoordinatesCount&&(o=void 0);let a=0;if(this.hW&&t>0&&(void 0===o||0===o.existingCoordinatesCount)){const i=this.rW[t-1].lastDataPoint;i?(r.splice(0,0,i),a=1,n+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(o)h=Math.min(n,o.allocatedCoordinatesCount-o.existingCoordinatesCount),e(o,r.slice(0,h),h,a);else{const t=Math.ceil(i)+a;h=Math.min(t,n);const e={...s(t,r.slice(0,h),h,a),isDropped:!1};this.rW.push(e)}h>0&&(n>h?(r=r.slice(h),n=r.length):(r=[],n=0))}while(n>0);this.lW()}uW(t){const i=t,s=this.rW.indexOf(i);s>=0&&this.rW.splice(s,1),i.droppedTimestamp=Tt.performance.now(),this.nW.push(i)}cW(){this.rW.slice().forEach((t=>this.uW(t)))}dW(){this.rW.forEach((t=>this.eW(t))),this.nW.forEach((t=>this.eW(t))),this.rW.length=0,this.nW.length=0}aW(t,i){const s=2*t/3,e=4*t/3,h=this.nW.findIndex((t=>t.allocatedCoordinatesCount>=s&&t.allocatedCoordinatesCount<=e));if(h>=0){const t=this.nW[h];return this.nW.splice(h,1),this.rW.push(t),t}}lW(){if(this.nW.length>5){const t=Tt.performance.now();for(let i=0;i<this.nW.length-5;i+=1){const s=this.nW[i];(void 0===s.droppedTimestamp||t-s.droppedTimestamp>=1e4)&&(this.eW(s),this.nW.splice(i,1),i-=1)}}}}class Om extends Lm{fW(t,i){if(!i||"object"!=typeof i)return 0;const s=this.dt.x.getInnerStart(),e=this.dt.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.dt.y.getInnerStart(),o=this.dt.y.getInnerEnd(),a=Math.min(n,o),l=Math.max(n,o);if("maxDataPointCount"in i)return this.AW(t,i.maxDataPointCount,h,r,a,l);if("minDataPointCount"in i)return this.gW(t,i.minDataPointCount,h,r,a,l);if("progressiveDataCleaningThreshold"in i)return this.mW(t,i.progressiveDataCleaningThreshold,h,r,a,l);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(i)}`)}AW(t,i,s,e,h,r){if(void 0===i||i<=0)return 0;const n=t.reduce(((t,i)=>t+i.existingDataPointsCount),0);if(n<=i)return 0;let o=0,a=n;for(let s=0;s<t.length;s+=1){const e=t[s];a>i&&(o+=1,a-=e.existingDataPointsCount)}return o}mW(t,i,s,e,h,r){if(void 0===i||!this.GG)return 0;let n=0;for(let o=0;o<t.length;o+=1){const a=t[o],l=this.WG?"x"===this.GG?a.boundaries.min.x>e:a.boundaries.min.y>r:"x"===this.GG?a.boundaries.max.x<s:a.boundaries.max.y<h;if(!((this.WG?"x"===this.GG?a.boundaries.min.x>i:a.boundaries.min.y>i:"x"===this.GG?a.boundaries.max.x<i:a.boundaries.max.y<i)&&l&&a.existingCoordinatesCount>2))break;n+=1}return n}gW(t,i,s,e,h,r){if(void 0===i||0===i)return 0;let n=0,o=0;for(let a=t.length-1;a>=0;a-=1){const l=t[a];if(o>i)if(this.GG){if(this.WG?"x"===this.GG?l.boundaries.min.x>e:l.boundaries.min.y>r:"x"===this.GG?l.boundaries.max.x<s:l.boundaries.max.y<h){n=1+a;break}}else l.boundaries.max.x<s||l.boundaries.min.x>e||l.boundaries.max.y<h||l.boundaries.min.y>r?n+=1:n=0;o+=l.existingDataPointsCount}return n}yW(t,i){const s=t.reduce(((t,i)=>es(t,i.boundaries)),Gi);if(i&&"progressiveDataCleaningThreshold"in i&&i.progressiveDataCleaningThreshold){const t=i.progressiveDataCleaningThreshold;"x"!==this.GG||this.WG?"x"===this.GG&&this.WG?s.max.x=Math.min(s.max.x,t):"y"!==this.GG||this.WG?"y"===this.GG&&this.WG&&(s.max.y=Math.min(s.max.y,t)):s.min.y=Math.max(s.min.y,t):s.min.x=Math.max(s.min.x,t)}return s}}class Nm extends xr{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h),this.aE=new fm,this.QM=[],this.pW=new zm(this.dt,this),this.SW=new Em(this.dt,this,(()=>this.us.Ss())),this.vW=new Vm(this.QM,(t=>{t.coordsBuffer&&this.RR.yV(t.coordsBuffer),t.xG&&this.RR.yV(t.xG)}),!0),this.bW=new Om(this.dt,this),this.xW=0,this.MW=0,this._W=!1,this.AN=ZA({lineStyleSolid:()=>he(this.lu)&&this.lu,lineStyleDashed:()=>fn(this.lu)&&this.lu,strokeFillSolid:()=>{const t=this.lu.getFillStyle();return Y(t)&&t},strokeFillLinearGradient:()=>{const t=this.lu.getFillStyle();return nt(t)&&t},strokeFillRadialGradient:()=>{const t=this.lu.getFillStyle();return et(t)&&t},strokeFillPaletted:()=>{const t=this.lu.getFillStyle();return Z(t)&&t}}),this.nN=i,this.gN=r,this.mN=n,this.Un=o,this.bG={type:"none"},this.RR=t.oN(),this.rN=t,this.SG=this.RR.eO;const a=this.dt._i(),l=!0===(null==o?void 0:o.individualLookupValuesEnabled);let u,c,d,f=0;a||(u=f,f+=2),a&&(c=f,f+=4),l&&(d=f,f+=1);const A=((t,i)=>i?(i,s)=>((t,i)=>{if(!i){const i=t.length,s=new Float32Array(3*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=void 0!==i.value?i.value:0,h+=3}return s}const s=t.length,e=new Float32Array(5*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,e[h+4]=void 0!==s.value?s.value:0,h+=5}return e})(i,t):(i,s)=>ei(i,t))(a,l);this.wW={individualLookupValuesEnabled:l,attributesPerVertex:f,attributeOffsetCoordinateLowPrecision:u,attributeOffsetCoordinateHighPrecision:c,attributeOffsetLookUpValue:d,prepareRenderData:(t,i)=>A(t,this.lu.getFillStyle())}}kW(t,i,s){const e=new Float32Array(2*i);let h=0,r=s||t[0];for(let s=0;s<i;s+=1){const i=t[s];this.xW+=Math.abs(r.x-i.x),this.MW+=Math.abs(r.y-i.y),e[h]=this.xW,e[h+1]=this.MW,h+=2,r=i}return e}Ps(){const t=this.Qa,i=this.lu,s=this.ra(),e=this.$a,h=e.length,r=h>0,n=this.Bo.M(),o=this.Bo.i,a=this.AN.lineStyleSolid(s),l=this.AN.lineStyleDashed(s),u=a||l,c=u&&u.getThickness(),d=this.AN.strokeFillSolid(s),f=this.AN.strokeFillLinearGradient(s),A=this.AN.strokeFillRadialGradient(s),g=this.AN.strokeFillPaletted(s),m=d||f||A||g,y=this.wW.individualLookupValuesEnabled;if(l&&this.dt instanceof Ws)return Tt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;r&&(this.yu=ci(this.yu,e,{canReturnB:!0}),this.Ha+=h);let p=this.pu.i;const S=this.bW.fW(this.QM,this.pu.M());if(S>0){let t=0;for(let i=0;i<S;i+=1){const i=this.QM[0];t+=i.existingDataPointsCount,i.existingDataPointsCount=0,i.existingCoordinatesCount=0,i.jointPointsCount=0,i.boundaries=Gi,i.lastDataPoint=void 0,this.vW.uW(i)}this.yu=this.yu.slice(t),this.Ha=this.yu.length,p=!0}let v=e,b=!1;(this.SW.ZG(this.yu)||t)&&(b=!0),l&&!this._W?(b=!0,this._W=!0,this.vW.dW()):!l&&this._W&&(this.QM.forEach((t=>{t.xG&&(this.RR.yV(t.xG),t.xG=void 0)})),this._W=!1),b&&(this.SW.Qm(),this.QM.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.jointPointsCount=0,t.boundaries=Gi,t.lastDataPoint=void 0})),this.vW.cW(),v=this.yu,this.xW=0,this.MW=0);const x=this.SW.qG(v),M=x.length;if(M>0){let t=this.SW.tW(this.yu)||(this.Uo("ApplicationType",(t=>"InternalUI"===t.type))?this.Ha:1e5);M/t>10&&(t=M/10),this.vW.oW(x,t,((t,i,s,e)=>{const h=this.pW.calculateUserDataPointsBoundaries(i),r=this.SW.iW(h,s,this.yu)-e;return this.TW=i[s-1],{allocatedCoordinatesCount:t,existingDataPointsCount:r,existingCoordinatesCount:s,jointPointsCount:e,boundaries:h,coordsBuffer:this.RR.EV(t*this.wW.attributesPerVertex,this.wW.prepareRenderData(i,s)),lastDataPoint:i[s-1],xG:this._W?this.RR.EV(2*t,this.kW(i,s,this.TW)):void 0}}),((t,i,s,e)=>{const h=es(t.boundaries,this.pW.calculateUserDataPointsBoundaries(i)),r=this.SW.iW(h,t.existingCoordinatesCount+s,this.yu)-(t.jointPointsCount+e);this.RR.zV(t.coordsBuffer,t.existingCoordinatesCount*this.wW.attributesPerVertex,this.wW.prepareRenderData(i,s)),this._W&&t.xG&&this.RR.zV(t.xG,2*t.existingCoordinatesCount,this.kW(i,s,this.TW)),this.TW=i[s-1],t.jointPointsCount+=e,t.lastDataPoint=i[s-1],t.existingDataPointsCount=r,t.existingCoordinatesCount+=s,t.boundaries=h}))}if(p&&(this.Ya=this.bW.yW(this.QM,this.pu.M())),this.aE.mV(this.dt),A?this.DN=im(this.Eo||this.Ya,this.dt,A.getPosition(),A.getExtent(),A.getShape(),this.RR.$z()):f?this.LN=sm(this.Eo||this.Ya,this.dt,f.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),s||o){if(g&&"value"===g.getLookUpProperty()&&!y){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Tt.alert(t),new Error(t)}if(m&&u&&!1!==c){const t=-1===c?"primitive":"triangulated",i=f?["gradient",f]:A?["gradient",A]:g?["lookup",g.getLookUpProperty(),g.lut]:"uniform";this.bG="primitive"===t?{type:t,shader:this.RR.oz(_g["2D"],_g.Color({dataType:i}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0}),l&&_g.StippleTexture),mousePickingShader:n?this.RR.oz(_g["2D"],_g.MousePicking,_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0}),l&&_g.StippleTexture):void 0,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:A,fillStylePaletted:g}:"triangulated"===t?{type:t,shader:this.RR.oz(_g["2D"],_g.Color({dataType:i}),_g.LineInstanced2D({axisWorldTranslation:jA(this.dt),normalSource:void 0}),this.SG?_g.AliasedEdge:void 0,l&&_g.StippleTextureInstanced),mousePickingShader:n?this.RR.oz(_g["2D"],_g.MousePicking,_g.LineInstanced2D({axisWorldTranslation:jA(this.dt),normalSource:void 0}),l&&_g.StippleTextureInstanced):void 0,geometry:Fm(this.RR,c),thickness:c,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:A,fillStylePaletted:g}:{type:"none"}}else this.bG={type:"none"}}return this.MG=l?this.RR.IO(l.getPattern()):void 0,this.fu(i),this.Qa=!1,this.$a=[],this.Bo.i=!1,this.pu.i=!1,this}zL(t){const i=this.RR.gl,s=this.bG;if(!s||"none"===s.type)return this;const e=1===t?s.mousePickingShader:s.shader;if(!e)return this;const{lineStyleDashed:h,fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a}=s;return this.RR.jR(e).aV(e,((e,l,u,c)=>{let d=!1;if(this.RR.dV(e("uIsHighlighted"),1===t||2===t?0:this.zo).AR(e("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(e("uRenderEffectMask"),2===t?1:0),this.dt instanceof Gs||this.dt instanceof gd?this.RR.uV(e("uScale"),this.aE.fV()).uV(e("uDisp"),this.aE.AV()).uV(c("uScaleStart_highpart"),this.aE.VO()).uV(c("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ws&&this.RR.uV(c("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(c("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(c("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(c("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(e("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(e("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),1===t)this.RR.AR(e("uColor"),this.mN);else if(r)this.RR.AR(e("uColor"),r.getColor());else if(o){if(!this.DN)return!1;this.RR.mO(u,this.DN,o)}else if(n){if(!this.LN)return!1;this.RR.yO(u,this.LN,n)}else if(a){const t=QA(a,this,void 0);if(!t&&a.lut.percentageValues)return!1;this.RR.LO(u,a.lut,t)}return this.pW.renderVisibleOnly(this.QM,(r=>{const{coordsBuffer:n}=r;if(!n)return;i.bindBuffer(i.ARRAY_BUFFER,n);const o="triangulated"===s.type?Im.fG:Pm.fG;if(this.dt._i()||void 0===this.wW.attributeOffsetCoordinateLowPrecision?this.dt._i()&&void 0!==this.wW.attributeOffsetCoordinateHighPrecision&&o(!0,this.RR,n,u,this.wW.attributesPerVertex,this.wW.attributeOffsetCoordinateHighPrecision):o(!1,this.RR,n,u,this.wW.attributesPerVertex,this.wW.attributeOffsetCoordinateLowPrecision),h){if(!r.xG||!this.MG)return;"triangulated"===s.type?Im.AG(this.RR,u,r.xG,l("aLengthSoFarA"),l("aLengthSoFarB"),2,0):Pm.AG(this.RR,u,r.xG,l("aLengthSoFar"),2,0),this.RR.uV(e("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(c("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(e("uStippleScale"),h.getPatternScale()).cV(e("uStippleTexture"),this.MG.PO,1)}if(a&&"value"===a.lookUpProperty&&void 0!==this.wW.attributeOffsetLookUpValue&&1!==t)if("triangulated"===s.type){const t=l("aLookupValueA");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(t,1),i.enableVertexAttribArray(t);const s=l("aLookupValueB");i.vertexAttribPointer(s,1,i.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.wW.attributeOffsetLookUpValue+this.wW.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(s,1),i.enableVertexAttribArray(s)}else{const t=l("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),i.enableVertexAttribArray(t)}if("triangulated"===s.type){const{thickness:i}=s;Im.zL(this.rN,s.geometry,u,this.SG&&1!==t,1===t,i,r.existingCoordinatesCount-1)}else Pm.yG(this.rN,r.existingCoordinatesCount);d=!0})),i.bindBuffer(i.ARRAY_BUFFER,null),d})),this}lN(t){return this.gN===t&&{}}nl(t,i){return Array.isArray(t)||(t=[t]),this.$a=ci(this.$a,t,{canReturnB:!0}),this.Ya=es(this.Ya,i||i||this.pW.calculateUserDataPointsBoundaries(t)),this}Nt(){return super.Nt(),this.xW=0,this.MW=0,this.TW=void 0,this}dispose(){return super.dispose(),this.vW.dW(),this.SW.sW(),this.bG={type:"none"},this.MG=void 0,this}VR(){return this}Ux(t){this.al()>0&&this.Ps();const i=this.tl(),s=Gh(i,t,this.Za,this.Fl,this.Il,this.dt,this.engine.dt,this.Ya,this.pW.GG,this.pW.WG);return void 0!==s?i[s]:void 0}sw(t){this.al()>0&&this.Ps();const i=this.tl(),s=i.length;if(0===s)return;const e=this.Fl?1:0,h=s-(this.Il?2:1);if(this.Za===Oh.Nearest){let e,h,r=Oi;for(let n=0;n<s;n+=1){const s=At(i[n],this.dt,this.us.dt);if(void 0!==h){const i=Zi(h,s,t),n=(i.x-t.x)**2+(i.y-t.y)**2;n<r&&(r=n,e=i)}h=s}return void 0!==e?At(e,this.us.dt,this.dt):void 0}if("x"===this.pW.GG&&this.Za===Oh.NearestX||"y"===this.pW.GG&&this.Za===Oh.NearestY){const s=$h(i,At(t,this.us.dt,this.dt),this.pW.GG,this.pW.WG,e,h);return s?qi(i[s.a],i[s.b],s.lerpAmount):void 0}return this.Ux(t)}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Pi(this.lu)}bl(){return Pi(this.lu)}}class Gm extends em{constructor(t,i,s,e){super(t),this.dG=s,this.FW=i,this.IW=ei(i,!1),this.PW=i.length,this.wR=t.nV(this.IW);const h=is(this.FW);this.X=n(h.max.x-h.min.x,h.max.y-h.min.y),this.DW=e}BW(t){return t>1}Ky(t,i,s,e,h){return"object"==typeof e?i?this.RR.$V(t.attribute("aOffsetScale"),i,1).uV(t.uniform("uSizePixels"),[e.width,e.height]):this.RR.dV(t.uniform("uOffsetScale"),e.scale).uV(t.uniform("uSizePixels"),[e.width,e.height]):h?i?this.RR.$V(t.attribute("aOffsetPixels"),i,1):this.RR.dV(t.uniform("uOffsetPixels"),e):this.RR.dV(t.uniform("uPointSize"),e),h?this.RR.lV(this.wR,0,{location:t.attribute("aInstanceGeo"),size:2}).QV(this.dG,0,this.PW,s):this.RR.Ky(this.RR.gl.POINTS,s),this}kz(){this.RR.yV(this.wR)}}const Wm=(t,i=0)=>{const s=[n(-.5,-.5),n(.5,-.5),n(.5,.5),n(-.5,.5)];return new Gm(t,s,t.gl.TRIANGLE_FAN,i)},Um=(t,i=0)=>{const s=.05,e=[n(-.5,-.05),n(.5,-.05),n(.5,s),n(.5,s),n(-.5,s),n(-.5,-.05),n(-.05,-.5),n(s,-.5),n(s,.5),n(s,.5),n(-.05,.5),n(-.05,-.5)];return new Gm(t,e,t.gl.TRIANGLES,i)},Ym=(t,i,s)=>{if(mn(t))return Ym(zh.Square,i,s);let e=i._V.vz.get(t);if(t===zh.Circle){const t=s<=3?4:s<=5?8:s<=10?16:24;return e=i._V.bz.get(t)||((t,i,s=0)=>{const e=function(t=25){return Ed(n(0,0),0,360,.5,.5,t)[0]}(i);return new Gm(t,e,t.gl.TRIANGLE_FAN,s)})(i,t),i._V.bz.set(t,e),e}if(!e){switch(t){case zh.Triangle:e=((t,i=0)=>{const s=function(){const t=[],i=2/1.73205080757;return t.push(n(-i/2,.3333333333333333)),t.push(n(0,-.6666666666666666)),t.push(n(i/2,.3333333333333333)),t}();return new Gm(t,s,t.gl.TRIANGLES,i)})(i);break;case zh.Square:e=Wm(i);break;case zh.Plus:e=Um(i);break;case zh.Cross:e=Um(i,45);break;case zh.Diamond:e=Wm(i,45);break;case zh.Arrow:e=((t,i=0)=>{const s=.05,e=[n(-.05,-.5),n(s,-.5),n(s,.45),n(s,.45),n(-.05,.45),n(-.05,-.5),n(-.5,0),n(-.4,0),n(0,.4),n(0,.4),n(0,.5),n(-.5,0),n(.5,0),n(.4,0),n(0,.4),n(0,.4),n(0,.5),n(.5,0)];return new Gm(t,e,t.gl.TRIANGLES,i)})(i);break;case zh.Star:e=((t,i=0)=>new Gm(t,[{x:0,y:0},{x:0,y:.5},{x:.1,y:.1},{x:.5,y:.1},{x:.2,y:-.1},{x:.3,y:-.5},{x:0,y:-.25},{x:-.3,y:-.5},{x:-.2,y:-.1},{x:-.5,y:.1},{x:-.1,y:.1},{x:0,y:.5}],t.gl.TRIANGLE_FAN,i))(i);break;case zh.Minus:e=((t,i=0)=>{const s=.05,e=[n(-.5,-.05),n(.5,-.05),n(.5,s),n(.5,s),n(-.5,s),n(-.5,-.05)];return new Gm(t,e,t.gl.TRIANGLES,i)})(i);break;default:return Ti(0,"LightningChart JS unidentified point shape")}i._V.vz.set(t,e)}return e};class Hm extends or{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.aE=new fm,this.dN=c(o(Ni,Ni),o(Oi,Oi)),this.AN=ZA({pointStyleSolid:()=>Y(this.be)&&this.be,pointStyleRadialGradient:()=>et(this.be)&&this.be,pointStyleLinearGradient:()=>nt(this.be)&&this.be,pointStylePaletted:()=>Z(this.be)&&this.be,pointStyleIndividual:()=>$(this.be)&&this.be}),this.rN=t,this.nN=i,this.gN=r,this.mN=n,this.RR=t.oN()}Ps(){var t;const i=this.Bo.M(),s=this.Bo.i,e=this.$a,h=e.length,r=h>0,n=this.Na.M(),o=this.be,a=this.size.M(),l=this.Na.i||this.Aa.i,u=this.dt.Ni(),c=this.size.i||this.Na.i,d=this.Qa||e&&e.length>0,f=u||c,A=this.ta(),g=this.AN.pointStyleSolid(A),m=this.AN.pointStyleRadialGradient(A),y=this.AN.pointStyleLinearGradient(A),p=this.AN.pointStylePaletted(A),S=this.AN.pointStyleIndividual(A),v=g||m||y||p||S;if(r&&(this.Oa=ci(this.Oa,e,{canReturnB:!0}),this.Ha+=h),r||this.Qa){this.Ya=this.ja?es(this.Ya,this.ja):es(this.Ya,is(this.Oa));const t=ei(this.Oa,this.dt._i());this.LW=this.Ha,this.RW=this.RR.nV(t,!1,this.RW)}this.aE.mV(this.dt),o!==O?f&&(this.EW&&(this.EW=void 0),a>1||this.Ga.M()?a<=1&&!this.Ga.M()?this.dG=this.RR.gl.POINTS:(this.EW=Ym(n,this.RR,this.Ga.M()?25:a),this.dG=this.EW.dG):this.dG=this.RR.gl.POINTS):this.EW&&(this.EW=void 0);const b=(null===(t=this.EW)||void 0===t?void 0:t.DW)||0,x=this.Aa.M()+b;if(c||A||s||l){const t=this.Ga.M()?"attribute":"uniform",s=a<=1&&_g.PointSize(t),e=_g.VertexLocation({offset:a>1?{dataType:t,sizeUnit:"px",symmetric:!0,rotation:(this.Wa.M()||x%360!=0)&&{dataType:this.Wa.M()?"attribute":"uniform"}}:void 0,axisWorldTranslation:jA(this.dt),normalSource:void 0});this.cE=v?this.RR.oz(_g["2D"],s,e,g?_g.Color({dataType:"uniform"}):S?_g.Color({dataType:"attribute"}):p?_g.Color({dataType:["lookup",p.getLookUpProperty(),p.lut]}):m?_g.Color({dataType:["gradient",m]}):y?_g.Color({dataType:["gradient",y]}):void 0):void 0,this.EN=i&&v?this.RR.oz(_g["2D"],s,e,_g.MousePicking):void 0}if(d||A){const t=this.Oa.length;if($(o)&&this.LW&&this.LW>0){const i=o.getFallbackColor(),s=new Float32Array(4*t);for(let e=0;e<t;e+=1){const t=this.Oa[e];t.color?(s[4*e+0]=t.color.r,s[4*e+1]=t.color.g,s[4*e+2]=t.color.b,s[4*e+3]=t.color.a):(s[4*e+0]=i.r,s[4*e+1]=i.g,s[4*e+2]=i.b,s[4*e+3]=i.a)}this.zW=this.RR.nV(s,!0,this.zW)}else this.zW&&this.RR.yV(this.zW),this.zW=void 0;if(this.Ga.M()&&this.LW&&this.LW>0&&a>1){const i=new Float32Array(t);for(let s=0;s<t;s+=1){const t=this.Oa[s];t.size?i[s]=t.size:i[s]=a}this.VW=this.RR.nV(i,!0,this.VW)}else this.VW&&(this.RR.yV(this.VW),this.VW=void 0);if(this.Wa.M()&&this.LW&&this.LW>0&&a>1){const i=new Float32Array(2*t),s=vs(x),e=Math.sin(s),h=Math.cos(s);for(let s=0;s<t;s+=1){const t=this.Oa[s];if(t.rotation){const e=vs(t.rotation+b);i[2*s+0]=Math.sin(e),i[2*s+1]=Math.cos(e)}else i[2*s+0]=e,i[2*s+1]=h}this.OW=this.RR.nV(i,!0,this.OW)}else this.OW&&(this.RR.yV(this.OW),this.OW=void 0);if(this.Ua.M()&&this.LW&&this.LW>0){const i=new Float32Array(t);for(let s=0;s<t;s+=1){const t=this.Oa[s];"value"in t&&void 0!==t.value&&null!==t.value?i[s]=t.value:i[s]=-34028234663852886e22}this.NW=this.RR.nV(i,!0,this.NW)}else this.NW&&(this.RR.yV(this.NW),this.NW=void 0);this.ha(this.be)}if(et(o)?this.MN=im(Kh(this.Eo||this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,o.getPosition(),o.getExtent(),o.getShape(),this.RR.$z()):nt(o)?this._N=sm(Kh(this.Eo||this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,o.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),d&&(this.Ya&&d&&(this.dN=Kh(this.Ya,{x:a,y:a},this.dt)),this.$a=[],this.Xa=0,this.ja=Gi),void 0===this.Ja&&p&&"value"===p.lookUpProperty&&p.lut.percentageValues){let t=Ni,i=Oi;for(let s=0;s<this.Oa.length;s+=1){const e=this.Oa[s];void 0!==e.value&&e.value<i&&(i=e.value),void 0!==e.value&&e.value>t&&(t=e.value)}this.Ja={min:i,max:t}}return this.ia=o,this.Na.i=!1,this.size.i=!1,this.Aa.i=!1,this.Bo.i=!1,this.Qa=!1,this}zL(t){const i=1===t?this.EN:this.cE,s=this.RW,e=this.LW;return i&&s&&e&&(this.RR.jR(i),this.RR.aV(i,((i,h,r,n)=>{var o;if(this.dt instanceof Gs||this.dt instanceof gd?this.RR.uV(i("uScale"),this.aE.fV()).uV(i("uDisp"),this.aE.AV()).uV(n("uScaleStart_highpart"),this.aE.VO()).uV(n("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ws&&this.RR.uV(n("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(n("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(n("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(n("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(i("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(i("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.RR.vO(r,s,this.dt._i(),this.EW?1:void 0).dV(i("uIsHighlighted"),1===t||2===t?0:this.zo).AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0).dV(n("uDevicePixelRatio"),this.RR.$z()),this.EW){const t=h("aInstanceGeo");this.RR.GV(t,this.EW.wR).UV(t,0)}if(1===t)this.RR.AR(i("uColor"),this.mN);else if(Y(this.be))this.RR.AR(i("uColor"),this.be.getColor());else if($(this.be)&&this.zW){const t=h("aColor");this.RR.HV(t,this.zW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(t,1)}else if(Z(this.be)){if("value"===this.be.getLookUpProperty()&&this.NW){const t=h("aLookupValue");this.RR.$V(t,this.NW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(t,1)}const t=QA(this.be,this,this.Ja);if(!t&&this.be.lut.percentageValues)return!1;this.RR.LO(r,this.be.lut,t)}else if(et(this.be)){if(!this.MN)return!1;this.RR.mO(r,this.MN,this.be)}else if(nt(this.be)){if(!this._N)return!1;this.RR.yO(r,this._N,this.be)}if(this.VW&&this.dG!==this.RR.gl.POINTS){const t=h("aOffsetPixels");this.RR.$V(t,this.VW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(t,1)}else if(this.dG!==this.RR.gl.POINTS){const t=i("uOffsetPixels");this.RR.dV(t,this.size.M())}const a=((null===(o=this.EW)||void 0===o?void 0:o.DW)||0)+this.Aa.M();if(this.OW&&this.dG!==this.RR.gl.POINTS){const t=h("aRot");this.RR.GV(t,this.OW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(t,1)}else if(this.dG!==this.RR.gl.POINTS&&a%360!=0){const t=vs(a),s=Math.sin(t),e=Math.cos(t);this.RR.uV(i("uRot"),[s,e])}if(this.dG===this.RR.gl.POINTS)this.RR.dV(i("uPointSize"),this.size.M());else{const t={x:2/this.us.oi().x,y:2/this.us.oi().y};this.RR.uV(i("uRatioPxClip"),[t.x,t.y])}let l=!1;return this.dG===this.RR.gl.POINTS?(this.RR.Ky(this.dG,e),l=!0):this.EW&&(this.RR.QV(this.dG,0,this.EW.PW,e),l=!0),l}))),this}lN(t){return this.gN===t&&{}}Hc(t){this.al()>0&&this.Ps();const i=this.tl(),s=Gh(i,t,this.Za,!1,!1,this.dt,this.us.dt,this.Ya,void 0,void 0);return void 0!==s?i[s]:void 0}Ce(t){return super.Ce(t)}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return this.Ga.M()?25:this.size.M()}bl(){return this.Ga.M()?25:this.size.M()}VR(){return this.RW&&(this.RR.yV(this.RW),this.RW=void 0),this.EW&&(this.EW=void 0),this.zW&&(this.RR.yV(this.zW),this.zW=void 0),this.OW&&(this.RR.yV(this.OW),this.OW=void 0),this.NW&&(this.RR.yV(this.NW),this.NW=void 0),this}}class $m extends hr{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.bG={fill:void 0,border:void 0},this.aE=new fm,this.Ya=Gi,this.GW=!1,this.WW=!1,this.UW=!1,this.YW=!1,this.HW=!1,this.Sd=[],this.AN=ZA({polygonStyleSolid:()=>Y(this.be)&&this.be,polygonStyleImage:()=>ln(this.be)&&this.be,polygonStyleRadialGradient:()=>et(this.be)&&this.be,polygonStyleLinearGradient:()=>nt(this.be)&&this.be,polygonStylePaletted:()=>Z(this.be)&&this.be,polygonStyleIndividual:()=>$(this.be)&&this.be,lineStyleSolid:()=>he(this.xe)&&this.xe,lineStyleFilled:()=>{const t=this.xe&&this.xe.getFillStyle();return Y(t)&&t}}),this.rN=t,this.nN=i,this.FG=r,this.RR=t.oN(),this.SG=this.RR.eO}zr(){const t=this.FG(),i={ys:t=>this.PG(i,t),cs:t=>this.DG(i,t),pl:t=>this.$W(i,t),Yb:t=>this.XW(i,t),AR:t=>this.LG(i,t),Oa:[],u:void 0,jW:void 0,zo:0,ZW:!0,gN:t.id,mN:t.color};return this.Sd.push(i),i}Nt(){var t;return this.Sd.length=0,this.GW=!0,this.ji&&this.Tn&&(null===(t=this.us.Cn)||void 0===t?void 0:t.entity)===this&&this.Tn(this,void 0,this.us.Cn.collectionMember),this}Ap(){return this.Sd}bd(t){var i;const s=this.Sd.indexOf(t);s>=0&&(this.Sd.splice(s,1),this.HW=!0,this.ji&&this.Tn&&(null===(i=this.us.Cn)||void 0===i?void 0:i.entity)===this&&this.us.Cn.collectionMember===t&&this.Tn(this,void 0,this.us.Cn.collectionMember))}PG(t,i){var s;return t.ZW=i,this.HW=!0,this.ji&&this.Tn&&(null===(s=this.us.Cn)||void 0===s?void 0:s.entity)===this&&this.us.Cn.collectionMember===t&&this.Tn(this,void 0,this.us.Cn.collectionMember),t}DG(t,i){return t.zo=i,this.YW=!0,t}$W(t,i){return t.Oa=i,this.GW=!0,t}XW(t,i){return t.u=i,this.WW=!0,t}LG(t,i){return t.jW=null==i?void 0:i.toUint32(),this.UW=!0,t}Ps(){const t=this.Bo.M(),i=this.Bo.i,s=this.ta(),h=this.YW,r=this.GW,n=this.WW,o=this.UW,a=this.HW,l=this.xe,u=this.ra(),c=this.Sd.filter((t=>t.ZW&&t.Oa.length>0));if(this.aE.mV(this.dt),(r||a)&&(this.Ya=es(...c.map((t=>is(t.Oa))))),r||a){const t=ei(c.map((t=>[...t.Oa,t.Oa[0],{x:Number.NaN,y:Number.NaN}])).flat(),this.dt._i()),i=this.dt._i()?4:2;this.vG=this.RR.nV(t,!1,this.vG);let s=[];c.reduce(((h,r)=>{const n=h,o=(r.Oa.length+1)*i,a=new Float32Array(t.buffer,n,o),l=e(a,void 0,i),u=h/(Float32Array.BYTES_PER_ELEMENT*i);for(let t=0;t<l.length;t+=1)l[t]+=u;return s=ci(s,l,{canReturnB:!0}),n+(o+1*i)*Float32Array.BYTES_PER_ELEMENT}),0);const h=new Uint32Array(s);this.QW=this.RR.OV(h,this.QW),this.JW=h.length,this.KW=t.length/i-1}const d=this.AN.polygonStyleSolid(s),f=this.AN.polygonStylePaletted(s),A=this.AN.polygonStyleIndividual(s),g=this.AN.polygonStyleRadialGradient(s),m=this.AN.polygonStyleLinearGradient(s),y=this.AN.polygonStyleImage(s),p=d||f||m||g||y||A,S=this.AN.lineStyleSolid(u),v=this.AN.lineStyleFilled(u),b=v,x=S&&Math.max(S.getThickness(),0);if((s||u||i)&&(this.bG.fill=p?{shader:this.RR.oz(_g["2D"],d&&_g.Color({dataType:"uniform"}),m&&_g.Color({dataType:["gradient",m]}),g&&_g.Color({dataType:["gradient",g]}),f&&_g.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),A&&_g.Color({dataType:"attribute"}),y&&_g.Color({dataType:["image",y]}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0}),_g.AttributeHighlight),mousePicking:t?{shader:this.RR.oz(_g["2D"],_g.MousePickingAttribute,_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0}),_g.AttributeHighlight)}:void 0,fillStyleSolid:d,fillStyleLinearGradient:m,fillStyleRadialGradient:g,fillStylePaletted:f,fillStyleImage:y,fillStyleIndividual:A}:void 0,this.bG.border=S&&b&&"number"==typeof x&&0!==x?{shader:this.RR.oz(_g["2D"],_g.Color({dataType:"uniform"}),_g.LineInstanced2D({axisWorldTranslation:jA(this.dt),normalSource:void 0}),this.SG?_g.AliasedEdge:void 0,_g.AttributeHighlight),geometry:Fm(this.RR,x),mousePicking:t?{shader:this.RR.oz(_g["2D"],_g.MousePickingAttribute,_g.LineInstanced2D({axisWorldTranslation:jA(this.dt),normalSource:void 0}),_g.AttributeHighlight)}:void 0,fillStyleSolid:v,thickness:x}:void 0),h||r){const t=c.reduce(((t,i)=>t+i.Oa.length+2),0),i=new Float32Array(t);let s=0;c.forEach((t=>{const e=t.Oa.length+2;for(let h=s;h<s+e;h+=1)i[h]=t.zo;s+=e})),this.qW=this.RR.nV(i,!0,this.qW)}if(t){if(r){const t=c.reduce(((t,i)=>t+i.Oa.length+2),0),i=new Float32Array(4*t);let s=0;c.forEach((t=>{const e=t.Oa.length+2;for(let h=s;h<s+4*e;h+=4)i[h]=t.mN.r,i[h+1]=t.mN.g,i[h+2]=t.mN.b,i[h+3]=t.mN.a;s+=4*e})),this.tU=this.RR.nV(i,!1,this.tU)}}else this.tU&&(this.RR.yV(this.tU),this.tU=void 0);if(n||r&&f&&"value"===f.getLookUpProperty()){const t=c.reduce(((t,i)=>t+i.Oa.length+2),0),i=new Float32Array(t);let s=0;const e={min:Oi,max:Ni};c.forEach((t=>{const h=void 0!==t.u?t.u:-34028234663852886e22,r=t.Oa.length+2;for(let t=s;t<s+r;t+=1)i[t]=h;s+=r,e.min=Math.min(e.min,h),e.max=Math.max(e.max,h)})),this.iU=e,this.sU=this.RR.nV(i,!1,this.sU)}if(o||r&&A){const t=c.reduce(((t,i)=>t+i.Oa.length+2),0),i=new Uint32Array(t);let s=0;const e=A?A.getFallbackColor().toUint32():T.toUint32();c.forEach((t=>{const h=void 0!==t.jW?t.jW:e,r=t.Oa.length+2;for(let t=s;t<s+r;t+=1)i[t]=h;s+=r})),this.eU=this.RR.nV(i,!1,this.eU,Uint32Array)}return g?this.MN=im(this.Eo||this.Ya,this.dt,g.getPosition(),g.getExtent(),g.getShape(),this.RR.$z()):m?this._N=sm(this.Eo||this.Ya,this.dt,m.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.hU=this.RR.RO(this,this.hU,y,void 0,r||a||this.dt.Ni(),((t,i,s)=>this.rU(t,i,s,c))),this.YW=!1,this.HW=!1,this.GW=!1,this.WW=!1,this.UW=!1,this.Bo.i=!1,this.ha(this.be),this.aa(l),this}zL(t){var i,s;const{fill:e,border:h}=this.bG,r=this.vG,n=this.qW,o=this.tU;if(!r||!n)return this;if(e){const{fillStyleSolid:s,fillStyleLinearGradient:h,fillStyleRadialGradient:a,fillStylePaletted:l,fillStyleImage:u,fillStyleIndividual:c}=e,d=this.QW,f=this.JW,A=1===t?null===(i=e.mousePicking)||void 0===i?void 0:i.shader:e.shader;if(!A||!r||!d||void 0===f)return this;this.RR.jR(A).aV(A,((i,e,A,g)=>{if(this.dt instanceof Gs||this.dt instanceof gd?this.RR.uV(i("uScale"),this.aE.fV()).uV(i("uDisp"),this.aE.AV()).uV(g("uScaleStart_highpart"),this.aE.VO()).uV(g("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ws&&this.RR.uV(g("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(g("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(g("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(g("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(i("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(i("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.RR.vO(A,r,this.dt._i(),void 0).XV(d).$V(e("aIsHighlighted"),n).AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0),1===t){if(!o)return!1;this.RR.HV(e("aColor"),o)}else if(s)this.RR.AR(i("uColor"),s.getColor());else if(a){if(!this.MN)return!1;this.RR.mO(A,this.MN,a)}else if(h){if(!this._N)return!1;this.RR.yO(A,this._N,h)}else if(l){const t=QA(l,this,this.iU);if(!t&&l.lut.percentageValues)return!1;if(this.RR.LO(A,l.lut,t),"value"===l.getLookUpProperty()){if(!this.sU)return!1;this.RR.$V(e("aLookupValue"),this.sU)}}else if(u){if(!this.hU)return!1;this.RR.AR(g("uColor"),u.getSurroundingColor()).cV(i("uColorTexture"),this.hU.texture.Gz()||this.hU.sourceMissingTexture,0).lV(this.hU.texCoordsBuffer,void 0,{location:e("aTextureCoord"),size:2}).LV(u.fitMode)}else if(c){if(!this.eU)return!1;const t=e("aColor");this.RR.gl.bindBuffer(this.RR.gl.ARRAY_BUFFER,this.eU),this.RR.gl.vertexAttribPointer(t,4,this.RR.gl.UNSIGNED_BYTE,!0,0,0),this.RR.gl.enableVertexAttribArray(t)}return this.RR.ZV(f,void 0,void 0,this.RR.gl.UNSIGNED_INT),!0}))}if(h){const{geometry:i,fillStyleSolid:e,thickness:a}=h,l=this.KW,u=1===t?null===(s=h.mousePicking)||void 0===s?void 0:s.shader:h.shader;if(!u||!r||!l)return this;this.RR.jR(u).aV(u,((s,h,u,c)=>{if(this.dt instanceof Gs||this.dt instanceof gd?this.RR.uV(s("uScale"),this.aE.fV()).uV(s("uDisp"),this.aE.AV()).uV(c("uScaleStart_highpart"),this.aE.VO()).uV(c("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ws&&this.RR.uV(c("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(c("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(c("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(c("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(s("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(s("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.RR.lV(n,1,{location:h("aIsHighlighted"),size:1}).AR(s("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(s("uRenderEffectMask"),2===t?1:0),1===t){if(!o)return!1;this.RR.lV(o,1,{location:h("aColor"),size:4})}else e&&this.RR.AR(s("uColor"),e.getColor());return Im.fG(this.dt._i(),this.RR,r,u,this.dt._i()?4:2,0),Im.zL(this.rN,i,u,this.SG&&1!==t,1===t,a,l),!0}))}return this}rU(t,i,s,e){const h=At({x:this.Ya.min.x,y:this.Ya.min.y},this.dt,this.us.dt),r=At({x:this.Ya.max.x,y:this.Ya.max.y},this.dt,this.us.dt),n={x:Math.abs(h.x-r.x),y:Math.abs(h.y-r.y)},o=nm(t,i,n.x,n.y,s),a=o[1],l=o[4],u=o[6],c=o[7],d=e.reduce(((t,i)=>t+i.Oa.length+2),0),f=new Float32Array(2*d),A=this.Ya.max.x-this.Ya.min.x,g=this.Ya.max.y-this.Ya.min.y,m=l-u,y=c-a;let p=0;for(const t of e){for(const i of t.Oa){const t=u+m*((i.x-this.Ya.min.x)/A),s=a+y*((i.y-this.Ya.min.y)/g);f[p]=t,f[p+1]=s,p+=2}const i=u+m*((t.Oa[0].x-this.Ya.min.x)/A),s=a+y*((t.Oa[0].y-this.Ya.min.y)/g);f[p]=i,f[p+1]=s,p+=2,f[p]=Number.NaN,f[p+1]=Number.NaN,p+=2}return f}lN(t){const i=this.Sd.find((i=>i.gN===t));return!!i&&{collectionMember:i}}VR(){return this.QW&&(this.RR.yV(this.QW),this.QW=void 0),this.vG&&(this.RR.yV(this.vG),this.vG=void 0),this.qW&&(this.RR.yV(this.qW),this.qW=void 0),this.tU&&(this.RR.yV(this.tU),this.tU=void 0),this.sU&&(this.RR.yV(this.sU),this.sU=void 0),this.eU&&(this.RR.yV(this.eU),this.eU=void 0),this.bG={fill:void 0,border:void 0},this.hU=this.RR.EO(this,this.hU),this}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Pi(this.xe)}bl(){return Pi(this.xe)}}class Xm extends ar{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.aE=new fm,this.nU=Gi,this.AN=ZA({fillStyleSolid:()=>Y(this.be)&&this.be,fillStyleRadialGradient:()=>et(this.be)&&this.be,fillStyleLinearGradient:()=>nt(this.be)&&this.be,fillStyleImage:()=>ln(this.be)&&this.be,strokeStyleSolid:()=>he(this.xe)&&this.xe,strokeFillSolid:()=>{const t=this.xe.getFillStyle();return Y(t)&&t},strokeFillLinearGradient:()=>{const t=this.xe.getFillStyle();return nt(t)&&t},strokeFillRadialGradient:()=>{const t=this.xe.getFillStyle();return et(t)&&t}}),this.rU=(t,i,s)=>{const e=At(this.Fa(),this.dt,this.us.dt),h=fs(At(ds(this.Fa(),this.oi()),this.dt,this.us.dt),e);return nm(t,i,h.x,h.y,s)},this.rN=t,this.nN=i,this.gN=r,this.mN=n,this.RR=t.oN(),this.nN=i}Ps(){super.Ps();const t=this.Bo.M(),i=this.ta(),s=this.ua.i||this.X.i||this.Aa.i||this.ma.i,e=this.xe,h=this.ra(),r=e.getThickness(),o=this.Aa.M();this.aE.mV(this.dt);const a=this.dt.Ni();if(s){const t=this.X.M();this.Oa=function(t,i,s,e,h){const r=((t,i,s)=>[t,n(t.x+i,t.y),n(t.x+i,t.y+s),n(t.x,t.y+s)])(t,i,s);if(0!==e||e%360!=0){const t=e*Math.PI/180;r[0]=ns(r[0],h,t),r[1]=ns(r[1],h,t),r[2]=ns(r[2],h,t),r[3]=ns(r[3],h,t)}return r}(this.ua.M(),t.x,t.y,o,this.ma.M());const i=ei(this.Oa,this.dt._i());this.SN=this.RR.nV(i,!1,this.SN),this.bN=this.Oa.length,this.nU=is(this.Oa)}const l=this.AN.fillStyleSolid(i),u=this.AN.fillStyleRadialGradient(i),c=this.AN.fillStyleLinearGradient(i),d=this.AN.fillStyleImage(i),f=l||u||c||d;i&&(this.wN=f?this.RR.oz(_g["2D"],l&&_g.Color({dataType:"uniform"}),c&&_g.Color({dataType:["gradient",c]}),u&&_g.Color({dataType:["gradient",u]}),d&&_g.Color({dataType:["image",d]}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0),u?this.MN=im(this.Eo||this.nU,this.dt,u.getPosition(),u.getExtent(),u.getShape(),this.RR.$z()):c?this._N=sm(this.Eo||this.nU,this.dt,c.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.hU=this.RR.RO(this,this.hU,d,void 0,a||s,this.rU);const A=this.AN.strokeStyleSolid(h),g=this.AN.strokeFillSolid(h),m=this.AN.strokeFillLinearGradient(h),y=this.AN.strokeFillRadialGradient(h),p=A,S=g||m||y;if(p&&(s||h||a&&1!==r)){if(1===r||-1===r)[this.CN,this.oU]=[this.Oa,void 0];else{const t=this.dt;[this.CN,this.oU]=t instanceof Ws?((t,i,s)=>{const e=t[0],h=t[1],r=t[2],n=t[3],o=i/2;return[[s.Ui(e,h,o,-o),s.Ui(h,e,-o,-o),s.Ui(n,r,-o,-o),s.Ui(r,n,o,-o),s.Ui(e,h,-o,o),s.Ui(h,e,o,o),s.Ui(n,r,o,o),s.Ui(r,n,-o,o)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Oa,r,t):((t,i,s)=>{const e=t[0],h=t[1],r=t[2],o=t[3],a=n(i.x*s*.5,i.y*s*.5),l=as(os(h,e)),u=as(os(o,e)),c=ms(l),d=ms(u);return[[ds(e,ds(cs(c,a.x),cs(d,a.y))),ds(h,ds(cs(l,a.x),cs(d,a.y))),ds(o,ds(cs(c,a.x),cs(u,a.y))),ds(r,ds(cs(l,a.x),cs(u,a.y))),ds(e,ds(cs(l,a.x),cs(u,a.y))),ds(h,ds(cs(c,a.x),cs(u,a.y))),ds(o,ds(cs(l,a.x),cs(d,a.y))),ds(r,ds(cs(c,a.x),cs(d,a.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Oa,t.Wi(),r)}this.TN=this.RR.nV(ei(this.CN,this.dt._i()),!1,this.TN),this.oU?(this.uG=this.RR.OV(new Uint16Array(this.oU),this.uG),this.kN=this.oU.length):(this.uG&&this.RR.yV(this.uG),this.uG=void 0,this.kN=this.CN.length)}return h&&(this.RN=p&&S?this.RR.oz(_g["2D"],_g.Color({dataType:y?["gradient",y]:m?["gradient",m]:"uniform"}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0),y?this.DN=im(this.nU,this.dt,y.getPosition(),y.getExtent(),y.getShape(),this.RR.$z()):m?this.LN=sm(this.nU,this.dt,m.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),this.EN=t&&f?this.EN||this.RR.oz(_g["2D"],_g.Color({dataType:"uniform"}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0,this.zN=t&&this.xe!==at?this.zN||this.RR.oz(_g["2D"],_g.Color({dataType:"uniform"}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0,this.ha(this.be),this.aa(e),this.ua.i=!1,this.Aa.i=!1,this.X.i=!1,this.ma.i=!1,this}lN(t){return this.gN===t&&{}}zL(t){const i=1===t?this.EN:this.wN,s=this.SN,e=this.bN,h=this.AN.fillStyleSolid(!1),r=this.AN.fillStyleRadialGradient(!1),n=this.AN.fillStyleLinearGradient(!1),o=this.AN.fillStyleImage(!1);i&&s&&e&&this.be!==O&&(this.RR.jR(i),this.RR.aV(i,((i,a,l,u)=>{if(this.dt instanceof Gs||this.dt instanceof gd?this.RR.uV(i("uScale"),this.aE.fV()).uV(i("uDisp"),this.aE.AV()).uV(u("uScaleStart_highpart"),this.aE.VO()).uV(u("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ws&&this.RR.uV(u("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(u("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(u("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(u("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(i("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(i("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),1===t)this.RR.AR(i("uColor"),this.mN);else if(h)this.RR.AR(i("uColor"),h.getColor());else if(r){if(!this.MN)return!1;this.RR.mO(l,this.MN,r)}else if(n){if(!this._N)return!1;this.RR.yO(l,this._N,n)}else if(o){if(!this.hU)return!1;const t=this.hU&&this.hU.texture.Gz();this.RR.AR(u("uColor"),o.getSurroundingColor()).cV(i("uColorTexture"),t||this.hU.sourceMissingTexture,0).lV(this.hU.texCoordsBuffer,void 0,{location:a("aTextureCoord"),size:2}).LV(o.fitMode)}return this.RR.dV(i("uIsHighlighted"),1===t||2===t?0:this.zo).AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0).vO(l,s,this.dt._i(),void 0).Ky(this.RR.gl.TRIANGLE_FAN,e),!0})));const a=1===t?this.zN:this.RN,l=this.AN.strokeStyleSolid(!1),u=this.AN.strokeFillSolid(!1),c=this.AN.strokeFillLinearGradient(!1),d=this.AN.strokeFillRadialGradient(!1),f=this.TN;return a&&f&&l&&(this.RR.jR(a),this.RR.aV(a,((i,s,e,h)=>{if(this.dt instanceof Gs||this.dt instanceof gd?this.RR.uV(i("uScale"),this.aE.fV()).uV(i("uDisp"),this.aE.AV()).uV(h("uScaleStart_highpart"),this.aE.VO()).uV(h("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ws&&this.RR.uV(h("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(h("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(h("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(h("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(i("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(i("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),1===t)this.RR.AR(i("uColor"),this.mN);else if(u)this.RR.AR(i("uColor"),u.getColor());else if(d){if(!this.DN)return!1;this.RR.mO(e,this.DN,d)}else if(c){if(!this.LN)return!1;this.RR.yO(e,this.LN,c)}return this.RR.dV(i("uIsHighlighted"),1===t||2===t?0:this.zo).AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0).vO(e,f,this.dt._i(),void 0),this.uG?this.RR.XV(this.uG).ZV(this.kN):this.RR.Ky(this.RR.gl.LINE_LOOP,this.kN),!0}))),this}VR(){return this.uG&&(this.RR.yV(this.uG),this.uG=void 0),this.SN&&(this.RR.yV(this.SN),this.SN=void 0),this.TN&&(this.RR.yV(this.TN),this.TN=void 0),this.hU=this.RR.EO(this,this.hU),this.wN=void 0,this.RN=void 0,this.EN=void 0,this.zN=void 0,this}bt(){return Math.max(this.ua.M().x,this.ua.M().x+this.X.M().x)}vt(){return Math.min(this.ua.M().x,this.ua.M().x+this.X.M().x)}Mt(){return Math.max(this.ua.M().y,this.ua.M().y+this.X.M().y)}xt(){return Math.min(this.ua.M().y,this.ua.M().y+this.X.M().y)}vl(){return Pi(this.xe)}bl(){return Pi(this.xe)}}class jm extends ur{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.aE=new fm,this.AN=ZA({fillStyleSolid:()=>Y(this.be)&&this.be,fillStylePaletted:()=>Z(this.be)&&this.be,fillStyleRadialGradient:()=>et(this.be)&&this.be,fillStyleLinearGradient:()=>nt(this.be)&&this.be,fillStyleImage:()=>ln(this.be)&&this.be,strokeLineStyleSolid:()=>he(this.xe)&&this.xe,strokeLineSolidFill:()=>{const t=this.xe.getFillStyle();return Y(t)&&t},strokeLinearGradientFill:()=>{const t=this.xe.getFillStyle();return nt(t)&&t},strokeRadialGradientFill:()=>{const t=this.xe.getFillStyle();return et(t)&&t}}),this.rU=(t,i,s)=>{const e=At({x:this.Ya.min.x,y:this.Ya.min.y},this.dt,this.us.dt),h=At({x:this.Ya.max.x,y:this.Ya.max.y},this.dt,this.us.dt),r={x:Math.abs(e.x-h.x),y:Math.abs(e.y-h.y)},n=nm(t,i,r.x,r.y,s),o=n[1],a=n[4],l=n[6],u=n[7],c=new Float32Array(2*this.Oa.length),d=this.Ya.max.x-this.Ya.min.x,f=this.Ya.max.y-this.Ya.min.y,A=a-l,g=u-o;let m=0;for(const t of this.Oa){const i=l+A*((t.x-this.Ya.min.x)/d),s=o+g*((t.y-this.Ya.min.y)/f);c[m]=i,c[m+1]=s,m+=2}return c},this.rN=t,this.nN=i,this.gN=r,this.mN=n,this.RR=t.oN(),this.nN=i}Hc(t){let i,s=Number.MAX_VALUE;for(const e of this.Oa){const h=Ji(At(e,this.dt,this.us.dt),t);h<s&&(s=h,i=e)}return i}Ps(){const t=this.Bo.M(),i=this.ta(),s=this.yl,h=this.Oa.length>=3,r=this.xe,n=this.ra(),o=r.getThickness(),a=this.oa(o);this.aE.mV(this.dt),this.FT=this.dt.Wi();const l=this.dt.Ni();if(s&&(this.Ya=is(this.Oa)),s&&h){const t=ei(this.Oa,this.dt._i());this.SN=this.RR.nV(t,!1,this.SN),this.aU=new Uint16Array(e(t)),this.lU=this.RR.OV(this.aU,this.lU),this.bN=this.aU.length}const u=this.AN.fillStyleSolid(i),c=this.AN.fillStylePaletted(i),d=this.AN.fillStyleRadialGradient(i),f=this.AN.fillStyleLinearGradient(i),A=this.AN.fillStyleImage(i),g=u||c&&"value"!==c.getLookUpProperty()&&c||f||d||A;if(i&&(this.wN=g?this.RR.oz(_g["2D"],u&&_g.Color({dataType:"uniform"}),f&&_g.Color({dataType:["gradient",f]}),d&&_g.Color({dataType:["gradient",d]}),c&&_g.Color({dataType:["lookup",c.getLookUpProperty(),c.lut]}),A&&_g.Color({dataType:["image",A]}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0),d?this.MN=im(this.Eo||this.Ya,this.dt,d.getPosition(),d.getExtent(),d.getShape(),this.RR.$z()):f?this._N=sm(this.Eo||this.Ya,this.dt,f.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.hU=this.RR.RO(this,this.hU,A,void 0,l||s,this.rU),(s||a||l&&1!==o)&&h){const t=1===o||-1===o?this.Oa:pm(this.Oa,this.FT,o);this.CN=ei(t,this.dt._i()),this.TN=this.RR.nV(this.CN,!0,this.TN),this.kN=t.length}const m=this.AN.strokeLineStyleSolid(n),y=this.AN.strokeLineSolidFill(n),p=this.AN.strokeLinearGradientFill(n),S=this.AN.strokeRadialGradientFill(n),v=m,b=y||p||S;return n&&(this.RN=v&&b?this.RR.oz(_g["2D"],_g.Color({dataType:S?["gradient",S]:p?["gradient",p]:"uniform"}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0),S?this.DN=im(this.Eo||this.Ya,this.dt,S.getPosition(),S.getExtent(),S.getShape(),this.RR.$z()):p?this.LN=sm(this.Eo||this.Ya,this.dt,p.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),this.EN=t&&g?this.EN||this.RR.oz(_g["2D"],_g.MousePicking,_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0,this.zN=t&&this.xe!==at?this.EN||this.RR.oz(_g["2D"],_g.MousePicking,_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})):void 0,this.yl=!1,this.ha(this.be),this.aa(r),this}zL(t){const i=1===t?this.EN:this.wN,s=this.SN,e=this.bN,h=this.AN.fillStyleSolid(!1),r=this.AN.fillStyleRadialGradient(!1),n=this.AN.fillStyleLinearGradient(!1),o=this.AN.fillStylePaletted(!1),a=this.AN.fillStyleImage(!1);i&&s&&e&&this.RR.jR(i).aV(i,((i,e,l,u)=>{if(this.RR.uV(i("uScale"),this.aE.fV()).uV(i("uDisp"),this.aE.AV()).uV(u("uScaleStart_highpart"),this.aE.VO()).uV(u("uScaleStart_lowpart"),this.aE.OO()).vO(l,s,this.dt._i(),void 0).XV(this.lU).dV(i("uIsHighlighted"),1===t||2===t?0:this.zo).AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0),1===t)this.RR.AR(i("uColor"),this.mN);else if(h)this.RR.AR(i("uColor"),h.getColor());else if(r){if(!this.MN)return!1;this.RR.mO(l,this.MN,r)}else if(n){if(!this._N)return!1;this.RR.yO(l,this._N,n)}else if(o){const t=QA(o,this,void 0);if(!t&&o.lut.percentageValues)return!1;this.RR.LO(l,o.lut,t)}else if(a){if(!this.hU)return!1;this.RR.AR(u("uColor"),a.getSurroundingColor()).cV(i("uColorTexture"),this.hU.texture.Gz()||this.hU.sourceMissingTexture,0).lV(this.hU.texCoordsBuffer,void 0,{location:e("aTextureCoord"),size:2}).LV(a.fitMode)}return this.RR.ZV(this.bN),!0}));const l=1===t?this.zN:this.RN,u=this.xe,c=this.TN,d=this.kN;return l&&c&&d&&this.RR.jR(l).aV(l,((i,s,e,h)=>{this.RR.dV(i("uIsHighlighted"),1===t||2===t?0:this.zo).AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0).uV(i("uScale"),this.aE.fV()).uV(i("uDisp"),this.aE.AV()).vO(e,c,this.dt._i(),void 0);const r=u.getFillStyle();if(1===t)this.RR.AR(i("uColor"),this.mN);else if(Y(r))this.RR.AR(i("uColor"),r.getColor());else if(et(r)){if(!this.DN)return!1;this.RR.mO(e,this.DN,r)}else if(nt(r)){if(!this.LN)return!1;this.RR.yO(e,this.LN,r)}const n=u.getThickness(),o=-1===n||1===n;return this.RR.Ky(o?this.RR.gl.LINE_LOOP:this.RR.gl.TRIANGLE_STRIP,this.kN),!0})),this}lN(t){return this.gN===t&&{}}VR(){return this.lU&&(this.RR.yV(this.lU),this.lU=void 0),this.SN&&(this.RR.yV(this.SN),this.SN=void 0),this.TN&&(this.RR.yV(this.TN),this.TN=void 0),this.wN=void 0,this.RN=void 0,this.EN=void 0,this.zN=void 0,this.hU=this.RR.EO(this,this.hU),this}}const Zm=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=s+r<t?1:0;const o=Math.min(r,t-h),a=s-(n?1:0),l={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},Qm=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=0;const o=Math.min(r,t-h),a=s-(n?1:0),l={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},Jm=(t,i,s,e)=>{if(s){const t=new Map;return i.gridTiles.forEach((i=>{t.set(i,{type:s,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:i.sizeHeatmapDataVectors}]})})),t}const h=new Map;for(let s=0;s<t.length;s+=1){const r=t[s],n={x:r.startPrimary,y:r.startSecondary},o={x:n.x+r.lengthPrimary-1,y:n.y+r.lengthSecondary-1},a=[n,{x:o.x,y:n.y},o,{x:n.x,y:o.y}];i.gridTiles.forEach((t=>{const i=t.iFirstVector,s=e(t),n={x:i.primary+s.primary-1,y:i.secondary+s.secondary-1},o=[{x:i.primary,y:i.secondary},{x:n.x,y:i.secondary},n,{x:i.primary,y:n.y}];if(!Hi(a,o))return;let l=h.get(t);l||(l={type:r.type,dataInvalidationRanges:[]},h.set(t,l));const u=$i(a,o),c={primary:u.min.x-i.primary,secondary:u.min.y-i.secondary},d={primary:1+u.max.x-u.min.x,secondary:1+u.max.y-u.min.y};let f=!1;const A=[{x:c.primary,y:c.secondary},{x:c.primary+d.primary,y:c.secondary},{x:c.primary+d.primary,y:c.secondary+d.secondary},{x:c.primary,y:c.secondary+d.secondary}];for(let t=0;t<l.dataInvalidationRanges.length;t+=1)if(!f){const i=l.dataInvalidationRanges[t],s=[{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary},{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary}];if(Hi(A,s)){const t=(g=A,m=s,{min:{x:Math.min(g[0].x,m[0].x),y:Math.min(g[0].y,m[0].y)},max:{x:Math.max(g[2].x,m[2].x),y:Math.max(g[2].y,m[2].y)}});i.tileInvalidationOffset.primary=t.min.x,i.tileInvalidationOffset.secondary=t.min.y,i.tileInvalidationLength.primary=t.max.x-t.min.x,i.tileInvalidationLength.secondary=t.max.y-t.min.y,f=!0}}var g,m;f||l.dataInvalidationRanges.push({tileInvalidationLength:d,tileInvalidationOffset:c})}))}return h},Km=(t,i,s)=>{if(1!==t.length||0!==i.startPrimary||0!==i.startSecondary||i.lengthPrimary!==t[0].sizeHeatmapDataVectors.primary||i.lengthSecondary!==t[0].sizeHeatmapDataVectors.secondary)t.forEach((t=>{const e=s(t),h=Math.max(i.startPrimary,t.iFirstVector.primary),r=Math.min(i.startPrimary+i.lengthPrimary-1,t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1),n=Math.max(i.startSecondary,t.iFirstVector.secondary),o=Math.min(i.startSecondary+i.lengthSecondary-1,t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1);for(let s=h;s<=r;s+=1){const h=s-i.startPrimary,r=i.values[h],a=(s-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let s=n;s<=o;s+=1){const h=s-i.startSecondary,n=s-t.iFirstVector.secondary,o=r[h];e[a+n]=o}}}));else{const e=t[0],h=s(e);for(let t=0;t<i.lengthPrimary;t+=1){const s=t*e.sizeHeatmapDataVectors.secondary;h.set(i.values[t],s)}}},qm=(t,i,s)=>{var e,h;const r=null===(e=t.gl2)||void 0===e?void 0:e.ctx;if(r)return t.fO(null,r.RED,!1,!0,{x:i,y:s},!1,r.FLOAT,r.R32F);const n=t.gl;return(null===(h=t.gl1)||void 0===h?void 0:h.optional.OES_texture_float)?t.fO(null,n.LUMINANCE,!1,!0,{x:i,y:s},!1,n.FLOAT):t.fO(null,n.RGBA,!1,!0,{x:i,y:s},!1,n.UNSIGNED_BYTE)},ty=(t,i,s,e)=>{i.forEach(((i,h)=>{var r,n;const o=s(h),a=e(h),l=t.gl;l.bindTexture(l.TEXTURE_2D,a),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const u=null===(r=t.gl2)||void 0===r?void 0:r.ctx,c=i.dataInvalidationRanges.length,d=i.dataInvalidationRanges.reduce(((t,i)=>t+i.tileInvalidationLength.primary),0)/h.sizeHeatmapDataVectors.primary;1===c&&d<1||d<.5&&c<10?i.dataInvalidationRanges.forEach((i=>{var s;const e=i.tileInvalidationOffset.primary*h.sizeHeatmapDataVectors.secondary,r=e+i.tileInvalidationLength.primary*h.sizeHeatmapDataVectors.secondary;if(u)u.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,u.RED,u.FLOAT,o.subarray(e,r));else if(null===(s=t.gl1)||void 0===s?void 0:s.optional.OES_texture_float)l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.LUMINANCE,l.FLOAT,o.subarray(e,r));else{const t=new Uint8Array(o.buffer).subarray(4*e,4*r);l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.RGBA,l.UNSIGNED_BYTE,t)}})):u?u.texImage2D(l.TEXTURE_2D,0,u.R32F,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,u.RED,u.FLOAT,o):(null===(n=t.gl1)||void 0===n?void 0:n.optional.OES_texture_float)?l.texImage2D(l.TEXTURE_2D,0,l.LUMINANCE,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.LUMINANCE,l.FLOAT,o):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(o.buffer)),l.bindTexture(l.TEXTURE_2D,null)}))};class iy extends er{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.uU=f("bilinear"),this.Pi={x:0,y:0},this.$w={x:1,y:1},this.gv=Ph.lineStyle,this.engine=t;const n="columns"===r.dataOrder?r.columns:r.rows,o="columns"===r.dataOrder?r.rows:r.columns;this.Un={...r,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o}}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}Sv(t,i){return this.Pi=t,this.$w=i,this}vv(){return{start:this.Pi,step:this.$w,end:{x:this.Pi.x+this.$w.x*this.Un.columns,y:this.Pi.y+this.$w.y*this.Un.rows}}}mv(t){return this.gv="function"==typeof t?t(this.gv):t,this}bv(){return this.gv}}class sy extends iy{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r),this.aE=new fm,this.bG={},this.cU=[],this.dU=!1,this.Qa=!1,this.AN=ZA({fillStyleSolid:()=>Y(this.be)&&this.be,fillStylePaletted:()=>Z(this.be)&&this.be,wireframeStyleLine:()=>he(this.gv)&&this.gv,wireframeStyleFill:()=>{const t=this.gv&&this.gv.getFillStyle();return Y(t)&&t}}),this.fU=Zm,this.rN=t,this.nN=i,this.gN=n,this.mN=o,this.RR=t.oN(),this.nN=i;const a=Math.min(this.RR.zR,void 0!==r.AU?r.AU:2048),l={x:Math.min(a,this.Un.primaryDimensionVectorsCount),y:Math.min(a,this.Un.secondaryDimensionVectorsCount)},u=((t,i,s,e)=>{const h=[],r=s(t.primaryDimensionVectorsCount,i.x),n=s(t.secondaryDimensionVectorsCount,i.y);let o;return r.forEach((t=>n.forEach((i=>{const s={iFirstVector:{primary:t.start,secondary:i.start},iFirstUniqueVector:{primary:t.startUnique,secondary:i.startUnique},sizeHeatmapDataVectors:{primary:t.sizeData,secondary:i.sizeData},sizeUniqueHeatmapDataVectors:{primary:t.sizeUniqueData,secondary:i.sizeUniqueData}};h.push(s)})))),o=[],h.forEach((t=>{let i=o.find((i=>i.sizeHeatmapData.primary===t.sizeHeatmapDataVectors.primary&&i.sizeHeatmapData.secondary===t.sizeHeatmapDataVectors.secondary));i||(i={sizeHeatmapData:t.sizeHeatmapDataVectors,tiles:[]},o.push(i)),i.tiles.push(t)})),{gridTiles:h,gridTileSizes:o}})(this.Un,l,this.fU),c=u.gridTiles.map((t=>{const i=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary);return{...t,intensityData:i,hasIntensityData:!1}})),d=u.gridTileSizes.map((t=>({...t,tiles:c.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary))})));this.gU={gridTiles:c,gridTileSizes:d},this.Sv(this.Pi,this.$w)}Ps(){const t=this.cU,i=this.be,s=this.ta(),e=this.gv,h=e!==this.mU,r=this.AN.fillStylePaletted(s),n=this.AN.fillStyleSolid(s),o=this.uU.i,a=this.uU.M(),l=this.Qa,u=this.Bo.M();this.yU=this.yU||this.pU();const c=this.yU,d=Jm(t,c,l?"intensity":void 0,(t=>t.sizeHeatmapDataVectors));d.size>0&&(ty(this.RR,d,(t=>t.intensityData),(t=>t.intensityDataTexture)),this.dU=!0),this.aE.mV(this.dt);const f=this.bG;if((s||o)&&(f.tile=r?{renderMode:"paletted",fillStylePaletted:r,shader:this.RR.oz(_g["2D"],_g.ColorGrid2D({heatmapType:"intensity",interpolation:"bilinear"===a&&"bilinear",flipXY:"rows"===this.Un.dataOrder,intensityTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN,lut:r.lut}),_g.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:jA(this.dt),flipXY:"rows"===this.Un.dataOrder,normalSource:void 0}))}:n?{renderMode:"solid",fillStyleSolid:n,shader:this.RR.oz(_g["2D"],_g.Color({dataType:"uniform"}),_g.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:jA(this.dt),flipXY:"rows"===this.Un.dataOrder,normalSource:void 0}))}:void 0),h){const t=this.AN.wireframeStyleLine(h),i=this.AN.wireframeStyleFill(h);f.wireframe=t&&i?-1===t.getThickness()?{renderMode:"primitive",shader:this.RR.oz(_g["2D"],_g.Color({dataType:"uniform"}),_g.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Un.dataOrder,axisWorldTranslation:jA(this.dt),normalSource:void 0})),fillStyleSolid:i}:{renderMode:"triangulated",shader:this.RR.oz(_g["2D"],_g.Color({dataType:"uniform"}),_g.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Un.dataOrder,axisWorldTranslation:jA(this.dt),normalSource:void 0})),geometry:Fm(this.RR,1),solidLine:t,fillStyleSolid:i}:void 0,f.wireframe?this.SU=this.SU||this.vU():this.SU&&(this.RR.yV(this.SU.wireframeCoordinatesBuffer),this.SU=void 0)}if(f.mousePicking=u?this.bG.mousePicking||{shader:this.RR.oz(_g["2D"],_g.MousePicking,_g.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:jA(this.dt),flipXY:"rows"===this.Un.dataOrder,normalSource:void 0}))}:void 0,this.bG=f,void 0===this.Ja&&r&&"value"===r.lookUpProperty&&r.lut.percentageValues){let t=Oi,i=Ni;this.yU.gridTiles.forEach((s=>{for(let e=0;e<s.intensityData.length;e+=1){const h=s.intensityData[e];h<t&&(t=h),h>i&&(i=h)}})),this.Ja={min:t,max:i}}return this.Qa=!1,this.cU.length=0,this.ha(i),this.mU=e,this.uU.i=!1,this}pU(){const t=this.gU.gridTiles.map((t=>{const i=qm(this.RR,t.sizeHeatmapDataVectors.secondary,t.sizeHeatmapDataVectors.primary);return{...t,intensityDataTexture:i,tileData:t}})),i=this.gU.gridTileSizes.map((i=>({...i,tiles:t.filter((t=>t.sizeHeatmapDataVectors.primary===i.sizeHeatmapData.primary&&t.sizeHeatmapDataVectors.secondary===i.sizeHeatmapData.secondary))}))),s=this.RR.nV([0,0,1,0,0,1,1,1]),e=this.RR.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawMode:e,rectangleLocationsDrawLength:4}}vU(){const t=this.Un.primaryDimensionVectorsCount+1+this.Un.secondaryDimensionVectorsCount+1,i=new Float32Array(4*t);let s=0;for(let t=0;t<this.Un.primaryDimensionVectorsCount+1;t+=1)i[s+0]=t,i[s+1]=0,i[s+2]=t,i[s+3]=this.Un.secondaryDimensionVectorsCount,s+=4;for(let t=0;t<this.Un.secondaryDimensionVectorsCount+1;t+=1)i[s+0]=0,i[s+1]=t,i[s+2]=this.Un.primaryDimensionVectorsCount,i[s+3]=t,s+=4;return{wireframeCoordinatesBuffer:this.RR.nV(i),wireframeSegmentsLength:t}}Sv(t,i){super.Sv(t,i);const s=this.Un,e=c({x:Math.min(this.Pi.x,this.Pi.x+s.columns*this.$w.x),y:Math.min(this.Pi.y,this.Pi.y+s.rows*this.$w.y)},{x:Math.max(this.Pi.x,this.Pi.x+s.columns*this.$w.x),y:Math.max(this.Pi.y,this.Pi.y+s.rows*this.$w.y)}),h=new Map;return this.gU.gridTiles.forEach((t=>{const i="columns"===this.Un.dataOrder?{x:this.Pi.x+this.$w.x*t.iFirstVector.primary,y:this.Pi.y+this.$w.y*t.iFirstVector.secondary}:{x:this.Pi.x+this.$w.x*t.iFirstVector.secondary,y:this.Pi.y+this.$w.y*t.iFirstVector.primary},s="columns"===this.Un.dataOrder?{x:this.$w.x*t.sizeHeatmapDataVectors.primary,y:this.$w.y*t.sizeHeatmapDataVectors.secondary}:{x:this.$w.x*t.sizeHeatmapDataVectors.secondary,y:this.$w.y*t.sizeHeatmapDataVectors.primary},e="columns"===this.Un.dataOrder?{x:this.Pi.x+this.$w.x*t.iFirstUniqueVector.primary,y:this.Pi.y+this.$w.y*t.iFirstUniqueVector.secondary}:{x:this.Pi.x+this.$w.x*t.iFirstUniqueVector.secondary,y:this.Pi.y+this.$w.y*t.iFirstUniqueVector.primary},r="columns"===this.Un.dataOrder?{x:this.$w.x*t.sizeUniqueHeatmapDataVectors.primary,y:this.$w.y*t.sizeUniqueHeatmapDataVectors.secondary}:{x:this.$w.x*t.sizeUniqueHeatmapDataVectors.secondary,y:this.$w.y*t.sizeUniqueHeatmapDataVectors.primary};h.set(t,{startLocationAxis:i,sizeAxis:s,startRenderLocationAxis:e,renderSizeAxis:r})})),this.bU={boundaries:e,tilesInfo:h},this}zL(t){var i,s;const e=this.yU,h=this.bU,r=1===t?null===(i=this.bG.mousePicking)||void 0===i?void 0:i.shader:null===(s=this.bG.tile)||void 0===s?void 0:s.shader;if(this.bG.tile&&r&&e&&h){const i=r,s=this.bG.tile,n={x:(h.boundaries.max.x-h.boundaries.min.x)*Math.sign(this.$w.x),y:(h.boundaries.max.y-h.boundaries.min.y)*Math.sign(this.$w.y)},o={x:n.x/this.Un.columns,y:n.y/this.Un.rows},a=this.dt.Wi(),l={x:o.x/a.x,y:o.y/a.y};if("solid"===s.renderMode||1===t)this.RR.jR(i).aV(i,((i,h,r)=>{if(1===t)this.RR.AR(i("uColor"),this.mN);else if("solid"===s.renderMode){const{fillStyleSolid:t}=s;this.RR.AR(i("uColor"),t.getColor())}return this.RR.dV(i("uIsHighlighted"),1===t||2===t?0:this.zo).AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0).uV(i("uScale"),this.aE.fV()).uV(i("uDisp"),this.aE.AV()).lV(e.rectangleLocationsBuffer,void 0,{location:h("aPos"),size:2}).uV(i("uScaling"),[this.$w.x*this.Un.columns,this.$w.y*this.Un.rows]).uV(i("uTranslationAxis"),[this.Pi.x,this.Pi.y]).Ky(e.rectangleLocationsDrawMode,e.rectangleLocationsDrawLength),!0}));else if("paletted"===s.renderMode){const{fillStylePaletted:r}=s,n=this.Ja;this.RR.aV(i,((s,o,a)=>{let u=!1;var c,d;return this.RR.jR(i).uV(s("uScale"),this.aE.fV()).uV(s("uDisp"),this.aE.AV()).LO(a,r.lut,n).lV(e.rectangleLocationsBuffer,void 0,{location:o("aPos"),size:2}).dV(s("uIsHighlighted"),this.zo).AR(s("uHighlightColorOffset"),2===t?F:this.Go).dV(s("uRenderEffectMask"),2===t?1:0),c=t=>{this.RR.uV(s("uTileDimensions"),["columns"===this.Un.dataOrder?t.sizeHeatmapData.primary:t.sizeHeatmapData.secondary,"columns"===this.Un.dataOrder?t.sizeHeatmapData.secondary:t.sizeHeatmapData.primary])},d=(t,i)=>{const r=h.tilesInfo.get(t.tileData);if(!r)return;let n;const o=this.RR.$z();if("bilinear"===this.uU.M()){const t=(this.dt.x.ct(r.startLocationAxis.x)+l.x/2)*o,i=(this.dt.y.ct(r.startLocationAxis.y)+l.y/2)*o;n=[t,i,(this.dt.x.ct(r.startLocationAxis.x+r.sizeAxis.x)-l.x/2)*o-t,(this.dt.y.ct(r.startLocationAxis.y+r.sizeAxis.y)-l.y/2)*o-i]}else{const t=this.dt.x.ct(r.startLocationAxis.x)*o,i=this.dt.y.ct(r.startLocationAxis.y)*o;n=[t,i,this.dt.x.ct(r.startLocationAxis.x+r.sizeAxis.x)*o-t,this.dt.y.ct(r.startLocationAxis.y+r.sizeAxis.y)*o-i]}this.RR.FV(s("uTileBounds"),n).uV(s("uScaling"),[r.renderSizeAxis.x,r.renderSizeAxis.y]).uV(s("uTranslationAxis"),[r.startRenderLocationAxis.x,r.startRenderLocationAxis.y]).cV(s("uTileIntensityValues"),t.intensityDataTexture,1).Ky(e.rectangleLocationsDrawMode,e.rectangleLocationsDrawLength),u=!0},e.gridTileSizes.forEach((t=>{c(t),t.tiles.forEach((t=>{d(t)}))})),u}))}}const n=this.SU,o=this.bG.wireframe,a=1===t||null==o?void 0:o.shader;if(n&&o&&a&&"primitive"===o.renderMode){const{fillStyleSolid:i}=o;this.RR.jR(a).aV(a,((s,e,h)=>((this.dt instanceof Gs||this.dt instanceof gd)&&this.RR.uV(s("uScale"),this.aE.fV()).uV(s("uDisp"),this.aE.AV()),this.RR.dV(s("uIsHighlighted"),1===t||2===t?0:this.zo).AR(s("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(s("uRenderEffectMask"),2===t?1:0).AR(s("uColor"),i.getColor()).lV(n.wireframeCoordinatesBuffer,void 0,{location:e("aPos"),size:2}).uV(s("uScaling"),[this.$w.x,this.$w.y]).uV(s("uTranslationAxis"),[this.Pi.x,this.Pi.y]).Ky(this.RR.gl.LINES,2*n.wireframeSegmentsLength),!0)))}else if(n&&o&&a&&"triangulated"===o.renderMode){const{geometry:i,solidLine:s,fillStyleSolid:e}=o;this.RR.jR(a).aV(a,((h,r,o)=>((this.dt instanceof Gs||this.dt instanceof gd)&&this.RR.uV(h("uScale"),this.aE.fV()).uV(h("uDisp"),this.aE.AV()),this.RR.dV(h("uIsHighlighted"),1===t||2===t?0:this.zo).AR(h("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(h("uRenderEffectMask"),2===t?1:0).AR(h("uColor"),e.getColor()).dV(h("uThicknessPixels"),s.getThickness()).uV(h("uRatioPxClip"),[2/this.us.oi().x,2/this.us.oi().y]).lV(n.wireframeCoordinatesBuffer,1,{location:r("aLocationA"),size:2},{location:r("aLocationB"),size:2}).uV(h("uScaling"),[this.$w.x,this.$w.y]).uV(h("uTranslationAxis"),[this.Pi.x,this.Pi.y]),i.jR(o,!1).Ky(n.wireframeSegmentsLength),!0)))}return this}_v(t){return this.cU.push(t),Km(this.gU.gridTiles,t,(t=>(t.hasIntensityData=!0,t.intensityData))),this.Ja=void 0,this}Nt(){return this.dU&&(this.gU.gridTiles.forEach((t=>{t.intensityData.fill(0),t.hasIntensityData=!1})),this.Qa=!0,this.dU=!1,this.Ja=void 0),this}dispose(){super.dispose();const t=this.yU;t&&(t.gridTiles.forEach((t=>{this.RR.OR(t.intensityDataTexture)})),t.gridTiles.length=0,t.gridTileSizes.forEach((t=>{})),t.gridTileSizes.length=0,this.RR.yV(t.rectangleLocationsBuffer)),this.yU=void 0;const i=this.SU;return i&&this.RR.yV(i.wireframeCoordinatesBuffer),this.SU=void 0,this.bG={},this}VR(){return this.dispose(),this}lN(t){return this.gN===t&&{}}Hc(t){const i=t,s="columns"===this.Un.dataOrder?i.x:i.y,e="columns"===this.Un.dataOrder?i.y:i.x,h="columns"===this.Un.dataOrder?this.Pi.x:this.Pi.y,r="columns"===this.Un.dataOrder?this.Pi.y:this.Pi.x;let n=(s-h)/("columns"===this.Un.dataOrder?this.$w.x:this.$w.y),o=(e-r)/("columns"===this.Un.dataOrder?this.$w.y:this.$w.x);n=Math.floor(Rt(n,0,this.Un.primaryDimensionVectorsCount-1)),o=Math.floor(Rt(o,0,this.Un.secondaryDimensionVectorsCount-1));const a=this.xU(n,o),l="columns"===this.Un.dataOrder?{x:this.Pi.x+(n+.5)*this.$w.x,y:this.Pi.y+(o+.5)*this.$w.y}:{x:this.Pi.x+(o+.5)*this.$w.x,y:this.Pi.y+(n+.5)*this.$w.y},u="columns"===this.Un.dataOrder?n:o,c="columns"===this.Un.dataOrder?o:n;return{x:l.x,y:l.y,column:u,row:c,cellValue:a}}zx(t){const i=this.bU;if(!i||t.x<i.boundaries.min.x||t.x>i.boundaries.max.x||t.y<i.boundaries.min.y||t.y>i.boundaries.max.y)return;const s=t,e="columns"===this.Un.dataOrder?s.x:s.y,h="columns"===this.Un.dataOrder?s.y:s.x,r="columns"===this.Un.dataOrder?this.Pi.x:this.Pi.y,n="columns"===this.Un.dataOrder?this.Pi.y:this.Pi.x,o="columns"===this.Un.dataOrder?this.$w.x:this.$w.y,a="columns"===this.Un.dataOrder?this.$w.y:this.$w.x,l=Rt((e-r)/o-.5,0,this.Un.primaryDimensionVectorsCount-1),u=Rt((h-n)/a-.5,0,this.Un.secondaryDimensionVectorsCount-1),c=Rt(Math.ceil(l)-1,0,this.Un.primaryDimensionVectorsCount-1),d=Rt(Math.ceil(u)-1,0,this.Un.secondaryDimensionVectorsCount-1),f={point:{x:c,y:d},value:this.xU(c,d)},A={point:{x:c,y:d+1},value:this.xU(c,d+1)},g={point:{x:c+1,y:d},value:this.xU(c+1,d)},m={point:{x:c+1,y:d+1},value:this.xU(c+1,d+1)},y=$r({x:l,y:u},f,A,g,m);if(void 0===y)return;const p=Rt(Math.floor(l+.5),0,this.Un.primaryDimensionVectorsCount-1),S=Rt(Math.floor(u+.5),0,this.Un.secondaryDimensionVectorsCount-1),v="columns"===this.Un.dataOrder?p:S,b="columns"===this.Un.dataOrder?S:p,x=t;return{x:x.x,y:x.y,column:v,row:b,cellValue:y}}xU(t,i){for(let s=0;s<this.gU.gridTiles.length;s+=1){const e=this.gU.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const s=t-e.iFirstVector.primary,h=i-e.iFirstVector.secondary,r=s*e.sizeHeatmapDataVectors.secondary+h;return e.intensityData[r]}}return 0}bt(){var t;return(null===(t=this.bU)||void 0===t?void 0:t.boundaries.max.x)||0}vt(){var t;return(null===(t=this.bU)||void 0===t?void 0:t.boundaries.min.x)||0}Mt(){var t;return(null===(t=this.bU)||void 0===t?void 0:t.boundaries.max.y)||0}xt(){var t;return(null===(t=this.bU)||void 0===t?void 0:t.boundaries.min.y)||0}vl(){return 0}bl(){return 0}D_(){const t=[];return this.gU.gridTiles.forEach((i=>{if(!i.hasIntensityData)return;const s=new Array(i.sizeUniqueHeatmapDataVectors.primary).fill(0).map((t=>new Array(i.sizeUniqueHeatmapDataVectors.secondary).fill(0)));for(let t=0;t<i.sizeUniqueHeatmapDataVectors.primary;t+=1){const e=t*i.sizeHeatmapDataVectors.secondary,h=s[t];for(let t=0;t<i.sizeUniqueHeatmapDataVectors.secondary;t+=1){const s=i.intensityData[e+t];h[t]=s}}t.push({type:"intensity",startPrimary:i.iFirstUniqueVector.primary,startSecondary:i.iFirstUniqueVector.secondary,lengthPrimary:i.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:i.sizeUniqueHeatmapDataVectors.secondary,values:s})})),t}}class ey extends er{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Pi={x:0,y:0},this.$w={x:1,y:1},this.gv=Ph.lineStyle,this.pu=f(void 0),this.uU=f("bilinear"),this.engine=t,this.Un=r}Sv(t,i){return this.Pi=t,this.$w=i,this}vv(){return{start:this.Pi,step:this.$w}}mv(t){return this.gv="function"==typeof t?t(this.gv):t,this}bv(){return this.gv}Su(t){return this.pu.S(t),this}vu(){return this.pu.M()}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}}class hy extends ey{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.MU=0,this.QM=[],this.rN=t,this.nN=i,this.gN=r,this.mN=n,this.RR=t.oN(),this.nN=i,this.Ya="columns"===o.scrollDimension?c({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+o.resolution*this.$w.y}):c({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+o.resolution*this.$w.x,y:this.Pi.y}),this._U={dataPerSegment:2048}}Ps(){this.bW||(this.Oo.push({type:"DataPattern",args:{pattern:"columns"===this.Un.scrollDimension?this.$w.x>0?"ProgressiveX":"RegressiveX":this.$w.y>0?"ProgressiveY":"RegressiveY",regularProgressiveStep:!0}}),this.bW=new Om(this.dt,this));const t=this.bW.fW(this.QM,this.pu.M());if(t>0){for(let i=0;i<t;i+=1)this.QM[0].shape.dispose().VR(),this.QM.shift();"columns"===this.Un.scrollDimension?this.Ya.min.x=this.QM.length>0?this.QM[0].boundaries.min.x:Oi:this.Ya.min.y=this.QM.length>0?this.QM[0].boundaries.min.y:Oi}this.QM.forEach((t=>t.shape.Ps()));const i=this.QM.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,zt(null===(s=i.shape.Ja)||void 0===s?void 0:s.min,Oi)),t.max=Math.max(t.max,zt(null===(e=i.shape.Ja)||void 0===e?void 0:e.max,Ni)),t}),{min:Oi,max:Ni});return this.QM.forEach((t=>{t.shape.Ja=i})),this.pu.i=!1,this}zL(t){return this.QM.forEach((i=>i.shape.zL(t))),this}Fv(t){if(0===t.length)return this;let i=0;const s=this._U.dataPerSegment,e=t.length;do{let h=this.QM[this.QM.length-1],r=h?s-(h.existingDataPointsCount+(h.hasJoint?1:0)):0,n=!1;if(!h||0===r){const t={columns:"columns"===this.Un.scrollDimension?s:this.Un.resolution,rows:"rows"===this.Un.scrollDimension?s:this.Un.resolution,heatmapDataType:this.Un.heatmapDataType,dataOrder:this.Un.scrollDimension};let i="columns"===this.Un.scrollDimension?{x:this.Pi.x+this.$w.x*this.MU,y:this.Pi.y}:{x:this.Pi.x,y:this.Pi.y+this.$w.y*this.MU};this.QM.length>0&&(i="columns"===this.Un.scrollDimension?{x:i.x-1*this.$w.x,y:i.y}:{x:i.x,y:i.y-1*this.$w.y},n=!0);const e=new sy(this.rN,this.nN,this.dt,Bt,[],t,this.gN,this.mN).xv(this.uU.M()).Ce(this.be).mv(this.gv).Sv(i,this.$w);h={shape:e,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:s,dataStartIndex:this.MU,hasJoint:!1,boundaries:{min:{x:e.vt(),y:e.xt()},max:{x:e.bt(),y:e.Mt()}}},this.QM.push(h),r=s-(n?1:0)}const o=e-i,a=Math.min(r,o),l=t.slice(i,i+a),u={type:"intensity",values:l,startPrimary:h.existingDataPointsCount+(h.hasJoint?1:0),startSecondary:0,lengthPrimary:a,lengthSecondary:this.Un.resolution};n&&(u.values.unshift(this.wU),u.lengthPrimary+=1,h.hasJoint=!0),h.shape._v(u),h.existingDataPointsCount+=a,h.existingCoordinatesCount+=a+(n?1:0),this.wU=l[l.length-1],this.MU+=a,i+=a}while(i<e);return this.Ya.max="columns"===this.Un.scrollDimension?{...this.Ya.max,x:this.Pi.x+this.MU*this.$w.x}:{...this.Ya.max,y:this.Pi.y+this.MU*this.$w.y},this}_v(t,i){const s=t,e=t+i.length-1,h=i[0].length;this.QM.forEach((t=>{const r=t.dataStartIndex,n=t.dataStartIndex+t.existingDataPointsCount-1;if(e<r||s>n)return;const o=s-r,a=Math.min(e,n),l=a-o+1,u=i.slice(o-s,a-s+1),c={type:"intensity",startSecondary:0,lengthSecondary:h,startPrimary:o,lengthPrimary:l,values:u};t.shape._v(c)}));const r=this.MU-1;if(e>r){const t=e-r,s=i.slice(-t);if(s.length<t){const i=this.wU||new Array(h).fill(0);for(let e=s.length;e<t;e+=1)s.unshift(i)}this.Fv(s)}return this}O_(){return this.MU}Nt(){return this.QM.forEach((t=>{t.shape.dispose().VR()})),this.QM.length=0,this.Ya="columns"===this.Un.scrollDimension?c({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+this.Un.resolution*this.$w.y}):c({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+this.Un.resolution*this.$w.x,y:this.Pi.y}),this.MU=0,this.wU=void 0,this}Sv(t,i){return super.Sv(t,i),this.QM.forEach(((s,e)=>{const h={x:t.x+s.dataStartIndex*i.x,y:t.y+s.dataStartIndex*i.y};s.shape.Sv(h,i),s.boundaries={min:{x:s.shape.vt(),y:s.shape.xt()},max:{x:s.shape.bt(),y:s.shape.Mt()}}})),this.QM.length>0?this.Ya=es(...this.QM.map((t=>t.boundaries))):this.Ya="columns"===this.Un.scrollDimension?c({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+this.Un.resolution*this.$w.y}):c({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+this.Un.resolution*this.$w.x,y:this.Pi.y}),this}Ce(t){return super.Ce(t),this.QM.forEach((t=>t.shape.Ce(this.be))),this}mv(t){return super.mv(t),this.QM.forEach((t=>t.shape.mv(this.gv))),this}xv(t){return super.xv(t),this.QM.forEach((i=>i.shape.xv(t))),this}dispose(){return super.dispose(),this.QM.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.QM.forEach((i=>i.shape.setVisible(t))),this}VR(){return this.QM.forEach((t=>t.shape.VR())),this}lN(t){return this.gN===t&&{}}Hc(t){const i=At(t,this.dt,this.engine.dt),s=this.QM.reduce(((s,e)=>{const h=e.shape.Hc(t);if(h){const t=Ki(At(h,this.dt,this.engine.dt),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.Un.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.Un.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.Un.scrollDimension&&t>=this.MU||"rows"===this.Un.scrollDimension&&i>=this.MU)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}zx(t){const i=At(t,this.dt,this.engine.dt),s=this.QM.reduce(((s,e)=>{const h=e.shape.zx(t);if(h){const t=Ki(At(h,this.dt,this.engine.dt),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.Un.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.Un.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.Un.scrollDimension&&t>=this.MU||"rows"===this.Un.scrollDimension&&i>=this.MU)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return 0}bl(){return 0}cs(t){return super.cs(t),this.QM.forEach((i=>i.shape.cs(t))),this}}class ry extends er{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.uU=f("bilinear"),this.gv=Ph.lineStyle,this.Un=r}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}mv(t){return this.gv="function"==typeof t?t(this.gv):t,this}bv(){return this.gv}}class ny extends ry{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r),this.aE=new fm,this.bG={},this.AN=ZA({fillStyleSolid:()=>Y(this.be)&&this.be,fillStylePaletted:()=>Z(this.be)&&this.be}),this.rN=t,this.nN=i,this.gN=n,this.mN=o,this.RR=t.oN(),this.nN=i,this.I_=new sy(this.rN,t.CU,t.dt,Bt,[],{columns:r.sectors,rows:r.annuli,heatmapDataType:"intensity",dataOrder:"annuli"===r.dataOrder?"rows":"columns",AU:this.RR.zR},-1,T).mv(at);const a=2*Math.PI/360,l=new Float32Array(724);let u=0;l[u+0]=0,l[u+1]=0,u+=2;for(let t=0;t<=360;t+=1){const i=t*a,s=Math.cos(i),e=Math.sin(i);l[u+0]=s,l[u+1]=e,u+=2}this.kU={vertexBuffer:this.RR.nV(l),drawMode:this.RR.gl.TRIANGLE_FAN,drawLength:362}}Ps(){const t=this.ta(),i=this.be,s=this.AN.fillStyleSolid(t),e=this.AN.fillStylePaletted(t),h=s||e,r=this.uU.M(),n=this.uU.i,o=this.Bo.M(),a=this.Bo.i;return this.aE.mV(this.dt),this.I_.Ps(),this.I_.yU?((t||n)&&(this.bG.fill=h?{shader:this.RR.oz(_g["2D"],_g.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:jA(this.dt),normalSource:void 0}),e&&_g.PolarHeatmap({interpolation:"bilinear"===r&&"bilinear",intensityTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN,flipXY:"sectors"===this.Un.dataOrder,lut:e.lut}),s&&_g.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:e,fillStyleSolid:s}:void 0),a&&(this.bG.mousePicking=o?{shader:this.RR.oz(_g["2D"],_g.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:jA(this.dt),normalSource:void 0}),_g.Color({dataType:"uniform"}))}:void 0),this.ha(i),this.uU.i=!1,this.Bo.i=!1,this):this}zL(t){var i;const{vertexBuffer:s,drawLength:e,drawMode:h}=this.kU,r=this.I_.yU;if(!this.bG.fill||!r)return this;const{fillStylePaletted:n,fillStyleSolid:o}=this.bG.fill,a=1===t?null===(i=this.bG.mousePicking)||void 0===i?void 0:i.shader:this.bG.fill.shader;if(!a)return this;const l=this.dt.mx(),u=Math.min(l.start,l.end),c=Math.max(l.start,l.end),d=Math.min(this.Un.amplitudeStart,this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep),f=Math.max(this.Un.amplitudeStart,this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep);let A;return A=l.end>l.start?Math.min(f,c)-l.start:Math.max(d,u)-l.start,this.RR.jR(a).aV(a,((i,a,l,u)=>{if(this.RR.uV(i("uScale"),this.aE.fV()).uV(i("uDisp"),this.aE.AV()).dV(i("uIsHighlighted"),1===t||2===t?0:this.zo).AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0).uV(u("uViewportSize"),[this.rN.oi().x*this.RR.$z(),this.rN.oi().y*this.RR.$z()]).uV(i("uScaling"),[A,A]).uV(i("uTranslationAxis"),[0,0]).lV(s,void 0,{location:a("aPos"),size:2}).dV(u("uAngleOffset"),this.dt.xx()%(2*Math.PI)).dV(u("uAngleDirection"),this.dt.kx()?1:-1).dV(u("uSectors"),this.Un.sectors).dV(u("uAnnuli"),this.Un.annuli),1===t)this.RR.AR(i("uColor"),this.mN);else{if(this.RR.dV(i("uAmplitudeStart"),this.Un.amplitudeStart).dV(i("uAmplitudeStep"),this.Un.amplitudeStep).dV(i("uAmplitudeAxisStart"),this.dt.mx().start).dV(i("uAmplitudeAxisEnd"),this.dt.mx().end),n){const t=this.I_.Ja;this.RR.LO(l,n.lut,t).cV(i("uTileIntensityValues"),r.gridTiles[0].intensityDataTexture,0)}o&&this.RR.AR(i("uColor"),o.getColor())}return this.RR.Ky(h,e),!0})),this}_v(t){return this.I_._v(t),this}Nt(){return this.I_.Nt(),this}dispose(){return super.dispose(),this.I_.dispose(),this.bG={},this.RR.yV(this.kU.vertexBuffer),this}VR(){return this.dispose(),this}Ce(t){return super.Ce(t),this.I_.Ce(this.be),this}lN(t){return this.gN===t&&{}}Hc(t){const i=this.Un.amplitudeStart,s=this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep,e=Math.min(i,s),h=Math.max(i,s);if(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>h)return;let r=Math.round((t.angle-0)/360*this.Un.sectors);r>=this.Un.sectors&&(r=0);const n=Math.round((t.amplitude-i)/(s-i)*(this.Un.annuli-1));return{iAnnulus:n,iSector:r,cellValue:this.xU(n,r),angle:r*(360/this.Un.sectors),amplitude:i+n*(s-i)/(this.Un.annuli-1)}}zx(t){const i=this.Un.amplitudeStart,s=this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep,e=Math.min(i,s),h=Math.max(i,s);if(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>h)return;const r=(t.angle-0)/360*this.Un.sectors,n=(t.amplitude-i)/(s-i)*(this.Un.annuli-1),o=Math.floor(r),a=Math.floor(n),l={point:{x:a,y:o},value:this.xU(a,o)},u={point:{x:a,y:o+1},value:this.xU(a,o+1)},c={point:{x:a+1,y:o},value:this.xU(a+1,o)},d={point:{x:a+1,y:o+1},value:this.xU(a+1,o+1)},f=$r({x:n,y:r},l,u,c,d);return void 0!==f?{iAnnulus:a,iSector:o,cellValue:f,angle:t.angle,amplitude:t.amplitude}:void 0}xU(t,i){const s="annuli"===this.Un.dataOrder?t:i,e="annuli"===this.Un.dataOrder?i:t;for(let t=0;t<this.I_.gU.gridTiles.length;t+=1){const i=this.I_.gU.gridTiles[t];if(s>=i.iFirstVector.primary&&s<=i.iFirstVector.primary+i.sizeHeatmapDataVectors.primary-1&&e>=i.iFirstVector.secondary&&e<=i.iFirstVector.secondary+i.sizeHeatmapDataVectors.secondary-1){const t=s-i.iFirstVector.primary,h=e-i.iFirstVector.secondary,r=t*i.sizeHeatmapDataVectors.secondary+h;return i.intensityData[r]}}return 0}bt(){return 0}vt(){return 0}Mt(){return 0}xt(){return 0}vl(){return 0}bl(){return 0}}class oy extends em{constructor(t){super(t);const{vertices:i,drawMode:s,drawSize:e}=this.aG();this.lG=t.nV(i),this.cG=e,this.dG=s}jR(t){return this.RR.lV(this.lG,0,{location:t.attribute("aCurveOrBaseline"),size:1},{location:t.attribute("aSegmentSide"),size:1}),this}Ky(t,i,s){return this.RR.QV(void 0!==i?i:this.dG,s||0,this.cG,t),this}aG(){return{vertices:new Float32Array([1,0,0,0,0,1,0,1,1,1,1,0]),drawMode:this.RR.gl.TRIANGLES,drawSize:6}}kz(){this.RR.yV(this.lG)}}const ay=t=>{let i=t._V.Mz.get(void 0);return i||(i=new oy(t),t._V.Mz.set(void 0,i),i)};class ly extends Sr{constructor(t,i,s,e){super(t,i,s,e,[{type:"DataPattern",args:{pattern:"ProgressiveX"}}]),this.TU=Ph.fillStyle,this.FU=Ph.fillStyle,this.IU=f(zh.Circle),this.PU=f(5),this.DU=f(0),this.BU=f(void 0),this.XC=!0,this.LU={x:0,y:0}}ud(t){return this.TU=qh(this.TU,t),this}ZC(){return this.TU}RU(){return tr(this.EU,this.TU)}zU(){return tr(this.VU,this.FU)}ld(t){return this.FU=qh(this.FU,t),ln(this.FU)&&(this.fd(zh.Square),this.pd(1)),this}yd(){return this.FU}fd(t){return this.IU.S(t),mn(this.IU.M())&&this.pd(1),this}Ad(){return this.IU.M()}pd(t){return this.PU.S(t),this}QC(){return this.PU.M()}gd(t){return this.DU.S(t),this}md(){return this.DU.M()}JC(t){return this.LU=t,this}KC(){return this.LU}$C(t){return this.BU.S(t),this}qC(){return this.BU.M()}}class uy extends Lm{constructor(t,i){super(t,i),this.HG=!1,this.$G={enabled:!1,totalDataPointsAtTime:0},this.jG=t instanceof Gs?{type:"linear",scale:t}:{type:"unknown"},this.YG.Uo("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.HG=!0)}))}OU(t,i){var s,e;const h=null==t?void 0:t.Cc,r=null==t?void 0:t.kc,n=null==t?void 0:t.lc,o=null==t?void 0:t.ac;if(!t||this.HG||!this.GG||"linear"!==this.jG.type||!h||!r||void 0===n||void 0===o||!i)return{cpStateChanged:!1,cpActive:!1};const a=null===(s=t.wc())||void 0===s?void 0:s.x,l=null===(e=t.Yc())||void 0===e?void 0:e.x;if(n<2||void 0===a||void 0===l)return{cpStateChanged:!1,cpActive:!1};const u=this.calculateAvgStepBetweenDataPoints(l,a,n),c=this.jG.scale,d=Math.abs("x"===this.GG?c.Wi().x:c.Wi().y),f=d/u,A=Math.floor(.8*f),g=A*u,m=A>=4,y=this.$G.enabled?this.$G.columnWidthAxis/d<1.5:void 0,p=this.$G.enabled&&A>this.$G.dataPointsPerColumn?A/this.$G.dataPointsPerColumn>=2:void 0;let S;return!0===this.$G.enabled?y?p&&(S={enabled:!0,columnWidthAxis:g,dataPointsPerColumn:A,totalDataPointsAtTime:n}):S=m?{enabled:!0,columnWidthAxis:g,dataPointsPerColumn:A,totalDataPointsAtTime:n}:{enabled:!1,totalDataPointsAtTime:n}:m&&(S={enabled:!0,columnWidthAxis:g,dataPointsPerColumn:A,totalDataPointsAtTime:n}),this.$G=S||{...this.$G,totalDataPointsAtTime:n},!!S&&this.Qm(),{cpStateChanged:!!S,cpActive:this.$G.enabled}}NU(t,i){var s,e,h;const r=t.Cc,n=t.kc,o=t.uc,a=t.lc,l=t.ac;if(this.HG||!this.$G.enabled||!r||!n||void 0===i)return;const u=r.length,c=this.$G.columnWidthAxis,d=this.dt.x.getInnerStart(),f=this.dt.x.getInnerEnd(),A=xn(d,f,r,o,a,l,i,1);if(!A)return;const g=r[A.iFirstSampleDataArray];if(this.GU){if(this.GU.iFirstPackedSample<A.iFirstSample){const t=Math.min(Math.floor((g-this.GU.origin)/c),this.GU.packedColumnsCount);if(t>0)if(this.GU.packedColumnsCount-=t,this.GU.packedColumnsCount>0){this.GU.packedDataX.splice(0,2*t),this.GU.packedDataY.splice(0,2*t),this.GU.packedDataColors&&this.GU.packedDataColors.splice(0,2*t),this.GU.packedDataLookupValues&&this.GU.packedDataLookupValues.splice(0,2*t),this.GU.origin+=t*c;const i=Mn(this.GU.origin,Math.max(o-1-u+1,0),o-1,(t=>r[bn(t,o,u)])),s=bn(i,o,u);this.GU.iFirstPackedSample=r[s]>=this.GU.origin?i:i+1}else this.GU=void 0}if(void 0!==(null===(s=this.GU)||void 0===s?void 0:s.iLastPackedSample)&&this.GU.iLastPackedSample>A.iLastSample){const t=r[A.iLastSampleDataArray],i=Math.min(Math.floor((this.GU.origin+this.GU.packedColumnsCount*c-t)/c),this.GU.packedColumnsCount);if(i>0)if(this.GU.packedColumnsCount-=i,this.GU.packedColumnsCount>0){for(let t=0;t<2*i;t+=1)this.GU.packedDataX.pop(),this.GU.packedDataY.pop(),this.GU.packedDataColors&&this.GU.packedDataColors.pop(),this.GU.packedDataLookupValues&&this.GU.packedDataLookupValues.pop();const t=Mn(this.GU.origin+this.GU.packedColumnsCount*c,Math.max(o-1-u+1,0),o-1,(t=>r[bn(t,o,u)])),s=bn(t,o,u);this.GU.iLastPackedSample=r[s]<=this.GU.origin+this.GU.packedColumnsCount*c?t:t-1}else this.GU=void 0}}const m=this.GU||{origin:g,packedColumnsCount:0,packedDataX:[],packedDataY:[],packedDataColors:t.Rc?[]:void 0,packedDataLookupValues:t.Lc?[]:void 0,packedDataSize:t.Ec?[]:void 0,packedDataRotation:t.zc?[]:void 0,iFirstPackedSample:A.iFirstSample,iLastPackedSample:void 0},y=(t,i,s)=>{let e=Math.min(t,t+i*c),h=Math.max(t,t+i*c),a=s;const l=[];let g=Ni,y=Ni,p=-1,S=Oi,v=Oi,b=-1,x=0;for(;a<=A.iLastSample&&a>=A.iFirstSample;){const s=a%u,A=r[s],M=n[s];if(e<=A&&A<=h)x+=1,Number.isNaN(M)||(M>y&&(g=A,y=M,p=a),M<v&&(S=A,v=M,b=a)),a+=i;else{if(x>0)g=g===Ni?Number.NaN:g,y=y===Ni?Number.NaN:y,S=S===Oi?Number.NaN:S,v=v===Oi?Number.NaN:v,p<b?(l.push({iFirst:p,iSecond:b}),i>0?(m.packedDataX.push(g),m.packedDataY.push(y),m.packedDataX.push(S),m.packedDataY.push(v)):(m.packedDataX.unshift(S),m.packedDataY.unshift(v),m.packedDataX.unshift(g),m.packedDataY.unshift(y))):(l.push({iFirst:b,iSecond:p}),i>0?(m.packedDataX.push(S),m.packedDataY.push(v),m.packedDataX.push(g),m.packedDataY.push(y)):(m.packedDataX.unshift(g),m.packedDataY.unshift(y),m.packedDataX.unshift(S),m.packedDataY.unshift(v)));else{const t=i>0?m.iLastPackedSample:m.iFirstPackedSample;if(void 0===t)l.push({iFirst:0,iSecond:0}),i>0?(m.packedDataX.push(Number.NaN),m.packedDataY.push(Number.NaN),m.packedDataX.push(Number.NaN),m.packedDataY.push(Number.NaN)):(m.packedDataX.unshift(Number.NaN),m.packedDataY.unshift(Number.NaN),m.packedDataX.unshift(Number.NaN),m.packedDataY.unshift(Number.NaN));else{const s=bn(t,o,u),a=r[s],d=n[s],f=(e+h)/2,g=f-i*c/6,y=d+(g-a)/(A-a)*(M-d),p=f+i*c/6,S=d+(p-a)/(A-a)*(M-d);l.push({iFirst:t,iSecond:t}),i>0?(m.packedDataX.push(g),m.packedDataY.push(y),m.packedDataX.push(p),m.packedDataY.push(S)):(m.packedDataX.unshift(g),m.packedDataY.unshift(y),m.packedDataX.unshift(p),m.packedDataY.unshift(S))}}if(m.packedColumnsCount+=1,i>0?m.iLastPackedSample=a-1:(m.iFirstPackedSample=a+1,m.origin=e),e=Math.min(t+l.length*i*c,t+(l.length+1)*i*c),h=Math.max(t+l.length*i*c,t+(l.length+1)*i*c),x=0,g=Ni,y=Ni,p=-1,S=Oi,v=Oi,b=-1,e<d||h>f)break}}return l},p=y(m.origin+m.packedColumnsCount*c,1,void 0!==(null===(e=this.GU)||void 0===e?void 0:e.iLastPackedSample)?this.GU.iLastPackedSample+1:A.iFirstSample),S=y(m.origin,-1,void 0!==(null===(h=this.GU)||void 0===h?void 0:h.iFirstPackedSample)?this.GU.iFirstPackedSample-1:A.iFirstSample),v=t.Rc&&m.packedDataColors?[t.Rc,m.packedDataColors]:void 0,b=t.Lc&&m.packedDataLookupValues?[t.Lc,m.packedDataLookupValues]:void 0,x=t.Ec&&m.packedDataSize?[t.Ec,m.packedDataSize]:void 0,M=t.zc&&m.packedDataRotation?[t.zc,m.packedDataRotation]:void 0;if(v||b||x||M){for(const t of p){const i=bn(t.iFirst,o,u),s=bn(t.iSecond,o,u);v&&v[1].push(v[0][i],v[0][s]),b&&b[1].push(b[0][i],b[0][s]),x&&x[1].push(x[0][i],x[0][s]),M&&M[1].push(M[0][i],M[0][s])}for(const t of S){const i=bn(t.iFirst,o,u),s=bn(t.iSecond,o,u);v&&v[1].unshift(v[0][s],v[0][i]),b&&b[1].unshift(b[0][s],b[0][i]),x&&x[1].unshift(x[0][s],x[0][i]),M&&M[1].unshift(M[0][s],M[0][i])}}return this.GU=m.packedColumnsCount>0?m:void 0,{x:m.packedDataX,y:m.packedDataY,color:m.packedDataColors,lookup:m.packedDataLookupValues,size:m.packedDataSize,rotation:m.packedDataRotation}}Qm(){this.GU=void 0}tW(t){if(this.GG&&"linear"===this.jG.type){const i="x"===this.GG?this.jG.scale.x.ig:this.jG.scale.y.ig;if(!i)throw new Error("CP helper has no information about Axis state.");if(i.Je===Ye.progressive||i.Je===Ye.regressive){const i=Math.abs("x"===this.GG?this.jG.scale.x.getInnerInterval():this.jG.scale.y.getInnerInterval());if(this.$G.enabled)return 2*i/this.$G.columnWidthAxis;const s=t.length,e=t[0],h=t[s-1];return i/this.calculateAvgStepBetweenDataPoints("x"===this.GG?e.x:e.y,"x"===this.GG?h.x:h.y,s)}}}iW(t,i,s){if(!this.GG)return i;const e=s.length;let h=Hh(s,t.min,this.GG,this.WG,0,e-1);void 0===h&&(h=this.WG?e-1:0);let r=Hh(s,t.max,this.GG,this.WG,0,e-1);return void 0===r&&(r=this.WG?0:e-1),1+Math.abs(r-h)}sW(){}}class cy extends ly{constructor(t,i,s,e,h,r){super(t,i,s,e),this.aE=new fm,this.SW=new uy(this.dt,this),this.AN=ZA({lineStyleSolid:()=>he(this.lu)&&this.lu,lineStyleDashed:()=>fn(this.lu)&&this.lu,strokeFillSolid:()=>{const t=this.lu.getFillStyle();return Y(t)&&t},strokeFillLinearGradient:()=>{const t=this.lu.getFillStyle();return nt(t)&&t},strokeFillRadialGradient:()=>{const t=this.lu.getFillStyle();return et(t)&&t},strokeFillIndividual:()=>{const t=this.lu.getFillStyle();return $(t)&&t},strokeFillPaletted:()=>{const t=this.lu.getFillStyle();return Z(t)&&t},areaFillSolid:()=>Y(this.TU)&&this.TU,areaFillLinearGradient:()=>nt(this.TU)&&this.TU,areaFillRadialGradient:()=>et(this.TU)&&this.TU,areaFillIndividual:()=>$(this.TU)&&this.TU,areaFillPaletted:()=>Z(this.TU)&&this.TU,markerFillSolid:()=>Y(this.FU)&&this.FU,markerFillLinearGradient:()=>nt(this.FU)&&this.FU,markerFillRadialGradient:()=>et(this.FU)&&this.FU,markerFillPaletted:()=>Z(this.FU)&&this.FU,markerFillIndividual:()=>$(this.FU)&&this.FU,markerFillImage:()=>ln(this.FU)&&this.FU,markerShapeIcon:()=>{const t=this.IU.M();return mn(t)&&t}}),this.od=f(void 0),this.WU=[],this.Qa=!1,this.UU=[],this.YU=void 0,this.rU=(t,i,s)=>{var e;const h=null===(e=this.HU)||void 0===e?void 0:e.shapeIcon;let r=t,n=i;return h&&(r=h.oi().x,n=h.oi().y),nm(t,i,r*this.PU.M(),n*this.PU.M(),s)},this.nN=i,this.bG={type:"none"},this.RR=t.oN(),this.rN=t,this.SG=this.RR.eO,this.gN=h,this.mN=r}ad(t){return this.od.S(zi(t,this.od.M(),(()=>[t.$c(((i,s)=>{this.WU.push({min:i,max:s}),void 0===t.Gc()&&this.$U&&this.UU.push({min:i,max:s})})),t.Xc((()=>{this.Qa=!0,this.$U=void 0,this.YU=void 0,this.SW.Qm()}))]))),this.YU=void 0,this}Ps(){var t,i,s,e,h,r,o,a,l,u,c,d,f,A,g;const m=null===(t=this.od.M())||void 0===t?void 0:t.Wt,y=this.od.i,p=null==m?void 0:m.Cc,S=null==m?void 0:m.kc;if(!m||!p||!S)return this;const v=m.Lc,b=m.Rc,x=m.Ec,M=m.zc,_=m.uc,w=m.lc,C=m.ac,k=this.lu,T=this.TU,F=y||this.ra()||this.RU()||this.zU(),I=this.AN.lineStyleSolid(F),P=this.AN.lineStyleDashed(F),D=I||P,B=D&&D.getThickness(),L=this.AN.strokeFillSolid(F),R=this.AN.strokeFillLinearGradient(F),E=this.AN.strokeFillRadialGradient(F),z=this.AN.strokeFillIndividual(F),V=this.AN.strokeFillPaletted(F),O=L||R||E||z||V,N=this.AN.areaFillSolid(F),G=this.AN.areaFillLinearGradient(F),W=this.AN.areaFillRadialGradient(F),U=this.AN.areaFillIndividual(F),Y=this.AN.areaFillPaletted(F),H=N||G||W||U||Y,$=this.AN.markerFillSolid(F),X=this.AN.markerFillLinearGradient(F),j=this.AN.markerFillRadialGradient(F),Z=this.AN.markerFillPaletted(F),Q=this.AN.markerFillIndividual(F),J=this.AN.markerFillImage(F),K=$||X||j||Z||Q||J,q=this.IU.M(),tt=this.IU.i,it=this.AN.markerShapeIcon(tt),st=this.PU.M(),et=this.PU.i,ht=this.BU.i,rt=this.WU.length>0||ht,nt=this.Qa,ot=nt?[m.Wc()]:(t=>{const i=[];for(const s of t){let t=!1;for(const e of i)if(s.min>=e.min&&s.min<=e.max||s.max>=e.min&&s.max<=e.max){e.min=Math.min(e.min,s.min),e.max=Math.min(e.max,s.max),t=!0;break}t||i.push(s)}return i})(this.WU),at=this.dt.x.Yt,lt=this.dt.x.getInnerStart(),ut=this.dt.x.getInnerEnd(),ct=m.Gc(),dt=!!P,ft=this.Bo.M(),At=this.Bo.i,{cpStateChanged:gt,cpActive:mt}=this.SW.OU(m,this.XC);if(ct&&mt&&(gt||nt||rt||at||F)){const t=this.SW.NU(m,ct);if(t){const s=!gt&&!nt&&!F;this.XU=dy(this.RR,[t.x,t.y],t.color,t.lookup,t.size,t.rotation,dt,this.XU,s,ct,1e3,this.dt._i(),(t=>si(t,this.dt._i()))),this.jU={min:Oi,max:Ni};const e=t.y.length;for(let i=0;i<e;i+=1){const s=t.y[i];Number.isNaN(s)||(this.jU.min=Math.min(this.jU.min,s),this.jU.max=Math.max(this.jU.max,s))}null===(i=this.dt.y.ig)||void 0===i||i.uh()}}if(ct&&!mt&&(gt||nt||rt||at||ht||F)){const t=xn(lt,ut,p,_,w,C,ct,1);if(!this.ZU||(null==t?void 0:t.iFirstSample)!==this.ZU.iFirstSample||t.iLastSample!==this.ZU.iLastSample||nt){this.jU={min:Oi,max:Ni};for(const i of(null==t?void 0:t.dataRanges)||[])for(let t=i.offset;t<i.offset+i.count;t+=1){const i=S[t];Number.isNaN(i)||(this.jU.min=Math.min(this.jU.min,i),this.jU.max=Math.max(this.jU.max,i))}null===(s=this.dt.y.ig)||void 0===s||s.uh()}if(this.ZU=t,void 0===t)this.RR.yV(null===(e=this.XU)||void 0===e?void 0:e.bufferX),this.RR.yV(null===(h=this.XU)||void 0===h?void 0:h.bufferY),this.XU=void 0,this.RR.yV(null===(r=this.QU)||void 0===r?void 0:r.bufferX),this.RR.yV(null===(o=this.QU)||void 0===o?void 0:o.bufferY),this.QU=void 0,this.JU=t;else if(gt||nt||!this.JU||t.iFirstSample<this.JU.iFirstSample||t.iLastSample>this.JU.iLastSample||F){let i,s,e,h,r,o;if(1===t.dataRanges.length){const n=t.dataRanges[0];i=p.subarray(n.offset,n.offset+n.count),s=S.subarray(n.offset,n.offset+n.count),e=b?b.subarray(n.offset,n.offset+n.count):void 0,h=v?v.subarray(n.offset,n.offset+n.count):void 0,r=x?x.subarray(n.offset,n.offset+n.count):void 0,o=M?M.subarray(n.offset,n.offset+n.count):void 0}else{const n=t.dataRanges[0],a=t.dataRanges[1],l=n.count+a.count;i=new Float32Array(l),i.set(p.subarray(n.offset),0),i.set(p.subarray(a.offset,a.offset+a.count),n.count),s=new Float32Array(l),s.set(S.subarray(n.offset),0),s.set(S.subarray(a.offset,a.offset+a.count),n.count),b&&(e=new Uint32Array(l),e.set(b.subarray(n.offset),0),e.set(b.subarray(a.offset,a.offset+a.count),n.count)),v&&(h=new Float32Array(l),h.set(v.subarray(n.offset),0),h.set(v.subarray(a.offset,a.offset+a.count),n.count)),x&&(r=new Float32Array(l),r.set(x.subarray(n.offset),0),r.set(x.subarray(a.offset,a.offset+a.count),n.count)),M&&(o=new Float32Array(l),o.set(M.subarray(n.offset),0),o.set(M.subarray(a.offset,a.offset+a.count),n.count))}const l=!gt&&!nt&&!F;this.QU=dy(this.RR,[i,s],e,h,r,o,dt,this.QU,l,ct,1e3,this.dt._i(),(t=>si(t,this.dt._i())));let u=i,c=s,d=e,f=h;const A=this.BU.M();if(A){const t="spline"===A.type?((t,i)=>{const{xValues:s,yValues:e,lookupValues:h,colors:r}=t;if(s.length<=2)return{xValues:Array.from(s),yValues:Array.from(e),lookupValues:h?Array.from(h):void 0,colors:r?Array.from(r):void 0};const o=((t,i)=>{const s=1e-5,e=t.length-1,h=Array(e);if(e>1){let r=n(0,0),o=n(0,0),a=n(0,0),l=as(fs({x:t[1],y:i[1]},{x:t[0],y:i[0]}));const u=3;let c=0,d=0;for(let f=0;f<e;f+=1){const A=Array(4);if(A[0]={x:t[f],y:i[f]},A[1]={x:t[f],y:i[f]},A[3]={x:t[f+1],y:i[f+1]},A[2]={x:t[f+1],y:i[f+1]},a=l,r=o,f+1<e?(l=t[f+2]===t[f+1]&&i[f+2]===i[f+1]?n(0,0):as(fs({x:t[f+2],y:i[f+2]},{x:t[f+1],y:i[f+1]})),o=as(ds(a,l))):o=n(0,0),i[f+1]===i[f])c=0,d=0;else{const i=t[f+1]-t[f];c=Math.abs(r.x)>s?Math.abs(i/(u*r.x)):1,d=Math.abs(o.x)>s?Math.abs(i/(u*o.x)):1}A[1]=ds(cs(r,c),A[1]),A[2]=fs(A[2],cs(o,d)),h[f]=A}}return h.length>0?h:[]})(s,e),a=o.length,l=[],u=[],c=[],d=[];for(let t=0;t<a;t+=1){const s=o[t];for(let t=0;t<i;t+=1){const e=t/(i-1),h=e*e,r=h*e,n=1-e,o=n*n,a=o*n;l.push(a*s[0].x+3*e*o*s[1].x+3*h*n*s[2].x+r*s[3].x),u.push(a*s[0].y+3*e*o*s[1].y+3*h*n*s[2].y+r*s[3].y)}}if(h)for(let t=0;t<l.length;t+=1){const s=h[Math.round(t/i)];d[t]=s}if(r)for(let t=0;t<l.length;t+=1){const s=r[Math.round(t/i)];c[t]=s}return{xValues:l,yValues:u,lookupValues:h?d:void 0,colors:r?c:void 0}})({xValues:i,yValues:s,lookupValues:h,colors:e},A.resolution||20):"step"===A.type?((t,i)=>{const{xValues:s,yValues:e,lookupValues:h,colors:r}=t,n=[],o=[],a=[],l=[],u=s.length,c=i;if(u>0){let t=0,i=s[0],h=e[0];n[t]=i,o[t]=h,t+=1;for(let r=1;r<u;r+=1){const a=s[r],l=e[r];if(c<=0)n[t]=i,o[t]=l,t+=1;else{const s=i*(1-c)+a*c;n[t]=s,o[t]=h,t+=1,n[t]=s,o[t]=l,t+=1}n[t]=a,o[t]=l,t+=1,i=a,h=l}}if(h)if(c===gc.before){l[0]=h[0];for(let t=1;t<u;t+=1)l[2*t-1]=h[t],l[2*t]=h[t]}else if(c===gc.middle||c===gc.after){l[0]=h[0],l[1]=h[0];for(let t=1;t<u;t+=1)l[3*t-1]=h[t],l[3*t]=h[t],l[3*t+1]=h[t]}if(r)if(c===gc.before){a[0]=r[0];for(let t=1;t<u;t+=1)a[2*t-1]=r[t],a[2*t]=r[t]}else if(c===gc.middle||c===gc.after){a[0]=r[0],a[1]=r[0];for(let t=1;t<u;t+=1)a[3*t-1]=r[t],a[3*t]=r[t],a[3*t+1]=r[t]}return{xValues:n,yValues:o,lookupValues:h?l:void 0,colors:r?a:void 0}})({xValues:i,yValues:s,lookupValues:h,colors:e},"before"===A.step?0:"after"===A.step?1:.5):void 0;u=t?t.xValues:u,c=t?t.yValues:c,d=(null==t?void 0:t.colors)?t.colors:d,f=(null==t?void 0:t.lookupValues)?t.lookupValues:f}this.XU=u===i&&c===s?this.QU:dy(this.RR,[u,c],d,f,void 0,void 0,dt,(null===(a=this.XU)||void 0===a?void 0:a.bufferX)===this.QU.bufferX?void 0:this.XU,!(!l||ht||A),ct,1e3,this.dt._i(),(t=>si(t,this.dt._i()))),this.JU=t}}if(!ct&&(nt||rt||F)){if(!this.XU||this.XU.bufferSize<m.lc||dt){const t=void 0!==m.Vc?m.Vc:m.lc;let i,s=0,e=0;if(dt){const h=fy(p,S,p[0],S[0],0,0);i=this.RR.EV(2*t,h[0],null===(l=this.XU)||void 0===l?void 0:l.bufferLengthSoFar,Float32Array),s=h[1],e=h[2]}this.XU={bufferX:this.RR.EV(t*(this.dt._i()?2:1),si(p,this.dt._i()),null===(u=this.XU)||void 0===u?void 0:u.bufferX),bufferY:this.RR.EV(t*(this.dt._i()?2:1),si(S,this.dt._i()),null===(c=this.XU)||void 0===c?void 0:c.bufferY),bufferColors:b?this.RR.EV(t,b,null===(d=this.XU)||void 0===d?void 0:d.bufferColors,Uint32Array):void 0,bufferLookupValues:v?this.RR.EV(t,v,null===(f=this.XU)||void 0===f?void 0:f.bufferLookupValues,Float32Array):void 0,bufferSizes:x?this.RR.EV(t,x,null===(A=this.XU)||void 0===A?void 0:A.bufferSizes,Float32Array):void 0,bufferRotations:M?this.RR.EV(t,M,null===(g=this.XU)||void 0===g?void 0:g.bufferRotations,Float32Array):void 0,bufferLengthSoFar:i,lengthSoFarX:s,lengthSoFarY:e,bufferSize:t,valueCount:m.lc}}else{const t=this.XU.bufferX,i=this.XU.bufferY;ot.forEach((s=>{var e,h,r,n;const o=p.subarray(s.min,s.max+1),a=S.subarray(s.min,s.max+1);if(this.RR.zV(t,s.min*(this.dt._i()?2:1),si(o,this.dt._i())),this.RR.zV(i,s.min*(this.dt._i()?2:1),si(a,this.dt._i())),b&&(null===(e=this.XU)||void 0===e?void 0:e.bufferColors)){const t=b.subarray(s.min,s.max+1);this.RR.zV(this.XU.bufferColors,s.min,t,Uint32Array)}if(v&&(null===(h=this.XU)||void 0===h?void 0:h.bufferLookupValues)){const t=v.subarray(s.min,s.max+1);this.RR.zV(this.XU.bufferLookupValues,s.min,t,Float32Array)}if(M&&(null===(r=this.XU)||void 0===r?void 0:r.bufferRotations)){const t=M.subarray(s.min,s.max+1);this.RR.zV(this.XU.bufferRotations,s.min,t,Float32Array)}if(x&&(null===(n=this.XU)||void 0===n?void 0:n.bufferSizes)){const t=x.subarray(s.min,s.max+1);this.RR.zV(this.XU.bufferSizes,s.min,t,Float32Array)}})),this.XU.valueCount=m.lc}this.QU=this.XU}if(this.aE.mV(this.dt),F||et||tt||At){if(O&&D&&!1!==B){const t=-1===B?"primitive":"triangulated",i=V?["lookup",V.lookUpProperty,V.lut]:z?"attribute":R?["gradient",R]:E?["gradient",E]:"uniform";this.bG="primitive"===t?{type:t,shader:this.RR.oz(_g["2D"],_g.Color({dataType:i}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0,splitPosAttribute:!0}),P&&_g.StippleTexture),lineStyleSolid:I,lineStyleDashed:P,fillStyleSolid:L,fillStyleLinearGradient:R,fillStyleRadialGradient:E,fillStyleIndividual:z,fillStylePaletted:V,mousePickingShader:ft&&this.RR.oz(_g["2D"],_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0,splitPosAttribute:!0}),P&&_g.StippleTexture,_g.MousePicking)}:"triangulated"===t?{type:t,shader:this.RR.oz(_g["2D"],_g.Color({dataType:i}),_g.LineInstanced2D({axisWorldTranslation:jA(this.dt),normalSource:void 0,splitPosAttribute:!0}),this.SG?_g.AliasedEdge:void 0,P&&_g.StippleTextureInstanced),geometry:Fm(this.RR,B),thickness:B,lineStyleSolid:I,lineStyleDashed:P,fillStyleSolid:L,fillStyleLinearGradient:R,fillStyleRadialGradient:E,fillStyleIndividual:z,fillStylePaletted:V,mousePickingShader:ft&&this.RR.oz(_g["2D"],_g.LineInstanced2D({axisWorldTranslation:jA(this.dt),normalSource:void 0,splitPosAttribute:!0}),P&&_g.StippleTextureInstanced,_g.MousePicking)}:{type:"none"}}else this.bG={type:"none"};if(this.KU=H?{shader:this.RR.oz(_g["2D"],Y&&_g.Color({dataType:["lookup",Y.lookUpProperty,Y.lut]}),U&&_g.Color({dataType:"attribute"}),N&&_g.Color({dataType:"uniform"}),G&&_g.Color({dataType:["gradient",G]}),W&&_g.Color({dataType:["gradient",W]}),_g.Area2D({axisWorldTranslation:jA(this.dt),normalSource:void 0,splitPosAttribute:!0})),geometry:ay(this.RR),fillStyleSolid:N,fillStyleLinearGradient:G,fillStyleRadialGradient:W,fillStyleIndividual:U,fillStylePaletted:Y,mousePickingShader:ft&&this.RR.oz(_g["2D"],_g.Area2D({axisWorldTranslation:jA(this.dt),normalSource:void 0,splitPosAttribute:!0}),_g.MousePicking)}:void 0,K){const t=!(!J&&!it),i=st>1||t,s=x?"attribute":"uniform",e=!i&&_g.PointSize("uniform"),h=_g.VertexLocation({offset:i&&!t?{dataType:s,sizeUnit:"px",symmetric:!0,rotation:{dataType:M?"attribute-deg":"uniform"},useAlignment:!0}:i&&t?{dataType:s,sizeUnit:"scale",rotation:{dataType:M?"attribute-deg":"uniform"},useAlignment:!0}:void 0,axisWorldTranslation:jA(this.dt),normalSource:void 0,splitPosAttribute:!0});this.HU={shader:this.RR.oz(_g["2D"],e,h,$&&_g.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!it}),X&&_g.Color({dataType:["gradient",X],overrideOpacity:!0,maskTexture:!!it}),j&&_g.Color({dataType:["gradient",j],overrideOpacity:!0,maskTexture:!!it}),Z&&_g.Color({dataType:["lookup",Z.getLookUpProperty(),Z.getPalette()],overrideOpacity:!0,maskTexture:!!it}),Q&&_g.Color({dataType:"attribute",overrideOpacity:!0,maskTexture:!!it}),J&&_g.Color({dataType:["image",J],overrideOpacity:!0,maskTexture:!!it})),geometry:Ym(q,this.RR,"uniform"===s?st:25),fillStyleSolid:$,fillStyleLinearGradient:X,fillStyleRadialGradient:j,fillStylePaletted:Z,fillStyleIndividual:Q,fillStyleImage:J,mousePickingShader:ft&&this.RR.oz(_g["2D"],e,h,_g.MousePicking),shapeIcon:it,pointSizeAsScale:t,instancedRendering:i}}else this.HU=void 0}const yt=Kh({min:{x:this.vt(),y:this.dt.y.getInnerStart()},max:{x:this.bt(),y:this.Mt()}},{x:this.vl(),y:this.bl()},this.dt),pt=Kh({min:{x:this.vt(),y:this.xt()},max:{x:this.bt(),y:this.Mt()}},{x:this.vl(),y:this.bl()},this.dt);if(this.qU=this.RR.NO(R,this,pt),this.tY=this.RR.GO(E,this,pt),this.iY=this.RR.NO(G,this,yt),this.sY=this.RR.GO(W,this,yt),this.eY=this.RR.NO(X,this,pt),this.hY=this.RR.GO(j,this,pt),(void 0===this.YU||rt)&&v&&(JA(V)||JA(Y)||JA(Z))){const t=this.YU?ot:[m.Wc()];let i=this.YU?this.YU.max:Ni,s=this.YU?this.YU.min:Oi;const e=v;t.forEach((t=>{for(let h=t.min;h<=t.max;h+=1){const t=e[h];s=t<s?t:s,i=t>i?t:i}})),this.YU={min:s,max:i}}return this.MG=P?this.RR.IO(P.getPattern()):void 0,this.hU=this.RR.RO(this,this.hU,J,it,et,this.rU),this.fu(k),this.EU=T,this.VU=this.FU,this.IU.i=!1,this.PU.i=!1,this.WU.length=0,this.Qa=!1,this.BU.i=!1,this.od.i=!1,this.Bo.i=!1,this}zL(t){var i,s,e,h,r,n,o,a,l,u,c,d,f,A,g,m,y;const p=this.RR.gl,S=null===(i=this.XU)||void 0===i?void 0:i.bufferX,v=null===(s=this.XU)||void 0===s?void 0:s.bufferY,b=null===(e=this.XU)||void 0===e?void 0:e.bufferColors,x=null===(h=this.XU)||void 0===h?void 0:h.bufferLookupValues,M=null===(r=this.XU)||void 0===r?void 0:r.valueCount,_=null===(n=this.QU)||void 0===n?void 0:n.valueCount,w=null===(o=this.od.M())||void 0===o?void 0:o.Wt,C=null==w?void 0:w.Gc();if(!S||!v||!w)return this;const k=(i,s,e)=>{if(Ay(this.RR,i,this.dt._i(),S,"aLocation","X",1,!1,p.FLOAT,Float32Array.BYTES_PER_ELEMENT),Ay(this.RR,i,this.dt._i(),v,"aLocation","Y",1,!1,p.FLOAT,Float32Array.BYTES_PER_ELEMENT),s&&1!==t){if(!b)return!1;Ay(this.RR,i,!1,b,"aColor","",4,!0,p.UNSIGNED_BYTE,1)}if(e&&"value"===e.lookUpProperty&&1!==t){if(!x)return!1;Ay(this.RR,i,!1,x,"aLookupValue","",1,!1,p.FLOAT,Float32Array.BYTES_PER_ELEMENT)}return!0},T=1===t?null===(a=this.KU)||void 0===a?void 0:a.mousePickingShader:null===(l=this.KU)||void 0===l?void 0:l.shader;if(this.KU&&T&&void 0!==M&&M>0&&C){const i=this.KU;this.RR.jR(T).aV(T,((s,e,h,r)=>!!this.RR.zO(h,t,this,{uniforms:this.aE,mousePickingColor:this.mN,fillStyleSolid:i.fillStyleSolid,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,fillStylePaletted:i.fillStylePaletted,linearGradientInfo:this.iY,radialGradientInfo:this.sY,lookupValueRange:i.fillStylePaletted?QA(i.fillStylePaletted,this,this.YU):void 0,lookupValueBuffer:null})&&!!k(h,i.fillStyleIndividual,i.fillStylePaletted)&&(null==i||i.geometry.jR(h).Ky(M-1),!0)))}const F="none"===this.bG.type?void 0:1===t?this.bG.mousePickingShader:this.bG.shader;if("none"!==this.bG.type&&F&&void 0!==M&&M>0){const i=this.bG;this.RR.jR(F).aV(F,((s,e,h,r)=>{var n,o;if(!this.RR.zO(h,t,this,{uniforms:this.aE,mousePickingColor:this.mN,fillStyleSolid:i.fillStyleSolid,fillStylePaletted:i.fillStylePaletted,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,fillStyleIndividual:i.fillStyleIndividual,linearGradientInfo:this.qU,radialGradientInfo:this.tY,lookupValueRange:i.fillStylePaletted?QA(i.fillStylePaletted,this,this.YU):void 0,lookupValueBuffer:"primitive"===i.type?x:null,colorBuffer:"primitive"===i.type?b:null,coordsX:"primitive"===i.type?S:void 0,coordsY:"primitive"===i.type?v:void 0,coordsHighPrecision:this.dt._i()}))return!1;if(i.lineStyleDashed){if(!this.MG)return!1;this.RR.uV(s("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(r("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(s("uStippleScale"),i.lineStyleDashed.getPatternScale()).cV(s("uStippleTexture"),this.MG.PO,1)}if("primitive"===i.type){if(i.lineStyleDashed){if(!(null===(n=this.XU)||void 0===n?void 0:n.bufferLengthSoFar))return!1;this.RR.GV(e("aLengthSoFar"),this.XU.bufferLengthSoFar)}Pm.yG(this.rN,M)}else{if(!k(h,i.fillStyleIndividual,i.fillStylePaletted))return!1;if(i.lineStyleDashed){if(!(null===(o=this.XU)||void 0===o?void 0:o.bufferLengthSoFar))return!1;Ay(this.RR,h,!1,this.XU.bufferLengthSoFar,"aLengthSoFar","",2,!1,p.FLOAT,Float32Array.BYTES_PER_ELEMENT)}Im.zL(this.rN,i.geometry,h,this.SG&&1!==t,1===t,i.thickness,M-1)}return!0}))}const I=null===(u=this.QU)||void 0===u?void 0:u.bufferX,P=null===(c=this.QU)||void 0===c?void 0:c.bufferY,D=null===(d=this.QU)||void 0===d?void 0:d.bufferColors,B=null===(f=this.QU)||void 0===f?void 0:f.bufferLookupValues,L=null===(A=this.QU)||void 0===A?void 0:A.bufferSizes,R=null===(g=this.QU)||void 0===g?void 0:g.bufferRotations,E=1===t?null===(m=this.HU)||void 0===m?void 0:m.mousePickingShader:null===(y=this.HU)||void 0===y?void 0:y.shader,z=this.HU;let V=1;if(C){const t=this.od?Math.abs((this.bt()-this.vt())/w.getSampleCount()):0,i=this.dt.x.getInnerInterval()/t,s=this.PU.M(),e=this.dt.x.ri()/s/1,h=2*e;V=i<=e?1:Math.max(1-(i-e)/(h-e),0)}if(E&&z&&I&&P&&V>0&&void 0!==_&&_>0){const i=z,s=i.instancedRendering?1:0;this.RR.jR(E).aV(E,((e,h,r,n)=>{if(!this.RR.zO(r,t,this,{uniforms:this.aE,mousePickingColor:this.mN,fillStyleSolid:i.fillStyleSolid,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,linearGradientInfo:this.eY,radialGradientInfo:this.hY,fillStylePaletted:i.fillStylePaletted,fillStyleIndividual:i.fillStyleIndividual,lookupValueRange:i.fillStylePaletted?QA(i.fillStylePaletted,this,this.YU):void 0,lookupValueBuffer:B,lookupValueAttribDivisor:s,colorBuffer:D,colorAttribDivisor:s,fillStyleImage:i.fillStyleImage,texturedFillGLInfo:this.hU,texCoordAttribDivisor:0,maskTexture:i.shapeIcon&&this.hU,maskTextureCoordsAttribDivisor:0}))return!1;if(this.dt._i()?this.RR.lV(I,s,{location:h("aPos_highpartX"),size:1},{location:h("aPos_lowpartX"),size:1}).lV(P,s,{location:h("aPos_highpartY"),size:1},{location:h("aPos_lowpartY"),size:1}):this.RR.$V(h("aPosX"),I,s).$V(h("aPosY"),P,s),1!==t&&this.RR.dV(e("uOpacity"),V),i.instancedRendering)if(R)this.RR.$V(h("aRotDeg"),R,s).dV(e("uBaseRotDeg"),i.geometry.DW);else{const t=vs(this.DU.M()+i.geometry.DW),s=Math.sin(t),h=Math.cos(t);this.RR.uV(e("uRot"),[s,h])}return this.RR.uV(n("uOffsetAlignment"),[-this.LU.x/2,-this.LU.y/2]),i.geometry.Ky(r,L,_,i.pointSizeAsScale&&this.hU?{scale:this.PU.M(),width:i.shapeIcon?i.shapeIcon.oi().x:this.hU.texture.Fz,height:i.shapeIcon?i.shapeIcon.oi().y:this.hU.texture.Iz}:this.PU.M(),i.instancedRendering),!0}))}return this}lN(t){return this.gN===t&&{}}dispose(){var t,i,s,e,h,r,n,o,a;return super.dispose(),this.RR.yV(null===(t=this.XU)||void 0===t?void 0:t.bufferX),this.RR.yV(null===(i=this.XU)||void 0===i?void 0:i.bufferY),this.RR.yV(null===(s=this.XU)||void 0===s?void 0:s.bufferColors),this.RR.yV(null===(e=this.XU)||void 0===e?void 0:e.bufferLookupValues),this.RR.yV(null===(h=this.QU)||void 0===h?void 0:h.bufferX),this.RR.yV(null===(r=this.QU)||void 0===r?void 0:r.bufferY),this.RR.yV(null===(n=this.QU)||void 0===n?void 0:n.bufferColors),this.RR.yV(null===(o=this.QU)||void 0===o?void 0:o.bufferLookupValues),this.bG={type:"none"},this.KU=void 0,this.HU=void 0,this.SW.Qm(),null===(a=this.od.M())||void 0===a||a.Gt(),this.XU=void 0,this.QU=void 0,this.qU=void 0,this.tY=void 0,this.iY=void 0,this.sY=void 0,this.eY=void 0,this.hY=void 0,this.RR.EO(this,this.hU),this}VR(){return this.dispose(),this}rY(t){if(!this.$U){const{xValues:i,yValues:s}=t.readBack();this.$U={min:{x:Oi,y:Oi},max:{x:Ni,y:Ni}};const e=i.length;for(let t=0;t<e;t+=1){const e=i[t],h=s[t];this.$U.min.x=e<this.$U.min.x?e:this.$U.min.x,this.$U.min.y=h<this.$U.min.y?h:this.$U.min.y,this.$U.max.x=e>this.$U.max.x?e:this.$U.max.x,this.$U.max.y=h>this.$U.max.y?h:this.$U.max.y}return this.UU.length=0,this.$U}const i=t.Cc,s=t.kc;if(this.UU.length>0&&i&&s){for(const t of this.UU){for(let e=t.min;e<=t.max;e+=1){const t=i[e],h=s[e];this.$U.min.x=t<this.$U.min.x?t:this.$U.min.x,this.$U.min.y=h<this.$U.min.y?h:this.$U.min.y,this.$U.max.x=t>this.$U.max.x?t:this.$U.max.x,this.$U.max.y=h>this.$U.max.y?h:this.$U.max.y}this.UU.length=0}return this.$U}return this.$U}bt(){var t,i,s,e,h;const r=null===(t=this.od.M())||void 0===t?void 0:t.Wt;if(!r)return 0;const n=r.Gc();return"ProgressiveX"===n?(null===(i=r.wc())||void 0===i?void 0:i.x)||0:"RegressiveX"===n?(null===(s=r.Yc())||void 0===s?void 0:s.x)||0:"ProgressiveY"===n?(null===(e=this.jU)||void 0===e?void 0:e.max)||0:"RegressiveY"===n?(null===(h=this.jU)||void 0===h?void 0:h.max)||0:this.rY(r).max.x}vt(){var t,i,s,e,h;const r=null===(t=this.od.M())||void 0===t?void 0:t.Wt;if(!r)return 0;const n=r.Gc();return"ProgressiveX"===n?(null===(i=r.Yc())||void 0===i?void 0:i.x)||0:"RegressiveX"===n?(null===(s=r.wc())||void 0===s?void 0:s.x)||0:"ProgressiveY"===n?(null===(e=this.jU)||void 0===e?void 0:e.min)||0:"RegressiveY"===n?(null===(h=this.jU)||void 0===h?void 0:h.min)||0:this.rY(r).min.x}Mt(){var t,i,s,e,h;const r=null===(t=this.od.M())||void 0===t?void 0:t.Wt;if(!r)return 0;const n=r.Gc();return"ProgressiveX"===n?zt(null===(i=this.jU)||void 0===i?void 0:i.max,0):"RegressiveX"===n?zt(null===(s=this.jU)||void 0===s?void 0:s.max,0):"ProgressiveY"===n?zt(null===(e=r.wc())||void 0===e?void 0:e.y,0):"RegressiveY"===n?zt(null===(h=r.Yc())||void 0===h?void 0:h.y,0):this.rY(r).max.y}xt(){var t,i,s,e,h;const r=null===(t=this.od.M())||void 0===t?void 0:t.Wt;if(!r)return 0;const n=r.Gc();return"ProgressiveX"===n?zt(null===(i=this.jU)||void 0===i?void 0:i.min,0):"RegressiveX"===n?zt(null===(s=this.jU)||void 0===s?void 0:s.min,0):"ProgressiveY"===n?zt(null===(e=r.Yc())||void 0===e?void 0:e.y,0):"RegressiveY"===n?zt(null===(h=r.wc())||void 0===h?void 0:h.y,0):this.rY(r).min.y}vl(){var t,i;let s=this.PU.M();this.hU&&(s=Math.max(this.hU.texture.Fz,this.hU.texture.Iz)*this.PU.M());const e=Math.max(Pi(this.lu),(null===(t=this.od.M())||void 0===t?void 0:t.Wt.vc)?25:s),h=null===(i=this.od.M())||void 0===i?void 0:i.Wt.Gc();return!h||"ProgressiveX"!==h&&"RegressiveX"!==h?e:0}bl(){var t,i;let s=this.PU.M();this.hU&&(s=Math.max(this.hU.texture.Fz,this.hU.texture.Iz)*this.PU.M());const e=Math.max(Pi(this.lu),(null===(t=this.od.M())||void 0===t?void 0:t.Wt.vc)?25:s),h=null===(i=this.od.M())||void 0===i?void 0:i.Wt.Gc();return!h||"ProgressiveY"!==h&&"RegressiveY"!==h?e:0}}const dy=(t,i,s,e,h,r,n,o,a,l,u,c,d)=>{if("ProgressiveX"!==l)throw new Error("Unimplemented data pattern");const f=i[0],A=i[1],g=f.length,m=f[0],y=f[g-1],p=A[0],S=A[g-1],v=c?2:1;if(o&&a&&o.firstX&&o.lastX&&m>=o.firstX){const i=Mn(o.lastX,0,g-1,(t=>f[t]));if(f[i]===o.lastX){const a=o.bufferSize-o.valueCount,l=i+1,u=g-l;if(0===u)return o;if(a>=u){const i=Cn(f,l,void 0),a=Cn(A,l,void 0);if(t.zV(o.bufferX,o.valueCount*v,d(i)),t.zV(o.bufferY,o.valueCount*v,d(a)),s&&o.bufferColors){const i=s.slice(l);t.zV(o.bufferColors,o.valueCount,i,Uint32Array)}if(e&&o.bufferLookupValues){const i=e.slice(l);t.zV(o.bufferLookupValues,o.valueCount,i,Float32Array)}if(h&&o.bufferSizes){const i=h.slice(l);t.zV(o.bufferSizes,o.valueCount,i,Float32Array)}if(r&&o.bufferRotations){const i=r.slice(l);t.zV(o.bufferRotations,o.valueCount,i,Float32Array)}if(n&&o.bufferLengthSoFar){const[s,e,h]=fy(i,a,o.lastX||0,o.lastY||0,o.lengthSoFarX,o.lengthSoFarY);t.zV(o.bufferLengthSoFar,2*o.valueCount,s,Float32Array),o.lengthSoFarX=e,o.lengthSoFarY=h}return o.valueCount+=u,o.lastX=y,o.lastY=S,o}}}const b=g+u,x=t.EV(b*v,d(f),null==o?void 0:o.bufferX),M=t.EV(b*v,d(A),null==o?void 0:o.bufferY),_=s?t.EV(b,s,null==o?void 0:o.bufferColors,Uint32Array):void 0,w=e?t.EV(b,e,null==o?void 0:o.bufferLookupValues,Float32Array):void 0,C=h?t.EV(b,h,null==o?void 0:o.bufferSizes,Float32Array):void 0,k=r?t.EV(b,r,null==o?void 0:o.bufferRotations,Float32Array):void 0;let T,F=0,I=0;if(n){const i=fy(f,A,f[0],A[0],0,0);T=t.EV(2*b,i[0],null==o?void 0:o.bufferLengthSoFar,Float32Array),F=i[1],I=i[2]}return{bufferX:x,bufferY:M,bufferColors:_,bufferLookupValues:w,bufferSizes:C,bufferRotations:k,bufferSize:b,bufferLengthSoFar:T,valueCount:g,firstX:m,lastX:y,firstY:p,lastY:S,lengthSoFarX:F,lengthSoFarY:I}},fy=(t,i,s,e,h,r)=>{const n=t.length,o=new Float32Array(2*n);if(0===n)return[o,0,0];let a=0,l=s,u=e,c=h,d=r;for(let s=0;s<n;s+=1){const e=t[s],h=i[s];c+=Math.abs(l-e),d+=Math.abs(u-h),o[a]=c,o[a+1]=d,a+=2,l=e,u=h}return[o,c,d]},Ay=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.gl;if(s){const s=i.attribute(`${h}A_highpart${r}`),c=i.attribute(`${h}A_lowpart${r}`),d=i.attribute(`${h}B_highpart${r}`),f=i.attribute(`${h}B_lowpart${r}`);u.bindBuffer(u.ARRAY_BUFFER,e),u.vertexAttribPointer(s,n,a,o,2*n*l,0*l),u.vertexAttribPointer(c,n,a,o,2*n*l,n*l),t.UV(s,1),t.UV(c,1),u.enableVertexAttribArray(s),u.enableVertexAttribArray(c),u.vertexAttribPointer(d,n,a,o,2*n*l,2*n*l),u.vertexAttribPointer(f,n,a,o,2*n*l,3*n*l),t.UV(d,1),t.UV(f,1),u.enableVertexAttribArray(d),u.enableVertexAttribArray(f),u.bindBuffer(u.ARRAY_BUFFER,null)}else{const s=i.attribute(`${h}A${r}`),c=i.attribute(`${h}B${r}`);u.bindBuffer(u.ARRAY_BUFFER,e),u.vertexAttribPointer(s,n,a,o,n*l,0*l),u.vertexAttribPointer(c,n,a,o,n*l,n*l),t.UV(s,1),t.UV(c,1),u.enableVertexAttribArray(s),u.enableVertexAttribArray(c),u.bindBuffer(u.ARRAY_BUFFER,null)}},gy={translation:(t,i)=>[1,0,0,0,1,0,t,i,1],rotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,-s,0,s,i,0,0,0,1]},scaling:(t,i)=>[t,0,0,0,i,0,0,0,1],translate:(t,i,s)=>gy.multiply(t,gy.translation(i,s)),rotate:(t,i)=>gy.multiply(t,gy.rotation(i)),scale:(t,i,s)=>gy.multiply(t,gy.scaling(i,s)),multiply(t,i){const s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=i[0],d=i[1],f=i[2],A=i[3],g=i[4],m=i[5],y=i[6],p=i[7],S=i[8];return[c*s+d*r+f*a,c*e+d*n+f*l,c*h+d*o+f*u,A*s+g*r+m*a,A*e+g*n+m*l,A*h+g*o+m*u,y*s+p*r+S*a,y*e+p*n+S*l,y*h+p*o+S*u]},projection:(t,i,s)=>[2/t,0,0,0,-2*s/i,0,-1,1*s,1]};class my extends nr{constructor(t,i,s,e,h,r,o){super(t,i,s,e,h),this.nY=[],this.aE=new fm,this.oY=[n(0,0),n(0,0),n(0,0),n(0,0)],this.aY=c(n(0,0),n(0,0)),this.lY=c(n(0,0),n(0,0)),this.uY=n(0,0),this.cY=n(0,0),this.FT=n(0,0),this.dY=n(0,0),this.fY=0,this.AY=0,this.AN=ZA({fillStyleSolid:()=>Y(this.be)&&this.be,fillStyleRadialGradient:()=>et(this.be)&&this.be,fillStyleLinearGradient:()=>nt(this.be)&&this.be}),this.rN=t,this.nN=i,this.gN=r,this.mN=o,this.RR=t.oN(),this.nN=i,this.IG=t.Un.jn}Ps(){const t=this.ea(),i=this.sa(),s=this.Bo.M();if(t){const t=this.ta(),e=this.AN.fillStyleSolid(t),h=this.AN.fillStyleRadialGradient(t),r=this.AN.fillStyleLinearGradient(t),o=e||h||r,a=this.RR,l=this.RR.$z(),u=l!==this.AY;if(this.AY=l,this.aE.mV(this.dt),this.ga.i||u){this.gY&&this.gY.ZR(this),this.font.S(Mh(this.ga.M(),l));const t=this.font.M();this.gY=this.RR.Vh(t.properties.family),this.gY.jR(this)}const c=this.font.i,d=c||this.la.i;if(d&&this.gY){const t=this.font.M();[this.mY,this.lY]=this.gY.JR(this.la.M(),t,this.rN.qi.isDark),this.nY.forEach((t=>{t.texCoordBuff&&a.yV(t.texCoordBuff),t.vertexBuff&&a.yV(t.vertexBuff)})),this.nY=this.mY.map((t=>({texCoordBuff:a.nV(t.texCoords,!1),texture:t.texture,info:t}))),this.ga.i=!1,this.font.i=!1,this.la.i=!1}const f=this.dt.Ni()||i,A=this.ua.i||this.da.i||this.ca.i||this.fa.i||this.ya.i||this.Xt.i||d||f,g=this.ya.M(),m=cs(n(this.da.M()+1,this.ca.M()+1),.5);if(A&&this.mY&&(this.uY=n(-(g.left*l+this.lY.max.x-this.lY.min.x+g.right*l)*m.x-this.lY.min.x+g.right*l,-(g.bottom*l+this.lY.max.y-this.lY.min.y+g.top*l)*m.y-this.lY.min.y+g.top*l)),(A||f||this.Aa.i||this.ta())&&this.be!==O){if(this.mY){const t=ds(this.ua.M(),this.fa.M()),i=At(t,this.dt,this.us.dt),s=cs(i,l);this.dY=s;const e=vs(this.Aa.M());this.fY=e,d&&this.nY.forEach((t=>{const i=t.info;i&&(t.vertexBuffLen=i.vertices.length/2,t.vertexBuff=a.nV(i.vertices,!0,t.vertexBuff))}));const h=this.Xt.M(),r=[ds(ns(n((this.lY.min.x+(-h.left-g.left)*l+this.uY.x)/l,(this.lY.max.y+(h.top+g.top)*l+this.uY.y)/l),this.ma,e),i),ds(ns(n((this.lY.max.x+(h.right+g.right)*l+this.uY.x)/l,(this.lY.max.y+(h.top+g.top)*l+this.uY.y)/l),this.ma,e),i),ds(ns(n((this.lY.max.x+(h.right+g.right)*l+this.uY.x)/l,(this.lY.min.y+(-h.bottom-g.bottom)*l+this.uY.y)/l),this.ma,e),i),ds(ns(n((this.lY.min.x+(-h.left-g.left)*l+this.uY.x)/l,(this.lY.min.y+(-h.bottom-g.bottom)*l+this.uY.y)/l),this.ma,e),i)];this.oY=[At(r[0],this.us.dt,this.dt),At(r[1],this.us.dt,this.dt),At(r[2],this.us.dt,this.dt),At(r[3],this.us.dt,this.dt)];const o=is(r);this.cY=n(-(o.max.x-o.min.x)*l*m.x-o.min.x*l+this.dY.x,-(o.max.y-o.min.y)*l*m.y-o.min.y*l+this.dY.y),this.Fg=fs(o.max,o.min);const u=is(this.oY),c=this.dt.mi(u.min,this.cY),f=this.dt.mi(u.max,this.cY);this.aY=is([c,f])}h?this.MN=im(this.aY,this.dt,h.getPosition(),h.getExtent(),h.getShape(),this.RR.$z()):r?this._N=sm(this.aY,this.dt,r.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0)}(this.ta()||c)&&(this.cE=o?this.RR.oz(_g["2D"],_g.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.IG}),_g.Color({dataType:h?["gradient",h]:r?["gradient",r]:"uniform",maskTextureText:!0})):void 0),this.yY=s&&o?this.yY||this.RR.oz(_g["2D"],_g.MousePicking,_g.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.IG})):void 0,this.ua.i=!1,this.da.i=!1,this.ca.i=!1,this.fa.i=!1,this.Aa.i=!1,this.ha(this.be)}return this.pa=t,this}zL(t){if(this.ea()){const i=1===t?this.yY:this.cE;if(!i||0===this.nY.length)return this;const s=this.AN.fillStyleSolid(!1),e=this.AN.fillStyleRadialGradient(!1),h=this.AN.fillStyleLinearGradient(!1),r=this.us.OE(),n=r.x,o=r.y;let a=gy.projection(n,o,-1);const l=gy.translation(this.uY.x,this.uY.y),u=gy.translation(this.cY.x,this.cY.y);a=gy.translate(a,this.dY.x,this.dY.y),a=gy.multiply(a,u),a=gy.rotate(a,this.fY),a=gy.multiply(a,l),1===t&&(a=gy.scale(a,this.lY.max.x,this.lY.max.y)),this.RR.jR(i).aV(i,((i,n,o,l)=>{if(this.RR.PV(i("uMatrix"),a).dV(i("uIsHighlighted"),1===t||2===t?0:this.zo).AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0),this.IG&&this.RR.uV(l("uViewportSizePx"),[r.x*this.RR.$z(),r.y*this.RR.$z()]),1===t)this.RR.AR(i("uColor"),this.mN);else if(s)this.RR.AR(i("uColor"),s.getColor());else if(e&&this.MN){this.RR.uV(i("uCenter"),this.MN.center).uV(i("uDistance"),this.MN.distance).FV(i("uBounds"),this.MN.bounds).dV(i("uAspect"),this.MN.aspectRatio);const t=e.getColorStops();for(let s=0;s<t.length;s+=1)this.RR.AR(i(`color_${s}`),t[s].color).dV(i(`stop_${s}`),t[s].offset)}else if(h&&this._N){this.RR.uV(i("uStartPoint"),this._N.startPoint).uV(i("uEndPoint"),this._N.endPoint).FV(i("uBounds"),this._N.bounds);const t=h.getColorStops();for(let s=0;s<t.length;s+=1)this.RR.AR(i(`color_${s}`),t[s].color).dV(i(`stop_${s}`),t[s].offset)}return 1===t&&this.RR.GV(n("aPos"),this.RR.uO).Ky(this.RR.gl.TRIANGLES,6),1!==t&&this.nY.forEach((t=>{this.RR.GV(n("aPos"),t.vertexBuff).GV(n("aMaskTextureCoord"),t.texCoordBuff).cV(i("uMaskTexture"),t.texture,0).Ky(this.RR.gl.TRIANGLES,t.vertexBuffLen)})),!0}))}return this}lN(t){return this.gN===t&&{}}We(){return this.ea()?this.oY:[]}jc(){return this.ea()&&this.Fg?this.Fg:n(0,0)}oi(){if(this.ea()&&this.aY){const t=this.aY;return n(t.max.x-t.min.x,t.max.y-t.min.y)}return n(0,0)}VR(){return this.nY.forEach((t=>{t.texCoordBuff&&this.RR.yV(t.texCoordBuff),t.vertexBuff&&this.RR.yV(t.vertexBuff)})),this.nY=[],this.gY&&this.gY.ZR(this),this}bt(){return this.aY.max.x}vt(){return this.aY.min.x}Mt(){return this.aY.max.y}xt(){return this.aY.min.y}vl(){return 0}bl(){return 0}}class yy{constructor(t,i,s){this.pY=new Set,this.SY=t=>(this.pY.add(t),t),this.vY=t=>(this.pY.delete(t),t.VR(),this),this.us=t,this.Zo=i,this.bY=s}EL(t){this.pY.delete(t)&&this.pY.add(t)}W(){for(const t of this.pY)t.VR().dispose();this.us.xn(this.Zo)}Ss(){return this.us.Ss(),this}bn(){return this.Zo}}class py extends yy{constructor(){super(...arguments),this.xY=f(void 0),this.Qo=!1}qv(t){return this.xY.S(t),this}km(){return this.xY.M()}}class Sy extends py{constructor(t,i,s){super(t,i,s),this.rN=t,this.gl=t.oN(),this.MY=this.pY}rV(t){const i=t instanceof Jh&&t;if(!i)return Gi;const s=i.vt(),e=i.bt(),h=i.xt(),r=i.Mt();if(s===Oi||e===Ni||h===Oi||r===Ni)return Gi;const n=i.vl(),o=i.bl(),a=Kh({min:{x:s,y:h},max:{x:e,y:r}},{x:n,y:o},i.dt),l={min:At(a.min,i.dt,t.us.dt),max:At(a.max,i.dt,t.us.dt)},u=this.xY.M();let c;if(u){if(c={min:{x:Math.max(l.min.x,u.x),y:Math.max(l.min.y,u.y)},max:{x:Math.min(l.max.x,u.x+u.width),y:Math.min(l.max.y,u.y+u.height)}},c.max.x<c.min.x||c.max.y<c.min.y)return Gi}else c=l;return c}_Y(t){const i=Array.from(this.MY.values());for(let s=0;s<i.length;s+=1){const e=i[s],h=e.lN(t);if(h)return{entity:e,index:s,collectionMember:h.collectionMember}}}Ee(t){const i=this.rN.wY();return this.SY(new Dm(this.rN,this,t,this.vY,[],i,this.rN.CY(i)))}Lg(t){return this.SY(new Bm(this.rN,this,t,this.vY,[],(()=>{const t=this.rN.wY();return{id:t,color:this.rN.CY(t)}})))}rp(t,i,s){const e=this.rN.wY();return this.SY(new Nm(this.rN,this,t,this.vY,s,e,this.rN.CY(e),i))}dd(t){const i=this.rN.wY();return this.SY(new cy(this.rN,this,t,this.vY,i,this.rN.CY(i)))}Pr(t){const i=this.rN.wY();return this.SY(new my(this.rN,this,t,this.vY,[],i,this.rN.CY(i)))}bS(t){const i=this.rN.wY();return this.SY(new Hm(this.rN,this,t,this.vY,[],i,this.rN.CY(i)))}ic(t,i=fr.Simple){const s=this.rN.wY();if(i===fr.Simple)return this.SY(new jm(this.rN,this,t,this.vY,[],s,this.rN.CY(s)));throw new Error("GlEngine.addPolygon | No such polygon type!")}Ob(t){return this.SY(new $m(this.rN,this,t,this.vY,[],(()=>{const t=this.rN.wY();return{id:t,color:this.rN.CY(t)}})))}ke(t){const i=this.rN.wY();return this.SY(new Xm(this.rN,this,t,this.vY,[],i,this.rN.CY(i)))}lw(t){const i=this.rN.wY();return this.SY(new km(this.rN,this,t,this.vY,[],i,this.rN.CY(i)))}Jc(t){const i=this.rN.wY();return this.SY(new Sm(this.rN,this,t,this.vY,[],i,this.rN.CY(i)))}V_(t,i,s){if("intensity"===s.heatmapDataType){const e=this.rN.wY();return this.SY(new hy(this.rN,this,t,this.vY,i,e,this.rN.CY(e),s))}throw new xt("Unimplemented Heatmap Grid Static type")}P_(t,i,s){const e=this.rN.wY();return this.SY(new sy(this.rN,this,t,this.vY,i,s,e,this.rN.CY(e)))}Ex(t,i,s){const e=this.rN.wY();return this.SY(new ny(this.rN,this,t,this.vY,i,s,e,this.rN.CY(e)))}kY(t){return this.SY(new ym(this.rN,this,this.vY,[],t))}Ps(){if(this.Qo){this.Qo=!1;const t=Array.from(this.pY).sort(((t,i)=>t.Ko()-i.Ko()));this.pY.clear();for(const i of t)this.pY.add(i)}for(const t of this.pY)t.Ps();return this}zL(t,i){const s=this.xY.M();if(s&&this.gl.hV(s.x*this.gl.$z()*i,s.y*this.gl.$z()*i,s.width*this.gl.$z()*i,s.height*this.gl.$z()*i),1!==t)for(const i of this.pY)i.getVisible()&&i.zL(t);else for(const i of this.pY)i.getMouseInteractions()&&i.getVisible()&&i.zL(t);return this.gl.qz(!1),this}}class vy extends em{constructor(t){super(t)}}class by extends vy{constructor(t){super(t),this.TY="attribute";const{vertices:i,drawSize:s,drawMode:e}=xy(t.gl);this.wR=t.nV(i),this.cG=s,this.dG=e}Ky(t,i,s,e){return this.RR.lV(this.wR,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).QV(this.dG,0,this.cG,i),this}kz(){this.RR.yV(this.wR)}}const xy=t=>{const i=new Float32Array(324);let s=0;return i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,{vertices:i,drawSize:s/9,drawMode:t.TRIANGLES}};class My extends vy{constructor(t,i){super(t),this.TY="attribute",this.FY=i;const{vertices:s,indices:e}=_y();this.wR=t.nV(s),this.uG=t.OV(e),this.cG=e.length,this.dG=t.gl.TRIANGLES}Ky(t,i,s,e){return this.RR.lV(this.wR,0,{location:t.attribute("aEdge"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).XV(this.uG).dV(t.uniform("uEdgeRoundness"),this.FY/2).JV(this.dG,this.cG,0,i),this}kz(){this.RR.yV(this.wR),this.RR.yV(this.uG)}IY(t){return this.FY=t,this}PY(){return this.FY}}const _y=()=>{const t=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],i=[];let s=0;const e=[];let h=0;for(const r of t){const{normal:t,perpendA:n,perpendB:o}=r,a=Vi.multiply(n,-1),l=Vi.multiply(o,-1),u=s;i[s]={thicknessDirection:Vi.addVec(t,n,o),edge:Vi.addVec(a,l),normal:t},s+=1;const c=s;i[s]={thicknessDirection:Vi.addVec(t,a,o),edge:Vi.addVec(n,l),normal:t},s+=1;const d=s;i[s]={thicknessDirection:Vi.addVec(t,a,l),edge:Vi.addVec(n,o),normal:t},s+=1;const f=s;i[s]={thicknessDirection:Vi.addVec(t,n,l),edge:Vi.addVec(a,o),normal:t},s+=1,e[h+0]=d,e[h+1]=u,e[h+2]=f,e[h+3]=d,e[h+4]=c,e[h+5]=u,h+=6;const A=[{A:n,B:o},{A:a,B:o},{A:a,B:l},{A:n,B:l}];for(const e of A){e.thicknessDirection=Vi.addVec(t,e.A,e.B),e.stripVerticesA=[],e.stripVerticesB=[];const h=[{direction:e.A,other:e.B,vertices:e.stripVerticesA},{direction:e.B,other:e.A,vertices:e.stripVerticesB}];for(const r of h)for(let h=0;h<8;h+=1){const n=.5*h/7,o=Vi.normalize(Vi.lerp(t,r.direction,n)),a=Math.PI/2-Vi.angle(o,t),l=Vi.addVec(Vi.multiply(Vi.multiply(r.direction,-1),1-Math.cos(a)),Vi.multiply(Vi.multiply(t,-1),1-Math.sin(a)),Vi.multiply(r.other,-1)),u=s;i[s]={thicknessDirection:e.thicknessDirection,normal:o,edge:l};const c=i[s];s+=1,r.vertices.push({index:u,vertex:c})}}for(let t=0;t<A.length;t+=1){const i=A[t],s=A[t<A.length-1?t+1:0],r=t%2==0?i.stripVerticesB:i.stripVerticesA,n=t%2==0?s.stripVerticesB:s.stripVerticesA;for(let t=1;t<r.length;t+=1){const i=r[t-1],s=n[t-1],o=r[t],a=n[t];e[h+0]=i.index,e[h+1]=s.index,e[h+2]=a.index,e[h+3]=o.index,e[h+4]=i.index,e[h+5]=a.index,h+=6}}}const r=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],n=Math.PI/15,o=2*Math.PI/15;let a=s;for(const t of r){let h=0;i[s]={thicknessDirection:t,normal:{x:0,y:t.y,z:0},edge:{x:-t.x,y:0,z:-t.z}},s+=1,h+=1;for(let e=1;e<8.5;e+=1){const r=15===e?Math.PI:e*n,a=1*Math.cos(r)*t.y,l=Math.sin(r);for(let e=0;e<Math.ceil(3.75)+1;e+=1){const r=15===e?0:e*o,n=l*Math.cos(r)*1*t.x,u=l*Math.sin(r)*1*t.z,c={x:n,y:a,z:u},d=Vi.normalize({x:n,y:a,z:u});i[s]={thicknessDirection:t,normal:d,edge:{x:c.x-t.x,y:c.y-t.y,z:c.z-t.z}},s+=1,h+=1}}const r=[];for(let t=1;t<=Math.ceil(3.75);t+=1)r.push(a),15===t?r.push(a+1):r.push(a+t+1),r.push(a+t);const l=a+1,u=Math.ceil(3.75)+1;for(let t=0;t<6.5;t+=1)for(let i=0;i<Math.ceil(3.75);i+=1){let s=0;const e=l+(t+1)*u+i;let h=0;14===i?(s=l+t*u,h=l+(t+1)*u):(s=l+t*u+i+1,h=l+(t+1)*u+i+1),r.push(l+t*u+i),r.push(s),r.push(e),r.push(e),r.push(s),r.push(h)}e.push.apply(e,t.flipVertexOrder?r.reverse():r),a+=h}const l=new Float32Array(9*i.length);let u=0;for(const t of i)l[u+0]=t.edge.x,l[u+1]=t.edge.y,l[u+2]=t.edge.z,l[u+3]=t.normal.x,l[u+4]=t.normal.y,l[u+5]=t.normal.z,l[u+6]=t.thicknessDirection.x,l[u+7]=t.thicknessDirection.y,l[u+8]=t.thicknessDirection.z,u+=9;return{vertices:l,indices:new Uint16Array(e)}},wy=(t,i)=>{let s=t._V.Cz.get(i);return s||(s=void 0!==i&&i>0?new My(t,Rt(i,0,1)):new by(t),t._V.Cz.set(i,s),s)};class Cy extends am{rS(t){return this.Uz=this.qp.M(),this.qp.S(t),this}Cv(t){return this.DY=t,this}kv(){return this.DY}}class ky extends Cy{constructor(t,i,s,e,h){super(t,i,s),this.BY=t,this.gN=e,this.mN=h,this.rN=t.rN,this.RR=this.rN.oN()}lN(t){return t===this.gN&&{}}}class Ty extends ky{constructor(t,i,s,e,h){super(t,i,s,e,h),this.DY="cull-back",this.Ya=Wi,this.LY={},this.RY=[],this.AN=ZA({fillStyleSolid:()=>Y(this.be)&&this.be,fillStyleIndividual:()=>$(this.be)&&this.be,fillStylePaletted:()=>Z(this.be)&&this.be}),this.be=Ph.fillStyle,this.qp.S(hn)}Ps(t){const i=this.RY,s=this.be,e=s!==O,h=this.EY,r=this.ta()||this.zY!==h,n=this.Wz(),o=this.Bo.M(),a=this.Bo.i;if(e){for(const t of i)t.id=void 0!==t.id?String(t.id):void 0,t.xSize=void 0!==t.xSize&&t.xSize<0?-t.xSize:t.xSize,t.ySize=void 0!==t.ySize&&t.ySize<0?-t.ySize:t.ySize,t.zSize=void 0!==t.zSize&&t.zSize<0?-t.zSize:t.zSize;const t=11,e=this.VY||0;let h=e;for(const t of i){const i=t.id;void 0!==i&&void 0!==this.LY[i]||(h+=1)}let l,u=!1,d=!1;if(u=h!==e,d=u,l=!d&&(i.length<100?"chunks":"all"),u){const i=h*t,s=new Float32Array(i);this.IW&&s.set(this.IW),this.IW=s,this.OY=i,this.NY=e*t}const f=$(s)?s.getFallbackColor():void 0;for(const s of i){const i=s.id,e=void 0!==i&&this.LY[i],h=[s.xCenter,s.yCenter,s.zCenter,s.xSize,s.ySize,s.zSize,s.color?s.color.r:f?f.r:void 0,s.color?s.color.g:f?f.g:void 0,s.color?s.color.b:f?f.b:void 0,s.color?s.color.a:f?f.a:void 0,s.value];if(e){for(let i=0;i<t;i+=1)h[i]=void 0!==h[i]?h[i]:e.buffer[i];e.buffer.set(h)}else{const s=this.NY,e=new Float32Array(this.IW.buffer,s*Float32Array.BYTES_PER_ELEMENT,t);e.set(h),void 0!==i&&(this.LY[i]={location:s,buffer:e}),this.NY+=t}}if(d&&(this.lG=this.RR.nV(this.IW,!0)),"all"===l)this.RR.zV(this.lG,0,this.IW);else if("chunks"===l)for(const t of i){const i=t.id;if(void 0!==i){const t=this.LY[i];this.RR.zV(this.lG,t.location,t.buffer)}}if(r||n||a){const t=this.AN.fillStyleSolid(r),i=this.AN.fillStyleIndividual(r),s=this.AN.fillStylePaletted(r);t||i||s?(this.GY=wy(this.RR,this.WY()),this.cE=this.RR.oz(_g["3D"],_g.ColorShaded3D({dataType:i?"attribute":s?["lookup",s.getLookUpProperty(),s.lut]:"uniform",shadingStyle:this.qp.M().type}),_g.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:jA(this.dt),normalSource:this.GY.TY}),void 0!==this.EY&&_g.RoundedEdges3D),this.yY=o?this.RR.oz(_g["3D"],_g.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:jA(this.dt),normalSource:void 0}),_g.MousePicking,void 0!==this.EY&&_g.RoundedEdges3D):void 0):(this.GY=void 0,this.cE=void 0,this.yY=void 0)}if(i.length>0){const i=c({x:Oi,y:Oi,z:Oi},{x:Ni,y:Ni,z:Ni});for(let s=0;s<this.NY;s+=t){const t=this.IW[s+0],e=this.IW[s+3]/2,h=t-e,r=t+e,n=this.IW[s+1],o=this.IW[s+4]/2,a=n-o,l=n+o,u=this.IW[s+2],c=this.IW[s+5]/2,d=u-c,f=u+c;i.min.x=i.min.x<h?i.min.x:h,i.min.y=i.min.y<a?i.min.y:a,i.min.z=i.min.z<d?i.min.z:d,i.max.x=i.max.x>r?i.max.x:r,i.max.y=i.max.y>l?i.max.y:l,i.max.z=i.max.z>f?i.max.z:f}this.Ya=i}this.VY=h,this.RY.length=0}return this.ha(s),this.zY=h,this.qp.i=!1,this.Bo.i=!1,this}zL(t){const i=1===t?this.yY:this.cE,s=this.GY,e=this.lG,h=this.be,r=this.VY,n=this.qp.M();return i&&e&&void 0!==r&&this.RR.aV(i,((o,a,l)=>{let u=!1;const c=a("aPos"),d=a("aOffsetAxis");this.RR.jR(i).IV(o("uScale"),this.BY.aE.fV()).IV(o("uDisp"),this.BY.aE.AV()).DV(o("uViewProjectionMatrix"),this.UY).dV(o("uIsHighlighted"),1===t||2===t?0:this.zo).AR(o("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(o("uRenderEffectMask"),2===t?1:0);const f={location:c,size:3},A={location:d,size:3},g={location:void 0,size:4};if(1!==t&&"phong"===n.type&&this.RR.IV(o("uCameraLoc"),this.YY).IV(o("uLightLoc"),this.HY).dV(o("uAmbientReflection"),n.ambientReflection).dV(o("uSpecularReflection"),n.specularReflection).dV(o("uDiffuseReflection"),n.diffuseReflection).dV(o("uShininess"),n.shininess).AR(o("uLightColor"),n.specularColor).AR(o("uAmbientColor"),n.ambientColor),1===t)this.RR.AR(o("uColor"),this.mN);else if(Y(h))this.RR.AR(o("uColorDiffuse"),h.getColor());else if($(h)){const t=a("aColor");g.location=t}else if(Z(h)){const t=QA(h,this,void 0);if(!t&&h.lut.percentageValues)return!1;this.RR.LO(l,h.lut,t)}return e&&(this.RR.lV(e,1,f,A,g,{location:void 0,size:1}),s.Ky(l,r,"phong"===n.type&&1!==t,!1),u=!0),u})),this}dispose(){return super.dispose(),this.lG&&(this.RR.yV(this.lG),this.lG=void 0),this.cE=void 0,this}VR(){return this.dispose(),this}gS(t){this.RY=ci(this.RY,t,{canReturnB:!0})}Ce(t){return this.be=qh(this.be,t),this}Eh(){return this.be}fS(t){return this.EY=void 0!==t&&t>0?Rt(t,0,1):void 0,this}WY(){return this.EY}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}aS(){return this.Ya.max.z}lS(){return this.Ya.min.z}vl(){return 0}bl(){return 0}uS(){return 0}ta(){return tr(this.ia,this.be)}ha(t){this.ia=t}}class Fy extends em{constructor(t,i){super(t),this.TY="custom",this.oG=i;const{vertices:s,drawSize:e}=this.aG();this.lG=t.nV(s),this.cG=e}jR(t){return this.RR.lV(this.lG,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}Ky(t){return this.RR.QV(this.RR.gl.TRIANGLE_STRIP,0,this.cG,t),this}aG(){const t=this.oG,i=new Float32Array(2*(t+1)*3);let s=0;for(let e=0;e<=t;e+=1){const h=2*Math.PI*e/t,r=Math.cos(h),n=Math.sin(h);for(const t of[0,1])i[s+0]=t,i[s+1]=r,i[s+2]=n,s+=3}return{vertices:i,drawSize:s/3}}kz(){this.RR.yV(this.lG)}}const Iy=(t,i=16)=>{let s=t._V._z.get(i);return s||(s=new Fy(t,i),t._V._z.set(i,s),s)};class Py extends ky{constructor(t,i,s,e,h){super(t,i,s,e,h),this.DY="cull-back",this.$Y=Wi,this.jY=[],this.ZY=!1,this.lu=Ph.lineStyle,this.qp.S(tn)}Ps(t){const i=this.ZY,s=this.lu,e=this.cu!==s,h=this.Wz(),r=i;if(i){const t=hi(this.jY);this.QY=this.RR.nV(t,!1,this.QY)}if(r&&(this.$Y=ss(this.jY)),e||h){const t=8,i=he(s)&&s.getFillStyle(),e=1===s.getThickness()?"primitive":"instanced";this.bG=void 0,Y(i)&&("primitive"===e?this.bG={type:e,shader:this.RR.oz(_g["3D"],_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0}),_g.Color({dataType:"uniform"})),fillStyle:i}:"instanced"===e&&(this.bG={type:e,shader:this.RR.oz(_g["3D"],_g.ColorShaded3D({dataType:"uniform",shadingStyle:this.qp.M().type}),_g.LineInstanced3D({axisWorldTranslation:jA(this.dt)})),geometry:Iy(this.RR,t),fillStyle:i}))}return this.ZY=!1,this.cu=s,this.qp.i=!1,this}zL(t){if(1===t)return this;const i=this.RR.gl,s=this.bG,e=this.QY,h=this.lu,r=this.qp.M();if(s&&e&&he(h))switch(s.type){case"instanced":{const n=.5*this.ks.Op(h.thickness),o=s.fillStyle.getColor(),a=s.shader,l=s.geometry;this.RR.aV(a,((s,h,u)=>{this.RR.jR(a).IV(s("uScale"),this.BY.aE.fV()).IV(s("uDisp"),this.BY.aE.AV()).DV(s("uViewProjectionMatrix"),this.UY).AR(s("uColorDiffuse"),o).dV(s("uOffsetWU"),n).dV(s("uIsHighlighted"),this.zo).AR(s("uHighlightColorOffset"),2===t?F:this.Go).dV(s("uRenderEffectMask"),2===t?1:0),"phong"===r.type&&this.RR.IV(s("uCameraLoc"),this.YY).IV(s("uLightLoc"),this.HY).dV(s("uAmbientReflection"),r.ambientReflection).dV(s("uSpecularReflection"),r.specularReflection).dV(s("uDiffuseReflection"),r.diffuseReflection).dV(s("uShininess"),r.shininess).AR(s("uLightColor"),r.specularColor).AR(s("uAmbientColor"),r.ambientColor),i.bindBuffer(i.ARRAY_BUFFER,e);const c=h("aLocationA"),d=h("aLocationB");return i.vertexAttribPointer(c,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(c,1),i.enableVertexAttribArray(c),i.vertexAttribPointer(d,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(d,1),i.enableVertexAttribArray(d),l.jR(u).Ky(this.jY.length/2),!0}));break}case"primitive":{const r=he(h)?h.getFillStyle():void 0,n=r&&Y(r)?r.getColor():void 0;if(n){const h=s.shader;this.RR.aV(h,((s,r)=>(this.RR.jR(h).IV(s("uScale"),this.BY.aE.fV()).IV(s("uDisp"),this.BY.aE.AV()).DV(s("uViewProjectionMatrix"),this.UY).AR(s("uColor"),n).dV(s("uIsHighlighted"),this.zo).AR(s("uHighlightColorOffset"),2===t?F:this.Go).dV(s("uRenderEffectMask"),2===t?1:0).lV(e,void 0,{location:r("aPos"),size:3}).Ky(i.LINES,this.jY.length),!0)))}break}}return this}nl(t){for(let i=0;i<t.length-1;i+=1){const s=t[i],e=t[i+1];this.jY.push(s),this.jY.push(e)}return this.ZY=!0,{cs(){return this},ys(){return this}}}Nt(){return this.jY.length=0,this.ZY=!0,this}Ap(){return[]}bd(t){}Re(t){return this.lu="function"==typeof t?t(this.lu):t,this}uu(){return this.lu}VR(){return this.QY&&(this.RR.yV(this.QY),this.QY=void 0),this}bt(){return this.$Y.max.x}vt(){return this.$Y.min.x}Mt(){return this.$Y.max.y}xt(){return this.$Y.min.y}aS(){return this.$Y.max.z}lS(){return this.$Y.min.z}vl(){const t=this.lu;return t===at?0:t.getThickness()}bl(){const t=this.lu;return t===at?0:t.getThickness()}uS(){const t=this.lu;return t===at?0:t.getThickness()}}class Dy extends em{constructor(t,i,s){super(t),this.TY="gpu-calculate",this.JY=i,this.KY=s;const{vertices:e,drawSize:h}=this.aG();this.lG=t.nV(e),this.cG=h}Ky(t,i,s,e){return this.RR.lV(this.lG,0,{location:t.attribute("aInstanceGeo"),size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).QV(this.RR.gl.TRIANGLES,0,this.cG,i),this}aG(){const t=this.KY,i=this.JY,s=new Float32Array(6*(6*i+6*(t-2)*i));let e=0;const h=2*Math.PI/i,r=Math.PI/t,n=(t,i,n,o,a)=>{const l=i*h,u=Math.PI/2-t*r,c=Math.cos(u),d=c*Math.cos(l),f=c*Math.sin(l),A=Math.sin(u);s[e]=d,s[e+1]=A,s[e+2]=f,s[e+3]=n,s[e+4]=o,s[e+5]=a,e+=6};for(let s=0;s<t;s+=1)for(let e=0;e<i;e+=1)s>0&&(n(s,e,1,0,0),n(s,e+1,1,1,0),n(s+1,e,0,0,1)),s<t-1&&(n(s,e+1,1,1,0),n(s+1,e+1,0,1,0),n(s+1,e,0,0,1));return e!==s.length&&bi(0,(()=>{this.RR.cA.Hn&&e>s.length&&Tt.console.warn("LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.\nA point series 3D component might have missing points.\n\nThis warning can be omitted with LightningChartOptions.warnings")})),{vertices:s,drawSize:e/6}}kz(){this.RR.yV(this.lG)}}const By=(t,i)=>{const s=Math.round(i);s<3&&bi(0,Bt);const e=s;let h=t._V.wz.get(Array.from(t._V.wz.keys()).find((t=>t.sectors===s&&t.stacks===e)));return h||(h=new Dy(t,s,e),t._V.wz.set({sectors:s,stacks:e},h),h)};class Ly extends ky{constructor(t,i,s,e,h){super(t,i,s,e,h),this.DY="cull-back",this.QM=[],this.bG={},this.vW=new Vm(this.QM,(t=>t.vertexBuffer&&this.RR.yV(t.vertexBuffer)),!0),this.yu=[],this.Ha=0,this.$a=[],this.Xa=0,this.Ya=Wi,this.ja=Wi,this.AN=ZA({lineStyleSolid:()=>{const t=this.lu;return he(t)&&t},lineFillSolid:()=>{const t=this.lu.getFillStyle();return Y(t)&&t},lineFillPaletted:()=>{const t=this.lu.getFillStyle();return Z(t)&&t},jointStyleTriangulatedPoints:()=>mh(this.mS)&&this.mS,jointSizeTriangulated:()=>{const t=this.mS;return mh(t)&&t.getSize()},jointFillSolid:()=>{const t=this.mS.getFillStyle();return Y(t)&&t},jointFillPaletted:()=>{const t=this.mS.getFillStyle();return Z(t)&&t},wireframeLineStyleSolid:()=>{const t=mh(this.mS)&&this.mS.getWireframeStyle();return he(t)&&t},wireframeFillSolid:()=>{const t=mh(this.mS)&&this.mS.getWireframeStyle(),i=t&&t.getFillStyle();return Y(i)&&i}}),this.Qa=!1,this.lu=Ph.lineStyle,this.mS=Ph.pointStyle3D,this.qp.S(hn),this.wW={attributesPerVertex:3,prepareRenderData:(t,i)=>hi(t)}}Ps(t){const i=this.Qa,s=this.$a,e=this.Xa,h=e>0,r=this.lu,n=r!==this.cu,o=this.mS,a=o!==this.qY,l=this.Wz(),u=this.Bo.i,c=this.Bo.M();this.ja&&(this.Ya=hs(this.Ya,this.ja),this.ja=void 0),h&&(this.yu=ci(this.yu,s,{canReturnB:!0}),this.Ha+=e);let d=s,f=e;if(i&&(this.QM.forEach((t=>{t.existingCoordinatesCount=0,t.existingDataPointsCount=0,t.boundaries=Wi})),this.vW.cW(),d=this.yu,f=this.Ha),f>0){const t=1e5,i=Math.floor(this.rN.tH/(this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),s=this.Uo("ApplicationType",(t=>"UserSeries"===t.type))?f:1e3,e=Rt(s,t,i);this.vW.oW(d,e,((t,i,s,e)=>({existingDataPointsCount:s-e,existingCoordinatesCount:s,allocatedCoordinatesCount:t,jointPointsCount:e,lastDataPoint:i[s-1],boundaries:Wi,vertexBuffer:this.RR.EV(t*this.wW.attributesPerVertex,this.wW.prepareRenderData(i,s))})),((t,i,s,e)=>{this.RR.zV(t.vertexBuffer,t.existingCoordinatesCount*this.wW.attributesPerVertex,this.wW.prepareRenderData(i,s)),t.existingDataPointsCount+=s-e,t.existingCoordinatesCount+=s,t.jointPointsCount+=e,t.lastDataPoint=i[s-1]}))}if(n||a||l||u){const t={},i=this.AN.lineStyleSolid(n),s=this.AN.lineFillSolid(n),e=this.AN.lineFillPaletted(n),h=s||e,o=this.AN.jointStyleTriangulatedPoints(a),l=this.AN.jointSizeTriangulated(a),u=this.AN.jointFillSolid(a),d=this.AN.jointFillPaletted(a),f=u||d,A=this.AN.wireframeLineStyleSolid(a),g=this.AN.wireframeFillSolid(a),m=r.getThickness()<0||1===r.getThickness()&&this.Uo("ApplicationType",(t=>"InternalUI"===t.type))?"primitive":"instanced",y=e?["lookup",e.getLookUpProperty(),e.lut]:"uniform";if("primitive"===m&&h?t.lines={type:"primitive",fillStyleSolid:s,fillStylePaletted:e,shader:this.RR.oz(_g["3D"],_g.Color({dataType:y}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})),mousePicking:c?{shader:this.RR.oz(_g["3D"],_g.MousePicking,_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0}))}:void 0}:"instanced"===m&&i&&h&&(t.lines={type:"instanced",lineStyleSolid:i,fillStyleSolid:s,fillStylePaletted:e,shader:this.RR.oz(_g["3D"],_g.ColorShaded3D({dataType:y,shadingStyle:this.qp.M().type}),_g.LineInstanced3D({axisWorldTranslation:jA(this.dt)})),geometry:Ry(this.RR,i.getThickness()),mousePicking:c?{shader:this.RR.oz(_g["3D"],_g.MousePicking,_g.LineInstanced3D({axisWorldTranslation:jA(this.dt)}))}:void 0}),t.markers=void 0,f&&o){const i=li(o.getShape(),{cube:()=>wy(this.RR),sphere:()=>Ey(this.RR,o)});t.markers={geometry:i,pointStyle:o,pointSizeNWU:"number"==typeof l&&l,pointSizeAxis:"object"==typeof l&&l,fillStyleSolid:u,fillStylePaletted:d,shader:this.RR.oz(_g["3D"],_g.ColorShaded3D({dataType:d?["lookup",d.getLookUpProperty(),d.lut]:"uniform",shadingStyle:this.qp.M().type,wireframe:!1!==g}),_g.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof l?"nwu":"axis",symmetric:"number"==typeof l,halved:!0},axisWorldTranslation:jA(this.dt),normalSource:i.TY})),mousePicking:c?{shader:this.RR.oz(_g["3D"],_g.MousePicking,_g.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof l?"nwu":"axis",symmetric:"number"==typeof l,halved:!0},axisWorldTranslation:jA(this.dt),normalSource:void 0}))}:void 0,wireframe:A&&g&&{thickness:A.getThickness(),fillStyleSolid:g}}}this.bG=t}return this.Qa=!1,this.$a=[],this.Xa=0,this.cu=r,this.qY=o,this.qp.i=!1,this.Bo.i=!1,this}zL(t){var i,s;const e=this.RR.gl,{lines:h,markers:r}=this.bG,n=this.qp.M(),o=1===t?null===(i=null==h?void 0:h.mousePicking)||void 0===i?void 0:i.shader:null==h?void 0:h.shader;if(h&&o&&"instanced"===h.type){const i=o,{geometry:s,lineStyleSolid:r,fillStyleSolid:a,fillStylePaletted:l}=h;this.RR.aV(i,((h,o,u)=>{let c=!1;if(this.RR.jR(i).IV(h("uScale"),this.BY.aE.fV()).IV(h("uDisp"),this.BY.aE.AV()).DV(h("uViewProjectionMatrix"),this.UY).dV(h("uOffsetWU"),this.ks.Op(r.getThickness())).dV(h("uIsHighlighted"),1===t||2===t?0:this.zo).AR(h("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(h("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===n.type&&this.RR.IV(h("uCameraLoc"),this.YY).IV(h("uLightLoc"),this.HY).dV(h("uAmbientReflection"),n.ambientReflection).dV(h("uSpecularReflection"),n.specularReflection).dV(h("uDiffuseReflection"),n.diffuseReflection).dV(h("uShininess"),n.shininess).AR(h("uLightColor"),n.specularColor).AR(h("uAmbientColor"),n.ambientColor),1===t)this.RR.AR(h("uColor"),this.mN);else if(a)this.RR.AR(h("uColorDiffuse"),a.getColor());else if(l){const t=QA(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.RR.LO(u,l.lut,t)}return this.QM.forEach((t=>{e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer);const i=o("aLocationA"),h=o("aLocationB");e.vertexAttribPointer(i,3,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(i,1),e.enableVertexAttribArray(i),e.vertexAttribPointer(h,3,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(h,1),e.enableVertexAttribArray(h),s.jR(u).Ky(t.existingCoordinatesCount-1),c=!0})),c}))}if(h&&o&&"primitive"===h.type){const i=o,{fillStyleSolid:s,fillStylePaletted:r}=h;this.RR.aV(i,((h,n,o)=>{let a=!1;if(this.RR.jR(i).IV(h("uScale"),this.BY.aE.fV()).IV(h("uDisp"),this.BY.aE.AV()).DV(h("uViewProjectionMatrix"),this.UY).dV(h("uIsHighlighted"),1===t||2===t?0:this.zo).AR(h("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(h("uRenderEffectMask"),2===t?1:0),1===t)this.RR.AR(h("uColor"),this.mN);else if(s)this.RR.AR(h("uColor"),s.getColor());else if(r){const t=QA(r,this,void 0);if(!t&&r.lut.percentageValues)return!1;this.RR.LO(o,r.lut,t)}return this.QM.forEach((t=>{this.RR.lV(t.vertexBuffer,void 0,{location:n("aPos"),size:3}).Ky(e.LINE_STRIP,t.existingCoordinatesCount),a=!0})),a}))}const a=1===t?null===(s=null==r?void 0:r.mousePicking)||void 0===s?void 0:s.shader:null==r?void 0:r.shader;if(r&&a){const i=a,{geometry:s,fillStyleSolid:e,fillStylePaletted:h,pointSizeAxis:o,pointSizeNWU:l,wireframe:u}=r;this.RR.aV(i,((r,a,c,d)=>{let f=!1;if(this.RR.jR(i).IV(r("uScale"),this.BY.aE.fV()).IV(r("uDisp"),this.BY.aE.AV()).DV(r("uViewProjectionMatrix"),this.UY).dV(d("uRatioNwuWu"),this.BY.iH()).dV(r("uIsHighlighted"),1===t||2===t?0:this.zo).AR(r("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(r("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===n.type&&this.RR.IV(r("uCameraLoc"),this.YY).IV(r("uLightLoc"),this.HY).dV(r("uAmbientReflection"),n.ambientReflection).dV(r("uSpecularReflection"),n.specularReflection).dV(r("uDiffuseReflection"),n.diffuseReflection).dV(r("uShininess"),n.shininess).AR(r("uLightColor"),n.specularColor).AR(r("uAmbientColor"),n.ambientColor),1===t)this.RR.AR(r("uColor"),this.mN);else if(e)this.RR.AR(r("uColorDiffuse"),e.getColor());else if(h){const t=QA(h,this,void 0);if(!t&&h.lut.percentageValues)return!1;this.RR.LO(c,h.lut,t)}return u&&1!==t&&this.RR.dV(r("uWireframeThickness"),u.thickness).AR(r("uWireframeColor"),u.fillStyleSolid.getColor()),!1!==o&&this.RR.IV(r("uOffsetAxis"),[o.x,o.y,o.z]),!1!==l&&this.RR.dV(r("uOffsetNWU"),l),this.QM.forEach((i=>{this.RR.lV(i.vertexBuffer,1,{location:a("aPos"),size:3}),s.Ky(c,i.existingCoordinatesCount,"phong"===n.type&&1!==t,Boolean(u)&&1!==t),f=!0})),f}))}return this}nl(t,i){Array.isArray(t)||(t=[t]),this.$a=ci(this.$a,t,{canReturnB:!0}),this.Xa+=t.length;const s=i||ss(t);return this.ja=this.ja?hs(this.ja,s):s,this}Re(t){return this.lu="function"==typeof t?t(this.lu):t,this}uu(){return this.lu}Rp(t){return this.mS="function"==typeof t?t(this.mS):t,this}sH(){return this.mS}bt(){return this.ja?Math.max(this.ja.max.x,this.Ya.max.x):this.Ya.max.x}vt(){return this.ja?Math.min(this.ja.min.x,this.Ya.min.x):this.Ya.min.x}Mt(){return this.ja?Math.max(this.ja.max.y,this.Ya.max.y):this.Ya.max.y}xt(){return this.ja?Math.min(this.ja.min.y,this.Ya.min.y):this.Ya.min.y}aS(){return this.ja?Math.max(this.ja.max.z,this.Ya.max.z):this.Ya.max.z}lS(){return this.ja?Math.min(this.ja.min.z,this.Ya.min.z):this.Ya.min.z}vl(){return Pi(this.lu)}bl(){return Pi(this.lu)}uS(){return Pi(this.lu)}tl(){return this.yu}qa(){return this.$a}ol(){return this.Ha}al(){return this.Xa}Nt(){return this.Qa=!0,this.yu.length=0,this.Ha=0,this.$a=[],this.Xa=0,this.Ya=Wi,this.ja=void 0,this}dispose(){return super.dispose(),this.vW.dW(),this.bG={},this}VR(){return this.dispose(),this}}const Ry=(t,i)=>Iy(t,i>50?20:i>20?16:i>10?12:i>5?8:6),Ey=(t,i)=>{const s=i.getSize();return By(t,"number"==typeof s?s>50?20:s>20?16:s>10?12:s>5?8:6:20)};class zy extends ky{constructor(t,i,s,e,h){super(t,i,s,e,h),this.DY="disabled",this.eH=!1,this.hH=!1,this.rH={x:1,y:1,z:1},this.Dv={x:0,y:0,z:0},this.Pv={x:0,y:0,z:0},this.Bv={x:0,y:0,z:0},this.Lv={x:1,y:1,z:1},this.nH=El.projectionOrthographic(-1,1,-1,1,1,-1),this.oH=El.projectionOrthographic(-1,1,-1,1,1,-1),this.aH=!1,this.AN=ZA({fillStyleSolid:()=>Y(this.be)&&this.be,fillStyleValuePalette:()=>Z(this.be)&&"value"===this.be.lookUpProperty&&this.be}),this.be=Ph.fillStyle,this.qp.S(hn)}Ps(t){var i;const s=this.Wz(),e=this.Bo.M(),h=this.Bo.i,r=this.ta();this.AN.fillStyleSolid(r);const n=this.AN.fillStyleValuePalette(r),o=this.Bv,a=this.Lv;if(this.eH&&this.lH&&(this.lG=this.RR.nV(this.lH.vertices,void 0,this.lG),this.uG=this.RR.OV(this.lH.indices,this.uG),this.uH=this.lH.indices.length),"phong"===this.qp.M().type&&(s||this.eH)&&(null===(i=this.lH)||void 0===i?void 0:i.normals)&&(this.cH=this.RR.nV(this.lH.normals,void 0,this.cH)),!this.dH&&n&&"value"===n.lookUpProperty&&this.lH&&(this.dH=new Float32Array(this.lH.vertices.length/3),this.hH=!0),this.dH&&this.hH&&(this.fH=this.RR.nV(this.dH,void 0,this.fH)),s||r||h){if(n&&"value"!==n.lookUpProperty)throw new Error("LightningChart JS MeshModel3D does not support look up by x/y/z. Must be value");this.cE=this.RR.oz(_g["3D"],_g.ColorShaded3D({dataType:n?["lookup","value",n.lut]:"uniform",shadingStyle:this.qp.M().type,wireframe:!1}),_g.Model3D({normalSource:"phong"===this.qp.M().type?"attribute":void 0})),this.yY=e?this.RR.oz(_g["3D"],_g.MousePicking,_g.Model3D({normalSource:void 0})):void 0}if(this.aH){const t=El.projectionOrthographic(-1,1,-1,1,1,-1);this.oH=El.rotateXYZ(t,o),this.nH=El.translate(t,a.x/2,a.y/2,a.z/2),this.nH=El.rotateXYZ(this.nH,o),this.nH=El.translate(this.nH,-a.x/2,-a.y/2,-a.z/2),this.aH=!1}return this.qp.i=!1,this.ha(this.be),this.Bo.i=!1,this.eH=!1,this.hH=!1,this}zL(t){const i=1===t?this.yY:this.cE,s=1===t,e=this.uG,h=this.uH,r=this.lG,n=this.cH,o=this.fH,a=this.Dv,l=this.Pv,u=this.rH,c=this.Lv,d=this.nH,f=this.oH,A=this.AN.fillStyleValuePalette(!1),g=this.AN.fillStyleSolid(!1),m=this.qp.M(),y={location:void 0,size:1};return i&&r&&e&&h?(this.RR.aV(i,((p,S,v,b)=>{if(this.RR.jR(i).IV(p("uScale"),this.BY.aE.fV()).IV(p("uDisp"),this.BY.aE.AV()).DV(p("uViewProjectionMatrix"),this.UY).dV(p("uIsHighlighted"),1===t||2===t?0:this.zo).AR(p("uHighlightColorOffset"),this.Go).dV(p("uRenderEffectMask"),2===t?1:0),s)this.RR.AR(p("uColor"),this.mN);else{if(this.be===O)return!1;if(g)this.RR.AR(p("uColorDiffuse"),g.getColor());else if(A){if(!o)return!1;const t=A.getPalette();y.location=S("aLookupValue"),this.RR.LO(v,t,void 0).lV(o,void 0,y)}}return"phong"!==m.type||s||(this.RR.IV(p("uCameraLoc"),this.YY).IV(p("uLightLoc"),this.HY).dV(p("uAmbientReflection"),m.ambientReflection).dV(p("uSpecularReflection"),m.specularReflection).dV(p("uDiffuseReflection"),m.diffuseReflection).dV(p("uShininess"),m.shininess).AR(p("uLightColor"),m.specularColor).AR(p("uAmbientColor"),m.ambientColor).DV(p("uModelRotationNormals"),f),n&&this.RR.lV(n,void 0,{location:v.attribute("aNormal"),size:3})),this.RR.DV(p("uModelRotation"),d).IV(p("uModelScale"),[u.x,u.y,u.z]).IV(p("uLocationAxis"),[a.x,a.y,a.z]).IV(p("uModelAlignment"),[l.x,l.y,l.z]).IV(p("uModelSize"),[c.x,c.y,c.z]),this.RR.lV(r,0,{location:v.attribute("aGeoPos"),size:3}).XV(e).ZV(h,this.RR.gl.TRIANGLES),!0})),this):this}dispose(){return super.dispose(),this.lG&&(this.RR.yV(this.lG),this.lG=void 0),this.uG&&(this.RR.yV(this.uG),this.uG=void 0),this.cH&&(this.RR.yV(this.cH),this.cH=void 0),this.fH&&(this.RR.yV(this.fH),this.fH=void 0),this.cE=void 0,this.yY=void 0,this.lH=void 0,this.dH=void 0,this}VR(){return this.dispose(),this}Ev(t){return this.lH=t,this.eH=!0,this.Lv=t.modelSize,this}Vv(t){return this.dH=t,this.hH=!0,this}Ce(t){return this.be=qh(this.be,t),this}Eh(){return this.be}Ov(t){return this.rH=t,this}fV(){return this.rH}Nv(t){return this.Dv=t,this}Gv(t){return this.Pv=t,this}Wv(t){return this.Bv=t,this.aH=!0,this}Uv(t){return this.DY=t,this}Yv(){return this.DY}bt(){return Ni}vt(){return Oi}Mt(){return Ni}xt(){return Oi}aS(){return Ni}lS(){return Oi}vl(){return 0}bl(){return 0}uS(){return 0}ta(){return tr(this.ia,this.be)}ha(t){this.ia=t}}class Vy extends ky{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.DY="cull-back",this.QM=[],this.vW=new Vm(this.QM,(t=>t.vertexBuffer&&this.RR.yV(t.vertexBuffer)),!1),this.yu=[],this.Ha=0,this.$a=[],this.Xa=0,this.Ya=Wi,this.ja=Wi,this.Qa=!1,this.AN=ZA({fillStyleSolid:()=>{const t=this.SS.getFillStyle();return Y(t)&&t},fillStyleIndividual:()=>{const t=this.SS.getFillStyle();return $(t)&&t},fillStylePalette:()=>{const t=this.SS.getFillStyle();return Z(t)&&t},triangulatedPointStyle:()=>{const t=this.SS;return mh(t)&&t},wireframeLineStyleSolid:()=>{const t=mh(this.SS)&&this.SS,i=t&&t.getWireframeStyle();return he(i)&&i},wireframeFillStyleSolid:()=>{const t=mh(this.SS)&&this.SS,i=t&&t.getWireframeStyle(),s=i&&i.getFillStyle();return Y(s)&&s}}),this.Ja=void 0,this.Un=r,this.SS=Ph.pointStyle3D,this.qp.S(hn);const n=!0===(null==r?void 0:r.individualPointColorEnabled),o=!0===(null==r?void 0:r.individualPointSizeEnabled),a=!0===(null==r?void 0:r.individualLookupValuesEnabled),l=!0===(null==r?void 0:r.individualPointSizeAxisEnabled);let u,c,d,f,A=0;A+=3,n&&(u=A,A+=4),o&&(c=A,A+=1),a&&(d=A,A+=1),l&&(f=A,A+=3);const g=((t,i,s,e)=>t||i||s||e?!t||i||s||e?t||!i||s||e?t||i||!s||e?t||i||s||!e?(h,r,n)=>{const o=3+(t?4:0)+(i?1:0)+(s?1:0)+(e?3:0),a=h.length,l=new Float32Array(a*o);let u=0,c=u;for(let t=0;t<a;t+=1){const i=h[t];l[c+0]=i.x,l[c+1]=i.y,l[c+2]=i.z,c+=o}if(u+=3,t){const t=n&&$(n)&&n.getFallbackColor()||T;c=u;for(let i=0;i<a;i+=1){const s=h[i].color||t;l[c+0]=s.r,l[c+1]=s.g,l[c+2]=s.b,l[c+3]=s.a,c+=o}u+=4}if(i){const t=r&&r.getSize();let i=1;"number"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.size?s.size:i;l[c+0]=e,c+=o}u+=1}if(s){c=u;for(let t=0;t<a;t+=1){const i=h[t];l[c+0]=void 0!==i.value?i.value:-34028234663852886e22,c+=o}u+=1}if(e){const t=r&&r.getSize();let i={x:1,y:1,z:1};"object"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.sizeAxisX?s.sizeAxisX:i.x,r=void 0!==s.sizeAxisY?s.sizeAxisY:i.y,n=void 0!==s.sizeAxisZ?s.sizeAxisZ:i.z;l[c+0]=e,l[c+1]=r,l[c+2]=n,c+=o}u+=3}return l}:(t,i,s)=>((t,i)=>{const s=i&&i.getSize();let e={x:1,y:1,z:1};"object"==typeof s&&(e=s);const h=t.length,r=new Float32Array(6*h);let n=0;for(let i=0;i<h;i+=1){const s=t[i];r[n+0]=s.x,r[n+1]=s.y,r[n+2]=s.z;const h=void 0!==s.sizeAxisX?s.sizeAxisX:e.x,o=void 0!==s.sizeAxisY?s.sizeAxisY:e.y,a=void 0!==s.sizeAxisZ?s.sizeAxisZ:e.z;r[n+3]=h,r[n+4]=o,r[n+5]=a,n+=6}return r})(t,i):(t,i,s)=>(t=>{const i=t.length,s=new Float32Array(4*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=i.z,s[h+3]=void 0!==i.value?i.value:-34028234663852886e22,h+=4}return s})(t):(t,i,s)=>((t,i)=>{const s=i&&i.getSize();let e=1;"number"==typeof s&&(e=s);const h=t.length,r=new Float32Array(4*h);for(let i=0,s=0;i<h;i+=1){const h=t[i];r[s+0]=h.x,r[s+1]=h.y,r[s+2]=h.z;const n=void 0!==h.size?h.size:e;r[s+3]=n,s+=4}return r})(t,i):(t,i,s)=>((t,i)=>{const s=i&&$(i)&&i.getFallbackColor()||T,e=t.length,h=new Float32Array(7*e);for(let i=0,r=0;i<e;i+=1){const e=t[i];h[r+0]=e.x,h[r+1]=e.y,h[r+2]=e.z;const n=e.color||s;h[r+3]=n.r,h[r+4]=n.g,h[r+5]=n.b,h[r+6]=n.a,r+=7}return h})(t,s):(t,i,s)=>hi(t))(n,o,a,l);this.wW={individualPointColorEnabled:n,individualPointSizeEnabled:o,individualLookupValuesEnabled:a,individualPointSizeAxisEnabled:l,attributesPerVertex:A,attributeOffsetCoordinate:0,attributeOffsetColor:u,attributeOffsetSize:c,attributeOffsetLookUpValue:d,attributeOffsetPointSize3D:f,prepareRenderData:(t,i)=>g(t,this.SS,this.SS.fillStyle)}}Ps(t){const i=this.Qa,s=this.$a,e=this.Xa,h=e>0,r=this.SS,n=this.SS!==this.AH,o=this.Bo.M(),a=this.Bo.i,l=this.Wz();this.ja&&(this.Ya=hs(this.Ya,this.ja),this.ja=void 0),h&&(this.yu=ci(this.yu,s,{canReturnB:!0}),this.Ha+=e);let u=s,c=e;if(i&&(this.QM.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.boundaries=Wi})),this.vW.cW(),u=this.yu,c=this.Ha),c>0){const t=Math.floor(this.rN.tH/(this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),i=Rt(c,1e5,t);this.vW.oW(u,i,((t,i,s)=>({existingDataPointsCount:s,existingCoordinatesCount:s,allocatedCoordinatesCount:t,boundaries:Wi,vertexBuffer:this.RR.EV(t*this.wW.attributesPerVertex,this.wW.prepareRenderData(i,s))})),((t,i,s)=>{this.RR.zV(t.vertexBuffer,t.existingCoordinatesCount*this.wW.attributesPerVertex,this.wW.prepareRenderData(i,s)),t.existingDataPointsCount+=s,t.existingCoordinatesCount=t.existingDataPointsCount}))}const d=r.getFillStyle(),f=this.AN.fillStyleSolid(n),A=this.AN.fillStyleIndividual(n),g=this.AN.fillStylePalette(n),m=d===O&&O;if(n||l||a){let t;const i=r.getSize(),s=this.wW.individualPointColorEnabled,e=this.wW.individualPointSizeEnabled,h=this.wW.individualPointSizeAxisEnabled,a=this.wW.individualLookupValuesEnabled;if(A&&!s){const t="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw Tt.alert(t),new Error(t)}if(g&&"value"===g.getLookUpProperty()&&!a){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Tt.alert(t),new Error(t)}const l=this.AN.wireframeLineStyleSolid(n),u=this.AN.wireframeFillStyleSolid(n);if(f||A||g||u){const s=A?"attribute":g?["lookup",g.getLookUpProperty(),g.lut]:"uniform",n=e&&"number"==typeof i,a=h&&"object"==typeof i,c=n||a?"attribute":"uniform";if(mh(r)){const h=li(r.getShape(),{cube:()=>wy(this.RR),sphere:()=>Oy(this.RR,r,e)});t={type:"instanced",shader:this.RR.oz(_g["3D"],_g.ColorShaded3D({dataType:s,shadingStyle:this.qp.M().type,wireframe:!1!==u}),_g.VertexLocation({offset:{dataType:c,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i},axisWorldTranslation:jA(this.dt),normalSource:h.TY})),pointStyle:r,useIndividualPointSize:n,useIndividualPointSize3D:a,pointSizeNWU:"number"==typeof i&&i,pointSizeAxis:"object"==typeof i&&i,fillStyleSolid:f,fillStyleIndividual:A,fillStylePaletted:g,fillStyleEmpty:m,mousePickingShader:o&&this.RR.oz(_g["3D"],_g.MousePicking,_g.VertexLocation({offset:{dataType:c,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i},axisWorldTranslation:jA(this.dt),normalSource:void 0})),geometry:h,wireframe:l&&u&&{thickness:l.getThickness()<0?1:l.getThickness(),fillStyleSolid:u}}}else Sh(r)&&"number"==typeof i&&(t={type:"primitive",shader:this.RR.oz(_g["3D"],_g.PointSize(c),_g.Color({dataType:s}),_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0})),pointStyle:r,pointSizePixels:i,useIndividualPointSize:n,fillStyleSolid:f,fillStyleIndividual:A,fillStylePaletted:g,mousePickingShader:o&&this.RR.oz(_g["3D"],_g.PointSize(c),_g.MousePicking,_g.VertexLocation({axisWorldTranslation:jA(this.dt),normalSource:void 0}))})}this.bG=t}if(void 0===this.Ja&&g&&"value"===g.lookUpProperty&&g.lut.percentageValues){let t=Ni,i=Oi;for(let s=0;s<this.yu.length;s+=1){const e=this.yu[s];void 0!==e.value&&e.value<i&&(i=e.value),void 0!==e.value&&e.value>t&&(t=e.value)}this.Ja={min:i,max:t}}return this.Qa=!1,this.$a=[],this.Xa=0,this.AH=r,this.qp.i=!1,this}zL(t){const i=this.RR.gl,s=this.bG;if(!s)return this;const e=1===t?s.mousePickingShader:s.shader;if(!e)return this;const h=this.qp.M(),{fillStyleSolid:r,fillStylePaletted:n,useIndividualPointSize:o}=s,a="instanced"===s.type&&s.useIndividualPointSize3D,l="instanced"===s.type&&s.wireframe;return this.RR.aV(e,((u,c,d,f)=>{let A=!1;if(this.RR.jR(e).IV(u("uScale"),this.BY.aE.fV()).IV(u("uDisp"),this.BY.aE.AV()).DV(u("uViewProjectionMatrix"),this.UY).dV(u("uIsHighlighted"),1===t||2===t?0:this.zo).AR(u("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(u("uRenderEffectMask"),2===t?1:0),"instanced"===s.type){const{pointSizeAxis:t,pointSizeNWU:i}=s;!1!==t&&!1===a&&this.RR.IV(u("uOffsetAxis"),[t.x,t.y,t.z]),!1!==i&&!1===o&&this.RR.dV(u("uOffsetNWU"),i).dV(f("uRatioNwuWu"),this.BY.iH())}else if("primitive"===s.type){const{pointSizePixels:t}=s;o||this.RR.dV(u("uPointSize"),t).dV(u("uDevicePixelRatio"),this.RR.$z())}if(1===t)this.RR.AR(u("uColor"),this.mN);else if("instanced"===s.type?("phong"===h.type&&this.RR.IV(u("uCameraLoc"),this.YY).IV(u("uLightLoc"),this.HY).dV(u("uAmbientReflection"),h.ambientReflection).dV(u("uSpecularReflection"),h.specularReflection).dV(u("uDiffuseReflection"),h.diffuseReflection).dV(u("uShininess"),h.shininess).AR(u("uLightColor"),h.specularColor).AR(u("uAmbientColor"),h.ambientColor),l&&this.RR.dV(u("uWireframeThickness"),l.thickness).AR(u("uWireframeColor"),l.fillStyleSolid.getColor()),r&&this.RR.AR(u("uColorDiffuse"),r.getColor()),s.fillStyleEmpty&&this.RR.AR(u("uColorDiffuse"),F)):"primitive"===s.type&&r&&this.RR.AR(u("uColor"),r.getColor()),n){const t=QA(n,this,this.Ja);if(!t&&n.lut.percentageValues)return!1;this.RR.LO(d,n.lut,t)}return this.QM.forEach(((e,r)=>{i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer);const n=c("aPos");if(i.vertexAttribPointer(n,3,i.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.RR.UV(n,1),i.enableVertexAttribArray(n),s.fillStyleIndividual&&void 0!==this.wW.attributeOffsetColor&&1!==t){const t=c("aColor");i.vertexAttribPointer(t,4,i.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.RR.UV(t,1),i.enableVertexAttribArray(t)}if(o&&void 0!==this.wW.attributeOffsetSize){"instanced"===s.type?this.RR.dV(f("uRatioNwuWu"),this.BY.iH()):"primitive"===s.type&&this.RR.dV(u("uDevicePixelRatio"),this.RR.$z());const t=c("instanced"===s.type?"aOffsetNWU":"aPointSize");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.RR.UV(t,1),i.enableVertexAttribArray(t)}if(a&&void 0!==this.wW.attributeOffsetPointSize3D&&"instanced"===s.type){const t=c("aOffsetAxis");i.vertexAttribPointer(t,3,i.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.RR.UV(t,1),i.enableVertexAttribArray(t)}if(s.fillStylePaletted&&"value"===s.fillStylePaletted.getLookUpProperty()&&void 0!==this.wW.attributeOffsetLookUpValue&&1!==t){const t=c("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.RR.UV(t,1),i.enableVertexAttribArray(t)}"instanced"===s.type?(s.geometry.Ky(d,e.existingCoordinatesCount,"phong"===h.type&&1!==t,Boolean(l)&&1!==t),A=!0):"primitive"===s.type&&(this.RR.Ky(i.POINTS,e.existingCoordinatesCount),A=!0)})),A})),this}nl(t,i){Array.isArray(t)||(t=[t]),this.$a=ci(this.$a,t,{canReturnB:!0}),this.Xa+=t.length;const s=i||ss(t);return this.ja=this.ja?hs(this.ja,s):s,this.Ja=void 0,this}vS(t){return this.SS="function"==typeof t?t(this.SS):t,this}gH(){return this.SS}bt(){return this.ja?Math.max(this.ja.max.x,this.Ya.max.x):this.Ya.max.x}vt(){return this.ja?Math.min(this.ja.min.x,this.Ya.min.x):this.Ya.min.x}Mt(){return this.ja?Math.max(this.ja.max.y,this.Ya.max.y):this.Ya.max.y}xt(){return this.ja?Math.min(this.ja.min.y,this.Ya.min.y):this.Ya.min.y}aS(){return this.ja?Math.max(this.ja.max.z,this.Ya.max.z):this.Ya.max.z}lS(){return this.ja?Math.min(this.ja.min.z,this.Ya.min.z):this.Ya.min.z}vl(){const t=this.SS,i=t.getSize();return"number"==typeof i?mh(t)?i/2:Sh(t)?5:0:0}bl(){return this.vl()}uS(){return this.vl()}tl(){return this.yu}qa(){return this.$a}ol(){return this.Ha}al(){return this.Xa}Nt(){return this.Qa=!0,this.yu.length=0,this.Ha=0,this.$a=[],this.Xa=0,this.Ya=Wi,this.ja=void 0,this.Ja=void 0,this}dispose(){return super.dispose(),this.vW.dW(),this.bG=void 0,this}VR(){return this.dispose(),this}}const Oy=(t,i,s)=>{const e=i.getSize();return By(t,"number"==typeof e?s||e>=50?20:e>=10?10:e>=3?5:3:32)};class Ny extends ky{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.DY="disabled",this.be=Ph.fillStyle,this.gv=Ph.lineStyle,this.uU=f("bilinear"),this.mH=[],this.yH=void 0,this.bG={},this.pH=!1,this.AN=ZA({fillStyleSolid:()=>Y(this.be)&&this.be,fillStylePaletted:()=>Z(this.be)&&this.be,wireframeStyleLine:()=>he(this.gv)&&this.gv,wireframeStyleFill:()=>{const t=this.gv&&this.gv.getFillStyle();return Y(t)&&t}}),this.Pi={x:0,z:0},this.$w={x:1,z:1},this.qp.S(tn);const n="columns"===e.dataOrder?e.columns:e.rows,o="columns"===e.dataOrder?e.rows:e.columns;this.Un={...e,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o},this.SH=new Array(this.Un.primaryDimensionVectorsCount).fill(void 0),this.I_=new sy(this.rN,t.rN.CU,t.us.dt,Bt,[],this.Un,-1,T).mv(at),this.I_.fU=Qm;const a=this.I_.gU.gridTiles.map((t=>{const i=t.sizeHeatmapDataVectors,s=t.sizeUniqueHeatmapDataVectors,e=t.iFirstVector,h=t.iFirstUniqueVector,r=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary),n={primary:t.sizeHeatmapDataVectors.primary-1,secondary:t.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:t.iFirstVector,iFirstUniqueVector:t.iFirstUniqueVector,sizeHeatmapDataVectors:t.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:t.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:e,iFirstGeometryUniqueVector:h,sizeGeometryDataVectors:i,sizeUniqueGeometryDataVectors:s,heightmapData:r,normalmapSize:n}})),l=this.I_.gU.gridTileSizes.map((t=>{const i=a.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary)),s=i[0].sizeGeometryDataVectors;return{...t,tiles:i,sizeGeometryData:s}})),u=a.reduce(((t,i)=>{const s=i.sizeHeatmapDataVectors.primary,e=i.sizeHeatmapDataVectors.secondary,h=s*e;return h>t.cells?{primary:s,secondary:e,cells:h}:t}),{primary:0,secondary:0,cells:0});this.vH={gridTiles:a,gridTileSizes:l,largestGridTileSize:u},this.Sv(this.Pi,this.$w)}bH(t){this.xH=t,this.yH=void 0}Sv(t,i){this.Pi=t,this.$w=i;const s=this.Un,e={min:{x:Math.min(this.Pi.x,this.Pi.x+(s.columns-1)*this.$w.x),z:Math.min(this.Pi.z,this.Pi.z+(s.rows-1)*this.$w.z)},max:{x:Math.max(this.Pi.x,this.Pi.x+(s.columns-1)*this.$w.x),z:Math.max(this.Pi.z,this.Pi.z+(s.rows-1)*this.$w.z)}},h=new Map;return this.vH.gridTiles.forEach((t=>{const i="columns"===this.Un.dataOrder?{x:this.$w.x*(t.sizeHeatmapDataVectors.primary-1),z:this.$w.z*(t.sizeHeatmapDataVectors.secondary-1)}:{x:this.$w.x*(t.sizeHeatmapDataVectors.secondary-1),z:this.$w.z*(t.sizeHeatmapDataVectors.primary-1)},s="columns"===this.Un.dataOrder?{x:this.Pi.x+this.$w.x*t.iFirstVector.primary,z:this.Pi.z+this.$w.z*t.iFirstVector.secondary}:{x:this.Pi.x+this.$w.x*t.iFirstVector.secondary,z:this.Pi.z+this.$w.z*t.iFirstVector.primary};h.set(t,{sizeAxis:i,startLocationAxis:s})})),this.bU={MH:e,tilesInfo:h},this}vv(){return{start:this.Pi,step:this.$w,end:{x:this.Pi.x+this.$w.x*this.Un.columns,z:this.Pi.z+this.$w.z*this.Un.rows}}}Ps(t){const i=this.mH,s=tr(this.ia,this.be),e=this.AN.fillStyleSolid(s),h=this.AN.fillStylePaletted(s),r=this.gv,n=this.gv!==this.mU,o=this.AN.wireframeStyleLine(n),a=this.AN.wireframeStyleFill(n),l=!1!==a,u=this.uU.i,c=this.uU.M(),d=this.qp.M(),f=this.Wz(),A=this.Bo.M();this.I_.Ps();const g=this.I_.yU;if(!g)return this;this._H=this._H||this.wH(g);const m=this._H;this.CH(m);const y=Jm(i,m,void 0,(t=>t.sizeGeometryDataVectors));if(y.size>0&&(ty(this.RR,y,(t=>t.heightmapData),(t=>t.heightmapDataTexture)),this.pH=!0),"phong"===d.type&&(y.size>0||f)){const t=this.RR.gl,i=this.RR.oz(_g["2D"],_g.DrawToNormalTexture({flipXZ:"rows"===this.Un.dataOrder,vertexIdSource:this.RR._O(),normalTextureType:this.RR.gl2?"uint":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN}));m.gridTileSizes.forEach((s=>{s.tiles.forEach((e=>{var h;const r=e.normalmapTexture,n=null===(h=this.bU)||void 0===h?void 0:h.tilesInfo.get(e.tileData);if(!r||!n)return;const o={x:e.normalmapSize.secondary,y:e.normalmapSize.primary},a=o.x*o.y;this.RR.oO.zL((()=>{this.RR.aV(i,((h,r,o,l)=>(this.RR.jR(i).wO(o,a).uV(h("uTileDimensionsXZ"),["columns"===this.Un.dataOrder?s.sizeHeatmapData.primary:s.sizeHeatmapData.secondary,"columns"===this.Un.dataOrder?s.sizeHeatmapData.secondary:s.sizeHeatmapData.primary]).TV(h("uTileDimensions"),[s.sizeHeatmapData.primary,s.sizeHeatmapData.secondary]).uV(h("uTileStartLocationAxisXZ"),[n.startLocationAxis.x,n.startLocationAxis.z]).uV(h("uTileSizeAxisXZ"),[n.sizeAxis.x,n.sizeAxis.z]).cV(h("uHeightmapTexture"),e.heightmapDataTexture,1).Ky(t.POINTS,a),!0)))}),r,o,void 0,this.us.mn(),0)}))}))}const p=this.bG;if(s||n||u){const t=o&&a?{wireframeSolid:o,wireframeFillSolid:a}:void 0;e?p.surface={shader:this.RR.oz(_g["3D"],_g.SurfaceGrid({axisWorldTranslation:jA(this.dt),fillColor:"uniform",interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Un.dataOrder,shadingStyle:d.type,wireframe:l,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:e},wireframe:t}:h&&"value"===h.getLookUpProperty()?p.surface={shader:this.RR.oz(_g["3D"],_g.SurfaceGrid({axisWorldTranslation:jA(this.dt),fillColor:["lookup","value",h.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Un.dataOrder,shadingStyle:d.type,wireframe:l,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:h},wireframe:t}:h?p.surface={shader:this.RR.oz(_g["3D"],_g.SurfaceGrid({axisWorldTranslation:jA(this.dt),fillColor:["lookup",h.getLookUpProperty(),h.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Un.dataOrder,shadingStyle:d.type,wireframe:l,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:h},wireframe:t}:l&&(p.surface={shader:this.RR.oz(_g["3D"],_g.SurfaceGrid({axisWorldTranslation:jA(this.dt),fillColor:void 0,interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Un.dataOrder,shadingStyle:d.type,wireframe:l,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:t})}return p.mousePicking=A?this.bG.mousePicking||{shader:this.RR.oz(_g["3D"],_g.SurfaceGrid({axisWorldTranslation:jA(this.dt),fillColor:"uniform",interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Un.dataOrder,shadingStyle:"simple",wireframe:!1,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.bG=p,this.mH.length=0,this.ia=this.be,this.mU=r,this.qp.i=!1,this}wH(t){const i=this.vH.gridTiles.map((i=>{const s=qm(this.RR,i.sizeHeatmapDataVectors.secondary,i.sizeHeatmapDataVectors.primary),e=t.gridTiles.find((t=>t.iFirstUniqueVector.primary===i.iFirstUniqueVector.primary&&t.iFirstUniqueVector.secondary===i.iFirstUniqueVector.secondary));if(!e)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...i,intensityDataTexture:e.intensityDataTexture,heightmapDataTexture:s,normalmap:void 0,tileData:i}})),s=this.vH.gridTileSizes.map((t=>{const s=i.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary));return{...t,tiles:s}})),e=this.RR.nV([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),h=this.RR.gl.TRIANGLES;return{gridTiles:i,gridTileSizes:s,rectangleLocationsBuffer:e,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:h}}CH(t){var i;if("phong"===this.qp.M().type)for(let s=0;s<t.gridTiles.length;s+=1){const e=t.gridTiles[s];if(e.normalmapTexture)return;let h;const r=null===(i=this.RR.gl2)||void 0===i?void 0:i.ctx;if(r)h=this.RR.fO(null,r.RGBA_INTEGER,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,r.UNSIGNED_INT,r.RGBA32UI);else{const t=this.RR.gl;h=this.RR.fO(null,t.RGBA,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,t.UNSIGNED_BYTE)}e.normalmapTexture=h}else t.gridTiles.forEach((t=>{t.normalmapTexture&&(this.RR.OR(t.normalmapTexture),t.normalmapTexture=void 0)}))}zL(t){var i,s,e,h;const r=this.RR.gl,n=this._H;if(!n)return this;const o=this.qp.M(),a=this.bG,l=1===t?null===(i=a.mousePicking)||void 0===i?void 0:i.shader:null===(s=a.surface)||void 0===s?void 0:s.shader;if(!l)return this;const u=1!==t?null===(e=a.surface)||void 0===e?void 0:e.wireframe:void 0,d=1!==t?null===(h=a.surface)||void 0===h?void 0:h.fill:void 0;return this.RR.aV(l,((i,s,e,h)=>{let a=!1;if(this.RR.jR(l).kO(e,this.vH.largestGridTileSize.cells).IV(i("uScale"),this.BY.aE.fV()).IV(i("uDisp"),this.BY.aE.AV()).DV(i("uViewProjectionMatrix"),this.UY).dV(i("uIsHighlighted"),1===t||2===t?0:this.zo).AR(i("uHighlightColorOffset"),1===t||2===t?F:this.Go).dV(i("uRenderEffectMask"),2===t?1:0),1!==t&&("phong"===o.type&&this.RR.IV(i("uCameraLoc"),this.YY).IV(i("uLightLoc"),this.HY).dV(i("uAmbientReflection"),o.ambientReflection).dV(i("uSpecularReflection"),o.specularReflection).dV(i("uDiffuseReflection"),o.diffuseReflection).dV(i("uShininess"),o.shininess).AR(i("uLightColor"),o.specularColor).AR(i("uAmbientColor"),o.ambientColor),u)){const{wireframeFillSolid:t,wireframeSolid:s}=u,e=s.getThickness()<0?1:s.getThickness();this.RR.AR(i("uWireframeColor"),t.getColor()).dV(i("uWireframeThickness"),e)}return 1===t?this.RR.AR(i("uColorDiffuse"),this.mN):"solid"===(null==d?void 0:d.fillMode)&&this.RR.AR(i("uColorDiffuse"),d.fillStyleSolid.getColor()),n.gridTileSizes.forEach((h=>{this.RR.uV(i("uTileDimensionsXZ"),["columns"===this.Un.dataOrder?h.sizeHeatmapData.primary:h.sizeHeatmapData.secondary,"columns"===this.Un.dataOrder?h.sizeHeatmapData.secondary:h.sizeHeatmapData.primary]).TV(i("uTileDimensions"),[h.sizeHeatmapData.primary,h.sizeHeatmapData.secondary]),h.tiles.forEach((o=>{var l;const f=null===(l=this.bU)||void 0===l?void 0:l.tilesInfo.get(o.tileData);if(!f)return;let A=0,g=(o.sizeHeatmapDataVectors.primary-1)*(o.sizeHeatmapDataVectors.secondary-1);if(this.xH){const t=this.xH.fill.iFirstPrimary,i=this.xH.fill.iFirstPrimary+this.xH.fill.amountPrimary-1,s=o.iFirstVector.primary,e=o.iFirstVector.primary+o.sizeHeatmapDataVectors.primary-1;if(s>i||e<t)return;const r=((t,i,s,e)=>c(Math.max(t,s),Math.min(i,e)))(t,i,s,e);A=(r.min-o.iFirstVector.primary)*(h.sizeGeometryData.secondary-1),g=(r.max-r.min)*(h.sizeGeometryData.secondary-1)}if(!(A<0||g<=0)){if("intensity"===(null==d?void 0:d.fillMode)){const{fillStylePaletted:t}=d,s=this.I_.Ja;this.RR.LO(e,t.lut,s).cV(i("uTileIntensityValues"),o.intensityDataTexture,2).FV(i("uTileBoundsAxisXZ"),[f.startLocationAxis.x,f.startLocationAxis.z,f.sizeAxis.x,f.sizeAxis.z])}if("xyz"===(null==d?void 0:d.fillMode)){const{fillStylePaletted:t}=d,i="x"===t.getLookUpProperty()?{min:this.vt(),max:this.bt()}:"y"===t.getLookUpProperty()?{min:this.xt(),max:this.Mt()}:"z"===t.getLookUpProperty()?{min:this.lS(),max:this.aS()}:void 0;if(!i&&t.lut.percentageValues)return;this.RR.LO(e,t.lut,i)}1!==t&&"phong"===this.qp.M().type&&o.normalmapTexture&&this.RR.cV(i("uNormalmapTexture"),o.normalmapTexture,3),this.RR.lV(n.rectangleLocationsBuffer,0,{location:s("aGeoCellOffset"),size:2},{location:u?s("aTriangleBary"):void 0,size:3}).BV(i("uBaseInstance"),A).uV(i("uTileStartLocationAxisXZ"),[f.startLocationAxis.x,f.startLocationAxis.z]).uV(i("uTileSizeAxisXZ"),[f.sizeAxis.x,f.sizeAxis.z]).cV(i("uHeightmapTexture"),o.heightmapDataTexture,0).QV(n.rectangleLocationsDrawMode,0,n.rectangleLocationsDrawLength,g),a=!0,r.bindBuffer(r.ARRAY_BUFFER,null)}}))})),a})),this}dispose(){return super.dispose(),this.I_.dispose(),this._H&&(this._H.gridTileSizes.forEach((t=>{})),this._H.gridTiles.forEach((t=>{this.RR.OR(t.heightmapDataTexture),t.normalmapTexture&&this.RR.OR(t.normalmapTexture)})),this.RR.yV(this._H.rectangleLocationsBuffer),this._H=void 0),this.bG={},this}VR(){return this.dispose(),this.I_.VR(),this}_v(t){return this.I_._v(t),this}wv(t){this.mH.push(t),Km(this.vH.gridTiles,t,(t=>t.heightmapData));for(let i=t.startPrimary;i<t.startPrimary+t.lengthPrimary;i+=1)this.SH[i]=void 0;return this.yH=void 0,this}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}Ce(t){return this.be=qh(this.be,t),this.I_.Ce(this.be),this}Eh(){return this.be}mv(t){return this.gv="function"==typeof t?t(this.gv):t,this}bv(){return this.gv}bt(){var t;return(null===(t=this.bU)||void 0===t?void 0:t.MH.max.x)||0}vt(){var t;return(null===(t=this.bU)||void 0===t?void 0:t.MH.min.x)||0}Mt(){const t=this.yH||this.kH();return this.yH=t,t.max}xt(){const t=this.yH||this.kH();return this.yH=t,t.min}aS(){var t;return(null===(t=this.bU)||void 0===t?void 0:t.MH.max.z)||0}lS(){var t;return(null===(t=this.bU)||void 0===t?void 0:t.MH.min.z)||0}vl(){return 0}bl(){return 0}uS(){return 0}kH(){if(this.yH)return this.yH;const t=this.xH?this.xH.fill.iFirstPrimary:0,i=this.xH?t+this.xH.fill.amountPrimary-1:this.Un.primaryDimensionVectorsCount-1;let s=Oi,e=Ni;return this.vH.gridTiles.forEach((h=>{for(let r=Math.max(t,h.iFirstUniqueVector.primary);r<=Math.min(i,h.iFirstUniqueVector.primary+h.sizeUniqueHeatmapDataVectors.primary-1);r+=1){const t=(r-h.iFirstUniqueVector.primary)*h.sizeHeatmapDataVectors.secondary;let i=this.SH[r];if(i)s=s<i.min?s:i.min,e=e>i.max?e:i.max;else{i={min:Oi,max:Ni},this.SH[r]=i;for(let r=0;r<h.sizeHeatmapDataVectors.secondary;r+=1){const n=h.heightmapData[t+r];s=s<n?s:n,e=e>n?e:n,i.min=Math.min(i.min,n),i.max=Math.max(i.max,n)}}}})),this.yH={min:s,max:e},this.yH}}class Gy extends ky{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.DY="disabled",this.MU=0,this.wU={},this.Pi={x:0,z:0},this.$w={x:1,z:1},this.Un={...e,scrollDimensionSize:"columns"===e.scrollDimension?e.columns:e.rows,staticDimensionSize:"columns"===e.scrollDimension?e.rows:e.columns},this.MH={min:{x:this.Pi.x,z:this.Pi.z},max:{x:"rows"===e.scrollDimension?this.Pi.x+(e.columns-1)*this.$w.x:this.Pi.x,z:"columns"===e.scrollDimension?this.Pi.z+(e.rows-1)*this.$w.z:this.Pi.z}};const n=()=>({shape:new Ny(this.BY,Bt,this.Oo,{columns:e.columns+("columns"===e.scrollDimension?1:0),rows:e.rows+("rows"===e.scrollDimension?1:0),dataOrder:e.scrollDimension,heatmapDataType:"intensity"},this.gN,this.mN).setVisible(!1),hasData:!1});this.QM=[n(),n()]}Ps(t){this.QM.forEach((i=>{i.shape.Ps(t)}));const i=this.QM.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,zt(null===(s=i.shape.I_.Ja)||void 0===s?void 0:s.min,Oi)),t.max=Math.max(t.max,zt(null===(e=i.shape.I_.Ja)||void 0===e?void 0:e.max,Ni)),t}),{min:Oi,max:Ni}),s=this.QM.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,zt(null===(s=i.shape.yH)||void 0===s?void 0:s.min,Oi)),t.max=Math.max(t.max,zt(null===(e=i.shape.yH)||void 0===e?void 0:e.max,Ni)),t}),{min:Oi,max:Ni});return this.QM.forEach((t=>{t.shape.I_.Ja=i,t.shape.yH=s})),this}zL(t){return this.QM.forEach((i=>{i.hasData&&(i.shape.UY=this.UY,i.shape.YY=this.YY,i.shape.HY=this.HY,i.shape.zL(t))})),this}Sv(t,i){return this.Pi=t,this.$w=i,this.QM.forEach((t=>{t.shape.Sv("columns"===this.Un.scrollDimension?{x:t.shape.vv().start.x,z:this.Pi.z}:{x:this.Pi.x,z:t.shape.vv().start.z},this.$w)})),"columns"===this.Un.scrollDimension?(this.MH.min.z=t.z,this.MH.max.z=this.Pi.z+(this.Un.rows-1)*this.$w.z):(this.MH.min.x=t.x,this.MH.max.x=this.Pi.x+(this.Un.columns-1)*this.$w.x),this}vv(){return{start:this.Pi,step:this.$w}}Nt(){return this.MU=0,this.wU={},this.MH={min:{x:this.Pi.x,z:this.Pi.z},max:{x:"rows"===this.Un.scrollDimension?this.Pi.x+(this.Un.columns-1)*this.$w.x:this.Pi.x,z:"columns"===this.Un.scrollDimension?this.Pi.z+(this.Un.rows-1)*this.$w.z:this.Pi.z}},this.QM.forEach((t=>{t.shape.setVisible(!1),t.shape.pH=!1,t.hasData=!1})),this}Fv(t){var i;const s=this.QM[0],e=this.QM[1],h=t.heightMapValues?t.heightMapValues.length:null===(i=t.intensityValues)||void 0===i?void 0:i.length;let r=0;if(!h)return this;do{const i=Math.floor(this.MU/this.Un.scrollDimensionSize)%this.QM.length,n=this.QM[i],o=this.MU%this.Un.scrollDimensionSize,a=this.Un.scrollDimensionSize-o,l=0===o,u=Math.min(a,h),c=o+u,d=o,f=d+1,A=r,g=r+u,m=this.MU>=this.Un.scrollDimensionSize&&c<=this.Un.scrollDimensionSize-1,y=l;l&&(n.shape.Sv("columns"===this.Un.scrollDimension?{x:this.Pi.x+(this.MU-1)*this.$w.x,z:this.Pi.z}:{x:this.Pi.x,z:this.Pi.z+(this.MU-1)*this.$w.z},this.$w),n.shape.setVisible(!0));const p=m?0:1,S=c+(m?1:0);n.shape.bH({fill:{iFirstPrimary:p,amountPrimary:S},wireframe:{iFirstPrimary:p,amountPrimary:S,connectNext:!1}});const v=n===s?e:s,b=c+1,x=1+this.Un.scrollDimensionSize-b;v.shape.bH({fill:{iFirstPrimary:b,amountPrimary:x},wireframe:{iFirstPrimary:b,amountPrimary:x-1,connectNext:!0}});const M={};if(t.heightMapValues){const i=t.heightMapValues.slice(A,g);let s=!1;y&&this.wU.yValues&&(s=!0,i.splice(0,0,this.wU.yValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.Un.staticDimensionSize,values:i,type:"y"};n.shape.wv(e),n.hasData=!0,M.yValues=i[u-1]}if(t.intensityValues){const i=t.intensityValues.slice(A,g);let s=!1;y&&this.wU.intensityValues&&(s=!0,i.splice(0,0,this.wU.intensityValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.Un.staticDimensionSize,values:i,type:"intensity"};n.shape._v(e),n.hasData=!0,M.intensityValues=i[u-1]}this.MU+=u,r+=u,this.wU=M}while(r<h);return"columns"===this.Un.scrollDimension?(this.MH.min.x=this.Pi.x+Math.max(this.MU-this.Un.scrollDimensionSize,0)*this.$w.x,this.MH.max.x=this.Pi.x+(this.MU-1)*this.$w.x):(this.MH.min.z=this.Pi.z+Math.max(this.MU-this.Un.scrollDimensionSize,0)*this.$w.z,this.MH.max.z=this.Pi.z+(this.MU-1)*this.$w.z),this}xv(t){return this.QM.forEach((i=>i.shape.xv(t))),this}Mv(){return this.QM[0].shape.Mv()}Ce(t){return this.QM.forEach((i=>i.shape.Ce(t))),this}Eh(){return this.QM[0].shape.Eh()}mv(t){return this.QM.forEach((i=>i.shape.mv(t))),this}bv(){return this.QM[0].shape.bv()}VR(){return this.dispose(),this.QM.forEach((t=>t.shape.VR())),this}dispose(){return super.dispose(),this.QM.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.QM.forEach((i=>i.shape.setVisible(t&&i.hasData))),this}rS(t){return super.rS(t),this.QM.forEach((i=>i.shape.rS(t))),this}bt(){return this.MH.max.x}vt(){return this.MH.min.x}Mt(){return Math.max(this.QM[0].shape.Mt(),this.QM[1].shape.Mt())}xt(){return Math.min(this.QM[0].shape.xt(),this.QM[1].shape.xt())}aS(){return this.MH.max.z}lS(){return this.MH.min.z}vl(){return 0}bl(){return 0}uS(){return 0}cs(t){return super.cs(t),this.QM.forEach((i=>i.shape.cs(t))),this}}class Wy extends yy{constructor(t,i,s,e){super(t,i,s),this.TH=45,this.FH=.1,this.IH=100,this.YY=l(0,0,1),this.PH=l(0,0,-1),this.DH=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.qp=new Kr,this.dt=e}Kv(){const{cellIndex:t,cellSpan:i,cellsAmount:s}=this.dt,e=i.x/s.x,h=i.y/s.y,r=t.x/s.x,n=t.y/s.y,o=this.us.oi();return{x:r*o.x,y:n*o.y,width:e*o.x,height:h*o.y}}setCameraLocation(t){return this.YY=t,this}getCameraLocation(){return this.YY}setCameraDirection(t){return this.PH=Vi.normalize(t),this}getCameraDirection(){return this.PH}setLightLocation(t){return this.HY=t,this}getLightLocation(){return this.HY}BH(){return l(this.DH[0],this.DH[1],this.DH[2])}LH(){return l(this.DH[4],this.DH[5],this.DH[6])}}class Uy extends Wy{constructor(t,i,s,e){super(t,i,s,e),this.aE=new Am,this.RH=!0,this.rN=t,this.gl=t.oN(),this.MY=this.pY,this.EH=this.us.Co((()=>{this.RH=!0})),this.zH=e.U((()=>{this.RH=!0}))}rV(t){const i=t.vt(),s=t.xt(),e=t.lS(),h=t.bt(),r=t.Mt(),n=t.aS();if(i===Oi||h===Ni||s===Oi||r===Ni||e===Oi||n===Ni)return Gi;const o=t.vl(),a=t.bl(),l=t.uS(),u=Math.abs(t.ks.Op(o)*t.dt.x.et()),c=Math.abs(t.ks.Op(a)*t.dt.y.et()),d=Math.abs(t.ks.Op(l)*t.dt.z.et()),f=i-u,A=h+u,g=s-c,m=r+c,y=e-d,p=n+d;let S;return[{x:f,y:g,z:y},{x:A,y:g,z:y},{x:f,y:m,z:y},{x:A,y:m,z:y},{x:f,y:g,z:p},{x:A,y:g,z:p},{x:f,y:m,z:p},{x:A,y:m,z:p}].map((i=>t.ks.Gp(i))).forEach((t=>{if(!t)return;const i={min:t,max:t};S=S?es(S,{min:t,max:t}):i})),S||Gi}_Y(t){const i=Array.from(this.MY.values());for(let s=0;s<i.length;s+=1){const e=i[s],h=e.lN(t);if(h)return{entity:e,index:s,collectionMember:h.collectionMember}}}Gp(t){if(this.VH(),this.OH(),!this.UY)return;const i=this.aE.AV(),s=l(i[0],i[1],i[2]),e=this.aE.fV(),h=l(e[0],e[1],e[2]),r=Vi.divideVec(Vi.subtractVec(t,s),h),o=this.UY,a=El.multiply(o,[r.x,r.y,r.z,1]),u=n(a[0]/a[3],a[1]/a[3]),c=this.us.oi();return{x:.5*(1+u.x)*c.x,y:.5*(1+u.y)*c.y}}ft(t){const i=this.aE.AV(),s=this.aE.fV(),e=Vi.divideVec(Vi.subtractVec(t,{x:i[0],y:i[1],z:i[2]}),{x:s[0],y:s[1],z:s[2]});return{...t,x:e.x,y:e.y,z:e.z}}yt(t){const i=this.aE.AV(),s=this.aE.fV(),e=Vi.addVec(Vi.multiplyVec(t,{x:s[0],y:s[1],z:s[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:e.x,y:e.y,z:e.z}}Op(t){return t/1e3}iH(){return.001}Ps(){const t=this.YY,i=this.HY,s=this.dt.x.i||this.dt.y.i||this.dt.z.i;if(!i)throw bi(0,(()=>xi()));const{viewProjectionMatrix:e}=this.VH();this.OH();const h=[t.x,t.y,t.z],r=[i.x,i.y,i.z];return this.pY.forEach((t=>{t.UY=e,t.YY=h,t.HY=r,t.Ps(s)})),this}VH(){if(!this.RH&&this.UY)return{viewProjectionMatrix:this.UY};const t=this.Kv(),i=t.width/t.height;this.NH=El.projectionPerspective(this.TH,i,this.FH,this.IH);const s=this.YY;this.DH[12]=s.x,this.DH[13]=s.y,this.DH[14]=s.z;const e=this.PH,h=l(0,1,0),r=Vi.multiply(e,-1),n=Vi.normalize(Vi.cross(h,r)),o=Vi.normalize(Vi.cross(r,n));this.DH[0]=n.x,this.DH[1]=n.y,this.DH[2]=n.z,this.DH[4]=o.x,this.DH[5]=o.y,this.DH[6]=o.z,this.DH[8]=r.x,this.DH[9]=r.y,this.DH[10]=r.z,this.GH=El.inverse(this.DH);const{cellIndex:a,cellSpan:u,cellsAmount:c}=this.dt,d=u.x/c.x,f=u.y/c.y,A=(a.x+u.x/2)/c.x,g=(a.y+u.y/2)/c.y,m=El.multiply(El.translation(Hr(-1,1,A),Hr(-1,1,g),0),El.scaling(d,f,1));return this.UY=El.multiply(m,El.multiply(this.NH,this.GH)),this.WH=El.inverse(this.UY),this.RH=!1,{viewProjectionMatrix:this.UY}}OH(){this.aE.KO(this.dt.x),this.aE.qO(this.dt.y),this.aE.tN(this.dt.z)}zL(t,i){const s=this.gl.$z(),e=this.Kv(),h={x:e.x*s*i,y:e.y*s*i,width:e.width*s*i,height:e.height*s*i};return this.gl.hV(h.x,h.y,h.width,h.height),this.pY.forEach((i=>{i.getVisible()&&(this.gl.Kz(i.DY),1!==t&&this.gl.nS(i.iS),(1!==t||i.getMouseInteractions())&&i.zL(t))})),this.gl.Kz("disabled"),this.gl.nS(!1),this.gl.qz(!1),this}setCameraLocation(t){return this.YY.x===t.x&&this.YY.y===t.y&&this.YY.z===t.z||(this.RH=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.PH.x===t.x&&this.PH.y===t.y&&this.PH.z===t.z||(this.RH=!0),super.setCameraDirection(t),this}W(){super.W(),this.us.ko(this.EH),this.dt.Y(this.zH)}bS(t){const i=this.rN.wY();return this.SY(new Vy(this,this.vY,[],i,this.rN.CY(i),t))}rp(t){const i=this.rN.wY();return this.SY(new Ly(this,this.vY,t,i,this.rN.CY(i)))}AS(){const t=this.rN.wY();return this.SY(new Ty(this,this.vY,[],t,this.rN.CY(t)))}Rv(){const t=this.rN.wY();return this.SY(new zy(this,this.vY,[],t,this.rN.CY(t)))}Lg(){const t=this.rN.wY();return this.SY(new Py(this,this.vY,[],t,this.rN.CY(t)))}yv(t){const i=this.rN.wY();return this.SY(new Ny(this,this.vY,[],t,i,this.rN.CY(i)))}Tv(t){const i=this.rN.wY();return this.SY(new Gy(this,this.vY,[],t,i,this.rN.CY(i)))}}class Yy extends Dh{constructor(t,i,s,e=cm){if(super(t,i,s),this.X=o(1,1),this.UH=!1,this.YH=0,this.HH=!0,this.$H=0,this.tH=8388608,this.$E=[null,null],this.XH=null,this.jH=null,this.ZH=0,this.Qg=!1,this.QH=0,this.Ss=(t=!1)=>(this.$i||this.dn||this.JH()||(t&&(this.UH=!0),this.hn=!0,this.KH||this.Qr.nz(t)),this),this.KH=!1,this.cz=t=>{if(this.$i||this.dn)return;const i=t-this.YH;if(i>=this.Qn||-1===this.Qn){this.KH=!0,this.YH=t,this.UH=!1;const s=i>50?1e3/60:i;this.rn&&this.rn(s),this.hn=!1,-1!==this.Qn&&this.UH&&(this.Qr.nz(this.UH),this.hn=!0),this.ls.Ps(i),this.pn(),this.Sn(),this.nn&&this.nn(),this.KH=!1,this.D.emit("render"),this.hn&&this.Ss(this.UH)}else this.hn=!0,this.Qr.nz()},this.qH=new Map,this.oN=()=>this.RR,this.t$=()=>{var t,i,s;const e=this.On(),h=this.HH,r=Tt.performance.now(),n=null===(t=this.i$)||void 0===t?void 0:t.s$.reduce(((t,i)=>t?i.e$&&t.e$&&i.e$>t.e$?i:t:i),void 0),o=null==n?void 0:n.e$,a=null===(i=this.Dn)||void 0===i?void 0:i.timeStamp,l=null===(s=this.xo)||void 0===s?void 0:s.timeStamp;return h?(this.Ss(!0),!1):void 0===n||(void 0===n||!n.h$)&&(void 0!==l&&void 0!==o&&l>o||(void 0!==o&&void 0===e?r-o>=1e3:!(void 0!==o&&void 0!==a&&r-a>=2e3)||r-o>=1e3))},this.r$=()=>{var t,i;this.n$=void 0;const s=null===(i=null===(t=this.i$)||void 0===t?void 0:t.o$)||void 0===i?void 0:i.a$;void 0===s||s>=this.$H||this.l$()},this.Sn=()=>{if(this.$i||this.dn)return this;const t=this.RR.gl,i=Tt.performance.now();this.RR.sV(t.FRAMEBUFFER,this.Qr.tz?this.$E[0]:null);const s=this.X,e=s.x>0&&s.y>0;if(this.gn.i&&this.RR.qV(this.gn.M()),t.resize&&e&&t.resize(s.x*this.RR.$z(),s.y*this.RR.$z()),this.RR.eV(0,0,s.x*this.RR.$z(),s.y*this.RR.$z()),this.RR.hV(0,0,s.x*this.RR.$z(),s.y*this.RR.$z()),this.RR.Nt(),e)for(const t of this.tn.values())t.zL(0,1);if(this.Un.Xn&&e&&(this.n$&&(Tt.clearTimeout(this.n$),this.n$=void 0),this.t$()?(this.l$(),this.RR.sV(t.FRAMEBUFFER,this.Qr.tz?this.$E[0]:null)):this.n$=Tt.setTimeout(this.r$,500)),this.j(),this.jr(),this._n&&this.Mn(this._n),this.Qr.tz){const i=this.RR.gl2.ctx;i.bindFramebuffer(i.READ_FRAMEBUFFER,this.$E[0]),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,this.$E[1]),i.clearBufferfv(i.COLOR,0,[1,1,1,1]),i.blitFramebuffer(0,0,this.X.x*this.RR.$z(),this.X.y*this.RR.$z(),0,0,this.X.x*this.RR.$z(),this.X.y*this.RR.$z(),t.COLOR_BUFFER_BIT,t.LINEAR)}else t.bindTexture(t.TEXTURE_2D,this.NE),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,this.X.x*this.RR.$z(),this.X.y*this.RR.$z(),0),t.bindTexture(t.TEXTURE_2D,null);return this.RR.sV(t.FRAMEBUFFER,null),this.Qr.nz(),this.HH=!1,this.$H=i,this},this.pn=()=>{if("use-window"===this.u$.mode){const t=Tt.devicePixelRatio||1;this.RR.dO(t)}const t=this.X;if(0===t.x||0===t.y)return this;this.oo.q(t);for(const t of this.tn.values())t.Ps();return this.j(),this},this.c$=1,this.Qr=t,this.Qr.KE){this.d$=Tt.document.createElement("canvas"),this.d$.style.width="100%",this.d$.style.height="100%",this.d$.style.display="block",this.d$.style.boxSizing="content-box",this.d$.style.position="absolute";const t=this.d$.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!1});if(!t)throw new xt("No Canvas context available.");this.GE=t,this.Gr.appendChild(this.d$)}this.Qr.Az(this);const h={preserveDrawingBuffer:!0,antialias:i?i.antialias:void 0,alpha:!0,lineAntialias:!i||(!0===i.lineAntiAlias||!1===i.lineAntiAlias?i.lineAntiAlias:!1!==i.antialias)};let r;if(this.Qr.tz&&t.gl2&&(r=new e(this,this.Un,{type:"webgl2",ctx:t.gl2.ctx,antialias:h.antialias,lineAntialias:h.lineAntialias},this.qi.isDark)),r||this.Qr.tz||(r=new e(this,this.Un,{type:"webgl1",ctx:t.gl,antialias:h.antialias,lineAntialias:h.lineAntialias},this.qi.isDark)),!r)throw new xt("No WebGL context available");if(this.RR=r,"number"==typeof(null==i?void 0:i.devicePixelRatio))this.u$={mode:"fixed",value:i.devicePixelRatio},this.RR.dO(i.devicePixelRatio);else{const t=Tt.document.head.querySelector('meta[name="viewport"]'),s=!0===i.devicePixelRatio||(null==t?void 0:t.content.includes("width=device-width")),e=Tt.devicePixelRatio||1;this.u$=s?{mode:"use-window"}:{mode:"fixed",value:e},this.RR.dO(e)}const n=i?i.width:void 0,a=i?i.height:void 0;this.ho=this.f$(n),this.no=this.f$(a),this.A$(this.ho,this.no),this.CU=this.FI("engine offscreen",1e6),this.g$=this.FI("engine bg",0);const l="function"==typeof this.qi.lcjsBackgroundFillStyle?this.qi.lcjsBackgroundFillStyle(this.Un.$s):this.qi.lcjsBackgroundFillStyle;this.oo=this.g$.ke(this.dt).Ce(l).we(this.qi.lcjsBackgroundStrokeStyle).setMouseInteractions(!1).Fe({x:0,y:0});const u=this.FI("engine effects",200001).kY(this.qi.effect);this.es=u;const c=this.Qr.tz,d=this.oi();c&&(this.$E=[r.vV(),r.vV()]);const f=this.RR.gl;c&&(this.XH=f.createRenderbuffer(),this.jH=f.createRenderbuffer()),this.NE=f.createTexture();const A=d.x*this.RR.$z(),g=d.y*this.RR.$z();if(c){f.bindRenderbuffer(f.RENDERBUFFER,this.XH);const t=this.RR.gl2.ctx;this.ZH=this.Qr.PE&&!1!==i.antialias?t.getParameter(t.MAX_SAMPLES):0,t.renderbufferStorageMultisample(t.RENDERBUFFER,this.ZH,t.RGBA8,A,g),f.bindRenderbuffer(f.RENDERBUFFER,this.jH),f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,A,g),t.renderbufferStorageMultisample(t.RENDERBUFFER,this.ZH,t.DEPTH_COMPONENT16,A,g)}c&&(this.RR.sV(f.FRAMEBUFFER,this.$E[0]),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,this.XH),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,this.jH)),f.bindTexture(f.TEXTURE_2D,this.NE),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,A,g,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),c&&(this.RR.sV(f.FRAMEBUFFER,this.$E[1]),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.NE,0)),this.RR.sV(f.FRAMEBUFFER,null),this.fn(),this.jr(),this.hm=Ch(this),this.rm={qi:this.qi,ls:this.ls,dt:this.dt,Ss:t=>this.Ss(t),On:()=>this.On(),cB:t=>this.cB(t),Un:this.Un,Nn:t=>this.Nn(t),es:this.es,Po:t=>this.Po(t),Do:t=>this.Do(t),Ig:{Fg:(t,i,s)=>this.RR.Vh(i.family).QR(t,i,s,this.qi.isDark)}};const m=()=>{this.W()};Tt.addEventListener("unload",m),this.an.push((()=>{Tt.removeEventListener("unload",m)}))}get m$(){return this.tn}Jr(t,i){let s=this.qH.get(t);if(!s){const i=this.RR.pO(t),e=new Set,h=t=>{e.add(t)},r=s=>{e.delete(s)&&0===e.size&&(i.unbindResources(),this.qH.delete(t))},n=[];s={imageTexture:i,instances:e,handleNewInstance:h,handleInstanceDisposed:r,sharedEngineReference:{dB:()=>i.Dz,fB:t=>{i.Dz?t():n.push(t)}}},this.qH.set(t,s),i.jR(this),i.Oz((()=>{n.forEach((t=>{t()})),n.length=0}))}const e=new gn(t,s.handleNewInstance,s.handleInstanceDisposed,i);return s.handleNewInstance(e),e}cB(t){const i=Array.from(this.qH.values()).find((i=>i.instances.has(t)));if(!i)throw bi(0,(()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!")));return i.sharedEngineReference}wn(t,i){var s;const e=null===(s=this.i$)||void 0===s?void 0:s.o$;if(!e)return;const h=this.Pe(i.x,i.y),r=Math.round(h.x*this.RR.$z()),n=Math.round(h.y*this.RR.$z());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map((t=>this.y$(e,r+t[0]/e.p$,n+t[1]/e.p$))).reduce(((t,i)=>{if(void 0===i)return t||void 0;const s=1e6*i.layerIndex+i.entityIndex;return!t||s>t.zIndexForComparison?{zIndexForComparison:s,entity:i.entity,collectionMember:i.collectionMember}:t}),void 0)}y$(t,i,s){const e=Math.round(i*t.p$),h=Math.round(s*t.p$);if(e<0||e>=t.X.x||h<0||h>=t.X.y)return;const r=4*(e+h*t.X.x),n=t.S$[r+0],o=t.S$[r+1],a=t.S$[r+2],l=t.S$[r+3];return void 0!==n&&void 0!==o&&void 0!==a&&void 0!==l?this.v$(n,o,a,l):void 0}Hr(t,i,s){const e=this.RR.gl;this.Qr.tz?(this.RR.sV(e.FRAMEBUFFER,this.$E[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.NE,0)):this.RR.sV(e.FRAMEBUFFER,null);const h=this.OE(),r=h.x,n=h.y,o=new Uint8Array(r*n*4);this.Qr.tz||this.Sn(),e.readPixels(0,0,r,n,e.RGBA,e.UNSIGNED_BYTE,o);const a=new ImageData(new Uint8ClampedArray(o),r,n),l=document.createElement("canvas"),u=l.getContext("2d");if(!u)throw new Error("Failed to create 2D context for saving image.");l.width=r,l.height=n,u.putImageData(a,0,0),u.translate(0,n),u.scale(1,-1),u.drawImage(l,0,0),this.Qr.tz&&(this.RR.sV(e.FRAMEBUFFER,this.$E[0]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,this.XH),this.RR.sV(e.FRAMEBUFFER,this.$E[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.NE,0)),this.RR.sV(e.FRAMEBUFFER,null);const c=l.toDataURL(t,i);return s?c:(t=>{const i=t.split(",")[0].split(":")[1].split(";")[0],s=Tt.atob(t.split(",")[1]),e=new Uint8Array(s.length);for(let t=0;t<s.length;t+=1)e[t]=s.charCodeAt(t);return new Tt.Blob([e.buffer],{type:i})})(c)}$r(t,i,s=!1){this.fn(n(Math.round(t),Math.round(i))),this.yn();const e=this.RR.gl.drawingBufferWidth,h=this.RR.gl.drawingBufferHeight,r=new Uint8Array(e*h*4);if(this.RR.gl.readPixels(0,0,e,h,this.RR.gl.RGBA,this.RR.gl.UNSIGNED_BYTE,r),!s){const t=h/2|0,i=4*e,s=new Uint8Array(4*e);for(let e=0;e<t;e+=1){const t=e*i,n=(h-e-1)*i;s.set(r.subarray(t,t+i)),r.copyWithin(t,n,n+i),r.set(s,n)}}return this.en={x:0,y:i},r}mL(t){return void 0!==this.ho?this.ho[0]=t:this.ho=[t,void 0],this.Gr.style.minWidth=`${this.ho[0]}px`,this.fn(),this}pL(t){return void 0!==this.ho?this.ho[1]=t:this.ho=[void 0,t],this.Gr.style.maxWidth=`${this.ho[1]}px`,this.fn(),this}vL(t){return void 0!==this.no?this.no[0]=t:this.no=[t,void 0],this.Gr.style.minHeight=`${this.no[0]}px`,this.fn(),this}xL(t){return void 0!==this.no?this.no[1]=t:this.no=[void 0,t],this.Gr.style.maxHeight=`${this.no[1]}px`,this.fn(),this}A$(t,i){return this.ho=t,this.no=i,this.Gr.style.minWidth=`${this.ho[0]}px`,this.Gr.style.maxWidth=`${this.ho[1]}px`,this.Gr.style.minHeight=`${this.no[0]}px`,this.Gr.style.maxHeight=`${this.no[1]}px`,this.fn(),this}zE(t){return this.Qg!==t&&(this.D.emit("inViewChange",t),this.Qg=t),this}EE(){return this.Qg}gz(t){this.QH=t}fz(){return this.QH}FI(t,i=this.do()){const s=this.co(i);if(s){if(bi(0,(()=>{})),!(s instanceof Sy))throw new Error("Unexpected Engine Layer error");return s}return this.vn(new Sy(this,i,t))}BI(t,i,s){const e=this.co(i);if(e){if(bi(0,(()=>{})),!(e instanceof Uy))throw new Error("Unexpected Engine Layer error");return e}return this.vn(new Uy(this,i,t,s))}oi(){return this.X}OE(){const t=this.RR.$z();return{x:Math.round(this.X.x*t),y:Math.round(this.X.y*t)}}f$(t){return t instanceof Array||(t=[t,t]),t}b$(){return this.Qr.WE}JH(){const t=this.RR.gl;return t&&"resize"in t}l$(){var t;const i=this.RR.gl,s=Tt.performance.now(),e=this.On(),h=this.Un.$n,r={x:Math.ceil(this.X.x*this.RR.$z()*h),y:Math.ceil(this.X.y*this.RR.$z()*h)};this.i$||(this.i$={p$:h,x$:r,s$:[],o$:void 0});let n=this.i$.s$.find((t=>!t.h$)),o=!1;n||(o=!0,n={h$:!1,X:r,PO:i.createTexture(),M$:this.RR.vV(),jH:this.RR.bV(),_$:new Uint8Array,e$:void 0},this.i$.s$.push(n));const a=n;(o||a.X.x!==r.x||a.X.y!==r.y)&&(i.bindTexture(i.TEXTURE_2D,a.PO),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r.x,r.y,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.RR.sV(i.FRAMEBUFFER,a.M$),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a.PO,0),i.bindRenderbuffer(i.RENDERBUFFER,a.jH),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,r.x,r.y),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,a.jH),a._$=new Uint8Array(r.x*r.y*4),a.X=r),a.h$=!0,a.e$=s,this.RR.sV(i.FRAMEBUFFER,a.M$),i.clearDepth(1),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.disable(i.BLEND),i.resize&&i.resize(r.x,r.y),this.RR.eV(0,0,r.x,r.y);for(const t of this.tn.values())t.zL(1,h);this.RR.sV(i.FRAMEBUFFER,null),i.bindTexture(i.TEXTURE_2D,null),i.bindRenderbuffer(i.RENDERBUFFER,null),i.enable(i.BLEND);const l=null===(t=this.RR.gl2)||void 0===t?void 0:t.ctx,u=()=>{if(this.i$){const t=this.i$.o$;if(t&&t.a$>s)return;this.i$.o$={a$:s,p$:h,X:r,S$:a._$,w$:e}}};l?this.RR.TO(l,a.M$,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,a._$).then((()=>{this.$i||(a.h$=!1,u())})).catch((t=>{this.$i||(a.h$=!1,Tt.console.warn("LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"))})):(this.RR.FO(a.M$,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,a._$),a.h$=!1,u())}fn(t){if("use-window"===this.u$.mode){const t=Tt.devicePixelRatio||1;this.RR.dO(t)}const i=this.X.x,s=this.X.y,e=t||{x:this.Gr.offsetWidth,y:this.Gr.offsetHeight};if(0!==e.x&&0!==e.y&&(e.x!==i||e.y!==s)){this.X=e,this.dt.x.J(0,e.x).q(e.x),this.dt.y.J(0,e.y).q(e.y);const t=e.x*this.RR.$z(),i=e.y*this.RR.$z(),s=this.RR.gl;this.Qr.KE&&this.GE&&(this.GE.canvas.width=t,this.GE.canvas.height=i);const h=this.Qr.tz;if(this.NE&&(s.bindTexture(s.TEXTURE_2D,this.NE),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,t,i,0,s.RGBA,s.UNSIGNED_BYTE,null)),h){const e=this.RR.gl2.ctx;this.XH&&(s.bindRenderbuffer(s.RENDERBUFFER,this.XH),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.ZH,e.RGBA8,t,i)),this.jH&&(s.bindRenderbuffer(s.RENDERBUFFER,this.jH),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,t,i),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.ZH,e.DEPTH_COMPONENT16,t,i))}s.bindRenderbuffer(s.RENDERBUFFER,null),this.D.emit("resize",[this.X.x,this.X.y])}}W(){var t;this.$i||(super.W(),this.n$&&(Tt.clearTimeout(this.n$),this.n$=void 0),Array.from(this.RR.bE.entries()).forEach((([t,i])=>{i.VR(!1),this.RR.bE.delete(t)})),Array.from(this.RR.wV.values()).forEach((t=>{t.unbindResources()})),this.RR.wV.clear(),this.RR._V.kz(),this.RR.aO.W(),this.RR.yV(this.RR.lO),this.RR.yV(this.RR.uO),this.RR.hO.forEach(((t,i)=>{this.RR.gl.deleteBuffer(i)})),this.RR.hO.clear(),this.RR.MO&&(this.RR.yV(this.RR.MO.buffer),this.RR.MO=void 0),this.RR.MV(this.$E[0]),this.RR.MV(this.$E[1]),this.RR.xV(this.XH),this.RR.OR(this.NE),this.RR.xV(this.jH),this.i$&&(this.i$.s$.forEach((t=>{this.RR.xV(t.jH),this.RR.MV(t.M$),this.RR.OR(t.PO)})),this.i$=void 0),this.RR.iO.forEach((t=>this.RR.yV(t))),this.qH.clear(),this.Qr.mz(this),this.d$&&(null===(t=this.d$.parentElement)||void 0===t||t.removeChild(this.d$),this.d$=void 0),this.GE&&(this.GE=void 0),this.RR.gl=void 0)}wY(){const t=this.c$;return t>4294967295&&(console.warn("LightningChart JS picking ID overflow.\nThis is an unexpected error that could compromise user interactions on the chart.\nPlease report the issue to https://lightningchart.com/js-charts/docs/contact!"),this.c$=1),this.c$+=1,t}CY(t){let i=t;const s=Math.floor(i/16777216);i-=16777216*s;const e=Math.floor(i/65536);i-=65536*e;const h=Math.floor(i/256);return i-=256*h,v(s,e,h,i)}v$(t,i,s,e){if(0===t&&0===i&&0===s&&0===e)return;const h=16777216*t+65536*i+256*s+e;for(const t of this.m$.values()){const i=t._Y(h);if(i)return{entity:i.entity,collectionMember:i.collectionMember,entityIndex:i.index,layerIndex:t.bn()}}}}var Hy="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},$y={exports:{}};!function(t,i){function s(t,i){if(!t)throw new Error(i||"Assertion failed")}function e(t,i){t.super_=i;var s=function(){};s.prototype=i.prototype,t.prototype=new s,t.prototype.constructor=t}function h(t,i,s){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(s=i,i=10),this.Vz(t||0,i||10,s||"be"))}var r;"object"==typeof $y?$y.exports=h:i.BN=h,h.BN=h,h.wordSize=26;try{r=(void 0).Buffer}catch(t){}function n(t,i,e){for(var h=0,r=Math.min(t.length,e),n=0,o=i;o<r;o++){var a,l=t.charCodeAt(o)-48;h<<=4,h|=a=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,n|=a}return s(!(240&n),"Invalid character in "+t),h}function o(t,i,e,h){for(var r=0,n=0,o=Math.min(t.length,e),a=i;a<o;a++){var l=t.charCodeAt(a)-48;r*=h,n=l>=49?l-49+10:l>=17?l-17+10:l,s(l>=0&&n<h,"Invalid character"),r+=n}return r}function a(t,i){t.words=i.words,t.length=i.length,t.negative=i.negative,t.red=i.red}if(h.isBN=function(t){return t instanceof h||null!==t&&"object"==typeof t&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,i){return t.cmp(i)>0?t:i},h.min=function(t,i){return t.cmp(i)<0?t:i},h.prototype.Vz=function(t,i,e){if("number"==typeof t)return this.C$(t,i,e);if("object"==typeof t)return this.k$(t,i,e);"hex"===i&&(i=16),s(i===(0|i)&&i>=2&&i<=36);var h=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&h++,16===i?this.T$(t,h):this.F$(t,i,h),"-"===t[0]&&(this.negative=1),this.I$(),"le"===e&&this.k$(this.toArray(),i,e)},h.prototype.C$=function(t,i,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(s(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this.k$(this.toArray(),i,e)},h.prototype.k$=function(t,i,e){if(s("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var r,n,o=0;if("be"===e)for(h=t.length-1,r=0;h>=0;h-=3)n=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);else if("le"===e)for(h=0,r=0;h<t.length;h+=3)n=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);return this.I$()},h.prototype.T$=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var e,h,r=0;for(s=t.length-6,e=0;s>=i;s-=6)h=n(t,s,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303,(r+=24)>=26&&(r-=26,e++);s+6!==i&&(h=n(t,i,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303),this.I$()},h.prototype.F$=function(t,i,s){this.words=[0],this.length=1;for(var e=0,h=1;h<=67108863;h*=i)e++;e--,h=h/i|0;for(var r=t.length-s,n=r%e,a=Math.min(r,r-n)+s,l=0,u=s;u<a;u+=e)l=o(t,u,u+e,i),this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this.P$(l);if(0!==n){var c=1;for(l=o(t,u,t.length,i),u=0;u<n;u++)c*=i;this.imuln(c),this.words[0]+l<67108864?this.words[0]+=l:this.P$(l)}},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype.D$=function(t){a(t,this)},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype.B$=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype.I$=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this.L$()},h.prototype.L$=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{h.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){h.prototype.inspect=l}else h.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,i,s){s.negative=i.negative^t.negative;var e=t.length+i.length|0;s.length=e,e=e-1|0;var h=0|t.words[0],r=0|i.words[0],n=h*r,o=67108863&n,a=n/67108864|0;s.words[0]=o;for(var l=1;l<e;l++){for(var u=a>>>26,c=67108863&a,d=Math.min(l,i.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var A=l-f|0;u+=(n=(h=0|t.words[A])*(r=0|i.words[f])+c)/67108864|0,c=67108863&n}s.words[l]=0|c,a=0|u}return 0!==a?s.words[l]=0|a:s.length--,s.I$()}h.prototype.toString=function(t,i){var e;if(i=0|i||1,16===(t=t||10)||"hex"===t){e="";for(var h=0,r=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<h|r)).toString(16);e=0!=(r=o>>>24-h&16777215)||n!==this.length-1?u[6-a.length]+a+e:a+e,(h+=2)>=26&&(h-=26,n--)}for(0!==r&&(e=r.toString(16)+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],f=d[t];e="";var A=this.clone();for(A.negative=0;!A.isZero();){var g=A.modrn(f).toString(t);e=(A=A.idivn(f)).isZero()?g+e:u[l-g.length]+g+e}for(this.isZero()&&(e="0"+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}s(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16,2)},r&&(h.prototype.toBuffer=function(t,i){return this.toArrayLike(r,t,i)}),h.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},h.prototype.toArrayLike=function(t,i,e){this.I$();var h=this.byteLength(),r=e||Math.max(1,h);s(h<=r,"byte array longer than desired length"),s(r>0,"Requested array length <= 0");var n=function(t,i){return t.allocUnsafe?t.allocUnsafe(i):new t(i)}(t,r);return this["_toArrayLike"+("le"===i?"LE":"BE")](n,h),n},h.prototype.R$=function(t,i){for(var s=0,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s++]=255&n,s<t.length&&(t[s++]=n>>8&255),s<t.length&&(t[s++]=n>>16&255),6===r?(s<t.length&&(t[s++]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s<t.length)for(t[s++]=e;s<t.length;)t[s++]=0},h.prototype.E$=function(t,i){for(var s=t.length-1,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s--]=255&n,s>=0&&(t[s--]=n>>8&255),s>=0&&(t[s--]=n>>16&255),6===r?(s>=0&&(t[s--]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s>=0)for(t[s--]=e;s>=0;)t[s--]=0},Math.clz32?h.prototype.z$=function(t){return 32-Math.clz32(t)}:h.prototype.z$=function(t){var i=t,s=0;return i>=4096&&(s+=13,i>>>=13),i>=64&&(s+=7,i>>>=7),i>=8&&(s+=4,i>>>=4),i>=2&&(s+=2,i>>>=2),s+i},h.prototype.V$=function(t){if(0===t)return 26;var i=t,s=0;return 0==(8191&i)&&(s+=13,i>>>=13),0==(127&i)&&(s+=7,i>>>=7),0==(15&i)&&(s+=4,i>>>=4),0==(3&i)&&(s+=2,i>>>=2),0==(1&i)&&s++,s},h.prototype.bitLength=function(){var t=this.words[this.length-1],i=this.z$(t);return 26*(this.length-1)+i},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var s=this.V$(this.words[i]);if(t+=s,26!==s)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.I$()},h.prototype.ior=function(t){return s(0==(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var s=0;s<i.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=i.length,this.I$()},h.prototype.iand=function(t){return s(0==(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var i,s;this.length>t.length?(i=this,s=t):(i=t,s=this);for(var e=0;e<s.length;e++)this.words[e]=i.words[e]^s.words[e];if(this!==i)for(;e<i.length;e++)this.words[e]=i.words[e];return this.length=i.length,this.I$()},h.prototype.ixor=function(t){return s(0==(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){s("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),e=t%26;this.B$(i),e>0&&i--;for(var h=0;h<i;h++)this.words[h]=67108863&~this.words[h];return e>0&&(this.words[h]=~this.words[h]&67108863>>26-e),this.I$()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,i){s("number"==typeof t&&t>=0);var e=t/26|0,h=t%26;return this.B$(e+1),this.words[e]=i?this.words[e]|1<<h:this.words[e]&~(1<<h),this.I$()},h.prototype.iadd=function(t){var i,s,e;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this.L$();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i.L$();this.length>t.length?(s=this,e=t):(s=t,e=this);for(var h=0,r=0;r<e.length;r++)i=(0|s.words[r])+(0|e.words[r])+h,this.words[r]=67108863&i,h=i>>>26;for(;0!==h&&r<s.length;r++)i=(0|s.words[r])+h,this.words[r]=67108863&i,h=i>>>26;if(this.length=s.length,0!==h)this.words[this.length]=h,this.length++;else if(s!==this)for(;r<s.length;r++)this.words[r]=s.words[r];return this},h.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i.L$()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this.L$();var s,e,h=this.cmp(t);if(0===h)return this.negative=0,this.length=1,this.words[0]=0,this;h>0?(s=this,e=t):(s=t,e=this);for(var r=0,n=0;n<e.length;n++)r=(i=(0|s.words[n])-(0|e.words[n])+r)>>26,this.words[n]=67108863&i;for(;0!==r&&n<s.length;n++)r=(i=(0|s.words[n])+r)>>26,this.words[n]=67108863&i;if(0===r&&n<s.length&&s!==this)for(;n<s.length;n++)this.words[n]=s.words[n];return this.length=Math.max(this.length,n),s!==this&&(this.negative=1),this.I$()},h.prototype.sub=function(t){return this.clone().isub(t)};var A=function(t,i,s){var e,h,r,n=t.words,o=i.words,a=s.words,l=0,u=0|n[0],c=8191&u,d=u>>>13,f=0|n[1],A=8191&f,g=f>>>13,m=0|n[2],y=8191&m,p=m>>>13,S=0|n[3],v=8191&S,b=S>>>13,x=0|n[4],M=8191&x,_=x>>>13,w=0|n[5],C=8191&w,k=w>>>13,T=0|n[6],F=8191&T,I=T>>>13,P=0|n[7],D=8191&P,B=P>>>13,L=0|n[8],R=8191&L,E=L>>>13,z=0|n[9],V=8191&z,O=z>>>13,N=0|o[0],G=8191&N,W=N>>>13,U=0|o[1],Y=8191&U,H=U>>>13,$=0|o[2],X=8191&$,j=$>>>13,Z=0|o[3],Q=8191&Z,J=Z>>>13,K=0|o[4],q=8191&K,tt=K>>>13,it=0|o[5],st=8191&it,et=it>>>13,ht=0|o[6],rt=8191&ht,nt=ht>>>13,ot=0|o[7],at=8191&ot,lt=ot>>>13,ut=0|o[8],ct=8191&ut,dt=ut>>>13,ft=0|o[9],At=8191&ft,gt=ft>>>13;s.negative=t.negative^i.negative,s.length=19;var mt=(l+(e=Math.imul(c,G))|0)+((8191&(h=(h=Math.imul(c,W))+Math.imul(d,G)|0))<<13)|0;l=((r=Math.imul(d,W))+(h>>>13)|0)+(mt>>>26)|0,mt&=67108863,e=Math.imul(A,G),h=(h=Math.imul(A,W))+Math.imul(g,G)|0,r=Math.imul(g,W);var yt=(l+(e=e+Math.imul(c,Y)|0)|0)+((8191&(h=(h=h+Math.imul(c,H)|0)+Math.imul(d,Y)|0))<<13)|0;l=((r=r+Math.imul(d,H)|0)+(h>>>13)|0)+(yt>>>26)|0,yt&=67108863,e=Math.imul(y,G),h=(h=Math.imul(y,W))+Math.imul(p,G)|0,r=Math.imul(p,W),e=e+Math.imul(A,Y)|0,h=(h=h+Math.imul(A,H)|0)+Math.imul(g,Y)|0,r=r+Math.imul(g,H)|0;var pt=(l+(e=e+Math.imul(c,X)|0)|0)+((8191&(h=(h=h+Math.imul(c,j)|0)+Math.imul(d,X)|0))<<13)|0;l=((r=r+Math.imul(d,j)|0)+(h>>>13)|0)+(pt>>>26)|0,pt&=67108863,e=Math.imul(v,G),h=(h=Math.imul(v,W))+Math.imul(b,G)|0,r=Math.imul(b,W),e=e+Math.imul(y,Y)|0,h=(h=h+Math.imul(y,H)|0)+Math.imul(p,Y)|0,r=r+Math.imul(p,H)|0,e=e+Math.imul(A,X)|0,h=(h=h+Math.imul(A,j)|0)+Math.imul(g,X)|0,r=r+Math.imul(g,j)|0;var St=(l+(e=e+Math.imul(c,Q)|0)|0)+((8191&(h=(h=h+Math.imul(c,J)|0)+Math.imul(d,Q)|0))<<13)|0;l=((r=r+Math.imul(d,J)|0)+(h>>>13)|0)+(St>>>26)|0,St&=67108863,e=Math.imul(M,G),h=(h=Math.imul(M,W))+Math.imul(_,G)|0,r=Math.imul(_,W),e=e+Math.imul(v,Y)|0,h=(h=h+Math.imul(v,H)|0)+Math.imul(b,Y)|0,r=r+Math.imul(b,H)|0,e=e+Math.imul(y,X)|0,h=(h=h+Math.imul(y,j)|0)+Math.imul(p,X)|0,r=r+Math.imul(p,j)|0,e=e+Math.imul(A,Q)|0,h=(h=h+Math.imul(A,J)|0)+Math.imul(g,Q)|0,r=r+Math.imul(g,J)|0;var vt=(l+(e=e+Math.imul(c,q)|0)|0)+((8191&(h=(h=h+Math.imul(c,tt)|0)+Math.imul(d,q)|0))<<13)|0;l=((r=r+Math.imul(d,tt)|0)+(h>>>13)|0)+(vt>>>26)|0,vt&=67108863,e=Math.imul(C,G),h=(h=Math.imul(C,W))+Math.imul(k,G)|0,r=Math.imul(k,W),e=e+Math.imul(M,Y)|0,h=(h=h+Math.imul(M,H)|0)+Math.imul(_,Y)|0,r=r+Math.imul(_,H)|0,e=e+Math.imul(v,X)|0,h=(h=h+Math.imul(v,j)|0)+Math.imul(b,X)|0,r=r+Math.imul(b,j)|0,e=e+Math.imul(y,Q)|0,h=(h=h+Math.imul(y,J)|0)+Math.imul(p,Q)|0,r=r+Math.imul(p,J)|0,e=e+Math.imul(A,q)|0,h=(h=h+Math.imul(A,tt)|0)+Math.imul(g,q)|0,r=r+Math.imul(g,tt)|0;var bt=(l+(e=e+Math.imul(c,st)|0)|0)+((8191&(h=(h=h+Math.imul(c,et)|0)+Math.imul(d,st)|0))<<13)|0;l=((r=r+Math.imul(d,et)|0)+(h>>>13)|0)+(bt>>>26)|0,bt&=67108863,e=Math.imul(F,G),h=(h=Math.imul(F,W))+Math.imul(I,G)|0,r=Math.imul(I,W),e=e+Math.imul(C,Y)|0,h=(h=h+Math.imul(C,H)|0)+Math.imul(k,Y)|0,r=r+Math.imul(k,H)|0,e=e+Math.imul(M,X)|0,h=(h=h+Math.imul(M,j)|0)+Math.imul(_,X)|0,r=r+Math.imul(_,j)|0,e=e+Math.imul(v,Q)|0,h=(h=h+Math.imul(v,J)|0)+Math.imul(b,Q)|0,r=r+Math.imul(b,J)|0,e=e+Math.imul(y,q)|0,h=(h=h+Math.imul(y,tt)|0)+Math.imul(p,q)|0,r=r+Math.imul(p,tt)|0,e=e+Math.imul(A,st)|0,h=(h=h+Math.imul(A,et)|0)+Math.imul(g,st)|0,r=r+Math.imul(g,et)|0;var xt=(l+(e=e+Math.imul(c,rt)|0)|0)+((8191&(h=(h=h+Math.imul(c,nt)|0)+Math.imul(d,rt)|0))<<13)|0;l=((r=r+Math.imul(d,nt)|0)+(h>>>13)|0)+(xt>>>26)|0,xt&=67108863,e=Math.imul(D,G),h=(h=Math.imul(D,W))+Math.imul(B,G)|0,r=Math.imul(B,W),e=e+Math.imul(F,Y)|0,h=(h=h+Math.imul(F,H)|0)+Math.imul(I,Y)|0,r=r+Math.imul(I,H)|0,e=e+Math.imul(C,X)|0,h=(h=h+Math.imul(C,j)|0)+Math.imul(k,X)|0,r=r+Math.imul(k,j)|0,e=e+Math.imul(M,Q)|0,h=(h=h+Math.imul(M,J)|0)+Math.imul(_,Q)|0,r=r+Math.imul(_,J)|0,e=e+Math.imul(v,q)|0,h=(h=h+Math.imul(v,tt)|0)+Math.imul(b,q)|0,r=r+Math.imul(b,tt)|0,e=e+Math.imul(y,st)|0,h=(h=h+Math.imul(y,et)|0)+Math.imul(p,st)|0,r=r+Math.imul(p,et)|0,e=e+Math.imul(A,rt)|0,h=(h=h+Math.imul(A,nt)|0)+Math.imul(g,rt)|0,r=r+Math.imul(g,nt)|0;var Mt=(l+(e=e+Math.imul(c,at)|0)|0)+((8191&(h=(h=h+Math.imul(c,lt)|0)+Math.imul(d,at)|0))<<13)|0;l=((r=r+Math.imul(d,lt)|0)+(h>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,e=Math.imul(R,G),h=(h=Math.imul(R,W))+Math.imul(E,G)|0,r=Math.imul(E,W),e=e+Math.imul(D,Y)|0,h=(h=h+Math.imul(D,H)|0)+Math.imul(B,Y)|0,r=r+Math.imul(B,H)|0,e=e+Math.imul(F,X)|0,h=(h=h+Math.imul(F,j)|0)+Math.imul(I,X)|0,r=r+Math.imul(I,j)|0,e=e+Math.imul(C,Q)|0,h=(h=h+Math.imul(C,J)|0)+Math.imul(k,Q)|0,r=r+Math.imul(k,J)|0,e=e+Math.imul(M,q)|0,h=(h=h+Math.imul(M,tt)|0)+Math.imul(_,q)|0,r=r+Math.imul(_,tt)|0,e=e+Math.imul(v,st)|0,h=(h=h+Math.imul(v,et)|0)+Math.imul(b,st)|0,r=r+Math.imul(b,et)|0,e=e+Math.imul(y,rt)|0,h=(h=h+Math.imul(y,nt)|0)+Math.imul(p,rt)|0,r=r+Math.imul(p,nt)|0,e=e+Math.imul(A,at)|0,h=(h=h+Math.imul(A,lt)|0)+Math.imul(g,at)|0,r=r+Math.imul(g,lt)|0;var _t=(l+(e=e+Math.imul(c,ct)|0)|0)+((8191&(h=(h=h+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((r=r+Math.imul(d,dt)|0)+(h>>>13)|0)+(_t>>>26)|0,_t&=67108863,e=Math.imul(V,G),h=(h=Math.imul(V,W))+Math.imul(O,G)|0,r=Math.imul(O,W),e=e+Math.imul(R,Y)|0,h=(h=h+Math.imul(R,H)|0)+Math.imul(E,Y)|0,r=r+Math.imul(E,H)|0,e=e+Math.imul(D,X)|0,h=(h=h+Math.imul(D,j)|0)+Math.imul(B,X)|0,r=r+Math.imul(B,j)|0,e=e+Math.imul(F,Q)|0,h=(h=h+Math.imul(F,J)|0)+Math.imul(I,Q)|0,r=r+Math.imul(I,J)|0,e=e+Math.imul(C,q)|0,h=(h=h+Math.imul(C,tt)|0)+Math.imul(k,q)|0,r=r+Math.imul(k,tt)|0,e=e+Math.imul(M,st)|0,h=(h=h+Math.imul(M,et)|0)+Math.imul(_,st)|0,r=r+Math.imul(_,et)|0,e=e+Math.imul(v,rt)|0,h=(h=h+Math.imul(v,nt)|0)+Math.imul(b,rt)|0,r=r+Math.imul(b,nt)|0,e=e+Math.imul(y,at)|0,h=(h=h+Math.imul(y,lt)|0)+Math.imul(p,at)|0,r=r+Math.imul(p,lt)|0,e=e+Math.imul(A,ct)|0,h=(h=h+Math.imul(A,dt)|0)+Math.imul(g,ct)|0,r=r+Math.imul(g,dt)|0;var wt=(l+(e=e+Math.imul(c,At)|0)|0)+((8191&(h=(h=h+Math.imul(c,gt)|0)+Math.imul(d,At)|0))<<13)|0;l=((r=r+Math.imul(d,gt)|0)+(h>>>13)|0)+(wt>>>26)|0,wt&=67108863,e=Math.imul(V,Y),h=(h=Math.imul(V,H))+Math.imul(O,Y)|0,r=Math.imul(O,H),e=e+Math.imul(R,X)|0,h=(h=h+Math.imul(R,j)|0)+Math.imul(E,X)|0,r=r+Math.imul(E,j)|0,e=e+Math.imul(D,Q)|0,h=(h=h+Math.imul(D,J)|0)+Math.imul(B,Q)|0,r=r+Math.imul(B,J)|0,e=e+Math.imul(F,q)|0,h=(h=h+Math.imul(F,tt)|0)+Math.imul(I,q)|0,r=r+Math.imul(I,tt)|0,e=e+Math.imul(C,st)|0,h=(h=h+Math.imul(C,et)|0)+Math.imul(k,st)|0,r=r+Math.imul(k,et)|0,e=e+Math.imul(M,rt)|0,h=(h=h+Math.imul(M,nt)|0)+Math.imul(_,rt)|0,r=r+Math.imul(_,nt)|0,e=e+Math.imul(v,at)|0,h=(h=h+Math.imul(v,lt)|0)+Math.imul(b,at)|0,r=r+Math.imul(b,lt)|0,e=e+Math.imul(y,ct)|0,h=(h=h+Math.imul(y,dt)|0)+Math.imul(p,ct)|0,r=r+Math.imul(p,dt)|0;var Ct=(l+(e=e+Math.imul(A,At)|0)|0)+((8191&(h=(h=h+Math.imul(A,gt)|0)+Math.imul(g,At)|0))<<13)|0;l=((r=r+Math.imul(g,gt)|0)+(h>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,e=Math.imul(V,X),h=(h=Math.imul(V,j))+Math.imul(O,X)|0,r=Math.imul(O,j),e=e+Math.imul(R,Q)|0,h=(h=h+Math.imul(R,J)|0)+Math.imul(E,Q)|0,r=r+Math.imul(E,J)|0,e=e+Math.imul(D,q)|0,h=(h=h+Math.imul(D,tt)|0)+Math.imul(B,q)|0,r=r+Math.imul(B,tt)|0,e=e+Math.imul(F,st)|0,h=(h=h+Math.imul(F,et)|0)+Math.imul(I,st)|0,r=r+Math.imul(I,et)|0,e=e+Math.imul(C,rt)|0,h=(h=h+Math.imul(C,nt)|0)+Math.imul(k,rt)|0,r=r+Math.imul(k,nt)|0,e=e+Math.imul(M,at)|0,h=(h=h+Math.imul(M,lt)|0)+Math.imul(_,at)|0,r=r+Math.imul(_,lt)|0,e=e+Math.imul(v,ct)|0,h=(h=h+Math.imul(v,dt)|0)+Math.imul(b,ct)|0,r=r+Math.imul(b,dt)|0;var kt=(l+(e=e+Math.imul(y,At)|0)|0)+((8191&(h=(h=h+Math.imul(y,gt)|0)+Math.imul(p,At)|0))<<13)|0;l=((r=r+Math.imul(p,gt)|0)+(h>>>13)|0)+(kt>>>26)|0,kt&=67108863,e=Math.imul(V,Q),h=(h=Math.imul(V,J))+Math.imul(O,Q)|0,r=Math.imul(O,J),e=e+Math.imul(R,q)|0,h=(h=h+Math.imul(R,tt)|0)+Math.imul(E,q)|0,r=r+Math.imul(E,tt)|0,e=e+Math.imul(D,st)|0,h=(h=h+Math.imul(D,et)|0)+Math.imul(B,st)|0,r=r+Math.imul(B,et)|0,e=e+Math.imul(F,rt)|0,h=(h=h+Math.imul(F,nt)|0)+Math.imul(I,rt)|0,r=r+Math.imul(I,nt)|0,e=e+Math.imul(C,at)|0,h=(h=h+Math.imul(C,lt)|0)+Math.imul(k,at)|0,r=r+Math.imul(k,lt)|0,e=e+Math.imul(M,ct)|0,h=(h=h+Math.imul(M,dt)|0)+Math.imul(_,ct)|0,r=r+Math.imul(_,dt)|0;var Tt=(l+(e=e+Math.imul(v,At)|0)|0)+((8191&(h=(h=h+Math.imul(v,gt)|0)+Math.imul(b,At)|0))<<13)|0;l=((r=r+Math.imul(b,gt)|0)+(h>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,e=Math.imul(V,q),h=(h=Math.imul(V,tt))+Math.imul(O,q)|0,r=Math.imul(O,tt),e=e+Math.imul(R,st)|0,h=(h=h+Math.imul(R,et)|0)+Math.imul(E,st)|0,r=r+Math.imul(E,et)|0,e=e+Math.imul(D,rt)|0,h=(h=h+Math.imul(D,nt)|0)+Math.imul(B,rt)|0,r=r+Math.imul(B,nt)|0,e=e+Math.imul(F,at)|0,h=(h=h+Math.imul(F,lt)|0)+Math.imul(I,at)|0,r=r+Math.imul(I,lt)|0,e=e+Math.imul(C,ct)|0,h=(h=h+Math.imul(C,dt)|0)+Math.imul(k,ct)|0,r=r+Math.imul(k,dt)|0;var Ft=(l+(e=e+Math.imul(M,At)|0)|0)+((8191&(h=(h=h+Math.imul(M,gt)|0)+Math.imul(_,At)|0))<<13)|0;l=((r=r+Math.imul(_,gt)|0)+(h>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,e=Math.imul(V,st),h=(h=Math.imul(V,et))+Math.imul(O,st)|0,r=Math.imul(O,et),e=e+Math.imul(R,rt)|0,h=(h=h+Math.imul(R,nt)|0)+Math.imul(E,rt)|0,r=r+Math.imul(E,nt)|0,e=e+Math.imul(D,at)|0,h=(h=h+Math.imul(D,lt)|0)+Math.imul(B,at)|0,r=r+Math.imul(B,lt)|0,e=e+Math.imul(F,ct)|0,h=(h=h+Math.imul(F,dt)|0)+Math.imul(I,ct)|0,r=r+Math.imul(I,dt)|0;var It=(l+(e=e+Math.imul(C,At)|0)|0)+((8191&(h=(h=h+Math.imul(C,gt)|0)+Math.imul(k,At)|0))<<13)|0;l=((r=r+Math.imul(k,gt)|0)+(h>>>13)|0)+(It>>>26)|0,It&=67108863,e=Math.imul(V,rt),h=(h=Math.imul(V,nt))+Math.imul(O,rt)|0,r=Math.imul(O,nt),e=e+Math.imul(R,at)|0,h=(h=h+Math.imul(R,lt)|0)+Math.imul(E,at)|0,r=r+Math.imul(E,lt)|0,e=e+Math.imul(D,ct)|0,h=(h=h+Math.imul(D,dt)|0)+Math.imul(B,ct)|0,r=r+Math.imul(B,dt)|0;var Pt=(l+(e=e+Math.imul(F,At)|0)|0)+((8191&(h=(h=h+Math.imul(F,gt)|0)+Math.imul(I,At)|0))<<13)|0;l=((r=r+Math.imul(I,gt)|0)+(h>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,e=Math.imul(V,at),h=(h=Math.imul(V,lt))+Math.imul(O,at)|0,r=Math.imul(O,lt),e=e+Math.imul(R,ct)|0,h=(h=h+Math.imul(R,dt)|0)+Math.imul(E,ct)|0,r=r+Math.imul(E,dt)|0;var Dt=(l+(e=e+Math.imul(D,At)|0)|0)+((8191&(h=(h=h+Math.imul(D,gt)|0)+Math.imul(B,At)|0))<<13)|0;l=((r=r+Math.imul(B,gt)|0)+(h>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,e=Math.imul(V,ct),h=(h=Math.imul(V,dt))+Math.imul(O,ct)|0,r=Math.imul(O,dt);var Bt=(l+(e=e+Math.imul(R,At)|0)|0)+((8191&(h=(h=h+Math.imul(R,gt)|0)+Math.imul(E,At)|0))<<13)|0;l=((r=r+Math.imul(E,gt)|0)+(h>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Lt=(l+(e=Math.imul(V,At))|0)+((8191&(h=(h=Math.imul(V,gt))+Math.imul(O,At)|0))<<13)|0;return l=((r=Math.imul(O,gt))+(h>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,a[0]=mt,a[1]=yt,a[2]=pt,a[3]=St,a[4]=vt,a[5]=bt,a[6]=xt,a[7]=Mt,a[8]=_t,a[9]=wt,a[10]=Ct,a[11]=kt,a[12]=Tt,a[13]=Ft,a[14]=It,a[15]=Pt,a[16]=Dt,a[17]=Bt,a[18]=Lt,0!==l&&(a[19]=l,s.length++),s};function g(t,i,s){s.negative=i.negative^t.negative,s.length=t.length+i.length;for(var e=0,h=0,r=0;r<s.length-1;r++){var n=h;h=0;for(var o=67108863&e,a=Math.min(r,i.length-1),l=Math.max(0,r-t.length+1);l<=a;l++){var u=r-l,c=(0|t.words[u])*(0|i.words[l]),d=67108863&c;o=67108863&(d=d+o|0),h+=(n=(n=n+(c/67108864|0)|0)+(d>>>26)|0)>>>26,n&=67108863}s.words[r]=o,e=n,n=h}return 0!==e?s.words[r]=e:s.length--,s.I$()}function m(t,i,s){return g(t,i,s)}Math.imul||(A=f),h.prototype.mulTo=function(t,i){var s=this.length+t.length;return 10===this.length&&10===t.length?A(this,t,i):s<63?f(this,t,i):s<1024?g(this,t,i):m(this,t,i)},h.prototype.mul=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},h.prototype.mulf=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),m(this,t,i)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){var i=t<0;i&&(t=-t),s("number"==typeof t),s(t<67108864);for(var e=0,h=0;h<this.length;h++){var r=(0|this.words[h])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[h]=67108863&n}return 0!==e&&(this.words[h]=e,this.length++),i?this.ineg():this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),s=0;s<i.length;s++){var e=s/26|0,h=s%26;i[s]=t.words[e]>>>h&1}return i}(t);if(0===i.length)return new h(1);for(var s=this,e=0;e<i.length&&0===i[e];e++,s=s.sqr());if(++e<i.length)for(var r=s.sqr();e<i.length;e++,r=r.sqr())0!==i[e]&&(s=s.mul(r));return s},h.prototype.iushln=function(t){s("number"==typeof t&&t>=0);var i,e=t%26,h=(t-e)/26,r=67108863>>>26-e<<26-e;if(0!==e){var n=0;for(i=0;i<this.length;i++){var o=this.words[i]&r,a=(0|this.words[i])-o<<e;this.words[i]=a|n,n=o>>>26-e}n&&(this.words[i]=n,this.length++)}if(0!==h){for(i=this.length-1;i>=0;i--)this.words[i+h]=this.words[i];for(i=0;i<h;i++)this.words[i]=0;this.length+=h}return this.I$()},h.prototype.ishln=function(t){return s(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,i,e){var h;s("number"==typeof t&&t>=0),h=i?(i-i%26)/26:0;var r=t%26,n=Math.min((t-r)/26,this.length),o=67108863^67108863>>>r<<r,a=e;if(h-=n,h=Math.max(0,h),a){for(var l=0;l<n;l++)a.words[l]=this.words[l];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,l=0;l<this.length;l++)this.words[l]=this.words[l+n];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=h);l--){var c=0|this.words[l];this.words[l]=u<<26-r|c>>>r,u=c&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.I$()},h.prototype.ishrn=function(t,i,e){return s(0===this.negative),this.iushrn(t,i,e)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26,h=1<<i;return!(this.length<=e||!(this.words[e]&h))},h.prototype.imaskn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=e)return this;if(0!==i&&e++,this.length=Math.min(e,this.length),0!==i){var h=67108863^67108863>>>i<<i;this.words[this.length-1]&=h}return this.I$()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return s("number"==typeof t),s(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.P$(t)},h.prototype.P$=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(s("number"==typeof t),s(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.I$()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype.O$=function(t,i,e){var h,r,n=t.length+e;this.B$(n);var o=0;for(h=0;h<t.length;h++){r=(0|this.words[h+e])+o;var a=(0|t.words[h])*i;o=((r-=67108863&a)>>26)-(a/67108864|0),this.words[h+e]=67108863&r}for(;h<this.length-e;h++)o=(r=(0|this.words[h+e])+o)>>26,this.words[h+e]=67108863&r;if(0===o)return this.I$();for(s(-1===o),o=0,h=0;h<this.length;h++)o=(r=-(0|this.words[h])+o)>>26,this.words[h]=67108863&r;return this.negative=1,this.I$()},h.prototype.N$=function(t,i){var s=(this.length,t.length),e=this.clone(),r=t,n=0|r.words[r.length-1];0!=(s=26-this.z$(n))&&(r=r.ushln(s),e.iushln(s),n=0|r.words[r.length-1]);var o,a=e.length-r.length;if("mod"!==i){(o=new h(null)).length=a+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var u=e.clone().O$(r,1,a);0===u.negative&&(e=u,o&&(o.words[a]=1));for(var c=a-1;c>=0;c--){var d=67108864*(0|e.words[r.length+c])+(0|e.words[r.length+c-1]);for(d=Math.min(d/n|0,67108863),e.O$(r,d,c);0!==e.negative;)d--,e.negative=0,e.O$(r,1,c),e.isZero()||(e.negative^=1);o&&(o.words[c]=d)}return o&&o.I$(),e.I$(),"div"!==i&&0!==s&&e.iushrn(s),{div:o||null,mod:e}},h.prototype.divmod=function(t,i,e){return s(!t.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,i),"mod"!==i&&(r=o.div.neg()),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),i),"mod"!==i&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),i),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new h(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modrn(t.words[0]))}:this.N$(t,i);var r,n,o},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var s=0!==i.div.negative?i.mod.isub(t):i.mod,e=t.ushrn(1),h=t.andln(1),r=s.cmp(e);return r<0||1===h&&0===r?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},h.prototype.modrn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=(1<<26)%t,h=0,r=this.length-1;r>=0;r--)h=(e*h+(0|this.words[r]))%t;return i?-h:h},h.prototype.modn=function(t){return this.modrn(t)},h.prototype.idivn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=0,h=this.length-1;h>=0;h--){var r=(0|this.words[h])+67108864*e;this.words[h]=r/t|0,e=r%t}return this.I$(),i?this.ineg():this},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r=new h(1),n=new h(0),o=new h(0),a=new h(1),l=0;i.isEven()&&e.isEven();)i.iushrn(1),e.iushrn(1),++l;for(var u=e.clone(),c=i.clone();!i.isZero();){for(var d=0,f=1;0==(i.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(c)),r.iushrn(1),n.iushrn(1);for(var A=0,g=1;0==(e.words[0]&g)&&A<26;++A,g<<=1);if(A>0)for(e.iushrn(A);A-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);i.cmp(e)>=0?(i.isub(e),r.isub(o),n.isub(a)):(e.isub(i),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:e.iushln(l)}},h.prototype.G$=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r,n=new h(1),o=new h(0),a=e.clone();i.cmpn(1)>0&&e.cmpn(1)>0;){for(var l=0,u=1;0==(i.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(i.iushrn(l);l-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var c=0,d=1;0==(e.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);i.cmp(e)>=0?(i.isub(e),n.isub(o)):(e.isub(i),o.isub(n))}return(r=0===i.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),s=t.clone();i.negative=0,s.negative=0;for(var e=0;i.isEven()&&s.isEven();e++)i.iushrn(1),s.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;s.isEven();)s.iushrn(1);var h=i.cmp(s);if(h<0){var r=i;i=s,s=r}else if(0===h||0===s.cmpn(1))break;i.isub(s)}return s.iushln(e)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return 0==(1&this.words[0])},h.prototype.isOdd=function(){return 1==(1&this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){s("number"==typeof t);var i=t%26,e=(t-i)/26,h=1<<i;if(this.length<=e)return this.B$(e+1),this.words[e]|=h,this;for(var r=h,n=e;0!==r&&n<this.length;n++){var o=0|this.words[n];r=(o+=r)>>>26,o&=67108863,this.words[n]=o}return 0!==r&&(this.words[n]=r,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var i,e=t<0;if(0!==this.negative&&!e)return-1;if(0===this.negative&&e)return 1;if(this.I$(),this.length>1)i=1;else{e&&(t=-t),s(t<=67108863,"Number is too big");var h=0|this.words[0];i=h===t?0:h<t?-1:1}return 0!==this.negative?0|-i:i},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,s=this.length-1;s>=0;s--){var e=0|this.words[s],h=0|t.words[s];if(e!==h){e<h?i=-1:e>h&&(i=1);break}}return i},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new M(t)},h.prototype.toRed=function(t){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),t.convertTo(this).W$(t)},h.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype.W$=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return s(!this.red,"Already a number in reduction context"),this.W$(t)},h.prototype.redAdd=function(t){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.U$(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.U$(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red.Y$(this),this.red.sqr(this)},h.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red.Y$(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red.Y$(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red.Y$(this),this.red.invm(this)},h.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red.Y$(this),this.red.neg(this)},h.prototype.redPow=function(t){return s(this.red&&!t.red,"redPow(normalNum)"),this.red.Y$(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function p(t,i){this.name=t,this.p=new h(i,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this.H$()}function S(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var i=h.$$(t);this.m=i.p,this.prime=i}else s(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.G$(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}p.prototype.H$=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},p.prototype.ireduce=function(t){var i,s=t;do{this.split(s,this.tmp),i=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(i>this.n);var e=i<this.n?-1:s.ucmp(this.p);return 0===e?(s.words[0]=0,s.length=1):e>0?s.isub(this.p):void 0!==s.strip?s.strip():s.I$(),s},p.prototype.split=function(t,i){t.iushrn(this.n,0,i)},p.prototype.imulK=function(t){return t.imul(this.k)},e(S,p),S.prototype.split=function(t,i){for(var s=4194303,e=Math.min(t.length,9),h=0;h<e;h++)i.words[h]=t.words[h];if(i.length=e,t.length<=9)return t.words[0]=0,void(t.length=1);var r=t.words[9];for(i.words[i.length++]=r&s,h=10;h<t.length;h++){var n=0|t.words[h];t.words[h-10]=(n&s)<<4|r>>>22,r=n}r>>>=22,t.words[h-10]=r,0===r&&t.length>10?t.length-=10:t.length-=9},S.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,s=0;s<t.length;s++){var e=0|t.words[s];i+=977*e,t.words[s]=67108863&i,i=64*e+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},e(v,p),e(b,p),e(x,p),x.prototype.imulK=function(t){for(var i=0,s=0;s<t.length;s++){var e=19*(0|t.words[s])+i,h=67108863&e;e>>>=26,t.words[s]=h,i=e}return 0!==i&&(t.words[t.length++]=i),t},h.$$=function(t){if(y[t])return y[t];var i;if("k256"===t)i=new S;else if("p224"===t)i=new v;else if("p192"===t)i=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new x}return y[t]=i,i},M.prototype.Y$=function(t){s(0===t.negative,"red works only with positives"),s(t.red,"red works only with red numbers")},M.prototype.U$=function(t,i){s(0==(t.negative|i.negative),"red works only with positives"),s(t.red&&t.red===i.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).W$(this):(a(t,t.umod(this.m).W$(this)),t)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).W$(this)},M.prototype.add=function(t,i){this.U$(t,i);var s=t.add(i);return s.cmp(this.m)>=0&&s.isub(this.m),s.W$(this)},M.prototype.iadd=function(t,i){this.U$(t,i);var s=t.iadd(i);return s.cmp(this.m)>=0&&s.isub(this.m),s},M.prototype.sub=function(t,i){this.U$(t,i);var s=t.sub(i);return s.cmpn(0)<0&&s.iadd(this.m),s.W$(this)},M.prototype.isub=function(t,i){this.U$(t,i);var s=t.isub(i);return s.cmpn(0)<0&&s.iadd(this.m),s},M.prototype.shl=function(t,i){return this.Y$(t),this.imod(t.ushln(i))},M.prototype.imul=function(t,i){return this.U$(t,i),this.imod(t.imul(i))},M.prototype.mul=function(t,i){return this.U$(t,i),this.imod(t.mul(i))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(s(i%2==1),3===i){var e=this.m.add(new h(1)).iushrn(2);return this.pow(t,e)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new h(1).toRed(this),a=o.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new h(2*u*u).toRed(this);0!==this.pow(u,l).cmp(a);)u.redIAdd(a);for(var c=this.pow(u,r),d=this.pow(t,r.addn(1).iushrn(1)),f=this.pow(t,r),A=n;0!==f.cmp(o);){for(var g=f,m=0;0!==g.cmp(o);m++)g=g.redSqr();s(m<A);var y=this.pow(c,new h(1).iushln(A-m-1));d=d.redMul(y),c=y.redSqr(),f=f.redMul(c),A=m}return d},M.prototype.invm=function(t){var i=t.G$(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},M.prototype.pow=function(t,i){if(i.isZero())return new h(1).toRed(this);if(0===i.cmpn(1))return t.clone();var s=new Array(16);s[0]=new h(1).toRed(this),s[1]=t;for(var e=2;e<s.length;e++)s[e]=this.mul(s[e-1],t);var r=s[0],n=0,o=0,a=i.bitLength()%26;for(0===a&&(a=26),e=i.length-1;e>=0;e--){for(var l=i.words[e],u=a-1;u>=0;u--){var c=l>>u&1;r!==s[0]&&(r=this.sqr(r)),0!==c||0!==n?(n<<=1,n|=c,(4==++o||0===e&&0===u)&&(r=this.mul(r,s[n]),o=0,n=0)):o=0}a=26}return r},M.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},M.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},h.mont=function(t){return new _(t)},e(_,M),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},_.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=s.isub(e).iushrn(this.shift),r=h;return h.cmp(this.m)>=0?r=h.isub(this.m):h.cmpn(0)<0&&(r=h.iadd(this.m)),r.W$(this)},_.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new h(0).W$(this);var s=t.mul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=s.isub(e).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n.W$(this)},_.prototype.invm=function(t){return this.imod(t.G$(this.m).mul(this.r2)).W$(this)}}(0,Hy);var Xy=$y.exports;function jy(t,i){if(Array.isArray(t))return t.slice();if(!t)return[];const s=[];if("string"!=typeof t){for(let i=0;i<t.length;i++)s[i]=0|t[i];return s}if("hex"===i){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t=`0${t}`);for(let i=0;i<t.length;i+=2)s.push(parseInt(t[i]+t[i+1],16))}else for(let i=0;i<t.length;i++){const e=t.charCodeAt(i),h=e>>8,r=255&e;h?s.push(h,r):s.push(r)}return s}const Zy=function(t,i,s){const e=new Array(Math.max(t.bitLength(),s)+1);e.fill(0);const h=1<<i+1,r=t.clone();for(let t=0;t<e.length;t++){let i;const s=r.andln(h-1);r.isOdd()?(i=s>(h>>1)-1?(h>>1)-s:s,r.isubn(i)):i=0,e[t]=i,r.iushrn(1)}return e},Qy=function(t,i){const s=[[],[]];t=t.clone(),i=i.clone();let e=0,h=0;for(;t.cmpn(-e)>0||i.cmpn(-h)>0;){let r,n,o=t.andln(3)+e&3,a=i.andln(3)+h&3;if(3===o&&(o=-1),3===a&&(a=-1),0==(1&o))r=0;else{const i=t.andln(7)+e&7;r=3!==i&&5!==i||2!==a?o:-o}if(s[0].push(r),0==(1&a))n=0;else{const t=i.andln(7)+h&7;n=3!==t&&5!==t||2!==o?a:-a}s[1].push(n),2*e===r+1&&(e=1-e),2*h===n+1&&(h=1-h),t.iushrn(1),i.iushrn(1)}return s};class Jy{constructor(t,i){this.type=t,this.p=new Xy(i.p,16),this.red=i.prime?Xy.red(i.prime):Xy.mont(this.p),this.zero=new Xy(0).toRed(this.red),this.one=new Xy(1).toRed(this.red),this.two=new Xy(2).toRed(this.red),this.n=i.n&&new Xy(i.n,16),this.g=i.g&&this.pointFromJSON(i.g,i.gRed),this.X$=new Array(4),this.j$=new Array(4),this.Z$=new Array(4),this.Q$=new Array(4),this.J$=this.n?this.n.bitLength():0;const s=this.n&&this.p.div(this.n);!s||s.cmpn(100)>0?this.redN=null:(this.K$=!0,this.redN=this.n.toRed(this.red))}q$(t,i){const s=t.tX(),e=Zy(i,1,this.J$);let h=(1<<s.step+1)-(s.step%2==0?2:1);h/=3;const r=[];for(let t=0;t<e.length;t+=s.step){let i=0;for(let h=t+s.step-1;h>=t;h--)i=(i<<1)+e[h];r.push(i)}let n=this.jpoint(null,null,null),o=this.jpoint(null,null,null);for(let t=h;t>0;t--){for(let i=0;i<r.length;i++){const e=r[i];e===t?o=o.mixedAdd(s.points[i]):e===-t&&(o=o.mixedAdd(s.points[i].neg()))}n=n.add(o)}return n.toP()}iX(t,i){let s=4;const e=t.sX(s);s=e.wnd;const h=e.points,r=Zy(i,s,this.J$);let n=this.jpoint(null,null,null);for(let s=r.length-1;s>=0;s--){for(let t=0;s>=0&&0===r[s];s--)t++;if(s>=0&&i++,n=n.dblp(i),s<0)break;const e=r[s];n="affine"===t.type?e>0?n.mixedAdd(h[e-1>>1]):n.mixedAdd(h[-e-1>>1].neg()):e>0?n.add(h[e-1>>1]):n.add(h[-e-1>>1].neg())}return"affine"===t.type?n.toP():n}eX(t,i,s,e,h){const r=this.X$,n=this.j$,o=this.Z$;let a=0;for(let s=0;s<e;s++){const e=i[s].sX(t);r[s]=e.wnd,n[s]=e.points}for(let t=e-1;t>=1;t-=2){const e=t-1,h=t;if(1!==r[e]||1!==r[h]){o[e]=Zy(s[e],r[e],this.J$),o[h]=Zy(s[h],r[h],this.J$),a=Math.max(o[e].length,a),a=Math.max(o[h].length,a);continue}const l=[i[e],null,null,i[h]];0===i[e].y.cmp(i[h].y)?(l[1]=i[e].add(i[h]),l[2]=i[e].toJ().mixedAdd(i[h].neg())):0===i[e].y.cmp(i[h].y.redNeg())?(l[1]=i[e].toJ().mixedAdd(i[h]),l[2]=i[e].add(i[h].neg())):(l[1]=i[e].toJ().mixedAdd(i[h]),l[2]=i[e].toJ().mixedAdd(i[h].neg()));const u=[-3,-1,-5,-7,0,7,5,1,3],c=Qy(s[e],s[h]);a=Math.max(c[0].length,a),o[e]=new Array(a),o[h]=new Array(a);for(let t=0;t<a;t++){const i=0|c[0][t],s=0|c[1][t];o[e][t]=u[3*(i+1)+(s+1)],o[h][t]=0,n[e]=l}}let l=this.jpoint(null,null,null);const u=this.Q$;for(let t=a;t>=0;t--){let i=0;for(;t>=0;){let s=!0;for(let i=0;i<e;i++)u[i]=0|o[i][t],0!==u[i]&&(s=!1);if(!s)break;i++,t--}if(t>=0&&i++,l=l.dblp(i),t<0)break;for(let t=0;t<e;t++){const i=u[t];let s;0!==i&&(i>0?s=n[t][i-1>>1]:i<0&&(s=n[t][-i-1>>1].neg()),l="affine"===s.type?l.mixedAdd(s):l.add(s))}}for(let t=0;t<e;t++)n[t]=null;return h?l:l.toP()}decodePoint(t,i){t=jy(t,i);const s=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*s)return this.point(t.slice(1,1+s),t.slice(1+s,1+2*s));if((2===t[0]||3===t[0])&&t.length-1===s)return this.pointFromX(t.slice(1,1+s),3===t[0]);throw new Error("Unknown point format")}}class Ky{constructor(t,i){this.curve=t,this.type=i,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}hX(t){const i=this.curve.p.byteLength(),s=this.getX().toArray("be",i);return t?[this.getY().isEven()?2:3].concat(s):[4].concat(s,this.getY().toArray("be",i))}encode(t,i){return function(t,i){return"hex"===i?function(t){let i="";for(let e=0;e<t.length;e++)i+=1===(s=t[e].toString(16)).length?`0${s}`:s;var s;return i}(t):t}(this.hX(i),t)}precompute(t){if(this.precomputed)return this;const i={doubles:null,naf:null,beta:null};return i.naf=this.sX(8),i.doubles=this.tX(4,t),i.beta=this.rX(),this.precomputed=i,this}nX(t){if(!this.precomputed)return!1;const i=this.precomputed.doubles;return!!i&&i.points.length>=Math.ceil((t.bitLength()+1)/i.step)}tX(t,i){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const s=[this];let e=this;for(let h=0;h<i;h+=t){for(let i=0;i<t;i++)e=e.dbl();s.push(e)}return{step:t,points:s}}sX(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const i=[this],s=(1<<t)-1,e=1===s?null:this.dbl();for(let t=1;t<s;t++)i[t]=i[t-1].add(e);return{wnd:t,points:i}}rX(){return null}dblp(t){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}}class qy extends Jy{constructor(t){super("short",t),this.a=new Xy(t.a,16).toRed(this.red),this.b=new Xy(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this.oX(t),this.aX=new Array(4),this.lX=new Array(4)}pointFromJSON(t,i){return tp.fromJSON(this,t,i)}oX(t){if(!this.zeroA||!this.g||!this.n||1!==this.p.modn(3))return;let i,s,e;if(t.beta)i=new Xy(t.beta,16).toRed(this.red);else{const t=this.uX(this.p);i=t[0].cmp(t[1])<0?t[0]:t[1],i=i.toRed(this.red)}if(t.lambda)s=new Xy(t.lambda,16);else{const t=this.uX(this.n);s=0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(i))?t[0]:t[1]}return e=t.basis?t.basis.map((t=>({a:new Xy(t.a,16),b:new Xy(t.b,16)}))):this.cX(s),{beta:i,lambda:s,basis:e}}uX(t){const i=t===this.p?this.red:Xy.mont(t),s=new Xy(2).toRed(i).redInvm(),e=s.redNeg(),h=new Xy(3).toRed(i).redNeg().redSqrt().redMul(s);return[e.redAdd(h).fromRed(),e.redSub(h).fromRed()]}cX(t){const i=this.n.ushrn(Math.floor(this.n.bitLength()/2));let s,e,h,r,n,o,a,l,u,c=t,d=this.n.clone(),f=new Xy(1),A=new Xy(0),g=new Xy(0),m=new Xy(1),y=0;for(;0!==c.cmpn(0);){const t=d.div(c);l=d.sub(t.mul(c)),u=g.sub(t.mul(f));const n=m.sub(t.mul(A));if(!h&&l.cmp(i)<0)s=a.neg(),e=f,h=l.neg(),r=u;else if(h&&2==++y)break;a=l,d=c,c=l,g=f,f=u,m=A,A=n}n=l.neg(),o=u;const p=h.sqr().add(r.sqr());return n.sqr().add(o.sqr()).cmp(p)>=0&&(n=s,o=e),h.negative&&(h=h.neg(),r=r.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:h,b:r},{a:n,b:o}]}dX(t){const i=this.endo.basis,s=i[0],e=i[1],h=e.b.mul(t).divRound(this.n),r=s.b.neg().mul(t).divRound(this.n),n=h.mul(s.a),o=r.mul(e.a),a=h.mul(s.b),l=r.mul(e.b);return{k1:t.sub(n).sub(o),k2:a.add(l).neg()}}point(t,i,s){return new tp(this,t,i,s)}pointFromX(t,i){(t=new Xy(t,16)).red||(t=t.toRed(this.red));const s=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let e=s.redSqrt();if(0!==e.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");const h=e.fromRed().isOdd();return(i&&!h||!i&&h)&&(e=e.redNeg()),this.point(t,e)}validate(t){if(t.inf)return!0;const i=t.x,s=t.y,e=this.a.redMul(i),h=i.redSqr().redMul(i).redIAdd(e).redIAdd(this.b);return 0===s.redSqr().redISub(h).cmpn(0)}fX(t,i,s){const e=this.aX,h=this.lX;let r=0;for(r=0;r<t.length;r++){const s=this.dX(i[r]);let n=t[r],o=n.rX();s.k1.negative&&(s.k1.ineg(),n=n.neg(!0)),s.k2.negative&&(s.k2.ineg(),o=o.neg(!0)),e[2*r]=n,e[2*r+1]=o,h[2*r]=s.k1,h[2*r+1]=s.k2}const n=this.eX(1,e,h,2*r,s);for(let t=0;t<2*r;t++)e[t]=null,h[t]=null;return n}jpoint(t,i,s){return new ip(this,t,i,s)}}class tp extends Ky{constructor(t,i,s,e){super(t,"affine"),null===i&&null===s?(this.x=null,this.y=null,this.inf=!0):(this.x=new Xy(i,16),this.y=new Xy(s,16),e&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){return new tp(this,t,i,s)}rX(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const i=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const s=this.curve,e=function(t){return s.point(t.x.redMul(s.endo.beta),t.y)};t.beta=i,i.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(e)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(e)}}}return i}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,i,s){"string"==typeof i&&(i=JSON.parse(i));const e=t.point(i[0],i[1],s);if(!i[2])return e;function h(i){return t.point(i[0],i[1],s)}const r=i[2];return e.precomputed={beta:null,doubles:r.doubles&&{step:r.doubles.step,points:[e].concat(r.doubles.points.map(h))},naf:r.naf&&{wnd:r.naf.wnd,points:[e].concat(r.naf.points.map(h))}},e}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);let i=this.y.redSub(t.y);0!==i.cmpn(0)&&(i=i.redMul(this.x.redSub(t.x).redInvm()));const s=i.redSqr().redISub(this.x).redISub(t.x),e=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,e)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);const i=this.curve.a,s=this.x.redSqr(),e=t.redInvm(),h=s.redAdd(s).redIAdd(s).redIAdd(i).redMul(e),r=h.redSqr().redISub(this.x.redAdd(this.x)),n=h.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new Xy(t,16),this.isInfinity()?this:this.nX(t)?this.curve.q$(this,t):this.curve.endo?this.curve.fX([this],[t]):this.curve.iX(this,t)}mulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve.fX(e,h):this.curve.eX(1,e,h,2)}jmulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve.fX(e,h,!0):this.curve.eX(1,e,h,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))}neg(t){if(this.inf)return this;const i=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const t=this.precomputed,s=function(t){return t.neg()};i.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return i}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class ip extends Ky{constructor(t,i,s,e){super(t,"jacobian"),null===i&&null===s&&null===e?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Xy(0)):(this.x=new Xy(i,16),this.y=new Xy(s,16),this.z=new Xy(e,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){throw new Error("Method not implemented.")}jpoint(t,i,s){return new ip(this,t,i,s)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),i=t.redSqr(),s=this.x.redMul(i),e=this.y.redMul(i).redMul(t);return this.curve.point(s,e)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const i=t.z.redSqr(),s=this.z.redSqr(),e=this.x.redMul(i),h=t.x.redMul(s),r=this.y.redMul(i.redMul(t.z)),n=t.y.redMul(s.redMul(this.z)),o=e.redSub(h),a=r.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const l=o.redSqr(),u=l.redMul(o),c=e.redMul(l),d=a.redSqr().redIAdd(u).redISub(c).redISub(c),f=a.redMul(c.redISub(d)).redISub(r.redMul(u)),A=this.z.redMul(t.z).redMul(o);return this.curve.jpoint(d,f,A)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const i=this.z.redSqr(),s=this.x,e=t.x.redMul(i),h=this.y,r=t.y.redMul(i).redMul(this.z),n=s.redSub(e),o=h.redSub(r);if(0===n.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const a=n.redSqr(),l=a.redMul(n),u=s.redMul(a),c=o.redSqr().redIAdd(l).redISub(u).redISub(u),d=o.redMul(u.redISub(c)).redISub(h.redMul(l)),f=this.z.redMul(n);return this.curve.jpoint(c,d,f)}dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}const i=this.curve.a,s=this.curve.tinv;let e=this.x;const h=this.y;let r=this.z,n=r.redSqr().redSqr(),o=h.redAdd(h);for(let s=0;s<t;s++){const h=e.redSqr(),a=o.redSqr(),l=a.redSqr(),u=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(n)),c=e.redMul(a),d=u.redSqr().redISub(c.redAdd(c)),f=c.redISub(d);let A=u.redMul(f);A=A.redIAdd(A).redISub(l);const g=o.redMul(r);s+1<t&&(n=n.redMul(l)),e=d,r=g,o=A}return this.curve.jpoint(e,o.redMul(s),r)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.AX():this.curve.threeA?this.gX():this.mX()}AX(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr().redISub(n).redISub(n);let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),t=a,i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr();let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),t=a.redISub(n).redISub(n),i=o.redMul(n.redISub(t)).redISub(l),s=this.y.redMul(this.z),s=s.redIAdd(s)}return this.curve.jpoint(t,i,s)}gX(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a),a=o.redSqr().redISub(n).redISub(n);t=a;let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.z.redSqr(),h=this.y.redSqr(),r=this.x.redMul(h);let n=this.x.redSub(e).redMul(this.x.redAdd(e));n=n.redAdd(n).redIAdd(n);let o=r.redIAdd(r);o=o.redIAdd(o);const a=o.redAdd(o);t=n.redSqr().redISub(a),s=this.y.redAdd(this.z).redSqr().redISub(h).redISub(e);let l=h.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l),i=n.redMul(o.redISub(t)).redISub(l)}return this.curve.jpoint(t,i,s)}mX(){const t=this.curve.a,i=this.x,s=this.y,e=this.z,h=e.redSqr().redSqr(),r=i.redSqr(),n=s.redSqr(),o=r.redAdd(r).redIAdd(r).redIAdd(t.redMul(h));let a=i.redAdd(i);a=a.redIAdd(a);const l=a.redMul(n),u=o.redSqr().redISub(l.redAdd(l)),c=l.redISub(u);let d=n.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=o.redMul(c).redISub(d),A=s.redAdd(s).redMul(e);return this.curve.jpoint(u,f,A)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),i=this.y.redSqr(),s=this.z.redSqr(),e=i.redSqr(),h=t.redAdd(t).redIAdd(t),r=h.redSqr();let n=this.x.redAdd(i).redSqr().redISub(t).redISub(e);n=n.redIAdd(n),n=n.redAdd(n).redIAdd(n),n=n.redISub(r);const o=n.redSqr();let a=e.redIAdd(e);a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);const l=h.redIAdd(n).redSqr().redISub(r).redISub(o).redISub(a);let u=i.redMul(l);u=u.redIAdd(u),u=u.redIAdd(u);let c=this.x.redMul(o).redISub(u);c=c.redIAdd(c),c=c.redIAdd(c);let d=this.y.redMul(l.redMul(a.redISub(l)).redISub(n.redMul(o)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=this.z.redAdd(n).redSqr().redISub(s).redISub(o);return this.curve.jpoint(c,d,f)}mul(t,i){return t=new Xy(t,i),this.curve.iX(this,t)}eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;const i=this.z.redSqr(),s=t.z.redSqr();if(0!==this.x.redMul(s).redISub(t.x.redMul(i)).cmpn(0))return!1;const e=i.redMul(this.z),h=s.redMul(t.z);return 0===this.y.redMul(h).redISub(t.y.redMul(e)).cmpn(0)}eqXToP(t){const i=this.z.redSqr(),s=t.toRed(this.curve.red).redMul(i);if(0===this.x.cmp(s))return!0;const e=t.clone(),h=this.curve.redN.redMul(i);for(;;){if(e.iadd(this.curve.n),e.cmp(this.curve.p)>=0)return!1;if(s.redIAdd(h),0===this.x.cmp(s))return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return 0===this.z.cmpn(0)}}class sp{constructor(t){this.curve=new qy(t),this.g=this.curve.g,this.n=this.curve.n}}const ep={};var hp;ep.PresetCurve=sp,hp={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(ep,"secp256k1",{configurable:!0,enumerable:!0,get(){const t=new sp(hp);return Object.defineProperty(ep,"secp256k1",{configurable:!0,enumerable:!0,value:t}),t}});class rp{constructor(t,i){this.ec=t,this.priv=null,this.pub=null,i.pub&&this.yX(i.pub,i.pubEnc)}static fromPublic(t,i,s){return i instanceof rp?i:new rp(t,{pub:i,pubEnc:s})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,i){return"string"==typeof t&&(i=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,t):this.pub}yX(t,i){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,i)}verify(t,i){return this.ec.verify(t,i,this)}}function np(t,i){const s=t[i.place++];if(!(128&s))return s;const e=15&s;if(0===e||e>4)return!1;let h=0,r=i.place;for(let i=0;i<e;i++,r++)h<<=8,h|=t[r],h>>>=0;return!(h<=127)&&(i.place=r,h)}class op{constructor(){this.place=0}}class ap{constructor(t,i){if(t instanceof ap)return t;this.pX(t,i)||(this.r=new Xy(t.r,16),this.s=new Xy(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}pX(t,i){t=jy(t,i);const s=new op;if(48!==t[s.place++])return!1;const e=np(t,s);if(!1===e)return!1;if(e+s.place!==t.length)return!1;if(2!==t[s.place++])return!1;const h=np(t,s);if(!1===h)return!1;let r=t.slice(s.place,h+s.place);if(s.place+=h,2!==t[s.place++])return!1;const n=np(t,s);if(!1===n)return!1;if(t.length!==n+s.place)return!1;let o=t.slice(s.place,n+s.place);if(0===r[0]){if(!(128&r[1]))return!1;r=r.slice(1)}if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}return this.r=new Xy(r),this.s=new Xy(o),this.recoveryParam=null,!0}}class lp{constructor(t){if(!(this instanceof lp))return new lp(t);"string"==typeof t&&(t=ep[t]),t instanceof ep.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,i){return rp.fromPublic(this,t,i)}SX(t,i){const s=8*t.byteLength()-this.n.bitLength();return s>0&&(t=t.ushrn(s)),!i&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,i,s,e){t=this.SX(new Xy(t,16)),s=this.keyFromPublic(s,e);const h=(i=new ap(i,"hex")).r,r=i.s;if(h.cmpn(1)<0||h.cmp(this.n)>=0)return!1;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;const n=r.invm(this.n),o=n.mul(t).umod(this.n),a=n.mul(h).umod(this.n);if(!this.curve.K$){const t=this.g.mulAdd(o,s.getPublic(),a);return!t.isInfinity()&&0===t.getX().umod(this.n).cmp(h)}const l=this.g.jmulAdd(o,s.getPublic(),a);return!l.isInfinity()&&l.eqXToP(h)}}var up,cp={exports:{}};cp.exports=(up=up||function(t,i){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),"undefined"!=typeof self&&self.crypto&&(s=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(s=globalThis.crypto),!s&&"undefined"!=typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&void 0!==Hy&&Hy.crypto&&(s=Hy.crypto),!s)try{s=i}catch(t){}var e=function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||function(){function t(){}return function(i){var s;return t.prototype=i,s=new t,t.prototype=null,s}}(),r={},n=r.lib={},o=n.Base={extend:function(t){var i=h(this);return t&&i.mixIn(t),i.hasOwnProperty("init")&&this.init!==i.init||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(t,s){t=this.words=t||[],this.sigBytes=s!=i?s:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var i=this.words,s=t.words,e=this.sigBytes,h=t.sigBytes;if(this.clamp(),e%4)for(var r=0;r<h;r++){var n=s[r>>>2]>>>24-r%4*8&255;i[e+r>>>2]|=n<<24-(e+r)%4*8}else for(var o=0;o<h;o+=4)i[e+o>>>2]=s[o>>>2];return this.sigBytes+=h,this},clamp:function(){var i=this.words,s=this.sigBytes;i[s>>>2]&=4294967295<<32-s%4*8,i.length=t.ceil(s/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var i=[],s=0;s<t;s+=4)i.push(e());return new a.init(i,t)}}),l=r.enc={},u=l.Hex={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push((r>>>4).toString(16)),e.push((15&r).toString(16))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e+=2)s[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new a.init(s,i/2)}},c=l.Latin1={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push(String.fromCharCode(r))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e++)s[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new a.init(s,i)}},d=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=n.BufferedBlockAlgorithm=o.extend({reset:function(){this.Jw=new a.init,this.vX=0},bX:function(t){"string"==typeof t&&(t=d.parse(t)),this.Jw.concat(t),this.vX+=t.sigBytes},xX:function(i){var s,e=this.Jw,h=e.words,r=e.sigBytes,n=this.blockSize,o=r/(4*n),l=(o=i?t.ceil(o):t.max((0|o)-this.MX,0))*n,u=t.min(4*l,r);if(l){for(var c=0;c<l;c+=n)this._X(h,c);s=h.splice(0,l),e.sigBytes-=u}return new a.init(s,u)},clone:function(){var t=o.clone.call(this);return t.Jw=this.Jw.clone(),t},MX:0});n.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this.wX()},update:function(t){return this.bX(t),this.xX(),this},finalize:function(t){return t&&this.bX(t),this.CX()},blockSize:16,kX:function(t){return function(i,s){return new t.init(s).finalize(i)}},TX:function(t){return function(i,s){return new A.HMAC.init(t,s).finalize(i)}}});var A=r.algo={};return r}(Math),up);var dp={exports:{}}.exports=function(t){return function(i){var s=t,e=s.lib,h=e.WordArray,r=e.Hasher,n=s.algo,o=[],a=[];!function(){function t(t){for(var s=i.sqrt(t),e=2;e<=s;e++)if(!(t%e))return!1;return!0}function s(t){return 4294967296*(t-(0|t))|0}for(var e=2,h=0;h<64;)t(e)&&(h<8&&(o[h]=s(i.pow(e,.5))),a[h]=s(i.pow(e,1/3)),h++),e++}();var l=[],u=n.SHA256=r.extend({wX:function(){this.FX=new h.init(o.slice(0))},_X:function(t,i){for(var s=this.FX.words,e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],u=s[5],c=s[6],d=s[7],f=0;f<64;f++){if(f<16)l[f]=0|t[i+f];else{var A=l[f-15],g=(A<<25|A>>>7)^(A<<14|A>>>18)^A>>>3,m=l[f-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;l[f]=g+l[f-7]+y+l[f-16]}var p=e&h^e&r^h&r,S=(e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22),v=d+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&u^~o&c)+a[f]+l[f];d=c,c=u,u=o,o=n+v|0,n=r,r=h,h=e,e=v+(S+p)|0}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+n|0,s[4]=s[4]+o|0,s[5]=s[5]+u|0,s[6]=s[6]+c|0,s[7]=s[7]+d|0},CX:function(){var t=this.Jw,s=t.words,e=8*this.vX,h=8*t.sigBytes;return s[h>>>5]|=128<<24-h%32,s[14+(h+64>>>9<<4)]=i.floor(e/4294967296),s[15+(h+64>>>9<<4)]=e,t.sigBytes=4*s.length,this.xX(),this.FX},clone:function(){var t=r.clone.call(this);return t.FX=this.FX.clone(),t}});s.SHA256=r.kX(u),s.HmacSHA256=r.TX(u)}(Math),t.SHA256}(cp.exports),fp={exports:{}}.exports=function(t){return s=(i=t).lib.WordArray,e=i.algo,h=e.SHA256,r=e.SHA224=h.extend({wX:function(){this.FX=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},CX:function(){var t=h.CX.call(this);return t.sigBytes-=4,t}}),i.SHA224=h.kX(r),i.HmacSHA224=h.TX(r),t.SHA224;var i,s,e,h,r}(cp.exports),Ap={exports:{}}.exports=cp.exports.enc.Hex,gp={exports:{}}.exports=cp.exports.enc.Utf8;!function(t){return s=(i=t).lib.WordArray,i.enc.Base64={stringify:function(t){var i=t.words,s=t.sigBytes,e=this.IX;t.clamp();for(var h=[],r=0;r<s;r+=3)for(var n=(i[r>>>2]>>>24-r%4*8&255)<<16|(i[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|i[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<s;o++)h.push(e.charAt(n>>>6*(3-o)&63));var a=e.charAt(64);if(a)for(;h.length%4;)h.push(a);return h.join("")},parse:function(t){var i=t.length,e=this.IX,h=this.PX;if(!h){h=this.PX=[];for(var r=0;r<e.length;r++)h[e.charCodeAt(r)]=r}var n=e.charAt(64);if(n){var o=t.indexOf(n);-1!==o&&(i=o)}return function(t,i,e){for(var h=[],r=0,n=0;n<i;n++)if(n%4){var o=e[t.charCodeAt(n-1)]<<n%4*2|e[t.charCodeAt(n)]>>>6-n%4*2;h[r>>>2]|=o<<24-r%4*8,r++}return s.create(h,r)}(t,i,h)},IX:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64;var i,s}(cp.exports);!function(t){(function(i){var s=t,e=s.lib,h=e.WordArray,r=e.Hasher,n=s.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*i.abs(i.sin(t+1))|0}();var a=n.MD5=r.extend({wX:function(){this.FX=new h.init([1732584193,4023233417,2562383102,271733878])},_X:function(t,i){for(var s=0;s<16;s++){var e=i+s,h=t[e];t[e]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var r=this.FX.words,n=t[i+0],a=t[i+1],f=t[i+2],A=t[i+3],g=t[i+4],m=t[i+5],y=t[i+6],p=t[i+7],S=t[i+8],v=t[i+9],b=t[i+10],x=t[i+11],M=t[i+12],_=t[i+13],w=t[i+14],C=t[i+15],k=r[0],T=r[1],F=r[2],I=r[3];k=l(k,T,F,I,n,7,o[0]),I=l(I,k,T,F,a,12,o[1]),F=l(F,I,k,T,f,17,o[2]),T=l(T,F,I,k,A,22,o[3]),k=l(k,T,F,I,g,7,o[4]),I=l(I,k,T,F,m,12,o[5]),F=l(F,I,k,T,y,17,o[6]),T=l(T,F,I,k,p,22,o[7]),k=l(k,T,F,I,S,7,o[8]),I=l(I,k,T,F,v,12,o[9]),F=l(F,I,k,T,b,17,o[10]),T=l(T,F,I,k,x,22,o[11]),k=l(k,T,F,I,M,7,o[12]),I=l(I,k,T,F,_,12,o[13]),F=l(F,I,k,T,w,17,o[14]),k=u(k,T=l(T,F,I,k,C,22,o[15]),F,I,a,5,o[16]),I=u(I,k,T,F,y,9,o[17]),F=u(F,I,k,T,x,14,o[18]),T=u(T,F,I,k,n,20,o[19]),k=u(k,T,F,I,m,5,o[20]),I=u(I,k,T,F,b,9,o[21]),F=u(F,I,k,T,C,14,o[22]),T=u(T,F,I,k,g,20,o[23]),k=u(k,T,F,I,v,5,o[24]),I=u(I,k,T,F,w,9,o[25]),F=u(F,I,k,T,A,14,o[26]),T=u(T,F,I,k,S,20,o[27]),k=u(k,T,F,I,_,5,o[28]),I=u(I,k,T,F,f,9,o[29]),F=u(F,I,k,T,p,14,o[30]),k=c(k,T=u(T,F,I,k,M,20,o[31]),F,I,m,4,o[32]),I=c(I,k,T,F,S,11,o[33]),F=c(F,I,k,T,x,16,o[34]),T=c(T,F,I,k,w,23,o[35]),k=c(k,T,F,I,a,4,o[36]),I=c(I,k,T,F,g,11,o[37]),F=c(F,I,k,T,p,16,o[38]),T=c(T,F,I,k,b,23,o[39]),k=c(k,T,F,I,_,4,o[40]),I=c(I,k,T,F,n,11,o[41]),F=c(F,I,k,T,A,16,o[42]),T=c(T,F,I,k,y,23,o[43]),k=c(k,T,F,I,v,4,o[44]),I=c(I,k,T,F,M,11,o[45]),F=c(F,I,k,T,C,16,o[46]),k=d(k,T=c(T,F,I,k,f,23,o[47]),F,I,n,6,o[48]),I=d(I,k,T,F,p,10,o[49]),F=d(F,I,k,T,w,15,o[50]),T=d(T,F,I,k,m,21,o[51]),k=d(k,T,F,I,M,6,o[52]),I=d(I,k,T,F,A,10,o[53]),F=d(F,I,k,T,b,15,o[54]),T=d(T,F,I,k,a,21,o[55]),k=d(k,T,F,I,S,6,o[56]),I=d(I,k,T,F,C,10,o[57]),F=d(F,I,k,T,y,15,o[58]),T=d(T,F,I,k,_,21,o[59]),k=d(k,T,F,I,g,6,o[60]),I=d(I,k,T,F,x,10,o[61]),F=d(F,I,k,T,f,15,o[62]),T=d(T,F,I,k,v,21,o[63]),r[0]=r[0]+k|0,r[1]=r[1]+T|0,r[2]=r[2]+F|0,r[3]=r[3]+I|0},CX:function(){var t=this.Jw,s=t.words,e=8*this.vX,h=8*t.sigBytes;s[h>>>5]|=128<<24-h%32;var r=i.floor(e/4294967296),n=e;s[15+(h+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),s[14+(h+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(s.length+1),this.xX();for(var o=this.FX,a=o.words,l=0;l<4;l++){var u=a[l];a[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return o},clone:function(){var t=r.clone.call(this);return t.FX=this.FX.clone(),t}});function l(t,i,s,e,h,r,n){var o=t+(i&s|~i&e)+h+n;return(o<<r|o>>>32-r)+i}function u(t,i,s,e,h,r,n){var o=t+(i&e|s&~e)+h+n;return(o<<r|o>>>32-r)+i}function c(t,i,s,e,h,r,n){var o=t+(i^s^e)+h+n;return(o<<r|o>>>32-r)+i}function d(t,i,s,e,h,r,n){var o=t+(s^(i|~e))+h+n;return(o<<r|o>>>32-r)+i}s.MD5=r.kX(a),s.HmacMD5=r.TX(a)})(Math),t.MD5}(cp.exports);!function(t){return s=(i=t).lib,e=s.WordArray,h=s.Hasher,r=i.algo,n=[],o=r.SHA1=h.extend({wX:function(){this.FX=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_X:function(t,i){for(var s=this.FX.words,e=s[0],h=s[1],r=s[2],o=s[3],a=s[4],l=0;l<80;l++){if(l<16)n[l]=0|t[i+l];else{var u=n[l-3]^n[l-8]^n[l-14]^n[l-16];n[l]=u<<1|u>>>31}var c=(e<<5|e>>>27)+a+n[l];c+=l<20?1518500249+(h&r|~h&o):l<40?1859775393+(h^r^o):l<60?(h&r|h&o|r&o)-1894007588:(h^r^o)-899497514,a=o,o=r,r=h<<30|h>>>2,h=e,e=c}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+o|0,s[4]=s[4]+a|0},CX:function(){var t=this.Jw,i=t.words,s=8*this.vX,e=8*t.sigBytes;return i[e>>>5]|=128<<24-e%32,i[14+(e+64>>>9<<4)]=Math.floor(s/4294967296),i[15+(e+64>>>9<<4)]=s,t.sigBytes=4*i.length,this.xX(),this.FX},clone:function(){var t=h.clone.call(this);return t.FX=this.FX.clone(),t}}),i.SHA1=h.kX(o),i.HmacSHA1=h.TX(o),t.SHA1;var i,s,e,h,r,n,o}(cp.exports);var mp,yp,pp;yp=(mp=cp.exports).lib.Base,pp=mp.enc.Utf8,mp.algo.HMAC=yp.extend({init:function(t,i){t=this.DX=new t.init,"string"==typeof i&&(i=pp.parse(i));var s=t.blockSize,e=4*s;i.sigBytes>e&&(i=t.finalize(i)),i.clamp();for(var h=this.BX=i.clone(),r=this.LX=i.clone(),n=h.words,o=r.words,a=0;a<s;a++)n[a]^=1549556828,o[a]^=909522486;h.sigBytes=r.sigBytes=e,this.reset()},reset:function(){var t=this.DX;t.reset(),t.update(this.LX)},update:function(t){return this.DX.update(t),this},finalize:function(t){var i=this.DX,s=i.finalize(t);return i.reset(),i.finalize(this.BX.clone().concat(s))}}),function(t){return e=(s=(i=t).lib).Base,h=s.WordArray,n=(r=i.algo).MD5,o=r.EvpKDF=e.extend({cfg:e.extend({keySize:4,hasher:n,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,i){for(var s,e=this.cfg,r=e.hasher.create(),n=h.create(),o=n.words,a=e.keySize,l=e.iterations;o.length<a;){s&&r.update(s),s=r.update(t).finalize(i),r.reset();for(var u=1;u<l;u++)s=r.finalize(s),r.reset();n.concat(s)}return n.sigBytes=4*a,n}}),i.EvpKDF=function(t,i,s){return o.create(s).compute(t,i)},t.EvpKDF;var i,s,e,h,r,n,o}(cp.exports);!function(t){t.lib.Cipher||function(i){var s=t,e=s.lib,h=e.Base,r=e.WordArray,n=e.BufferedBlockAlgorithm,o=s.enc;o.Utf8;var a=o.Base64,l=s.algo.EvpKDF,u=e.Cipher=n.extend({cfg:h.extend(),createEncryptor:function(t,i){return this.create(this.RX,t,i)},createDecryptor:function(t,i){return this.create(this.EX,t,i)},init:function(t,i,s){this.cfg=this.cfg.extend(s),this.zX=t,this.VX=i,this.reset()},reset:function(){n.reset.call(this),this.wX()},process:function(t){return this.bX(t),this.xX()},finalize:function(t){return t&&this.bX(t),this.CX()},keySize:4,ivSize:4,RX:1,EX:2,kX:function(){function t(t){return"string"==typeof t?S:y}return function(i){return{encrypt:function(s,e,h){return t(e).encrypt(i,s,e,h)},decrypt:function(s,e,h){return t(e).decrypt(i,s,e,h)}}}}()});e.StreamCipher=u.extend({CX:function(){return this.xX(!0)},blockSize:1});var c=s.mode={},d=e.BlockCipherMode=h.extend({createEncryptor:function(t,i){return this.Encryptor.create(t,i)},createDecryptor:function(t,i){return this.Decryptor.create(t,i)},init:function(t,i){this.OX=t,this.NX=i}}),f=c.CBC=function(){var t=d.extend();function i(t,i,s){var e,h=this.NX;h?(e=h,this.NX=undefined):e=this.GX;for(var r=0;r<s;r++)t[i+r]^=e[r]}return t.Encryptor=t.extend({processBlock:function(t,s){var e=this.OX,h=e.blockSize;i.call(this,t,s,h),e.encryptBlock(t,s),this.GX=t.slice(s,s+h)}}),t.Decryptor=t.extend({processBlock:function(t,s){var e=this.OX,h=e.blockSize,r=t.slice(s,s+h);e.decryptBlock(t,s),i.call(this,t,s,h),this.GX=r}}),t}(),A=(s.pad={}).Pkcs7={pad:function(t,i){for(var s=4*i,e=s-t.sigBytes%s,h=e<<24|e<<16|e<<8|e,n=[],o=0;o<e;o+=4)n.push(h);var a=r.create(n,e);t.concat(a)},unpad:function(t){var i=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=i}};e.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:A}),reset:function(){var t;u.reset.call(this);var i=this.cfg,s=i.iv,e=i.mode;this.zX==this.RX?t=e.createEncryptor:(t=e.createDecryptor,this.MX=1),this.WX&&this.WX.UX==t?this.WX.init(this,s&&s.words):(this.WX=t.call(e,this,s&&s.words),this.WX.UX=t)},_X:function(t,i){this.WX.processBlock(t,i)},CX:function(){var t,i=this.cfg.padding;return this.zX==this.RX?(i.pad(this.Jw,this.blockSize),t=this.xX(!0)):(t=this.xX(!0),i.unpad(t)),t},blockSize:4});var g=e.CipherParams=h.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),m=(s.format={}).OpenSSL={stringify:function(t){var i=t.ciphertext,s=t.salt;return(s?r.create([1398893684,1701076831]).concat(s).concat(i):i).toString(a)},parse:function(t){var i,s=a.parse(t),e=s.words;return 1398893684==e[0]&&1701076831==e[1]&&(i=r.create(e.slice(2,4)),e.splice(0,4),s.sigBytes-=16),g.create({ciphertext:s,salt:i})}},y=e.SerializableCipher=h.extend({cfg:h.extend({format:m}),encrypt:function(t,i,s,e){e=this.cfg.extend(e);var h=t.createEncryptor(s,e),r=h.finalize(i),n=h.cfg;return g.create({ciphertext:r,key:s,iv:n.iv,algorithm:t,mode:n.mode,padding:n.padding,blockSize:t.blockSize,formatter:e.format})},decrypt:function(t,i,s,e){return e=this.cfg.extend(e),i=this.YX(i,e.format),t.createDecryptor(s,e).finalize(i.ciphertext)},YX:function(t,i){return"string"==typeof t?i.parse(t,this):t}}),p=(s.kdf={}).OpenSSL={execute:function(t,i,s,e){e||(e=r.random(8));var h=l.create({keySize:i+s}).compute(t,e),n=r.create(h.words.slice(i),4*s);return h.sigBytes=4*i,g.create({key:h,iv:n,salt:e})}},S=e.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:p}),encrypt:function(t,i,s,e){var h=(e=this.cfg.extend(e)).kdf.execute(s,t.keySize,t.ivSize);e.iv=h.iv;var r=y.encrypt.call(this,t,i,h.key,e);return r.mixIn(h),r},decrypt:function(t,i,s,e){e=this.cfg.extend(e),i=this.YX(i,e.format);var h=e.kdf.execute(s,t.keySize,t.ivSize,i.salt);return e.iv=h.iv,y.decrypt.call(this,t,i,h.key,e)}})}()}(cp.exports);var Sp={exports:{}}.exports=function(t){return function(){var i=t,s=i.lib.BlockCipher,e=i.algo,h=[],r=[],n=[],o=[],a=[],l=[],u=[],c=[],d=[],f=[];!function(){for(var t=[],i=0;i<256;i++)t[i]=i<128?i<<1:i<<1^283;var s=0,e=0;for(i=0;i<256;i++){var A=e^e<<1^e<<2^e<<3^e<<4;A=A>>>8^255&A^99,h[s]=A,r[A]=s;var g=t[s],m=t[g],y=t[m],p=257*t[A]^16843008*A;n[s]=p<<24|p>>>8,o[s]=p<<16|p>>>16,a[s]=p<<8|p>>>24,l[s]=p,p=16843009*y^65537*m^257*g^16843008*s,u[A]=p<<24|p>>>8,c[A]=p<<16|p>>>16,d[A]=p<<8|p>>>24,f[A]=p,s?(s=g^t[t[t[y^g]]],e^=t[t[e]]):s=e=1}}();var A=[0,1,2,4,8,16,32,64,128,27,54],g=e.AES=s.extend({wX:function(){if(!this.HX||this.$X!==this.VX){for(var t=this.$X=this.VX,i=t.words,s=t.sigBytes/4,e=4*((this.HX=s+6)+1),r=this.XX=[],n=0;n<e;n++)n<s?r[n]=i[n]:(l=r[n-1],n%s?s>6&&n%s==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]):(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=A[n/s|0]<<24),r[n]=r[n-s]^l);for(var o=this.jX=[],a=0;a<e;a++){if(n=e-a,a%4)var l=r[n];else l=r[n-4];o[a]=a<4||n<=4?l:u[h[l>>>24]]^c[h[l>>>16&255]]^d[h[l>>>8&255]]^f[h[255&l]]}}},encryptBlock:function(t,i){this.ZX(t,i,this.XX,n,o,a,l,h)},decryptBlock:function(t,i){var s=t[i+1];t[i+1]=t[i+3],t[i+3]=s,this.ZX(t,i,this.jX,u,c,d,f,r),s=t[i+1],t[i+1]=t[i+3],t[i+3]=s},ZX:function(t,i,s,e,h,r,n,o){for(var a=this.HX,l=t[i]^s[0],u=t[i+1]^s[1],c=t[i+2]^s[2],d=t[i+3]^s[3],f=4,A=1;A<a;A++){var g=e[l>>>24]^h[u>>>16&255]^r[c>>>8&255]^n[255&d]^s[f++],m=e[u>>>24]^h[c>>>16&255]^r[d>>>8&255]^n[255&l]^s[f++],y=e[c>>>24]^h[d>>>16&255]^r[l>>>8&255]^n[255&u]^s[f++],p=e[d>>>24]^h[l>>>16&255]^r[u>>>8&255]^n[255&c]^s[f++];l=g,u=m,c=y,d=p}g=(o[l>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^s[f++],m=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&l])^s[f++],y=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[l>>>8&255]<<8|o[255&u])^s[f++],p=(o[d>>>24]<<24|o[l>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^s[f++],t[i]=g,t[i+1]=m,t[i+2]=y,t[i+3]=p},keySize:8});i.AES=s.kX(g)}(),t.AES}(cp.exports),vp={exports:{}}.exports=function(t){return t.mode.CTR=(s=(i=t.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(t,i){var s=this.OX,e=s.blockSize,h=this.NX,r=this.QX;h&&(r=this.QX=h.slice(0),this.NX=void 0);var n=r.slice(0);s.encryptBlock(n,0),r[e-1]=r[e-1]+1|0;for(var o=0;o<e;o++)t[i+o]^=n[o]}}),i.Decryptor=s,i),t.mode.CTR;var i,s}(cp.exports),bp={exports:{}}.exports=function(t){return function(){if("function"==typeof ArrayBuffer){var i=t.lib.WordArray,s=i.init,e=i.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var i=t.byteLength,e=[],h=0;h<i;h++)e[h>>>2]|=t[h]<<24-h%4*8;s.call(this,e,i)}else s.apply(this,arguments)};e.prototype=i}}(),t.lib.WordArray}(cp.exports),xp={exports:{}}.exports=function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding}(cp.exports);const Mp={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAxODAxMjA="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvdHJvdWJsZXNob290aW5nL3Jlc3RyaWN0ZWQtZmVhdHVyZXMv","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzLw=="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI="],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw==","VHJhZGluZw==","ZmVhdHVyZXM=","Y2xpY2s=","aGVyZQ==","bW9yZQ==","c3VwcGxpZWQ=","Z2V0","bGljZW5zZQ==","VHJlZQ=="],1:["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2FuZGJveA=="]},_p=Tt,wp=(...t)=>t.slice(1).reduce(((i,s)=>i+_p.atob(Mp[t[0]][s].toString())),"");let Cp,kp,Tp,Fp=new Uint8Array([]);class Ip{set e(t){Cp=t}get e(){kp={qd:!1,tf:!1,if:!1,sf:!1,ef:!1,hf:!1,rf:!1,nf:!1,af:!1,lf:!1,uf:!1,cf:!1,df:!1,ff:!1,Af:!1,gf:!1,mf:!1,yf:!1,pf:!1,Sf:!1,vf:!1,bf:!1,xf:!1,Mf:!1};const t=Fp.length,i=t>=1?Fp[0]:void 0,s=t>=2?Fp[1]:void 0,e=t>=3?Fp[2]:void 0;return void 0!==i&&(kp.qd=!!(1&i),kp.tf=!!(2&i),kp.if=!!(4&i),kp.sf=!!(8&i),kp.ef=!!(16&i),kp.hf=!!(32&i),kp.rf=!!(64&i),kp.nf=!!(128&i)),void 0!==s&&(kp.af=!!(1&s),kp.lf=!!(2&s),kp.uf=!!(4&s),kp.cf=!!(8&s),kp.df=!!(16&s),kp.ff=!!(32&s),kp.Af=!!(64&s),kp.gf=!!(128&s)),void 0!==e&&(kp.mf=!!(1&e),kp.yf=!!(2&e),kp.pf=!!(4&e),kp.Sf=!!(8&e),kp.vf=!!(16&e),kp.bf=!!(32&e),kp.xf=!!(64&e),kp.Mf=!!(128&e)),kp.hf}set l(t){Tp=t}get l(){return Tp}}let Pp=!1;const Dp=(t,i)=>{const s=new RegExp(`.{${i}}`,"g");return(t.match(s)||[]).map((t=>parseInt(t,16)))},Bp=t=>{if(4===t.byteLength)return`${t[0].toString().padStart(2,"0")}${t[1].toString().padStart(2,"0")}${t[2].toString().padStart(2,"0")}${t[3].toString().padStart(2,"0")}`},Lp=t=>t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),Rp=t=>{const i={},s=t.split("-");if(3!==s.length)return{JX:wp(0,0,1,7,1,12,5)};let e=0;const h=Uint8Array.from(atob(s[1]),(t=>t.charCodeAt(0)));e+=1;const r=h.subarray(e,e+=20),n=new DataView(h.buffer).getUint16(e,!0);e+=2;const o=Uint8Array.from(Array(n));for(let t=0;t<n;t+=1)o[t]=h[t+e]^r[t%r.byteLength];const a=new DataView(o.buffer);i.KX=o,e=0;const l=Uint8Array.from(Array(a.getUint16(e,!0)));e+=2,l.set(o.subarray(e,e+=l.byteLength)),Fp=new Uint8Array(l);const u=Bp(o.subarray(e,e+=4)),c=wp(-3,0);if(!u)return{JX:wp(0,0,1,7,1,12,5)};if(u<c)return{JX:wp(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};if(8&l[0]){const t=Bp(o.subarray(e,e+=4)),i=Lp(new Date);if(!t)return{JX:wp(0,0,1,7,1,12,5)};if(t<i)return{JX:wp(0,0,1,2,1,3,1,4,5),qX:wp(-2,2)}}i.tj=e;const d=`${s[0]}-${s[1]}`,f=Array.prototype.reduce.call(atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");return Vp(d,f)?i:{JX:wp(0,0,1,7,1,12,5)}},Ep=t=>{const i=t.slice(0,4);let s=t.slice(5);switch(i){case"0001":{s=s.replace(/-/g,"");const t=Uint8Array.from(Dp(s,2)),i=t.slice(36,40),e=new Uint8Array(4),h=(t=>{let i;const s=[];for(let t=0;t<256;t+=1){i=t;for(let t=0;t<8;t+=1)i=1&i?3988292384^i>>>1:i>>>1;s[t]=i}let e=-1;for(let i=0;i<t.length;i+=1)e=e>>>8^s[255&(e^t[i])];return(-1^e)>>>0})(t.slice(0,36));new DataView(e.buffer).setUint32(0,h,!0);const r=t.slice(28,34);let n=0;for(let t=r.length-1;t>0;t-=1)n+=r[t]*2**(8*t);const o=new Date(n);if(Lp(o)<wp(-3,0))return{JX:wp(0,0,1,2,1,3,1,4,5),qX:wp(-2,2)};if(i.every(((t,i)=>e[i]===t)))return{};break}case"0002":return Rp(t);default:return{JX:wp(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}return{JX:wp(0,0,1,2,1,7,1,12,5)}},zp=t=>{if(!t)return{JX:wp(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5)};const i=(t[wp(-1,9)]||t[wp(-1,37)]).map((t=>(t||"").trim()));if(i.indexOf(_p[wp(-1,6)][wp(-1,7)])>-1)return{ij:!0};const s=i.filter((t=>t.indexOf("*")>-1));if(Up(_p[wp(-1,6)][wp(-1,7)],s))return{ij:!0};const e=t[wp(-1,8)]||t[wp(-1,38)];if(""!==e&&null!=e){if(Up(_p[wp(-1,6)][wp(-1,7)],[e]))return{ij:!1};if(e===_p[wp(-1,6)][wp(-1,7)])return{ij:!1}}return{JX:wp(0,14,1,20,5)}},Vp=(t,i)=>{const s=new lp("secp256k1").keyFromPublic(wp(-4,0),"hex"),e=fp(t).toString();return s.verify(e,i)},Op=t=>{switch(t.slice(0,4)){case"0001":return(t=>{let i,s="";try{const i=t.split("-"),e=i[1],h=i[2],r=i[3];if(!Vp(h,r))return{JX:wp(0,21,1,2,1,7,1,12,5)};const n=Ap.parse(h);s=Sp.decrypt({ciphertext:Ap.parse(e)},n,{mode:vp,padding:xp,iv:Ap.parse("00000000000000000000000000000001")}).toString(gp)}catch(t){return{JX:wp(0,21,1,2,1,7,1,12,5)}}try{i=JSON.parse(s)}catch(t){return{JX:wp(0,21,1,2,1,7,1,12,5)}}if(void 0===i[wp(-1,5)]||null===i[wp(-1,4)]||!i[wp(-1,9)])return{JX:wp(0,21,1,2,1,7,1,12,5)};const e=parseInt(wp(-3,0),10)||Number(parseInt(wp(-3,0),10));return i[wp(-1,5)]<e?{JX:wp(0,21,1,2,1,3,1,4,5)}:zp(i)})(t);case"0002":return(t=>{const i=Rp(t),s=i.KX,e=i.tj;if(i.JX||void 0===s||void 0===e)return i;let h,r="";try{const t=s.slice(i.tj,e+16),h=new DataView(t.buffer),n=new Int32Array(4);for(let t=0;t<n.length;t+=1)n[t]=h.getInt32(4*t,!1);const o=bp.create(Array.from(n)),a=e+16,l=s.slice(a,s.length),u=new DataView(l.buffer),c=new Int32Array(Math.floor(l.byteLength/4));for(let t=0;t<c.length;t+=1)c[t]=u.getInt32(4*t,!1);const d=bp.create(Array.from(c)),f=Sp.decrypt({ciphertext:d},o,{mode:vp,padding:xp,iv:Ap.parse("00000000000000000000000000000001")});r=_p.atob(f.toString(gp))}catch(t){return{JX:wp(0,21,1,2,1,7,1,12,5)}}try{h=JSON.parse(r)}catch(t){return{JX:wp(0,21,1,2,1,7,1,12,5)}}return h[wp(-1,37)]?zp(h):{JX:wp(0,21,1,2,1,7,1,12,5)}})(t);default:return{JX:wp(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},Np=(t,i)=>{switch(t.slice(0,4)){case"0001":return((t,i)=>{if(!i)return{JX:wp(0,39,1,40,1,41,5)};const s=t.split("-"),e=s[1].slice(1),h=s[2],r=s[3];if(!Vp(`${e}-${h}`,r))return{JX:wp(0,21,1,2,1,7,1,12,5)};const n=Uint8Array.from(Dp(h,2));let o=0;for(let t=n.length-1;t>0;t-=1)o+=n[t]*2**(8*t);if(o<(parseInt(wp(-3,0),10)||Number(parseInt(wp(-3,0),10))))return{JX:wp(0,21,1,2,1,3,1,4,5)};const a=Int32Array.from(Dp(e,8)),l=dp(i[wp(-1,31)]).toString(Ap),u=Int32Array.from(Dp(l,8)),c=dp(i[wp(-1,32)]).toString(Ap),d=Int32Array.from(Dp(c,8)),f=new Int32Array(u.length);for(let t=0;t<f.length;t+=1)f[t]=u[t]^d[t];return a.every(((t,i)=>f[i]===t))?{}:{JX:wp(0,21,1,2,1,7,1,12,5)}})(t,i);case"0002":return((t,i)=>{if(!i)return{JX:wp(0,39,1,40,1,41,5)};const s=Rp(t),e=s.KX,h=s.tj;if(s.JX||void 0===e||void 0===h)return s;const r=e.slice(h,e.length),n=new DataView(r.buffer),o=new Int32Array(8);for(let t=0;t<o.length;t+=1)o[t]=n.getInt32(4*t,!1);const a=dp(i[wp(-1,31)]).toString(Ap),l=Int32Array.from(Dp(a,8)),u=dp(i[wp(-1,32)]).toString(Ap),c=Int32Array.from(Dp(u,8)),d=new Int32Array(l.length);for(let t=0;t<d.length;t+=1)d[t]=l[t]^c[t];return o.every(((t,i)=>d[i]===t))?{}:{JX:wp(0,21,1,2,1,7,1,12,5)}})(t,i);default:return{JX:wp(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},Gp=(t,i,s=!0,e)=>{Pp=!1,i.so();const h=i.Gr,r=!!h&&(h===Tt.document.body||Tt.document.body.contains(h)),n=h&&r?h:document.body;if(void 0===Array.from(n.children).find((t=>"lcjs-error"===t.id))){const i=Tt.document.createElement("div");i.id="lcjs-error",n.append(i),i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.width="100%",i.style.height="100%",i.style.backgroundColor="black",i.style.boxSizing="border-box",i.style.padding="20px",i.style.font="Arial",i.style.fontSize="20px";let h,r=(t||"LICENSE_ERROR").toLowerCase().split("_").join(" ");if(r=(s?wp(0,0,1,2,1,23,1,24,25,1):"")+r.charAt(0).toUpperCase()+r.substr(1),e){const t=Tt.document.createElement("a");t.href=e,h=t}else h=Tt.document.createElement("p1");i.append(h),h.innerHTML=r,h.style.color="red"}},Wp=(t,i,s)=>{i?(t[wp(-1,17)](wp(-1,19),s),t[wp(-1,17)](wp(-1,20),s),t[wp(-1,17)](wp(-1,21),s),t[wp(-1,17)](wp(-1,22),s)):(t[wp(-1,18)](wp(-1,19),s),t[wp(-1,18)](wp(-1,20),s),t[wp(-1,18)](wp(-1,21),s),t[wp(-1,18)](wp(-1,22),s))},Up=(t,i)=>{const s=t.split(".").reverse();return i.some((t=>{const i=t.split(".").reverse();let e=!1;const h=i.findIndex((t=>"*"===t)),r=s.every(((t,s)=>{if(!e){if(!(s<i.length))return!1;if(e="*"===i[s]&&s+1>2,!e&&t!==i[s])return!1}return!0}));return!(h>s.length-1||!r)}))},Yp=new Map,Hp=(t,i)=>{const e="object"==typeof t?t.license:t,h="object"==typeof t?t.licenseInformation:i,r="object"==typeof t?t:void 0,n=new Ip;n.e=e;let o=Yp.get(e||"E");return o||(o=((t,i)=>{let e,h,r=!1,n=!1,o=!1,a=!1,l="",u=!1,c=!1;try{if(Cp){const s=(t=>{if(!Cp)return;const i=Cp.split("-");if(i.length>0)switch(i[0]){case"0001":return"0001";case"0002":return"0002";case"T001":return"T001";default:return}})();if("0001"===s){Fp=new Uint8Array([2]);const i=(t=>{if(!Cp)return;const i=Cp.split("-");return 4===i.length?i[1].startsWith("m")?2:1:0})();if(1===i){const t=Op(Cp);o=!t.ij,e=t,r=!0}else 2===i?(e=Np(Cp,t),n=!0):(Pp=!0,e=Ep(Cp),a=!0)}else if("0002"===s){const i=(t=>{if(!Cp)return;const i=Cp.split("-");return i.length>=2?Uint8Array.from(atob(i[1]),(t=>t.charCodeAt(0)))[0]:void 0})();if(104===i)Pp=!0,e=Ep(Cp),a=!0;else if(189===i){const t=Op(Cp);o=!t.ij,e=t,r=!0}else 159===i?(e=Np(Cp,t),n=!0):e={JX:wp(0,0,1,7,1,12,5)}}else if("T001"===s){const s=((t,i)=>{const s=Cp.split("-");if(3!==s.length)return{JX:wp(0,0,1,7,1,12,5)};const e=`${s[1]}`,h=Array.prototype.reduce.call(atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");if(!Vp(e,h))return{JX:wp(0,0,1,7,1,12,5)};let r=0;const n=Uint8Array.from(atob(s[1]),(t=>t.charCodeAt(r))),o=n.subarray(r,r+=20),a=new DataView(n.buffer).getUint16(r,!0);r+=2;const l=Uint8Array.from(Array(a));for(let t=0;t<a;t+=1)l[t]=n[t+r]^o[t%o.byteLength];r=0;const u=new DataView(l.buffer),c=Bp(l.subarray(r,r+=4)),d=wp(-3,0);if(!c)return{JX:wp(0,0,1,7,1,12,5)};if(c<d)return{JX:wp(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};const f=new Date,A=new Date;f.setDate(f.getDate()+1),A.setDate(A.getDate()-1);const g=Lp(A),m=Lp(f);if(c<g||c>m)return{JX:wp(0,0,1,2,1,3,1,4,5)};const y=u.getUint16(r,!0),p=l.subarray(r+=2,r+y);if(Fp=new Uint8Array(p),i&&"dHJhZGVy"in i&&"dGVjaG5pY2FsIGFuYWx5c2lz"===i.dHJhZGVy)return{sj:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="};if(i&&"logoGraphic"in i&&i.logoGraphic){const t=i.logoGraphic.split("-");return 3===t.length&&Vp(t[0],t[2])?{sj:t[0]}:{JX:wp(0,0,1,7,1,12,5)}}return{JX:wp(0,0,1,7,1,12,5)}})(0,t);e=s;const h=s.sj;h&&i?("string"==typeof h&&(i.l=h),r=!0):e={JX:wp(0,0,1,7,1,12,5)}}else e={JX:wp(0,0,1,7,1,12,5)}}else{const t=/^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])|192\.168)\./;["localhost","127.0.0.1","::1"].includes(window.location.hostname)||t.test(window.location.hostname)?e={JX:wp(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68),qX:wp(-2,2)}:window.location.host===_p.atob("c3RhY2tzbmlwcGV0cy5uZXQ=")?(c=!0,u=!1,Fp=new Uint8Array([38]),e={}):(c=!0,u=!0,Fp=new Uint8Array([38]),e={})}}catch(t){e={JX:wp(0,0,1,7,1,12,5)}}try{a&&(h=_p[wp(-1,34)][wp(-1,35)](wp(-1,39))||void 0)}catch(t){_p.console.error(t)}let d=!1;if(h){const t=h.split("-");if(2===t.length&&Vp(t[0],t[1])){const[i,s]=t[0].split(":").map((t=>Number(t)));Date.now()-s<.95*i*1e3&&(d=!0)}}const f=!(c||u||e.JX||r||n||d),A=(()=>{const t=new(_p[wp(-1,0)]);return t.open(wp(0,26),wp(-2,0)),t.setRequestHeader(wp(-1,24),wp(-1,25)),t.withCredentials=!0,t})(),g=new s;if(f){let t;try{t=parseInt(Cp?Cp.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(i){t=Math.floor(1e6*Math.random())}const i=Math.floor(1e6*Math.random());l=(t^i).toString();const s={};let e="",h="",r="";Cp=Cp||"";const n=wp(-4,0);for(let t=0;t<Cp.length;t+=1){const i=Cp.charCodeAt(t)^n.charCodeAt(t);e+=String.fromCharCode(i)}const o=wp(-3,0);for(let t=0;t<o.length;t+=1)h+=String.fromCharCode(o.charCodeAt(t)^n.charCodeAt(t));for(let t=0;t<l.length;t+=1)r+=String.fromCharCode(l.charCodeAt(t)^n.charCodeAt(t));s[wp(-1,3)]=_p.btoa(e),s[wp(-1,4)]=_p.btoa(h),s.h=_p.btoa(r),s.v=3,s.s=_p[wp(-1,34)][wp(-1,35)](wp(-1,33))||void 0,A.send(JSON.stringify(s))}return(t,s)=>{const r=[],n={Nn:t=>{r.indexOf(t)>=0||(r.push(t),a())},Gn:t=>g.on("logoChange",t),Wn:t=>g.off(t)},a=()=>{r.forEach((t=>{const i=d(t);if(!i)return;const{ej:s,hj:e}=i,h=e?wp(-2,1):void 0,r=`${wp(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${s}${h?wp(0,1,63,1,64,1,59,1,65,1,41):""}`;Gp(r,m,!1,h)}))},c=t=>t.toLowerCase().split("_").join(" "),d=t=>{var i;const s=null===(i=Object.entries(_o).find((i=>i[1]===t)))||void 0===i?void 0:i[0];if(s){switch(t){case _o.if:return kp.qd||kp.if?void 0:{ej:c(s),hj:!0};case _o.rf:return kp.qd||kp.rf?void 0:{ej:c(s),hj:!0};case _o.nf:return kp.qd||kp.tf||kp.nf?void 0:{ej:c(s)};case _o.tf:return kp.qd||kp.tf?void 0:{ej:c(s)};case _o.df:return kp.qd||kp.tf||kp.df?void 0:{ej:c(s)};case _o.gf:return kp.qd||kp.tf||kp.gf?void 0:{ej:c(s)};case _o.Sf:return kp.qd||kp.tf||kp.Sf?void 0:{ej:c(s)};case _o.bf:return kp.qd||kp.tf||kp.bf?void 0:{ej:c(s)};case _o.xf:return kp.qd||kp.tf||kp.xf?void 0:{ej:c(s)};case _o.vf:return kp.qd||kp.tf||kp.vf?void 0:{ej:c(s)};case _o.lf:return kp.qd||kp.tf||kp.lf?void 0:{ej:c(s)};case _o.Af:return kp.qd||kp.tf||kp.Af?void 0:{ej:c(s)};case _o.cf:return kp.qd||kp.tf||kp.cf?void 0:{ej:c(s)};case _o.mf:return kp.qd||kp.tf||kp.mf?void 0:{ej:c(s)};case _o.pf:return kp.qd||kp.tf||kp.pf?void 0:{ej:c(s)};case _o.yf:return kp.qd||kp.tf||kp.yf?void 0:{ej:c(s)};case _o.af:return kp.qd||kp.tf||kp.af?void 0:{ej:c(s)};case _o.uf:return kp.qd||kp.tf||kp.uf?void 0:{ej:c(s)};case _o.ff:return kp.qd||kp.tf||kp.ff?void 0:{ej:c(s)};case _o.Mf:return kp.qd||kp.tf||kp.Mf?void 0:{ej:c(s)};case _o.qd:case _o.sf:case _o.hf:case _o.ef:return}return Ti(0,"")}},m=new Yy(s,t,n);(null==e?void 0:e.JX)&&Gp(e.JX,m,void 0,e.qX);const y=t=>{if("error"===(null==t?void 0:t.type)&&h){const t=h.split("-");if(2===t.length&&Vp(t[0],t[1])){const[,i]=t[0].split(":").map((t=>Number(t)));if(i+9e5>Date.now())return Pp=!1,void Wp(A,!1,p)}}if(A.readyState===_p[wp(-1,0)].DONE)if(200===A.status){const t=JSON.parse(A[wp(-1,23)]);if(!Vp(l+wp(-3,0),t.h)){const t=wp(0,0,1,27,1,28,1,29,1,30,1,31,5);Gp(t,m)}_p[wp(-1,34)][wp(-1,36)](wp(-1,39),t.t),_p[wp(-1,34)][wp(-1,36)](wp(-1,33),t.s),Pp=!1}else{let i="";try{i=t&&"loadend"!==t.type?wp(0,0,1,23,1,32,1,24,5):JSON.parse(A[wp(-1,23)]).message,Wp(A,!1,p)}catch(t){console.error(t)}Gp(wp(0,0,1,2,1,7,1,12,5)+i,m)}},p=t=>{y(t)};if(Wp(A,!0,p),f?setTimeout((()=>{if(Pp){let t=!0;if(h){const i=h.split("-");if(2===i.length&&Vp(i[0],i[1])){const[,s]=i[0].split(":").map((t=>Number(t)));s+9e5>Date.now()&&(t=!1)}}t&&Gp(wp(0,25,1,23,1,32,1,24,5),m)}}),1e4):Wp(A,!1,p),u){const t=(()=>{const t=new(_p[wp(-1,0)]);return t.open(wp(0,26),wp(1,0)),t.setRequestHeader("Content-Type","text/plain"),t.withCredentials=!0,t})(),s=Array.from({length:10},(()=>String.fromCharCode(Math.floor(256*Math.random())))).join(""),e=e=>{if("error"===(null==e?void 0:e.type)){const t=wp(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Gp(t,m,!1,wp(-2,2)),Wp(A,!1,h)}if(t.readyState===_p.XMLHttpRequest.DONE){const e=t.getResponseHeader("X-LCJS-SANDBOX-V");if(200!==t.status||e&&"1"!==e){const t=wp(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Gp(t,m,!1,wp(-2,2)),Wp(A,!1,h)}else{const e=JSON.parse(t.responseText);if(!Vp(s,e.s)){const t=wp(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Gp(t,m,!1,wp(-2,2)),Wp(A,!1,h)}void 0!==i&&(i.l=e.l),g.emit("logoChange",e.l)}}else{const t=wp(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Gp(t,m,!1,wp(-2,2)),Wp(A,!1,h)}},h=t=>{e(t)};Wp(t,!0,h),t.send(s),setTimeout((()=>{if(t.readyState<2){const t=wp(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Gp(t,m,!1,wp(-2,2)),Wp(A,!1,h)}}),1e4)}return o?(t=>{let i;Pp=!1;const s=t.oi(),e=()=>{i&&(t.xn(i.bn()),i=void 0),i=t.FI("deployment test"),i.Pr(t.dt).Rh(wp(0,34,1,33)).Fe({x:s.x/2,y:s.y/2}).ba(50).Nh(13).Ce(new U({color:v(128,128,128,100)})).Sa("Arial").Ma(500).setMouseInteractions(!1),t.pn().Sn()};t.Co((()=>{e()})),setTimeout(e,0),setInterval((()=>{i&&i.bn()<t.do()-1?e():i||e()}),1e3)})(m):A.readyState===_p[wp(-1,0)].DONE&&y(),m}})(h,n)),((t,i,s,e)=>{var h,r,n,o,a,l,u,c,d,f;let A;if(s&&s.license){const t=s.license.split("-");A=t[t.length-1]}const g=(null===(h=null==s?void 0:s.webgl)||void 0===h?void 0:h.version)||(null===(n=null===(r=null==s?void 0:s.sharedContextOptions)||void 0===r?void 0:r.webgl)||void 0===n?void 0:n.version),m={WE:null===(o=null==s?void 0:s.sharedContextOptions)||void 0===o?void 0:o.canvas,Hn:null==s?void 0:s.warnings,qE:"webgl1"===g?1:"webgl2"===g?2:void 0,ZE:!1!==(null===(a=null==s?void 0:s.sharedContextOptions)||void 0===a?void 0:a.antialias),jE:(null===(l=null==s?void 0:s.sharedContextOptions)||void 0===l?void 0:l.devicePixelRatio)||void 0,az:(null===(u=null==s?void 0:s.sharedContextOptions)||void 0===u?void 0:u.noCanvasStyles)||void 0,dz:(null===(c=null==s?void 0:s.sharedContextOptions)||void 0===c?void 0:c.noCanvasTransform)||void 0,JE:!1!==(null===(d=null==s?void 0:s.sharedContextOptions)||void 0===d?void 0:d.useStackingOrder),KE:!1!==(null===(f=null==s?void 0:s.sharedContextOptions)||void 0===f?void 0:f.useIndividualCanvas),lz:A||void 0},y=new Vg(m),p=i=>t(i,y);return{Dashboard:Og(p,i,s,e),ChartXY:Wg(p,i,s,e),Spider:Ug(p,i,s,e),Polar:Yg(p,i,s,e),Pie:Hg(p,i,s,e),UIPanel:Gg(p,i,s,e),Gauge:$g(p,i,s,e),Funnel:Xg(p,i,s,e),Pyramid:jg(p,i,s,e),Chart3D:Qg(p,i,s,e),Map:Zg(p,i,s,e),DataGrid:Jg(p,i,s,e),BarChart:Kg(p,i,s,e),ZoomBandChart:qg(p,i,s,e),TreeMapChart:tm(p,i,s,e),dispose:y.W.bind(y),layout:y.yz.bind(y)}})(o,n.e,r,n.l)};export{J as Animation,Q as AnimationEasings,K as Animator,Ac as AreaRangeSeries,oc as AreaSeries,ac as AreaSeriesBipolar,lc as AreaSeriesMonopolar,uc as AreaSeriesNegative,cc as AreaSeriesPositive,dc as AreaSeriesTypes,La as AutoCursor2DBuilder,eA as AutoCursorBuilders,va as AutoCursorModes,_u as AutoCursorXYBuilder,Ca as AutoFitStrategies,Ma as AutoFitStrategy,Co as Axis,dl as Axis3D,jc as AxisPosition,Ye as AxisScrollStrategies,He as AxisTickStrategies,We as Band,Hf as BarChart,Wf as BarChartBar,Nf as BarChartCategoryAxis,Xf as BarChartSorting,$f as BarChartTypes,Gf as BarChartValueAxis,Gu as BasicSeries,Ur as BorderedPicture,Su as BoxFigure,Hu as BoxSeries,Sl as BoxSeries3D,qn as Button,pa as Chart,Vl as Chart3D,Zs as ChartComponent,Pu as ChartMarker,Du as ChartMarker2D,Lu as ChartMarkerXY,kl as ChartWithSeries,sd as ChartXY,id as ChartXYTitlePositionOptions,p as Color,M as ColorCSS,b as ColorHEX,x as ColorHSV,Xr as ColorPalettes,v as ColorRGBA,rn as ColorShadingStyles,_ as ColorUint32,Ue as ConstantLine,Ba as CursorBuilder,Mu as CursorBuilderXY,Pr as CustomTick,qf as Dashboard,dn as DashedLine,Lf as DataGrid,Ef as DataGridCellContentAlignmentOptions,Vh as DataPatternsNew,vn as DataSetXY,Xo as DateTimeTickStrategy,$u as EllipseFigure,Xu as EllipseSeries,V as EmptyFill,Nr as EmptyUIElement,pu as Figure,Uu as FigureSeries,uh as FontSettings,Es as FormattingFunctions,Md as FunnelChart,Td as FunnelChartTypes,kd as FunnelChartWithLabelsInsideSlices,Cd as FunnelChartWithLabelsOnSides,Fd as FunnelLabelSide,pd as FunnelSlice,vd as FunnelSliceModes,Pd as GaugeChart,AA as GaugeChartTypes,Bd as GaugeSlice,eh as GenericAxis,pn as GlowEffect,tt as GradientExtent,q as GradientShape,ic as HeatmapGridSeries,sc as HeatmapGridSeriesIntensityValues,ec as HeatmapScrollingGridSeries,hc as HeatmapScrollingGridSeriesIntensityValues,js as HighlightModes,Qs as Highlighter,gn as Icon,an as ImageFill,nn as ImageFitMode,H as IndividualPointFill,R as LUT,So as LegendBoxBuilders,vl as LineAndPointSeries3D,Gc as LineSeries,bl as LineSeries3D,rt as LinearGradientFill,pt as LinearGradientFillPalette,jl as MapChart,fA as MapRegions,hA as MapRegionsAfrica,rA as MapRegionsAsia,nA as MapRegionsAustralia,oA as MapRegionsCanada,aA as MapRegionsEurope,cA as MapRegionsNorthAmerica,dA as MapRegionsSouthAmerica,uA as MapRegionsUSA,lA as MapRegionsWorld,Gl as MapTypes,sA as MarkerBuilders,zl as MeshModel3D,Pe as MouseStyles,sa as NumericTickStrategy,Rc as OHLCSeries,zc as OHLCSeriesBars,Ec as OHLCSeriesCandlesticks,Vc as OHLCSeriesTypes,Ge as OSMPosition,Uc as OnScreenMenu,ke as OnScreenMenuAnimationsButton,Se as OnScreenMenuButton,oe as OnScreenMenuButtonShape,ne as OnScreenMenuButtonType,re as OnScreenMenuControlBase,Fe as OnScreenMenuCustomButton,Ie as OnScreenMenuOsmToggleButton,ve as OnScreenMenuToggleButton,be as OnScreenMenuZoomInButton,xe as OnScreenMenuZoomInXButton,Me as OnScreenMenuZoomInYButton,_e as OnScreenMenuZoomOutButton,we as OnScreenMenuZoomOutXButton,Ce as OnScreenMenuZoomOutYButton,Te as OnScreenMenuZoomToFitButton,j as PalettedFill,Aa as Panel,sn as PhongShadingStyle,Wr as Picture,sl as PieChart,ol as PieChartTypes,nl as PieChartWithLabelsInsideSlices,rl as PieChartWithLabelsOnSides,Ja as PieSlice,ph as PixelatedPoints3D,wl as PointCloudSeries3D,Yc as PointLineAreaSeries,Sc as PointLineSeries,xl as PointLineSeries3D,Wc as PointSeries,_l as PointSeries3D,Cl as PointSeriesTypes3D,zh as PointShape,vh as PointStyle3D,fd as PolarAreaSeries,Ad as PolarAreaSeriesInterior,Jl as PolarAxis,ql as PolarAxisAmplitude,Kl as PolarAxisTick,md as PolarChart,Au as PolarHeatmapSeries,mu as PolarLineSeries,yu as PolarPointLineSeries,ud as PolarPointSeries,cd as PolarPolygon,dd as PolarPolygonSeries,nu as PolarSector,au as PolarSeries,ju as PolygonFigure,Zu as PolygonSeries,Wd as PyramidChart,Xd as PyramidChartTypes,$d as PyramidChartWithLabelsInsideSlices,Hd as PyramidChartWithLabelsOnSides,jd as PyramidLabelSide,Vd as PyramidSlice,Id as PyramidSliceModes,Dd as RadialGauge,st as RadialGradientFill,yt as RadialGradientFillPalette,rc as RangeSeries,Qu as RectangleFigure,Ju as RectangleSeries,Ku as SegmentFigure,qu as SegmentSeries,ou as Series2D,pl as Series3D,Ru as SeriesMarkerXY,Eu as SeriesXY,Kr as SimpleShadingStyle,Za as Slice,Xa as SliceLabelFormatters,Ha as SliceLabelIndices,$a as SliceSorters,U as SolidFill,mt as SolidFillPalette,zd as SolidGauge,Ld as SolidGaugeSlice,ee as SolidLine,Kd as SpiderAxis,lf as SpiderChart,tf as SpiderSeries,Jd as SpiderWebMode,xc as SplineSeries,Ra as StaticCursor2DBuilder,wu as StaticCursorXYBuilder,gc as StepOptions,Lc as StepSeries,un as StipplePatterns,Dl as SurfaceGridSeries3D,Bl as SurfaceScrollingGridSeries3D,ka as TableContentBuilder,EA as Themes,wo as Tick,Po as TickStyle,na as TimeFormattingFunctions,aa as TimeTickStrategy,bA as TreeMapChart,gh as TriangulatedPoints3D,iA as UIBackgrounds,In as UICircle,Nn as UIColumnGrid,Pn as UIDiamond,kt as UIDirections,Ct as UIDraggingModes,po as UIElementBuilders,Vn as UIElementColumn,En as UIElementLine,zn as UIElementRow,Fr as UIElementWithBackground,Gr as UIEmptyBackground,kn as UILabel,Ol as UILayoutBuilders,Rn as UILayoutGap,Nl as UILegendBoxPanel,_r as UIObject,De as UIOrigins,ma as UIPanel,Bn as UIPoint,Dn as UIPointer,Yr as UIPolygon,Fn as UIRectangle,Gn as UIRowGrid,_t as UISpace,wt as UIVisibilityModes,W as VisibleFill,ad as ZoomBandChart,Ne as defaultOsmBackgroundColor,VA as disableThemeEffects,O as emptyFill,at as emptyLine,fh as emptyPoints3D,Bo as emptyTick,Ql as formatLongitudeLatitude,zs as formatNumberAsUnicodeSuperscript,S as isColor,Rl as isCoordinate3D,Uf as isCoordinateBarChart,Hs as isCoordinateClient,ru as isCoordinatePolar,Xs as isCoordinateXY,fn as isDashedLine,jo as isDateTimeTickStrategy,N as isEmptyFill,Lo as isEmptyTick,ch as isFontSettings,Sn as isGlowEffect,mn as isIcon,$ as isIndividualPointFill,E as isLUT,nt as isLinearGradientFill,ea as isNumericTickStrategy,Z as isPalettedFill,en as isPhongShadingStyle,Sh as isPixelatedPoints3D,et as isRadialGradientFill,od as isSeriesSupportedByZoomBandChart,qr as isSimpleShadingStyle,Y as isSolidFill,he as isSolidLine,Do as isTickStyle,la as isTimeTickStrategy,mh as isTriangulatedPoints3D,Hp as lightningChart,Re as onScreenMenuControlBaseHeight,Ee as onScreenMenuControlBaseWidth,ze as onScreenMenuControlOpacity,Oe as onScreenMenuDefaultButtonShape,Ve as onScreenMenuSpriteURL,vt as regularColorSteps,ua as saveToFile,St as synchronizeAxisIntervals,At as translatePoint,gt as translatePoint3D,Be as transparentFill,Le as transparentLine,P as uint32ColorFromObject,I as uint32ColorFromRGBA,Vi as vec3Utils,ko as xDimensionStrategy,To as yDimensionStrategy};
