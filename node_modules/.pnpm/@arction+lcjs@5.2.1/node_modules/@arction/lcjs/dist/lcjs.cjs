/* LightningChart JS v5.2.1 */
"use strict";Object.defineProperty(exports,"i",{value:!0});var t=require("immutable"),i=require("@arction/eventer"),s=require("earcut");function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function h(t){if(t&&t.i)return t;var i=Object.create(null);return t&&Object.keys(t).forEach((function(s){if("default"!==s){var e=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(i,s,e.get?e:{enumerable:!0,get:function(){return t[s]}})}})),i.default=t,Object.freeze(i)}var r=h(t),n=e(s);class o{constructor(){this.o=!0}u(){return this.o}}class a extends o{constructor(t,i){super(),this.S=t,this.o=i}M(t){return t!==this.S&&(this.S=t,this.o=!0),this}_(){return this.S}u(){return super.u()}}const l=(t,i)=>({x:t,y:i}),u=(t,i)=>({x:t,y:i}),c=(t,i,s)=>({position:t,high:i,low:s}),d=(t,i,s)=>({x:t,y:i,z:s}),f=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(l(t.position,t.high)),s.push(l(t.position,t.low))})),[i,s]},A=(t,i)=>({min:t,max:i}),g=(t,i,s,e)=>({x:Math.ceil(t),y:Math.ceil(i),width:Math.ceil(s),height:Math.ceil(e)}),p=(t,i=!0)=>new a(t,i),m=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),y=m,S=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom}),v=t.Record({type:"color",r:1,g:1,b:1,a:1});class x extends v{constructor(t){super(t)}toUint32(){return void 0!==this.C||(this.C=I(this.getR(),this.getG(),this.getB(),this.getA())),this.C}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.T||(this.T=new x({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.T}getLighter(){return this.F||(this.F=new x({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.F}getDarker(){return this.I||(this.I=new x({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.I}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const b=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),M=(t,i,s,e=255)=>new x({r:t/255,g:i/255,b:s/255,a:e/255}),_=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new x({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new x({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new x({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new x({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},w=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),u=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=u,r=a;break;case 1:e=l,h=s,r=a;break;case 2:e=a,h=s,r=u;break;case 3:e=a,h=l,r=s;break;case 4:e=u,h=a,r=s;break;default:e=s,h=a,r=l}return new x({r:e,g:h,b:r})},C=t=>M(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),k={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},T=new x({}),F=M(0,0,0,0),I=(t,i,s,e=255)=>(e<<24|s<<16|i<<8|t)>>>0,P=(t,i)=>t.value-i.value,D=t.Record({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:M(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),B=t=>{const{steps:i}=t,s=i.length;i.sort(P);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class L extends D{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,B(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(B({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const i=t,s=i.length,e=i[0].length,h=[...Array(s)].map((()=>Array(e)));for(let t=0;t<s;t+=1)for(let s=0;s<e;s+=1)h[t][s]=this.P(i[t][s]);return h}const i=t,s=i.length,e=Array(s);for(let t=0;t<s;t+=1)e[t]=this.P(i[t]);return e}return this.P(t)}P(t){const{steps:i}=this,s=i.length;if(0===s)return this.getFallbackColor();if(1===s)return i[0].color||this.color;if(this.interpolate){for(let n=0;n<s-1;n+=1){const s=i[n],o=i[n+1],a=Math.min(s.value,o.value),l=Math.max(s.value,o.value);if(t>=a&&t<=l){if(a===l)return s.color;const i=(t-s.value)/(o.value-s.value);return e=s.color,h=o.color,r=i,new x({r:e.r+(h.r-e.r)*r,g:e.g+(h.g-e.g)*r,b:e.b+(h.b-e.b)*r,a:e.a+(h.a-e.a)*r})}}return t<i[0].value?i[0].color:i[s-1].color}var e,h,r;for(let e=s-1;e>=0;e-=1)if(t>=i[e].value)return i[e].color;return i[0].color}}const R=t.Record({type:"fillstyle",fillType:"empty"});class E extends R{toString(){return"emptyFill"}}const z=new E,V=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),O=t.Record({type:"fillstyle",fillType:"solid",color:M(255,255,255)});class N extends O{}class G extends N{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return b(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const W=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class U extends N{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return b(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const Y=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),H=t.Record({type:"fillstyle",fillType:"palette",lut:new L({steps:[]}),lookUpProperty:"value"}),$=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType),X={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=ti(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class j{constructor(t,s,e,h=X.linear,r){this.delta=0,this.nextAnimations=new Array,this.D=!1,this.easing=X.linear,this.L=new i.Eventer,this.isOver=()=>(this.delta===this.duration||this.D)&&0===this.nextAnimations.length,this.values=t,this.action=s,this.duration=e,this.easing=h,this.R=r,this.eases=t.map((([t,i])=>h(t,i,e)))}V(){this.L.emit("start")}start(){return this.R.includes(this)||this.R.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new j(t,i,s,e,this.R);return this.nextAnimations.push(h),h}onAnimationStart(t,i){return this.L.on("start",t,i)}onAnimationEnd(t,i){return this.L.on("end",t,i)}onEveryAnimationEnd(t,i){return this.L.on("everyEnd",t,i)}onAllAnimationEnd(t,i){return this.L.on("allEnd",t,i)}allOffAnimationEnd(){return this.L.topicOff("end"),this}allOffEveryAnimationEnd(){return this.L.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.L.topicOff("allEnd"),this}offAnimationEnd(t){return this.L.off(t,"end")}offEveryAnimationEnd(t){return this.L.off(t,"everyEnd")}offAllAnimationEnd(t){return this.L.off(t,"allEnd")}finish(t=!0){if(this.D=!0,this.R.splice(this.R.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&(this.L.listeners("allEnd").forEach(((t,s)=>i.onAllAnimationEnd(t,s))),this.L.listeners("everyEnd").forEach(((t,s)=>i.onEveryAnimationEnd(t,s)))),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.L.emit("end",i),this.L.emit("everyEnd",i)),i}t&&(this.L.emit("end",void 0),this.L.emit("everyEnd",void 0),this.L.emit("allEnd"))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(_t):this.values.map(_t)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}}const Z=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.V(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=xt.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=X.linear)=>(h,r,o=t)=>{const a=new j(h,r,o,i,s).start();return e||(e=xt.requestAnimationFrame(n)),a}};var Q,J;exports.GradientShape=void 0,(Q=exports.GradientShape||(exports.GradientShape={})).circle="circle",Q.ellipse="ellipse",exports.GradientExtent=void 0,(J=exports.GradientExtent||(exports.GradientExtent={})).closestSide="closest-side",J.closestCorner="closest-corner",J.farthestSide="farthest-side",J.farthestCorner="farthest-corner";const K=t.Record({type:"fillstyle",fillType:"radial-gradient",stops:[{color:_("#f00"),offset:0},{color:_("#0f0"),offset:1}],position:l(.5,.5),shape:exports.GradientShape.ellipse,extent:exports.GradientExtent.farthestCorner});class q extends K{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const tt=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),it=t.Record({type:"fillstyle",fillType:"linear-gradient",stops:[{color:_("#f00"),offset:0},{color:_("#0f0"),offset:1}],angle:0});class st extends it{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?As(t):t)}getAngle(t){return t?fs(this.get("angle")):this.get("angle")}}const et=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType),ht=t.Record({type:"linestyle",lineType:"empty"}),rt=new class extends ht{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}O(){return 0}setFillStyle(t){return this}getFillStyle(){return z}},nt=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType);class ot{constructor(t,s,e,h){this.cellIndex=t,this.cellSpan=s,this.cellsAmount=e,this.observedAmount=h,this.x=new at,this.y=new at,this.z=new at,this.L=new i.Eventer;const r={...t},n={...s};if(h){const t=t=>{this.cellsAmount.x=t.reduce(Gi,0),this.cellIndex.x=t.reduce(((t,i,s)=>s>=r.x?t:t+i),0),this.cellSpan.x=t.reduce(((t,i,s)=>s>=r.x&&s<r.x+n.x?t+i:t),0),this.L.emit("cell-resize")},i=h.x.N(t);t(h.x._());const s=t=>{this.cellsAmount.y=t.reduce(Gi,0),this.cellIndex.y=t.reduce(((t,i,s)=>s>=r.y?t:t+i),0),this.cellSpan.y=t.reduce(((t,i,s)=>s>=r.y&&s<r.y+n.y?t+i:t),0),this.L.emit("cell-resize")},e=h.y.N(s);s(h.y._()),this.G=()=>{h.x.W(i),h.y.W(e)}}}U(){return this.G&&(this.G(),this.G=void 0),this}Y(t){return this.L.on("cell-resize",t)}H(t){return this.L.off(t,"cell-resize")}}class at extends o{constructor(){super(...arguments),this.$=0,this.X=10,this.j=1}Z(){return this.o=!1,this}J(){return this.o=!0,this}getInnerStart(){return this.$}getInnerEnd(){return this.X}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}K(t,i){return this.$=t,this.X=i,this.q(),this}tt(t){return this.j=t,this.q(),this}it(t){return t/this.j}q(){const t=this.it(this.X-this.$),i=this.j;void 0!==this.st&&!1!==kt(t,this.st)||(this.o=!0,this.et=i,this.st=t)}ht(){return this.st}rt(){return this.et}nt(){return this.X<this.$}ot(t,i){return!0}}const lt={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).ut({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new ot({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},ut=(t,i,s)=>i===s?t:s.ct(i.dt(t)),ct=(t,i,s)=>{if(i===s)return t;const e=i instanceof Bs?i.x:i.x instanceof Bs?i.x.x:i.x.ft,h=i instanceof Bs?i.y:i.y instanceof Bs?i.y.y:i.y.ft,r=s instanceof Bs?s.x:s.x instanceof Bs?s.x.x:s.x.ft,n=s instanceof Bs?s.y:s.y instanceof Bs?s.y.y:s.y.ft;return{...t,x:ut(t.x,e,r),y:ut(t.y,h,n)}},dt=(t,i,s)=>{if("axes"===i.id&&"world"===s.id)return i.chart.yt.At(t);if("world"===i.id&&"axes"===s.id)return i.chart.yt.St(t);if(i.id===s.id)return t;throw new Error("LC JS translatePoint3D misusage | originCoordinateSystem and targetCoordinateSystem arguments must be either Chart3D.coordsWorld or Chart3D.coordsAxis")},ft=(...t)=>{if(0===t.length)return{remove:Ct};let i=!1;const s=t.map((s=>s.onIntervalChange(((e,h,r)=>((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.vt(e,h,!1,s.getStopped(),"synchronizedAxis"))),i=!1)})(s,h,r)))));let e=!1;const h=t.map((i=>i.onStoppedStateChanged(((s,h)=>((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,h)))));return{remove:()=>{t.forEach(((t,i)=>{t.offIntervalChange(s[i]),t.offStoppedStateChanged(h[i])}))}}};class At extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,At.prototype)}}class gt extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&xt.alert(e),Object.setPrototypeOf(this,gt.prototype)}}class pt extends gt{constructor(t){super(t),Object.setPrototypeOf(this,pt.prototype)}}var mt,yt,St,vt;exports.UISpace=void 0,(mt=exports.UISpace||(exports.UISpace={}))[mt.Content=0]="Content",mt[mt.PaddedContent=1]="PaddedContent",mt[mt.PaddedBackground=2]="PaddedBackground",mt[mt.Everything=3]="Everything",exports.UIVisibilityModes=void 0,(yt=exports.UIVisibilityModes||(exports.UIVisibilityModes={}))[yt.never=0]="never",yt[yt.always=1]="always",yt[yt.whenHovered=2]="whenHovered",yt[yt.whenDragged=3]="whenDragged",yt[yt.whenNotDragged=4]="whenNotDragged",yt[yt.whenHoveredOrDragged=5]="whenHoveredOrDragged",exports.UIDraggingModes=void 0,(St=exports.UIDraggingModes||(exports.UIDraggingModes={}))[St.notDraggable=0]="notDraggable",St[St.draggable=1]="draggable",St[St.onlyHorizontal=2]="onlyHorizontal",St[St.onlyVertical=3]="onlyVertical",exports.UIDirections=void 0,(vt=exports.UIDirections||(exports.UIDirections={}))[vt.Up=0]="Up",vt[vt.Right=1]="Right",vt[vt.Down=2]="Down",vt[vt.Left=3]="Left";const xt="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},bt=(t,i)=>t.x===i.x&&t.y===i.y,Mt=t=>t!==Di&&t!==Bi&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,_t=t=>t[1],wt=t=>t.dispose(),Ct=()=>{},kt=(t,i)=>t===i,Tt=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Ft=t=>Array.prototype.concat.apply([],t),It=(t,i)=>void 0!==t?t:i,Pt=t=>t.xt(),Dt=t=>t.bt(),Bt=t=>t.Mt(),Lt=t=>t._t(),Rt=t=>t.min.x,Et=t=>t.max.x,zt=t=>t.min.y,Vt=t=>t.max.y,Ot=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},Nt=(t,i)=>t.position===i.position&&t.high===i.high&&t.low===i.low,Gt=l(0,1),Wt=l(1,0),Ut=l(0,-1),Yt=l(-1,0),Ht=l(0,0),$t=t=>{switch(t){case exports.UIDirections.Up:return Gt;case exports.UIDirections.Right:return Wt;case exports.UIDirections.Down:return Ut;case exports.UIDirections.Left:return Yt;default:return Ht}},Xt=t=>t===exports.UIDirections.Left||t===exports.UIDirections.Right,jt=t=>{t.stopPropagation(),t.preventDefault()},Zt=(t,i)=>{if(!i)return t;const s=t.length,e=new Float32Array(2*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s);e[h+0]=r,e[h+1]=s-r,h+=2}return e},Qt=(t,i)=>{if(!i){const i=t.length,s=new Float32Array(2*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,e+=2}return s}const s=t.length,e=new Float32Array(4*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,h+=4}return e},Jt=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},Kt=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},qt=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},ti=t=>{const i=Math.log(t);return t=>Math.log(t)/i},ii=ti(Math.E),si=(t,i)=>{const s=i[t];return s?s():void 0},ei=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>gs(ns(t,s))-gs(ns(i,s))))},hi=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},ri=(t,i,s)=>s<0?t:s>1?i:M(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),t.getA()+s*(i.getA()-t.getA())),ni=t=>255===t.getA()?t:t.setA(255),oi=(()=>{const t=M(0,0,0);return i=>(i=ni(i),new q({shape:exports.GradientShape.circle,extent:exports.GradientExtent.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:i},{offset:1,color:ri(i,t,.5)}]}))})(),ai=(()=>{const t=t=>{var i;if(t){if(W(t)){if(0===t.getColor().getA())return;return t.getColor()}if(tt(t)||et(t)){const s=t.getColorStops();return 3===s.length?s[1].color:null===(i=s[0])||void 0===i?void 0:i.color}$(t)}};return(i,s,e,h)=>{const r=[];if(h.fill&&r.push(h.fill),h.fill2&&r.push(h.fill2),h.stroke){const t=h.stroke.getFillStyle();t!==z&&r.push(t)}if(h.point3D){const t=h.point3D;r.push(t.getFillStyle())}let n;if(h.behavior&&!0===h.behavior.colorStep){const[i,e]=r.reduce(((i,s)=>{if(i[0]&&i[1])return i;const e=t(s);return e&&(void 0===i[0]?i[0]=e:i[1]=e),i}),[void 0,void 0]);n=i&&e?(o=i)===(a=e)||o.getR()===a.getR()&&o.getG()===a.getG()&&o.getB()===a.getB()?oi(o):(o=ni(o),a=ni(a),new st({angle:0,stops:[{offset:0,color:a},{offset:.5,color:a},{offset:.5,color:o},{offset:1,color:o}]})):s.uiButtonFillStyle}else{const i=r.reduce(((i,s)=>i||t(s)),void 0);n=i?e?new G({color:i}):oi(i):s.uiButtonFillStyle}var o,a;i.setButtonOnFillStyle(n)}})(),li=t=>{const i=t;if($(i))return{lut:i.getPalette(),lookUpProperty:i.getLookUpProperty()}},ui=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},ci=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},di=(t,i)=>"function"==typeof t?t(i):t,fi=t=>t.ctrlKey?Math.sign(t.deltaY)*Math.min(.05*Math.abs(t.deltaY),1):Math.sign(t.deltaY),Ai=(t,i)=>i(),gi=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new G({color:M(255,255,255,1)});const pi=t=>t===Li||t.min.x===Li.min.x&&t.max.x===Li.max.x&&t.min.y===Li.min.y&&t.max.y===Li.max.y,mi=t=>Array.from(new Set(t)),yi=t=>t.filter((t=>void 0!==t)),Si=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,vi=(t,i,s)=>{i.length<=0||(t.setText(s.label).setOn(i[0].getVisible()),s.style&&t.setButtonOnFillStyle(s.style),s.toggleVisibilityOnClick&&t.onSwitch(((t,s)=>i.forEach((t=>t.setVisible(s))))),t.onMouseEnter((()=>i.forEach((t=>t.setHighlight(!0))))),t.onMouseLeave((()=>i.forEach((t=>t.setHighlight(!1))))),i.forEach((i=>i.onMouseEnter((()=>t.setHighlight(!0))))),i.forEach((i=>i.onMouseLeave((()=>t.setHighlight(!1))))),i.forEach((i=>i.onTouchStart((()=>t.setHighlight(!0))))),i.forEach((i=>i.onTouchEnd((()=>t.setHighlight(!1))))))},xi=(t,i)=>{throw new Error(i)},bi=()=>{const t=Z((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||X.ease,l=(null==r?void 0:r.durationMs)||1e3;let u;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else u=t(l,a)([[s,e]],(([t])=>{h(t)})),i=u;u.onAnimationEnd((()=>{i=void 0})),n&&u.onAnimationStart(n),o&&u.onAnimationEnd(o)}},Mi=t=>{let i;return()=>i||(i=t(),i)},_i=t=>{if(t===rt)return 0;const i=t.getThickness();return i<0?1:1*i},wi=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(e.shouldCrash)throw xt.alert(h),new Error(h);xt.console.warn(h)},Ci=(t,i,s,e=0)=>{if(t<s(e)||s(i)<t)return;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e},ki=()=>{const t=new Map;return{wt:i=>(i.setMouseEnterEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Ct(i,s,e)})),i.setMouseLeaveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.kt(i,s,e)})),i.setMouseClickEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Tt(i,s,e)})),i.setMouseDoubleClickEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Ft(i,s,e)})),i.setMouseDownEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.It(i,s,e)})),i.setMouseUpEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Pt(i,s,e)})),i.setMouseMoveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Dt(i,s,e)})),i.setMouseDragEventHandler(((i,s,e,h,r,n)=>{const o=n&&t.get(n);o&&o.Bt(i,s,e,h,r,n)})),i.setMouseDragStartEventHandler(((i,s,e,h)=>{const r=h&&t.get(h);r&&r.Lt(i,s,e,h)})),i.setMouseDragStopEventHandler(((i,s,e,h,r)=>{const n=r&&t.get(r);n&&n.Rt(i,s,e,h,r)})),i.setMouseWheelEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Et(i,s,e)})),i.setTouchStartEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.zt(i,s,e)})),i.setTouchMoveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Vt(i,s,e)})),i.setTouchEndEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h.Ot(i,s,e)})),i),Nt:(i,s)=>{t.set(i,s)},Gt:()=>{t.clear()}}},Ti={left:0,right:0,top:0,bottom:0},Fi=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),Ii=(t,i,s)=>{i&&i.Wt();const e=s();return{Ut:t,Wt:()=>{e.forEach((i=>t.Yt(i)))}}},Pi={add:(t,i)=>d(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>d(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>d(t.x*i,t.y*i,t.z*i),divide:(t,i)=>d(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>Pi.divide(t,Pi.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>d(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(Pi.dot(t,i)/(Pi.length(t)*Pi.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=Pi.dot(i,t),n=Pi.cross(i,t);return Pi.addVec(Pi.multiply(t,e),Pi.addVec(Pi.multiply(i,(1-e)*r),Pi.multiply(n,h)))},lerp:(t,i,s)=>(s=Tt(s,0,1),Pi.addVec(Pi.multiply(t,1-s),Pi.multiply(i,s))),equals:(t,i)=>kt(t.x,i.x)&&kt(t.y,i.y)&&kt(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},Di=Number.MAX_SAFE_INTEGER,Bi=-Number.MAX_SAFE_INTEGER,Li=A(l(Di,Di),l(Bi,Bi)),Ri=A(d(Di,Di,Di),d(Bi,Bi,Bi)),Ei=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},zi=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),Vi=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),Oi=(t,i)=>A(l(Math.max(Math.min(t[0].x,t[2].x),Math.min(i[0].x,i[2].x)),Math.max(Math.min(t[0].y,t[2].y),Math.min(i[0].y,i[2].y))),l(Math.min(Math.max(t[0].x,t[2].x),Math.max(i[0].x,i[2].x)),Math.min(Math.max(t[0].y,t[2].y),Math.max(i[0].y,i[2].y)))),Ni=t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(zi(t[s],t[e]))return!0;return!1},Gi=(t,i)=>i+t,Wi=(t,i,s)=>{const e=ns(i,t),h=e.x*e.x+e.y*e.y;if(0===h)return t;const r=ns(s,t),n=(r.x*e.x+r.y*e.y)/h;return n<=0?t:n>=1?i:l(t.x+n*e.x,t.y+n*e.y)},Ui=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,Yi=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},Hi=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},$i=(t,i,s)=>rs(t,hs(ns(i,t),s)),Xi=(t,i,s)=>Pi.addVec(t,Pi.multiply(Pi.subtractVec(i,t),s));function ji(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y;for(let n=0;n<i;n+=1){const i=t[n];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y)}return A(l(e,r),l(s,h))}return Li}function Zi(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,n=t[0].z,o=t[0].z;for(let a=0;a<i;a+=1){const i=t[a];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>n&&(n=i.z),i.z<o&&(o=i.z)}return A(d(e,r,o),d(s,h,n))}return Ri}const Qi=(...t)=>{const i={min:{x:Di,y:Di},max:{x:Bi,y:Bi}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},Ji=(t,i)=>A(d(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),d(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function Ki(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,l=(e.y-i.y)*h+(i.x-e.x)*r,u=o*(i.x-e.x)+n*(i.y-e.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}function qi(t,i,s){return l(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function ts(t,i){return l(t.x-i.x,t.y-i.y)}function is(t){const i=es(t);return 0===i?l(0,0):l(t.x/i,t.y/i)}function ss(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=is(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function es(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function hs(t,i){return l(t.x*i,t.y*i)}function rs(t,i){return l(t.x+i.x,t.y+i.y)}function ns(t,i){return l(t.x-i.x,t.y-i.y)}function os(t,i){return l(t.x*i.x,t.y*i.y)}function as(t,i){return l(t.x/i.x,t.y/i.y)}function ls(t){return hs(t,-1)}function us(t,i){return t.x*i.x+t.y*i.y}const cs=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.y+(t-i.x)*e;return l(t,h)},ds=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.x+(t-i.y)/e;return l(h,t)};function fs(t){return t*Math.PI/180}function As(t){return 180*t/Math.PI}function gs(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function ps(t){return l(Math.cos(t),Math.sin(t))}function ms(t){let i=-1;const s=Math.cos(t),e=Math.sin(t);return s>0&&s<1&&e>0&&e<1?i=1:s<0&&s>-1&&e>0&&e<1?i=2:s<0&&s>-1&&e<0&&e>-1?i=3:s>0&&s<1&&e<0&&e>-1&&(i=4),i}const ys=(t,i,s,e)=>{let h,r,n,o;if(i.x-t.x!=0||e.x-s.x!=0)return i.x-t.x==0?(n=i.x,r=(e.y-s.y)/(e.x-s.x),o=r*(n-s.x)+s.y):e.x-s.x==0?(n=e.x,h=(i.y-t.y)/(i.x-t.x),o=h*(n-t.x)+t.y):(h=(i.y-t.y)/(i.x-t.x),r=(e.y-s.y)/(e.x-s.x),n=(s.y-r*s.x+h*t.x-t.y)/(h-r),o=h*(n-t.x)+t.y),l(n,o)},Ss=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class vs{constructor(){this.Ht=!0}getInnerStart(){return this.$}getInnerEnd(){return this.X}getInnerInterval(){return Math.abs(this.X-this.$)}K(t,i){return this.Ht=t!==this.$||i!==this.X,this.$=t,this.X=i,this}Z(){return this.Ht=!1,this}J(){return this.Ht=!0,this}}class xs extends vs{constructor(t,i,s,e){if(super(),this.$t=!0,this.Xt=!0,this.jt=[0,0],this.Zt=!0,this.Qt=t,this.Jt=i,this.Kt=s,this.qt=t,this.ti=i,e){const t=e.N(this.ii.bind(this));this.ii(e._()),this.si=()=>e.W(t)}}tt(t){return this.j=t,this.Xt=!0,this}ei(t){return this.jt=t.map(Math.abs),this.Zt=!0,this}hi(){return this.Qt/this.Kt*this.j+this.jt[0]}ri(){return(this.Qt+this.Jt)/this.Kt*this.j-this.jt[1]}ni(){return this.getCellSize()-this.oi()}ai(){return this.j}getCellSize(){return this.li(this.j)}oi(){return this.jt[0]+this.jt[1]}ui(){return this.jt}ii(t){this.Kt=t.reduce(Gi,0),this.Qt=t.reduce(((t,i,s)=>s>=this.qt?t:t+i),0),this.Jt=t.reduce(((t,i,s)=>s>=this.qt&&s<this.qt+this.ti?t+i:t),0),this.$t=!0,this.ci()}li(t){return t*this.Jt/this.Kt}Z(){return super.Z(),this.Xt=!1,this.Zt=!1,this.$t=!1,this}J(){return super.J(),this.Xt=!0,this.Zt=!0,this.$t=!0,this}}class bs extends xs{constructor(t,i,s,e){super(t,i,s,e),this.di={internal:10,function:Ms(10),number:10},this.j=1e3,this.K(1,1e3),this.fi=this.Ai()}ot(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<ws,n=Math.max(t,i)>Cs;return!r&&!n||!!h&&(i>t?{start:r?ws:t,end:n?Cs:i}:{start:n?Cs:t,end:r?ws:i})}dt(t){const i=this.hi(),s=this.ri(),e=Math.max(t,ws);return i+(this.di.function(e)-this.fi.scaleStartLog)/this.fi.scaleIntervalLog*(s-i)}ct(t){const i=this.hi(),s=(t-i)/(this.ri()-i),e=this.fi.scaleStartLog+s*this.fi.scaleIntervalLog;return this.di.number**e}ci(){this.di&&this.Ai()}K(t,i){return super.K(t,i),this.di&&this.Ai(),this}ei(t){return super.ei(t),this.di&&this.Ai(),this}tt(t){return super.tt(t),this.di&&this.Ai(),this}gi(t){return this.di={internal:t,function:Ms(t),number:_s(t)},this}pi(){return this.di.internal}mi(t,i){const s=this.dt(t)+i;return this.ct(s)}yi(){return this.Xt||this.Ht||this.Zt||this.$t}Ai(){const t=this.di.function(this.$),i=this.di.function(this.X)-t,s=2*this.hi()/this.j-1,e=2*this.ri()/this.j-1-s;return this.fi={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.fi}Si(){return this.fi}}const Ms=t=>"e"===t?ii:ti(t),_s=t=>"e"===t?Math.E:t,ws=.9*10**-4,Cs=1.1*10**25,ks=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],Ts=(t,i,s)=>{const e=Math.abs(s-i),h=Math.max(2-Ei(e,10),0);return t.toFixed(h)},Fs={Numeric:(t,i)=>Ts(t,i.getInnerStart(),i.getInnerEnd()),NumericUnits:(t,i)=>{const s=Math.abs(i.getInnerEnd()-i.getInnerStart()),e=t<0;t=Math.abs(t);let h="",r="";if(s>=1e3&&t>1e3){let i="";for(const s of ks){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),r=s.prefix;break}}h=(e?"-":"")+i}else{let i=String(Math.floor(t));const r=Ei(t,1e3);for(let t=1;t<=r;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}h=(e?"-":"")+i+(s<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-Ei(s,10)):"")}return h+=r,h},LogarithmicExponentsRounded:(t,i,s,e=10)=>{const h=Ms(e)(t);return`${e}${Is(h)}`},LogarithmicExponents:(t,i,s,e=10)=>{const h=Ms(e),r=Math.floor(h(t)),n=t/_s(e)**r;return`${Math.round(n)}×${e}${Is(r)}`},LogarithmicExtreme:(t,i,s,e=10)=>{const h=Ms(e),r=Math.floor(h(t));return`${(t/_s(e)**r).toFixed(2)}×${e}${Is(r)}`},LogarithmicNoExponents:(t,i,s,e=10)=>{const h=Ms(e);if("e"===e)return`${Math.floor(h(t))}e`;const r=t.toString();if(t>1)return r;const n=Math.floor(h(t));return t.toFixed(Math.abs(n))}},Is=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}})).join("");class Ps extends xs{constructor(t,i,s,e){super(t,i,s,e),this.vi=!1,this.xi=!1,this.bi=0,this.j=1e3,this.K(0,10),this.q()}yi(){return this.xi}ot(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.vi){const s=((t,i,s)=>{const e=((t,i)=>{if(i<Di&&i>Bi&&t<Di&&t>Bi){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s})(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(h?o/2:r/2)*(t>i?-1:1);return{start:a-l,end:a+l}}ci(){this.q()}dt(t){return this.hi()+(t-this.$)/(this.X-this.$)*(this.ri()-this.hi())}ct(t){return this.$+(t-this.hi())/(this.ri()-this.hi())*(this.X-this.$)}K(t,i){return super.K(t,i),this.q(),this}ei(t){return super.ei(t),this.q(),this}tt(t){return super.tt(t),this.Mi=Ds(this.X-this.$,this.jt,this.j,this.Jt,this.Kt),this.q(),this}_i(){return this.vi=!0,this}wi(){return this.vi}Ci(){return Math.abs(this.ki)}Ti(){return this.Ci()/this.Mi}Fi(){return this.Ii}Pi(){return this.Di}getPixelSize(){return this.Mi}Si(){return this.fi}J(){return super.J(),this.xi=!0,this}Z(){return super.Z(),this.xi=!1,this}Bi(t,i=Fs.Numeric){return i(t,this)}Li(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Ri(t){return Ds(t,this.jt,this.j,this.Jt,this.Kt)}q(){let t=this.$,i=this.X,s=0;this.vi&&(t=0,i=this.X-this.$,s=this.$);const e=i-t,h=Ds(e,this.jt,this.j,this.Jt,this.Kt);this.Di=t-this.jt[0]*h,this.Ii=i+this.jt[1]*h;const r=this.Ii-this.Di,n=r-this.ki,o=Math.abs(n/h),a=e-this.bi,l=Math.abs(a/h);(!this.fi||o>=.4||l>=.4)&&(this.bi=e,this.ki=r,this.Mi=h,this.xi=!0);const u=this.ki*this.Kt/(2*this.Jt),c=-(this.Di-this.ki*this.Qt/this.Jt)-u,d=2*this.hi()/this.j-1,f=2*this.ri()/this.j-1-d;this.fi={displacement:c,scaling:u,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}mi(t,i){return t+this.Mi*i}}const Ds=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class Bs{Ei(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}Z(){return this.x.Z(),this.y.Z(),this}J(){return this.x.J(),this.y.J(),this}tt(t,i){return"object"==typeof t?(this.x.tt(t.x),this.y.tt(t.y)):(this.x.tt(t),this.y.tt(i)),this}ai(){return l(this.x.ai(),this.y.ai())}zi(t){return this.x.ei(t),this}Vi(t){return this.y.ei(t),this}oi(){return l(this.x.oi(),this.y.oi())}Oi(t,i){return this.x.K(t,i),this}Ni(t,i){return this.y.K(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.oi(),y:i-this.y.oi()}}Gi(){return this.x.yi()||this.y.yi()}}class Ls extends Bs{constructor(){super(...arguments),this.Wi="LinearScaleXY"}ut(t,i,s,e){return this.x=new Ps(t.x,i.x,s.x,e?e.x:void 0),this.y=new Ps(t.y,i.y,s.y,e?e.y:void 0),this}wi(){return this.x.wi()||this.y.wi()}Ui(){return l(this.x.getPixelSize(),this.y.getPixelSize())}Si(){return{x:this.x.Si(),y:this.y.Si()}}mi(t,i){const s=this.Ui();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Yi(t,i,s,e){const h=this.Ui(),r=ss(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class Rs extends Bs{constructor(){super(...arguments),this.Wi="MixedScaleXY"}wi(){return!1}mi(t,i){const s=this.x.dt(t.x),e=this.y.dt(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.ct(h.x),y:this.y.ct(h.y)}}Yi(t,i,s,e){const h={x:this.x.dt(t.x),y:this.y.dt(t.y)},r={x:this.x.dt(i.x),y:this.y.dt(i.y)},n=is(ns(r,h)),o=ss(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.ct(a.x),y:this.y.ct(a.y)}}Si(){const t=this.x.Si(),i=this.y.Si();return{uScaleStart:[this.x.$,this.y.$],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const Es=(t,i)=>t instanceof bs||i instanceof bs?(new Rs).Ei(t,i):(new Ls).Ei(t,i),zs=t=>"client"===t,Vs=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),Os=t=>"relative"===t,Ns=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y);var Gs;exports.HighlightModes=void 0,(Gs=exports.HighlightModes||(exports.HighlightModes={}))[Gs.noHighlighting=0]="noHighlighting",Gs[Gs.onHover=1]="onHover";class Ws{constructor(t,s,e,h){this.Hi=!0,this.$i=exports.HighlightModes.onHover,this.Xi=!1,this.ji=!0,this.Zi=!1,this.L=new i.Eventer,this.Qi=[],this.Ji=[],this.onMouseEnter=t=>this.L.on("mouseEnter",t),this.onMouseLeave=t=>this.L.on("mouseLeave",t),this.onMouseClick=t=>this.L.on("mouseClick",t),this.onMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onMouseDown=t=>this.L.on("mouseDown",t),this.onMouseUp=t=>this.L.on("mouseUp",t),this.onMouseMove=t=>this.L.on("mouseMove",t),this.offMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offMouseClick=t=>this.L.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.L.off(t,"mouseDown"),this.offMouseUp=t=>this.L.off(t,"mouseUp"),this.offMouseMove=t=>this.L.off(t,"mouseMove"),this.offMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.L.off(t,"mouseWheel"),this.Ct=(t,i,s)=>{this.L.emit("mouseEnter",this,i),this.Zi=!0,this.$i===exports.HighlightModes.onHover&&this.setHighlight(!0)},this.kt=(t,i,s)=>{this.L.emit("mouseLeave",this,i),this.Zi=!1,this.$i===exports.HighlightModes.onHover&&this.setHighlight(!1)},this.Dt=(t,i,s)=>{this.L.emit("mouseMove",this,i)},this.Tt=(t,i,s)=>this.L.emit("mouseClick",this,i),this.Ft=(t,i,s)=>this.L.emit("mouseDoubleClick",this,i),this.It=(t,i,s)=>this.L.emit("mouseDown",this,i),this.Pt=(t,i,s)=>this.L.emit("mouseUp",this,i),this.Lt=(t,i,s,e)=>{this.L.emit("mouseDragStart",this,i,s)},this.Bt=(t,i,s,e,h,r)=>{this.L.emit("mouseDrag",this,i,s,e,h)},this.Rt=(t,i,s,e,h)=>{this.L.emit("mouseDragStop",this,i,s,e)},this.Et=(t,i,s)=>{this.L.emit("mouseWheel",this,i)},this.zt=(t,i,s)=>{this.L.emit("touchStart",this,i),this.Zi=!0,this.$i===exports.HighlightModes.onHover&&this.setHighlight(!0)},this.Vt=(t,i,s)=>{this.L.emit("touchMove",this,i)},this.Ot=(t,i,s)=>{this.L.emit("touchEnd",this,i),this.Zi=!1,this.$i===exports.HighlightModes.onHover&&this.setHighlight(!1)},this.Ki=t,this.qi=s,this.ts=e,this.ss=new Map,this.es=h,this.hs=this.es.rs(this,{ns:{themeEffectEnabled:this.ts.effectsText},os:{}}),this.Ki.cs.us.ls(this,(t=>{this.ss.forEach(((i,s)=>s.ds(t))),this.Ji.forEach((i=>i.setHighlight(t))),this.Qi.forEach((i=>i.ds(t)))}),{animationEnabled:this.Ki.getAnimationsEnabled()})}fs(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.isText)&&i.isText;this.ss.set(t,{isText:e});const h=Array.from(this.ss);this.hs.ns.As(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.hs.os.As(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setMouseInteractions(this.Hi).setVisible(this.ji).ds(this.Ki.cs.us.gs(this,!0)),s&&t.setMouseEnterEventHandler(this.Ct).setMouseLeaveEventHandler(this.kt).setMouseClickEventHandler(this.Tt).setMouseDoubleClickEventHandler(this.Ft).setMouseDownEventHandler(this.It).setMouseUpEventHandler(this.Pt).setMouseMoveEventHandler(this.Dt).setMouseDragStartEventHandler(this.Lt).setMouseDragEventHandler(this.Bt).setMouseDragStopEventHandler(this.Rt).setMouseWheelEventHandler(this.Et).setTouchStartEventHandler(this.zt).setTouchMoveEventHandler(this.Vt).setTouchEndEventHandler(this.Ot);const r=t.onDispose((()=>{t.offDispose(r),this.ss.delete(t)}))}ps(t){this.Qi=t;const i=this.Ki.cs.us.gs(this,!0);t.forEach((t=>{t.ds(i).ys(this.ji)}))}setEffect(t){return this.hs.ns.Ss(t&&this.ts.effectsText),this.hs.os.Ss(t),this.Ki.cs.vs(),this}getEffect(){return this.hs.ns.xs()||this.hs.os.xs()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setIcon(t){return this.bs=t,this.Ki.cs.vs(),this}getIcon(){return this.bs}setName(t){return this.Ms=t,this.Ji.forEach((t=>t.setText(this.Ms))),this}getName(){return this.Ms}dispose(){return this.Xi||(this.Xi=!0,this.ss.forEach(((t,i)=>i.dispose())),this.qi(this),this.Ji.forEach((t=>{t.dispose()})),this.Ji.length=0,this.L.emit("dispose",this),this.Ki.cs.vs()),this}setVisible(t){return t===this.ji||(this.ji=t,this.ss.forEach(((i,s)=>s.setVisible(t))),this.Qi.forEach((i=>i.ys(t))),this.Ji.forEach((i=>i.setOn(t))),this.L.emit("visibleStateChanged",this,this.ji),this.Ki.cs.vs()),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}setHighlight(t){return this.Ki.cs.us._s(this,t),this.L.emit("highlight",this,t),this}getHighlight(){return this.Ki.cs.us.gs(this)}setAnimationHighlight(t){return this.Ki.cs.us.ws(this,t),this}getAnimationHighlight(){return this.Ki.cs.us.Cs(this)}setMouseInteractions(t){return this.Hi=t,this.ss.forEach(((i,s)=>s.setMouseInteractions(t))),this.Ki.cs.vs(),this}getMouseInteractions(){return this.Hi}getIsUnderMouse(){return this.Zi}setHighlightOnHover(t){return this.$i=t?exports.HighlightModes.onHover:exports.HighlightModes.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.$i!==exports.HighlightModes.noHighlighting}attach(t,i=!0,s=!1){return vi(t,[this],{toggleVisibilityOnClick:i,label:this.Ms,style:void 0}),this.Ji.push(t),t.onDispose((()=>{const i=this.Ji.indexOf(t);i>=0&&this.Ji.splice(i,1)})),this}ks(){return this.bs}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}offDispose(t){return this.L.off(t,"dispose")}}class Us extends Ws{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.Ts=t,this.axis=e,this.ft=h,this.Fs=r,this.Is()}}const Ys=t=>{const i=t.length;if(i>0){let s=0,e=0;for(let h=0;h<i;h+=1)s+=t[h].x,e+=t[h].y;return l(s/i,e/i)}return l(0,0)},Hs=(...t)=>{const i=t.length,s=new Array(i).fill(!1),e=(e,h)=>{for(let r=0;r<i;r+=1){const i=t[r],n=i.Ps(e,h);n?i.Ds(e,h,!0):s[r]&&s[r]&&i.Ds(e,h,!1),s[r]=n}return!1};return{onTouchStart:e,onTouchMove:e,onTouchEnd:e}},$s=class{constructor(t,i=300){this.Bs=!1,this.Ls=[],this.Rs=300,this.Es=t,this.Rs=i}Ps(t,i){const s=xt.performance.now();let e=!1;for(let t=0;t<this.Ls.length;t+=1)s-this.Ls[t].time>=this.Rs?(this.Ls.splice(t,1),t-=1):this.Ls[t].state&&(e=!0);return this.Bs?0===i.interactions.length&&(this.Ls.push({state:!1,time:s}),this.Bs=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Ls.push({state:!0,time:s}),e=!0,this.Bs=!0),e}Ds(t,i,s){if(s){const s=this.Ls.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=2&&s.off>=1&&(this.Es(t,i),this.Ls.length=0)}}},Xs=class{constructor(t,i,s,e=1,h=100){this.zs=t,this.Vs=i,this.Os=s,this.Ns=e,this.Gs=h}Ps(t,i){const s=i.interactions.length;if(s===this.Ns){if(void 0!==this.Ws)return!0;if("pointerdown"===i.type&&(1===s||(t=>{const i=t.length;if(i>0){const s=Ys(t);let e=0;for(let h=0;h<i;h+=1)e=Math.max(e,Yi(s,l(t[h].x,t[h].y)));return e}return Di})(i.interactions)<=this.Gs))return this.Ws=Ys(i.interactions),!0}return!1}Ds(t,i,s){const e=this.Us;if(!s||i.forceTouchEnd||"pointerup"===i.type)this.Os&&this.Os(t,this.Ws,e,i),this.Ws=void 0,this.Us=void 0;else{const s=Ys(i.interactions);"pointerdown"===i.type?this.zs&&this.zs(t,this.Ws,i):"pointermove"===i.type&&this.Vs&&this.Vs(t,this.Ws,s,l(s.x-e.x,e.y-s.y),i),this.Us=s}}},js=class{constructor(t,i,s){this.Ys=!1,this.zs=t,this.Vs=i,this.Os=s}Ps(t,i){return this.Ys?2!==i.interactions.length&&(this.Ys=!1):2===i.interactions.length&&"pointerdown"===i.type&&(this.Ys=!0),this.Ys}Ds(t,i,s){let e,h;if(s&&"pointerup"!==i.type){if("pointerdown"===i.type){const s=i.interactions;e=s[0],h=s[1],this.zs(t,e,h,i)}else if("pointermove"===i.type){e=i.interactions[0],h=i.interactions[1];const s=this.Hs,r=this.$s,n=l(e.x-s.x,s.y-e.y),o=l(h.x-r.x,r.y-h.y);this.Vs(t,e,h,n,o,i)}}else{const s=i.interactions;this.Os(t,s[0],s[1],i)}this.Hs=e,this.$s=h}},Zs=t.Record({type:"linestyle",lineType:"solid",fillStyle:new G({color:M(255,255,255)}),thickness:1});class Qs extends Zs{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}O(){const t=this.getThickness();return t<0?1:t}}const Js=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType);class Ks{constructor(t,i){this.Xs=t,this.js=i,this.Zs=i.rows*Te,this.Qs=i.columns*Fe}}var qs,te;exports.OnScreenMenuButtonType=void 0,(qs=exports.OnScreenMenuButtonType||(exports.OnScreenMenuButtonType={}))[qs.ZoomIn=0]="ZoomIn",qs[qs.ZoomInX=1]="ZoomInX",qs[qs.ZoomInY=2]="ZoomInY",qs[qs.ZoomOut=3]="ZoomOut",qs[qs.ZoomOutX=4]="ZoomOutX",qs[qs.ZoomOutY=5]="ZoomOutY",qs[qs.ZoomToFit=6]="ZoomToFit",qs[qs.ToggleAnimations=7]="ToggleAnimations",exports.OnScreenMenuButtonShape=void 0,(te=exports.OnScreenMenuButtonShape||(exports.OnScreenMenuButtonShape={}))[te.Circle=0]="Circle",te[te.Rectangle=1]="Rectangle",te[te.RoundedRectangle=2]="RoundedRectangle";const ie={x:-43,y:0},se={x:-65,y:0},ee={x:-86,y:0},he={x:-107,y:-1},re={x:-128,y:-3},ne={x:-150,y:0},oe={x:-171,y:0},ae={x:-276,y:0},le={x:-298,y:0},ue={x:0,y:0},ce={x:-21,y:0};class de extends Ks{constructor(t,i,s,e){super(t,s),this.Js=xt.document.createElement("button"),this.Ks=xt.document.createElement("div"),this.qs=xt.document.createElement("label"),this.js=s,this.te=i,this.Ki=e}ie(t,i,s,e){this.se(t,e),this.ee(),this.he(i),this.re(),this.qs.textContent=s||"";const h=xt.document.createElement("div");this.ne(h),this.Js.onclick=this.onClick.bind(this),h.appendChild(this.Ks),h.appendChild(this.qs),this.Js.appendChild(h)}re(){this.Js.style.cursor="pointer"}ne(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}he(t){"string"==typeof t?(this.Ks.style.backgroundImage=`url(${t})`,this.Ks.style.backgroundSize="100%",this.Ks.style.backgroundRepeat="no-repeat",this.Ks.style.backgroundPosition="center",this.Ks.style.width="20px",this.Ks.style.height="20px"):this.applyStyleForSprite(t),this.Ks.style.margin="auto"}ee(){switch(this.te){case exports.OnScreenMenuButtonShape.RoundedRectangle:this.Js.style.borderRadius="10px";break;case exports.OnScreenMenuButtonShape.Rectangle:this.Js.style.borderRadius="0px";break;case exports.OnScreenMenuButtonShape.Circle:default:this.Js.style.borderRadius="31px"}}se(t,i){this.Js.style.width=`${this.Qs.toString()}px`,this.Js.style.height=`${this.Zs.toString()}px`,this.Js.style.backgroundColor=t,this.Js.style.opacity=i||Ie,this.Js.style.alignItems="center",this.Js.style.border="2px solid #707070",this.Js.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.Ks.style.backgroundImage=`url(${this.Xs}/${Pe})`,this.Ks.style.backgroundPositionX=`${t.x}px`,this.Ks.style.backgroundPositionY=`${t.y}px`,this.Ks.style.backgroundSize="1600%",this.Ks.style.backgroundRepeat="no-repeat",this.Ks.style.width="20px",this.Ks.style.height="20px"}oe(t){return t.appendChild(this.Js),t}ae(){return this.Js}}class fe extends de{constructor(t,i,s,e){super(t,i,s,e),this.le="",this.ue="",this.ce=!1,this.Ki=e}de(){this.fe(),this.onToggledStateAction()}Ae(){this.ge(),this.onInitialStateAction()}ge(){this.pe(this.le)}fe(){this.pe(this.ue)}pe(t){"string"==typeof t?this.Ks.style.background=t:(this.Ks.style.backgroundImage=`url(${this.Xs}/${Pe})`,this.Ks.style.backgroundPositionX=`${t.x}px`,this.Ks.style.backgroundPositionY=`${t.y}px`)}onClick(){this.ce?this.Ae():this.de(),this.ce=!this.ce}}class Ae extends de{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ki=i;const e=this.Ki.getTheme();this.ie(e.onScreenMenuBackgroundColor.toRGBAString(),ie)}onClick(){const t=this.Ki.me();t&&this.Ki.zoom(t,{x:-1,y:-1})}}class ge extends de{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ki=i;const e=this.Ki.getTheme();this.ie(e.onScreenMenuBackgroundColor.toRGBAString(),he)}onClick(){const t=this.Ki.me();t&&this.Ki.zoom(t,{x:-1,y:0})}}class pe extends de{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ki=i;const e=this.Ki.getTheme();this.ie(e.onScreenMenuBackgroundColor.toRGBAString(),ne)}onClick(){const t=this.Ki.me();t&&this.Ki.zoom(t,{x:0,y:-1})}}class me extends de{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ki=i;const e=this.Ki.getTheme();this.ie(e.onScreenMenuBackgroundColor.toRGBAString(),se)}onClick(){const t=this.Ki.me();t&&this.Ki.zoom(t,{x:1,y:1})}}class ye extends de{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ki=i;const e=this.Ki.getTheme();this.ie(e.onScreenMenuBackgroundColor.toRGBAString(),re)}onClick(){const t=this.Ki.me();t&&this.Ki.zoom(t,{x:1,y:0})}}class Se extends de{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ki=i;const e=this.Ki.getTheme();this.ie(e.onScreenMenuBackgroundColor.toRGBAString(),oe)}onClick(){const t=this.Ki.me();t&&this.Ki.zoom(t,{x:0,y:1})}}class ve extends fe{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ki=i;const e=this.Ki.getTheme();this.le=ae,this.ue=le,this.ie(e.onScreenMenuBackgroundColor.toRGBAString(),this.le)}onToggledStateAction(){this.Ki.setAnimationsEnabled(!1)}onInitialStateAction(){this.Ki.setAnimationsEnabled(!0)}}class xe extends de{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ki=i;const e=this.Ki.getTheme();this.ie(e.onScreenMenuBackgroundColor.toRGBAString(),ee)}onClick(){this.Ki.forEachAxis((t=>{t.fit(!0)}))}}class be extends de{constructor(t,i,s){super(t,i.shape||De,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.ie(h,r,n,o),this.ye=i.action}onClick(){this.ye(this.Ki)}}class Me extends fe{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.Ki=s,this.Se=e,this.le=ce,this.ue=ue,this.ie(Be,this.le)}ge(){this.pe(this.le),this.Js.style.backgroundColor=Be,this.Js.style.border="2px solid #707070",this.Js.style.margin="0px"}fe(){this.pe(this.ue),this.Js.style.background="#FECC00 0% 0% no-repeat padding-box",this.Js.style.border="10px solid #BCBCBC12",this.Js.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.Se)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.Se)||void 0===t||t.style.setProperty("display","none")}}var _e;exports.MouseStyles=void 0,(_e=exports.MouseStyles||(exports.MouseStyles={})).Move="move",_e.ResizeColumn="col-resize",_e.ResizeRow="row-resize",_e.Horizontal="ew-resize",_e.Vertical="ns-resize",_e.NorthWest="nw-resize",_e.NorthEast="ne-resize",_e.Copy="copy",_e.CrossHair="crosshair",_e.Default="default",_e.Help="help",_e.Restricted="not-allowed",_e.None="none",_e.Point="pointer",_e.Text="text",_e.Wait="wait",_e.ZoomIn="zoom-in",_e.ZoomOut="zoom-out";const we={LeftBottom:l(-1,-1),CenterBottom:l(0,-1),RightBottom:l(1,-1),LeftCenter:l(-1,0),Center:l(0,0),RightCenter:l(1,0),LeftTop:l(-1,1),CenterTop:l(0,1),RightTop:l(1,1)},Ce=new G({color:M(255,255,255,0)}),ke=new Qs({thickness:1,fillStyle:Ce}),Te=60,Fe=60,Ie="1.0",Pe="osm/osm-sprite-transparent.png",De=exports.OnScreenMenuButtonShape.Circle,Be="#363636";var Le;exports.OSMPosition=void 0,(Le=exports.OSMPosition||(exports.OSMPosition={}))[Le.TopRight=0]="TopRight",Le[Le.TopLeft=1]="TopLeft",Le[Le.BottomLeft=2]="BottomLeft",Le[Le.BottomRight=3]="BottomRight";class Re extends Us{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.Ms="Band",this.ve=0,this.xe=0,this.be=this.ts.bandFillStyle,this.Me=this.ts.bandStrokeStyle,this._e=!0,this.we=this.Ts.Te(this.ft).ke(this.be).Ce(this.Me).ds(this.getHighlight()),this.fs(this.we)}setValueStart(t){return this.ve=t,this.L.emit("valueChange",this,this.ve,this.xe),this.Ts.vs(),this}getValueStart(){return this.ve}setValueEnd(t){return this.xe=t,this.L.emit("valueChange",this,this.ve,this.xe),this.Ts.vs(),this}getValueEnd(){return this.xe}setFillStyle(t){this.be="function"==typeof t?t(this.be):t;const i=this.be;return this.we.ke(i),this.Ts.vs(),this}getFillStyle(){return this.be}setStrokeStyle(t){this.Me="function"==typeof t?t(this.Me):t;const i=this.Me;return this.we.Ce(i),this.Ts.vs(),this}getStrokeStyle(){return this.Me}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}Fe(){return this.we.Ie(this.Fs.toVec2(this.ve,this.Fs.getHeight(this.ft).getInnerStart())).tt(this.Fs.toVec2(this.xe-this.ve,this.Fs.getHeight(this.ft).getInnerInterval())),this}attach(t,i=!0,s=!1){return super.attach(t,i),ai(t,this.ts,s,{fill:this.be,stroke:this.Me}),this}Pe(t,i){t.ds(i),this.Ts.vs()}setDefaultMouseInteractions(t){return this._e=t,this}Is(){let t,i;const s=(s,e)=>{if(!this._e)return;const h=ct(this.Ts.cs.De(e.x,e.y),this.Ts.cs.ft,this.ft),r=this.Fs.getWidth(h),n=this.axis.ft.dt(this.ve),o=this.axis.ft.dt(this.xe),a=(this.axis.ft.dt(r)-n)/(o-n);t=!(a<.1||a>.9),!1===t&&(i=a<.5)},e=(s,e,h,r,n)=>{if(!this._e)return;const o=this.Fs.getWidth(r);t?(this.ve=this.axis.ft.mi(this.ve,o),this.xe=this.axis.ft.mi(this.xe,o)):i?this.ve=this.axis.ft.mi(this.ve,o):this.xe=this.axis.ft.mi(this.xe,o),jt(n),this.L.emit("valueChange",this,this.ve,this.xe),this.Ts.vs()};this.onMouseMove(((i,e)=>{if(!this._e)return;s(0,l(e.clientX,e.clientY));const h=t?exports.MouseStyles.Point:this.Fs.getWidth({x:exports.MouseStyles.Horizontal,y:exports.MouseStyles.Vertical});this.Be=this.Ki.engine.setMouseStyle(h,this.Be)})),this.onMouseLeave((()=>{this._e&&(this.Ki.engine.restoreMouseStyle(this.Be),this.Be=void 0)})),this.onMouseDrag(((t,i,s,h,r)=>{this._e&&0===s&&e(0,0,0,r,i)}));const h=Hs(new Xs(s,e));this.onTouchStart(h.onTouchStart),this.onTouchMove(h.onTouchMove),this.onTouchEnd(h.onTouchEnd)}}class Ee extends Us{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.Ms="Constant Line",this.S=0,this.Me=this.ts.constantLineStrokeStyle,this.Le=!0,this._e=!0,this.Re=this.Ts.ze(this.ft).Ee(this.Me).ds(this.getHighlight()),this.fs(this.Re)}setValue(t){return this.S=t,this.L.emit("valueChange",this,this.S),this.Ts.vs(),this}getValue(){return this.S}setStrokeStyle(t){this.Me="function"==typeof t?t(this.Me):t;const i=this.Me;return this.Re.Ee(i),this.Ts.vs(),this}getStrokeStyle(){return this.Me}setInteractionMoveByDragging(t){return this.Le=t,this}getInteractionMoveByDragging(){return this.Le}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}Fe(){return this.Re.Oe(this.Fs.toVec2(this.S,this.Fs.getHeight(this.ft).getInnerStart())).Ve(this.Fs.toVec2(this.S,this.Fs.getHeight(this.ft).getInnerEnd())),this}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{stroke:this.Me}),this}Pe(t,i){t.ds(i),this.Ts.vs()}setDefaultMouseInteractions(t){return this._e=t,this}Is(){const t=(t,i)=>{this._e&&this.Le&&(this.S=this.axis.ft.mi(this.S,this.Fs.getWidth(i)),this.L.emit("valueChange",this,this.S),this.Ts.vs(),jt(t))};this.onMouseMove((()=>{if(this._e&&this.Le){const t=this.Fs.getWidth({x:exports.MouseStyles.Horizontal,y:exports.MouseStyles.Vertical});this.Be=this.Ki.engine.setMouseStyle(t,this.Be)}})),this.onMouseLeave((()=>{this._e&&this.Le&&(this.Ki.engine.restoreMouseStyle(this.Be),this.Be=void 0)})),this.onMouseDrag(((i,s,e,h,r)=>{this._e&&this.Le&&0===e&&t(s,r)}));const i=Hs(new Xs(void 0,((i,s,e,h,r)=>t(r,h))));this.onTouchStart(i.onTouchStart),this.onTouchMove(i.onTouchMove),this.onTouchEnd(i.onTouchEnd)}}const ze={fitting:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?e:s,allowIntervalLengthChange:!0},expansion:{start:(t,i,s,e)=>i>=t?s<t?s:t:e>t?e:t,end:(t,i,s,e)=>i>=t?e>i?e:i:s<i?s:i,allowIntervalLengthChange:!0},progressive:{start:(t,i,s,e)=>i>t?ze.progressive.end(t,i,s,e)+(t-i):e>t?e:t,end:(t,i,s,e)=>i>t?e>i?e:i:ze.progressive.start(t,i,s,e)+(i-t),allowIntervalLengthChange:!1},regressive:{start:(t,i,s,e)=>i>t?s<t?s:t:ze.regressive.end(t,i,s,e)+(t-i),end:(t,i,s,e)=>i>t?ze.regressive.start(t,i,s,e)+(i-t):s<i?s:i,allowIntervalLengthChange:!1}},Ve={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},Oe=t=>void 0!==t.Ne,Ne=t=>void 0!==t.Ge,Ge={We:Fs.Numeric},We=(t,i)=>[t,i],Ue=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){const r=Math.round((t+s*n)*e)/e;r<i&&h.push(r)}return h},Ye=(t,i,s,e,h)=>{kt(t,0)&&(t=0),kt(i,0)&&(i=0);const r=[];let n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);for(;n<i&&!1===kt(n,i);)r.push(n),n+=s,n=Math.round(n*h)/h;return r.push(n),r},He=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===kt(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},$e=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const l=i[h]||1;let u=!1,c=!1,d=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,l,u,c,d)}},Xe=(...t)=>{const i=t.length>0?t.length:0;return(s,e,h,r,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},je=(t,i)=>{if(i.has(t))return i.get(t);const s=ji(t.Ye.Ue());if(pi(s))return s;const e=t.He.mi(s.min,{x:-5,y:-5}),h=t.He.mi(s.min,{x:5,y:5}),r=t.He.mi(s.max,{x:-5,y:-5}),n=t.He.mi(s.max,{x:5,y:5}),o={min:{x:Math.min(e.x,h.x,r.x,n.x),y:Math.min(e.y,h.y,r.y,n.y)},max:{x:Math.max(e.x,h.x,r.x,n.x),y:Math.max(e.y,h.y,r.y,n.y)}};return i.set(t,o),o},Ze=t=>{const i=new Map;if(t!==Ge){for(const s of t.$e)i.set(s,new Map);for(const s of t.Xe)i.set(s,new Map)}return i};class Qe{constructor(t,s,e,h,r,n,o){this.L=new i.Eventer,this.je=Ge,this.Ze=Ve.Empty,this.Qe=new Map,this.Je=new Map,this.Ke=ze.fitting,this.qe=!0,this.th=Z((()=>this.chart.cs.vs()))(300,X.linear),this.ih=!0,this.ji=!0,this.sh=!1,this.eh=Bi,this.hh=!1,this.rh=!1,this.oh=Bi,this.ah=Bi,this.lh=Bi,this.uh=!1,this.dh=()=>{this.sh||void 0===this.Ke||this.chart.cs.vs(!0)},this.fh={},this.Ah=(t,i,s,e,h,r)=>{const n=[],o=[];for(const a of t){if(a<s||a>e){n.push(a);continue}const t=this.Qe.get(i),l=(t?t.get(a):void 0)||this.gh(a,i);l.ph=!1;const u=this.mh(l,h);r.set(l,u),n.push(a),o.push(l)}return{displayedKeyValues:n,createdTicks:o}},this.yh=(t,i,s,e,h,r,n,o,a,l,u)=>{const c=[];for(let d=0;d<t.length;d+=1){const f=t[d],A=i[d];let g,p,m;if(this.Sh(f,s)){const i=je(f,a);p=[t[d-1],t[d+1]],m=p.concat(l).concat(u).filter((t=>void 0!==t)).filter((i=>i.xh!==s||!!t.find((t=>t===i)))).map((t=>zi(i,je(t,a))?t:void 0)),g=m.some((t=>void 0!==t))}else g=!1;if(g){let t=!0;const i=m.filter((t=>void 0!==t));if(t&&i.every((t=>Oe(t.xh)))&&(t=!1),t&&s.bh&&s.bh.Mh&&!1===s.bh.Mh(A,e,h,r,n,o)&&(t=!1),!1===t)continue;return!0}c.push(f)}return c},this.formatValue=t=>this.je.We(t,this.ft),this._h=!0,this.wh=!0,this.chart=t,this.Ch=s,this.ts=h,this.kh=n,this.ft=e,this.Th=o,"logarithmic"===o.type&&this.setAnimationZoom(X.logarithmic(_s(o.base))),this.Fh=n.numeric,this.Ih("Numeric"),this.Ph=e.getInnerStart(),this.Dh=e.getInnerEnd(),this.setAnimationsEnabled(r)}setDefaultInterval(t,i){return this.Bh=t,!1!==(null==i?void 0:i.applyImmediately)&&(this.uh=!0,this.chart.cs.vs()),this}getDefaultInterval(){return this.Bh}getTitle(){return this.Rh.Lh()}setTitle(t){return this.Rh.Eh(t),this.chart.cs.vs(),this}getTitleFillStyle(){return this.Rh.zh()}setIntervalRestrictions(t){return this.Vh=t,this.chart.cs.vs(),this}getIntervalRestrictions(){return this.Vh}setTitleFillStyle(t){return this.Rh.ke(t),this.chart.cs.vs(),this}getTitleFont(){return this.Rh.Oh()}setTitleFont(t){return this.Rh.Nh(t),this.chart.cs.vs(),this}setTitleRotation(t){return this.Rh.Gh(t),this.chart.cs.vs(),this}getTitleRotation(){return this.Rh.Wh()}setTitleEffect(t){return this.Uh.Ss(t),this.chart.cs.vs(),this}getTitleEffect(){return this.Uh.xs()}Ih(t,i){if(this.Qe.size>0&&this.Yh(),"Empty"===t)this.je=Ge,this.Ze=t;else if("Numeric"===t){"Numeric"!==this.Ze&&(this.Fh=this.kh.numeric);const s=i||(t=>t);this.Fh=s(this.Fh),this.je=this.Fh.Hh(this.Th),this.Ze=t}else if("DateTime"===t){"DateTime"!==this.Ze&&(this.Fh=this.kh.datetime);const s=i||(t=>t);this.Fh=s(this.Fh),this.je=this.Fh.Hh(this.Th),this.Ze=t}else if("Time"===t){"Time"!==this.Ze&&(this.Fh=this.kh.time);const s=i||(t=>t);this.Fh=s(this.Fh),this.je=this.Fh.Hh(this.Th),this.Ze=t}return this.Je.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.Je=Ze(this.je),this.chart.cs.vs(),this}$h(){return this.je}Xh(t){this.je=t,this.Je.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.Je=Ze(this.je),this.chart.cs.vs()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.vt(void 0!==i?i:this.Ph,void 0!==s?s:this.Dh,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}vt(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n=!0,o=Math.abs(i-t);if(Math.abs(this.Dh-this.Ph),void 0!==this.je.jh&&this.je.jh>o){const s=(i+t)/2,e=this.je.jh/2*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.je.Zh&&this.je.Zh<o){const s=(i+t)/2,e=this.je.Zh/2*(t>i?-1:1);r={start:s-e,end:s+e}}const a=this.ft.ot(r.start,r.end,this.Ph,this.Dh,n);if(!1===a)return this;if(!0===a);else if(r=a,"zoomBandChart"===h)return this;let l;switch(h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":l=!0;break;case"zoomBandChart":case"synchronizedAxis":l=!1;break;default:return xi(0,""),this}if(this.Qh&&this.Qh.finishAll(!1),this.th&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.Qh||this.Qh.isOver()?this.th:this.Qh.NextAnimation.bind(this);this.Qh=i([[this.Ph,r.start],[this.Dh,r.end]],(([t,i])=>{this.Jh(t,i,n)}),t),this.Qh.onAnimationEnd((()=>{this.Qh=void 0,l&&(this.lh=xt.performance.now())})),this.Qh.onAnimationEnd((()=>this.setStopped(e)))}else this.Jh(r.start,r.end,n),this.setStopped(e),l&&(this.lh=xt.performance.now());return this}getInterval(){return{start:this.Ph,end:this.Dh}}setStopped(t){return t===this.sh||(t&&(this.Qh&&this.Qh.finishAll(!1),this.Qh=void 0),this.sh=t,this.L.emit("stoppedStateChanged",this,this.sh),this.eh=xt.performance.now(),this.chart.cs.vs()),this}getStopped(){return this.sh}onStoppedStateChanged(t){return this.L.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.L.off(t,"stoppedStateChanged")}fit(t,i){const s=this.Kh(),e=this.Bh||ih,h="function"==typeof e?e({curStart:this.Ph,curEnd:this.Dh,dataMin:null==s?void 0:s.min,dataMax:null==s?void 0:s.max}):e;return this.vt(void 0!==h.start?h.start:this.Ph,void 0!==h.end?h.end:this.Dh,void 0!==h.animate?h.animate:void 0===t||t,void 0!==h.stopAxisAfter?h.stopAxisAfter:void 0===i||i,"userFit"),this}setScrollStrategy(t){return this.Ke=t,this.chart.cs.vs(),this}getScrollStrategy(){return this.Ke}setAnimationScroll(t){return this.qe=Boolean(t),this.chart.cs.vs(),this}setAnimationZoom(t,i=300){return this.Qh&&(this.Qh.finishAll(!1),this.Qh=void 0),this.th=t?Z((()=>this.chart.cs.vs()))(i,t):void 0,this}setAnimationsEnabled(t){return this.ih=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(X.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.ih}setVisible(t){const i=this.ji!==t;return this.ji=t,this.Rh.setVisible(t),this.qh((i=>{i.Ye.setVisible(t)})),i&&this.L.emit("visibleStateChanged",this,this.ji),this}getVisible(){return this.ji}onIntervalChange(t){return this.L.on("scaleChange",t)}offIntervalChange(t){return this.L.off(t,"scaleChange")}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}tr(t,i){const s=new Map;if(this.je===Ge||!this.ji)return this.Yh(),s;i=i||new Map;const e=this.ir(),h=e.min,r=e.max,n=r-h,o=t.physicalAxisSize;this.fh.physicalAxisSize=o;const a=Ke(this.je,h,r,this.Ph,this.Dh,o),l=[];if(this.sr(),l.push(...this.er(this.je,h,r,a,i,t,s)),this.hr(this.je,h,r,a,i,t,l,s),this.rr(),a)for(const[t,i]of this.Je){const s=a.get(t);if(void 0!==s)for(const[t,e]of i)s.includes(t)||(null==e||e.dispose(),i.delete(t))}return this.fh.min=h,this.fh.max=r,this.fh.scaleInterval=n,this.fh.physicalAxisSize=o,s}nr(t){const i=t.xh.ar;t.Ye.Eh(i(t.S,this.ft)).Ds()}lr(t,i){const s=i.ur;t.Ye.ke(s.getLabelFillStyle()).Nh(s.getLabelFont()).Gh(s.getLabelRotation())}gh(t,i){const s=this.Je.get(i);let e=s.get(t);e?(s.delete(t),e.xh=i,e.ys(!0)):e=this.cr(t,i);const h=this.Qe.get(i)||new Map;return h.set(t,e),this.Qe.set(i,h),this.lr(e,i),e}mh(t,i){const s=this.dr(t,i);return this.nr(t),s}er(t,i,s,e,h,r,n){const o=[];for(const a of t.$e){const t=e.get(a);for(const e of t){if(e<i||e>s)continue;const t=this.Qe.get(a),l=(t?t.get(e):void 0)||this.gh(e,a),u=this.mh(l,r),c=je(l,h);o.find((t=>zi(c,je(t,h))))&&l.Ye.setVisible(!1),l.ph=!1,n.set(l,u),o.push(l)}}return o}hr(t,i,s,e,h,r,n,o){let a,l=[];for(const u of t.Xe){const t=e.get(u);if(!t)break;let c;if(void 0===a)c=[{start:i,end:s,keyValues:t}];else{c=[];for(let i=0;i<a.length-1;i+=1){const s=a[i],e=a[i+1],h={start:s,end:e,keyValues:[]};for(const i of t)i>=s&&i<e&&h.keyValues.push(i);c.push(h)}}if(a=t,Ne(u))continue;let d=0,f=-1,A=[],g=[];for(let t=0;t<c.length;t+=1){const e=this.Ah(c[t].keyValues,u,i,s,r,o);A=A.concat(e.displayedKeyValues),g=g.concat(e.createdTicks)}let p=g,m=!0;if(u.ur.getLabelFillStyle()!==z){let t=[];for(;++f<c.length;){const e=c[f],r=e.start,o=e.end;let a=e.keyValues;if(d>0){if(void 0===u.bh){m=!1;break}const t=u.bh.Ar;if(a=t(a,d-1,r,o,i,s),void 0===a)break}const p=this.yh(g.filter((t=>a.some((i=>kt(t.S,i))))),A,u,d,r,o,i,s,h,n,l);!0!==p?t=t.concat(p):(d+=1,f=-1,t=[])}p=t,g.forEach((i=>{t.find((t=>t===i))||this.gr(i)}))}if(l=p,!m)break}}gr(t){const i=this.Qe.get(t.xh);null==i||i.delete(t.S);const s=this.Je.get(t.xh);s&&s.has(t.S)?t.dispose():s&&(t.ys(!1),s.set(t.S,t))}qh(t){for(const i of this.Qe.values())for(const s of i.values())t(s)}pr(t,i){for(const s of this.Qe.values())for(const e of s.values())i=t(i,e);return i}Yh(){this.Qe.forEach(((t,i)=>{t.forEach((t=>this.gr(t)))})),this.Qe.clear()}sr(){for(const t of this.Qe.values())for(const i of t.values())i.ph=!0}rr(){for(const t of this.Qe.values())for(const[i,s]of t.entries())s.ph&&(s.dispose(),t.delete(i))}ir(){const t=this.ft.getInnerStart()<this.ft.getInnerEnd()?this.ft.getInnerStart():this.ft.getInnerEnd(),i=this.ft.getInnerEnd()>this.ft.getInnerStart()?this.ft.getInnerEnd():this.ft.getInnerStart();return A(t,i)}Sh(t,i){return!(t.ph||0===t.Ye.Lh().length||Oe(i)&&!0!==i.mr)}yr(t,i){return this.je===Ge||(this.je.$e.forEach((s=>{i=t(i,s.ur)})),this.je.Xe.forEach((s=>{(t=>void 0!==t.ar)(s)&&(i=t(i,s.ur))}))),i}Kh(){let t=this.Ch.Sr();const i=this.Ch.vr();let s;if(void 0!==t&&Mt(t)&&void 0!==i&&Mt(i)&&("logarithmic"===this.Th.type&&(0===t&&(t=Math.min(1,i)),Math.sign(t)!==Math.sign(i)&&(t=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,t),s.max=Math.max(s.max,i)):s=A(t,i)),s&&Mt(s.min)&&Mt(s.max))return kt(s.min,s.max)?{min:s.min-1,max:s.max+1}:s}br(){if(!this._h)return 0;let t=0;const i=this.Ch.Mr();return i&&(t=Math.max(t,i)),t}setAutoRegionsEnabled(t){return this._h=t,this.chart.cs.vs(),this}_r(){var t;const i=this.hh;let s=!1;if(this.uh&&this.Bh){const t=this.Kh(),i="function"==typeof this.Bh?this.Bh({curStart:this.Ph,curEnd:this.Dh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.Bh;this.setInterval(i),this.uh=!1}if(this.Ke&&!this.sh){const i=this.Kh();if(i){const e=this.Ph,h=this.Dh;let r=this.Ke.start(e,h,i.min,i.max),n=this.Ke.end(e,h,i.min,i.max);const o=null===(t=this.Ke.allowIntervalLengthChange)||void 0===t||t,a=th(this.Vh,i,{start:r,end:n},{start:e,end:h},o);r=a.start,n=a.end;const l=!1===kt(e,r),u=!1===kt(h,n);if(r=l?r:e,n=u?n:h,l||u){let t=!1;if(this.qe&&!this.wh)if(this.qe){t=!0;const i=l?this.wr(e,r):e,a=u?this.wr(h,n):h;if(!0===this.Jh(i,a,o)&&(l&&!1===kt(i,r)||u&&!1===kt(a,n))){this.chart.cs.vs(!0),s=!0;let t=Math.abs(n-r)/Math.abs(i-a);t<1&&(t=1/t),this.rh=t>=1.4}}else t=!1;t||this.Jh(r,n,o),this.wh=!1}}}return s?(this.hh!==s&&(this.hh=s,this.oh=xt.performance.now()),this.Cr&&(clearTimeout(this.Cr),this.Cr=void 0)):!0===i&&void 0===this.Cr&&(this.rh=!1,this.Cr=setTimeout((()=>{!1!==this.hh&&(this.hh=!1,this.oh=xt.performance.now()),this.Cr=void 0,this.chart.cs.vs()}),200)),this}Jh(t,i,s){let e={start:t,end:i},h=!0;if(this.Vh){const t=this.Kh();e=th(this.Vh,t,e,{start:this.Ph,end:this.Dh},s)}const r=Math.abs(i-t),n=Math.abs(this.Dh-this.Ph);if(void 0!==this.je.jh&&this.je.jh>r){const r=(i+t)/2,o=(s?this.je.jh/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}if(void 0!==this.je.Zh&&this.je.Zh<r){const r=(i+t)/2,o=(s?this.je.Zh/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}let o=this.ft.ot(e.start,e.end,this.Ph,this.Dh,s);if(!1===o)return!1;!0!==o&&(e=o);const a=this.br(),l=this.kr(Math.min(e.start,e.end),Math.max(e.start,e.end),a);return o=this.ft.ot(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min,this.Ph,this.Dh,!1),!!o&&(!0===o?this.ft.K(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min):this.ft.K(e.start,e.end),this.Ph=e.start,this.Dh=e.end,this.L.emit("scaleChange",this,e.start,e.end),this.ah=xt.performance.now(),this.chart.cs.vs(),h)}Tr(){return this.hh}Fr(){return void 0!==this.Qh}}class Je{constructor(t,i,s,e,h=s.Dr(e).Pr(Ti).Ir(Ti).setMouseInteractions(!1)){this.ph=!1,this.Xi=!1,this.ss=[],this.xh=t,this.S=i,this.Br=s,this.He=e,this.Ye=h,this.ss.push(h)}ys(t){this.ss.forEach((i=>i.setVisible(t)))}dispose(){return this.Xi||(this.Xi=!0,this.ss.forEach((t=>t.dispose()))),this}}const Ke=(t,i,s,e,h,r)=>{const n=new Map;for(const r of t.$e){let t=r.Lr(i,s,e,h);t=qe(t),n.set(r,t)}let o;for(const e of t.Xe){let t;if(void 0===o)t=e.Lr(i,s,i,s);else{let h=[];const n=o.filter((t=>i<=t&&t<=s)).length;if(n>0){const t=r/(n-1);if(void 0!==e.Rr&&e.Rr>t)break}for(let t=0;t<o.length-1;t+=1){const r=e.Lr(o[t],o[t+1],i,s);h=h.concat(r)}t=h}t=qe(t),n.set(e,t),o=t}return n},qe=t=>(t=(t=>{const i={},s=[],e=t.length;let h=0;for(let r=0;r<e;r+=1){const e=t[r];1!==i[e]&&(i[e]=1,s[h]=e,h+=1)}return s})(t)).sort(((t,i)=>t-i)),th=(t,i,s,e,h)=>{const r="function"==typeof t?t({curStart:e.start,curEnd:e.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):t;if(!r)return s;const n={start:s.start,end:s.end};let o=Math.abs(s.end-s.start);if(void 0!==r.intervalMin&&o<r.intervalMin){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMin,n.end=t+.5*Math.sign(s.end-t)*r.intervalMin}if(o=Math.abs(s.end-s.start),void 0!==r.intervalMax&&o>r.intervalMax){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMax,n.end=t+.5*Math.sign(s.end-t)*r.intervalMax}return o=Math.abs(s.end-s.start),void 0!==r.startMin&&(n.start=Math.max(n.start,r.startMin),h||kt(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.startMax&&(n.start=Math.min(n.start,r.startMax),h||kt(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMin&&(n.end=Math.max(n.end,r.endMin),h||kt(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMax&&(n.end=Math.min(n.end,r.endMax),h||kt(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),n},ih=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const i=t.curEnd>=t.curStart;return{start:i?t.dataMin:t.dataMax,end:i?t.dataMax:t.dataMin,stopAxisAfter:!1}},sh=t.Record({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class eh extends sh{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const hh=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),rh=new eh,nh=new class{getFillStyle(){return z}},oh=t.Record({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new G,wireframeStyle:rt});class ah extends oh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const lh=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),uh=t.Record({type:"pixelated-points-3d",size:5,fillStyle:new G});class ch extends uh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const dh=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),fh={Triangulated:ah,Pixelated:ch};class Ah{constructor(t){this.Er=new Map,this.cs=t}ls(t,i,s){const e=s.animationEnabled;this.Er.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=t.onDispose((()=>{this.Er.delete(t),t.offDispose(h)}))}zr(t,i){let s=i.animationEnabled;const e=[],h=t.onDispose((()=>{e.forEach((t=>{this.Er.delete(t)})),t.offDispose(h)}));return{Vr:(t,i)=>{const h={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.Er.set(t,h)},Or:()=>{e.forEach((t=>{this.Er.delete(t)})),e.length=0},Nr:t=>{s=t,e.forEach((t=>{this.ws(t,s)}))},Gr:()=>s}}_s(t,i){const s=this.Er.get(t);s&&(s.curUnanimatedHighlightValue=Si(i),this.cs.vs())}gs(t,i=!1){const s=this.Er.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}ws(t,i){const s=this.Er.get(t);s&&(s.animationEnabled=i)}Cs(t){const i=this.Er.get(t);return!!i&&i.animationEnabled}Ds(t){let i=!1;this.Er.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.cs.vs(!0)}}const gh=new Map,ph=(t,i)=>{const s=t.getSize(),e=t.getFamily(),h=t.getWeight(),r=t.getStyle(),n=t.getVariant(),o=`${r} ${n?"small-caps":"normal"} ${h} ${s}px ${e}`,a=`${o} ${i.toFixed(2)}`;let l=gh.get(a);return l||(l=((t,i,s,e)=>({font:t,properties:i,dpr:s,id:e}))(o,{type:"font",size:s,family:e,style:r,variant:n,weight:h},i,a),gh.set(a,l)),l};var mh,yh;!function(t){t[t.click=0]="click",t[t.dbclick=1]="dbclick",t[t.mouseDown=2]="mouseDown",t[t.mouseUp=3]="mouseUp",t[t.contextmenu=4]="contextmenu",t[t.wheel=5]="wheel"}(mh||(mh={})),function(t){t[t.touchStart=0]="touchStart",t[t.touchMove=1]="touchMove",t[t.touchEnd=2]="touchEnd"}(yh||(yh={}));const Sh=t=>({container:t.Wr,scale:t.ft,setMouseStyle:(i,s)=>t.Ur(i,s),restoreMouseStyle:i=>t.Yr(i),clientLocation2Engine:(i,s)=>t.De(i,s),engineLocation2Client:(i,s)=>t.Hr(i,s),captureFrame:(i,s,e)=>t.$r(i,s,e),renderFrame:(i,s,e=!1)=>t.Xr(i,s,e),layout:()=>{t.jr(),t.Zr(),t.Jr.Qr(),t.vs()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.Kr(i,s),onRenderFrame:i=>t.qr(i),offRenderFrame:i=>t.tn(i)}),vh=[];let xh;const bh=()=>{if(void 0!==xh){const t=xt.getComputedStyle(xt.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));xh.style.height=xt.innerHeight-i+"px",(()=>{for(let t=0;t<vh.length;t+=1)vh[t]()})()}},Mh=new G({color:M(255,255,255)}),_h={font:ph(rh,0),fillStyle:Mh,lineStyle:new Qs({fillStyle:Mh,thickness:1}),pointStyle3D:new fh.Triangulated};class wh{constructor(t,s,e){this.L=new i.Eventer,this.ft=lt.d2({scaleXYConstructor:Ls}),this.sn=new Map,this.en=Z((()=>this.vs()),60),this.hn=l(0,0),this.rn=!1,this.nn=Ct,this.an=()=>{},this.ln=[],this.un=-1,this.cn=[],this.dn=!0,this.Xi=!1,this.fn=!1,this.Zr=()=>{const{bottom:t,left:i}=this.Wr.getBoundingClientRect();return this.hn=l(Math.floor(i),Math.floor(t)),this},this.jr=()=>{this.An&&this.An()},this.Ur=(t,i)=>{if(!i){this.Wr.style.cursor=t;const i=this.un;return this.un+=1,this.cn.push([i,t]),i}return this.Yr(i),this.Ur(t)},this.Yr=t=>{const i=t?this.cn.findIndex((i=>i[0]===t)):-1;i>=0?(this.cn.splice(i,1),this.cn.length>0?this.Wr.style.cursor=this.cn[this.cn.length-1][1]:this.Wr.style.cursor="default"):(this.cn.push([0,"default"]),this.Wr.style.cursor="default")},this.gn=t=>(this.pn.M(t),this),this.mn=()=>this.pn._(),this.yn=()=>{this.nn&&this.nn(1e3/60),this.Sn(),this.vn(),this.an&&this.an()},this.xn=t=>(this.sn.set(t.bn(),t),this.sn=new Map([...this.sn.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.Mn=t=>(this.sn.delete(t),this),this.Z=()=>(this.pn.o=!1,this),this.J=()=>(this.pn.o=!0,this),this._n=t=>{if(!this.dn)return;const i=this.wn,s=i&&i.clientX===t.clientX&&i.clientY===t.clientY,e=this.De(t.clientX,t.clientY),h=this.Cn(t,{x:t.clientX,y:t.clientY});if(this.kn&&((null==h?void 0:h.entity)!==this.kn.entity||h.collectionMember!==this.kn.collectionMember)&&!this.Tn){this.kn.entity.Zi=!1;const i=this.kn.entity.Fn;i&&i(this.kn.entity,t,this.kn.collectionMember)}if(h&&h.entity.getMouseInteractions()&&!this.Tn)if(h.entity.Zi){if(!s){const i=h.entity.In;i&&i(h.entity,t,h.collectionMember)}}else{h.entity.Zi=!0;const i=h.entity.Pn;i&&i(h.entity,t,h.collectionMember)}if(this.Tn){const s=this.Tn.entity.Dn,e=i?l(t.clientX-i.clientX,i.clientY-t.clientY):{x:0,y:0};!s||0===e.x&&0===e.y||s(this.Tn.entity,t,this.Tn.button,this.Tn.startLocation,e,this.Tn.collectionMember)}this.Bn=t,this.wn=t,this.Ln=e,this.kn=h},this.Rn=t=>{if(this.dn=!1,this.Ln=void 0,this.Bn=t,this.kn&&!this.En&&!this.Tn){this.kn.entity.Zi=!1;const i=this.kn.entity.Fn;i&&i(this.kn.entity,t,this.kn.collectionMember),this.kn=void 0}},this.zn=t=>{if(this.dn=!0,this.Bn=t,this.Tn&&t.buttons<=0){const i=this.Tn.entity.Vn;i&&i(this.Tn.entity,t,this.Tn.button,this.Tn.startLocation,this.Tn.collectionMember),this.Tn=void 0}if(this.En&&t.buttons<=0){const i=this.En.entity.On;i&&i(this.En.entity,t,this.En.collectionMember),this.En=void 0}},this.Nn=()=>this.Ln,this.Jr=t,this.ts=s.theme,this.Gn=e.Gn,this.Wn=e.Wn,this.Un=e.Un,this.Yn={Hn:s&&s.overrideInteractionMouseButtons?s.overrideInteractionMouseButtons:void 0,Xs:s&&void 0!==s.resourcesBaseUrl&&null!==s.resourcesBaseUrl?s.resourcesBaseUrl:`${xt.location.origin}/resources`,$n:!s||!("warnings"in s)||"boolean"!=typeof s.warnings||s.warnings,Xn:(()=>{const t=null==s?void 0:s.pickingPrecision;if("string"==typeof t){const i=t.toLowerCase();if("best"===i)return 1;if("high"===i)return.5;if("low"===i)return 1/8}return 1/4})(),jn:void 0===(null==s?void 0:s.interactable)||s.interactable,Zn:void 0===s.textPixelSnappingEnabled||s.textPixelSnappingEnabled};const h=s?s.container:void 0;if(h){if("string"==typeof h){const t=xt.document.getElementById(h);if(!t)throw new Error(`Container "${h}" doesn't exist.`);this.Wr=t}else this.Wr=h;xt.addEventListener("resize",this.jr),this.ln.push((()=>{xt.removeEventListener("resize",this.jr)}))}else{if(void 0===xh){const t=xt.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",xt.document.body.appendChild(t),xh=t,xt.addEventListener("resize",bh)}let t=1;for(;null!==xt.document.getElementById(`chart-${t}`);)t+=1;this.Wr=xt.document.createElement("div"),this.Wr.id=`chart-${t}`,this.Wr.style.flex="1",this.Wr.style.height="100%",xh.appendChild(this.Wr),bh(),vh.push(this.jr),this.ln.push((()=>{xh&&xh.removeChild(this.Wr),vh.includes(this.jr)&&vh.splice(vh.indexOf(this.jr),1),0===vh.length&&xh&&(xt.document.body.removeChild(xh),xh=void 0,xt.removeEventListener("resize",bh))}))}if(xt.ResizeObserver){const t=t=>{for(const i of t)i.target===this.Wr&&this.jr()};this.Qn=new xt.ResizeObserver(t.bind(this)),this.Qn.observe(this.Wr)}""===this.Wr.style.position&&(this.Wr.style.position="relative"),this.Wr.style.boxSizing="content-box",this.Wr.addEventListener("fullscreenchange",this.jr),this.Wr.addEventListener("webkitfullscreenchange",this.jr);const r=s?s.maxFps:void 0;this.Jn=r?-1===r?-1:0!==r?1e3/r:0:0;const n=new Map;let o=!1;const a=(t,i)=>s=>{const e=function(t){return{x:t.clientX,y:t.clientY}}(s);switch(s.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":n.set(s.pointerId,e);break;default:n.delete(s.pointerId),o=!1}switch(s.interactions=Array.from(n.values()),s.pointerType){case"pen":case"mouse":default:t&&t(s);break;case"touch":i&&i(s)}s.defaultPrevented&&(o=!0)};this.Wr.onwheel=this.Kn(mh.wheel),this.Wr.oncontextmenu=this.Kn(mh.contextmenu),this.Wr.onclick=this.Kn(mh.click),this.Wr.ondblclick=this.Kn(mh.dbclick),this.Wr.onlostpointercapture=()=>{o=!1},this.Wr.ontouchmove=t=>{o&&t.preventDefault()},this.Wr.onpointerover=a(),this.Wr.onpointerenter=a(this.zn),this.Wr.onpointerdown=a(this.Kn(mh.mouseDown),this.qn(yh.touchStart)),this.Wr.onpointermove=a(this._n,this.qn(yh.touchMove)),this.Wr.onpointerup=a(this.Kn(mh.mouseUp),this.qn(yh.touchEnd)),this.Wr.onpointercancel=a(),this.Wr.onpointerout=a(),this.Wr.onpointerleave=a(this.Rn,this.qn(yh.touchEnd)),xt.addEventListener("scroll",this.Zr,{passive:!0}),this.pn=p(new x({r:0,g:0,b:0,a:0})),this.us=new Ah(this)}io(t,i){var s,e,h,r;(null===(s=this.kn)||void 0===s?void 0:s.entity)===t.entity&&this.kn.collectionMember===t.collectionMember&&(this.kn=i),(null===(e=this.so)||void 0===e?void 0:e.entity)===t.entity&&this.so.collectionMember===t.collectionMember&&(this.so=i),(null===(h=this.En)||void 0===h?void 0:h.entity)===t.entity&&this.En.collectionMember===t.collectionMember&&(this.En={...i,event:this.En.event}),(null===(r=this.Tn)||void 0===r?void 0:r.entity)===t.entity&&this.Tn.collectionMember===t.collectionMember&&(this.Tn={...i,button:this.Tn.button,startLocation:this.Tn.startLocation})}eo(){this.fn=!0,this.nn=void 0,this.an=void 0}qr(t){return this.L.on("render",t)}tn(t){return this.L.off(t)}ho(){return this.ro}no(){return this.oo}setBackgroundFillStyle(t){return this.ao.ke(t),this}getBackgroundFillStyle(){return this.ao.zh()}setBackgroundStrokeStyle(t){return this.ao.Ce(t),this}getBackgroundStrokeStyle(){return this.ao.lo()}uo(t){return this.an=t,this}co(t){return this.nn=t,this}do(t){return this.sn.get(t)}fo(){return Array.from(this.sn.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}Kn(t){return i=>this.Ao(t,i)}Ao(t,i){if(!this.dn)return;t===mh.contextmenu&&jt(i);const s=this.De(i.clientX,i.clientY),e=this.Cn(i,{x:i.clientX,y:i.clientY});if(t===mh.mouseUp){if(this.Tn){const t=this.Tn.entity.Vn;if(t&&t(this.Tn.entity,i,this.Tn.button,this.Tn.startLocation,this.Tn.collectionMember),(null==e?void 0:e.entity)!==this.Tn.entity||e.collectionMember!==this.Tn.collectionMember){this.Tn.entity.Zi=!1;const t=this.Tn.entity.Fn;t&&t(this.Tn.entity,i,this.Tn.collectionMember)}this.Tn=void 0}if(this.En){const t=this.En.entity.getMouseInteractions()&&this.En.entity.On;t&&t(this.En.entity,i,this.En.collectionMember),this.En=void 0}}else if(e&&e.entity.getMouseInteractions()){const s=t===mh.click?e.entity.po:t===mh.dbclick?e.entity.mo:t===mh.mouseDown?e.entity.yo:t===mh.wheel?e.entity.So:t===mh.contextmenu?e.entity.vo:void 0;if(s&&s(e.entity,i,e.collectionMember),t===mh.mouseDown){this.En={entity:e.entity,collectionMember:e.collectionMember,event:i};const t=this.En.event.button,s=e.entity.xo;s&&s(e.entity,i,t,e.collectionMember),this.Tn={entity:e.entity,collectionMember:e.collectionMember,button:t,startLocation:l(i.clientX,i.clientY)}}}this.Bn=i,this.Ln=s,this.kn=e}qn(t){return i=>this.bo(t,i)}bo(t,i){const s=i.interactions.length;if(this.Mo=i,this.so){const e=t===yh.touchMove?this.so.entity._o:t===yh.touchEnd?this.so.entity.wo:t===yh.touchStart?this.so.entity.Co:void 0;e&&e(this.so.entity,i,this.so.collectionMember),t===yh.touchEnd&&0===s&&(this.so.entity.Zi=!1,this.so=void 0)}else if(t===yh.touchStart){for(let t=0;t<s&&(this.so=this.Cn(i,{x:i.interactions[t].x,y:i.interactions[t].y}),!this.so);t+=1);if(this.so){this.so.entity.Zi=!0;const t=this.so.entity.Co;t&&t(this.so.entity,i,this.so.collectionMember)}}t===yh.touchEnd?this.Ln=void 0:this.Ln=this.De(i.clientX,i.clientY)}ko(t){return this.L.on("resize",t)}To(t){return this.L.off(t,"resize")}Fo(){return this.L.topicOff("resize"),this}Io(t){return this.L.on("inViewChange",t)}Po(t){return this.L.off(t)}U(){if(!this.Xi){if(this.Xi=!0,this.sn)for(const t of this.sn.values())t.U();this.nn=void 0,this.an=void 0,xt.removeEventListener("scroll",this.Zr),this.Wr.removeEventListener("fullscreenchange",this.jr),this.Wr.removeEventListener("webkitfullscreenchange",this.jr),this.Qn&&(this.Qn.disconnect(),this.Qn=void 0),this.ln.forEach((t=>{t()})),this.ln.length=0}}De(t,i){return l(t-this.hn.x,this.hn.y-i)}Hr(t,i){return l(t+this.hn.x,this.hn.y-i)}Do(t){const i=this.De(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}Bo(t){const i=this.Hr(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}}const Ch=(t=1)=>({type:"horizontalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=hs(s,e*t),r=Math.abs(h.x),n=i.length,o=[];let a=0,u=0,c=i[0].x+r;for(;u<n;){const t=i[u];if(o[a]=t,a+=1,u+=1,t.x<c&&u<n){const s=u;let e=t.y,h=t.y;for(;u<n&&i[u].x<=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(o[a-1].x+i[u-1].x)/2;o[a+0]=l(t,h),o[a+1]=l(t,e),o[a+2]=i[u-1],a+=3}}c+=r}return o}return i.slice()}}),kh=(t=1)=>({type:"horizontalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=hs(s,e*t),r=Math.abs(h.x),n=i.length,o=[];let a=0,u=0,c=i[0].x-r;for(;u<n;){const t=i[u];if(o[a]=t,a+=1,u+=1,t.x>c&&u<n){const s=u;let e=t.y,h=t.y;for(;u<n&&i[u].x>=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(o[a-1].x+i[u-1].x)/2;o[a+0]=l(t,h),o[a+1]=l(t,e),o[a+2]=i[u-1],a+=3}}c-=r}return o}return i.slice()}}),Th=(t=1)=>({type:"verticalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=hs(s,e*t),r=Math.abs(h.y),n=i.length,o=[];let a=0,u=0,c=i[0].y+r;for(;u<n;){const t=i[u];if(o[a]=t,a+=1,u+=1,t.y<c&&u<n){const s=u;let e=t.x,h=t.x;for(;u<n&&i[u].y<=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(o[a-1].y+i[u-1].y)/2;o[a+0]=l(h,t),o[a+1]=l(e,t),o[a+2]=i[u-1],a+=3}}c+=r}return o}return i.slice()}}),Fh=(t=1)=>({type:"verticalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=hs(s,e*t),r=Math.abs(h.y),n=i.length,o=[];let a=0,u=0,c=i[0].y-r;for(;u<n;){const t=i[u];if(o[a]=t,a+=1,u+=1,t.y>c&&u<n){const s=u;let e=t.x,h=t.x;for(;u<n&&i[u].y>=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(o[a-1].y+i[u-1].y)/2;o[a+0]=l(h,t),o[a+1]=l(e,t),o[a+2]=i[u-1],a+=3}}c-=r}return o}return i.slice()}});var Ih;exports.PointShape=void 0,(Ih=exports.PointShape||(exports.PointShape={}))[Ih.Square=0]="Square",Ih[Ih.Circle=1]="Circle",Ih[Ih.Triangle=2]="Triangle",Ih[Ih.Cross=3]="Cross",Ih[Ih.Diamond=4]="Diamond",Ih[Ih.Plus=5]="Plus",Ih[Ih.Minus=6]="Minus",Ih[Ih.Arrow=7]="Arrow",Ih[Ih.Star=8]="Star";const Ph={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"};var Dh;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(Dh||(Dh={}));const Bh=t=>{const i="nearest"===t?Dh.Nearest:"nearest-x"===t?Dh.NearestX:"nearest-y"===t?Dh.NearestY:void 0;return void 0!==i?i:Dh.NearestX},Lh=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.length;if(0===u)return;const c=e?1:0,d=u-(h?2:1);if(s===Dh.Nearest)return Rh(t,i,r,n,c,d);if(s===Dh.NearestX||s===Dh.NearestY){if("boolean"==typeof l&&("x"===a&&s===Dh.NearestX||"y"===a&&s===Dh.NearestY))return Vh(t,ct(i,n,r),a,l,c,d);if(s===Dh.NearestX)return Eh(t,ct(i,n,r),o,c,d);if(s===Dh.NearestY)return zh(t,ct(i,n,r),o,c,d)}},Rh=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=ct(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},Eh=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},zh=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},Vh=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),p=r,m=-1;for(;;){const i=o-(n?t[g].x:t[g].y);if(i*(e?-1:1)>0)A=Math.min(g+1,p),m=Math.floor((A+p)/2);else{if(0===Math.abs(i))return g;p=Math.max(g-1,A),m=Math.floor((A+p)/2)}if(m===g){const s=g>h?Math.abs(o-(n?t[g-1].x:t[g-1].y)):Di,e=g<r?Math.abs(o-(n?t[g+1].x:t[g+1].y)):Di,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return g-1;case e:return g+1;default:return g}}else g=m}},Oh=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),p=r,m=-1;for(;;){const s=o-(n?t[g].x:t[g].y);if(s*(e?-1:1)>0)A=Math.min(g+1,p),m=Math.floor((A+p)/2);else{if(0===Math.abs(s))return{a:g,b:g,lerpAmount:0};p=Math.max(g-1,A),m=Math.floor((A+p)/2)}if(m===g){if(s*(e?-1:1)<0&&g>h){const s=t[g-1],e=t[g];return{a:g-1,b:g,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(g<r){const s=t[g],e=t[g+1];return{a:g,b:g+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:g,b:g,lerpAmount:0}}g=m}};let Nh=0;class Gh{constructor(t,s,e){this.Lo=p(!0),this.Ro=!1,this.Zi=!1,this.Eo=!1,this.Xi=!1,this.ji=!0,this.zo=void 0,this.Vo=0,this.L=new i.Eventer,this.In=void 0,this.Pn=void 0,this.Fn=void 0,this.po=void 0,this.So=void 0,this.vo=void 0,this.mo=void 0,this.yo=void 0,this.On=void 0,this.xo=void 0,this.Dn=void 0,this.Vn=void 0,this.Co=void 0,this._o=void 0,this.wo=void 0,this.onDispose=t=>this.L.on("dispose",t),this.offDispose=t=>this.L.off(t,"dispose"),this.cs=t,this.Oo=s,this.No=e,this.Go=Nh,Nh+=1,this.Wo=t.ts.highlightColorOffset}Uo(t){return void 0!==this.No.find((i=>i.type===t))}Yo(t,i){var s;return!!this.Uo(t)&&!0===i(null===(s=this.No.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.Xi||(this.Zi&&this.Fn&&this.Fn(this,void 0,void 0),this.Xi=!0,this.Oo(this),this.L.emit("dispose",this)),this}isDisposed(){return this.Xi}setVisible(t){const i=this.ji;return this.ji=t,!t&&i&&(this.Zi&&this.Fn&&this.Fn(this,void 0,void 0),this.Zi=!1),this}getVisible(){return this.ji}setMouseInteractions(t){const i=this.Lo._();return this.Lo.M(t),t||(i&&this.Zi&&this.Fn&&this.Fn(this,void 0,void 0),this.Zi=!1),this}getMouseInteractions(){return this.Lo._()}getIsUnderMouse(){return this.Zi}getIsGrabbed(){return this.Eo}setMouseMoveEventHandler(t){return this.In=t,this}setMouseEnterEventHandler(t){return this.Pn=t,this}setMouseLeaveEventHandler(t){return this.Fn=t,this}setMouseClickEventHandler(t){return this.po=t,this}setMouseDoubleClickEventHandler(t){return this.mo=t,this}setMouseDownEventHandler(t){return this.yo=t,this}setMouseUpEventHandler(t){return this.On=t,this}setMouseWheelEventHandler(t){return this.So=t,this}setMouseContextMenuEventHandler(t){return this.vo=t,this}setMouseDragEventHandler(t){return this.Dn=t,this}setMouseDragStartEventHandler(t){return this.xo=t,this}setMouseDragStopEventHandler(t){return this.Vn=t,this}setTouchStartEventHandler(t){return this.Co=t,this}setTouchMoveEventHandler(t){return this._o=t,this}setTouchEndEventHandler(t){return this.wo=t,this}Ho(t){return this.zo=t,this}$o(){return this.zo?this.zo:Wh}ds(t){return this.Vo=t,this}Xo(){return this.Vo}jo(t){return this.Wo=t,this}Zo(){return this.Wo}}const Wh=A(l(0,0),l(0,0));class Uh extends Gh{constructor(t,i,s,e){super(t,s,e),this.Qo=0,this.Ts=i,this.Ts.Jo=!0}Ko(t){return this.Qo===t||(this.Qo=t,this.Ts.Jo=!0),this}qo(){return this.Qo}}class Yh extends Uh{constructor(t,i,s,e,h){super(t,i,e,h),this.ta=!0,this.ft=s}}const Hh=(t,i,s)=>{if(s instanceof Ls){const e=s.Ui(),h=os(i,{x:Math.abs(e.x),y:Math.abs(e.y)});return A(l(t.min.x-h.x,t.min.y-h.y),l(t.max.x+h.x,t.max.y+h.y))}return A(s.mi(l(t.min.x,t.min.y),hs(i,-1)),s.mi(l(t.max.x,t.max.y),i))},$h=(t,i)=>"function"==typeof i?i(t):i,Xh=(t,i)=>!t||t!==i,jh=(t,i)=>t===z&&i!==z,Zh=t=>t!==z;class Qh extends Yh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.be=_h.fillStyle,this.cs=t}ke(t){return this.be=$h(this.be,t),this}zh(){return this.be}ia(){return Xh(this.sa,this.be)}ea(){return jh(this.sa,this.be)}ha(){return Zh(this.be)}ra(t){this.sa=t}}class Jh extends Qh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Me=_h.lineStyle,this.cs=t}Ce(t){return this.Me="function"==typeof t?t(this.Me):t,this}lo(){return this.Me}na(){return!this.oa||this.oa!==this.Me}aa(t){return!this.oa||this.oa.getThickness()!==t}ha(){return this.Me!==rt||super.ha()}ea(){return(this.Me!==rt||this.be!==z)&&this.oa===rt&&this.sa===z}la(t){this.oa=t}}class Kh extends Qh{constructor(t,i,s,e,h,r=p(5)){super(t,i,s,e,h),this.size=p(5),this.size=r}tt(t){return this.size.M(t),this}}class qh extends Qh{constructor(t,i,s,e,h,r=p(_h.font)){super(t,i,s,e,h),this.ua=p(""),this.ca=p(l(0,0)),this.da=p(0),this.fa=p(0),this.Aa=p(l(0,0)),this.ga=p(0),this.pa=p(rh),this.ma=l(0,0),this.jt=p(m(1,1,1,1)),this.ya=p(y(4,4,4,4)),this.font=p(_h.font),this.Sa=!1,this.font=r}ha(){return Zh(this.be)&&this.ua._().length>0}ea(){return!1===this.Sa&&this.ha()}Eh(t){return this.ua.M(t),this}Lh(){return this.ua._()}Nh(t){return hh(t)?this.pa.M(t):this.pa.M(t(this.pa._())),this}Oh(){return this.pa._()}va(t){return this.pa.M(this.pa._().setFamily(t)),this}xa(){return this.pa._().getFamily()}ba(t){return this.pa.M(this.pa._().setSize(t)),this}Ma(){return this.pa._().getSize()}_a(t){return this.pa.M(this.pa._().setWeight(t)),this}wa(){return this.pa._().getWeight()}Ca(t){return this.pa.M(this.pa._().setStyle(t)),this}ka(){return this.pa._().getStyle()}Ta(t){return this.pa.M(this.pa._().setVariant(t)),this}Fa(){return this.pa._().getVariant()}Ie(t){return this.ca.M(t),this}Ia(){return this.ca._()}Gh(t){return this.ga.M(t),this}Wh(){return this.ga._()}Pa(t,i){return this.Aa.M(l(t,i)),this}Da(){return this.Aa._()}Ba(t){return this.fa.M(t),this}La(){return this.fa._()}Ra(t){return this.da.M(t),this}Ea(){return this.da._()}za(t){return this.fa.M(t.x),this.da.M(t.y),this}Ir(t){return this.jt.M(t),this}Va(){return this.jt._()}Pr(t){return this.ya.M(t),this}Oa(){return this.ya._()}}class tr extends Kh{constructor(t,i,s,e,h,r=5){super(t,i,s,e,h,p(r)),this.Na=[],this.Ga=p(exports.PointShape.Square),this.ga=p(0),this.Wa=p(!1),this.Ua=p(!1),this.Ya=p(!1),this.Ha=Li,this.$a=0,this.Xa=[],this.ja=0,this.Za=Li,this.Qa=Dh.Nearest,this.Ja=!1,this.Ka=void 0}qa(t){return this.Qa=t,this}tl(){return this.Xa}il(){return this.Na}sl(t){return this.Ga.M(t),this}el(){return this.Ga._()}Gh(t){return this.ga.M(t),this}Wh(){return this.ga._()}hl(t){return this.Wa.M(t),this}rl(t){return this.Ua.M(t),this}nl(t){return this.Ya.M(t),this}ol(t,i){return Array.isArray(t)||(t=[t]),this.ja+=t.length,this.Xa=hi(this.Xa,t,{canReturnB:!0}),this.Za&&(this.Za=i?Qi(this.Za,i):void 0),this.Ka=void 0,this}Gt(){return this.Ja=!0,this.Na.length=0,this.$a=0,this.Ha=Li,this.Xa=[],this.ja=0,this.Ka=void 0,this}al(){return this.$a}ll(){return this.ja}}class ir extends Jh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ca=p(l(0,0)),this.j=p(l(100,100)),this.ga=p(0),this.ma=p(l(0,0)),this.ul=!1}Ds(){return this.cl(),this}Ie(t){const i=this.ca._();return t.x===i.x&&t.y===i.y||(this.ca.M(t),this.cl()),this}Ia(){return this.ca._()}dl(t){const i=this.ca._();return t!==i.x&&(this.ca.M(l(t,i.y)),this.cl()),this}fl(t){const i=this.ca._();return t!==i.y&&(this.ca.M(l(i.x,t)),this.cl()),this}tt(t){const i=this.j._();return t.x===i.x&&t.y===i.y||(this.j.M(l(t.x,t.y)),this.cl()),this}ai(){return this.j._()}Al(t){const i=this.j._();return t!==i.x&&(this.j.M(l(t,i.y)),this.cl()),this}pl(t){const i=this.j._();return t!==i.x&&(this.j.M(l(i.x,t)),this.cl()),this}Gh(t){return this.ga.M(t),this}Wh(){return this.ga._()}ml(t){const i=this.ma._();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.ul=!1,this.cl()):(this.ul=!0,this.ma.M(t))),this}cl(){if(!this.ul){const t=this.ca._(),i=this.j._(),s=l(t.x+i.x/2,t.y+i.y/2),e=this.ma._();s.x===e.x&&s.y===e.y||this.ma.M(s)}}}class sr extends Jh{constructor(){super(...arguments),this.Na=[],this.ca=p(l(0,0)),this.Ha=Li,this.yl=!1}Sl(t){return t=qt(t),this.Na=t,this.yl=!0,this}vl(){return this.Na}bt(){return this.Ha.max.x}xt(){return this.Ha.min.x}_t(){return this.Ha.max.y}Mt(){return this.Ha.min.y}xl(){return 0}bl(){return 0}}class er extends sr{}class hr extends Qh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ml=new Array,this._l=new Array,this.wl=p({type:"disabled",packager:(t,i,s)=>t.slice()}),this.Ha=Li,this.Cl=0,this.kl=!1,this.Xa=[Array(),Array()],this.Tl=!1,this.Fl=(new G).setColor(M(42,171,240)),this.Ja=!1,this.Il=!1,this.Pl=!1}ol(t,i){const s=this.Cl-1,e=s>0&&!this.Tl;let[h,r]=e?[[this.Ml[s]],[this._l[s]]]:[[],[]];if(t instanceof Array){const[i,s]=f(t);h=hi(h,i,{canReturnB:!0}),r=hi(r,s,{canReturnB:!0})}else{const i=t.position;h.push(l(i,t.high)),r.push(l(i,t.low))}return this.Tl?(this.Xa[0]=hi(this.Xa[0],h,{canReturnB:!0}),this.Xa[1]=hi(this.Xa[1],r,{canReturnB:!0})):(this.Xa=[h,r],this.Tl=!0),this.Ha=Qi(this.Ha,i||Qi(ji(h),ji(r))),this}Gt(){return this.Ja=!0,this.Ml.length=0,this._l.length=0,this.Cl=0,this.Ha=Li,this}il(){return[this.Ml,this._l]}tl(){return[this.Xa[0],this.Xa[1]]}Dl(t){return this.wl.M(t),this}Bl(){return this.wl._()}Ll(t){return this.Fl="function"==typeof t?t(this.Fl):t,this}Rl(){return this.Fl}al(){return this.Cl-(Number(this.Il)+Number(this.Pl))}ll(){return this.Xa.length}El(t){return this.Il=t,this}zl(){return this.Il}Vl(t){return this.Pl=t,this}Ol(){return this.Pl}ea(){return this.sa===z&&this.Nl===z&&(this.be!==z||this.Fl!==z)}Gl(t){this.Nl=t}ha(){return this.Fl!==z||super.ha()}ia(){return super.ia()||!this.Nl||this.Nl!==this.Fl}}class rr extends Jh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ca=p(l(0,0)),this.Wl=p(0),this.Ii=p(360),this.Ul=p(100),this.Yl=p(100),this.Hl=p(0),this.$l=p(void 0),this.Xl=l(0,0),this.jl=l(0,0),this.Zl=l(0,0)}Ql(){return this.Ul._()}Jl(){return this.Yl._()}Ia(){return this.ca._()}Kl(){return this.Wl._()}Fi(){return this.Ii._()}ql(){return this.Hl._()}tu(){return this.$l._()}iu(){return this.Xl}su(){return this.jl}eu(){return this.Zl}Ie(t){return this.ca.M(t),this}hu(t){return this.Wl.M(t),this}Ve(t){return this.Ii.M(t),this}ru(t){return this.Yl.M(t),this.Ul.M(t),this}nu(t){return this.Ul.M(t),this}ou(t){return this.Yl.M(t),this}au(t){return this.Hl.M(t<0?0:t),this}lu(t){return this.$l.M(void 0!==t&&t<=0?void 0:t),this}}var nr;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(nr||(nr={}));const or=(t,i)=>"function"==typeof i?i(t):i,ar=(t,i)=>!t||t!==i,lr=(t,i)=>!t||t.getThickness()!==i,ur=(t,i)=>t===rt&&i!==rt,cr=t=>t!==rt&&t.getFillStyle()!==z;class dr extends Yh{constructor(t,i,s,e,h){super(t,i,s,e,h),this.uu=_h.lineStyle,this.engine=t}Ee(t){return this.uu=or(this.uu,t),this}cu(){return this.uu}na(){return ar(this.du,this.uu)}fu(t){return lr(this.du,t)}ea(){return ur(this.du,this.uu)}ha(){return cr(this.uu)}Au(t){this.du=t}}class fr extends dr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Di=l(0,0),this.Ii=l(0,0),this.gu=!1}M({min:t,max:i}){return t.x===this.Di.x&&t.y===this.Di.y&&i.x===this.Ii.x&&i.y===this.Ii.y||(this.gu=!0,this.Di=t,this.Ii=i),this}Pi(){return this.Di}Fi(){return this.Ii}Oe(t){return t.x===this.Di.x&&t.y===this.Di.y||(this.gu=!0,this.Di=t),this}Ve(t){return t.x===this.Ii.x&&t.y===this.Ii.y||(this.gu=!0,this.Ii=t),this}}class Ar extends dr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.pu=void 0,this.mu=!1}}class gr extends dr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.yu=[],this.Ha=Li,this.Xa=new Array,this.$a=0,this.Qa=Dh.NearestX,this.Ja=!1,this.Su=p(void 0),this.Il=!1,this.Pl=!1}vu(t){return this.Su.M(t),this}xu(){return this.Su._()}tl(){return this.Xa}il(){return this.yu}qa(t){return this.Qa=t,this}Gt(){return this.Ja=!0,this.yu.length=0,this.$a=0,this.Xa=[],this.Ha=Li,this}al(){return this.$a-(Number(this.Il)+Number(this.Pl))}ll(){return this.Xa.length}El(t){return this.Il=t,this}zl(){return this.Il}Vl(t){return this.Pl=t,this}Ol(){return this.Pl}}const pr=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==exports.UIDraggingModes.notDraggable?i===exports.UIDraggingModes.draggable?exports.MouseStyles.Move:i===exports.UIDraggingModes.onlyHorizontal?exports.MouseStyles.Horizontal:exports.MouseStyles.Vertical:void 0};class mr{constructor(){this.ji=!0,this.L=new i.Eventer,this.bu=0,this.Ct=(t,i,s)=>{0===this.bu&&this.L.emit("mouseEnter",this,i),this.bu+=1},this.kt=(t,i,s)=>{this.bu-=1,this.bu<1&&(this.L.emit("mouseLeave",this,i),this.bu=0)},this.Tt=(t,i,s)=>{this.L.emit("mouseClick",this,i)},this.Ft=(t,i,s)=>{this.L.emit("mouseDoubleClick",this,i)},this.It=(t,i,s)=>{this.L.emit("mouseDown",this,i)},this.Pt=(t,i,s)=>{this.L.emit("mouseUp",this,i)},this.Dt=(t,i,s)=>{this.L.emit("mouseMove",this,i)},this.Lt=(t,i,s,e)=>{this.L.emit("mouseDragStart",this,i,s)},this.Bt=(t,i,s,e,h,r)=>{this.L.emit("mouseDrag",this,i,s,e,h)},this.Rt=(t,i,s,e,h)=>{this.L.emit("mouseDragStop",this,i,s,e)},this.Et=(t,i,s)=>{this.L.emit("mouseWheel",this,i)},this.zt=(t,i)=>{this.bu+=1,this.L.emit("touchStart",this,i)},this.Vt=(t,i)=>{this.L.emit("touchMove",this,i)},this.Ot=(t,i)=>{this.bu-=1,this.L.emit("touchEnd",this,i)},this.Mu=t=>(t instanceof Yh?t.setMouseEnterEventHandler(this.Ct).setMouseLeaveEventHandler(this.kt).setMouseClickEventHandler(this.Tt).setMouseDoubleClickEventHandler(this.Ft).setMouseDownEventHandler(this.It).setMouseUpEventHandler(this.Pt).setMouseMoveEventHandler(this.Dt).setMouseDragEventHandler(this.Bt).setMouseDragStartEventHandler(this.Lt).setMouseDragStopEventHandler(this.Rt).setMouseWheelEventHandler(this.Et).setTouchStartEventHandler(this.zt).setTouchMoveEventHandler(this.Vt).setTouchEndEventHandler(this.Ot):(t.onMouseEnter(this.Ct),t.onMouseLeave(this.kt),t.onMouseClick(this.Tt),t.onMouseDoubleClick(this.Ft),t.onMouseDown(this.It),t.onMouseUp(this.Pt),t.onMouseMove(this.Dt),t.onMouseDrag(this.Bt),t.onMouseDragStart(this.Lt),t.onMouseDragStop(this.Rt),t.onMouseWheel(this.Et),t.onTouchStart(this.zt),t.onTouchMove(this.Vt),t.onTouchEnd(this.Ot)),t)}onMouseEnter(t){return this.L.on("mouseEnter",t)}onMouseLeave(t){return this.L.on("mouseLeave",t)}onMouseClick(t){return this.L.on("mouseClick",t)}onMouseDoubleClick(t){return this.L.on("mouseDoubleClick",t)}onMouseDown(t){return this.L.on("mouseDown",t)}onMouseUp(t){return this.L.on("mouseUp",t)}onMouseMove(t){return this.L.on("mouseMove",t)}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}offMouseEnter(t){return this.L.off(t,"mouseEnter")}offMouseLeave(t){return this.L.off(t,"mouseLeave")}offMouseClick(t){return this.L.off(t,"mouseClick")}offMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClick")}offMouseDown(t){return this.L.off(t,"mouseDown")}offMouseUp(t){return this.L.off(t,"mouseUp")}offMouseMove(t){return this.L.off(t,"mouseMove")}offMouseDragStart(t){return this.L.off(t,"mouseDragStart")}offMouseDrag(t){return this.L.off(t,"mouseDrag")}offMouseDragStop(t){return this.L.off(t,"mouseDragStop")}offMouseWheel(t){return this.L.off(t,"mouseWheel")}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}getIsUnderMouse(){return this.bu>0}setVisible(t){const i=this.ji!==t;return this.ji=t,i&&this.L.emit("visibleStateChanged",this,this.ji),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}const yr=(t,i,s)=>{const e=t.getDraggingMode();if(e!==exports.UIDraggingModes.notDraggable){const h=t.scale.mi(t.getPosition(),{x:e!==exports.UIDraggingModes.onlyVertical?i.x:0,y:e!==exports.UIDraggingModes.onlyHorizontal?i.y:0}),r=t.scale,n=t.getSize(),o=t.getOrigin(),a=r.mi({x:r.x.getInnerStart(),y:r.y.getInnerStart()},os({x:(1+o.x)/2,y:(1+o.y)/2},n)),l=r.mi({x:r.x.getInnerEnd(),y:r.y.getInnerEnd()},os({x:(o.x-1)/2,y:(o.y-1)/2},n)),u={x:Math.min(Math.max(h.x,a.x),l.x),y:Math.min(Math.max(h.y,a.y),l.y)};t.setPosition(u),jt(s)}},Sr=(t,i,s,e,h)=>{yr(t,h,i)},vr=(t,i,s,e,h)=>{yr(t,e,h)};class xr extends mr{constructor(t,i,s,e,h){super(),this.position=l(50,50),this.origin=l(0,0),this.size=l(0,0),this.Xi=!1,this._u=void 0,this.wu=void 0,this.Cu=pr,this.ku=void 0,this.Lo=!0,this.Tu=()=>{const t="function"==typeof this.Cu?this.Cu(this):this.Cu;t&&(this.wu=this.Ts.cs.Ur(t))},this.Fu=()=>{this.Ts.cs.Yr(this.wu)},this.jt=m(0,0,0,0),this.Ts=t,this.renderingScale=i,this.scale=s,this.Oo=e,this.ts=h,this.Ts.vs(),this.onMouseEnter(this.Tu),this.onMouseLeave(this.Fu),this.onMouseDrag(Sr);const r=Hs(new Xs(Ct,vr,Ct));this.onTouchStart(r.onTouchStart),this.onTouchMove(r.onTouchMove),this.onTouchEnd(r.onTouchEnd),this.ts=h}setMouseInteractions(t){return this.Iu().forEach((i=>i.setMouseInteractions(t))),this.Lo=t,this}getMouseInteractions(){return this.Lo}setEffect(t){return this.hs=this.hs||this.Ts.cs.hs.rs(this,{Pu:{shapes:this.Iu()}}),this.hs.Pu.Ss(t),this}getEffect(){return!!this.hs&&this.hs.Pu.xs()}setAutoDispose(t){return this.ku=t,this.Ts.vs(),this}getAutoDispose(){return this.ku}getSize(t=exports.UISpace.Everything){return t===exports.UISpace.Everything?l(this.size.x+(this.jt.left+this.jt.right),this.size.y+(this.jt.bottom+this.jt.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.jt="object"==typeof t?S(this.jt,t):{left:t,top:t,right:t,bottom:t},this.Ts.vs(),this}getMargin(){return this.jt}Fe(){if(this.ku){const t=this.size,i=this.renderingScale.ai(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.ku.type&&s.x>=this.ku.maxWidth||"max-height"===this.ku.type&&s.y>=this.ku.maxHeight)&&this.dispose()}return this}Ds(){return this}dispose(){return this.Xi||(this.Ts.vs(),this.Xi=!0,this.Oo(this),this.L.emit("dispose",this),this.Iu().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.Iu().forEach((i=>i.setVisible(t))),this.Ts.vs(),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setPosition(t){return this.position=t,this.Ts.vs(),this}getPosition(t=this.origin,i=exports.UISpace.Everything){const s=this.getSize(exports.UISpace.Everything),e=this.scale.mi(this.position,os({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===exports.UISpace.Everything)return this.scale.mi(e,os({x:(t.x+1)/2,y:(t.y+1)/2},s));const h=this.scale.mi(e,{x:this.jt.left,y:this.jt.bottom}),r=this.getSize(exports.UISpace.Content);return this.scale.mi(h,os({x:(t.x+1)/2,y:(t.y+1)/2},r))}setOrigin(t){return this.origin=t,this.Ts.vs(),this}getOrigin(){return this.origin}setDraggingMode(t=exports.UIDraggingModes.notDraggable){return this._u=t,this.Ts.vs(),this}getDraggingMode(){return void 0!==this._u?this._u:exports.UIDraggingModes.notDraggable}setMouseStyle(t){return this.Cu=t,this}getMouseStyle(){return this.Cu}}class br extends xr{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ya=m(),this.Du=0,this.Ts=t,this.Bu=e,this.backgroundElement=new this.Bu(this.Ts,this.renderingScale,this.scale,Ct,r),this.Mu(this.backgroundElement)}Iu(){return this.backgroundElement.Iu()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Fe(){return super.Fe(),this.Xi||this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,exports.UISpace.PaddedBackground)).Fe(),this}Ds(){const t=this.getSize(exports.UISpace.PaddedContent);return this.backgroundElement.Lu(t).Ds(),super.Ds()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.ya="object"==typeof t?S(this.ya,t):{left:t,top:t,right:t,bottom:t},this.Ts.vs(),this}getPadding(){return this.ya}getSize(t=exports.UISpace.Everything){let i=super.getSize(t);return t>=exports.UISpace.PaddedContent&&(i=l(i.x+this.ya.left+this.ya.right,i.y+this.ya.bottom+this.ya.top)),t>=exports.UISpace.PaddedBackground&&(i=l(i.x+this.backgroundElement.Ru()+this.backgroundElement.Eu(),i.y+this.backgroundElement.zu()+this.backgroundElement.Vu())),i}getPosition(t=this.origin,i=exports.UISpace.Everything){if(i===exports.UISpace.Everything)return super.getPosition(t,i);const s=super.getPosition(l(-1,-1),exports.UISpace.Everything),e=this.getMargin(),h=this.scale.mi(s,{x:e.left,y:e.bottom});if(i===exports.UISpace.PaddedBackground){const i=this.getSize(exports.UISpace.PaddedBackground);return this.scale.mi(h,os({x:(t.x+1)/2,y:(t.y+1)/2},i))}const r=this.scale.mi(h,{x:this.backgroundElement.Ru(),y:this.backgroundElement.zu()});if(i===exports.UISpace.PaddedContent){const i=this.getSize(exports.UISpace.PaddedContent);return this.scale.mi(r,os({x:(t.x+1)/2,y:(t.y+1)/2},i))}const n=this.getPadding(),o=this.scale.mi(r,{x:n.left,y:n.bottom}),a=this.getSize(exports.UISpace.Content);return this.scale.mi(o,os({x:(t.x+1)/2,y:(t.y+1)/2},a))}setMouseInteractions(t){return super.setMouseInteractions(t),this.backgroundElement.setMouseInteractions(t),this}getHighlight(){return this.Du}setHighlight(t){return this.Du=Si(t),this.backgroundElement.setHighlight(t),this.L.emit("highlight",this,t),this}}const Mr=t=>"setBackground"in t;class _r extends mr{constructor(t,i,s,e,h,r,n,o,a,l,u){super(),this.S=0,this.Ou=1,this.Nu=!0,this.Gu=new eh,this.Wu=!0,this.Xi=!1,this.axisScale=e,this.renderingScale=h,this.Uu=n,this.Yu=o,this.Hu=a,this.Oo=l,this.$u=i,this.Xu=s,this.ju=this.Mu(this.$u.ze(this.renderingScale)),this.ts=u,this.Zu=this.Mu(this.Hu.Qu(this.Xu,this.renderingScale,r,Ct,this.ts,!1).setOrigin($t(this.Yu)).setDirection(this.Yu)),this.axis=t,this.setMouseInteractions(!1),"major"===this.Zu.Ju?this.ju.Ee(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.Zu.Ju?this.ju.Ee(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.Zu.Ju&&this.ju.Ee(u.cursorGridStrokeStyleX)}setValue(t){return this.S=t,this.Xu.vs(),this.L.emit("valueChange",this,this.S),this}getValue(){return this.S}setTextFormatter(t){return this.Ku=t,this.Xu.vs(),this}setTickLength(t){return this.Zu.setPointerLength(t),this.$u.vs(),this}getTickLength(){return this.Zu.getPointerLength()}setTickLabelPadding(t){return this.Zu.setTickLabelPadding(t),this.$u.vs(),this}setTickLabelRotation(t){return this.Zu.setTextRotation(t),this.$u.vs(),this}getTickLabelRotation(){return this.Zu.getTextRotation()}getTickLabelPadding(){return this.Zu.getTickLabelPadding()}setGridStrokeLength(t){return this.Ou=t,this.$u.vs(),this}getGridStrokeLength(){return this.Ou}setGridStrokeStyle(t){return this.ju.Ee(t),this.$u.vs(),this}getGridStrokeStyle(){return this.ju.cu()}dispose(){return this.Xi||(this.Xi=!0,this.ju.dispose(),this.Zu.dispose(),this.Oo(this),this.$u.cs.vs(),this.L.emit("dispose",this)),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setMarkerVisible(t){return this.Nu=t,this.Xu.vs(),this}getMarkerVisible(){return this.Nu}setMarker(t){return t(this.Zu),this.Xu.vs(),this}getMarker(){return this.Zu}setMouseInteractions(t){return this.Zu.setMouseInteractions(t),this.ju.setMouseInteractions(t),this}getMouseInteractions(){return this.ju.getMouseInteractions()}setAllocatesAxisSpace(t){return this.Wu=t,this.Xu.vs(),this}getAllocatesAxisSpace(){return this.Wu}isInScale(){return Ui(this.S,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}}class wr extends _r{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,u,a,l),this.qu=!1,this.Oo=a,this.$u=i,this.Xu=s}dispose(){return this.qu=!1,super.dispose()}update(){return this}plot(t,i,s,e,h){if(this.isInScale()&&this.getVisible()&&t){this.qu=!1;const t=ut(this.S,this.axisScale,this.Uu.getWidth(this.renderingScale));this.ju.setVisible(!0).Oe(this.Uu.toPoint(t,i)).Ve(this.Uu.toPoint(t,i-(e+s*this.Ou))),this.Nu?(this.Ku&&this.Zu.setText(this.Ku(this.S,this)),this.Zu.setVisible(!0).setPosition(this.Uu.toPoint(t,h))):this.Zu.setVisible(!1)}else this.ju.setVisible(!1),this.Zu.setVisible(!1);return this.Zu.Ds().Fe(),this}tc(){const t=this.Zu.Ds().getSize();return this.Uu.getHeight(t)}}const Cr=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),kr=(t,i)=>(ai(t.setButtonSize(i.uiButtonSize),i,!1,{fill:i.uiButtonFillStyle}),t),Tr=(t,i,s)=>{s&&Mr(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},Fr={uiElement:void 0,stylers:r.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},Ir={background:void 0,setBackground(t){return{...this,background:t}}},Pr={Qu(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return Tr(n,h,r),n}},Dr={Qu(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return Tr(n,h,r),n}};class Br extends xr{constructor(){super(...arguments),this.ic=!0}Fe(){return super.Fe(),this}setMouseInteractions(t){return this.ic=t,this}getMouseInteractions(){return this.ic}Iu(){return[]}}class Lr extends Br{onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}Lu(t){return this.size=t,this}Ru(){return 0}Eu(){return 0}Vu(){return 0}zu(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return z}setStrokeStyle(){return this}getStrokeStyle(){return rt}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class Rr extends xr{constructor(){super(...arguments),this.L=new i.Eventer,this.Du=0}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}getHighlight(){return this.Du}setHighlight(t){return this.Du=t,this.Iu().forEach((i=>i.ds(t))),this.L.emit("highlight",this,t),this.Ts.vs(),this}}class Er extends Rr{}class zr extends Er{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ts=t,this.Ga=this.Ts.sc(this.renderingScale,nr.Simple).setVisible(!1).ke(z).Ce(rt),this.Mu(this.Ga)}hc(){const t=this.rc();if(t.length>2){const i=ji(t),s=l(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const e=t.map((t=>{const e=rs(t,hs(i.min,-1));return this.scale.mi(this.position,rs(e,os(hs(rs(this.origin,l(1,1)),-.5),s)))})).map((t=>ct(t,this.scale,this.renderingScale)));this.Ga.Sl(e).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.Ga&&this.Ga.setVisible(!1),this.setContentSize(l(0,0))}Fe(){return super.Fe(),this.Xi||this.hc(),this}Ds(){return this.hc(),super.Ds()}setVisible(t){return super.setVisible(t),this.Ga.setVisible(t),this}}const Vr=(t,i,s)=>t*(1-s)+i*s,Or=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),u=Vr(s.value,h.value,r),c=Vr(i.value,e.value,o);return Vr(c,u,l)},Nr={warm:t=>i=>w(60/(t-1)*i,.8,.8),cold:t=>i=>w(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>w(360/t*i,.8,.8),reverseSpectrum:t=>i=>w(360/t*(t-i),.8,.8),flatUI:t=>i=>w(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return w(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return w(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return w(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return w(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return w(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>w(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return w(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return w(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),w(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return w(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let l=0;if(o!==a){const t=o-a;switch(o){case h:l=(r-n)/t+(r<n?6:0);break;case r:l=(n-h)/t+2;break;case n:l=(h-r)/t+4;break;default:l=0}return l=l/6*360,w(l,.8,e)}return w(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>w(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>Gr([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>Gr([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>Gr([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>Gr([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>Gr([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>Gr([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},Gr=(t,i,s)=>{const e=Ur(i,s),[h,r]=Yr(e,t),n=Wr(t[h]),o=Wr(t[r]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:Vr(n.h,o.h,a),s:Vr(n.s,o.s,a),v:Vr(n.v,o.v,a)};return w(l.h,l.s,l.v)},Wr=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,l=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(_(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},Ur=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},Yr=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class Hr{constructor(){this.type="simple"}}const $r=new Hr;class Xr{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=_("#000"),this.specularColor=_("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const jr=new Xr,Zr={Simple:Hr,Phong:Xr};var Qr;exports.ImageFitMode=void 0,(Qr=exports.ImageFitMode||(exports.ImageFitMode={}))[Qr.Fill=0]="Fill",Qr[Qr.Fit=1]="Fit",Qr[Qr.Stretch=2]="Stretch",Qr[Qr.Center=3]="Center",Qr[Qr.Tile=4]="Tile";const Jr=t.Record({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:M(0,0,0,0),sourceMissingColor:M(0,0,0,0),fitMode:exports.ImageFitMode.Fill});class Kr extends Jr{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return b(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return b(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const qr=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),tn={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},sn=t.Record({type:"linestyle",lineType:"dashed",pattern:tn.DashedEqual,fillStyle:new G({color:M(255,255,255)}),thickness:1,patternScale:3});class en extends sn{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}O(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const hn=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),rn=t.Record({type:"icon",width:void 0,height:void 0,nc:void 0,oc:Ct,ac:Ct});class nn extends rn{constructor(t,i,s,e){super({...e,nc:t,oc:i,ac:s})}dispose(){return this.ac(this),this}setWidth(t){const i=this.set("width",t);return this.oc(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.oc(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.oc(s),s}ai(){if(!this.nc)return{x:0,y:0};const t=this.nc.width,i=this.nc.height;if(0===t||0===i)return{x:0,y:0};const s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const on=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),an=t.Record({type:"glow",color:M(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class ln extends an{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}class un{constructor(t){this.lc=0,this.uc=0,this.cc=0,this.dc=!1,this.fc=!0,this.Ac=!1,this.gc={warningDisplayed:!1,expandEvents:[]},this.L=new i.Eventer,this.fc=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,void 0!==(null==t?void 0:t.dataPattern)&&(this.mc={userSpecified:null===t.dataPattern?void 0:t.dataPattern}),this.yc=void 0!==(null==t?void 0:t.lookupValues)&&t.lookupValues,this.Sc=void 0!==(null==t?void 0:t.colors)&&t.colors,this.vc=void 0!==(null==t?void 0:t.ids)&&t.ids,this.xc=void 0!==(null==t?void 0:t.sizes)&&t.sizes,this.bc=void 0!==(null==t?void 0:t.rotations)&&t.rotations,this.Mc=(null==t?void 0:t.dataStorage)?t.dataStorage:Float64Array,this._c=!1!==(null==t?void 0:t.allowInputModification)}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,i){return this.appendSamples({xValues:t,yValues:i}),this}appendJSON(t,i={x:"x",y:"y"}){const s=t.length,e=i.x,h=i.y,r=i.lookupValue,n=i.size,o=i.rotation,a=i.color,l=i.id;let u,c,d,f,A,g,p;if(e){u=new this.Mc(s);for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[e]}}if(h){c=new this.Mc(s);for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[h]}}if(r){d=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];d[i]=s[r]}}if(a){f=[];for(let i=0;i<s;i+=1){const s=t[i];f[i]=s[a]}}if(l){A=new Uint32Array(s);for(let i=0;i<s;i+=1){const s=t[i];A[i]=s[l]}}if(n){g=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];g[i]=s[n]}}if(o){p=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];p[i]=s[o]}}return this.appendSamples({xValues:u,yValues:c,ids:A,colors:f,lookupValues:d,sizes:g,rotations:p,start:i.start,step:i.step}),this}appendSample(t){const{samplesCacheX:i,samplesCacheY:s,samplesCacheColors:e,samplesCacheIDs:h,samplesCacheLookup:r,samplesCacheSize:n,samplesCacheRotation:o,maxSampleCount:a,dataPattern:l}=this.wc({appendCount:1}),u=this.Cc(),c=void 0!==t.step?t.step:1,d=void 0!==t.x?t.x:u?u.x+c:0,f=void 0!==t.y?t.y:u?u.y+c:0;if(l&&this.fc&&this.kc&&this.Tc&&!this.Fc(l,d,f)&&!this.Ac)return this.Ic(this.kc,this.Tc,new this.Mc([d]),new this.Mc([f]),void 0!==t.lookupValue?new Float32Array([t.lookupValue]):void 0,void 0!==t.color?this.Pc((t.color,[t.color])):void 0,void 0!==t.id?new Uint32Array([t.id]):void 0,void 0!==t.size?new Float32Array([t.size]):void 0,void 0!==t.rotation?new Float32Array([t.rotation]):void 0,l),this;if(i[this.lc]=d,s[this.lc]=f,void 0!==t.lookupValue&&r&&(r[this.lc]=t.lookupValue),void 0!==t.color&&e){const i=this.Pc((t.color,[t.color]));void 0!==i&&(e[this.lc]=i[0])}return void 0!==t.id&&h&&(h[this.lc]=t.id),void 0!==t.size&&n&&(n[this.lc]=t.size),void 0!==t.rotation&&o&&(o[this.lc]=t.rotation),this.Dc(this.lc,this.lc),this.lc+=1,this.lc>a-1&&(this.lc=0,this.dc=!0),this.uc=Math.min(this.uc+1,a),this.cc+=1,this}appendSamples(t){const{lookupValues:i,colors:s,ids:e,sizes:h,rotations:r,start:n,step:o}=t;let a=t.offset,l=t.count;const u=t.xValues||t.yValues;if(!u)return this;const c=u.length;if(a=void 0!==a?a:0,l=void 0!==l?l:c-a,l<=0)return this;const d=void 0!==t.offsetLookupValues?t.offsetLookupValues:a,f=void 0!==t.offsetColors?t.offsetColors:a,A=void 0!==t.offsetIds?t.offsetIds:a,g=void 0!==t.offsetSizes?t.offsetSizes:a,p=void 0!==t.offsetRotations?t.offsetRotations:a,[m,y]=this.Bc(l,t.xValues,"x",n,o,a),[S,v]=this.Bc(l,t.yValues,"y",n,o,a),x=this.Pc(s),{samplesCacheX:b,samplesCacheY:M,samplesCacheLookup:_,samplesCacheColors:w,samplesCacheIDs:C,samplesCacheSize:k,samplesCacheRotation:T,maxSampleCount:F,dataPattern:I,incomingDataReplacedCache:P}=this.wc({appendCount:l,...0===y&&0===v&&0===a&&0===d&&0===f&&0===A&&0===g&&0===p?{incomingDataX:m,incomingDataY:S,incomingDataLookup:i,incomingDataIDs:e,incomingDataColors:x,incomingDataSize:h,incomingDataRotation:r}:{}});if(!P&&I&&this.fc&&this.kc&&this.Tc){const t=m[y],s=S[v];if(!this.Fc(I,t,s)&&!this.Ac)return this.Ic(this.kc,this.Tc,pn(m,y,y+l),pn(S,v,v+l),pn(i,d,d+l),pn(x,f,f+l),pn(e,A,A+l),pn(h,g,g+l),pn(r,p,p+l),I),this}const D=F-this.lc,B=Math.min(l,D);if(B>0&&(P||(An(b,m,y,B,this.lc),An(M,S,v,B,this.lc),i&&_&&An(_,i,d,B,this.lc),e&&C&&An(C,e,A,B,this.lc),x&&w&&An(w,x,f,B,this.lc),h&&k&&An(k,h,g,B,this.lc),r&&T&&An(T,r,p,B,this.lc)),this.Dc(this.lc,this.lc+B-1),this.lc+=B,this.lc>F-1&&(this.lc=0,this.dc=!0)),this.uc=Math.min(this.uc+B,F),this.cc+=B,this.Lc(),l-B>0){const t={xValues:m?pn(m,y+B,void 0):void 0,yValues:S?pn(S,v+B,void 0):void 0,lookupValues:i?pn(i,d+B,void 0):void 0,ids:e?pn(e,A+B,void 0):void 0,colors:x?pn(x,f+B,void 0):void 0,sizes:h?pn(h,g+B,void 0):void 0,rotations:r?pn(r,p+B,void 0):void 0};this.appendSamples(t)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const i=this.kc||this.Tc;if(!i)return this;const s=i.length;if(void 0!==t.x&&(this.kc=this.kc||new this.Mc(s),this.kc.fill(t.x)),void 0!==t.y&&(this.Tc=this.Tc||new this.Mc(s),this.Tc.fill(t.y)),void 0!==t.lookupValue&&(this.Rc=this.Rc||new Float32Array(s),this.Rc.fill(t.lookupValue)),void 0!==t.color){const i=this.Pc([t.color]);i&&(this.Ec=this.Ec||new Uint32Array(s),this.Ec.fill(i[0]))}return void 0!==t.size&&(this.zc=this.zc||new Float32Array(s),this.zc.fill(t.size)),void 0!==t.rotation&&(this.Vc=this.Vc||new Float32Array(s),this.Vc.fill(t.rotation)),this.L.emit("cleared"),this}alterSamples(t,i){const{xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a}=i;let l=i.offset,u=i.count;const c=s||e||h||r||n||o||a;if(!c)return this;const d=c.length;if(l=void 0!==l?l:0,u=void 0!==u?u:d-l,u<=0)return this;const f=void 0!==i.offsetLookupValues?i.offsetLookupValues:l,A=void 0!==i.offsetColors?i.offsetColors:l,g=void 0!==i.offsetIds?i.offsetIds:l,p=void 0!==i.offsetSizes?i.offsetSizes:l,m=void 0!==i.offsetRotations?i.offsetRotations:l,y=this.Pc(r),S=this.cc-1,v=void 0!==this.Oc?Math.max(this.cc-this.Oc,0):0,x=t+u-1,b=Math.max(t,v),M=Math.min(x,S),_=M-b+1;if(this.cc>0&&_>0){const{samplesCacheX:i,samplesCacheY:r,samplesCacheColors:u,samplesCacheIDs:c,samplesCacheLookup:d,samplesCacheSize:S,samplesCacheRotation:x}=this.wc({appendCount:0}),w=i.length;if(void 0!==this.Oc&&this.dc&&this.cc%this.Oc!=0){const v=this.cc-this.cc%this.Oc,_=this.cc-1,C=this.cc-this.uc,k=v-1,T=Math.max(b,C),F=Math.min(M,k)-T+1;if(F>0){const v=T-t,b=cn(T,this.cc,w,this.lc);s&&An(i,s,l+v,F,b),e&&An(r,e,l+v,F,b),h&&d&&An(d,h,f+v,F,b),n&&c&&An(c,n,g+v,F,b),y&&u&&An(u,y,A+v,F,b),o&&S&&An(S,o,p+v,F,b),a&&x&&An(x,a,m+v,F,b)}const I=Math.max(b,v),P=Math.min(M,_)-I+1;if(P>0){const v=I-t,b=cn(I,this.cc,w,this.lc);s&&An(i,s,l+v,P,b),e&&An(r,e,l+v,P,b),h&&d&&An(d,h,f+v,P,b),n&&c&&An(c,n,g+v,P,b),y&&u&&An(u,y,A+v,P,b),o&&S&&An(S,o,p+v,P,b),a&&x&&An(x,a,m+v,P,b)}}else{const t=b-v;s&&An(i,s,l,_,t),e&&An(r,e,l,_,t),h&&d&&An(d,h,f,_,t),n&&c&&An(c,n,g,_,t),y&&u&&An(u,y,A,_,t),o&&S&&An(S,o,p,_,t),a&&x&&An(x,a,m,_,t)}this.L.emit("cleared")}const w=t+u-1-S;if(w>0){const i=M+1-t;this.appendSamples({xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l+i,offsetLookupValues:f+i,offsetColors:A+i,offsetIds:g+i,offsetSizes:p+i,offsetRotations:m+i,count:w})}return this}alterSamplesByID(t,i){if(!this.vc)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const s=t.length,e=this.Nc;if(s<=0||!e)return this;const h=(("object"==typeof i.color?this.Pc([i.color]):"number"==typeof i.color?[i.color]:[])||[])[0],r=Array.isArray(i.xValues)?new this.Mc(i.xValues):i.xValues,n=Array.isArray(i.yValues)?new this.Mc(i.yValues):i.yValues,o=Array.isArray(i.yValues)?new Float32Array(i.yValues):i.yValues,a=this.Pc(i.colors),l=Array.isArray(i.sizes)?new Float32Array(i.sizes):i.sizes,u=Array.isArray(i.rotations)?new Float32Array(i.rotations):i.rotations,c=e.length,d=this.uc,f=this.cc-1,A=Math.max(f-d+1,0);for(let d=0;d<s;d+=1){const s=t[d],g=fn(s,A,f,(t=>e[cn(t,this.cc,c,this.lc)])),p=cn(g,this.cc,c,this.lc);e[p]===s&&(void 0!==i.x&&this.kc&&(this.kc[p]=i.x),void 0!==i.y&&this.Tc&&(this.Tc[p]=i.y),void 0!==i.lookupValue&&this.Rc&&(this.Rc[p]=i.lookupValue),void 0!==i.size&&this.zc&&(this.zc[p]=i.size),void 0!==i.rotation&&this.Vc&&(this.Vc[p]=i.rotation),void 0!==h&&this.Ec&&(this.Ec[p]=h),r&&this.kc&&(this.kc[p]=r[d]),n&&this.Tc&&(this.Tc[p]=n[d]),o&&this.Rc&&(this.Rc[p]=o[d]),a&&this.Ec&&(this.Ec[p]=a[d]),l&&this.zc&&(this.zc[p]=l[d]),u&&this.Vc&&(this.Vc[p]=u[d]))}return this.L.emit("cleared"),this}clear(){return this.lc=0,this.uc=0,this.cc=0,this.dc=!1,this.L.emit("cleared"),this}getSampleCount(){return this.uc}getNextSampleIndex(){return this.cc}setMaxSampleCount(t){if("object"==typeof t){this.Gc&&this.offMaxSampleCountExceeded(this.Gc);const i=t.max;this.Gc=this.onMaxSampleCountExceeded(((t,s,e,h)=>{if(void 0!==i&&e>=i)return;let r=2*e;void 0!==i&&(r=Math.min(r,i)),this.setMaxSampleCount(r)})),void 0===this.Oc&&this.setMaxSampleCount(1e5)}else if("number"==typeof t){const i=t;if(void 0!==this.Oc&&this.Oc>i)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.kc||!this.Tc)return this.Oc=i,this;if(i===this.Oc)return this;if(this.dc&&0!==this.lc)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Oc=i,this.uc<i?(this.lc=this.uc,this.dc=!1):(this.lc=0,this.dc=!0);const s=new this.Mc(this.Oc);s.set(this.kc);const e=new this.Mc(this.Oc);if(e.set(this.Tc),this.kc=s,this.Tc=e,this.yc){const t=new Float32Array(this.Oc);this.Rc&&t.set(this.Rc),this.Rc=t}if(this.vc){const t=new Uint32Array(this.Oc);this.Nc&&t.set(this.Nc),this.Nc=t}if(this.Sc){const t=new Uint32Array(this.Oc);this.Ec&&t.set(this.Ec),this.Ec=t}if(this.xc){const t=new Float32Array(this.Oc);this.zc&&t.set(this.zc),this.zc=t}if(this.bc){const t=new Float32Array(this.Oc);this.Vc&&t.set(this.Vc),this.Vc=t}}return this}getMaxSampleCount(){return this.Oc}readBack(t){if(!this.kc||!this.Tc)return{xValues:new this.Mc,yValues:new this.Mc};const i=this.kc.length;let s=[];if(null==t?void 0:t.onlyInRange){const i=this.Wc();if(!i)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const e=Math.min(t.onlyInRange.start,t.onlyInRange.end),h=Math.max(t.onlyInRange.start,t.onlyInRange.end),r=dn(e,h,this.kc,this.cc,this.uc,this.lc,i,0);if(!r)return{xValues:new this.Mc,yValues:new this.Mc};s=r.dataRanges}else if(void 0!==this.Oc&&this.dc&&this.cc%this.Oc!=0){const t=this.lc,e=i-t,h=this.lc-1;s.push({offset:t,count:e}),s.push({offset:0,count:h+1})}else s.push({offset:0,count:this.uc});const e=s.reduce(((t,i)=>t+i.count),0),h=new this.Mc(e),r=new this.Mc(e),n=this.Sc?new Uint32Array(e):void 0,o=this.yc?new Float32Array(e):void 0,a=this.vc?new Uint32Array(e):void 0,l=this.xc?new Float32Array(e):void 0,u=this.bc?new Float32Array(e):void 0;let c=0;for(const t of s)h.set(this.kc.subarray(t.offset,t.offset+t.count),c),r.set(this.Tc.subarray(t.offset,t.offset+t.count),c),this.Sc&&n&&this.Ec&&n.set(this.Ec.subarray(t.offset,t.offset+t.count),c),this.yc&&o&&this.Rc&&o.set(this.Rc.subarray(t.offset,t.offset+t.count),c),this.vc&&a&&this.Nc&&a.set(this.Nc.subarray(t.offset,t.offset+t.count),c),this.xc&&l&&this.zc&&l.set(this.zc.subarray(t.offset,t.offset+t.count),c),this.bc&&u&&this.Vc&&u.set(this.Vc.subarray(t.offset,t.offset+t.count),c),c+=t.count;return{xValues:h,yValues:r,lookupValues:o,colors:n,ids:a,sizes:l,rotations:u}}onMaxSampleCountExceeded(t){return this.L.on("maxSampleCountExceeded",t)}offMaxSampleCountExceeded(t){return this.L.off(t)}Bc(t,i,s,e,h,r){if(void 0===i){const i=this.Cc();h=void 0!==h?h:1,e=void 0!==e?e:i?i[s]+h:0;const r=new this.Mc(t);for(let i=0;i<t;i+=1)r[i]=e+i*h;return[r,0]}return[i,r]}Pc(t){if(!t||0===t.length)return;const i=t[0];if(b(i)){const i=t.length,s=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e],h=255*i.a<<24|255*i.b<<16|255*i.g<<8|255*i.r;s[e]=h}return s}return t}Uc(){return{min:0,max:void 0!==this.Oc&&this.dc?this.Oc-1:this.uc-1}}Yc(t){t=Math.min(t,this.uc),this.cc-=t,this.uc-=t,this.lc-=t,this.lc<0&&void 0!==this.Oc&&(this.lc+=this.Oc)}Ic(t,i,s,e,h,r,n,o,a,l){var u;const c=s.length,d=s[0],f=s[c-1],A=e[c-1];if(this.Fc(l,f,A)){const t=(null===(u=this.Cc())||void 0===u?void 0:u.x)||0;let i=0;for(let e=0;e<c;e+=1)if(s[e]>t){i=e;break}const l={xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:i};this.Ac=!0,this.appendSamples(l),this.Ac=!1}else{const l=t.length,u=this.uc,f=this.cc-1,A=Math.max(f-u+1,0),g=fn(d,A,f,(i=>t[cn(i,this.cc,l,this.lc)])),p=g-1,m=g+1,y=t[cn(g,this.cc,l,this.lc)],S=m<=this.cc-1?t[cn(m,this.cc,l,this.lc)]:void 0,v=void 0!==S&&S<d?m+1:y<d?g+1:p+1,x=f-v+1,b=new this.Mc(x),M=new this.Mc(x),_=this.yc?new Float32Array(x):void 0,w=this.Sc?new Uint32Array(x):void 0,C=this.vc?new Uint32Array(x):void 0,k=this.xc?new Float32Array(x):void 0,T=this.bc?new Float32Array(x):void 0;let F=0;for(let s=v;s<=f;s+=1){const e=cn(s,this.cc,l,this.lc);b[F]=t[e],M[F]=i[e],_&&this.Rc&&(_[F]=this.Rc[e]),w&&this.Ec&&(w[F]=this.Ec[e]),C&&this.Nc&&(C[F]=this.Nc[e]),k&&this.zc&&(k[F]=this.zc[e]),T&&this.Vc&&(T[F]=this.Vc[e]),F+=1}this.Yc(x);const I=new this.Mc(c+x);I.set(s),I.set(b,c);const P=new this.Mc(c+x);let D,B,L,R,E;P.set(e),P.set(M,c),h&&_&&(D=new Float32Array(c+x),D.set(h),D.set(_,c)),r&&w&&(B=new Uint32Array(c+x),B.set(r),B.set(w,c)),n&&C&&(L=new Uint32Array(c+x),L.set(n),L.set(C,c)),o&&k&&(R=new Float32Array(c+x),R.set(o),R.set(k,c)),a&&T&&(E=new Float32Array(c+x),E.set(a),E.set(T,c)),this.Ac=!0,this.appendSamples({xValues:I,yValues:P,lookupValues:D,colors:B,ids:L,sizes:R,rotations:E}),this.Ac=!1,this.L.emit("cleared")}}Wc(){return this.Lc()}Lc(){let t;if(this.mc&&"userSpecified"in this.mc)t=this.mc.userSpecified;else if(this.mc&&"autoDetectResult"in this.mc)t=this.mc.autoDetectResult;else if(this.kc&&this.Tc&&this.cc>0){const i=void 0!==this.Oc&&this.dc?this.lc:0,s=this.uc-1,e=void 0!==this.Oc&&this.dc?0:void 0,h=void 0!==this.Oc&&this.dc?this.lc-1:void 0,[r,n]=void 0!==e&&void 0!==h&&Math.abs(h-e)>Math.abs(s-i)?[e,h]:[i,s];if(1+n-r>=2){let i,s,e=this.kc[r],h=this.Tc[r];for(let t=r+1;t<=n;t+=1){if(!1!==i){const s=this.kc[t],h=Math.sign(s-e);0!==h&&i&&i.direction!==h?i=!1:0===h||i||(i={direction:h}),e=s}if(!1!==s){const i=this.Tc[t],e=Math.sign(i-h);0!==e&&s&&s.direction!==e?s=!1:0===e||s||(s={direction:e}),h=i}}t=i&&i.direction>0?Ph.ProgressiveX:i&&i.direction<0?Ph.RegressiveX:s&&s.direction>0?Ph.ProgressiveY:s&&s.direction<0?Ph.RegressiveY:void 0,this.mc={autoDetectResult:t},t&&xt.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${t}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nAdd { dataPattern: '${t}'} } to your application when creating series or DataSetXY to get clear this warning.`)}}if(t&&"ProgressiveX"!==t)throw new Error("LightningChart JS New XY rework beta features do not yet support other data patterns than ProgressiveX. This will be introduced in near future.");return t}Fc(t,i,s){const e=this.Cc();return!e||("ProgressiveX"===t?i>e.x:"RegressiveX"===t?i<e.x:"ProgressiveY"===t?s>e.y:"RegressiveY"!==t||s<e.y)}wc(t){if(t.incomingDataX&&t.incomingDataY&&0===this.uc&&!this.kc&&!this.Tc&&(void 0===this.Oc||this.Oc===t.appendCount)&&this._c)return this.kc=gn(t.incomingDataX,this.Mc)||new this.Mc,this.Tc=gn(t.incomingDataY,this.Mc)||new this.Mc,this.Rc=this.yc?gn(t.incomingDataLookup,Float32Array):void 0,this.Nc=this.vc?gn(t.incomingDataIDs,Uint32Array):void 0,this.Ec=this.Sc?gn(t.incomingDataColors,Uint32Array):void 0,this.zc=this.xc?gn(t.incomingDataSize,Float32Array):void 0,this.Vc=this.bc?gn(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.Lc(),samplesCacheX:this.kc,samplesCacheY:this.Tc,samplesCacheLookup:this.Rc,samplesCacheIDs:this.Nc,samplesCacheColors:this.Ec,samplesCacheSize:this.zc,samplesCacheRotation:this.Vc,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(void 0===this.Oc){const i=this.uc+t.appendCount;if(!this.kc||!this.Tc)return this.kc=new this.Mc(i),this.Tc=new this.Mc(i),this.Rc=this.yc?new Float32Array(i):void 0,this.Nc=this.vc?new Uint32Array(i):void 0,this.Ec=this.Sc?new Uint32Array(i):void 0,this.zc=this.xc?new Float32Array(i):void 0,this.Vc=this.bc?new Float32Array(i):void 0,{dataPattern:this.Lc(),samplesCacheX:this.kc,samplesCacheY:this.Tc,samplesCacheLookup:this.Rc,samplesCacheIDs:this.Nc,samplesCacheColors:this.Ec,samplesCacheSize:this.zc,samplesCacheRotation:this.Vc,maxSampleCount:i};const s=this.kc.length;if(s<i){if(!this.gc.warningDisplayed){const s=xt.performance.now();if(this.gc.expandEvents=this.gc.expandEvents.filter((t=>s-t.timestamp<5e3)),i>1e3&&this.gc.expandEvents.push({timestamp:s}),this.gc.expandEvents.length>5)return xt.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.gc.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.wc(t)}const s=new this.Mc(i);s.set(this.kc),this.kc=s;const e=new this.Mc(i);if(e.set(this.Tc),this.Tc=e,this.yc){const t=new Float32Array(i);this.Rc&&t.set(this.Rc),this.Rc=t}if(this.vc){const t=new Uint32Array(i);this.Nc&&t.set(this.Nc),this.Nc=t}if(this.Sc){const t=new Uint32Array(i);this.Ec&&t.set(this.Ec),this.Ec=t}if(this.xc){const t=new Float32Array(i);this.zc&&t.set(this.zc),this.zc=t}if(this.bc){const t=new Float32Array(i);this.Vc&&t.set(this.Vc),this.Vc=t}return this.lc=this.uc,{dataPattern:this.Lc(),samplesCacheX:this.kc,samplesCacheY:this.Tc,samplesCacheLookup:this.Rc,samplesCacheIDs:this.Nc,samplesCacheColors:this.Ec,samplesCacheSize:this.zc,samplesCacheRotation:this.Vc,maxSampleCount:i}}if(s>4*i){const t=new this.Mc(i);t.set(this.kc.subarray(0,this.uc)),this.kc=t;const s=new this.Mc(i);if(s.set(this.Tc.subarray(0,this.uc)),this.Tc=s,this.yc){const t=new Float32Array(i);this.Rc&&t.set(this.Rc.subarray(0,this.uc)),this.Rc=t}if(this.vc){const t=new Uint32Array(i);this.Nc&&t.set(this.Nc.subarray(0,this.uc)),this.Nc=t}if(this.Sc){const t=new Uint32Array(i);this.Ec&&t.set(this.Ec.subarray(0,this.uc)),this.Ec=t}if(this.xc){const t=new Float32Array(i);this.zc&&t.set(this.zc.subarray(0,this.uc)),this.zc=t}if(this.bc){const t=new Float32Array(i);this.Vc&&t.set(this.Vc.subarray(0,this.uc)),this.Vc=t}return{dataPattern:this.Lc(),samplesCacheX:this.kc,samplesCacheY:this.Tc,samplesCacheLookup:this.Rc,samplesCacheIDs:this.Nc,samplesCacheColors:this.Ec,samplesCacheSize:this.zc,samplesCacheRotation:this.Vc,maxSampleCount:i}}return{dataPattern:this.Lc(),samplesCacheX:this.kc,samplesCacheY:this.Tc,samplesCacheLookup:this.Rc,samplesCacheIDs:this.Nc,samplesCacheColors:this.Ec,samplesCacheSize:this.zc,samplesCacheRotation:this.Vc,maxSampleCount:s}}return t.appendCount+this.uc>this.Oc&&this.L.emit("maxSampleCountExceeded",this,this.uc,this.Oc,this.uc+t.appendCount),this.kc=this.kc||new this.Mc(this.Oc),this.Tc=this.Tc||new this.Mc(this.Oc),this.Rc=this.Rc||(this.yc?new Float32Array(this.Oc):void 0),this.Nc=this.Nc||(this.vc?new Uint32Array(this.Oc):void 0),this.Ec=this.Ec||(this.Sc?new Uint32Array(this.Oc):void 0),this.zc=this.zc||(this.xc?new Float32Array(this.Oc):void 0),this.Vc=this.Vc||(this.bc?new Float32Array(this.Oc):void 0),{dataPattern:this.Lc(),samplesCacheX:this.kc,samplesCacheY:this.Tc,samplesCacheLookup:this.Rc,samplesCacheIDs:this.Nc,samplesCacheColors:this.Ec,samplesCacheSize:this.zc,samplesCacheRotation:this.Vc,maxSampleCount:this.Oc}}Hc(){if(!this.kc||!this.Tc||0===this.uc)return;if(void 0===this.Oc)return this.cc>0?{x:this.kc[0],y:this.Tc[0]}:void 0;if(!this.dc)return{x:this.kc[0],y:this.Tc[0]};let t=this.lc-this.uc;return t<0&&(t+=this.Oc),{x:this.kc[t],y:this.Tc[t]}}Cc(){if(!this.kc||!this.Tc||0===this.uc)return;if(void 0===this.Oc){const t=this.uc-1;return t>=0?{x:this.kc[t],y:this.Tc[t]}:void 0}let t=this.lc-1;return t<0&&(t+=this.Oc),{x:this.kc[t],y:this.Tc[t]}}$c(t,i,s,e){const h=this.Lc(),r=this.kc,n=this.Tc;if(!r||!n)return;const o=t=>({x:r[t],y:n[t],lookupValue:this.yc&&this.Rc?this.Rc[t]:void 0,id:this.vc&&this.Nc?this.Nc[t]:void 0,color:this.Sc&&this.Ec?this.Ec[t]:void 0,size:this.xc&&this.zc?this.zc[t]:void 0,rotation:this.bc&&this.Vc?this.Vc[t]:void 0}),a=r.length,l=this.uc,u=this.cc-1,c=Math.max(u-l+1,0);if(h){const s=this.Hc(),e=this.Cc();if(!(s&&e&&this.kc&&this.Tc))return;const r="ProgressiveX"===h||"RegressiveX"===h?"x":"y",n="x"===r?"y":"x",l="x"===r?this.kc:this.Tc,d="x"===n?this.kc:this.Tc,f=t[r],A=Math.min(s[r],e[r]),g=Math.max(s[r],e[r]);if(f<A||f>g)return;const p=fn(f,c,u,(t=>l[cn(t,this.cc,a,this.lc)])),m=cn(p,this.cc,a,this.lc);if(!i)return o(m);const y=p-1,S=p+1,v=f>=l[m]&&("ProgressiveX"===h||"ProgressiveY"===h)?S<=u?cn(S,this.cc,a,this.lc):void 0:y>=c?cn(y,this.cc,a,this.lc):void 0;if(void 0===v)return;const x=l[m],b=d[m],M=l[v],_=d[v],w=Math.min(x,M),C=w===x?b:_,k=Math.max(x,M),T=Vr(C,k===x?b:_,(f-w)/(k-w));return"ProgressiveX"===h||"RegressiveX"===h?{x:f,y:T}:{x:T,y:f}}let d,f=Number.MAX_VALUE;const A=ct(t,s,e),g=this.uc-1;for(let t=0;t<=g;t+=1){const i=r[t],h=n[t];if(!Number.isNaN(i)&&!Number.isNaN(h)){const r=ut(i,s.x,e.x),n=ut(h,s.y,e.y),o=(r-A.x)**2+(n-A.y)**2;o<f&&(f=o,d=t)}}return void 0===d?void 0:o(d)}Dc(t,i){this.L.emit("changed",t,i)}Yt(t){return this.L.off(t)}Xc(t){return this.L.on("changed",t)}jc(t){return this.L.on("cleared",t)}}const cn=(t,i,s,e)=>t%s,dn=(t,i,s,e,h,r,n,o)=>{if(0===e||0===h)return;const a=s.length,l=e-1,u=Math.max(l-h+1,0),c=fn(t,u,l,(t=>s[cn(t,e,a)])),d=fn(i,u,l,(t=>s[cn(t,e,a)])),f=Math.max(c-o,u),A=Math.min(d+o,l),g=cn(f,e,a),p=cn(A,e,a);return g>p?{iFirstSample:f,iLastSample:A,iFirstSampleDataArray:g,iLastSampleDataArray:p,dataRanges:[{offset:g,count:a-g},{offset:0,count:p+1}]}:{iFirstSample:f,iLastSample:A,iFirstSampleDataArray:g,iLastSampleDataArray:p,dataRanges:[{offset:g,count:p-g+1}]}},fn=(t,i,s,e)=>{const h=s;for(;i!==s;){const h=Math.ceil((i+s)/2);t<e(h)?s=h-1:i=h}const r=Math.abs(t-e(i));return i<h&&Math.abs(t-e(i+1))<r?i+1:i},An=(t,i,s,e,h)=>{const r=i.length;if(Array.isArray(i))for(let r=0;r<e;r+=1)t[h+r]=i[s+r];else t.set(r===e?i:i.subarray(s,s+e),h)},gn=(t,i)=>void 0===t?void 0:Array.isArray(t)?new i(t):t instanceof i?t:new i(t),pn=(t,i,s)=>{if(void 0!==t)return Array.isArray(t)?t.slice(i,s):t.subarray(i,s)};class mn extends Rr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ua="label",this.Ga=this.Ts.Dr(this.renderingScale).Eh(this.ua).ke(z).Ir(Ti).Pr(Ti),this.setMargin(5),this.Mu(this.Ga)}Iu(){return[this.Ga]}setFillStyle(t){return this.Ga.ke(t),this.Ts.vs(),this}getFillStyle(){return this.Ga.zh()}Fe(){const t=this.getPosition(l(0,0),exports.UISpace.Content),i=ct(t,this.scale,this.renderingScale);return this.Ga.Ie(i),this}Ds(){this.Ga.Ds();const t=0===this.ua.length?l(0,0):this.Ga.Zc();return this.setContentSize(t),super.Ds()}setText(t){return this.ua=t,this.Ga.Eh(this.ua),this.Ts.vs(),this}getText(){return this.ua}setFont(t){return this.Ga.Nh(t),this.Ts.vs(),this}getFont(){return this.Ga.Oh()}setTextRotation(t){return this.Ga.Gh(t),this.Ts.vs(),this}getTextRotation(){return this.Ga.Wh()}}const yn={...Fr,...Pr,uiElement:mn};class Sn extends Er{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Qc=!1,this.fitTo=this.Lu.bind(this),this.setSize=this.fitTo,this.Ga=this.Ts.sc(i).ke(z).Ce(rt),this.Mu(this.Ga)}Iu(){return[this.Ga]}setFillStyle(t){return this.Ga.ke(t),this.Ts.vs(),this}getFillStyle(){return this.Ga.zh()}setStrokeStyle(t){return this.Ga.Ce(t),this.Ts.vs(),this}getStrokeStyle(){return this.Ga.lo()}Fe(){const t=ji([this.getPosition(l(-1,-1),exports.UISpace.Content),this.getPosition(l(1,1),exports.UISpace.Content)].map((t=>ct(t,this.scale,this.renderingScale))));return this.Qc?this.Ga.Sl([{x:(t.min.x+t.max.x)/2,y:t.min.y},{x:t.min.x,y:(t.min.y+t.max.y)/2},{x:(t.min.x+t.max.x)/2,y:t.max.y},{x:t.max.x,y:(t.min.y+t.max.y)/2}]):this.Ga.Sl([t.min,{x:t.min.x,y:t.max.y},t.max,{x:t.max.x,y:t.min.y}]),this}Lu(t){return this.setContentSize(t),this.Ts.vs(),this}Ru(){return 0}Eu(){return 0}Vu(){return 0}zu(){return 0}}class vn extends Er{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Jc=l(0,0),this.Ga=t.Kc(i).hu(0).Ve(360).ke(z).Ce(rt),this.Mu(this.Ga)}Iu(){return[this.Ga]}setFillStyle(t){return this.Ga.ke(t),this.Ts.vs(),this}getFillStyle(){return this.Ga.zh()}setStrokeStyle(t){return this.Ga.Ce(t),this.Ts.vs(),this}getStrokeStyle(){return this.Ga.lo()}Fe(){const t=this.getSize(exports.UISpace.Content).x/2;return this.Ga.nu(t*this.renderingScale.Ui().x).ou(t*this.renderingScale.Ui().y).Ie(ct(this.getPosition(l(0,0),exports.UISpace.Content),this.scale,this.renderingScale)).lu(255).Ds(),this}Lu(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(l(2*i,2*i)),this.Jc=t,this.Ts.vs(),this}Ru(){return(this.getSize(exports.UISpace.Content).x-this.Jc.x)/2}Eu(){return(this.getSize(exports.UISpace.Content).x-this.Jc.x)/2}Vu(){return(this.getSize(exports.UISpace.Content).y-this.Jc.y)/2}zu(){return(this.getSize(exports.UISpace.Content).y-this.Jc.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(l(i,i)),this.Jc=t,this}}class xn extends zr{constructor(t,i,s,e,h){super(t,i,s,nr.Simple,e,h),this.qc=p(l(0,0)),this.td=!1,this.Ts=t,this.hc()}rc(){const t=this.qc._();if(this.td){const i=Math.min(t.x,t.y);return[l(0,0),l(i/2,i/2),l(0,i),l(-i/2,i/2)]}const i=2*Math.sqrt(this.qc._().x*this.qc._().x/4+this.qc._().y*this.qc._().y/4),s=l(Math.cos(Math.PI/4)*i,0),e=l(0,Math.sin(Math.PI/4)*i),h=l(0,0),r=rs(h,rs(s,e)),n=rs(r,rs(e,hs(s,-1)));return[h,r,n,ns(n,rs(s,e))]}Iu(){return[this.Ga]}setFillStyle(t){return this.Ga.ke(t),this.Ts.vs(),this}getFillStyle(){return this.Ga.zh()}setStrokeStyle(t){return this.Ga.Ce(t),this.Ts.vs(),this}getStrokeStyle(){return this.Ga.lo()}Lu(t){return this.qc.M(t),this.td=!1,this.Ts.vs(),this}Ru(){return this.td?0:(this.getSize(exports.UISpace.Content).x-this.qc._().x)/2}Eu(){return this.td?0:(this.getSize(exports.UISpace.Content).x-this.qc._().x)/2}Vu(){return this.td?0:(this.getSize(exports.UISpace.Content).y-this.qc._().y)/2}zu(){return this.td?0:(this.getSize(exports.UISpace.Content).y-this.qc._().y)/2}fitTo(t){return this.qc.M(t),this.td=!0,this.Ts.vs(),this}}class bn extends zr{constructor(t,i,s,e,h){super(t,i,s,nr.Simple,e,h),this.sd=p(l(0,0)),this.ed=p(10),this.hd=p(void 0),this.Yu=p(exports.UIDirections.Right),this.hc()}Iu(){return[this.Ga]}setFillStyle(t){return this.Ga.ke(t),this.Ts.vs(),this}getFillStyle(){return this.Ga.zh()}setStrokeStyle(t){return this.Ga.Ce(t),this.Ts.vs(),this}getStrokeStyle(){return this.Ga.lo()}setDirection(t){return this.Yu.M(t),this.Ts.vs(),this}getDirection(){return this.Yu._()}setPointerLength(t){return this.ed.M(t),this.Ts.vs(),this}getPointerLength(){return this.ed._()}setPointerAngle(t){return this.hd.M(t),this.Ts.vs(),this}getPointerAngle(){let t=this.hd._();if(void 0===t){const i=this.rd();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}Lu(t){return this.sd.M(t),this.Ts.vs(),this}nd(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}od(){return Xt(this.Yu._())?this.sd._().x:this.sd._().y}rd(){return Xt(this.Yu._())?this.sd._().y:this.sd._().x}Ru(){switch(this.Yu._()){case exports.UIDirections.Right:return 0;case exports.UIDirections.Left:return this.getPointerLength();case exports.UIDirections.Up:case exports.UIDirections.Down:return Math.max(0,this.nd()-this.rd());default:return 0}}Eu(){switch(this.Yu._()){case exports.UIDirections.Right:return this.getPointerLength();case exports.UIDirections.Left:return 0;case exports.UIDirections.Up:case exports.UIDirections.Down:return Math.max(0,this.nd()-this.rd());default:return 0}}Vu(){switch(this.Yu._()){case exports.UIDirections.Right:case exports.UIDirections.Left:return Math.max(0,this.nd()-this.rd());case exports.UIDirections.Up:return this.getPointerLength();case exports.UIDirections.Down:default:return 0}}zu(){switch(this.Yu._()){case exports.UIDirections.Right:case exports.UIDirections.Left:return Math.max(0,this.nd()-this.rd());case exports.UIDirections.Up:return 0;case exports.UIDirections.Down:return this.getPointerLength();default:return 0}}rc(){const t=$t(this.Yu._()),i=ss(l(0,0),t),s=this.getPointerLength(),e=this.nd(),h=this.od(),r=this.rd();if(!(0!==s&&0!==e||0!==h&&0!==r))return[];const n=l(0,0),o=rs(rs(n,hs(t,-s)),hs(i,e/2)),a=rs(o,hs(i,(r-e)/2)),u=rs(a,hs(t,-h)),c=rs(rs(n,hs(t,-s)),hs(i,-e/2)),d=rs(c,hs(i,-(r-e)/2)),f=rs(d,hs(t,-h));let A;return A=0===h||0===r?[n,o,c]:0===s||0===e?[a,u,f,d]:kt(r,e)?[n,o,u,f,c]:[n,o,a,u,f,d,c],A}}class Mn extends Rr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.Lu.bind(this),this.setSize=this.fitTo,this.ad=new un,this.Ga=this.Ts.fd(i).Ee(rt).dd(z).ud(z).ld(this.ad),this.Mu(this.Ga)}Iu(){return[this.Ga]}setShape(t){return this.Ga.Ad(t),this}getShape(){return this.Ga.gd()}setRotation(t){return this.Ga.pd(t),this}getRotation(){return this.Ga.md()}setFillStyle(t){return this.Ga.ud(t),this.Ts.vs(),this}getFillStyle(){return this.Ga.yd()}Fe(){const t=ct(this.getPosition({x:0,y:0},exports.UISpace.Content),this.scale,this.renderingScale),i=Math.max(this.size.x,this.size.y);if(this.ad.clear(),i>0){const s=this.Ga.gd(),e=this.Ga.yd(),h=on(s)&&s,r=qr(e)&&e;if(h){const t=i/h.ai().y;this.Ga.Sd(t)}else if(r){const t=r.source;if(t instanceof Image){const s=i/t.height;this.Ga.Sd(s)}}else this.Ga.Sd(i);this.ad.appendSample(t)}return this}Lu(t){return this.setContentSize(t),this.Ts.vs(),this}Ru(){return 0}Eu(){return 0}Vu(){return 0}zu(){return 0}}const _n={...Fr,...Pr,uiElement:Mn};class wn extends Br{setSize(t){return this.setContentSize(t),this.Ts.vs(),this}}class Cn extends br{constructor(){super(...arguments),this.vd=[],this.xd=0,this.bd=t=>{const i=this.vd.indexOf(t);i>=0&&this.vd.splice(i,1)}}getMembers(){return this.vd}getMemberCount(){return this.vd.length}setMinimumSize(t){return this.Md=t,this.Ts.vs(),this}getMinimumSize(){return this.Md}addElement(t,i=-1){const s=t.Qu(this.Ts,this.renderingScale,this.scale,this.bd,this.ts,!1);return s.setMouseInteractions(this.getMouseInteractions()),i>=0?this.vd.splice(i,0,s):this.vd.push(s),s.setVisible(this.getVisible()),this.Mu(s),this.Xi&&(Ai(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.vd.slice().forEach(wt),this}setVisible(t){return super.setVisible(t),this.vd.forEach((i=>i.setVisible(t))),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let i=0;i<this.vd.length;i+=1)this.vd[i].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.vd.length;t+=1)if(this.vd[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let s=0;s<this.vd.length;s+=1){const e=this.vd[s];"getHighlight"in(i=e)&&"setHighlight"in i&&e.setHighlight(t)}var i;return this}}class kn extends Cn{Fe(){super.Fe();const t=this.getPosition(l(-1,1),exports.UISpace.Content),i=this.vd.reduce(((t,i)=>t+ +(i instanceof wn)),0),s=i>0?(this.size.x-this.xd)/i:0;return this.vd.reduce(((i,e)=>e instanceof wn?this.scale.mi({x:i,y:t.y},{x:s+e.getSize().x,y:0}).x:e.setOrigin(l(-1,1)).setPosition(l(i,t.y)).Fe().getPosition(l(1,0)).x),t.x),this}Ds(){for(let t=0;t<this.vd.length;t+=1){const i=this.vd[t];i instanceof Tn&&i.setMinimumSize(0),i.Ds()}const t=this.vd.reduce(this._d.bind(this),u(0,0));this.xd=t.x;const i=void 0===this.Md?t:l(Math.max(t.x,this.Md),t.y);this.setContentSize(i);for(let t=0;t<this.vd.length;t+=1){const s=this.vd[t];s instanceof Tn&&s.setMinimumSize(i.y).Ds()}return super.Ds()}_d(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(Fn,i).setSize(l(0,t))}}class Tn extends Cn{Fe(){super.Fe();const t=this.getPosition(l(-1,1),exports.UISpace.Content),i=this.vd.reduce(((t,i)=>t+ +(i instanceof wn)),0),s=i>0?(this.size.y-this.xd)/i:0;return this.vd.reduce(((i,e)=>e instanceof wn?this.scale.mi({x:t.x,y:i},{x:0,y:-(s+e.getSize().y)}).y:e.setOrigin(l(-1,1)).setPosition(l(t.x,i)).Fe().getPosition(l(0,-1)).y),t.y),this}Ds(){for(let t=0;t<this.vd.length;t+=1){const i=this.vd[t];i instanceof kn&&i.setMinimumSize(0),i.Ds()}const t=this.vd.reduce(this._d.bind(this),u(0,0));this.xd=t.y;const i=void 0===this.Md?t:l(t.x,Math.max(t.y,this.Md));this.setContentSize(i);for(let t=0;t<this.vd.length;t+=1){const s=this.vd[t];s instanceof kn&&s.setMinimumSize(i.x).Ds()}return super.Ds()}_d(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(Fn,i).setSize(l(0,t))}}const Fn={...Fr,...Pr,uiElement:wn};class In extends Tn{constructor(){super(...arguments),this.vd=[]}addRow(){return this.addElement(Bn,void 0)}getRow(t,i=!1){return i&&this.vd.length<=t?(this.addRow(),this.getRow(t,!0)):this.vd[t]}}const Pn={...Fr,...Ir,...Dr},Dn={...Pn,uiElement:Tn,background:Sn},Bn={...Pn,uiElement:kn,background:Sn},Ln={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},Rn=(t,i)=>{const s={},e=`stylable${t}s`;return s[e]=i,s[`set${t}FillStyle`]=function(t){return this[e].forEach((i=>i.setFillStyle(t))),this},s[`get${t}FillStyle`]=function(){return this[e][0].getFillStyle()},s[`set${t}Font`]=function(t){return this[e].forEach((i=>i.setFont(t))),this},s[`get${t}Font`]=function(){return this[e][0].getFont()},s[`set${t}Rotation`]=function(t){return this[e].forEach((i=>i.setTextRotation(t))),this},s[`get${t}Rotation`]=function(){return this[e][0].getTextRotation()},s},En=Rn("Text",[]),zn={button:void 0,isLocked:!1,setOn(t){const i=this.button.getOn()!==t;return this.button.setOn(t),i&&this.L.emit("switch",t),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},onSwitch(t){return this.L.on("switch",(i=>t(this,i)))},offSwitch(t){return this.L.off(t,"switch")},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},Vn={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},On={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},Nn={...Fr,...Ir,background:Sn,Qu(t,i,s,e,h,r){const n=new kn(t,i,s,this.background,e,h),o=n.addElement(yn,void 0),a=Object.assign(n,Ln,{setTextLabel:o},En,{stylableTexts:[o]});return Tr(a,h,r),this.applyStylers(a,h)}}.addStyler(Cr),Gn={...Fr,...Ir,background:bn,Qu(t,i,s,e,h,r){const n=new kn(t,i,s,this.background,e,h),o=n.addElement(yn,void 0),a=n.getBackground(),l=Object.assign(n,Ln,{setTextLabel:o},En,{stylableTexts:[o]},On,{pointable:a},{setTickLabelPadding(t){return this.getDirection()===exports.UIDirections.Up?(this.setPadding({top:t}),o.setMargin({top:0})):this.getDirection()===exports.UIDirections.Down?(this.setPadding({bottom:t}),o.setMargin({bottom:0})):this.getDirection()===exports.UIDirections.Right?(this.setPadding({right:t}),o.setMargin({right:0})):this.getDirection()===exports.UIDirections.Left&&(this.setPadding({left:t}),o.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===exports.UIDirections.Up?this.getPadding().top:this.getDirection()===exports.UIDirections.Down?this.getPadding().bottom:this.getDirection()===exports.UIDirections.Right?this.getPadding().right:this.getPadding().left}});return l.Ju="other",l.setPointerLength(h.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(h.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(h.uiTextFont).setTextFillStyle(h.uiTextFillStyle).setBackground((t=>t.setFillStyle(h.uiBackgroundFillStyle).setStrokeStyle(h.uiBackgroundStrokeStyle))),Tr(l,h,r),this.applyStylers(l,h)}};class Wn extends xr{constructor(t,s,e,h,r,n){super(t,s,e,r,n),this.Bs=!1,this.L=new i.Eventer,this.wd=z,this.Cd=z,this.getOn=()=>this.Bs,this.kd=this.Mu(new Mn(this.Ts,this.renderingScale,this.scale,Ct,n).setShape(h)),this.Cd=n.uiButtonFillStyleHidden||n.uiButtonFillStyle}Iu(){return[...this.kd.Iu()]}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setOn(t){return this.Bs=t,this.kd.setFillStyle(t?this.wd:this.Cd),this.Ts.vs(),this}setOffFillStyle(t){return this.Cd="function"==typeof t?t(this.Cd):t,this.Bs||this.kd.setFillStyle(this.Cd),this}getOffFillStyle(){return this.Cd}setSize(t){return this.kd.fitTo("number"==typeof t?l(t,t):t),this}getSize(){return this.kd.getSize()}setOnFillStyle(t){return this.wd="function"==typeof t?t(this.wd):t,this.Bs&&this.kd.setFillStyle(this.wd),this}getOnFillStyle(){return this.wd}setButtonShape(t){return this.kd.setShape(t),this.Ts.vs(),this}getButtonShape(){return this.kd.getShape()}Fe(){return super.Fe(),this.kd.setVisible(this.getVisible()).setPosition(this.getPosition(l(0,0),exports.UISpace.Content)).Fe(),this}Ds(){const t=this.kd.Ds().getSize();return this.setContentSize(t),super.Ds()}dispose(){return super.dispose(),this.kd.dispose(),this}setMouseInteractions(t){return this.kd.setMouseInteractions(t),this}getMouseInteractions(){return this.kd.getMouseInteractions()}setHighlight(t){const i=Si(t);return this.kd.setHighlight(i),this.L.emit("highlight",this,t),this.Ts.vs(),this}getHighlight(){return this.kd.getHighlight()}}const Un={...Fr,uiElement:Wn,buttonShape:exports.PointShape.Circle,setButtonShape(t){return{...this,buttonShape:t}},Qu(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.buttonShape,e,h),h);return Tr(n,h,r),n}},Yn={...Fr,...Ir,background:Sn,buttonBuilder:Un,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},Qu(t,i,s,e,h,r){const n=new kn(t,i,s,this.background,e,h),o=n.addElement(Dn);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(Dn);l.addGap();const u=l.addElement(yn);l.addGap(),n.addGap();const c=Object.assign(n,Ln,{setTextLabel:u},En,{stylableTexts:[u]},zn,{button:a},Vn);let d;return c.onMouseClick(((t,i)=>{c.getLocked()||c.setOn(!c.getOn())})),c.onMouseEnter((()=>c.setHighlight(!0))),c.onMouseLeave((()=>c.setHighlight(!1))),c.setMouseStyle(exports.MouseStyles.Point),c.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),c.onSwitch(((t,i)=>{i?d&&c.setTextFillStyle(d):(d=c.getTextFillStyle(),c.setTextFillStyle(c.getTextFillStyleHidden()))})),c.setPadding({left:5}),Tr(c,h,r),this.applyStylers(c,h)}}.addStyler(Cr).addStyler(kr);class Hn extends xr{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Td=[],this.Fd=2,this.Id="",this.Pd=(t,i)=>void 0!==t.label?t.label:i.percentageValues?`${(100*t.value).toFixed(0)}%`:Ts(t.value,i.min,i.max),this.Dd=0,this.Bd=0,this.Ld=!1,this.Ts=t,this.Rd=r,this.Ed=this.Mu(t.Te(i).Ce(rt)),this.zd=this.Mu(t.Dr(i).ke(h.uiTextFillStyle).Nh(h.uiTextFont).setMouseInteractions(!1)),"vertical"===r?(this.Vd=140,this.Od=25):(this.Vd=160,this.Od=15)}Iu(){return[this.Ed,this.zd]}Nd(t){this.Gd=t;const i=jn(t,"vertical"===this.Rd?0:90,this.Ld);return this.Ed.ke(i),this.Ts.vs(),this}Wd(){return this.Gd}Ud(t){return this.Vd=t,this.Ts.vs(),this}Yd(){return this.Vd}Hd(t){return this.Od=t,this.Ts.vs(),this}$d(){return this.Od}Xd(t){return this.Id=t,this.Ts.vs(),this}jd(){return this.Id}Zd(t){return this.Pd=t,this.Ts.vs(),this}setLUTDisplayProportionalSteps(t){if(this.Ld=t,this.Gd){const t=jn(this.Gd,"vertical"===this.Rd?0:90,this.Ld);this.Ed.ke(t)}return this.Ts.vs(),this}getLUTDisplayProportionalSteps(){return this.Ld}setFillStyle(t){return this.zd.ke(t),this.Ts.vs(),this}getFillStyle(){return this.zd.zh()}setFont(t){return this.zd.Nh(t),this.Ts.vs(),this}getFont(){return this.zd.Oh()}setTextRotation(t){return this.Bd=t,this.zd.Gh(t),this.Ts.vs(),this}getTextRotation(){return this.zd.Wh()}Fe(){var t,i,s,e;if(super.Fe(),this.Xi||!this.getVisible())return this;const h=this.Gd;if(h){const r=this.renderingScale.Ui(),n=h.min,o=h.max;if("vertical"===this.Rd){const s=this.getPosition({x:-1,y:-1},exports.UISpace.Content),e=rs(s,{x:this.Ed.ai().x+this.Fd*r.x,y:0}),a={x:e.x,y:e.y+(this.Id.length>0?this.Dd*r.y+this.zd.ai().y:0)+.5*((null===(t=this.Td[0])||void 0===t?void 0:t.ai().y)||0)},l={x:a.x,y:this.getPosition({x:-1,y:1},exports.UISpace.Content).y-.5*((null===(i=this.Td[this.Td.length-1])||void 0===i?void 0:i.ai().y)||0)};this.Ed.Ie({x:s.x,y:a.y}),this.zd.za({x:-1,y:-1}).Ie(e),h.getSteps().forEach(((t,i)=>{const s=$i(a,l,this.Ld?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.Td[i].za({x:-1,y:0}).Ie(s)}))}else{const t=this.getPosition({x:-1,y:-1},exports.UISpace.Content),i=this.getPosition({x:1,y:1},exports.UISpace.Content),a=this.Td.reduce(((t,i)=>Math.max(t,i.ai().y)),0),l=rs(t,{x:.5*((null===(s=this.Td[0])||void 0===s?void 0:s.ai().x)||0),y:a}),u={x:i.x,y:l.y},c={x:u.x-(.5*((null===(e=this.Td[this.Td.length-1])||void 0===e?void 0:e.ai().x)||0)+(this.Id.length>0?this.Dd*r.x+this.zd.ai().x:0)),y:l.y},d={x:l.x,y:l.y+this.Fd*r.y};this.Ed.Ie(d),this.zd.za({x:1,y:1}).Ie(u),h.getSteps().forEach(((t,i)=>{const s=$i(l,c,this.Ld?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.Td[i].za({x:0,y:1}).Ie(s)}))}}return this}Ds(){if(this.Gd&&this.getVisible()){const t=this.Gd.getSteps();for(let i=this.Td.length;i<t.length;i+=1)this.Td.push(this.Mu(this.Ts.Dr(this.renderingScale).setMouseInteractions(!1)));for(let i=0;i<t.length;i+=1)this.Td[i].ke(this.zd.zh()).Nh(this.zd.Oh()).Eh(this.Pd(t[i],this.Gd)).Gh(this.Bd);for(let i=t.length;i<this.Td.length;i+=1)this.Td[i].dispose();if(this.Td.length=t.length,this.zd.Eh(this.Id),"vertical"===this.Rd){const t=this.Od,i=this.Vd;this.Ed.tt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=t+Math.max(this.Td.reduce(((t,i)=>Math.max(t,i.Ds().Zc().x)),0),this.zd.Ds().Zc().x),e=(this.Id.length>0?this.Dd+this.zd.Ds().Zc().y:0)+i+.5*this.Td[0].Ds().Zc().y+.5*this.Td[this.Td.length-1].Ds().Zc().y;this.setContentSize({x:s,y:e})}else{const t=this.Vd,i=this.Od;this.Ed.tt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Id.length>0?this.Dd+this.zd.Ds().Zc().x:0,.5*this.Td[this.Td.length-1].Ds().Zc().x),e=t+.5*this.Td[0].Ds().Zc().x+s,h=i+this.Fd+this.Td.reduce(((t,i)=>Math.max(t,i.Ds().Zc().y)),0);this.setContentSize({x:e,y:h})}}else this.Td.forEach((t=>t.dispose())),this.Td.length=0,this.zd.setVisible(!1),this.Ed.setVisible(!1),this.setContentSize({x:0,y:0});return super.Ds()}dispose(){return super.dispose(),this.Ed.dispose(),this.Td.forEach(wt),this.zd.dispose(),this}setMouseInteractions(t){return this.Ed.setMouseInteractions(t),this}getMouseInteractions(){return this.Ed.getMouseInteractions()}}const $n={lutElement:{},setLUT(t){return this.lutElement.Nd(t),this},getLUT(){return this.lutElement.Wd()},setLUTLength(t){return this.lutElement.Ud(t),this},getLUTLength(){return this.lutElement.Yd()},setLUTThickness(t){return this.lutElement.Hd(t),this},getLUTThickness(){return this.lutElement.$d()},setLookUpUnit(t){return this.lutElement.Xd(t),this},getLookUpUnit(){return this.lutElement.jd()},setLUTStepValueFormatter(t){return this.lutElement.Zd(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},Xn={...Fr,...Ir,background:Sn,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},Qu(t,i,s,e,h,r){const n=new Tn(t,i,s,this.background,e,h),o=n.addElement({Qu:()=>new Hn(t,i,s,Ct,h,this.alignment)}),a=Object.assign(n,En,{stylableTexts:[o]},$n,{lutElement:o});return Tr(a,h,r),this.applyStylers(a,h)}}.addStyler(Cr),jn=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new st({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new st({angle:i,stops:n})},Zn={...Fr,...Ir,background:Sn,buttonBuilder:Un,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},Qu(t,i,s,e,h){const r=new Tn(t,i,s,this.background,e,h),n=r.addElement(Bn),o=n.addElement(Dn);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(Dn);l.addGap();const u=l.addElement(yn);l.addGap();const c=r.addElement({Qu:()=>new Hn(t,i,s,Ct,h,this.alignment)});"vertical"===this.alignment&&c.setMargin({left:h.uiButtonSize+6});const d=Object.assign(r,Ln,{setTextLabel:u},En,{stylableTexts:[u,c]},Rn("LUTText",[c]),zn,{button:a},$n,{lutElement:c},Vn);let f;return d.onMouseClick((()=>{d.getLocked()||d.setOn(!d.getOn())})),d.onMouseEnter((()=>d.setHighlight(!0))),d.onMouseLeave((()=>d.setHighlight(!1))),d.setMouseStyle(exports.MouseStyles.Point),d.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),d.onSwitch(((t,i)=>{i?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))})),d.setPadding({left:5}),this.applyStylers(d,h)}}.addStyler(Cr).addStyler(kr),Qn={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,i){const s=!i||"object"!=typeof i||void 0===i.toggleVisibilityOnClick||i.toggleVisibilityOnClick,e=null==i?void 0:i.matchStyleExactly,h=i&&"object"==typeof i&&void 0!==i.builder?i.builder:void 0;return this.legendBoxDisposed()||(t instanceof ha?this.addChart(t,s,h,e):"attach"in t?this.addAttachable(t,s,h,e):t&&this.addDashboard(t,s,h,e)),this},addAttachable(t,i,s,e){const h=t.Wd&&t.Wd(),r=t.ks&&t.ks(),n=void 0!==e&&e;let o=s;if(!o){let t=h?Zn.setAlignment(this.alignment):Yn;void 0!==r&&(t=t.setButtonShape(r)),o=t}const a=this.addElement(o);if(h&&"setLUT"in a){a.setLUT(h.lut);const t=h.lut.getUnits(),i=h.lookUpProperty,s=t.length>0?t:"x"===i?"x":"y"===i?"y":"z"===i?"z":"";a.setLookUpUnit(s)}return this.entryStylers.forEach((t=>t(a))),this.entries.push({entry:a,component:t}),t.attach(a,i,n),i||a.setLocked(!0),this},addChart(t,i,s,e){return t.Qd().forEach((t=>this.addAttachable(t,i,s,e))),this},addDashboard(t,i,s,e){return t.getCells().filter((t=>t.panel instanceof ha)).forEach((t=>this.addChart(t.panel,i,s,e))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.forEach((i=>t(i.entry,i.component))),this}},Jn={alignment:"vertical",layoutBuilder:Dn,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?Bn:Dn}},getAlignment(){return this.alignment},titleBuilder:Nn,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},Kn={...Fr,...Ir,...Jn,background:Sn,Qu(t,i,s,e,h,r){const n=this.layoutBuilder.setBackground(this.background).Qu(t,i,s,e,h,!1);let o=Object.assign(n,Qn,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>n.Xi});o.entries=[];const a=o.addElement("horizontal"===this.alignment?Dn:Bn),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(h.legendTitleFillStyle).setTextFont(h.legendTitleFont);return a.addGap(),o=Object.assign(o,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),Tr(o,h,r),this.applyStylers(o,h)}}.addStyler(((t,i)=>t.setPadding(5)));class qn extends xr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Jd=10,this.Kd=exports.UIDirections.Up,this.qd=0,this.Ju="major",this.ua=this.Mu(t.Dr(this.renderingScale).Ir(Ti).Pr(Ti)),this.Re=this.Mu(t.ze(this.renderingScale))}Iu(){return[this.ua]}Fe(){if(super.Fe(),this.Xi)return this;const t=ct(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.mi(t,{x:this.Kd===exports.UIDirections.Right?-this.Jd:this.Kd===exports.UIDirections.Left?this.Jd:0,y:this.Kd===exports.UIDirections.Up?-this.Jd:this.Kd===exports.UIDirections.Down?this.Jd:0}),s=this.renderingScale.mi(i,{x:this.Kd===exports.UIDirections.Right?-this.qd:this.Kd===exports.UIDirections.Left?this.qd:0,y:this.Kd===exports.UIDirections.Up?-this.qd:this.Kd===exports.UIDirections.Down?this.qd:0});return this.Re.Oe(t).Ve(i),this.ua.Ie(s).za(this.Kd===exports.UIDirections.Up?{x:0,y:1}:this.Kd===exports.UIDirections.Down?{x:0,y:-1}:this.Kd===exports.UIDirections.Right?{x:1,y:0}:{x:-1,y:0}),this}Ds(){const t=this.Re.cu().getThickness();return this.size=this.Kd===exports.UIDirections.Left||this.Kd===exports.UIDirections.Right?{x:this.Jd+this.qd+this.ua.Ds().Zc().x,y:t}:{y:this.Jd+this.qd+this.ua.Ds().Zc().y,x:t},super.Ds()}dispose(){return super.dispose(),this.ua.dispose(),this.Re.dispose(),this}setVisible(t){return super.setVisible(t),this.ua.setVisible(t),this.Re.setVisible(t),this}setMouseInteractions(t){return this.ua.setMouseInteractions(t),this.Re.setMouseInteractions(t),this}getMouseInteractions(){return this.ua.getMouseInteractions()}getText(){return this.ua.Lh()}setTextFillStyle(t){return this.ua.ke(t),this.Ts.vs(),this}getTextFillStyle(){return this.ua.zh()}setTextFont(t){return this.ua.Nh(t),this}setTextRotation(t){return this.ua.Gh(t),this}getTextRotation(){return this.ua.Wh()}getTextFont(){return this.ua.Oh()}setText(t){return this.ua.Eh(t),this.Ts.vs(),this}setDirection(t){return this.Kd=t,this.Ts.vs(),this}getDirection(){return this.Kd}setPointerLength(t){return this.Jd=t,this.Ts.vs(),this}getPointerLength(){return this.Jd}setTickLabelPadding(t){return this.qd=t,this.Ts.vs(),this}getTickLabelPadding(){return this.qd}setTickStyle(t){return this.Re.Ee(t),this.Ts.vs(),this}getTickStyle(){return this.Re.cu()}}const to={...Fr,Qu(t,i,s,e,h,r){const n=new qn(t,i,s,e,h);return Tr(n,h,r),this.applyStylers(n,h)}}.addStyler(Cr),io=to.addStyler(((t,i)=>(t.Ju="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),so=to.addStyler(((t,i)=>(t.Ju="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),eo=Yn.addStyler((t=>t.onSwitch(((i,s)=>!0===s?setTimeout((()=>t.setOn(!1)),300):void 0)))),ho=Kn.setAlignment("horizontal"),ro=Kn.setAlignment("vertical"),no={TextBox:Nn,CheckBox:Yn,ButtonBox:eo,PointableTextBox:Gn,AxisTickMajor:io,AxisTickMinor:so,LUTRange:Xn},oo={HorizontalLegendBox:ho,VerticalLegendBox:ro},ao=(t,i)=>{if(Vs(t)){const s=i.Do(t);return{x:s.engineX,y:s.engineY}}return t},lo=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},uo=(t,i,s,e=1)=>Tt(t+.1*e*(i-t)+.5*e*s.getPixelSize()*Math.sign(i-t),t,i),co=(t,i,s,e=1)=>{const h=s.dt(t),r=s.dt(i);return Tt(s.ct(h+.1*e*(r-h)+.5*e*Math.sign(r-h)),t,i)},fo={tf:0,if:1,sf:2,ef:3,hf:4,rf:5,nf:6,af:7,lf:8,uf:9,cf:10,df:11,ff:12,Af:13,gf:14,pf:15,mf:16,yf:17,Sf:18,vf:19,xf:20,bf:21,Mf:22,_f:23};class Ao extends Je{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.wf=h}}class go extends Qe{constructor(t,s,e,h,r,n,o,a,u,c,d,f,A,g,p,m){var y,S,v;super(c,u,o,g,p,{numeric:u.getWidth({x:g.xAxisNumericTicks,y:g.yAxisNumericTicks}),datetime:u.getWidth({x:g.xAxisDateTimeTicks,y:g.yAxisDateTimeTicks}),time:u.getWidth({x:g.xAxisTimeTicks,y:g.yAxisTimeTicks})},m),this.Cf=new Map,this.kf=void 0,this.Tf=0,this.Ff=[],this.If=[],this.Ke=ze.fitting,this.Pf=!0,this.Df=8,this.Bf=void 0,this.Lf=void 0,this.Rf=20,this.Ef=1,this.zf=!0,this.Vf=!0,this.Of=!0,this.Nf=!0,this.Gf=!0,this.Wf=!0,this.Uf=!0,this.Yf=!0,this.Hf=!0,this.$f=!0,this.Xf=this.Ch.defaultDragMouseStyle,this.jf=this.Ch.defaultDragMouseStyle,this.Zf=this.Ch.defaultDragMouseStyle,this.Qf=this.Ch.defaultDragMouseStyle,this.Jf=this.Ch.defaultDragMouseStyle,this.L=new i.Eventer,this.Kf=[],this.qf=t=>{const i=this.If.indexOf(t);i>=0&&this.If.splice(i,1)},this.tA=t=>(this.If.indexOf(t)<0&&this.If.push(t),this.qf),this.zt=(t,i)=>this.L.emit("axisAreaTouch",this,i),this.iA=Kt(this.Kf),this.onAxisInteractionAreaMouseClick=t=>this.L.on("axisAreaMouseClick",t),this.onAxisInteractionAreaMouseDoubleClick=t=>this.L.on("axisAreaDoubleClick",t),this.onAxisInteractionAreaMouseDown=t=>this.L.on("axisAreaMouseDown",t),this.onAxisInteractionAreaMouseUp=t=>this.L.on("axisAreaMouseUp",t),this.onAxisInteractionAreaMouseEnter=t=>this.L.on("axisAreaMouseEnter",t),this.onAxisInteractionAreaMouseLeave=t=>this.L.on("axisAreaMouseLeave",t),this.onAxisInteractionAreaMouseMove=t=>this.L.on("axisAreaMouseMove",t),this.onAxisInteractionAreaMouseWheel=t=>this.L.on("axisAreaMouseWheel",t),this.onAxisInteractionAreaMouseDragStart=t=>this.L.on("axisAreaMouseDragStart",t),this.onAxisInteractionAreaMouseDrag=t=>this.L.on("axisAreaMouseDrag",t),this.onAxisInteractionAreaMouseDragStop=t=>this.L.on("axisAreaMouseDragStop",t),this.onAxisInteractionAreaTouchStart=t=>this.L.on("axisAreaTouchStart",t),this.onAxisInteractionAreaTouch=t=>this.L.on("axisAreaTouch",t),this.onAxisInteractionAreaTouchStop=t=>this.L.on("axisAreaTouchEnd",t),this.offAxisInteractionAreaMouseClick=t=>this.L.off(t,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=t=>this.L.off(t,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=t=>this.L.off(t,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=t=>this.L.off(t,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=t=>this.L.off(t,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=t=>this.L.off(t,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=t=>this.L.off(t,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=t=>this.L.off(t,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=t=>this.L.off(t,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=t=>this.L.off(t,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=t=>this.L.off(t,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=t=>this.L.off(t,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=t=>this.L.off(t,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=t=>this.L.off(t,"axisAreaTouchEnd"),this.Vd={relative:1},this.sA=0,this.eA=0,this.hA=(t,i)=>i.getAllocatesAxisSpace()?Math.max(t,i.update().tc()):t,this.rA=t=>{const i=this.Ff.indexOf(t);-1!==i&&this.Ff.splice(i,1)},this.nA=(t,i)=>{this.L.emit("axisAreaDoubleClick",this,i),this.Nf&&(this.setStopped(!1),jt(i))},this.oA=t=>{this.L.emit("axisAreaMouseEnter",this),(this.Vf||this.zf||this.Of||this.Nf)&&this.aA(t)},this.lA=t=>{this.uA(t),this.L.emit("axisAreaMouseLeave",this)},this.cA=(t,i,s)=>{var e,h;this.L.emit("axisAreaMouseDragStart",this,i,s);const r=It(null===(e=this.chart.dA.Hn)||void 0===e?void 0:e.axisXYZoomMouseButton,0),n=It(null===(h=this.chart.dA.Hn)||void 0===h?void 0:h.axisXYPanMouseButton,2),o=l(i.clientX,i.clientY);s===n&&this.Vf?(this.fA(t),jt(i)):s===r&&this.zf&&(this.AA(t,o),jt(i))},this.gA=(t,i,s,e,h)=>{var r,n;this.L.emit("axisAreaMouseDrag",this,i,s,e,h);const o=It(null===(r=this.chart.dA.Hn)||void 0===r?void 0:r.axisXYZoomMouseButton,0),a=It(null===(n=this.chart.dA.Hn)||void 0===n?void 0:n.axisXYPanMouseButton,2),u=l(i.clientX,i.clientY);s===a&&this.Vf?(this.pA(t,h),jt(i)):s===o&&this.zf&&(this.mA(t,e,u,h),jt(i))},this.yA=(t,i,s,e)=>{var h,r;this.L.emit("axisAreaMouseDragStop",this,i,s,e);const n=It(null===(h=this.chart.dA.Hn)||void 0===h?void 0:h.axisXYZoomMouseButton,0),o=It(null===(r=this.chart.dA.Hn)||void 0===r?void 0:r.axisXYPanMouseButton,2),a=l(i.clientX,i.clientY);s===o&&this.Vf?(this.SA(t),jt(i)):s===n&&this.zf&&(this.vA(t,e,a),jt(i)),t.getIsUnderMouse()&&(this.Vf||this.zf||this.Of||this.Nf)&&this.aA(t)},this.xA=(t,i)=>{if(this.L.emit("axisAreaMouseWheel",this,i),this.Of){this.setStopped(!0);const t=this.Ch.getWidth(this.bA.cs.De(i.clientX,i.clientY)),s=this.ft.ct(t);this.zoom(s,fi(i)),jt(i)}},this.MA=(t,i)=>this.L.emit("axisAreaMouseClick",this,i),this._A=(t,i)=>this.L.emit("axisAreaMouseDown",this,i),this.wA=(t,i)=>this.L.emit("axisAreaMouseUp",this,i),this.CA=(t,i)=>this.L.emit("axisAreaMouseMove",this,i),this.kA=(t,i,s)=>{this.L.emit("axisAreaTouchStart",this,s),this.zf&&(this.aA(t),this.AA(t,i),jt(s))},this.TA=(t,i,s,e,h)=>{this.L.emit("axisAreaTouch",this,h),this.zf&&(this.mA(t,i,s,e),jt(h))},this.FA=(t,i,s,e)=>{this.L.emit("axisAreaTouchEnd",this,e),this.zf&&(this.vA(t,i,s),this.uA(t),jt(e))},this.IA=(t,i,s,e)=>{(this.Vf||this.Of)&&(this.aA(t),this.fA(t),jt(e))},this.PA=(t,i,s,e,h,r)=>{if(this.Vf){const i=l((e.x+h.x)/2,(e.y+h.y)/2);this.pA(t,i),jt(r)}if(this.Of){const t=this.bA.cs.De(i.x,i.y),n=this.bA.cs.De(s.x,s.y),o=Math.abs(this.Ch.getWidth(ns(t,e))-this.Ch.getWidth(ns(n,h)))-Math.abs(this.Ch.getWidth(t)-this.Ch.getWidth(n)),a=this.ft.mi(this.Ph,-o),l=this.ft.mi(this.Dh,o);this.Jh(a,l,!0),jt(r)}},this.DA=(t,i,s,e)=>{(this.Vf||this.Of)&&(this.SA(t),this.uA(t),jt(e))},this.BA=(t,i)=>{(this.Gf||this.Wf)&&this.LA(t)},this.RA=(t,i)=>{this.EA(t)},this.zA=(t,i,s)=>{const e=l(i.clientX,i.clientY);this.Gf&&this.VA(t,e)},this.OA=(t,i,s,e,h)=>{const r=l(i.clientX,i.clientY);this.Gf&&this.NA(t,r,e,h)},this.GA=(t,i,s,e,h)=>{const r=l(i.clientX,i.clientY);this.Gf&&this.WA(t,r,e,h)},this.UA=(t,i,s,e)=>{const h=l(i.clientX,i.clientY);(this.Gf||this.Wf)&&this.YA(t,h,e),(this.Gf||this.Wf)&&this.LA(t)},this.HA=(t,i)=>{this.Wf&&(this.setStopped(!0),this.zoom(this.Ph,fi(i)),jt(i))},this.$A=(t,i)=>{this.Wf&&(this.setStopped(!0),this.zoom(this.Dh,fi(i)),jt(i))},this.XA=(t,i,s)=>{this.Gf&&(this.LA(t),this.VA(t,i),jt(s))},this.jA=(t,i,s,e,h)=>{this.Gf&&(this.NA(t,i,s,e),jt(h))},this.ZA=(t,i,s,e,h)=>{this.Gf&&(this.WA(t,i,s,e),jt(h))},this.QA=(t,i,s,e)=>{this.Gf&&(this.YA(t,i,s),this.EA(t),jt(e))},this.JA=t,this.bA=s,this.KA=h,this.qA=r,this.chart=c,this.tg=f,this.ig=e,this.es=n,"logarithmic"===m.type&&this.chart.cs.Gn(fo.vf),A(this,this.tA),o.sg=this,this.eg=d,this.hg=this.eg>50?1:-1,this.rg=(v=this.Ch.toPoint(0,-this.hg),Math.abs(v.x)>=Math.abs(v.y)?v.x>=0?exports.UIDirections.Right:exports.UIDirections.Left:v.y>=0?exports.UIDirections.Up:exports.UIDirections.Down),this.ng=a,this.og=this.ft instanceof Ps?(new Ls).Ei(this.Ch.toVec2(this.ft,this.ng)):(new Rs).Ei(this.Ch.toVec2(this.ft,this.ng)),this.ag=this.chart.pixelScale,this.lg=(new Ls).Ei(this.Ch.toVec2(this.Ch.getWidth(this.ag),this.ng)),this.ug=this.bA.ze(this.og).setMouseInteractions(!1),this.cg=this.bA.ze(this.og).setMouseInteractions(!1),this.dg=this.bA.ze(this.og).setMouseInteractions(!1),this.Ag=this.ig.Te(this.ag).ke(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Ce(rt).jo(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.gg=this.ig.Te(this.ag).ke(u.getWidth({x:g.xAxisZoomingBandFillStyle,y:g.yAxisZoomingBandFillStyle})).Ce(u.getWidth({x:g.xAxisZoomingBandStrokeStyle,y:g.yAxisZoomingBandStrokeStyle})),this.pg=this.ig.Te(this.ag).ke(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Ce(rt).jo(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.mg=this.ig.Te(this.ag).ke(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Ce(rt).jo(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Rh=this.ig.Dr(this.og).setMouseInteractions(!1).Gh(this.Ch.getTitleTextRotation(this.hg)).Pr(Ti).Ir(Ti),this.chart.cs.us.ls(this.Ag,(t=>this.Ag.ds(t)),{animationEnabled:this.ih}),this.chart.cs.us.ls(this.pg,(t=>this.pg.ds(t)),{animationEnabled:this.ih}),this.chart.cs.us.ls(this.mg,(t=>this.mg.ds(t)),{animationEnabled:this.ih});const x=Hs(new Xs(this.kA,this.TA,this.FA,1),new js(this.IA,this.PA,this.DA),new $s(this.nA)),b=Hs(new Xs(this.XA,this.jA,this.QA)),M=Hs(new Xs(this.XA,this.ZA,this.QA));this.Ag.setMouseEnterEventHandler(this.oA).setMouseLeaveEventHandler(this.lA).setMouseDragStartEventHandler(this.cA).setMouseDragEventHandler(this.gA).setMouseDragStopEventHandler(this.yA).setMouseWheelEventHandler(this.xA).setMouseDoubleClickEventHandler(this.nA).setMouseClickEventHandler(this.MA).setMouseDownEventHandler(this._A).setMouseUpEventHandler(this.wA).setMouseMoveEventHandler(this.CA).setTouchStartEventHandler(x.onTouchStart).setTouchMoveEventHandler(x.onTouchMove).setTouchEndEventHandler(x.onTouchEnd),this.pg.setMouseEnterEventHandler(this.BA).setMouseLeaveEventHandler(this.RA).setMouseDragStartEventHandler(this.zA).setMouseDragEventHandler(this.OA).setMouseDragStopEventHandler(this.UA).setMouseWheelEventHandler(this.HA).setTouchStartEventHandler(b.onTouchStart).setTouchMoveEventHandler(b.onTouchMove).setTouchEndEventHandler(b.onTouchEnd),this.mg.setMouseEnterEventHandler(this.BA).setMouseLeaveEventHandler(this.RA).setMouseDragStartEventHandler(this.zA).setMouseDragEventHandler(this.GA).setMouseDragStopEventHandler(this.UA).setMouseWheelEventHandler(this.$A).setTouchStartEventHandler(M.onTouchStart).setTouchMoveEventHandler(M.onTouchMove).setTouchEndEventHandler(M.onTouchEnd),this.ug.Ee(u.getWidth({x:g.xAxisStrokeStyle,y:g.yAxisStrokeStyle})),this.cg.Ee(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.dg.Ee(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.Rh.ke(u.getWidth({x:g.xAxisTitleFillStyle,y:g.yAxisTitleFillStyle})).Nh(u.getWidth({x:g.xAxisTitleFont,y:g.yAxisTitleFont})),this.hs=n.rs(this,{}),this.Uh=this.hs.yg([this.Rh]).Ss(g.effectsText),this.Sg=null!==(y=u.getWidth({x:g.xAxisMarginAfterTicks,y:g.yAxisMarginAfterTicks}))&&void 0!==y?y:7,this.vg=null!==(S=u.getWidth({x:g.xAxisMarginAfterTitle,y:g.yAxisMarginAfterTitle}))&&void 0!==S?S:7}Tr(){return this.hh}Fr(){return void 0!==this.Qh}setTickStrategy(t,i){return super.Ih(t,i)}getTickStrategy(){return this.Ze}addBand(t=!0){const i=t?this.qA:this.KA,s=new Re(i,this.chart,this.iA,this,this.og,this.Ch,this.ts,this.es);return this.Kf.push(s),s}addConstantLine(t=!0){const i=t?this.qA:this.KA,s=new Ee(i,this.chart,this.iA,this,this.og,this.Ch,this.ts,this.es);return this.Kf.push(s),s}xg(t){this.Kf.forEach(t)}bg(t){return this.Kf.map(t)}getHighlighters(){return this.Kf}setThickness(t){return"number"==typeof t?(this.Mg=t,this._g=t):"object"==typeof t&&(this.Mg=t.min,this._g=t.max),this.chart.cs.vs(),this}getThickness(){return{min:this.Mg,max:this._g}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}wg(){return this.If}cr(t,i){return new Ao(i,t,this.bA,this.og,this.og)}Yh(){if(this.Cf){for(const t of this.Cf)t[1].grid.dispose(),t[1].tick.dispose();this.Cf.clear()}super.Yh()}dr(t,i){const{tickStart:s}=i,e=t.xh.ur,h=s+e.getTickLength()*this.hg+e.getTickPadding()*this.hg;t.Ye.Ie(this.Ch.toPoint(t.S,h)).za(this.Ch.toPoint(e.getLabelAlignment(),-this.hg)).Gh(e.labelRotation).setVisible(this.getVisible())}Cg(t,i){const{startPosition:s,gridStrokeLen:e,gridStrokeStart:h,tickStart:r}=i,n=t.xh.ur,o=s-e*n.getGridStrokeLength(),a=r+n.getTickLength()*this.hg;return{gridStroke:{start:this.Ch.toPoint(t.S,h),end:this.Ch.toPoint(t.S,o)},tickStroke:{start:this.Ch.toPoint(t.S,r),end:this.Ch.toPoint(t.S,a)}}}wr(t,i){return"linear"===this.Th.type?uo(t,i,this.ft):co(t,i,this.ft)}kg(t,i){return i instanceof Ps?uo:co}kr(t,i,s){if("logarithmic"!==this.Th.type){const e=this.ft.Ri(i-t);return{min:t-s*e,max:i+s*e}}const e=this.ft;return{min:e.mi(t,-s),max:e.mi(i,s)}}Ds(){if(!this.ji)return{Tg:0,Fg:0,Od:0};const t=!(this.Qe.size>0),i=this.Rh&&this.Rh.Lh().length>0&&this.getTitleFillStyle()!==z,s=this.Ch.getHeight(i?this.chart.cs.Pg.Ig(this.getTitle(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0})+(i?this.vg:0),e=this.je===Ge?new Map:Ke(this.je,Math.min(this.Ph,this.Dh),Math.max(this.Ph,this.Dh),this.Ph,this.Dh,0),h=this.ft;let r=0;e.forEach(((i,s)=>{if((t=>void 0!==t.ur&&void 0!==t.ar)(s)){const e=Math.max(...i.map((i=>{if(!Ui(i,this.Ph,this.Dh))return 0;const e=this.chart.cs.Pg.Ig(s.ar(i,h),s.ur.labelFont,s.ur.labelRotation);return t||!e.isEstimate?this.Ch.getHeight(e):0})))+s.ur.tickLength+s.ur.tickPadding+s.ur.labelPadding;r=Math.max(r,e)}}));const n=this.Ff.reduce(this.hA,0);r=Math.max(r,n),r+=this.Sg;const o=Tt(s+r,void 0!==this.Mg?this.Mg:0,void 0!==this._g?this._g:Di);return this.Tf=o,{Tg:r,Fg:s,Od:o}}Fe(t){const i=this.getVisible()&&t.Dg>0;this.Bg=t;const s=this.ug.cu(),e=this.ft.getInnerStart()<this.ft.getInnerEnd()?this.ft.getInnerStart():this.ft.getInnerEnd(),h=this.ft.getInnerEnd()>this.ft.getInnerStart()?this.ft.getInnerEnd():this.ft.getInnerStart(),r=s.getThickness()*this.hg/2,n=this.ng.getInnerInterval(),o=this.eg/100*n,a=o+t.Lg,l=n*this.hg,u=a+r;if(i||this.Yh(),this.je!==Ge&&i){const t=this.ft.ni();this.tr({physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});for(const[i,s]of this.Qe){let e=this.Cf.get(i);if(!e)if(i.Ne)e={grid:this.JA[0].Rg(this.og).setMouseInteractions(!1),tick:this.JA[0].Rg(this.og).setMouseInteractions(!1)};else if("Eg"in i){const t=Array.from(this.Qe.keys()).filter((t=>"Eg"in t)).reverse().indexOf(i),s=this.JA[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");e={grid:s.Rg(this.og).setMouseInteractions(!1),tick:s.Rg(this.og).setMouseInteractions(!1)}}if(e){e.grid.Gt(),e.tick.Gt();for(const[i,h]of s){const i=this.Cg(h,{physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});e.grid.Vr().zg(i.gridStroke.start,i.gridStroke.end),e.tick.Vr().zg(i.tickStroke.start,i.tickStroke.end)}e.grid.Ee(i.ur.getGridStrokeStyle()),e.tick.Ee(i.ur.getTickStyle()),this.Cf.set(i,e)}}}const c=u,d=c+this.hg*t.Vg,f=this.Gf||this.Wf?Math.min(this.Rf,.25*t.Dg):0,A={start:this.Ch.toVec2(this.ft.mi(this.ft.getInnerStart(),f),c),end:this.Ch.toVec2(this.ft.mi(this.ft.getInnerEnd(),-f),d)},g=ct(this.Ch.toVec2(this.ft.getInnerStart(),d),this.og,this.ag),p=ct(A.start,this.og,this.ag),m=ct(A.end,this.og,this.ag),y=ct(this.Ch.toVec2(this.ft.getInnerEnd(),c),this.og,this.ag);this.ug.Oe(this.Ch.toPoint(e,a)).Ve(this.Ch.toPoint(h,a)).setVisible(i),this.cg.Oe(this.Ch.toPoint(this.ft.mi(this.ft.getInnerStart(),this.Df),a)).Ve(this.Ch.toPoint(this.ft.getInnerStart(),a)).setVisible(i),this.dg.Oe(this.Ch.toPoint(this.ft.mi(this.ft.getInnerEnd(),-this.Df),a)).Ve(this.Ch.toPoint(this.ft.getInnerEnd(),a)).setVisible(i);const S=a+t.Tg*this.hg;if(this.Rh.Ie(this.Ch.toPoint(this.Ch.getWidth(ct(hs(rs(g,y),.5),this.ag,this.og)),S)).za(this.Ch.toPoint(0,-1*this.hg)).setVisible(i),this.kf){const i=this.eg/100*n+t.Lg,s=-this.hg*n-t.Lg,e={start:this.Ch.toVec2(this.kf.min,u+this.hg*this.Tf),end:this.Ch.toVec2(this.kf.max,i+s)},h=ct(e.start,this.og,this.ag),r=ct(e.end,this.og,this.ag);this.gg.Ie(h).tt(ns(r,h)).setVisible(!0)}else this.gg.setVisible(!1);this.Ag.Ie(p).tt(ns(m,p)).setVisible(i),this.pg.Ie(g).tt(ns(p,g)).setVisible(i),this.mg.Ie(m).tt(ns(y,m)).setVisible(i);for(const s of this.Ff)s.update().plot(i,a,l,t.Lg,u);for(const t of this.Kf)t.Fe()}setLength(t){return this.Vd=t,this.chart.cs.vs(),this}getLength(){return this.Vd}setMargins(t,i){return this.sA=t,this.eA=i,this.chart.cs.vs(),this}getMargins(){return{start:this.sA,end:this.eA}}getStackIndex(){var t,i;return null!==(i=null===(t=[...this.chart.Og,...this.chart.Ng,...this.chart.Gg,...this.chart.Wg].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==i?i:0}getParallelIndex(){var t,i;return null!==(i=null===(t=[...this.chart.Og,...this.chart.Ng,...this.chart.Gg,...this.chart.Wg].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==i?i:0}Ug(){const t=this.Bg;if(!t)return;const i=this.getVisible()&&t.Dg>0,s=this.ug.cu().getThickness()*this.hg/2,e=this.ng.getInnerInterval(),h=this.eg/100*e+t.Lg,r=e*this.hg,n=h+s;for(const s of this.Ff)s.update().plot(i,h,r,t.Lg,n);for(const t of this.Kf)t.Fe()}Yg(){return this.Tf}Hg(t,i){i=i||no.AxisTickMajor;const s=new wr(this,t?this.JA[0]:this.ig,this.ig,this.ft,this.lg,this.lg,this.Ch,this.rg,this.rA,this.ts,i).setTextFormatter(this.formatValue);return this.Ff.push(s),s}aA(t){this.chart.cs.us._s(t,1),this.Bf=t.cs.Ur(this.Xf,this.Bf)}uA(t){this.chart.cs.us._s(t,0),t.cs.Yr(this.Bf)}fA(t){this.setStopped(!0),t.cs.Yr(this.Bf)}pA(t,i){const s=-this.Ch.getWidth(i);this.pan(s),this.Bf=t.cs.Ur(this.jf,this.Bf)}pan(t){const i=this.Ph,s=this.Dh,e=this.ft.mi(i,t),h=this.ft.mi(s,t);this.Jh(e,h,!1)}zoom(t,i){const s=this.ft.dt(this.Ph),e=this.ft.dt(this.Dh),h=this.ft.dt(t),r=Tt((h-s)/(e-s),0,1),n=.2*this.ft.ni(),o=r*this.Ef*n*-i,a=(1-r)*this.Ef*n*i,l=this.ft.mi(this.Ph,o),u=this.ft.mi(this.Dh,a);this.Jh(l,u,!0)}SA(t){this.kf=void 0,t.cs.Yr(this.Bf)}AA(t,i){this.setStopped(!0),t.cs.Yr(this.Bf),this.chart.cs.us._s(this.Ag,0)}mA(t,i,s,e){const h=ct(this.bA.cs.De(s.x,s.y),this.bA.cs.ft,this.og),r=Tt(this.Ch.getWidth(h),this.Ph,this.Dh),n=this.Ch.getWidth(ct(this.bA.cs.De(i.x,i.y),this.bA.cs.ft,this.og));Math.abs(this.ft.dt(r)-this.ft.dt(n))>10?(this.kf=A(Math.min(r,n),Math.max(r,n)),this.Bf=t.cs.Ur(this.Zf,this.Bf)):(this.kf=void 0,this.Bf=t.cs.Ur(this.Xf,this.Bf)),this.bA.vs()}vA(t,i,s){if(this.kf){const t=this.kf.min,i=this.kf.max,s=this.Dh<this.Ph;this.vt(s?i:t,s?t:i,!0,!0,"interactionSetInterval")}this.kf=void 0,t.cs.Yr(this.Bf)}LA(t){this.chart.cs.us._s(t,1),this.Lf=t.cs.Ur(this.Qf,this.Lf)}EA(t){this.chart.cs.us._s(t,0),t.cs.Yr(this.Lf)}VA(t,i){this.setStopped(!0),this.Lf=t.cs.Ur(this.Jf,this.Lf)}NA(t,i,s,e){const h=this.Ch.getWidth(e);this.Jh(this.ft.mi(this.Ph,h),this.Dh,!0)}WA(t,i,s,e){const h=this.Ch.getWidth(e);this.Jh(this.Ph,this.ft.mi(this.Dh,h),!0)}YA(t,i,s){t.cs.Yr(this.Lf),t.getIsUnderMouse()&&(this.Lf=t.cs.Ur(this.Qf)),this.bA.vs()}addCustomTick(t){return this.Hg(!0,t)}getUiPosition(){return this.eg}setStrokeStyle(t){return this.ug.Ee(t),this.bA.vs(),this}getStrokeStyle(){return this.ug.cu()}getOverlayStyle(){return this.Ag.zh()}setOverlayStyle(t){return this.Ag.ke(t),this.bA.vs(),this}setAxisInteractionZoomByDragging(t){return this.zf=t,this}getAxisInteractionZoomByDragging(){return this.zf}setAxisInteractionPanByDragging(t){return this.Vf=t,this}getAxisInteractionPanByDragging(){return this.Vf}setAxisInteractionZoomByWheeling(t){return this.Of=t,this}getAxisInteractionZoomByWheeling(){return this.Of}setAxisInteractionReleaseByDoubleClicking(t){return this.Nf=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.Nf}setAxisMouseHoverStyle(t=this.Ch.defaultDragMouseStyle){return this.Xf=t,this}getAxisMouseHoverStyle(){return this.Xf}setAxisMousePanStyle(t=this.Ch.defaultDragMouseStyle){return this.jf=t,this}getAxisMousePanStyle(){return this.jf}setAxisMouseZoomStyle(t=this.Ch.defaultDragMouseStyle){return this.Zf=t,this}getAxisMouseZoomStyle(){return this.Zf}setAnimationHighlight(t){return this.chart.cs.us.ws(this.Ag,t),this.chart.cs.us.ws(this.pg,t),this.chart.cs.us.ws(this.mg,t),this}getAnimationHighlight(){return this.chart.cs.us.Cs(this.Ag)}getTitleMargin(){return this.getMarginAfterTicks()}setTitleMargin(t){return this.setMarginAfterTicks(t)}getMarginAfterTicks(){return this.Sg}setMarginAfterTicks(t){return this.Sg=t,this.bA.vs(),this}getMarginAfterTitle(){return this.vg}setMarginAfterTitle(t){return this.vg=t,this.bA.vs(),this}getNibLength(){return this.Df}setNibLength(t){return this.Df=t,this.bA.vs(),this}getNibStyle(){return this.cg.cu()}setNibStyle(t){return this.cg.Ee(t),this.dg.Ee(t),this.bA.vs(),this}getNibOverlayStyle(){return this.pg.zh()}setNibOverlayStyle(t){return this.pg.ke(t),this.mg.ke(t),this.bA.vs(),this}setNibMousePickingAreaSize(t){return this.Rf=t,this.bA.vs(),this}getNibMousePickingAreaSize(){return this.Rf}setNibInteractionScaleByDragging(t){return this.Gf=t,this}getNibInteractionScaleByDragging(){return this.Gf}setNibInteractionScaleByWheeling(t){return this.Wf=t,this}getNibInteractionScaleByWheeling(){return this.Wf}setNibMouseHoverStyle(t=this.Ch.defaultDragMouseStyle){return this.Qf=t,this}getNibMouseHoverStyle(){return this.Qf}setNibMouseScaleStyle(t=this.Ch.defaultDragMouseStyle){return this.Jf=t,this}getNibMouseScaleStyle(){return this.Jf}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.Uf=t,this}getChartInteractionPanByDrag(){return this.Uf}setChartInteractionZoomByWheel(t){return this.Yf=t,this}getChartInteractionZoomByWheel(){return this.Yf}setChartInteractionZoomByDrag(t){return this.Hf=t,this}getChartInteractionZoomByDrag(){return this.Hf}setChartInteractionFitByDrag(t){return this.$f=t,this}getChartInteractionFitByDrag(){return this.$f}Z(){return this.ft.Z(),this}J(){return this.ft.J(),this}dispose(){this.cg.dispose(),this.dg.dispose(),this.ug.dispose(),this.Ag.dispose(),this.gg.dispose(),this.pg.dispose(),this.mg.dispose(),this.Rh.dispose(),this.qh(wt);for(const t of this.Cf.values())t.grid.dispose(),t.tick.dispose();return this.If.slice().forEach(wt),this.Kf.slice().forEach(wt),this.tg(this),this.L.emit("dispose",this),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){this.cg.setVisible(t),this.dg.setVisible(t),this.ug.setVisible(t),this.Rh.setVisible(t),this.Ag.setVisible(t),this.pg.setVisible(t),this.mg.setVisible(t),this.qh((i=>{i.ys(t)}));for(const i of this.Cf.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.chart.cs.vs(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.ih),this}}const po={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>l(t,i)},mo={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>l(i,t)},yo=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof go&&"y"in t&&t.y instanceof go),So=t.Record({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new Qs,tickLength:7,tickStyle:new Qs,tickPadding:0,labelFont:new eh,labelFillStyle:new G,labelPadding:0,labelAlignment:0,labelRotation:0});class vo extends So{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelPadding(t){return this.set("labelPadding",t)}getLabelPadding(){return this.get("labelPadding")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const xo=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),bo=new vo({labelFillStyle:z,gridStrokeStyle:rt,tickStyle:rt}),Mo=t=>xo(t)&&V(t.labelFillStyle)&&nt(t.gridStrokeStyle)&&nt(t.tickStyle),_o=(t,i,s,e,h)=>(r,n)=>o=>{const a=new Date(o+r),l={year:n?a.getUTCFullYear():a.getFullYear(),monthIndex:n?a.getUTCMonth():a.getMonth(),day:n?a.getUTCDate():a.getDate(),hours:n?a.getUTCHours():a.getHours(),minutes:n?a.getUTCMinutes():a.getMinutes(),seconds:n?a.getUTCSeconds():a.getSeconds(),millis:n?a.getUTCMilliseconds():a.getMilliseconds()},u=e?e(l):void 0;if(0===t&&!0===u)return o;const c=l[i];h.includes("year")&&(l.year=Math.floor(l.year/s)*s),h.includes("monthIndex")&&(l.monthIndex=0),h.includes("day")&&(l.day=1),h.includes("hours")&&(l.hours=0),h.includes("minutes")&&(l.minutes=0),h.includes("seconds")&&(l.seconds=0),h.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*s;return-1===t&&!1===u&&(d=0),0!==d&&(l[i]=s*(d>0?Math.floor((c+d)/s):Math.ceil((c+d)/s))),n?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-r:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-r},wo=(t,i,s,...e)=>_o(-1,t,i,s,e),Co=(t,i,s,...e)=>_o(-1,t,i,s,e),ko=(t,i,s,...e)=>_o(0,t,i,s,e),To=(t,i,...s)=>_o(1,t,i,void 0,s),Fo=t=>(i,s)=>e=>{const h=new Date(e+i),r=s?h.getUTCDay():h.getDay(),n=1===r&&0===(s?h.getUTCHours():h.getHours())&&0===(s?h.getUTCMinutes():h.getMinutes())&&0===h.getSeconds()&&0===h.getMilliseconds();if(0===t&&!0===n)return e;let o=s?h.getUTCDate():h.getDate();return-1===t&&1===r&&!1===n||(-1===t?o-=r>=2?r-1:r+6:o+=r>0?8-r:1),s?Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),o,0,0,0,0)-i:new Date(h.getFullYear(),h.getMonth(),o,0,0,0,0).getTime()-i},Io=[{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:$e({ignore:"first"},2,5)},minorTicks:{amount:4,fitFunction:$e(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:wo("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:Xe(5,10,15,30)},minorTicks:{amount:4,fitFunction:$e(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:wo("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:Xe(5,10,15,30)},minorTicks:{amount:12,fitFunction:$e(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:wo("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:Xe(3,6,12)},minorTicks:{amount:8,fitFunction:$e(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:wo("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:$e({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:$e({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:Fo(-1),getNextKeyValueIncludingRef:Fo(0),getNextKeyValue:Fo(1),greatTicks:!0,majorTicks:{fitFunction:$e(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:Co("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ko("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:To("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:$e(void 0,2,3)},minorTicks:{fitFunction:$e(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:Co("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ko("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:To("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:$e({ignore:"first"},2,5)},minorTicks:{fitFunction:$e(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:Co("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ko("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:To("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:$e(void 0,2,4)},minorTicks:{fitFunction:$e(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:Co("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ko("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:To("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:Co("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ko("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:To("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],Po=(t,i,s)=>{let e=((t,i,s,e,h)=>{const r=i-t;let n;for(let t=0;t<Io.length;t+=1){const i=r/Io[t].unit;if(i<=1){n=Io[t];break}}return n})(i,s);if(void 0!==e&&0===Io.indexOf(e)&&(e=Io[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=Io[Io.indexOf(e)-h];return void 0===r?Io[0]:r},Do=(t,i,s)=>(e,h,r,n)=>{const o=Po("great",e,h);if(void 0===o)return[];if("Decade"===o.label||"Century"===o.label||"Millennium"===o.label)return[];const a=n>r?e:h,l=(e+h)/2,u=n>r?h:e;if(Io.indexOf(o)<=Io.findIndex((t=>"Hour"===t.label)))return"left"===s?[a]:[];let c;if(!0===o.irregular)c=He(e,h,o.getPrevKeyValue(t,i),o.getNextKeyValue(t,i));else{const s=o.greatTicks.getReferenceKeyValue(t,i)(e);c=Ye(e,h,o.unit,s,1)}const d=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(e,h,c);return"left"===s?void 0===d||Ui(d,l,u)?[a]:[d]:void 0!==d&&Ui(d,l,u)?[d]:[u]},Bo=(t,i,s)=>(e,h,r,n)=>{const o=Po(t,r,n);let a;if(void 0===o)return[];if("great"===t&&void 0!==o.greatTicks)if(!0===o.irregular)a=He(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s));else{const t=o.greatTicks.getReferenceKeyValue(i,s)(e);a=Ye(e,h,o.unit,t,1)}else if("major"===t&&void 0!==o.majorTicks)a=!0===o.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s)):((t,i,s)=>{const e=[];let h=t,r=0;for(;h<i;)if(e.push(h),h+=s,r+=1,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(e,h,o.unit);else{if("minor"!==t||void 0===o.minorTicks)return[];if(!0===o.irregular)a=((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(e,h,o.getNextKeyValueIncludingRef(i,s),o.getNextKeyValue(i,s));else{const t=(t=>{if(void 0!==t)return Io[Io.indexOf(t)+1]})(o);if(void 0===t)return[];a=Ue(e,h,t.unit/o.minorTicks.amount,1)}}return a},Lo=t=>(i,s,e,h,r,n)=>{const o=Po(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},Ro=t.Record({type:"date-time-ticks",utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new vo,majorTickStyle:new vo,minorTickStyle:new vo,formatOptionsMajorCentury:{year:"numeric"},formatOptionsMinorDecade:{year:"numeric"},formatOptionsMajorDecade:{year:"numeric"},formatOptionsMinorYear:{year:"numeric"},formatOptionsMajorYear:{year:"numeric"},formatOptionsMinorMonth:{month:"short"},formatOptionsGreatYear:{year:"numeric"},formatOptionsMajorMonth:{month:"long"},formatOptionsMinorWeek:{day:"numeric"},formatOptionsGreatMonth:{year:"numeric",month:"long"},formatOptionsMajorWeek:{day:"numeric",weekday:"short"},formatOptionsMinorDay:{day:"numeric",weekday:"short"},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long"}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric"},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},formatOptionsMajorSecond:{second:"2-digit"},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return`${(i.getSeconds()+i.getUTCMilliseconds()/1e3).toFixed(2)}`},formatOptionsGreatSecond:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsMajorMilliSecond:t=>{const i=new Date(t);return`${(i.getSeconds()+i.getUTCMilliseconds()/1e3).toFixed(1)}`}});class Eo extends Ro{Hh(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>Io.map((i=>{const s=((t,i,s)=>{switch(s.label){case"MilliSecond100":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorMilliSecond:t.formatOptionsMinorMillisecond;case"Second":return"Great"===i?t.formatOptionsGreatSecond:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;xt.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r+i;const a=n.getInnerStart(),l=n.getInnerEnd(),u=a>l,c=Po(t,u?l:a,u?a:l);if(void 0===c)return h(o);if("great"===t){const t=kt(r,"left"===s?a:l);let e;if(e=!1===t?r:!1===c.irregular?"left"===s&&!1===u||"right"===s&&!0===u?c.greatTicks.getReferenceKeyValue(i,this.utc)(r):c.greatTicks.getReferenceKeyValue(i,this.utc)(r+1*c.unit):"left"===s&&!1===u||"right"===s&&!0===u?c.getPrevKeyValue(i,this.utc)(r):c.getNextKeyValue(i,this.utc)(r),o=e+i,"right"===s&&!0===t)return""}const d=e.get(t);if(void 0===d)return h(o);const f=d[Io.indexOf(c)];return void 0===f?"":"function"==typeof f?f(o,n,this.locale):f.format(o)},n=[],o=[{Ye:"Great ticks (directive)",Eg:0,Ge:!0,Lr:Bo("great",i,this.utc),Rr:void 0},{Ye:"Major ticks",Eg:1,ur:this.majorTickStyle,ar:r("major"),Lr:Bo("major",i,this.utc),bh:{Ar:Lo("major")},Rr:void 0}];Mo(this.greatTickStyle)||(n.push({Ye:"Great ticks (left)",ur:this.greatTickStyle.setLabelAlignment(-1),ar:r("great","left"),Lr:Do(i,this.utc,"left"),Ne:!0,mr:!1}),n.push({Ye:"Great ticks (right)",ur:this.greatTickStyle.setLabelAlignment(1),ar:r("great","right"),Lr:Do(i,this.utc,"right"),Ne:!0,mr:!1})),Mo(this.minorTickStyle)||o.push({Ye:"Minor ticks",Eg:2,ur:this.minorTickStyle,ar:r("minor"),Lr:Bo("minor",i,this.utc),bh:{Ar:Lo("minor"),Mh:(t,i,s,e,h,r)=>{const n=Po("minor",h,r);return!n||"Week"!==n.label}},Rr:void 0});const a=this.cursorFormatter;return{$e:n,Xe:o,We:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=new Date(i+t);return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric",minute:"2-digit",hour:"2-digit"}).format(h)} `},jh:1e3,Zh:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return this.set("greatTickStyle",t(i))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsGreatSecond",t||this.formatOptionsGreatSecond).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMajorMilliSecond",i||this.formatOptionsMajorMilliSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const zo=(t,i)=>(s,e)=>{const h=e-s;if(i){const i=Math.log10(h/2);let r=10**Math.floor(i-t);const n=1/r;r=Math.round(r*n)/n;const o=Math.round(Math.floor(s/(10*r))*r*10*n)/n;return Ye(o,e,r,void 0,n)}const r=Math.log10(h);let n=10**Math.round(r-t);const o=1/n;return n=Math.round(n*o)/o,Ue(s,e,n,o)},Vo=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):void 0,Oo=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%3==0)):2===i?t.filter(((t,i)=>i%4==0)):3===i?t.filter(((t,i)=>i%5==0)):void 0,No=$e(void 0,2,5),Go=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,Wo=(t,i)=>{const s=Ms(t),e=_s(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,l=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},Uo=t.Record({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new vo,majorTickStyle:new vo,minorTickStyle:new vo,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class Yo extends Uo{Hh(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(i,s)=>Fs.LogarithmicNoExponents(i,s,void 0,t.base):Fs.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Fs.LogarithmicNoExponents(i,s,void 0,t.base):Fs.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Fs.LogarithmicNoExponents(i,s,void 0,t.base):Fs.Numeric),r=[],n=[];Mo(this.extremeTickStyle)||r.push({Ye:"Extreme ticks",ur:this.extremeTickStyle,ar:void 0===i?s:(t,e,h)=>s(i+t,e,h),Lr:We,Ne:!0,mr:!0}),n.push({Ye:"Major ticks",Eg:0,ur:this.majorTickStyle,ar:void 0===i?e:(t,s,h)=>e(i+t,s,h),Lr:"logarithmic"===t.type?Wo(t.base,!0):zo(0,!0),bh:"logarithmic"===t.type?{Ar:Oo}:{Ar:Vo},Rr:void 0}),Mo(this.minorTickStyle)||n.push({Ye:"Minor ticks",Eg:1,ur:this.minorTickStyle,ar:void 0===i?h:(t,s,e)=>h(i+t,s,e),Lr:"logarithmic"===t.type?Wo(t.base,!1):zo(1,!1),bh:"logarithmic"===t.type?{Ar:Go}:{Ar:No},Rr:50});const o=this.cursorFormatter?this.cursorFormatter:Fs.Numeric;return{$e:r,Xe:n,We:void 0===i?o:(t,s,e)=>o(i+t,s,e),jh:1e-9,Zh:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(i))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const i=this.setMajorTickStyle(t).setMinorTickStyle(t);return i.extremeTickStyle!==bo?i.setExtremeTickStyle(t):i}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const Ho=t.Record({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new vo,minorTickStyle:new vo,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),$o=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=36e5?"MajorHours":s>=6e5?"MajorMinutes15":s>=9e4?"MajorMinutes":s>=10500?"MajorSeconds15":s>=1e3?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},Xo={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);return`${s}${ci(e,2)}:${ci(h,2)}:${ci(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);i%=1e3;const n=Math.floor(i/1);return`${s}${ci(e,2)}:${ci(h,2)}:${ci(r,2)}.${ci(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${ci(e,2)}:${ci(h,2)}:${ci(r,2)}.${ci(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${ci(e,2)}:${ci(h,2)}:${ci(r,2)}.${ci(n,3)}${o}`}},jo={MajorHours12:{major:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,Ye(t,i,h,void 0,1e6)},fitKeyValues:$e({ignore:"first"},2,4)},minor:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>Ue(t,i,36e5,1e6),fitKeyValues:$e({},2,3,4,6)},defaultValueFormatter:Xo.hhmmss},MajorHours:{major:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>{const h=36e5;return t=Math.floor(t/(12*h))*h*12,Ye(t,i,h,void 0,1e6)},fitKeyValues:$e({ignore:"first"},2,6,12)},minor:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>Ue(t,i,3e5,1e6),fitKeyValues:$e({},2,4,6)},defaultValueFormatter:Xo.hhmmss},MajorMinutes15:{major:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>(t=36e5*Math.floor(t/36e5),Ye(t,i,9e5,void 0,1e6)),fitKeyValues:$e({ignore:"first"},2)},minor:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>Ue(t,i,6e4,1e6),fitKeyValues:$e({},3,5)},defaultValueFormatter:Xo.hhmmss},MajorMinutes:{major:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>{const h=6e4;return t=Math.floor(t/6e5)*h*10,Ye(t,i,h,void 0,1e6)},fitKeyValues:$e({ignore:"first"},2,5)},minor:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>Ue(t,i,5e3,1e6),fitKeyValues:$e({},2,3,4,6)},defaultValueFormatter:Xo.hhmmss},MajorSeconds15:{major:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,Ye(t,i,h,void 0,1e6)},fitKeyValues:$e({ignore:"first"},2,4)},minor:{format:Xo.hhmmss,getKeyValues:(t,i,s,e)=>Ue(t,i,1e3,1e6),fitKeyValues:$e({},3,5)},defaultValueFormatter:Xo.hhmmss},MajorSeconds:{major:{format:Xo.hhmmssmmm,getKeyValues:(t,i,s,e)=>{const h=1e3;return t=Math.floor(t/1e4)*h*10,Ye(t,i,h,void 0,1e6)},fitKeyValues:$e({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmm,getKeyValues:(t,i,s,e)=>Ue(t,i,100,1e6),fitKeyValues:$e({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmm},MajorMilliseconds100:{major:{format:Xo.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,Ye(t,i,100,void 0,1e6)),fitKeyValues:$e({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmm,getKeyValues:(t,i,s,e)=>Ue(t,i,10,1e6),fitKeyValues:$e({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmm},MajorMilliseconds10:{major:{format:Xo.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,Ye(t,i,10,void 0,1e6)),fitKeyValues:$e({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmm,getKeyValues:(t,i,s,e)=>Ue(t,i,1,1e6),fitKeyValues:$e({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmm},MajorMilliseconds:{major:{format:Xo.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,Ye(t,i,1,void 0,1e6)),fitKeyValues:$e({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Ue(t,i,.1,1e6),fitKeyValues:$e({},2)},defaultValueFormatter:Xo.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:Xo.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,Ye(t,i,.1,void 0,1e6)),fitKeyValues:$e({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Ue(t,i,.01,1e6),fitKeyValues:$e({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:Xo.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,Ye(t,i,h,void 0,1e6)},fitKeyValues:$e({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Ue(t,i,.001,1e6),fitKeyValues:$e({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmmuuu},MajorMicroseconds:{major:{format:Xo.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,Ye(t,i,h,void 0,1e6)},fitKeyValues:$e({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Ue(t,i,100*1e-6,1e6),fitKeyValues:$e({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:Xo.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*1e-6;return t=Math.floor(t/.001)*h*10,Ye(t,i,h,void 0,1e6)},fitKeyValues:$e({ignore:"first"},2,5)},minor:{format:Xo.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Ue(t,i,10*1e-6,1e6),fitKeyValues:$e({},2,3,5)},defaultValueFormatter:Xo.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class Zo extends Ho{Hh(t){const i=this.timeOrigin||0,s=[{Ye:"Major ticks",Eg:0,ur:this.majorTickStyle,ar:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const h=$o(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,jo[h].major.format)(t+i,s,e)},Lr:(t,i,s,e)=>{const h=$o(s,e);return(0,jo[h].major.getKeyValues)(t,i,s,e)},bh:{Ar:(t,i,s,e,h,r)=>{const n=$o(h,r),o=jo[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Rr:void 0}];return xo(this.minorTickStyle)&&s.push({Ye:"Minor ticks",Eg:1,ur:this.minorTickStyle,ar:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const h=$o(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,jo[h].minor.format)(t+i,s,e)},Lr:(t,i,s,e)=>{const h=$o(s,e);return(0,jo[h].minor.getKeyValues)(t,i,s,e)},bh:{Ar:(t,i,s,e,h,r)=>{const n=$o(h,r),o=jo[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Rr:void 0}),{$e:[],Xe:s,We:this.cursorFormatter||((t,s,e)=>{const h=$o(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return jo[h].defaultValueFormatter(t+i,s,e)}),jh:1e-4,Zh:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const Qo=(t,i,s="image/png",e)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(xt.navigator.msSaveBlob)xt.navigator.msSaveBlob(h,i);else{const t=xt.document.createElement("a");xt.document.body.appendChild(t);const s=xt.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{xt.URL.revokeObjectURL(s),xt.document.body.removeChild(t)}),0)}},Jo=(t,i,s,e,h,r)=>{const n=t.Qu(i,s,e,h,r,!0);return n.setDraggingMode(exports.UIDraggingModes.draggable),n},Ko=(t,i)=>{if("relative"===t)return i;if(t instanceof Bs)return t;const s=t.x instanceof Qe?t.x.ft:t.x.x,e=t.y instanceof Qe?t.y.ft:t.y.y;return Es(s,e)},qo=(t,i,s,e,h)=>{if(s){const r=t,n=i,o=yo(n)?n:Os(n)?e:void 0;if(o&&zs(s)){const t=ct(r,o,h.ft);return h.Bo({engineX:t.x,engineY:t.y})}if(o&&Os(s))return ct(r,o,e);if(o&&yo(s))return ct(r,o,s)}else{const s=t;if(Os(i)){const t=h.Do(s);return ct({x:t.engineX,y:t.engineY},h.ft,e)}if(yo(i)){const t=i,e=h.Do(s);return ct({x:e.engineX,y:e.engineY},h.ft,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class ta{constructor(t,s,e,h,r,n,o,a){this.coordsRelative="relative",this.coordsClient="client",this.$g=[],this.Xg=[],this.L=new i.Eventer,this.jg=void 0,this.Zg=void 0,this.Qg=void 0,this.jt=m(0,0,0,0),this.Jg=!1,this.Xi=!1,this.Kg=()=>{this.qg=!0,this.tp.vs()},this.ip=t=>i=>{const s=this.$g.indexOf(i);-1!==s&&this.$g.splice(s,1),this.cs.vs(),t.U()},this.sp=t=>{const i=this.Xg.indexOf(t);-1!==i&&this.Xg.splice(i,1),this.cs.vs()},this.qg=!0,this.onInViewChange=t=>this.L.on("inViewChange",t),this.offInViewChange=t=>this.L.off(t,"inViewChange"),this.dA=t,this.ep=e,this.tp=h,this.removePanel=r,this.ts=s.cs.ts;const u=s.cs.ai();if(this.uiScale=e.d2({scaleXYConstructor:Ls}).Oi(0,100).Ni(0,100).tt(u),this.pixelScale=e.d2({scaleXYConstructor:Ls}).Oi(0,this.uiScale.x.getCellSize()).Ni(0,this.uiScale.y.getCellSize()).tt(u),this.engine=s.cs.hp,this.cs=s.cs.rp,this.hs=this.cs.hs.rs(this,{}),this.np=()=>s.op("unidentified ui"),this.ap=s.lp(),this.up=this.tp.Te(this.uiScale).Ie(l(0,0)).tt(l(100,100)).ke(n).Ce(o).setMouseMoveEventHandler(((t,i)=>this.L.emit("mouseMovePanelBackground",this,i))).setMouseEnterEventHandler(((t,i)=>this.L.emit("mouseEnterPanelBackground",this,i))).setMouseLeaveEventHandler(((t,i)=>this.L.emit("mouseLeavePanelBackground",this,i))).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownPanelBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpPanelBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickPanelBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickPanelBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelPanelBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartPanelBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragPanelBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopPanelBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.L.emit("touchStartPanelBackground",this,i))).setTouchMoveEventHandler(((t,i)=>this.L.emit("touchMovePanelBackground",this,i))).setTouchEndEventHandler(((t,i)=>this.L.emit("touchEndPanelBackground",this,i))),a){const t=a.on(this.Kg);this.cp=()=>a.off(t)}else{const t=s.cs.ko(this.Kg);this.dp=s.cs.To.bind(s.cs,t)}const c=s.cs.Io((t=>{this.Jg=t,this.L.emit("inViewChange",this,t)}));this.fp=s.cs.Po.bind(s.cs,c),this.jg=r}getTheme(){return this.ts}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.up.ke(t),this.tp.vs(),this}getBackgroundFillStyle(){return this.up.zh()}setBackgroundStrokeStyle(t){return this.up.Ce(t),this.tp.vs(),this}getBackgroundStrokeStyle(){return this.up.lo()}translateCoordinate(t,i,s){return qo(t,i,s,this.pixelScale,this.cs)}Ap(t){return this.$g.push(t),this.cs.vs(),t}gp(t){return this.Xg.push(t),this.cs.vs(),t}addUIElement(t=Nn,i=this.uiScale){i=Ko(i,this.pixelScale);const s=this.np();return this.Ap(Jo(t,s,this.uiScale,i,this.ip(s),this.ts))}addLegendBox(t=Kn,i=this.uiScale){i=Ko(i,this.pixelScale);const s=this.gp(Jo(t,this.ap,this.uiScale,i,this.sp,this.ts));return s.setDraggingMode(exports.UIDraggingModes.notDraggable),void 0!==i&&i!==this.uiScale||(void 0===t||"vertical"===t.getAlignment()?s.setOrigin(we.RightCenter).setPosition({x:100,y:50}):s.setOrigin(we.CenterBottom).setPosition(this.uiScale.mi({x:50,y:0},{x:0,y:3}))),s}getLegendBoxes(){return this.Xg}dispose(){return this.Xi||(this.Xi=!0,this.dp&&this.dp(),this.cp&&this.cp(),ia(this.uiScale),ia(this.pixelScale),this.fp&&this.fp(),this.Zg&&this.Zg(),this.tp.U(),this.ap.U(),this.$g.slice().forEach((t=>{t.dispose()})),this.Xg.slice().forEach((t=>{t.dispose()})),this.cs.vs(),this.jg&&this.jg(this),this.L.emit("dispose",this)),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}saveToFile(t,i,s){return Qo(this.engine,t,i,s),this}Ir(t){this.jt=t,this.Kg()}Z(){return this.pixelScale.Z(),this.uiScale.Z(),this}J(){return this.pixelScale.J(),this.uiScale.J(),this}Fe(t){if(this.qg){const t=this.tp.cs.ai(),i=t.x,s=t.y;this.uiScale.tt(i,s),this.pixelScale.tt(i,s);const e=[this.jt.left,this.jt.right],h=[this.jt.bottom,this.jt.top];this.uiScale.zi(e),this.uiScale.Vi(h);const r=this.uiScale.getInnerIntervalPixels();this.pixelScale.Oi(0,r.x).zi(e).Ni(0,r.y).Vi(h),this.L.emit("resize",this,r.x,r.y,i,s)}this.qg=!1}pp(){for(let t=0;t<this.$g.length;t+=1)this.$g[t].Ds().Fe();for(let t=0;t<this.Xg.length;t+=1)this.Xg[t].Ds().Fe();this.Qg&&this.Qg()}mp(t,i){if(t){const s=t(i);this.onResize(s.Ds.bind(s)),this.Zg=s.U.bind(s),this.Qg=s.Ds.bind(s)}}onBackgroundMouseEnter(t){return this.L.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.L.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.L.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.L.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.L.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.L.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.L.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.L.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.L.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.L.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.L.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.L.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.L.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.L.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.L.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.L.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.L.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.L.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.L.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.L.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.L.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.L.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.L.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.L.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.L.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.L.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.L.off(t,"touchEndPanelBackground")}onResize(t){return this.L.on("resize",t)}offResize(t){return this.L.off(t,"resize")}getIsInView(){return this.Jg}}const ia=t=>{t.si&&t.si()};class sa extends ta{constructor(t,i,s,e,h,r){super(t,i,s,i.yp("uipanel bg",0),e,i.cs.ts.uiPanelBackgroundFillStyle,i.cs.ts.uiPanelBackgroundStrokeStyle,r),this.mp(h,this.pixelScale)}setMinimumSize(t){return this.Md=t,this.cs.vs(),this}getMinimumSize(){return this.Md}Fe(t){super.Fe(t),super.pp()}}const ea=m(10,10,10,10);class ha extends ta{constructor(t,i,s,e,h,r,n,o,a,u){super(t,i,s,e,h,r,n,u),this.Sp={},this.ya=ea,this.ih=!0,this.vp=i.xp("chart internal ui",0),this.bp=this.vp.Dr(this.uiScale).Eh("Chart").Ie(l(50,100)).za(l(0,1)).Nh(o).ke(a).setMouseInteractions(!1),this.Mp=this.hs.yg([this.bp]).Ss(this.ts.effectsText)}setAnimationsEnabled(t){return this.ih=t,this}getAnimationsEnabled(){return this.ih}setTitle(t){return this.bp.Eh(t),this.cs.vs(),this}getTitle(){return this.bp.Lh()}getTitleSize(){return this.bp.Ds().Zc()}setTitleFillStyle(t){return this.bp.ke(t),this.Kg(),this}getTitleFillStyle(){return this.bp.zh()}setTitleFont(t){return this.bp.Nh(t),this.Kg(),this}getTitleFont(){return this.bp.Oh()}setTitleRotation(t){return this.bp.Gh(t),this.cs.vs(),this}getTitleRotation(){return this.bp.Wh()}setTitleEffect(t){return this.Mp.Ss(t),this.cs.vs(),this}getTitleEffect(){return this.Mp.xs()}setTitleMargin(t){var i,s;return this.Sp="object"==typeof t?this.Sp?(i=this.Sp,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.Kg(),this}getTitleMargin(){return this.Sp}setPadding(t){return this.ya="object"==typeof t?S(this.ya,t):{left:t,top:t,right:t,bottom:t},this.Kg(),this}getPadding(){return this.ya}_p(t){const i=t.wp(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.vp.U(),this}}const ra={Cp:(t,i)=>t.zh()!==z&&0!==t.Lh().length&&t.getVisible()?t.Ds().Zc().y:0,kp(t,i){t.Ie(l(50,100)).Ir({top:void 0!==i.top?i.top:10,right:i.right||0,left:i.left||0,bottom:i.bottom||0})}};var na;exports.AutoCursorModes=void 0,(na=exports.AutoCursorModes||(exports.AutoCursorModes={}))[na.disabled=0]="disabled",na[na.snapToClosest=1]="snapToClosest",na[na.onHover=2]="onHover";const oa={Tp(t,i,s,e,h,r){let n;const o=t.getAutoCursorMode();if(!s&&o!==exports.AutoCursorModes.disabled){const s=t.cs.Nn(),a=e.find((t=>t.getIsUnderMouse()));o===exports.AutoCursorModes.snapToClosest&&h?(i||void 0!==a)&&(n=s&&h(s)):void 0===a||a.getCursorEnabled&&!a.getCursorEnabled()||(n=s&&r(a,s))}n?t.Fp.pointAt(n).setVisible(!0):t.Fp.setVisible(!1),t.Fp.Ds().Fe()},$c(t,i,s){if(i.x<t.uiScale.x.hi()||i.x>t.uiScale.x.ri()||i.y<t.uiScale.y.hi()||i.y>t.uiScale.y.ri())return;let e,h=Number.MAX_VALUE;for(const r of s)if(r.getCursorEnabled()&&r.getVisible()){const s=r.$c(i);if(s){const r=ct(s.location,s.scale,t.engine.scale),n=Yi(i,r);Number.isNaN(n)||e&&!(n<h)||(e=s,h=n)}}return e||void 0},Ip(t){t.onSeriesBackgroundMouseEnter((()=>{t.getAutoCursorMode()!==exports.AutoCursorModes.disabled&&t.cs.vs()})),t.onSeriesBackgroundMouseMove((()=>{t.getAutoCursorMode()!==exports.AutoCursorModes.disabled&&t.cs.vs()})),t.onSeriesBackgroundMouseLeave((()=>{t.getAutoCursorMode()!==exports.AutoCursorModes.disabled&&t.cs.vs()})),t.onSeriesBackgroundTouchStart((()=>{t.getAutoCursorMode()!==exports.AutoCursorModes.disabled&&t.cs.vs()})),t.onSeriesBackgroundTouchMove((()=>{t.getAutoCursorMode()!==exports.AutoCursorModes.disabled&&t.cs.vs()})),t.onSeriesBackgroundTouchEnd((()=>{t.getAutoCursorMode()!==exports.AutoCursorModes.disabled&&t.cs.vs()}))},Pp(t,i){i.onMouseEnter(((i,s)=>{t.getAutoCursorMode()!==exports.AutoCursorModes.disabled&&t.cs.vs()})),i.onMouseMove(((i,s)=>{t.getAutoCursorMode()!==exports.AutoCursorModes.disabled&&t.cs.vs()})),i.onMouseLeave((()=>{t.getAutoCursorMode()!==exports.AutoCursorModes.disabled&&t.cs.vs()}))}};class aa{constructor(t,i){this.Dp=t,this.Bp=i}alter(t){this.Lp=void 0!==this.Lp?this.Lp:this.Bp(),this.Rp=t,this.Dp(t)}resetValue(){void 0!==this.Rp&&(void 0!==this.Lp&&this.isAltered()&&this.Dp(this.Lp),this.Lp=void 0,this.Rp=void 0)}getNormalValue(){return void 0!==this.Lp?this.Lp:this.Bp()}isAltered(){return void 0!==this.Rp&&this.Bp()===this.Rp}}class la{constructor(t,i){this.Ep=[],this.zp=t,this.ft=i}update(){return this.zp.getVisible()?!(this.Vp()&&(!this.Op()||(this.resetTable(),this.zp.Ds(),this.Vp()))&&(this.Np(),this.zp.Ds(),this.Vp()&&(this.resetTable(),this.zp.Ds(),1))):(this.Op()&&this.resetTable(),!0)}Op(){for(let t=0;t<this.Ep.length;t+=1)if(this.Ep[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.Ep.length;t+=1)this.Ep[t].resetValue();return this}Vp(){return((t,i)=>{const s=ct(t.getPosition(l(-1,-1),exports.UISpace.PaddedBackground),t.scale,i),e=ct(t.getPosition(l(1,1),exports.UISpace.PaddedBackground),t.scale,i);return s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd()||s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()})(this.zp,this.ft)}Gp(){return((t,i)=>{const s=ct(t.getPosition(l(-1,-1),exports.UISpace.PaddedBackground),t.scale,i),e=ct(t.getPosition(l(1,1),exports.UISpace.PaddedBackground),t.scale,i);return s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd()})(this.zp,this.ft)}Wp(){return((t,i)=>{const s=ct(t.getPosition(l(-1,-1),exports.UISpace.PaddedBackground),t.scale,i),e=ct(t.getPosition(l(1,1),exports.UISpace.PaddedBackground),t.scale,i);return s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()})(this.zp,this.ft)}Yp(t){return this.Ep.push(t),t}}class ua extends la{constructor(){super(...arguments),this.ma=this.Yp(new aa((t=>this.zp.setOrigin(t)),(()=>this.zp.getOrigin())))}Np(){const t=this.ma.getNormalValue(),i=l(this.Gp()?-t.x:t.x,this.Wp()?-t.y:t.y);this.ma.alter(i)}}class ca extends la{constructor(t,i,s,e){super(t,i),this.Hp=this.Yp(new aa((t=>this.zp.setTextFont((i=>i.setSize(t)))),(()=>this.zp.getTextFont().getSize()))),this.$p=s,this.Xp=e}Np(){const t=this.Hp.getNormalValue(),i=this.$p;if(i<t)for(let s=1;s<=this.Xp;s+=1){const e=t-(t-i)*(s/this.Xp);if(this.Hp.alter(e),this.zp.Ds(),!this.Vp())return}}}const da={Flip:(t,i)=>new ua(t,i),FontSize:(t=5,i=5)=>(s,e)=>new ca(s,e,t,i)};class fa{constructor(){this.jp=[]}addRow(...t){return this.jp.push(t),this}}class Aa extends fa{Qu(){const t=this.jp;return this.jp=[],t}Zp(){return this.jp.length=0,this}}class ga extends In{constructor(){super(...arguments),this.Gu=this.ts.cursorResultTableTextFont,this.Bd=0,this.Qp=this.ts.cursorResultTableTextFillStyle}setContent(t){for(let i=0;i<t.length;i+=1){const s=t[i];let e=!1;for(let t=0;t<s.length;t+=1){const i=s[t],h="object"==typeof i&&"text"in i?i.text:"string"==typeof i?i:void 0,r="object"==typeof i&&"icon"in i?i.icon:on(i)?i:void 0;if((void 0===h||0===h.length)&&!r){e=!0;break}}e||(s.unshift(""),s.push(""))}this.Jp();const i=t.length;let s=this.getMembers().length;for(let e=0;e<Math.max(i,s);e+=1){const h=this.getRow(e,!0);if(e>=i)this.getMembers()[e].dispose(),e-=1,s-=1;else{const i=t[e].length;let s=h.getMembers().length;for(let r=0;r<Math.max(i,s);r+=1){const n=t[e][r],o="object"==typeof n&&"font"in n?n.font:void 0,a="object"==typeof n&&"fillStyle"in n?n.fillStyle:void 0,l="object"==typeof n&&"text"in n?n.text:"string"==typeof n?n:void 0,u="object"==typeof n&&"icon"in n?n.icon:on(n)?n:void 0,c=h.getMembers();if(r>=i)h.getMembers()[r].dispose(),r-=1,s-=1;else if(void 0!==l&&l.length>0||u){for(let t=c.length;t<r;t+=1)h.addGap(void 0,void 0);const t=o?this.Gu.withMutations((t=>{for(const i of Object.keys(o)){const s=o[i];t.set(i,s)}return t})):this.Gu,i=a||this.Qp,s=c[r];if(l){let e;s&&s instanceof mn?e=s:(s&&s.dispose(),e=h.addElement(yn,r)),e.setFont(t).setFillStyle(i).setText(l).setTextRotation(this.Bd)}else if(u){let e;s&&s instanceof Mn?e=s:(s&&s.dispose(),e=h.addElement(_n,r)),e.setFillStyle(i).setShape(u).setSize({y:t.size,x:t.size}),e.setMargin(5)}}else{for(let t=c.length;t<r;t+=1)h.addGap(void 0,void 0);const t=c[r];t&&t instanceof wn||(t&&t.dispose(),h.addGap(void 0,r))}}}}return this.Ts.vs(),this}setTextFillStyle(t){this.Qp="function"==typeof t?t(this.Qp):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof mn&&s.setFillStyle(this.Qp)}}return this.Ts.vs(),this}getTextFillStyle(){return this.Qp}setTextFont(t){return hh(t)?this.Gu=t:this.Gu=t(this.Gu),this.Ts.vs(),this}getTextFont(){return this.Gu}setTextRotation(t){return this.Bd=t,this.Ts.vs(),this}getTextRotation(){return this.Bd}Jp(){for(let t=0;t<this.vd.length;t+=1)for(let i=0;i<this.vd[t].getMembers().length;i+=1)this.vd[t].getMembers()[i].dispose()}Ds(){for(let t=0;t<this.vd.length;t+=1)this.vd[t].setMinimumSize(void 0);super.Ds();for(let t=0;t<this.vd.length;t+=1)this.vd[t].setMinimumSize(this.size.x);return super.Ds(),this}}class pa{constructor(t,i,s,e,h){this.Kp=!0,this.qp=!0,this.Jg=!1,this.ca=l(0,0),this.ji=!0,this.Ts=t,this.renderingScale=i,this.scale=s,this.tm=e,this.im=new Mn(this.Ts,this.renderingScale,this.scale,Ct,h).setMouseInteractions(!1).setFillStyle(h.cursorPointMarkerFillStyle).setSize(h.cursorPointMarkerSize).setShape(h.cursorPointMarkerShape),this.zp=new ga(this.Ts,this.renderingScale,this.scale,this.tm,Ct,h).setMouseInteractions(!1).setBackground((t=>t.setFillStyle(h.cursorResultTableFillStyle).setStrokeStyle(h.cursorResultTableStrokeStyle))).setTextFillStyle(h.cursorResultTableTextFillStyle).setTextFont(h.cursorResultTableTextFont),this.sm=da.Flip(this.zp,this.scale)}dispose(){return this.im.dispose(),this.zp.dispose(),this}pointAt(t){return this.ca=t.scale===this.scale?t.location:ct(t.location,t.scale,this.scale),this.im.setPosition(this.ca),this.zp.setPosition(this.ca).setContent(t.resultTableContent),this.Ts.vs(),this}getPosition(){return this.ca}setVisible(t){return this.ji=t,this.Ts.vs(),this}getVisible(){return this.ji}setPointMarkerVisible(t){return this.Kp=t,this.Ts.vs(),this}getPointMarkerVisible(){return this.Kp}setPointMarker(t){return t(this.im),this.Ts.vs(),this}getPointMarker(){return this.im}setResultTableVisible(t){return this.qp=t,this.Ts.vs(),this}getResultTableVisible(){return this.qp}setResultTable(t){return t(this.zp),this.Ts.vs(),this}getResultTable(){return this.zp}setAutoFitStrategy(t){return this.sm&&this.sm.resetTable(),this.sm=t?t(this.zp,this.Ts.cs.ft):void 0,this.Ts.vs(),this}getAutoFitStrategy(){return void 0!==this.sm}Fe(){return this.sm&&this.sm.update(),this.zp.setVisible(this.Jg&&this.ji&&this.qp),this.im.setVisible(this.Jg&&this.ji&&this.Kp),this.im.Fe(),this.zp.Fe(),this}Ds(){return this.im.Ds(),this.zp.Ds(),this.Jg=((t,i,s=i)=>{const e=i!==s?ct(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(this.ca,this.scale),this}}class ma extends pa{constructor(){super(...arguments),this.hm=!1}pointAt(t){return this.rm(t.fillStyle),super.pointAt(t)}rm(t){t&&this.hm&&this.zp.setTextFillStyle(t)}setResultTableAutoTextStyle(t){return this.hm=t,this.Ts.vs(),this}getResultTableAutoTextStyle(){return this.hm}}class ya extends pa{setPosition(t){return this.ca=t,this.im.setPosition(t),this.zp.setPosition(t),this.Ts.vs(),this}}class Sa{constructor(t,i=[]){this.nm=[],this.om=(t,i)=>(this.nm.forEach((s=>s(t,i))),t),this.tm=t,this.nm=i}}class va extends Sa{constructor(){super(...arguments),this.am=(t,i,s,e)=>this.om(new ma(t,i,s,this.tm,e),e),this.addStyler=t=>new va(this.tm,this.nm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new va(t,this.nm.map((t=>t)))}}class xa extends Sa{constructor(){super(...arguments),this.lm=(t,i,s,e)=>this.om(new ya(t,i,s,this.tm,e),e),this.addStyler=t=>new xa(this.tm,this.nm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new xa(t,this.nm.map((t=>t)))}}const ba=t=>t.setResultTable((t=>t.setEffect(!0).setOrigin(l(-1,-1)).setMargin(5))),Ma=(t,i)=>t.setPointMarker((t=>t.setFillStyle(i.chartMarkerPointMarkerFillStyle).setSize(i.chartMarkerPointMarkerSize).setShape(i.chartMarkerPointMarkerShape))).setResultTable((t=>t.setEffect(!0).setBackground((t=>t)).setOrigin(l(-1,-1)).setMargin(10))),_a=new va(Sn,[ba]),wa=new va(bn,[ba,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(l(0,-1)).setMargin(0).setBackground((t=>{t instanceof bn&&t.setDirection(exports.UIDirections.Down).setPointerLength(10).setPointerAngle(60)}))))]),Ca=_a,ka=_a,Ta=wa,Fa=new xa(Sn,[Ma,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(we.LeftBottom)))]),Ia=(t,i,s,e,h)=>({location:t,scale:i,resultTableContent:s,owner:e,fillStyle:h});var Pa;exports.SliceLabelIndices=void 0,(Pa=exports.SliceLabelIndices||(exports.SliceLabelIndices={}))[Pa.LabelsInsideSlices=0]="LabelsInsideSlices",Pa[Pa.LabelsOnSides=1]="LabelsOnSides";const Da={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>t.getAnimatedValue()-i.getAnimatedValue(),SortByValueDescending:(t,i)=>i.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},Ba={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`},La=(t,i,s,e)=>t.addRow(s.getName()).addRow(s.getAnimatedValue().toString());class Ra extends Ws{constructor(){super(...arguments),this.Ms="Slice",this.S=0}}const Ea=(t,i)=>{jt(i),t.setExploded(!t.getExploded())};class za extends Ra{}class Va extends za{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.um=!1,this.dm=z,this.fm=z,this.Am=this.S,this.gm=this.um?1:0,this.pm=this.getVisible(),this.ym=Z((()=>this.Ki.cs.vs())),this.Sm=Z((()=>this.Ki.cs.vs())),this.vm=()=>{this.xm=void 0},this.bm=()=>{this.Mm=void 0},this.index=t,this.Ki=e,this.scale=h,this.qi=r,this._m=i.Kc(h).ds(this.getHighlight()),this.fs(this._m),this.Ye=s.Dr(h).ds(this.getHighlight()),this.fs(this.Ye,{isText:!0}),this.onMouseClick(Ea),this.onTouchEnd(Ea)}setValue(t){return this.Ki.getAnimationsEnabled()?this.pm&&this.wm(this.Am,t):this.Am=t,this.S=t,this.Ki.cs.vs(),this}getValue(){return this.S}setExploded(t){if(t&&!1===this.Ki.getMultipleSliceExplosion()){const t=this.Ki.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.Ki.getAnimationsEnabled()?(this.Mm&&this.Mm.finish(),this.Mm=this.Sm(300,X.ease)([[this.gm,t?1:0]],(([t])=>{this.gm=t,this.Ki.cs.vs()})),this.Mm.onEveryAnimationEnd(this.bm),this.um=!this.um):!1!==this.Ki.getMultipleSliceExplosion()||t?(this.gm=this.um?0:1,this.um=!this.um):(this.gm=0,this.um=!this.um),this.Ki.cs.vs(),this}getExploded(){return this.um}setVisible(t){return this.pm=t,!1===t?this.Ki.getAnimationsEnabled()&&this.Am>0?(this.xm&&(this.xm.finish(!1),this.xm=void 0),this.wm(this.Am,0,(()=>super.setVisible(!1)))):(this.Am=0,super.setVisible(!1)):this.Ki.getAnimationsEnabled()?(this.xm&&(this.xm.finish(!1),this.xm=void 0),super.setVisible(!0),this.wm(this.Am,this.S)):(this.Am=this.S,super.setVisible(!0)),this}wm(t,i,s){this.xm=this.ym(300,X.ease)([[t,i]],(([t])=>{this.Am=t,this.Ki.cs.vs()})),this.xm.onEveryAnimationEnd(this.vm),s&&this.xm.onAnimationEnd(s)}setStyle(t,i,s,e){this.dm=t,this.fm=s,this._m.ke(this.dm).Ce(i),this.Ye.ke(this.fm).Nh(e);for(let t=0;t<this.Ji.length;t+=1)this.styleAttachedEntry(this.Ji[t])}getAnimatedValue(){return this.Am}getAnimatedExplosion(){return this.gm}attach(t,i=!0,s=!1){return super.attach(t,i,s),this.styleAttachedEntry(t,i,s),this}styleAttachedEntry(t,i=!0,s=!1){ai(t,this.ts,s,{fill:this.dm,stroke:this._m.lo()})}}const Oa=(t,i,s)=>rs(i,hs(ps(.5*(t.Kl()+t.Fi())*Math.PI/180),s)),Na=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],u=o-360*i[a],c=l.getAnimatedExplosion();if(0===c||1===n)l._m.Ie(s);else{const t=rs(s,hs(ps(.5*(o+u)*Math.PI/180),r*c));l._m.Ie(t)}l._m.hu(o).Ve(u).nu(e).ou(e).au(h),o=u}},Ga=t=>{const i=t.getSlices();for(let t=0;t<i.length;t+=1)i[t].setExploded(!1)};class Wa extends ha{constructor(t,i,s,e,h,r,n){super(t,i,s,i.yp("pieChart bg",0),e,i.cs.ts.pieChartBackgroundFillStyle,i.cs.ts.pieChartBackgroundStrokeStyle,i.cs.ts.pieChartTitleFont,i.cs.ts.pieChartTitleFillStyle,r),this.Cm=[],this.km=Da.SortByName,this.Hl=0,this.Tm=this.ts.pieChartSliceFillStylePalette,this.Fm=this.ts.pieChartSliceStrokeStyle,this.Im=!0,this.Pm=this.ts.pieChartSliceLabelFont,this.Dm=this.ts.pieChartSliceLabelFillStyle,this.Bm=0,this.Lm=!1,this.Rm=20,this.Em=!0,this.zm=!0,this.Vm=exports.AutoCursorModes.onHover,this.Om=La,this.Nm=t=>{const i=this.Cm.indexOf(t);i>=0&&(this.Cm.splice(i,1),this.Gm())},this.cs.Gn(fo.lf),this.Wm=i.Um("pieChart bottom",0),this.Ym=i.Um("pieChart top",1),this.bp.Eh("Pie Chart"),this.mp(h,this.pixelScale),this.onBackgroundMouseDoubleClick(Ga);const o=Hs(new $s(Ga));this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd),this.Hm=i.$m();const a=It(n?n.autoCursorBuilder:void 0,ka);this.Fp=a.am(this.Hm,this.uiScale,this.uiScale,this.ts),this.setAnimationsEnabled(!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled))}setAutoCursor(t){return this.Fp&&t(this.Fp),this.cs.vs(),this}getAutoCursor(){return this.Fp}setAutoCursorMode(t){return this.Vm=t,this.cs.vs(),this}getAutoCursorMode(){return this.Vm}setCursorResultTableFormatter(t){return this.Om=t,this.cs.vs(),this}addSlice(t,i){const s=new Va(this.Bm,this.Wm,this.Ym,this,this.pixelScale,this.Nm,this.ts,this.cs.hs);this.Bm+=1,s.setName(t);const e=this.ih;return this.ih=!1,s.setValue(i),this.ih=e,s.setEffect(this.Em),this.Xm(s),this.Cm.push(s),this.Gm(),s.setHighlightOnHover(this.Im),s.onMouseMove((()=>{this.Vm&&this.cs.vs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Cm}setMultipleSliceExplosion(t){return this.Lm=t,this}getMultipleSliceExplosion(){return this.Lm}setInnerRadius(t){return this.Hl=t,this.cs.vs(),this}getInnerRadius(){return this.Hl}setSliceExplosionOffset(t){return this.Rm=t,this.cs.vs(),this}getSliceExplosionOffset(){return this.Rm}setLUT(t){return this.Gd=t,this.cs.vs(),this}setSliceFillStyle(t){this.Tm=t;for(let t=0;t<this.Cm.length;t+=1)this.Xm(this.Cm[t]);return this.cs.vs(),this}getSliceFillStyle(){return this.Tm}setSliceStrokeStyle(t){this.Fm="function"==typeof t?t(this.Fm):t;for(let t=0;t<this.Cm.length;t+=1)this.Xm(this.Cm[t]);return this.cs.vs(),this}getSliceStrokeStyle(){return this.Fm}setSliceEffect(t){return this.Em=t,this.Cm.forEach((i=>i.hs.os.Ss(t))),this.cs.vs(),this}getSliceEffect(){return this.Em}setSliceSorter(t){return this.km=t,this.Cm=this.Cm.sort(this.km),this.cs.vs(),this}getSliceSorter(){return this.km}setLabelFillStyle(t){this.Dm="function"==typeof t?t(this.Dm):t;for(let t=0;t<this.Cm.length;t+=1)this.Xm(this.Cm[t]);return this.cs.vs(),this}getLabelFillStyle(){return this.Dm}setLabelFont(t){this.Pm="function"==typeof t?t(this.Pm):t;for(let t=0;t<this.Cm.length;t+=1)this.Xm(this.Cm[t]);return this.cs.vs(),this}getLabelFont(){return this.Pm}setLabelEffect(t){return this.zm=t,this.Cm.forEach((i=>i.hs.ns.Ss(t))),this.cs.vs(),this}getLabelEffect(){return this.zm}setLabelFormatter(t){return this.jm=t,this.cs.vs(),this}getLabelFormatter(){return this.jm}setSliceHighlightOnHover(t){return this.Im=t,this.Cm.forEach((i=>i.setHighlightOnHover(t))),this}Fe(t){super.Fe(t),ra.kp(this.bp,this.Sp),super.pp();const i=ra.Cp(this.bp,this.Sp),s=l(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+i)),e=l(this.ya.left+s.x/2,this.ya.bottom+s.y/2);if(this.Gd){const t=this.Gd;this.Cm.forEach((i=>{this.Xm(i,new G({color:t.getColors(i.getAnimatedValue())}))}))}for(let t=0;t<this.Cm.length;t+=1){const i=this.Cm[t].getAnimatedValue()>0;this.Cm[t]._m.setVisible(i),this.Cm[t].Ye.setVisible(i)}this.Cm=this.Cm.sort(this.km);const h=this.Cm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const n=[];for(let t=0;t<h.length;t+=1)n.push((o=h[t].getAnimatedValue())>0?o/r:0);var o;for(let t=0;t<h.length;t+=1){const i=h[t];i.Ye.Eh(this.jm(i,n[t])).Ds()}oa.Tp(this,!1,!1,this.Cm,void 0,((t,i)=>Ia(i,this.engine.scale,this.Om(new Aa,this,t,n[h.indexOf(t)]||0).Qu(),t,void 0))),this.Zm(h,n,e,s)}Xm(t,i=this.Tm(t.index,t)){t.setStyle(i,this.Fm,this.Dm,this.Pm)}Gm(){this.Cm=this.Cm.sort(this.km),this.cs.vs()}Qd(){return this.Cm}dispose(){return super.dispose(),this.Cm.slice().forEach((t=>t.dispose())),this.Fp.dispose(),this.Ym.U(),this.Wm.U(),this.Hm.U(),this}}const Ua={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},Ya=(...t)=>{const i=[];return t.forEach((t=>{var s;t&&"object"==typeof(s=t)&&s&&"pattern"in s&&i.push({type:"DataPattern",args:t})})),i};class Ha extends Wa{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.jm=Ba.NamePlusValue,this.Qm=[],this.Jm=40,this.Km=5,this.qm=10,this.ty=this.ts.pieChartConnectorStrokeStyle,this.setPadding({bottom:50})}setLabelConnectorStyle(t){this.ty=t;for(let t=0;t<this.Qm.length;t+=1)this.Qm[t].Ee(this.ty);return this.cs.vs(),this}getLabelConnectorStyle(){return this.ty}setLabelSliceOffset(t){return this.Jm=t,this.cs.vs(),this}getLabelSliceOffset(){return this.Jm}setLabelConnectorGapStart(t){return this.Km=t,this.cs.vs(),this}getLabelConnectorGapStart(){return this.Km}setLabelConnectorEndLength(t){return this.qm=t,this.cs.vs(),this}getLabelConnectorEndLength(){return this.qm}Zm(t,i,s,e){const h=this.Pm.getSize(),r=this.Jm,n=this.qm,o=this.Km,a=Math.min(this.Rm,r-o);let l=0;if(1===t.length)l=t[0].Ye.Zc().x;else for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].Ye.Zc().x);const u=Math.max(.5*(Math.min(e.x-2*l-2*n,e.y-2*h)-2*r),0);Na(t,i,s,u,this.Hl,a);let c=90;const d=t.map(((t,e)=>{const h=360*i[e],o=c-h,a=ps(fs(.5*(c+o))),l=a.x>=0?-1:1,d=rs(rs(s,hs(a,u+r)),{x:l*-n,y:0});c=o;const f={x:l,y:0};t.Ye.Ie(d).za(f),t.Ye.Ds();const A=ji(t.Ye.Ue());return{position:d,alignment:f,shape:t.Ye,boundaries:A,sliceAngleVec:a,slice:t}})),f=[];for(let t=0;t<d.length;t+=1){const i=d[t],s=f[f.length-1];s&&!1!==Ni([s.boundaries,i.boundaries])?i.shape.setVisible(!1):(f.push(i),i.shape.setVisible(!0))}for(let t=0;t<this.Qm.length;t+=1)this.Qm[t].setVisible(!1);f.forEach(((t,i)=>{const e=t.slice._m,h=Oa(e,s,u+o+a*t.slice.getAnimatedExplosion()),r=ds(t.position.y,h,s),n=t.position;this.iy([h,r,n])}))}getMinimumSize(){return l(500,300)}iy(t){let i;for(let t=0;t<this.Qm.length;t+=1)if(!this.Qm[t].getVisible()){i=this.Qm[t].setVisible(!0);break}void 0===i&&(i=this.Ym.sy(this.pixelScale,void 0,[Ua.InternalUI]).Ee(this.ty).setMouseInteractions(!1),this.Qm.push(i)),i.Gt().ol(t)}}class $a extends Wa{constructor(){super(...arguments),this.jm=Ba.Name,this.ey=.5}Zm(t,i,s,e){const h=this.Rm,r=Math.max(0,.5*Math.min(e.x,e.y)-h);Na(t,i,s,r,this.Hl,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e._m,o=e.Ye,a=this.Hl/100,l=((1-a)*this.ey+a)*r+e.getAnimatedExplosion()*h,u=Oa(n,s,l);o.Ie(u).Ba(0).Ra(0)}}getMinimumSize(){return l(200,200)}setLabelPosition(t){return this.ey=t,this.cs.vs(),this}getLabelPosition(){return this.ey}}const Xa={LabelsOnSides:Ha,LabelsInsideSlices:$a},ja=t=>{if(Js(t)){const i=t.getThickness(),s=t.getFillStyle();if(W(s))return 1===i?nh:new ah({size:i,fillStyle:s,shape:"sphere"})}return nh};class Za{constructor(t,i,s,e){this.hy=[],this.ny=new Map,this.oy=t,this.ly=i,this.uy=s,this.Ay=e}gy(){this.uy&&this.uy();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];let s=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const e=this.hy.slice(),h=[];i.forEach((t=>{let i=e.pop();i||(i=this.oy(),this.hy.push(i));const r=[],n=i.py().slice();t.instances.forEach(((t,i)=>{const s=n.shift();r.push({...t,existingMember:s})}));const o=this.ly(i,r,t.sharedProperties);s=hi(s,o,{canReturnB:!0});for(let s=0;s<t.instances.length;s+=1)h.push({Go:t.instances[s].Go,collection:i,member:o[s]});n.forEach((t=>{null==i||i.bd(t)}))})),e.forEach((t=>{t.dispose();const i=this.hy.indexOf(t);i<0?Ai(0,(()=>{})):this.hy.splice(i,1)})),h.forEach((t=>{const i=this.ny.get(t.Go);i&&t.collection.cs.io({entity:i.collection,collectionMember:i.member},{entity:t.collection,collectionMember:t.member})})),this.ny.clear(),h.forEach((t=>{this.ny.set(t.Go,t)})),this.Ay&&this.Ay(this.hy,s)}}}my(){this.hy.forEach((t=>{t.dispose()})),this.hy.length=0}}class Qa{constructor(t){this.yy=[],this.Sy=t}gy(){return this.vy(),{add:()=>this.el(),finishPlot:()=>{this.xy()}}}el(){let t=this.yy.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.Sy()},this.yy.push(t)),t.isFree=!1,t.shape}vy(){this.yy.forEach((t=>{t.isFree=!0}))}xy(){this.yy.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.yy.splice(this.yy.indexOf(t),1)}))}my(){this.yy.forEach((t=>t.shape.dispose())),this.yy.length=0}}class Ja{constructor(t,s,e,h,r,n,o,a,l,u){this.L=new i.Eventer,this.S=0,this.ji=!0,this.Xi=!1,this.vs=t,this.by=s,this.My=e,this._y=h,this.wy=r,this.Cy=n,this.Bd=o,this.Qp=a,this.ky=l,this.Ku=u}setValue(t){return t===this.S||(this.S=t,this.vs(),this.L.emit("valueChange",this,this.S)),this}getValue(){return this.S}setTickStyle(t){return this.My="function"==typeof t?t(this.My):t,this.vs(),this}getTickStyle(){return this.My}setTickLength(t){return this._y=t,this.vs(),this}getTickLength(){return this._y}setGridStrokeStyle(t){return this.wy="function"==typeof t?t(this.wy):t,this.vs(),this}getGridStrokeStyle(){return this.wy}setTextPadding(t){return this.Cy=t,this.vs(),this}getTextPadding(){return this.Cy}setTextRotation(t){return this.Bd=t,this.vs(),this}getTextRotation(){return this.Bd}setTextFillStyle(t){return this.Qp="function"==typeof t?t(this.Qp):t,this.vs(),this}getTextFillStyle(){return this.Qp}setTextFont(t){return this.ky="function"==typeof t?t(this.ky):t,this.vs(),this}getTextFont(){return this.ky}setTextFormatter(t){return this.Ku=t,this.vs(),this}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}dispose(){return this.Xi||(this.Xi=!0,this.by(),this.vs(),this.L.emit("dispose",this)),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){const i=this.ji!==t;return this.ji=t,i&&(this.L.emit("visibleStateChanged",this,this.ji),this.vs()),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}class Ka extends Qe{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.Ty({x:t.cs.ts.xAxis3DNumericTicks,y:t.cs.ts.yAxis3DNumericTicks,z:t.cs.ts.zAxis3DNumericTicks}),datetime:i.Ty({x:t.cs.ts.xAxis3DDateTimeTicks,y:t.cs.ts.yAxis3DDateTimeTicks,z:t.cs.ts.zAxis3DDateTimeTicks}),time:i.Ty({x:t.cs.ts.xAxis3DTimeTicks,y:t.cs.ts.yAxis3DTimeTicks,z:t.cs.ts.zAxis3DTimeTicks})},{type:"linear"}),this.Ff=[],this.Fy=()=>{},this.Iy=()=>{},this.Py=()=>{},this.Dy=()=>{},this.chart=t,this.yt=h,this.By=r,this.Ly=n,this.Ry=this.yt.ft;const l=this.Ch.Ty({x:this.ts.xAxis3DStrokeStyle,y:this.ts.yAxis3DStrokeStyle,z:this.ts.zAxis3DStrokeStyle});this.Ey=this.yt.sy([Ua.InternalUI]).Ee(l).zy(ja(l)).setMouseInteractions(!1),this.Rh=this.By.Dr(this.Ly).setMouseInteractions(!1).ke(i.Ty({x:t.cs.ts.xAxis3DTitleFillStyle,y:t.cs.ts.yAxis3DTitleFillStyle,z:t.cs.ts.zAxis3DTitleFillStyle})).Nh(i.Ty({x:t.cs.ts.xAxis3DTitleFont,y:t.cs.ts.yAxis3DTitleFont,z:t.cs.ts.zAxis3DTitleFont})),this.Vy=new Qa((()=>this.By.Dr(this.Ly))),this.Oy=new Za((()=>this.yt.Rg().setMouseInteractions(!1)),((t,i,s)=>(t.Gt().Ee(s.lineStyle),i.map((({positions:i,existingMember:s})=>s||t.ol(i)))))),this.hs=a,this.Uh=this.hs.yg([this.Rh]).Ss(e.effectsText),this.Ey.setMouseEnterEventHandler(this.Fy).setMouseLeaveEventHandler(this.Iy).setMouseDragEventHandler(this.Py).setMouseDragStopEventHandler(this.Dy),s.sg=this}setTickStrategy(t,i){return super.Ih(t,i)}getTickStrategy(){return this.Ze}addCustomTick(){const t=new Ja((()=>this.chart.cs.vs()),(()=>{const i=this.Ff.indexOf(t);i>=0&&this.Ff.splice(i,1)}),this.ts.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.ts.xAxis3DNumericTicks.majorTickStyle.tickLength,this.ts.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.ts.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.ts.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.ts.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.ts.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)));return this.Ff.push(t),this.chart.cs.vs(),t}setStrokeStyle(t){return this.Ey.Ee(t).zy(ja(this.Ey.cu())),this.chart.cs.vs(),this}getStrokeStyle(){return this.Ey.cu()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.Ey.setVisible(t),!1===t&&(this.Oy.my(),this.Vy.my()),this.By.vs(),this}wg(){return this.chart.getSeries()}Ny(t){return Math.abs(this.ft.it(t)*this.yt.Gy(1))}kr(t,i,s){const e=Math.abs(this.ft.it(i-t)*this.yt.Gy(1));return{min:t-s*e,max:i+s*e}}cr(t,i){return new qa(i,t,this.By,this.Ly,this.yt)}dr(t,i){const s=this.Wy(i,t.S,t.xh.ur.tickLength,t.xh.ur.tickPadding);return t.Ye.Ie(s.labelPosition).za(s.labelAlignment),s}Wy(t,i,s,e){const{wuSize:h,start:r,end:n,tickDirection3D:o,tickDirection2D:a}=t,u=(i-this.ft.getInnerStart())/(this.ft.getInnerEnd()-this.ft.getInnerStart()),c=Pi.addVec(Xi(r,n,u),Pi.multiplyVec(Pi.multiply(o,this.yt.Gy(.5*this.Ey.cu().getThickness())),h)),d=Pi.addVec(c,Pi.multiplyVec(Pi.multiply(o,this.yt.Gy(s)),h)),f=this.yt.Uy(d)||l(0,0);return{labelPosition:rs(ct(f,this.chart.engine.scale,this.Ly),hs(a,e)),labelAlignment:{x:-a.x,y:-a.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:u}}Yy(t,i,s){const{wuSize:e,start:h,end:r,tickDirection3D:n}=i,o=(t-this.ft.getInnerStart())/(this.ft.getInnerEnd()-this.ft.getInnerStart()),a=Pi.addVec(Xi(h,r,o),Pi.multiplyVec(Pi.multiply(n,this.yt.Gy(.5*this.Ey.cu().getThickness())),e)),u=Pi.addVec(a,Pi.multiplyVec(Pi.multiply(n,this.yt.Gy(10)),e)),c=this.yt.Uy(a)||l(0,0),d=this.yt.Uy(u)||l(0,0);return this.By.ze(this.Ly).Oe(c).Ve(d).Ee(new Qs({fillStyle:new G({color:w(120*s)}),thickness:1}))}wr(t,i){return tl(t,i,this.ft)}Fe(t){if(!this.ji)return;const i=Math.min(this.Ph,this.Dh),s=Math.max(this.Ph,this.Dh),e=this.Ry,h=d(e.x.ht(),e.y.ht(),e.z.ht());let r,n;this.Hy()?(r=d(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerStart()),n=d(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerEnd())):(r=d(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),n=this.Ch.$y(d(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),r));const o=this.Ch.Kd,a=this.yt.Uy(r)||l(0,0),u=this.yt.Uy(n)||l(0,0),c=Xi(r,n,.5),f=Pi.addVec(c,Pi.multiplyVec(Pi.multiply(o,-1),h)),A=this.yt.Uy(c)||l(0,0),g=this.yt.Uy(f)||l(0,0),p=is(ns(ct(A,this.chart.engine.scale,this.Ly),ct(g,this.chart.engine.scale,this.Ly)));this.Ey.Gt().ol([r,n]);const{gridlinePositionA:m,gridlinePositionB:y,gridlinePositionC:S}=this.Ch.Xy(t),v=t=>({x:-1===t.x?this.Ry.x.getInnerStart():1===t.x?this.Ry.x.getInnerEnd():0,y:-1===t.y?this.Ry.y.getInnerStart():1===t.y?this.Ry.y.getInnerEnd():0,z:-1===t.z?this.Ry.z.getInnerStart():1===t.z?this.Ry.z.getInnerEnd():0}),x=v(m),b=v(y),M=v(S),_={physicalAxisSize:es(ns(a,u)),wuSize:h,start:r,end:n,tickDirection3D:o,tickDirection2D:p,gridlinePositionA:x,gridlinePositionB:b,gridlinePositionC:M},w=this.tr(_),C=this.Oy.gy();for(const[t,i]of this.Qe)for(const[,s]of i){const i=w.get(s);if(!i)continue;const e=this.jy(_,i);C.add({Go:0,positions:[e.tickStroke.start,e.tickStroke.end]},{lineStyle:t.ur.tickStyle}),e.gridStroke&&C.add({Go:0,positions:e.gridStroke},{lineStyle:t.ur.gridStrokeStyle})}const k=this.Vy.gy(),T={x:0,y:0};this.Ff.forEach((t=>{if(!t.ji||t.S<i||t.S>s)return;const e=this.Wy(_,t.S,t._y,t.Cy),h=this.jy(_,e),r=k.add().Ie(e.labelPosition).za(e.labelAlignment).ke(t.Qp).Nh(t.ky).Eh(t.Ku(t.S)).Gh(t.Bd).Ds().ai();T.x=Math.max(T.x,r.x),T.y=Math.max(T.y,r.y),C.add({Go:0,positions:[h.tickStroke.start,h.tickStroke.end]},{lineStyle:t.My}),h.gridStroke&&C.add({Go:0,positions:h.gridStroke},{lineStyle:t.wy})})),k.finishPlot(),C.finishPlot();const F=this.pr(((t,i)=>{const s=i.Ye.ai();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:T.x,y:T.y}),I=Math.atan((u.y-a.y)/(u.x-a.x));this.Rh.za({x:0,y:0}).Gh(180*-I/Math.PI);const P=Pi.addVec(c,Pi.multiplyVec(Pi.multiply(o,this.yt.Gy(.5*this.Ey.cu().getThickness()+this.yr(((t,i)=>Math.max(t,i.tickLength)),0))),h)),D=this.yt.Uy(P)||l(0,0),B=rs(ct(D,this.chart.engine.scale,this.Ly),rs(rs(os(F,p),hs(p,this.yr(((t,i)=>Math.max(t,i.labelPadding)),0))),os(hs(this.Rh.Ds().ai(),.5),p)));this.Rh.Ie(B),this.Ey.Zy={overrideFollowing:!1,skipMousePicking:!1}}jy(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:h}=t,r=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return kt(o,0)||kt(o,1)||(a=[this.Qy()?{...s,x:r.x}:this.Jy()?{...s,y:r.y}:this.Hy()?{...s,z:r.z}:{x:0,y:0,z:0},this.Qy()?{...e,x:r.x}:this.Jy()?{...e,y:r.y}:this.Hy()?{...e,z:r.z}:{x:0,y:0,z:0},this.Qy()?{...h,x:r.x}:this.Jy()?{...h,y:r.y}:this.Hy()?{...h,z:r.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:r,end:n}}}Yh(){super.Yh(),this.Oy.my(),this.Vy.my()}Qy(){return this.Ch.Qy()}Jy(){return this.Ch.Jy()}Hy(){return this.Ch.Hy()}}class qa extends Je{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Ky=h}}const tl=(t,i,s)=>Tt(t+.1*(i-t)+Math.abs(s.ht())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),il=(t,i,s,e)=>({Sr:()=>{const s=t();let e;for(const t of s){if(!t.qy())continue;const s=i(t);e=void 0===s?e:void 0!==e?Math.min(e,s):s}return e},vr:()=>{const i=t();let e;for(const t of i){if(!t.qy())continue;const i=s(t);e=void 0===i?e:void 0!==e?Math.max(e,i):i}return e},Mr:()=>{const i=t();let s;for(const t of i){if(!t.qy())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),sl=t=>({...il(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Mr().y)),Ty:t=>t.y,$y:(t,i)=>({x:i.x,y:t.y,z:i.z}),Kd:d(-1,0,0),Xy:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:d(i.x,0,i.z),gridlinePositionB:d(i.x,0,-i.z),gridlinePositionC:d(-i.x,0,-i.z)}},Qy:()=>!1,Jy:()=>!0,Hy:()=>!1}),el=t=>({...il(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.Mr().z)),Ty:t=>t.z,$y:(t,i)=>({x:i.x,y:i.y,z:t.z}),Kd:d(1,0,0),Xy:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:d(i.x,-i.y,0),gridlinePositionB:d(i.x,i.y,0),gridlinePositionC:d(-i.x,i.y,0)}},Qy:()=>!1,Jy:()=>!1,Hy:()=>!0});class hl extends Ws{constructor(t,i,s,e,h){super(t,i,e,h),this.tS=jr,this.iS=!0,this.sS=!0,this.Ki=t,this.yt=s,this.ss=new Map,this.onMouseWheel(this.Ki.eS),this.onMouseDrag(this.Ki.hS),this.onTouchStart(this.Ki.rS.onTouchStart),this.onTouchMove(this.Ki.rS.onTouchMove),this.onTouchEnd(this.Ki.rS.onTouchEnd)}setAutoScrollingEnabled(t){return this.iS=t,this.Ki.cs.vs(),this}getAutoScrollingEnabled(){return this.iS}setColorShadingStyle(t){return this.tS=t,this.ss.forEach(((i,s)=>s.nS(t))),this.yt.vs(),this}getColorShadingStyle(){return this.tS}setDepthTestEnabled(t){return this.sS=t,this.ss.forEach(((i,s)=>s.oS(t))),this.yt.vs(),this}getDepthTestEnabled(){return this.sS}aS(){}Fe(){}Ay(){}getXMax(){const t=this.Ga;return t?t.bt():void 0}getXMin(){const t=this.Ga;return t?t.xt():void 0}getYMax(){const t=this.Ga;return t?t._t():void 0}getYMin(){const t=this.Ga;return t?t.Mt():void 0}getZMax(){const t=this.Ga;return t?t.lS():void 0}getZMin(){const t=this.Ga;return t?t.uS():void 0}Mr(){const t=this.Ga;return t?d(t.xl(),t.bl(),t.cS()):d(0,0,0)}}class rl extends hl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Ms="Box Series 3D",this.dS=.25,this.fS=!1,this.Wd=()=>li(this.be),this.be=di(this.ts.boxSeries3DFillStyle,h),this.Ga=this.yt.gS().oS(this.sS).ke(this.be).AS(this.dS).ds(this.getHighlight()),this.fs(this.Ga)}invalidateData(t){const i=t.length;if(0===i)return this;this.fS&&this.Ki.cs.Gn(fo.xf);const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.Ga.pS(e.slice()),this.Ki.cs.vs(),this.fS=!0,this}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Ga.ke(t),this.Ki.cs.vs(),this}getFillStyle(){return this.be}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.dS=void 0!==t?Tt(t,0,1):void 0,this.Ga.AS(this.dS),this.yt.vs(),this}getRoundedEdges(){return this.dS}qy(){return this.iS&&this.getVisible()}Pe(t,i){t.ds(i),this.Ki.cs.vs()}Fe(){super.Fe(),this.Ga.Ds(!1)}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{fill:this.be}),this}}class nl extends hl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fS=!1,this.Wd=()=>li(this.uu.getFillStyle())}setStrokeStyle(t){this.uu="function"==typeof t?t(this.uu):t;const i=this.uu;return this.Ga.Ee(i),this.yt.vs(),this}getStrokeStyle(){return this.uu}add(t){return this.fS&&this.Ki.cs.Gn(fo.xf),this.fS=!0,(t=Array.isArray(t)?t:[t])?(this.Ga.ol(t.slice()),this.yt.vs(),this):this}clear(){return this.Ga.Gt(),this}getPointAmount(){const t=this.Ga;return t.al()+t.ll()}qy(){return this.iS&&this.getPointAmount()>0&&this.getVisible()}Pe(t,i){t.ds(i),this.yt.vs()}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{stroke:this.uu}),this}}class ol extends nl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Ms="Line Series 3D",this.uu=di(e.lineSeries3DStrokeStyle,h),this.mS=_h.pointStyle3D,this.yS(this.uu),this.Ga=this.yt.sy([Ua.UserSeries]).oS(this.sS).Ee(this.uu).zy(this.mS).ds(this.getHighlight()),this.fs(this.Ga)}setStrokeStyle(t){super.setStrokeStyle(t),this.yS(this.uu);const i=this.mS;return this.Ga.zy(i),this}yS(t){const i=new fh.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.mS=i}}class al extends nl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Ms="Point Line Series 3D",this.Wd=()=>li(this.uu.getFillStyle())||li(this.mS.getFillStyle()),this.mS=di(e.pointLineSeries3DPointStyle,h),this.uu=di(e.lineSeries3DStrokeStyle,h),this.SS(),this.Ga=this.yt.sy([Ua.UserSeries]).oS(this.sS).Ee(this.uu).zy(this.mS).ds(this.getHighlight()),this.fs(this.Ga)}setPointStyle(t){return this.mS="function"==typeof t?t(this.mS):t,this.SS(),this.Ga.zy(this.mS),this.yt.vs(),this}getPointStyle(){return this.mS}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.uu,s=Math.abs(i.getThickness()),e=this.mS,h=e.getSize();s>("object"==typeof h?Math.max(h.x,h.y,h.z):h)&&(this.mS=e.setSize(s)),this.SS();const r=this.mS;return this.Ga.zy(r),this.yt.vs(),this}SS(){const t=this.mS,i=t.getSize();this.mS=t.setSize(i)}Pe(t,i){t.ds(i),this.yt.vs()}}class ll extends hl{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.fS=!1,((null==r?void 0:r.individualPointSizeAxisEnabled)||(null==r?void 0:r.individualPointSizeEnabled))&&this.Ki.cs.Gn(fo.bf)}add(t){return this.fS&&this.Ki.cs.Gn(fo.xf),this.fS=!0,(t=Array.isArray(t)?t:[t])?(this.Ga.ol(t.slice()),this.yt.vs(),this):this}clear(){return this.Ga.Gt(),this}getPointAmount(){const t=this.Ga;return t.al()+t.ll()}qy(){return this.iS&&this.getPointAmount()>0&&this.getVisible()}Pe(t,i){t.ds(i),this.yt.vs()}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{point3D:this.vS}),this}}class ul extends ll{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Ms="Point Series 3D",this.Wd=()=>li(this.vS.getFillStyle());const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.Ki.getSeries().length;this.vS=di(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.Ga=this.yt.bS(o).oS(this.sS).xS(this.vS).ds(this.getHighlight()),this.fs(this.Ga)}setPointStyle(t){this.vS="function"==typeof t?t(this.vS):t;const i=this.vS;return this.Ga.xS(i),this.yt.vs(),this}getPointStyle(){return this.vS}}class cl extends ll{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Ms="Point Cloud Series 3D",this.Wd=()=>li(this.vS.getFillStyle());const n=this.Ki.getSeries().length;this.vS=di(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.Ga=this.yt.bS(o).xS(this.vS).ds(this.getHighlight()),this.fs(this.Ga)}setPointStyle(t){this.vS="function"==typeof t?t(this.vS):t;const i=this.vS;return this.Ga.xS(i),this.yt.vs(),this}getPointStyle(){return this.vS}}const dl={Triangulated:ul,Pixelated:cl};class fl extends ha{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.MS=[],this._S=0,this.wS=t=>{const i=this.MS.indexOf(t);i>=0&&(this.MS.splice(i,1),this.L.emit("seriesDispose",this,t))},this.CS=()=>{this._S+=1},this.kS=()=>{this._S-=1},this.onSeriesBackgroundMouseEnter=t=>this.L.on("mouseEnterSeriesBackground",t),this.onSeriesBackgroundMouseLeave=t=>this.L.on("mouseLeaveSeriesBackground",t),this.onSeriesBackgroundMouseMove=t=>this.L.on("mouseMoveSeriesBackground",t),this.onSeriesBackgroundMouseDown=t=>this.L.on("mouseDownSeriesBackground",t),this.onSeriesBackgroundMouseUp=t=>this.L.on("mouseUpSeriesBackground",t),this.onSeriesBackgroundMouseClick=t=>this.L.on("mouseClickSeriesBackground",t),this.onSeriesBackgroundMouseDoubleClick=t=>this.L.on("mouseDoubleClickSeriesBackground",t),this.onSeriesBackgroundMouseDragStart=t=>this.L.on("mouseDragStartSeriesBackground",t),this.onSeriesBackgroundMouseDrag=t=>this.L.on("mouseDragSeriesBackground",t),this.onSeriesBackgroundMouseDragStop=t=>this.L.on("mouseDragStopSeriesBackground",t),this.onSeriesBackgroundMouseWheel=t=>this.L.on("mouseWheelSeriesBackground",t),this.onSeriesBackgroundTouchStart=t=>this.L.on("touchStartSeriesBackground",t),this.onSeriesBackgroundTouchMove=t=>this.L.on("touchMoveSeriesBackground",t),this.onSeriesBackgroundTouchEnd=t=>this.L.on("touchEndSeriesBackground",t),this.offSeriesBackgroundMouseEnter=t=>this.L.off(t,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=t=>this.L.off(t,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=t=>this.L.off(t,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=t=>this.L.off(t,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=t=>this.L.off(t,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=t=>this.L.off(t,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=t=>this.L.off(t,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=t=>this.L.off(t,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=t=>this.L.off(t,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=t=>this.L.off(t,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=t=>this.L.off(t,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=t=>this.L.off(t,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=t=>this.L.off(t,"touchEndSeriesBackground"),this.TS=this.hs.yg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.MS.forEach((i=>i.setAnimationHighlight(t))),this}FS(t,i){this.TS.As([i]),t.setMouseMoveEventHandler(((t,i)=>{this.L.emit("mouseMoveSeriesBackground",this,i)})).setMouseEnterEventHandler(((t,i)=>{this.L.emit("mouseEnterSeriesBackground",this,i)})).setMouseLeaveEventHandler(((t,i)=>{this.L.emit("mouseLeaveSeriesBackground",this,i)})).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownSeriesBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpSeriesBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickSeriesBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickSeriesBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelSeriesBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartSeriesBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragSeriesBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopSeriesBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>{this.L.emit("touchStartSeriesBackground",this,i)})).setTouchMoveEventHandler(((t,i)=>{this.L.emit("touchMoveSeriesBackground",this,i)})).setTouchEndEventHandler(((t,i)=>{this.L.emit("touchEndSeriesBackground",this,i)}))}setSeriesBackgroundFillStyle(t){return this.IS.ke(t),this.cs.vs(),this}getSeriesBackgroundFillStyle(){return this.IS.zh()}setSeriesBackgroundStrokeStyle(t){return this.PS.Ce(t),this.cs.vs(),this}getSeriesBackgroundStrokeStyle(){return this.PS.lo()}setSeriesBackgroundEffect(t){return this.TS.Ss(t),this.cs.vs(),this}getSeriesBackgroundEffect(){return this.TS.xs()}DS(t){this.MS.push(t),t.onMouseEnter(this.CS),t.onMouseLeave(this.kS),void 0!==this.BS&&t.setHighlightOnHover(this.BS),this.L.emit("seriesAdded",this,t)}Qd(){return this.MS}LS(){return this._S}setSeriesHighlightOnHover(t){return this.BS=t,this.MS.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.MS.slice().forEach(wt),super.dispose()}RS(t){return this.L.on("seriesAdded",t)}ES(t){return this.L.off(t)}zS(t){return this.L.on("seriesDispose",t)}VS(t){return this.L.off(t)}}const Al=Pi.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class gl{constructor(t,i,s,e){this.OS=!0,this.NS=!0,this.GS=2*-Math.PI/2160,this.WS=2*Math.PI/2160,this.US=.1,this.YS=1*Math.PI/180,this.HS=t,this.$S=i,this.XS=s,this.Uy=e}getDefaultCameraConfiguration(t){const i={direction:Al,location:Pi.multiply(Al,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:i.direction,cameraLocation:i.location})||i}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.jS(s,t):"wheel-zoom"===t.type?s=this.ZS(s,t):"rotate+zoom"===t.type?s=this.QS(s,t):"fixed-rotate"===t.type?s=this.JS(s,t):"move"===t.type&&(s=this.KS(s,t))})),this.OS?s=this.qS(t.boundingBox,s):this.NS&&(s=this.tv(t.boundingBox,s)),s}jS(t,i){const{rotation:s}=i,e=t.location,h=Pi.multiply(Pi.normalize(t.location),-1),{Right:r,Up:n}=this.sv(h);let o=e;const a=this.ev(h),l=s.x*this.GS*a;o=Pi.rotateAroundAxis(o,n,l);const u=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.WS,a-this.YS);return 0!==u&&(o=Pi.rotateAroundAxis(o,r,u)),{location:o,direction:Pi.multiply(Pi.normalize(o),-1)}}ZS(t,i){const{deltaY:s}=i;this.OS&&this.hv(!1);const e=t.location,h=Pi.multiply(Pi.normalize(e),-1),r=s*this.US,n=Pi.length(e)*-r;return{direction:h,location:Pi.addVec(e,Pi.multiply(h,n))}}QS(t,i){const{rotation:s,cameraDistance:e}=i;this.OS&&this.hv(!1);let h=this.jS(t,{type:"rotate",rotation:s});const r=h.location,n=Pi.multiply(Pi.normalize(r),-1),o=Pi.multiply(n,-e);return h={direction:Pi.multiply(Pi.normalize(o),-1),location:o},h}JS(t,i){this.OS&&this.hv(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.sv(h),o=s.x*this.GS;let a=Pi.normalize(Pi.rotateAroundAxis(h,n,o));const l=s.y*this.WS;return a=Pi.normalize(Pi.rotateAroundAxis(a,r,l)),{location:e,direction:a}}KS(t,i){this.OS&&this.hv(!1),this.NS=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.sv(r);return{location:Pi.addVec(h,Pi.multiply(r,.01*e),Pi.multiply(n,.01*s)),direction:r}}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:Pi.multiply(Pi.normalize(t.cameraLocation),-1)};return this.OS?this.qS(t.boundingBox,i):this.tv(t.boundingBox,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:Pi.multiply(Pi.normalize(t.cameraLocation),-1)};return this.OS?this.qS(t.boundingBox,i):this.tv(t.boundingBox,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:Pi.multiply(Pi.normalize(t.cameraLocation),-1)};if(this.OS)return this.qS(t.boundingBox,i)}qS(t,i,s){let e=i;s=void 0!==s?s:0,e=this.rv(t,e,100,20,1,s,5);const h=this.ev(e.direction);return e=this.nv(e,this.ov(t,e,100,1),h),e}rv(t,i,s,e,h,r,n){return pl(r,n,(t=>({direction:i.direction,location:Pi.multiply(i.direction,-t)})),(i=>this.av(t,i)),s,h,"linear",e)}ov(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.sv(i.direction),a=this.lv(t,!1,i);let l=i;const u=e,c=.1;return Math.abs(a.bottom-a.top)>u&&(l=a.bottom<a.top?ml(0,c,(t=>({location:l.location,direction:Pi.normalize(Pi.lerp(l.direction,o,t))})),(i=>this.uv(t,i)),0,u,!0,s):ml(0,c,(t=>({location:l.location,direction:Pi.normalize(Pi.lerp(l.direction,n,t))})),(i=>this.uv(t,i)),0,u,!0,s)),Math.abs(a.left-a.right)>u&&(l=a.left<a.right?ml(0,c,(t=>({location:l.location,direction:Pi.normalize(Pi.lerp(l.direction,r,t))})),(i=>this.cv(t,i)),0,u,!0,s):ml(0,c,(t=>({location:l.location,direction:Pi.normalize(Pi.lerp(l.direction,h,t))})),(i=>this.cv(t,i)),0,u,!0,s)),l}av(t,i){const s=this.lv(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}cv(t,i){const s=this.lv(t,!1,i);return Math.abs(s.left-s.right)}uv(t,i){const s=this.lv(t,!1,i);return Math.abs(s.top-s.bottom)}lv(t,i,s){const e=ji(this.dv(t,i,s).map((t=>ct(t,this.HS,this.$S))));return{left:e.min.x,right:this.$S.x.getInnerEnd()-e.max.x,top:this.$S.y.getInnerEnd()-e.max.y,bottom:e.min.y}}dv(t,i,s){const e=this.XS,h=d(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=d(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),n=[],o=i?16:4,a=(h.x+r.x)/2,l=(h.z+r.z)/2,u=Math.sqrt(2)*(r.x-a),c=Math.sqrt(2)*(r.z-l);return[h.y,r.y].forEach((t=>{for(let i=0;i<o;i+=1){const s=Math.PI/4+2*Math.PI*i/o,e=a+Math.cos(s)*u,h=l+Math.sin(s)*c;n.push({x:e,y:t,z:h})}})),n.map((t=>this.Uy(t,s))).filter((t=>void 0!==t))}tv(t,i){const s=Pi.length(i.location),e=this.fv(t);return s<e?{direction:i.direction,location:Pi.multiply(i.direction,-e)}:i}fv(t){return.8*Math.sqrt(t.x**2+t.y**2+t.z**2)}sv(t){const i=d(0,1,0),s=Pi.normalize(Pi.cross(i,Pi.multiply(t,-1)));let e=Pi.cross(s,t);return e.y=Math.abs(e.y),e=Pi.normalize(e),{Right:s,Up:e,Down:Pi.multiply(e,-1),Left:Pi.multiply(s,-1)}}ev(t){const i={x:0,y:1,z:0},s=Pi.angle(t,i),e=Pi.angle(t,Pi.multiply(i,-1));return Math.min(s,e)}nv(t,i,s){return{location:Pi.lerp(t.location,i.location,s),direction:Pi.normalize(Pi.lerp(t.direction,i.direction,s))}}hv(t){return this.OS=t,this}Av(){return this.OS}}const pl=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=(i+t)/2;do{const o=s(u);if(a={value:u,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const c=a.score>h;c&&"linear"===n||!c&&"reversed"===n?(u=(a.value+t)/2,i=a.value):(u=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},ml=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=t;do{const c=s(u),d=e(c);if(void 0===a||Math.abs(d-h)<Math.abs(a.score-h)){if(a={value:u,result:c,score:e(c)},Math.abs(a.score-h)<=r)break}else if(n)break;l+=1,u+=1/(o-1)*(i-t)}while(l<o);return a.result};class yl extends hl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ms="Surface Grid Series 3D",this.gv={},this.fS=!1,this.Wd=()=>li(this.be),this.tS=$r;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.Ki.getSeries().length;this.be=di(this.ts.surfaceGridSeries3DFillStyle,n),this.pv=di(this.ts.surfaceGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows};this.Yn=o,this.Ga=this.yt.yv(o).ke(this.be).mv(this.pv).nS(this.tS).ds(this.getHighlight()),this.fs(this.Ga),e.start&&this.setStart(e.start),e.end&&this.setEnd(e.end),e.step&&this.setStep(e.step)}Sv(){const t=this.gv.start||{x:0,z:0};let i;i=this.gv.end?{x:(this.gv.end.x-t.x)/this.Yn.columns,z:(this.gv.end.z-t.z)/this.Yn.rows}:this.gv.step?this.gv.step:{x:1,z:1},this.Ga.vv(t,i),this.Ki.cs.vs()}setStart(t){return this.gv.start=t,this.Sv(),this}getStart(){return this.Ga.xv().start}setStep(t){return this.gv.step=t,this.Sv(),this}getStep(){return this.Ga.xv().step}setEnd(t){return this.gv.end=t,this.Sv(),this}getEnd(){return this.Ga.xv().end}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Ga.ke(this.be),this.yt.vs(),this}getFillStyle(){return this.be}setWireframeStyle(t){return this.pv="function"==typeof t?t(this.pv):t,this.Ga.mv(this.pv),this.yt.vs(),this}getWireframeStyle(){return this.Ga.bv()}setIntensityInterpolation(t){return t=t||"disabled",this.Ga.Mv(t),this.yt.vs(),this}getIntensityInterpolation(){return this.Ga._v()}invalidateIntensityValues(t){if(this.fS&&this.Ki.cs.Gn(fo.xf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Yn.dataOrder?t.length:t[0].length,rows:"rows"===this.Yn.dataOrder?t.length:t[0].length},s="columns"===this.Yn.dataOrder?this.Yn.columns:this.Yn.rows,e="columns"===this.Yn.dataOrder?this.Yn.rows:this.Yn.columns;if(i.x>s||i.y>e){if(!0===this.Ki.dA.$n){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Yn.columns}x${this.Yn.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;xt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.Ga.wv({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Yn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Yn.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Yn.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Yn.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Yn.dataOrder?this.Yn.columns:this.Yn.rows)-1,o=("columns"===this.Yn.dataOrder?this.Yn.rows:this.Yn.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.Ki.dA.$n){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Yn.columns}x${this.Yn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;xt.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.Ga.wv({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.yt.vs(),this.fS=!0,this}invalidateHeightMap(t){if(this.fS&&this.Ki.cs.Gn(fo.xf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Yn.dataOrder?t.length:t[0].length,rows:"rows"===this.Yn.dataOrder?t.length:t[0].length},s="columns"===this.Yn.dataOrder?this.Yn.columns:this.Yn.rows,e="columns"===this.Yn.dataOrder?this.Yn.rows:this.Yn.columns;if(i.x>s||i.y>e){if(!0===this.Ki.dA.$n){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Yn.columns}x${this.Yn.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;xt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.Ga.Cv({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Yn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Yn.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Yn.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Yn.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Yn.dataOrder?this.Yn.columns:this.Yn.rows)-1,o=("columns"===this.Yn.dataOrder?this.Yn.rows:this.Yn.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.Ki.dA.$n){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Yn.columns}x${this.Yn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;xt.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.Ga.Cv({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.yt.vs(),this.fS=!0,this}setCullMode(t){return this.Ga.kv("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Ga.Tv()}aS(){}Fe(){}Ay(){}qy(){return this.iS&&this.getVisible()}Pe(t,i){t.ds(i),this.yt.vs()}}class Sl extends hl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ms="Surface Grid Series 3D",this.gv={},this.Wd=()=>li(this.be),this.Ki.cs.Gn(fo.xf),this.tS=$r;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.Ki.getSeries().length;this.be=di(this.ts.surfaceScrollingGridSeries3DFillStyle,n),this.pv=di(this.ts.surfaceScrollingGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows};this.Yn=o,this.Ga=this.yt.Fv(o).ke(this.be).mv(this.pv).nS(this.tS).ds(this.getHighlight()),this.fs(this.Ga),e.start&&this.setStart(e.start),e.step&&this.setStep(e.step)}Sv(){const t=this.gv.start||{x:0,z:0};let i;i=this.gv.step?this.gv.step:{x:1,z:1},this.Ga.vv(t,i),this.Ki.cs.vs()}setStart(t){return this.gv.start=t,this.Sv(),this}getStart(){return this.Ga.xv().start}setStep(t){return this.gv.step=t,this.Sv(),this}getStep(){return this.Ga.xv().step}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Ga.ke(this.be),this.yt.vs(),this}getFillStyle(){return this.be}setWireframeStyle(t){return this.pv="function"==typeof t?t(this.pv):t,this.Ga.mv(this.pv),this.yt.vs(),this}getWireframeStyle(){return this.Ga.bv()}setIntensityInterpolation(t){return t=t||"disabled",this.Ga.Mv(t),this.yt.vs(),this}getIntensityInterpolation(){return this.Ga._v()}clear(){return this.Ga.Gt(),this.yt.vs(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),i){const t=i[0].length,s=0+t-1,e="columns"===this.Yn.scrollDimension?this.Yn.rows:this.Yn.columns;if(s>e-1){if(!0===this.Ki.dA.$n){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.Yn.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;xt.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.Yn.scrollDimension?this.Yn.rows:this.Yn.columns;if(i>e-1){if(!0===this.Ki.dA.$n){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.Yn.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;xt.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.Ki.dA.$n){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;xt.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.Ga.Iv({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this.yt.vs(),this}setCullMode(t){return this.Ga.kv("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Ga.Tv()}aS(){}Fe(){}Ay(){}qy(){return this.iS&&this.getVisible()}Pe(t,i){t.ds(i),this.yt.vs()}}const vl=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof _l),xl=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z),bl={translation:(t,i,s)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,i,s,1],xRotation(t){const i=Math.cos(t),s=Math.sin(t);return[1,0,0,0,0,i,s,0,0,-s,i,0,0,0,0,1]},yRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,0,-s,0,0,1,0,0,s,0,i,0,0,0,0,1]},zRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,s,0,0,-s,i,0,0,0,0,1,0,0,0,0,1]},scaling:(t,i,s)=>[t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],translate:(t,i,s,e)=>bl.multiply(t,bl.translation(i,s,e)),xRotate:(t,i)=>bl.multiply(t,bl.xRotation(i)),yRotate:(t,i)=>bl.multiply(t,bl.yRotation(i)),zRotate:(t,i)=>bl.multiply(t,bl.zRotation(i)),rotateXYZ(t,i){let s=bl.xRotate(t,i.x);return s=bl.yRotate(s,i.y),s=bl.zRotate(s,i.z),s},scale:(t,i,s,e)=>bl.multiply(t,bl.scaling(i,s,e)),multiply(t,i){const s=i[0],e=i[1],h=i[2],r=i[3],n=i[4],o=i[5],a=i[6],l=i[7],u=i[8],c=i[9],d=i[10],f=i[11],A=i[12],g=i[13],p=i[14],m=i[15],y=t[0],S=t[1],v=t[2],x=t[3],b=t[4],M=t[5],_=t[6],w=t[7],C=t[8],k=t[9],T=t[10],F=t[11],I=t[12],P=t[13],D=t[14],B=t[15],L=[];return L[0]=s*y+e*b+h*C+r*I,L[1]=s*S+e*M+h*k+r*P,L[2]=s*v+e*_+h*T+r*D,L[3]=s*x+e*w+h*F+r*B,L[4]=n*y+o*b+a*C+l*I,L[5]=n*S+o*M+a*k+l*P,L[6]=n*v+o*_+a*T+l*D,L[7]=n*x+o*w+a*F+l*B,L[8]=u*y+c*b+d*C+f*I,L[9]=u*S+c*M+d*k+f*P,L[10]=u*v+c*_+d*T+f*D,L[11]=u*x+c*w+d*F+f*B,L[12]=A*y+g*b+p*C+m*I,L[13]=A*S+g*M+p*k+m*P,L[14]=A*v+g*_+p*T+m*D,L[15]=A*x+g*w+p*F+m*B,L},inverse(t){const i=[],s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],A=t[12],g=t[13],p=t[14],m=t[15],y=d*m,S=p*f,v=a*m,x=p*l,b=a*f,M=d*l,_=h*m,w=p*r,C=h*f,k=d*r,T=h*l,F=a*r,I=u*g,P=A*c,D=n*g,B=A*o,L=n*c,R=u*o,E=s*g,z=A*e,V=s*c,O=u*e,N=s*o,G=n*e,W=y*o+x*c+b*g-(S*o+v*c+M*g),U=S*e+_*c+k*g-(y*e+w*c+C*g),Y=v*e+w*o+T*g-(x*e+_*o+F*g),H=M*e+C*o+F*c-(b*e+k*o+T*c),$=1/(s*W+n*U+u*Y+A*H);return i[0]=$*W,i[1]=$*U,i[2]=$*Y,i[3]=$*H,i[4]=$*(S*n+v*u+M*A-(y*n+x*u+b*A)),i[5]=$*(y*s+w*u+C*A-(S*s+_*u+k*A)),i[6]=$*(x*s+_*n+F*A-(v*s+w*n+T*A)),i[7]=$*(b*s+k*n+T*u-(M*s+C*n+F*u)),i[8]=$*(I*l+B*f+L*m-(P*l+D*f+R*m)),i[9]=$*(P*r+E*f+O*m-(I*r+z*f+V*m)),i[10]=$*(D*r+z*l+N*m-(B*r+E*l+G*m)),i[11]=$*(R*r+V*l+G*f-(L*r+O*l+N*f)),i[12]=$*(D*d+R*p+P*a-(L*p+I*a+B*d)),i[13]=$*(V*p+I*h+z*d-(E*d+O*p+P*h)),i[14]=$*(E*a+G*p+B*h-(N*p+D*h+z*a)),i[15]=$*(N*d+L*h+O*a-(V*a+G*d+R*h)),i},projectionPerspective(t,i,s,e){const h=1/Math.tan(t*Math.PI/180/2),r=1/(s-e);return[h/i,0,0,0,0,h,0,0,0,0,(s+e)*r,-1,0,0,s*e*r*2,0]},projectionOrthographic:(t,i,s,e,h,r)=>[2/(i-t),0,0,-(i+t)/(i-t),0,2/(e-s),0,-(e+s)/(e-s),0,0,-2/(r-h),-(r+h)/(r-h),0,0,0,1]};class Ml extends hl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Ms="Mesh Model 3D",this.Pv=new Float32Array,this.ft={x:1,y:1,z:1},this.Dv={x:0,y:0,z:0},this.Bv={x:0,y:0,z:0},this.Lv={x:0,y:0,z:0},this.Rv={x:0,y:0,z:0},this.Ha=Ri,this.Wd=()=>li(this.getFillStyle());const n=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.Ki.getSeries().length;this.Ga=this.yt.Ev().oS(this.sS).ke(di(this.ts.meshModel3DFillStyle||this.ts.pointSeriesFillStyle,n)).ds(this.getHighlight()),this.fs(this.Ga)}setModelGeometry(t){const{indices:i,vertices:s,normals:e}=t;let h=Bi,r=Di,n=Bi,o=Di,a=Bi,l=Di;for(let t=0;t<s.length;t+=3){const i=s[t],e=s[t+1],u=s[t+2];h=Math.max(h,i),r=Math.min(r,i),n=Math.max(n,e),o=Math.min(o,e),a=Math.max(a,u),l=Math.min(l,u)}this.Ha={min:{x:r,y:o,z:l},max:{x:h,y:n,z:a}};for(let t=0;t<s.length;t+=3)s[t]-=this.Ha.min.x,s[t+1]-=this.Ha.min.y,s[t+2]-=this.Ha.min.z;return this.Rv={x:this.Ha.max.x-this.Ha.min.x,y:this.Ha.max.y-this.Ha.min.y,z:this.Ha.max.z-this.Ha.min.z},this.Pv=s instanceof Float32Array?s:new Float32Array(s),this.checkedNormals=e&&!Number.isNaN(e[0])?e instanceof Float32Array?e:new Float32Array(e):void 0,this.checkedNormals||this.setColorShadingStyle($r),this.Ga.zv({vertices:this.Pv,normals:this.checkedNormals,indices:i instanceof Uint16Array?i:new Uint16Array(i),modelSize:this.Rv}),this.Ki.cs.vs(),this}setVertexValues(t){const i=this.Bv,s=this.Dv,e=this.ft,h=this.Rv,r=this.Lv,n=dt(i,this.Ki.axes,this.Ki.world);let o;if(this.Vv)o=t(this.Vv);else{const i=[],a=bl.projectionOrthographic(-1,1,-1,1,1,-1);let l=bl.translate(a,h.x/2,h.y/2,h.z/2);l=bl.rotateXYZ(l,r),l=bl.translate(l,-h.x/2,-h.y/2,-h.z/2);const u=(s.x+1)*(h.x/2),c=(s.y+1)*(h.y/2),d=(s.z+1)*(h.z/2);for(let t=0;t<this.Pv.length;t+=3){const s=bl.multiply(l,[this.Pv[t],this.Pv[t+1],this.Pv[t+2],1]),h={x:n.x+(s[0]-u)*e.x,y:n.y+(s[1]-c)*e.y,z:n.z+(s[2]-d)*e.z};i.push(h)}this.Vv=i,o=t(i)}return 0===o.length||(o.length!==this.Vv.length&&!0===this.Ki.cs.Yn.$n&&xt.console.warn("LightningChart JS warning - MeshModel3D.setVertexValues returned array length is not equal to vertex locations array length.\nThis is most likely an application error."),this.Ga.Ov(o instanceof Float32Array?o:new Float32Array(o)),this.Ki.cs.vs()),this}setScale(t){const i={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.ft=i,this.Vv=void 0,this.Ga.Nv(i),this.Ki.cs.vs(),this}getScale(){return this.ft}setModelLocation(t){return this.Bv=t,this.Vv=void 0,this.Ga.Gv(t),this.Ki.cs.vs(),this}getModelLocation(){return this.Bv}setModelAlignment(t){return this.Dv=t,this.Vv=void 0,this.Ga.Wv(t),this.Ki.cs.vs(),this}getModelAlignment(){return this.Dv}setModelRotation(t){const i={x:fs(t.x),y:fs(t.y),z:fs(t.z)};return this.Lv=i,this.Vv=void 0,this.Ga.Uv(this.Lv),this.Ki.cs.vs(),this}getModelRotation(){return this.Lv}setBackfaceCullingMode(t){return this.Ga.Yv(t),this.Ki.cs.vs(),this}getBackfaceCullingMode(){return this.Ga.Hv()}setFillStyle(t){return this.Ga.ke(t),this.Ki.cs.vs(),this}getFillStyle(){return this.Ga.zh()}setColorShadingStyle(t){return this.checkedNormals||t!==jr?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new Zr.Simple))}qy(){return!1}Pe(t,i){t.ds(i),this.Ki.cs.vs()}attach(t,i=!0,s=!1){return super.attach(t,i),ai(t,this.ts,s,{fill:this.getFillStyle()}),this}}class _l extends fl{constructor(t,i,s,e,h,r,n){var o;let a;super(t,i,s,i.yp("chart3D bg",0),e,i.cs.ts.chart3DBackgroundFillStyle,i.cs.ts.chart3DBackgroundStrokeStyle,i.cs.ts.chart3DTitleFont,i.cs.ts.chart3DTitleFillStyle,r),this.$v=1,this.Xv=[],this.jv=2,this.Zv=!0,this.Qv=!0,this.Jv=!0,this.Kv=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.axes={id:"axes",chart:this},this.world={id:"world",chart:this},this.ln=[],this.An=()=>{const t=this.yt.qv();this.ix.tx(t),this.sx.tx(t);const i=this.hx.viewportChanged(this.nx());i&&this.ox(i),this.cs.vs()},this.hS=(t,i,s,e,h)=>{if(this.Jv){const t=h;this.Xv.push({type:"rotate",rotation:t}),this.cs.vs(),jt(i)}},this.eS=(t,i)=>{if(this.Qv){if(this.Zv)Math.sign(this.Kv)!==Math.sign(i.deltaY)?this.Kv=fi(i):this.Kv+=fi(i);else{const t=fi(i);this.Xv.push({type:"wheel-zoom",deltaY:t})}this.cs.vs(),jt(i)}},this.cs.Gn(fo.ff),this.bp.Eh("Chart3D"),this.lx=s.d3(),this.lx.x.K(-1,1),this.lx.y.K(-1,1),this.lx.z.K(-1,1),this.yt=i.ux("chart3D layer3D",0,this.lx),this.ix=i.Ax("chart3D series bg",0),this.sx=i.Um("chart3D axis ui",1),this.gx={x:new Ka(this,(o=()=>this.MS,{...il(o,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Mr().x)),Ty:t=>t.x,$y:(t,i)=>({x:t.x,y:i.y,z:i.z}),Kd:d(0,-1,0),Xy:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:d(0,i.y,i.z),gridlinePositionB:d(0,i.y,-i.z),gridlinePositionC:d(0,-i.y,-i.z)}},Qy:()=>!0,Jy:()=>!1,Hy:()=>!1}),this.lx.x,this.ts,this.yt,this.sx,this.pixelScale,!1,this.hs),y:new Ka(this,sl((()=>this.MS)),this.lx.y,this.ts,this.yt,this.sx,this.pixelScale,!1,this.hs),z:new Ka(this,el((()=>this.MS)),this.lx.z,this.ts,this.yt,this.sx,this.pixelScale,!1,this.hs)},this.mx=this.yt.sy([Ua.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.ts.chart3DBoundingBoxStrokeStyle),this.IS=this.ix.sc(this.engine.scale,nr.Simple).ke(this.ts.chart3DSeriesBackgroundFillStyle).Ce(rt).setMouseInteractions(!0),this.PS=this.ix.sc(this.engine.scale,nr.Simple).ke(z).Ce(this.ts.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.FS(this.IS,this.PS),this.yx({x:1,y:1,z:1},!0),this.hx=new gl(this.engine.scale,this.pixelScale,this.lx,((t,i)=>(i&&this.ox(i),this.yt.Uy(t)))),this.Sx=this.hx.getDefaultCameraConfiguration(this.vx(this.xx)),this.ox(this.Sx),this.rS=Hs(new js(((t,i,s)=>{a={locationOne:i,locationTwo:s,cameraLocation:this.yt.getCameraLocation()}}),((t,i,s,e,h,r)=>{if(!this.Jv&&!this.Qv)return;const n=(a.locationOne.x-a.locationTwo.x)**2+(a.locationOne.y-a.locationTwo.y)**2,o=(i.x-s.x)**2+(i.y-s.y)**2,u=Pi.length(a.cameraLocation),c=n/o*u,d=l((e.x+h.x)/2,(e.y+h.y)/2);this.Xv.push({type:"rotate+zoom",rotation:this.Jv?d:{x:0,y:0},cameraDistance:this.Qv?c:u}),this.cs.vs(),jt(r)}),(t=>{})),new Xs((t=>{}),((t,i,s,e,h)=>{if(this.Jv){const t=e;this.Xv.push({type:"rotate",rotation:t}),this.cs.vs(),jt(h)}}),(t=>{}))),this.onBackgroundTouchStart(this.rS.onTouchStart),this.onBackgroundTouchMove(this.rS.onTouchMove),this.onBackgroundTouchEnd(this.rS.onTouchEnd),this.onSeriesBackgroundTouchStart(this.rS.onTouchStart),this.onSeriesBackgroundTouchMove(this.rS.onTouchMove),this.onSeriesBackgroundTouchEnd(this.rS.onTouchEnd),this.onBackgroundMouseDrag(this.hS),this.onBackgroundMouseWheel(this.eS),this.onBackgroundMouseDown(((t,i)=>{jt(i)})),this.onSeriesBackgroundMouseDrag(this.hS),this.onSeriesBackgroundMouseWheel(this.eS),this.onSeriesBackgroundMouseDown(((t,i)=>{jt(i)})),this.setAnimationsEnabled(!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled)),this.onResize(this.An),this.An(),this.mp(h,this.pixelScale)}addPointSeries(t){const i=new(t&&t.type||ul)(this,this.wS,this.yt,this.ts,this.cs.hs,t);return this.DS(i),i}addLineSeries(t){const i=new ol(this,this.wS,this.yt,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,this.cs.hs);return this.DS(i),i}addPointLineSeries(t){const i=new al(this,this.wS,this.yt,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,this.cs.hs);return this.DS(i),i}addSurfaceGridSeries(t){const i=new yl(this,this.wS,this.yt,t,this.ts,this.cs.hs);return this.DS(i),i}addSurfaceScrollingGridSeries(t){const i=new Sl(this,this.wS,this.yt,t,this.ts,this.cs.hs);return this.DS(i),i}addBoxSeries(t){const i=new rl(this,this.wS,this.yt,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,this.cs.hs);return this.DS(i),i}addMeshModel(t){const i=new Ml(this,this.wS,this.yt,this.ts,t,this.cs.hs);return this.DS(i),i}translateCoordinate(t,i,s){if(vl(i)||vl(s)||xl(t)){if(vl(i)&&vl(s)&&xl(t)){if("axes"===i.id&&"world"===s.id)return this.yt.At(t);if("world"===i.id&&"axes"===s.id)return this.yt.St(t);if(i.id===s.id)return t}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return qo(t,i,s,this.pixelScale,this.cs)}getDefaultAxisX(){return this.gx.x}getDefaultAxisY(){return this.gx.y}getDefaultAxisZ(){return this.gx.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.gx.x,this.gx.y,this.gx.z]}setCameraLocation(t){let i={location:t,direction:Pi.normalize(Pi.multiply(t,-1))};const s=this.hx.cameraLocationChanged(this.nx(i));return s&&(i=s),this.ox(i),this.cs.vs(),this}getCameraLocation(){return this.yt.getCameraLocation()}getCameraDirection(){return this.yt.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.hx.hv(t);const i=this.hx.cameraLocationChanged(this.nx());return i&&this.ox(i),this}getCameraAutomaticFittingEnabled(){return this.hx.Av()}onCameraChange(t){return this.L.on("cameraChange",t)}offCameraChange(t){return this.L.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.mx.Ee(t).zy(ja(this.mx.cu())),this.yt.vs(),this}getBoundingBoxStrokeStyle(){return this.mx.cu()}setBoundingBox(t){return this.yx(t,!1),this}yx(t,i){this.xx=t;const s=this.vx(t);if(this.lx.x.tt(s.x),this.lx.y.tt(s.y),this.lx.z.tt(-s.z),!i){const t=this.hx.boundingBoxChanged(this.nx());t&&this.ox(t)}this.cs.vs()}getBoundingBox(){return this.xx}Fe(t){if(ra.kp(this.bp,this.Sp),0!==this.Kv){const i=this.Kv*t*.006;this.Xv.push({type:"wheel-zoom",deltaY:i}),this.Kv=Math.sign(this.Kv)*Math.max(Math.abs(this.Kv)-.01*t,0),0!==this.Kv&&this.cs.vs(!0)}const i=this.getCameraDirection();if(this.Xv.length>0){const t=this.hx.applyCameraInteractions(this.nx(),this.Xv);t&&this.ox(t),this.Xv.length=0}this.bx&&Pi.equals(this.bx.location,this.Sx.location)&&Pi.equals(this.bx.direction,this.Sx.direction)||this.L.emit("cameraChange",this,this.getCameraLocation()),this.bx=this.Sx,super.Fe(t);for(let t=0;t<this.MS.length;t+=1)this.MS[t].aS();for(let t=0;t<this.MS.length;t+=1)this.MS[t].Fe();this.gx.x._r(),this.gx.y._r(),this.gx.z._r(),this.gx.x.Fe(i),this.gx.y.Fe(i),this.gx.z.Fe(i),super.pp();const s=this.lx,e=d(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),h=d(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd());this.mx.Gt().ol([d(h.x,e.y,e.z),d(h.x,h.y,e.z),d(h.x,h.y,h.z),d(h.x,e.y,h.z),d(e.x,e.y,h.z),d(e.x,h.y,h.z),d(h.x,h.y,h.z),d(h.x,h.y,e.z),d(e.x,h.y,e.z),d(e.x,h.y,h.z),d(e.x,e.y,h.z),d(e.x,e.y,e.z)]);const r=[d(e.x,e.y,e.z),d(h.x,e.y,e.z),d(e.x,h.y,e.z),d(h.x,h.y,e.z),d(e.x,e.y,h.z),d(h.x,e.y,h.z),d(e.x,h.y,h.z),d(h.x,h.y,h.z)].map((t=>this.yt.Uy(t))),n=this.yt.Uy(d((e.x+h.x)/2,(e.y+h.y)/2,(e.z+h.z)/2)),o=ei(r,n),a=[];for(let t=0;t<o.length;t+=1){const i=o[t];Ki(i,n,o[t>0?t-1:o.length-1],o[t<o.length-1?t+1:0])||a.push(i)}const l=ei(a,n);this.IS.Sl(l),this.PS.Sl(l);for(let t=0;t<this.MS.length;t+=1)this.MS[t].Ay()}dispose(){return this.ln.forEach((t=>{t()})),this.ln.length=0,this.lx.U(),this.yt.U(),this.sx.U(),this.ix.U(),super.dispose()}Z(){return this.lx.x.Z(),this.lx.y.Z(),this.lx.z.Z(),super.Z()}J(){return super.J()}ox(t){this.yt.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(Pi.addVec(t.location,Pi.multiply(t.direction,-this.jv))),this.Sx=t,this.cs.vs()}vx(t){return Pi.divide(t,Pi.length(t)/this.$v)}nx(t=this.Sx){return{boundingBox:this.vx(this.xx),cameraLocation:t.location,cameraDirection:t.direction}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.Qv=t,this}getMouseInteractionZoom(){return this.Qv}setMouseInteractionRotate(t){return this.Jv=t,this}getMouseInteractionRotate(){return this.Jv}forEachAxis(t){return t(this.gx.x),t(this.gx.y),t(this.gx.z),this}getSeries(){return this.MS}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.Zv=!!t,this}getAnimationZoom(){return this.Zv}}const wl={Column:Dn,Row:Bn};class Cl extends sa{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Mx=new Map,this._x=this.addUIElement(wl.Row).setPosition({x:0,y:100}).setOrigin(we.LeftTop).setBackground((t=>t.setFillStyle(z).setStrokeStyle(rt)))}add(t,i){return(t instanceof ha?[t]:t instanceof Ef?t.getCells().filter((t=>t.panel instanceof ha)).map((t=>t.panel)):[]).forEach((t=>{const s=this._x.addElement(oo.VerticalLegendBox).setBackground((t=>t.setFillStyle(z).setStrokeStyle(rt))).add(t,i).setTitle(t.getTitle());this.Mx.set(t,s)})),this.cs.vs(),this}setLegendBoxes(t){return this.Mx.forEach(((i,s)=>t(i,s))),this}getMinimumSize(){return super.getMinimumSize()||this._x.getSize()}}const kl={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},Tl=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),Fl=(t,i)=>{let s=i.geometry;return s=Il(t,i,s),s=Pl(t,i,s),s},Il=(t,i,s)=>{if(t===kl.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},Pl=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===kl.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=ji(Ft(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},Dl={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},Bl={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class Ll extends ha{constructor(t,i,s,e,h,r,n){super(t,i,s,i.yp("mapChart bg",0),e,i.cs.ts.mapChartBackgroundFillStyle,i.cs.ts.mapChartBackgroundStrokeStyle,i.cs.ts.mapChartTitleFont,i.cs.ts.mapChartTitleFillStyle,n),this.wx=[],this.ft=this.ep.d2({scaleXYConstructor:Ls}),this.Hi=!0,this.Cx=this.ts.mapChartSeparateRegionFillStyle,this.kx=this.ts.mapChartSeparateRegionStrokeStyle,this.Tx=exports.AutoCursorModes.onHover,this.Om=Rl,this.ih=!0,this.Fx=0,this.Ix=!0,this.Px=new Map,this.onMouseEnter=t=>this.L.on("mouseEnter",t),this.onMouseLeave=t=>this.L.on("mouseLeave",t),this.onMouseClick=t=>this.L.on("mouseClick",t),this.onMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onMouseDown=t=>this.L.on("mouseDown",t),this.onMouseUp=t=>this.L.on("mouseUp",t),this.onMouseMove=t=>this.L.on("mouseMove",t),this.offMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offMouseClick=t=>this.L.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.L.off(t,"mouseDown"),this.offMouseUp=t=>this.L.off(t,"mouseUp"),this.offMouseMove=t=>this.L.off(t,"mouseMove"),this.offMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.L.off(t,"mouseWheel"),this.onMapDataReady=t=>{const i=this.L.on("mapDataReady",t);return this.Dx&&xt.setTimeout((()=>t())),i},this.onViewChange=t=>this.L.on("viewChange",t),this.Bx=(t,i,s,e,h)=>{this.ft.x.tt(e).ei([this.jt.left+this.ya.left,this.jt.right+this.ya.right]),this.ft.y.tt(h).ei([this.jt.bottom+this.ya.bottom,this.jt.top+this.ya.top+ra.Cp(this.bp,this.Sp)]),this.Lx&&this.Rx(this.Ex,this.ft,this.Lx)},this.Ct=(t,i)=>{const s=i;if(!s||!this.Dx)return;const{iRegion:e,region:h}=this.zx(this.Dx,s);this.Tx!==exports.AutoCursorModes.disabled&&(this.Vx(h,e),jt(t)),this.Ix&&this.cs.us._s(h,!0),this.Ox=h,this.L.emit("mouseEnter",this,t)},this.kt=(t,i)=>{const s=i;if(!s||!this.Dx)return;const{iRegion:e,region:h}=this.zx(this.Dx,s);this.Nx(h,e),this.Ix&&this.cs.us._s(h,!1),this.Ox=void 0,this.L.emit("mouseLeave",this,t),t&&jt(t)},this.Dt=(t,i)=>{const s=i;if(!s||!this.Dx)return;const{iRegion:e,region:h}=this.zx(this.Dx,s);this.Tx!==exports.AutoCursorModes.disabled&&(this.Vx(h,e),jt(t)),this.Ox=h,this.L.emit("mouseMove",this,t)},this.Tt=(t,i)=>this.L.emit("mouseClick",this,t),this.Ft=(t,i)=>this.L.emit("mouseDoubleClick",this,t),this.It=(t,i)=>this.L.emit("mouseDown",this,t),this.Pt=(t,i)=>this.L.emit("mouseUp",this,t),this.Lt=(t,i,s)=>{this.L.emit("mouseDragStart",this,t,i)},this.Bt=(t,i,s,e,h)=>{this.L.emit("mouseDrag",this,t,i,s,e)},this.Rt=(t,i,s,e)=>{this.L.emit("mouseDragStop",this,t,i,s)},this.Et=(t,i)=>{this.L.emit("mouseWheel",this,t)},this.zt=(t,i)=>{const s=i;if(!s||!this.Dx)return;const{iRegion:e,region:h}=this.zx(this.Dx,s);this.Gx=this.engine.clientLocation2Engine(t.clientX,t.clientY),this.Vx(h,e),this.Ix&&this.cs.us._s(h,!0),this.Ox=h,this.L.emit("touchStart",this,t),jt(t)},this.Vt=(t,i)=>{const s=i;if(!s||!this.Dx)return;const{iRegion:e,region:h}=this.zx(this.Dx,s);this.Gx=this.engine.clientLocation2Engine(t.clientX,t.clientY),this.Vx(h,e),this.Ox=h,this.L.emit("touchMove",this,t),jt(t)},this.Ot=(t,i)=>{const s=i;if(!s||!this.Dx)return;const{iRegion:e,region:h}=this.zx(this.Dx,s);this.Gx=void 0,this.Nx(h,e),this.Ix&&this.cs.us._s(h,!1),this.Ox=void 0,this.L.emit("touchEnd",this,t),jt(t)},this.cs.Gn(fo.gf),this.ih=!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled),this.Wx=i.Um("mapChart plotting",0),this.onResize(this.Bx),this.bp.Eh("Map Chart");const o=It(r?r.autoCursorBuilder:void 0,Fa);this.Ux=o.lm(i.$m(),this.ft,this.ft,this.ts).setVisible(!1),this.Yx=this.hs.yg(),this.mp(h,this.uiScale),this.Hx=this.Wx.$x(this.ft).setMouseInteractions(this.Hi).setMouseEnterEventHandler(((t,i,s)=>this.Ct(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this.kt(i,s))).setMouseClickEventHandler(((t,i,s)=>this.Tt(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Ft(i,s))).setMouseDownEventHandler(((t,i,s)=>this.It(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Pt(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Dt(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Lt(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.Bt(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Rt(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Et(i,s))).setTouchStartEventHandler(((t,i,s)=>this.zt(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.Vt(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Ot(i,s))).ke(this.ts.mapChartFillStyle).Ce(this.ts.mapChartStrokeStyle),this.Xx=this.Wx.$x(this.ft).setMouseInteractions(this.Hi).ke(this.ts.mapChartOutlierRegionFillStyle).Ce(this.ts.mapChartOutlierRegionStrokeStyle);const a=It(r&&r.type,kl.World);this.Ex=a,this.jx(a).then((()=>{this.L.emit("mapDataReady")}))}getRegionUnderMouse(){return this.Ox}setFillStyle(t){return this.Hx.ke(t),this.cs.vs(),this}getFillStyle(){return this.Hx.zh()}setStrokeStyle(t){return this.Hx.Ce(t),this.cs.vs(),this}getStrokeStyle(){return this.Hx.lo()}setEffect(t){return this.Yx.Ss(t),this.cs.vs(),this}getEffect(){return this.Yx.xs()}setOutlierRegionFillStyle(t){return this.Xx.ke(t),this.cs.vs(),this}getOutlierRegionFillStyle(){return this.Xx.zh()}setOutlierRegionStrokeStyle(t){return this.Xx.Ce(t),this.cs.vs(),this}getOutlierRegionStrokeStyle(){return this.Xx.lo()}setSeparateRegionFillStyle(t){return this.Cx="function"==typeof t?t(this.Cx):t,this.wx.forEach((t=>t.ke(this.Cx))),this.cs.vs(),this}getSeparateRegionFillStyle(){return this.Cx}setSeparateRegionStrokeStyle(t){return this.kx="function"==typeof t?t(this.kx):t,this.wx.forEach((t=>t.Ce(this.kx))),this.cs.vs(),this}getSeparateRegionStrokeStyle(){return this.kx}invalidateRegionValues(t){if(!this.Dx||!this.Zx)return this.Qx=this.Qx||[],this.Qx.push(t),this;if("function"==typeof t)for(let i=0;i<this.Dx.regions.length;i+=1){const s=this.Dx.regions[i],e=this.Zx[i],h=t({...s,geometry:void 0},e);if(void 0!==h&&h!==e){this.Zx[i]=h;const t=this.Px.get(s);null==t||t.forEach((t=>{t.Jx(h)}))}}else for(const i of t)if(i)for(let t=0;t<this.Dx.regions.length;t+=1){const s=this.Dx.regions[t],e=this.Zx[t];if(void 0!==i.value&&i.value!==e&&Tl(s,i)){this.Zx[t]=i.value;const e=this.Px.get(s);null==e||e.forEach((t=>{t.Jx(i.value)}))}}return this.cs.vs(),this}setAutoCursor(t){return this.Ux&&t(this.Ux),this.cs.vs(),this}getAutoCursor(){return this.Ux}setAutoCursorMode(t){return this.Tx=t,this.cs.vs(),this}getAutoCursorMode(){return this.Tx}setCursorResultTableFormatter(t){return this.Om=t,this.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}setMouseInteractions(t){return this.Hi=t,this.Hx.setMouseInteractions(t),this}getMouseInteractions(){return this.Hi}setHighlight(t){var i;return t=Si(t),this.Fx=t,null===(i=this.Dx)||void 0===i||i.regions.forEach((i=>{this.cs.us._s(i,t)})),this.L.emit("highlight",this,t),this}getHighlight(){return this.Fx}setAnimationHighlight(t){var i;return null===(i=this.Dx)||void 0===i||i.regions.forEach((i=>{this.cs.us.ws(i,t)})),this}getAnimationHighlight(){var t;return this.cs.us.Cs(null===(t=this.Dx)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.Ix=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Ix}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}offMapDataReady(t){return this.L.off(t,"mapDataReady")}offViewChange(t){return this.L.off(t,"viewChange")}async jx(t){const i=await((t,i)=>{let s;if(t===kl.World)s="countries_world.json";else if(t===kl.NorthAmerica)s="countries_northAmerica.json";else if(t===kl.SouthAmerica)s="countries_southAmerica.json";else if(t===kl.Africa)s="countries_africa.json";else if(t===kl.Europe)s="countries_europe.json";else if(t===kl.Asia)s="countries_asia.json";else if(t===kl.USA)s="states_usa.json";else if(t===kl.Canada)s="territoriesProvinces_canada.json";else{if(t!==kl.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw xt.alert(i),new Error(i)}s="territories_australia.json"}const e=`${i}/maps/${s}`;return xt.fetch(e).then((t=>t.json())).catch((t=>{wi(i,e,"Map Chart",{shouldCrash:!0})}))})(t,this.dA.Xs);this.Zx=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=Dl[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.Xx.Vr().Sl(i);if(t===kl.USA){const t=25.8,i=29.7;this.wx.push(this.Wx.Te(this.ft).setMouseInteractions(!1).ke(this.Cx).Ce(this.kx).Ie({x:-126,y:t}).tt({x:10,y:i-t}),this.Wx.Te(this.ft).setMouseInteractions(!1).ke(this.Cx).Ce(this.kx).Ie({x:-113,y:t}).tt({x:7,y:i-t}))}const e=this.cs.us.zr(this.Hx,{animationEnabled:this.ih});for(let s=0;s<i.regions.length;s+=1){const h=i.regions[s],r=Fl(t,h),n=[];for(const t of r)t.length<3||n.push(this.Hx.Vr().Sl(t));this.Px.set(h,n),e.Vr(h,(t=>{n.forEach((i=>i.ds(t)))}))}if(this.Yx.As([this.Hx]),this.Lx=s,this.Rx(t,this.ft,s),this.Dx=i,this.Qx){for(const t of this.Qx)this.invalidateRegionValues(t);this.Qx=void 0}this.cs.vs()}Rx(t,i,s){const e=Bl[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.K(n.min.x,n.max.x),i.y.K(n.min.y,n.max.y);const o=this.ft.x.ui(),a=this.ft.y.ui();this.L.emit("viewChange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}Vx(t,i){this.Kx={region:t,iRegion:i},this.cs.vs()}Nx(t,i){this.Kx&&t===this.Kx.region&&(this.Kx=void 0,this.cs.vs())}zx(t,i){const s=Array.from(this.Px.entries()).findIndex((([t,s])=>s.includes(i)));return{iRegion:s,region:null==t?void 0:t.regions[s]}}setAnimationsEnabled(t){return this.ih=!t,this}getAnimationsEnabled(){return this.ih}getMinimumSize(){}Qd(){return[this]}Fe(t){super.Fe(t),super.pp(),ra.kp(this.bp,this.Sp);const i=g(this.ft.x.hi(),this.ft.y.hi(),this.ft.x.ni(),this.ft.y.ni());this.Wx.tx(i);const s=this.cs.Nn()||this.Gx;if(this.Kx&&s){const t=this.Zx&&this.Zx[this.Kx.iRegion];let i=ct(s,this.engine.scale,this.ft);i={x:Tt(i.x,this.ft.x.getInnerStart(),this.ft.x.getInnerEnd()),y:Tt(i.y,this.ft.y.getInnerStart(),this.ft.y.getInnerEnd())};let e=i.x,h=i.y;const r=this.Kx.region.transform;this.Kx.region.outlier&&r&&(e=(e-r.translate.x-r.vertexBoundaries.min.x)/r.scale.x+r.vertexBoundaries.min.x,h=(h-r.translate.y-r.vertexBoundaries.min.y)/r.scale.y+r.vertexBoundaries.min.y),this.Ux.setPosition(i).setVisible(!0).getResultTable().setContent(this.Om(new Aa,this.Kx.region,t,e,h,this).Qu())}else this.Ux.setVisible(!1);return this.Ux.Ds().Fe(),this}dispose(){return this.Wx.U(),this.Ux.dispose(),ia(this.ft),super.dispose()}Z(){return super.Z(),this.ft.Z(),this}J(){return super.J(),this.ft.J(),this}Wd(){return li(this.getFillStyle())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.onMouseEnter((()=>{this.setHighlight(!0)})),t.onMouseLeave((()=>{this.setHighlight(!1)})),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),ai(t,this.ts,s,{fill:this.getFillStyle()}),this}}const Rl=(t,i,s,e,h,r)=>(t.addRow(`${i.name}`).addRow(El(e,h)),void 0!==s&&t.addRow(`Region value: ${s.toFixed(1)}`),t),El=(t,i)=>{const s=t>0,e=i>0;return`${[ci(Math.abs(0|t),2),"° ",ci(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[ci(Math.abs(0|i),2),"° ",ci(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`};class zl extends Qe{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.qx(s),e,h,{numeric:i.tb({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.tb({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.tb({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.ib=r,this.sb=n,this.eb=o,this.hs=a,this.hb=s,this.rb=i.tb({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.Rh=o.Dr(s).setMouseInteractions(!1).Nh(i.tb({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).ke(i.tb({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.Uh=this.hs.yg([this.Rh]).Ss(e.effectsText)}setTickStrategy(t,i){return super.Ih(t,i)}setStrokeStyle(t){return this.rb="function"==typeof t?t(this.rb):t,this.sb.vs(),this}getStrokeStyle(){return this.rb}cr(t,i){return new Vl(i,t,this.hb,this.eb,this.nb(this.ib,this.hb),this.eb.ze(this.hb).setMouseInteractions(!1))}dr(t,i){const s=this.ob(this.hb,t);this.ab&&!1===this.ab(t)?t.Ye.setVisible(!1):t.Ye.setVisible(!0).Ie(rs(this.lb(this.hb,t.S),s.padding)).za(s.alignment).Gh(s.rotation).Pa(s.offset.x,s.offset.y),this.ub(this.hb,t.cb,t.fb,t)}setMouseInteractions(t){return this}Fe(){this.tr({physicalAxisSize:0});const t=this.pr(((t,i)=>{const s=i.xh.ur,e=.5*this.rb.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.Ye.Ds().Zc().y)+s.labelPadding;return Math.max(t,e)}),0);return this.Ab(this.hb,this.rb,t),this.gb(this.hb,this.Rh,t),t}}class Vl extends Je{constructor(t,i,s,e,h,r,n){super(t,i,e,s,n),this.cb=h,this.fb=r,h.setMouseInteractions(!1),this.ss.push(h,r)}}class Ol extends zl{constructor(t,i,s,e,h,r,n,o,a){super(t,Nl((()=>this.wg())),i,s,e,h,r,n,o),this.Ey=this.sb.ze(this.hb).setMouseInteractions(!1),this.pb=a,this.setScrollStrategy(ze.expansion),this.setTickStrategy(Ve.Numeric),this.setTitle("Amplitude")}wg(){return this.pb()}wr(t,i){return uo(t,i,this.hb.y)}kr(t,i,s){const e=2*(i-t),h=this.hb.x.Ri(e);return{min:t-s*h,max:i+s*h}}lb(t,i){return{x:t.mb()?i-t.yb().start:t.yb().start-i,y:0}}nb(t,i){return t.Kc(i)}ub(t,i,s,e){const h=e.xh.ur,r=t.mb()?e.S-t.yb().start:t.yb().start-e.S;kt(e.S,t.yb().start)||kt(e.S,t.yb().end)?i.setVisible(!1):i.setVisible(!0).hu(0).Ve(360).lu(void 0).au(0).ru(r).lu(60).ke(z).Ce(h.gridStrokeStyle);const n=.5*this.rb.getThickness();s.Oe({x:r,y:-n*t.Ui().y}).Ve({x:r,y:-(n+h.tickLength)*t.Ui().y}).Ee(h.tickStyle)}ob(t,i){const s=i.xh.ur;return{alignment:{x:0,y:1},padding:{x:0,y:t.Ui().y*-(.5*this.rb.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}Ab(t,i,s){const e=t.mb()?t.yb().end-t.yb().start:t.yb().start-t.yb().end;this.Ey.Oe({x:0,y:0}).Ve({x:e,y:0}).Ee(i)}gb(t,i,s){const e=t.mb()?(t.yb().start+t.yb().end)/2-t.yb().start:t.yb().start-(t.yb().start+t.yb().end)/2;i.za({x:0,y:1}).Ie({x:e,y:-s*t.Ui().y})}}const Nl=t=>({...il(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),qx:t=>({getInnerStart:()=>t.yb().start,getInnerEnd:()=>t.yb().end,K:(i,s)=>t.Sb(i,s),ot:(i,s,e,h,r)=>t.y.ot(i,s,e,h,r)}),tb:t=>t.amplitude});class Gl extends zl{constructor(t,i,s,e,h,r,n,o){super(t,Ul,i,s,e,h,r,n,o),this.vb=90,this.xb=12,this.bb=Wl,this.Ey=this.sb.Kc(this.hb).setMouseInteractions(!1),this.ab=t=>{let i=180*(t.S-this.hb.Mb())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;if(i>=0&&i<=20||i>=340&&i<=360)return!1},this.Ke=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.vb)}setTickStyle(t){return this._b="function"==typeof t?t(this._b):t,this.wb(),this.sb.vs(),this}getTickStyle(){return this._b}setTickFormattingFunction(t){return this.bb=t,this.wb(),this.sb.vs(),this}getTickFormattingFunction(){return this.bb}setClockwise(t){this.hb.Cb(t);const i=this.vb*Math.PI/180;return t?this.hb.kb(i+Math.PI/2):this.hb.kb(i-Math.PI/2),this.sb.vs(),this}getClockwise(){return!this.hb.Tb()}setNorth(t){for(;t<0;)t+=360;t%=360,this.vb=t;const i=t*Math.PI/180;return this.getClockwise()?this.hb.kb(i+Math.PI/2):this.hb.kb(i-Math.PI/2),this.sb.vs(),this}getNorth(){return 180*this.hb.Mb()/Math.PI}setDivision(t){return this.xb=t,this.wb(),this.sb.vs(),this}getDivision(){return this.xb}wg(){return[]}wr(t,i){return i}kr(t,i,s){return{min:t,max:i}}lb(t,i){const s=t.Tb()?1:-1,e=t.Mb(),h=t.mb()?t.yb().end-t.yb().start:t.yb().start-t.yb().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}nb(t,i){return t.ze(i)}ub(t,i,s,e){const h=this._b,r=t.Tb()?1:-1,n=t.Mb(),o=(e.S-n)*r,a=Math.cos(o),l=Math.sin(o),u=t.mb()?t.yb().end-t.yb().start:t.yb().start-t.yb().end,c={x:a*u,y:l*u};i.Oe({x:0,y:0}).Ve(c);const d={x:c.x+a*h.tickLength*t.Ui().x,y:c.y+l*h.tickLength*t.Ui().y};s.Oe(c).Ve(d),i.Ee(h.gridStrokeStyle),s.Ee(h.tickStyle)}ob(t,i){const s=this._b,e=t.Tb()?1:-1,h=t.Mb();let r,n=(i.S-h)*e;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const o=s.tickLength+s.tickPadding,a=Math.cos(n)*o*t.Ui().x,l=Math.sin(n)*o*t.Ui().y;return{alignment:{x:0,y:0},padding:{x:a,y:l},rotation:180*r/Math.PI,offset:{x:a,y:l}}}Ab(t,i,s){const e=t.mb()?t.yb().end-t.yb().start:t.yb().start-t.yb().end;this.Ey.hu(0).Ve(360).au(0).ru(e+.5*i.getThickness()*t.Ui().x).lu(360).ke(z).Ce(i)}gb(t,i,s){const e=t.Mb(),h=this.ob(t,{S:0+e}),r=t.mb()?t.yb().end-t.yb().start:t.yb().start-t.yb().end;i.za(h.alignment).Gh(h.rotation).Pa(h.offset.x,h.offset.y).Ie(rs({x:r,y:0},h.padding))}wb(){this.Xh({$e:[],Xe:[{Ye:"Radial ticks",Eg:0,ur:this._b,ar:this.bb,Lr:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.xb;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},bh:{Ar:()=>{},Mh:()=>!1},Rr:void 0}],We:Wl,jh:void 0,Zh:void 0})}}const Wl=(t,i,s)=>(180*t/Math.PI).toFixed(0),Ul={Sr:()=>{},vr:()=>{},Mr:()=>{},qx:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,K:(t,i)=>{},ot:(i,s,e,h,r)=>t.x.ot(i,s,e,h,r)}),tb:t=>t.radial},Yl=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),Hl=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class $l extends Ws{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Ms="Sector",this.Fb=0,this.Ib=1*Math.PI/2,this.Pb=void 0,this.Db=void 0,this.Ts=t,this.hb=e,this._m=this.Ts.Kc(this.hb).ds(this.getHighlight()),this.fs(this._m),this.be=h.polarSectorFillStyle,this.Me=h.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.Fb=Tt(t,0,360),this.Ts.vs(),this}getAngleStart(){return this.Fb}setAngleEnd(t){return this.Ib=Tt(t,0,360),this.Ts.vs(),this}getAngleEnd(){return this.Ib}setAmplitudeStart(t){return this.Pb=t,this.Ts.vs(),this}getAmplitudeStart(){return this.Pb}setAmplitudeEnd(t){return this.Db=t,this.Ts.vs(),this}getAmplitudeEnd(){return this.Db}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Ts.vs(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.Me="function"==typeof t?t(this.Me):t,this.Ts.vs(),this}getStrokeStyle(){return this.Me}Fe(){const t=this.hb.yb(),i=180*this.hb.Mb()/Math.PI,s=void 0!==this.Pb?Tt(this.Pb,t.start,t.end):t.start,e=void 0!==this.Db?Tt(this.Db,t.start,t.end):t.end,h=this.hb.mb()?s-t.start:t.start-s,r=this.hb.mb()?e-t.start:t.start-e,n=Math.min(h,r),o=Math.max(h,r),a=this.hb.Tb()?1:-1,l=Math.abs(this.Ib-this.Fb);this._m.hu((this.Fb-i)*a).Ve((this.Ib-i)*a).au(100*n/o).ru(o).ke(this.be).Ce(this.Me).lu(Math.ceil(l/2))}Pe(t,i){t.ds(i),this.Ts.vs()}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{fill:this.be,stroke:this.Me}),this}}class Xl extends Ws{constructor(){super(...arguments),this.iS=!0,this.Bb=!0}setAutoScrollingEnabled(t){return this.iS=t,this.Ki.cs.vs(),this}getAutoScrollingEnabled(){return this.iS}aS(){}Fe(){}Ay(){}setCursorEnabled(t){return this.Bb=t,this}getCursorEnabled(){return this.Bb}}class jl extends Xl{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Ts=t,this.Ki=i,this.scale=e}getAmplitudeMin(){return this.Lb?this.Lb.min:void 0}getAmplitudeMax(){return this.Lb?this.Lb.max:void 0}}const Zl=(t,i,s,e,h)=>{const r=i.getIcon();return r?t.addRow(r,i.getName()):t.addRow(i.getName()),t.addRow("Angle:","",Math.round(s).toString()).addRow("Amplitude","",h(e))},Ql=(t,i)=>{const s=[],e=i.yb().start,h=i.yb().end,r=i.mb(),n=i.Tb()?1:-1,o=i.Mb(),a=Math.abs(h-e),l=Math.min(e,h)+.001*a,u=Math.max(e,h)-.001*a;for(const i of t){const t=Tt(i.amplitude,l,u),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),c=Math.sin(h*n)*(r?t-e:e-t),d=i.color;s.push({x:a,y:c,color:d})}return s},Jl=t=>{const i={min:Di,max:Bi};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},Kl=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),ql=(t,i)=>{let s=gs(t);for(i.Tb()||(s*=-1),s+=180*i.Mb()/Math.PI;s<0;)s+=360;s%=360;const e=es(t),h=i.yb(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:Vr(h.start,h.end,e/r)}};class tu extends jl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.Ms="Heatmap Series",this.Rb=!0,this.fS=!1,this.Om=iu,this.Wd=()=>li(this.be);const o=this.Ki.getSeries().length;this.be=di(this.ts.polarHeatmapSeriesFillStyle||this.ts.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,u={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.Yn=u,this.Eb=t.zb(e,[],u).ke(this.be).ds(this.getHighlight()),this.fs(this.Eb);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),d=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.Lb={min:c,max:d},this.setHighlightOnHover(!1)}invalidateIntensityValues(t){if(this.fS&&this.Ki.cs.Gn(fo.xf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.Yn.dataOrder?t[0].length:t.length,annuli:"annuli"===this.Yn.dataOrder?t.length:t[0].length},s="annuli"===this.Yn.dataOrder?this.Yn.annuli:this.Yn.sectors,e="annuli"===this.Yn.dataOrder?this.Yn.sectors:this.Yn.annuli;if(i.x>s||i.y>e){if(!0===this.Ki.dA.$n){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;xt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);if(0===(t=h).length||0===t[0].length)return this}this.Eb.wv({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.Yn.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.Yn.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.Yn.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,h="annuli"===this.Yn.dataOrder?t.iSector:t.iAnnulus,r=h+i.secondary-1,n="annuli"===this.Yn.dataOrder?this.Yn.annuli-1:this.Yn.sectors-1,o="annuli"===this.Yn.dataOrder?this.Yn.sectors-1:this.Yn.annuli-1;if(s<0||h<0){if(!0===this.Ki.dA.$n){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;xt.console.warn(i)}return this}if(e>n||r>o){if(!0===this.Ki.dA.$n){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${h}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;xt.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,u=Math.max(r-o,0),c=[];for(let i=0;i<l;i+=1)c[i]=t.values[i].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.Eb.wv({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Ts.vs(),this.fS=!0,this}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Eb.ke(this.be),this.Ts.vs(),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}clear(){return this.Eb.Gt(),this.Ts.vs(),this}setCursorInterpolationEnabled(t){return this.Rb=t,this.Ts.cs.vs(),this}getCursorInterpolationEnabled(){return this.Rb}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.Eb.Mv(t),this.Ts.vs(),this}getIntensityInterpolation(){return this.Eb._v()}qy(){return this.iS&&this.getVisible()}Pe(t,i){t.ds(i),this.Ts.vs()}$c(t,i){const s=ct(t,this.Ki.engine.scale,this.scale),e=ql(s,this.scale),h=this.Rb?this.Eb.Vb(e):this.Eb.$c(e);if(h)return Ia(Ql([h],this.scale)[0],this.scale,this.Om(new Aa,this,{angleDeg:h.angle,amplitude:h.amplitude,intensity:h.cellValue,iAnnulus:h.iAnnulus,iSector:h.iSector},this.Ki.getAmplitudeAxis().formatValue).Qu(),this,this.be)}solveNearestFromScreen(t){return this.$c(ao(t,this.Ki.cs),!1)}Fe(){}attach(t,i=!0,s=!1){return super.attach(t,i),ai(t,this.ts,s,{fill:this.be}),this}}const iu=(t,i,s,e)=>{const h=i.getIcon();return h?t.addRow(h,i.getName()):t.addRow(i.getName()),t.addRow("Angle:","",Math.round(s.angleDeg).toString()).addRow("Amplitude","",e(s.amplitude)).addRow("Intensity","",s.intensity.toFixed(1))};class su extends jl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Ms="Line Series",this.Ob=[],this.Nb=!1,this.Gb=!1,this.Om=Zl,this.uu=di(this.ts.polarLineSeriesStrokeStyle,r),this.Wb=t.sy(e,void 0,[Ua.UserSeries]).Ee(this.uu).ds(this.getHighlight()).qa(Dh.Nearest),this.fs(this.Wb)}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}setData(t){return 0!==this.Ob.length&&this.Ki.cs.Gn(fo.xf),this.Ob=Kl(t),this.Nb=!0,this.Lb=Jl(this.Ob),this.Ts.vs(),this}setStrokeStyle(t){this.uu="function"==typeof t?t(this.uu):t;const i=this.uu;return this.Wb.Ee(i),this.Ts.vs(),this}getStrokeStyle(){return this.uu}setConnectDataAutomaticallyEnabled(t){return this.Gb=t,this.Ts.vs(),this}getConnectDataAutomaticallyEnabled(){return this.Gb}qy(){return this.iS&&this.Ob.length>0&&this.getVisible()}Pe(t,i){t.ds(i),this.Ts.vs()}$c(t,i){return this.Ub(t,this.Wb)}solveNearestFromScreen(t){return this.Ub(ao(t,this.Ki.cs),this.Wb)}Ub(t,i){const s=i.Yb(t);if(!s)return;const{angle:e,amplitude:h}=ql(s,this.scale);return Ia(s,this.scale,this.Om(new Aa,this,e,h,this.Ki.getAmplitudeAxis().formatValue).Qu(),this,this.uu.getFillStyle())}Fe(){if(this.Nb||this.scale.Hb()){const t=Ql(this.Ob,this.scale),i=ji(t);this.Gb?(t.push({...t[0]}),this.Wb.Vl(!0)):this.Wb.Vl(!1),this.Wb.Gt().ol(t).Ho(i),this.Nb=!1,this.Wb.Ds()}}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{stroke:this.uu}),this}}class eu extends jl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Ms="Point Line Series",this.Ob=[],this.Nb=!1,this.Gb=!1,this.$b=3,this.ga=0,this.Xb=exports.PointShape.Circle,this.Om=Zl,this.be=di(this.ts.polarPointLineSeriesFillStyle,r),this.uu=di(this.ts.polarPointLineSeriesStrokeStyle,r),this.Wb=t.sy(e,void 0,[Ua.UserSeries]).Ee(this.uu).ds(this.getHighlight()).qa(Dh.Nearest),this.fs(this.Wb),this.jb=t.bS(e).ke(this.be).sl(this.Xb).tt(this.$b).ds(this.getHighlight()).qa(Dh.Nearest),this.fs(this.jb)}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}setData(t){return 0!==this.Ob.length&&this.Ki.cs.Gn(fo.xf),this.Ob=Kl(t),this.Nb=!0,this.Lb=Jl(this.Ob),this.Ts.vs(),this}setStrokeStyle(t){this.uu="function"==typeof t?t(this.uu):t;const i=this.uu;return this.Wb.Ee(i),this.Ts.vs(),this}getStrokeStyle(){return this.uu}setPointFillStyle(t){this.be="function"==typeof t?t(this.be):t;const i=this.be;return this.jb.ke(i),this.Ts.vs(),this}getPointFillStyle(){return this.be}setPointSize(t){return this.$b=t,this.jb.tt(t),this.Ts.vs(),this}getPointSize(){return this.$b}setPointShape(t){return this.Xb=t,this.jb.sl(this.Xb),this}getPointShape(){return this.Xb}setPointRotation(t){return this.ga=t,this.jb.Gh(t),this.Ts.vs(),this}getPointRotation(){return this.ga}setConnectDataAutomaticallyEnabled(t){return this.Gb=t,this.Ts.vs(),this}getConnectDataAutomaticallyEnabled(){return this.Gb}qy(){return this.iS&&this.Ob.length>0&&this.getVisible()}Pe(t,i){t.ds(i),this.Ts.vs()}$c(t,i){return this.Ub(t,this.Wb)}solveNearestFromScreen(t){return this.Ub(ao(t,this.Ki.cs),this.Wb)}Ub(t,i){const s=i instanceof tr?i.$c(t):i.Yb(t);if(!s)return;const{angle:e,amplitude:h}=ql(s,this.scale);return Ia(s,this.scale,this.Om(new Aa,this,e,h,this.Ki.getAmplitudeAxis().formatValue).Qu(),this,"color"in s&&Y(this.be)?new G({color:s.color}):this.be)}Fe(){if(this.Nb||this.scale.Hb()){const t=Ql(this.Ob,this.scale),i=ji(t);this.Gb?(t.push({...t[0]}),this.Wb.Vl(!0)):this.Wb.Vl(!1),this.Wb.Gt().ol(t).Ho(i),this.jb.Gt().ol(t).Ho(i),this.Nb=!1,this.Wb.Ds(),this.jb.Ds()}}ks(){return this.bs||this.Xb}}class hu extends mr{constructor(t,s,e,h,r,n,o,a,l){super(),this.Go=Fi(),this.L=new i.Eventer,this.Xi=!1,this.Zb=h,this.Qb=r,this.Jb=n,this.Kb=o,this.qb=a,this.Ts=t,this.scale=s,this.tM=e,this.ts=l}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}dispose(){return this.tM&&this.tM(this),this.Ts.cs.vs(),this.L.emit("dispose",this),this.Xi=!0,this}setVisible(t){return super.setVisible(t),this.Jb(),this.Ts.cs.vs(),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setMouseInteractions(t){return this.Kb(this,t),this}getMouseInteractions(){return this.qb(this)}}class ru extends hu{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f,g,p,m){super(t,i,s,e,h,r,n,o,m),this.iM=1,this.sM=1,this.Ts=t,this.scale=i,this.dimensionStrategy=a,this.start=l,this.end=u,this.lowerExtreme=c,this.lowerQuartile=d,this.median=f,this.upperQuartile=g,this.upperExtreme=p,this.boundaries=A(this.dimensionStrategy.toPoint(l,c),this.dimensionStrategy.toPoint(u,p)),this.eM=this.ts.boxSeriesBodyFillStyle,this.hM=this.ts.boxSeriesBodyStrokeStyle,this.uu=this.ts.boxSeriesStrokeStyle,this.rM=this.ts.boxSeriesMedianStrokeStyle,this.Ds()}getBoundaries(){return this.boundaries}setBodyWidth(t){return this.iM=t,this.Ds(),this}getBodyWidth(){return this.iM}setBodyFillStyle(t){return this.eM="function"==typeof t?t(this.eM):t,this.Qb(),this}getBodyFillStyle(){return this.eM}setBodyStrokeStyle(t){return this.hM="function"==typeof t?t(this.hM):t,this.Qb(),this}getBodyStrokeStyle(){return this.hM}setTailWidth(t){return this.sM=t,this.Ds(),this}getTailWidth(){return this.sM}setStrokeStyle(t){return this.uu="function"==typeof t?t(this.uu):t,this.Qb(),this}getStrokeStyle(){return this.uu}setMedianStrokeStyle(t){return this.rM="function"==typeof t?t(this.rM):t,this.Qb(),this}getMedianStrokeStyle(){return this.rM}Ds(){this.Zb()}getDominantStyle(){return this.getBodyFillStyle()}}const nu=(t,i,s)=>{const e=i.ft,h=s.ft;let r=(t.x-e.getInnerStart())/(e.getInnerEnd()-e.getInnerStart()),n=(t.y-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart());return 1===s.hg&&(r=1-r),1===i.hg&&(n=1-n),l(n,r)};class ou extends ya{constructor(t,i,s,e,h,r,n,o){super(t,i,Es(s.ft,e.ft),h,o),this.nM=!1,this.oM=!1,this.aM=!0,this.lM=!0,this.uM=!1,this.cM=!1,this.setGridStrokeYStyle=t=>(this.dM.setGridStrokeStyle(t),this),this.getGridStrokeYStyle=()=>this.dM.getGridStrokeStyle(),this.axisX=s,this.axisY=e,this.fM=r,this.AM=n,this.gM=this.axisX.Hg(!1,this.fM).setMouseInteractions(!1).setAllocatesAxisSpace(!1),this.dM=this.axisY.Hg(!1,this.AM).setMouseInteractions(!1).setAllocatesAxisSpace(!1)}dispose(){return super.dispose(),this.gM.dispose(),this.dM.dispose(),this}pointAt(t){return super.pointAt(t),this.setPosition(ct(t.location,t.scale,this.scale)),this}setPosition(t){super.setPosition(t),this.gM.setValue(t.x),this.dM.setValue(t.y);const i=nu(l(this.gM.getValue(),this.dM.getValue()),this.axisX,this.axisY);return this.gM.setGridStrokeLength(this.uM?i.x:1),this.dM.setGridStrokeLength(this.cM?i.y:1),this}Fe(){this.gM.setVisible(this.ji&&this.Jg).setMarkerVisible(this.ji&&this.Jg&&this.nM),this.dM.setVisible(this.ji&&this.Jg).setMarkerVisible(this.ji&&this.Jg&&this.oM);const t=nu(l(this.gM.getValue(),this.dM.getValue()),this.axisX,this.axisY);return this.gM.setGridStrokeLength(this.uM?t.x:1),this.dM.setGridStrokeLength(this.cM?t.y:1),super.Fe()}setGridStrokeXCut(t){return this.uM=t,this.Ts.vs(),this}getGridStrokeXCut(){return this.uM}setGridStrokeYCut(t){return this.cM=t,this.Ts.vs(),this}getGridStrokeYCut(){return this.cM}setGridStrokeXStyle(t){return this.gM.setGridStrokeStyle(t),this}getGridStrokeXStyle(){return this.gM.getGridStrokeStyle()}setTickMarkerXVisible(t){return this.nM=t,this.Ts.vs(),this}getTickMarkerXVisible(){return this.nM}setTickMarkerYVisible(t){return this.oM=t,this.Ts.vs(),this}getTickMarkerYVisible(){return this.oM}setTickMarkerX(t){return this.gM.setMarker(t),this}setTickMarkerY(t){return this.dM.setMarker(t),this}getTickMarkerX(){return this.gM.getMarker()}getTickMarkerY(){return this.dM.getMarker()}}class au extends ma{constructor(t,i,s,e,h,r,n){super(t,i,s,e,n),this.uM=!1,this.cM=!1,this.pM=!1,this.mM=!1,this.yM=new Map,this.SM=new Map,this.nM=!0,this.oM=!0,this.tm=e,this.fM=h,this.AM=r,this.vM=n.cursorGridStrokeStyleX,this.xM=n.cursorGridStrokeStyleY}dispose(){return super.dispose(),this.yM.forEach((t=>t.dispose())),this.SM.forEach((t=>t.dispose())),this.bM=void 0,this.MM=void 0,this}Fe(){return this.bM&&this.bM.setVisible(this.ji&&this.Jg).setMarkerVisible(this.ji&&this.Jg&&this.nM),this.MM&&this.MM.setVisible(this.ji&&this.Jg).setMarkerVisible(this.ji&&this.Jg&&this.oM),super.Fe()}pointAt(t){const{location:i}=t,s=t.owner instanceof xu&&t.owner;if(!s)return this;const{axisX:e}=s,{axisY:h}=s,r=this.gh(e,!0),n=this.gh(h,!1);r!==this.bM&&this.bM&&this.bM.setVisible(!1),n!==this.MM&&this.MM&&this.MM.setVisible(!1),r.setValue(i.x),n.setValue(i.y);const o=nu(l(i.x,i.y),e,h);return r.setGridStrokeLength(this.uM?o.x:1),n.setGridStrokeLength(this.cM?o.y:1),this.bM=r,this.MM=n,super.pointAt(t)}rm(t){if(super.rm(t),t){const i=i=>i.setTextFillStyle(t);this.bM&&this.pM&&this.bM.setMarker(i),this.MM&&this.mM&&this.MM.setMarker(i)}}gh(t,i){let s=(i?this.yM:this.SM).get(t);return s||(i?(s=t.Hg(!1,this.fM),this.yM.set(t,s)):(s=t.Hg(!1,this.AM),this.SM.set(t,s)),this.lr(s,i),s.setMouseInteractions(!1).setAllocatesAxisSpace(!1)),s}lr(t,i){const s=i?this.vM:this.xM;return t.setGridStrokeStyle(s),t.setMouseInteractions(!1),(i?this.nM:this.oM)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.uM=t,this.Ts.vs(),this}getGridStrokeXCut(){return this.uM}setGridStrokeYCut(t){return this.cM=t,this.Ts.vs(),this}getGridStrokeYCut(){return this.cM}setGridStrokeXStyle(t){return this.vM=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.yM.forEach((t=>t.setGridStrokeStyle(this.vM))),this}getGridStrokeXStyle(){return this.vM}setGridStrokeYStyle(t){return this.xM=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.SM.forEach((t=>t.setGridStrokeStyle(this.xM))),this}getGridStrokeYStyle(){return this.xM}setTickMarkerXVisible(t){return this.nM=t,this.Ts.vs(),this}getTickMarkerXVisible(){return this.nM}setTickMarkerYVisible(t){return this.oM=t,this.Ts.vs(),this}getTickMarkerYVisible(){return this.oM}setTickMarkerX(t){return this.yM.forEach((i=>i.setMarker(t))),this.fM=this.fM.addStyler(t),this.Ts.vs(),this}setTickMarkerY(t){return this.SM.forEach((i=>i.setMarker(t))),this.AM=this.AM.addStyler(t),this.Ts.vs(),this}setTickMarkerXAutoTextStyle(t){return this.pM=t,this.Ts.vs(),this}getTickMarkerXAutoTextStyle(){return this.pM}setTickMarkerYAutoTextStyle(t){return this.mM=t,this.Ts.vs(),this}getTickMarkerYAutoTextStyle(){return this.mM}}class lu extends Sa{constructor(t,i,s,e){super(t,e),this.tm=t,this.fM=i,this.AM=s,this.nm=e}}class uu extends lu{constructor(){super(...arguments),this.am=(t,i,s,e)=>this.om(new au(t,i,s,this.tm,this.fM,this.AM,e),e),this.addStyler=t=>new uu(this.tm,this.fM,this.AM,this.nm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new uu(t,this.fM,this.AM,this.nm.map((t=>t)))}}class cu extends lu{constructor(){super(...arguments),this.lm=(t,i,s,e,h)=>this.om(new ou(t,i,s,e,this.tm,this.fM,this.AM,h),h),this.addStyler=t=>new cu(this.tm,this.fM,this.AM,this.nm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new cu(t,this.fM,this.AM,this.nm.map((t=>t)))}}const du=new uu(Sn,no.PointableTextBox,no.PointableTextBox,[(t,i)=>{ba(t),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Mr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Mr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),fu=new cu(Sn,no.PointableTextBox,no.PointableTextBox,[(t,i)=>{Ma(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Mr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Mr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),Au=new cu(Sn,no.PointableTextBox,no.PointableTextBox,[(t,i)=>{((t,i)=>{t.setPointMarker((t=>t.setFillStyle(i.seriesMarkerPointMarkerFillStyle).setSize(i.seriesMarkerPointMarkerSize).setShape(i.seriesMarkerPointMarkerShape))).setResultTable((t=>t.setEffect(!0).setBackground((t=>t)).setOrigin(l(-1,-1)).setMargin(10)))})(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Mr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Mr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),gu=(t,i,s)=>{switch(t){case exports.UIVisibilityModes.always:return!0;case exports.UIVisibilityModes.never:return!1;case exports.UIVisibilityModes.whenDragged:return s;case exports.UIVisibilityModes.whenHovered:return i&&!s;case exports.UIVisibilityModes.whenHoveredOrDragged:return s||i;case exports.UIVisibilityModes.whenNotDragged:return!s;default:return!1}},pu=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class mu{constructor(t,s,e,h,r,n){this._M=exports.UIVisibilityModes.always,this.wM=exports.UIVisibilityModes.always,this.Lo=!0,this.Xi=!1,this.CM=!1,this.kM=!1,this.ca=l(0,0),this._u=exports.UIDraggingModes.draggable,this.wu=void 0,this.L=new i.Eventer,this.ji=!0,this.TM=(t,i,s)=>{this.CM=!0,this.Ts.vs();const e=this._u===exports.UIDraggingModes.notDraggable?this._u:s||this._u;this.wu=this.Ts.cs.Ur(e===exports.UIDraggingModes.notDraggable?exports.MouseStyles.Restricted:e===exports.UIDraggingModes.draggable?exports.MouseStyles.Move:e===exports.UIDraggingModes.onlyHorizontal?exports.MouseStyles.Horizontal:exports.MouseStyles.Vertical)},this.FM=()=>{this.CM=!1,this.Ts.vs(),this.Ts.cs.Yr(this.wu)},this.IM=(t,i)=>{this.kM=!0,jt(i),this.Ts.vs()},this.PM=(t,i)=>{if(this._u!==exports.UIDraggingModes.notDraggable){const s=i||this._u,e=ct(this.Ts.cs.De(t.x,t.y),this.Ts.cs.ft,this.scale),h=l(s!==exports.UIDraggingModes.onlyVertical?pu(e.x,this.scale.x):this.ca.x,s!==exports.UIDraggingModes.onlyHorizontal?pu(e.y,this.scale.y):this.ca.y);return this.setPosition(h),!0}return!1},this.DM=(t,i)=>{this.kM=!1,jt(i),this.Ts.vs()},this.onDispose=t=>this.L.on("dispose",t),this.offDispose=t=>this.L.off(t,"dispose"),this.Ts=t,this.renderingScale=s,this.scale=e,this.Ux=h,this.BM=r,this.ts=n;const o=h.getPointMarker().setMouseInteractions(!0);o.onMouseEnter(((t,i)=>this.TM(t,i))),o.onMouseLeave(this.FM),o.onMouseDragStart(this.IM),o.onMouseDrag(((t,i)=>this.PM(l(i.clientX,i.clientY))&&jt(i))),o.onMouseDragStop(this.DM),o.onTouchStart(this.IM),o.onTouchMove(((t,i)=>this.PM(l(i.clientX,i.clientY))&&jt(i))),o.onTouchEnd(this.DM),h.getResultTable().setMouseInteractions(!0),this.setPosition(this.ca)}setPosition(t){return this.ca=t,this.Ux.setPosition(t),this.L.emit("positionChange",this,this.ca),this}getPosition(){return this.ca}onPositionChange(t){return this.L.on("positionChange",t)}offPositionChange(t){return this.L.off(t,"positionChange")}setPointMarkerVisibility(t){return this._M=t,this.Ts.vs(),this}getPointMarkerVisibility(){return this._M}setResultTableVisibility(t){return this.wM=t,this.Ts.vs(),this}getResultTableVisibility(){return this.wM}setMouseInteractions(t){return this.Lo=t,this.Ux.getPointMarker().setMouseInteractions(t),this.Ux.getResultTable().setMouseInteractions(t),this}getMouseInteractions(){return this.Lo}setAutoFitStrategy(t){return this.Ux.setAutoFitStrategy(t),this}getAutoFitStrategy(){return this.Ux.getAutoFitStrategy()}isAttached(){return!0}Fe(){const t=this.isAttached();return gu(this._M,this.CM,this.kM)?this.Ux.setPointMarkerVisible(!0):this.Ux.setPointMarkerVisible(!1),t&&gu(this.wM,this.CM,this.kM)?this.Ux.setResultTableVisible(!0):this.Ux.setResultTableVisible(!1),this.Ux.Fe(),this}Ds(){return this.Ux.Ds(),this}pointAt(t){return this.Ux.pointAt(t),this}dispose(){return this.Xi||(this.Xi=!0,this.BM(this),this.Ux.dispose(),this.L.emit("dispose")),this}isDisposed(){return this.Xi}setVisible(t){const i=this.ji!==t;return this.ji=t,this.Ux.setVisible(t),i&&this.L.emit("visibleStateChanged",this,this.ji),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}setPointMarker(t){return this.Ux.setPointMarker(t),this}getPointMarker(){return this.Ux.getPointMarker()}setResultTable(t){return this.Ux.setResultTable(t),this}getResultTable(){return this.Ux.getResultTable()}setDraggingMode(t=exports.UIDraggingModes.notDraggable){return this._u=t,this.Ts.vs(),this}getDraggingMode(){return this._u}}class yu extends mu{constructor(t,i,s,e,h,r,n){super(t,i,Es(s.ft,e.ft),h.lm(t,i,s,e,n),r,n),this.LM=exports.UIVisibilityModes.always,this.RM=exports.UIVisibilityModes.always,this.EM=exports.UIVisibilityModes.always,this.zM=exports.UIVisibilityModes.always,this.gridStrokeStyleX=this.Ux.getGridStrokeXStyle(),this.gridStrokeStyleY=this.Ux.getGridStrokeYStyle(),this.Ts=t,this.axisX=s,this.axisY=e,this.BM=r;const o=this.Ux.getTickMarkerX().setMouseInteractions(!0);o.onMouseEnter(((t,i)=>this.TM(t,i,exports.UIDraggingModes.onlyHorizontal))),o.onMouseLeave(this.FM),o.onMouseDragStart(this.IM),o.onMouseDrag(((t,i)=>this.PM(l(i.clientX,i.clientY),exports.UIDraggingModes.onlyHorizontal)&&jt(i))),o.onMouseDragStop(this.DM),o.onTouchStart(this.IM),o.onTouchMove(((t,i)=>this.PM(l(i.clientX,i.clientY),exports.UIDraggingModes.onlyHorizontal)&&jt(i)));const a=this.Ux.getTickMarkerY().setMouseInteractions(!0);a.onMouseEnter(((t,i)=>this.TM(t,i,exports.UIDraggingModes.onlyVertical))),a.onMouseLeave(this.FM),a.onMouseDragStart(this.IM),a.onMouseDrag(((t,i)=>this.PM(l(i.clientX,i.clientY),exports.UIDraggingModes.onlyVertical)&&jt(i))),a.onMouseDragStop(this.DM),a.onTouchStart(this.IM),a.onTouchMove(((t,i)=>this.PM(l(i.clientX,i.clientY),exports.UIDraggingModes.onlyVertical)&&jt(i)))}Fe(){const t=this.isAttached();return this.ji&&t&&gu(this.EM,this.CM,this.kM)?this.Ux.setTickMarkerXVisible(!0):this.Ux.setTickMarkerXVisible(!1),this.ji&&t&&gu(this.zM,this.CM,this.kM)?this.Ux.setTickMarkerYVisible(!0):this.Ux.setTickMarkerYVisible(!1),this.Ux.setGridStrokeXStyle(this.ji&&t&&gu(this.LM,this.CM,this.kM)?this.gridStrokeStyleX:rt),this.Ux.setGridStrokeYStyle(this.ji&&t&&gu(this.RM,this.CM,this.kM)?this.gridStrokeStyleY:rt),super.Fe()}setGridStrokeXVisibility(t){return this.LM=t,this.Ts.vs(),this}getGridStrokeXVisibility(){return this.LM}setGridStrokeYVisibility(t){return this.RM=t,this.Ts.vs(),this}getGridStrokeYVisibility(){return this.RM}setTickMarkerXVisibility(t){return this.EM=t,this.Ts.vs(),this}getTickMarkerXVisibility(){return this.EM}setTickMarkerYVisibility(t){return this.zM=t,this.Ts.vs(),this}getTickMarkerYVisibility(){return this.zM}setGridStrokeXCut(t){return this.Ux.setGridStrokeXCut(t),this}getGridStrokeXCut(){return this.Ux.getGridStrokeXCut()}setGridStrokeYCut(t){return this.Ux.setGridStrokeYCut(t),this}getGridStrokeYCut(){return this.Ux.getGridStrokeYCut()}setGridStrokeXStyle(t){return this.gridStrokeStyleX="function"==typeof t?t(this.gridStrokeStyleX):t,this}getGridStrokeXStyle(){return this.Ux.getGridStrokeXStyle()}setGridStrokeYStyle(t){return this.gridStrokeStyleY="function"==typeof t?t(this.gridStrokeStyleY):t,this}getGridStrokeYStyle(){return this.Ux.getGridStrokeYStyle()}setTickMarkerX(t){return this.Ux.setTickMarkerX(t),this}getTickMarkerX(){return this.Ux.getTickMarkerX()}setTickMarkerY(t){return this.Ux.setTickMarkerY(t),this}getTickMarkerY(){return this.Ux.getTickMarkerY()}setMouseInteractions(t){return super.setMouseInteractions(t),this.Ux.getTickMarkerX().setMouseInteractions(t),this.Ux.getTickMarkerY().setMouseInteractions(t),this}}class Su extends yu{}class vu extends Su{constructor(t,i,s,e,h,r){super(t,i,s.axisX,s.axisY,e,h,r),this.VM=!1,this.Ts=t,this.owningSeries=s}setPosition(t){return super.setPosition(t),this.VM=!1,this.Ts.vs(),this}Ds(){if(!this.VM){const t=this.owningSeries.solveNearestFromScreen(ct(this.ca,this.scale,this.Ts.cs.ft));t?(this.ca=ct(t.location,this.owningSeries.scale,this.scale),this.Ux.pointAt(t),this.VM=!0):this.Ux.setPosition(this.ca)}return super.Ds()}isAttached(){return this.VM}}class xu extends Xl{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,a,l),this.OM=[],this.addMarker=(t=Au)=>{const i=new vu(this.NM(),this.Ki.uiScale,this,t,this.removeMarker,this.ts);return this.OM.push(i),i},this.removeMarker=t=>{const i=this.OM.indexOf(t);-1!==i&&this.OM.splice(i,1)},this.ss=new Map,this.chart=t,this.Ts=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.NM=o,this.scale=Es(e.ft,h.ft),this.GM=t.WM,t.WM+=1,this.UM(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.YM),this.onMouseLeave(this.chart.HM),this.onMouseWheel(this.chart.eS),this.onMouseDragStart(this.chart.$M),this.onMouseDrag(this.chart.hS),this.onMouseDragStop(this.chart.XM),this.onTouchStart(this.chart.rS.onTouchStart),this.onTouchMove(this.chart.rS.onTouchMove),this.onTouchEnd(this.chart.rS.onTouchEnd)}get xAxis(){return this.axisX}get yAxis(){return this.axisY}attacheAxis(){this.jM=this.axisXAttachHandler(this),this.ZM=this.axisYAttachHandler(this)}Fe(){super.Fe();for(let t=0;t<this.OM.length;t+=1)this.OM[t].Ds().Fe()}fs(t,i){super.fs(t,i),t.Ko(this.GM)}setDrawOrder(t){return this.GM=t.seriesDrawOrderIndex,this.ss.forEach(((t,i)=>{i.Ko(this.GM)})),this.Ki.cs.vs(),this}dispose(){return super.dispose(),this.OM.slice().forEach((t=>t.dispose())),this.jM(this),this.ZM(this),this}QM(){for(let t=0;t<this.OM.length;t+=1)this.OM[t].setPosition(this.OM[t].getPosition());this.Ts.vs()}getBoundaries(){return A(l(this.getXMin()||0,this.getYMin()||0),l(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const bu=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}},Mu=(t,i=(t=>t))=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.il()),n=e.tl(),o=n?i(n):[];let a=!1,l=!1;"zl"in e&&(a=e.zl(),l=e.Ol()),s.push.apply(s,r.slice(a?1:0,r.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(l?1:0)))}return s},_u=(t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:e+i*s,y:t[s]};return h},wu=(t,i,s,e)=>{const h=i.getIcon();return h?t.addRow(h,i.getName()):t.addRow(i.getName()),t.addRow("X","",i.axisX.formatValue(s)).addRow("Y","",i.axisY.formatValue(e))};class Cu extends xu{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,l,u),this.JM=[],this.yu=[],this.KM=0,this.Zi=!1,this.$i=exports.HighlightModes.onHover,this.Om=wu,this.Ki.cs.Gn(fo.mf),this.qM=a}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.KM=void 0!==i&&i>0?i:0,this.Ts.vs(),this}add(t){if(0!==this.JM.length&&this.Ki.cs.Gn(fo.xf),Array.isArray(t)?this.t_(t):this.t_([t]),this.yu.length>0){const t=this.yu[this.yu.length-1];this.i_={x:t.x,y:t.y}}return this}addArrayX(t,i=1,s){let e=s;return e||(e=this.i_?this.i_.y+i:0),this.add(((t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:t[s],y:e+i*s};return h})(t,i,e)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.i_?this.i_.x+i:0),this.add(_u(t,i,e)),this}addArraysXY(t,i){if(t.length!==i.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,i)=>{const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]={x:t[e],y:i[e]};return s})(t,i)),this}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}getPointAmount(){return this.JM.reduce(((t,i)=>t+i.al()+i.ll()),this.yu.length)}clear(){this.s_=void 0;for(let t=0;t<this.JM.length;t+=1)this.JM[t].Gt();return this.yu.length=0,this.i_=void 0,this.Ts.vs(),this.L.emit("dataClear",this),this}getLastPoint(){return this.i_}qy(){return this.iS&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.qM.getXMax(this.JM,this.s_)||0}getXMin(){return this.qM.getXMin(this.JM,this.s_)||0}getYMax(){return this.qM.getYMax(this.JM,this.s_)||0}getYMin(){return this.qM.getYMin(this.JM,this.s_)||0}Mr(){const t=l(0,0);for(const i of this.JM)t.x=Math.max(t.x,i.xl()),t.y=Math.max(t.y,i.bl());return t}e_(t,i,s,e){this.qM.e_(t,i,s,e,this.scale,(t=>{}))}aS(){super.aS();const t=this.JM.length;this.h_&&this.e_(this.JM,this.getPointAmount(),this.h_,this.KM),t!==this.JM.length&&this.QM()}Fe(){super.Fe();const t=this.getBoundaries();this.yu.length>0&&(this.r_(this.yu),this.yu=[]);for(const i of this.JM)i.Ho(t);return super.Fe()}Ay(){super.Ay(),this.s_=void 0,this.yu.length=0}t_(t){0!==t.length&&(this.s_?this.s_=Qi(this.s_,ji(t)):this.s_=ji(t),this.L.emit("dataAdd",this,t,this.s_),this.yu=hi(this.yu,t,{canReturnB:!1}),this.Ts.vs())}n_(){return Mu(this.JM)}o_(t){return this.L.on("dataAdd",t)}a_(t){return this.L.off(t)}l_(t){return this.L.on("dataClear",t)}u_(t){return this.L.off(t)}}const ku=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===h||i<n)&&(h=l,r=a,n=i)}}return h&&r?[h,r]:void 0};class Tu extends xu{constructor(){super(...arguments),this.c_=[],this.d_=void 0,this.f_=!1,this.tM=t=>{const i=this.c_.findIndex((i=>i===t));i>=0&&this.c_.splice(i,1),this.f_=!0,this.d_=void 0,this.Ts.vs()},this.Zb=()=>{this.d_=void 0,this.f_=!0,this.Ki.cs.vs()},this.Qb=()=>{this.f_=!0,this.Ki.cs.vs()},this.Jb=()=>{this.d_=void 0,this.f_=!0,this.chart.cs.vs()},this.Kb=(t,i)=>{this.setMouseInteractions(i)},this.A_=t=>this.getMouseInteractions()}Fe(){super.Fe(),this.f_&&(this.g_(this.c_),this.f_=!1)}clear(){return this.c_.slice().forEach(wt),this.c_.length=0,this.f_=!0,this.d_=void 0,this.Ts.vs(),this}p_(t,i){void 0!==i?this.c_.splice(i,0,t):this.c_.push(t),this.f_=!0,this.m_&&this.m_(t),t.onMouseEnter(((t,i)=>this.Ct(t,i))),t.onMouseLeave(((t,i)=>this.kt(t,i))),t.onMouseClick(((t,i)=>this.Tt(t,i))),t.onMouseDoubleClick(((t,i)=>this.Ft(t,i))),t.onMouseDown(((t,i)=>this.It(t,i))),t.onMouseUp(((t,i)=>this.Pt(t,i))),t.onMouseMove(((t,i)=>this.Dt(t,i))),t.onMouseDragStart(((t,i,s)=>this.Lt(t,i,s))),t.onMouseDrag(((t,i,s,e,h)=>this.Bt(t,i,s,e,h))),t.onMouseDragStop(((t,i,s,e)=>this.Rt(t,i,s,e))),t.onMouseWheel(((t,i)=>this.Et(t,i))),t.onTouchStart(((t,i)=>this.zt(t,i))),t.onTouchMove(((t,i)=>this.Vt(t,i))),t.onTouchEnd(((t,i)=>this.Ot(t,i))),this.Ts.vs()}qy(){return this.iS&&this.c_.length>0&&this.getVisible()}setDefaultStyle(t){this.m_=t,this.c_.forEach(t),t(this.y_);for(let t=0;t<this.Ji.length;t+=1)this.S_(this.Ji[t]);return this.f_=!0,this.Ki.cs.vs(),this}$c(t,i){const s=ku(t,i?this.c_.filter((t=>t.getVisible()&&t.getIsUnderMouse())):this.c_.filter((t=>t.getVisible())),this.v_,Yi);if(void 0!==s)return{location:ct(s[0],this.Ts.cs.ft,this.scale),scale:this.scale,resultTableContent:this.Om(new Aa,this,s[1]).Qu(),owner:this,fillStyle:s[1].getDominantStyle(),figure:s[1]}}solveNearestFromScreen(t){return this.$c(ao(t,this.Ki.cs),!1)}getXMax(){return this.d_||(this.d_=this.x_()),this.d_.max.x}getXMin(){return this.d_||(this.d_=this.x_()),this.d_.min.x}getYMax(){return this.d_||(this.d_=this.x_()),this.d_.max.y}getYMin(){return this.d_||(this.d_=this.x_()),this.d_.min.y}Mr(){return l(0,0)}x_(){const t=A(u(Di,Di),u(Bi,Bi));for(let i=0;i<this.c_.length;i+=1)if(this.c_[i].getVisible()){const s=this.c_[i].getBoundaries();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}attach(t,i=!0,s=!1){return super.attach(t,i),this.S_(t,i,s),this}S_(t,i=!0,s=!1){ai(t,this.ts,s,{fill:this.c_.length>0?this.c_[0].getDominantStyle():this.y_.getDominantStyle()})}}const Fu=(t,i,s)=>t.addRow(i.getName()).addRow("Lower extreme","",s.lowerExtreme.toFixed(2)).addRow("Lower quartile","",s.lowerQuartile.toFixed(2)).addRow("Median","",s.median.toFixed(2)).addRow("Upper quartile","",s.upperQuartile.toFixed(2)).addRow("Upper extreme","",s.upperExtreme.toFixed(2));class Iu extends Tu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.Ms="Box Series",this.Om=Fu,this.b_=ki(),this.v_=t=>ct(this.Fs.toPoint((t.start+t.end)/2,t.median),this.scale,this.Ts.cs.ft),this.Ki.cs.Gn(fo.Sf),this.Fs=a,this.y_=new ru(this.Ts,this.scale,this.tM,Ct,Ct,Ct,Ct,(t=>!1),this.Fs,0,0,0,0,0,0,0,this.ts).dispose(),this.M_=new Za((()=>{const t=this.Ts.Rg(this.scale);return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ee(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Vr();return s.zg(i.start,i.end),s}))))),this.__=new Za((()=>{const t=this.b_.wt(this.Ts.$x(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.ke(s.fillStyle).Ce(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Vr();return s.Sl(i.vertices),this.b_.Nt(s,i.figure),s})))),(()=>{this.b_.Gt()}),((t,i)=>{this.ps(i)}))}UM(t){if(!(t instanceof Ls||t instanceof Rs))throw new Error("BoxSeries only supports Linear Axes")}g_(t){const i=this.__.gy(),s=this.M_.gy();t.forEach((t=>{if(!t.getVisible())return;const e=this.Fs.toPoint((t.start+t.end-t.iM*(t.end-t.start))/2,t.lowerQuartile),h=this.Fs.toPoint((t.end-t.start)*t.iM,t.upperQuartile-t.lowerQuartile),r=this.Fs.toPoint((t.start+t.end)/2,t.lowerQuartile),n=this.Fs.toPoint((t.start+t.end)/2,t.lowerExtreme),o=this.Fs.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.Fs.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Fs.toPoint((t.start+t.end-t.sM*(t.end-t.start))/2,t.lowerExtreme),u=this.Fs.toPoint((t.start+t.end+t.sM*(t.end-t.start))/2,t.lowerExtreme),c=this.Fs.toPoint((t.start+t.end-t.sM*(t.end-t.start))/2,t.upperExtreme),d=this.Fs.toPoint((t.start+t.end+t.sM*(t.end-t.start))/2,t.upperExtreme),f=this.Fs.toPoint((t.start+t.end-t.iM*(t.end-t.start))/2,t.median),A=this.Fs.toPoint((t.start+t.end+t.iM*(t.end-t.start))/2,t.median);i.add({Go:t.Go,vertices:[{x:e.x,y:e.y},{x:e.x,y:e.y+h.y},{x:e.x+h.x,y:e.y+h.y},{x:e.x+h.x,y:e.y}],figure:t},{fillStyle:t.eM,strokeStyle:t.hM}),s.add({Go:0,start:r,end:n,figure:t},{strokeStyle:t.uu}),s.add({Go:0,start:o,end:a,figure:t},{strokeStyle:t.uu}),s.add({Go:0,start:l,end:u,figure:t},{strokeStyle:t.uu}),s.add({Go:0,start:c,end:d,figure:t},{strokeStyle:t.uu}),s.add({Go:0,start:f,end:A,figure:t},{strokeStyle:t.rM})})),i.finishPlot(),s.finishPlot()}add(t){const i=new ru(this.Ts,this.scale,this.tM,this.Zb,this.Qb,this.Jb,this.Kb,this.A_,this.Fs,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.ts);return this.p_(i),this.f_=!0,this.Ki.cs.vs(),i}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}}class Pu extends hu{constructor(t,i,s,e,h,r,n,o,a,u){super(t,i,s,e,h,r,n,o,a),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.Ha=A(l(0,0),l(0,0)),this.Ts=t,this.scale=i,this.be=di(a.ellipseSeriesFillStyle,u),this.Me=di(a.ellipseSeriesStrokeStyle,u)}getBoundaries(){return this.Ha}setDimensions(t){return this.dimensions=t,this.Ha=A(l(t.x-t.radiusX,t.y-t.radiusY),l(t.x+t.radiusX,t.y+t.radiusY)),this.Zb(),this.Ts.vs(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Qb(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.Me="function"==typeof t?t(this.Me):t,this.Qb(),this}getStrokeStyle(){return this.Me}getDominantStyle(){return this.be}}class Du extends Tu{constructor(t,i,s,e,h,r,n,o,a,u,c){super(t,i,s,e,h,r,n,o,a,u),this.Ms="Ellipse Series",this.Om=(t,i,s)=>t.addRow(i.Ms).addRow("X","",i.axisX.formatValue(s.getDimensions().x)).addRow("Y","",i.axisY.formatValue(s.getDimensions().y)).addRow("Radius X","",i.axisX.formatValue(s.getDimensions().radiusX)).addRow("Radius Y","",i.axisY.formatValue(s.getDimensions().radiusY)),this.b_=ki(),this.v_=t=>{const i=t.getDimensions(),s=l(i.x,i.y);return ct(s,this.scale,this.Ts.cs.ft)},this.Ki.cs.Gn(fo.Sf),this.w_=c,this.y_=new Pu(this.Ts,this.scale,Ct,Ct,Ct,Ct,Ct,(t=>!1),this.ts,this.w_).dispose(),this.__=new Za((()=>{const t=this.b_.wt(this.Ts.$x(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.ke(s.fillStyle).Ce(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Vr();return s.Sl(i.vertices),this.b_.Nt(s,i.figure),s})))),(()=>{this.b_.Gt()}),((t,i)=>{this.ps(i)}))}UM(t){if(!(t instanceof Ls||t instanceof Rs))throw new Error("EllipseSeries only supports Linear Axes")}g_(t){const i=this.__.gy();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=[],h=void 0!==s.drawSteps?s.drawSteps:72;for(let t=0;t<=h;t+=1){const i=t/h*2*Math.PI,r=s.x+s.radiusX*Math.cos(i),n=s.y+s.radiusY*Math.sin(i);e.push({x:r,y:n})}const r=t.getFillStyle(),n=t.getStrokeStyle();i.add({Go:t.Go,vertices:e,figure:t},{fillStyle:r,strokeStyle:n})})),i.finishPlot()}add(t){const i=new Pu(this.Ts,this.scale,this.tM,this.Zb,this.Qb,this.Jb,this.Kb,this.A_,this.ts,this.w_).setDimensions(t);return this.p_(i),this.f_=!0,this.Ki.cs.vs(),i}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}}class Bu extends hu{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a),this.C_=[],this.Ha=Li,this.Ts=t,this.scale=i,this.be=di(a.polygonSeriesFillStyle,l),this.Me=di(a.polygonSeriesStrokeStyle,l)}getBoundaries(){return this.Ha}setDimensions(t){return this.C_=t,this.Ha=ji(this.C_),this.Zb(),this.Ts.vs(),this}getDimensions(){return this.C_}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Qb(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.Me="function"==typeof t?t(this.Me):t,this.Qb(),this}getStrokeStyle(){return this.Me}getDominantStyle(){return this.be}}class Lu extends Tu{constructor(t,i,s,e,h,r,n,o,a,u,c){super(t,i,s,e,h,r,n,o,a,u),this.Ms="Polygon Series",this.Om=(t,i,s)=>t.addRow(i.getName()),this.b_=ki(),this.v_=t=>{const i=t.getBoundaries(),s=l((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return ct(s,this.scale,this.Ts.cs.ft)},this.Ki.cs.Gn(fo.Sf),this.w_=c,this.y_=new Bu(this.Ts,this.scale,Ct,Ct,Ct,Ct,Ct,(t=>!1),this.ts,this.w_).dispose(),this.__=new Za((()=>{const t=this.b_.wt(this.Ts.$x(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.ke(s.fillStyle).Ce(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Vr();return s.Sl(i.vertices),this.b_.Nt(s,i.figure),s})))),(()=>{this.b_.Gt()}),((t,i)=>{this.ps(i)}))}UM(t){}g_(t){const i=this.__.gy();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({Go:t.Go,vertices:s,figure:t},{fillStyle:e,strokeStyle:h})})),i.finishPlot()}add(t){const i=new Bu(this.Ts,this.scale,this.tM,this.Zb,this.Qb,this.Jb,this.Kb,this.A_,this.ts,this.w_).setDimensions(t);return this.p_(i),this.f_=!0,this.Ki.cs.vs(),i}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}}class Ru extends hu{constructor(t,i,s,e,h,r,n,o,a,u){super(t,i,s,e,h,r,n,o,a),this.k_={x:0,y:0,width:0,height:0},this.T_={x1:0,y1:0,x2:0,y2:0},this.Ha=A(l(0,0),l(0,0)),this.be=di(a.rectangleSeriesFillStyle,u),this.Ts=t,this.scale=i,this.Me=di(a.rectangleSeriesStrokeStyle,u)}getBoundaries(){return this.Ha}setDimensions(t){return"x"in t?(this.k_=t,this.T_={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.T_=t,this.k_={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.Ha=ji([this.k_,l(this.k_.x+this.k_.width,this.k_.y+this.k_.height)]),this.Zb(),this.Ts.vs(),this}getDimensionsPositionAndSize(){return this.k_}getDimensionsTwoPoints(){return this.T_}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Qb(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.Me="function"==typeof t?t(this.Me):t,this.Qb(),this}getStrokeStyle(){return this.Me}getDominantStyle(){return this.be}}class Eu extends Tu{constructor(t,i,s,e,h,r,n,o,a,u,c){super(t,i,s,e,h,r,n,o,a,u),this.Ms="Rectangle Series",this.Om=(t,i,s)=>{const e=s.getDimensionsPositionAndSize();return t.addRow(i.Ms).addRow("X","",i.axisX.formatValue(e.x)).addRow("Y","",i.axisX.formatValue(e.y)).addRow("Width","",i.axisX.formatValue(e.width)).addRow("Height","",i.axisX.formatValue(e.height))},this.b_=ki(),this.v_=t=>{const i=t.getDimensionsPositionAndSize(),s=l(i.x+i.width/2,i.y+i.height/2);return ct(s,this.scale,this.Ts.cs.ft)},this.Ki.cs.Gn(fo.Sf),this.w_=c,this.y_=new Ru(this.Ts,this.scale,Ct,Ct,Ct,Ct,Ct,(t=>!1),this.ts,this.w_).dispose(),this.__=new Za((()=>{const t=this.b_.wt(this.Ts.$x(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.ke(s.fillStyle).Ce(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Vr();return s.Sl(i.vertices),this.b_.Nt(s,i.figure),s})))),(()=>{this.b_.Gt()}),((t,i)=>{this.ps(i)}))}UM(t){}g_(t){const i=this.__.gy();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensionsTwoPoints(),e=[{x:s.x1,y:s.y1},{x:s.x1,y:s.y2},{x:s.x2,y:s.y2},{x:s.x2,y:s.y1}],h=t.getFillStyle(),r=t.getStrokeStyle();i.add({Go:t.Go,vertices:e,figure:t},{fillStyle:h,strokeStyle:r})})),i.finishPlot()}add(t){const i=new Ru(this.Ts,this.scale,this.tM,this.Zb,this.Qb,this.Jb,this.Kb,this.A_,this.ts,this.w_).setDimensions(t);return this.p_(i),this.f_=!0,this.Ki.cs.vs(),i}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}}class zu extends hu{constructor(t,i,s,e,h,r,n,o,a,u){super(t,i,s,e,h,r,n,o,a),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.Ha=A(l(0,0),l(0,0)),this.ts=a,this.Ts=t,this.scale=i,this.Me=di(a.segmentSeriesStrokeStyle,u)}getBoundaries(){return this.Ha}setDimensions(t){return this.dimensions=t,this.Ha=A(l(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),l(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.Zb(),this.Ts.vs(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.Me="function"==typeof t?t(this.Me):t,this.Qb(),this}getStrokeStyle(){return this.Me}getDominantStyle(){const t=this.Me;return t!==rt?t.getFillStyle():z}}class Vu extends Tu{constructor(t,i,s,e,h,r,n,o,a,u,c){super(t,i,s,e,h,r,n,o,a,u),this.Ms="Segment Series",this.Om=(t,i,s)=>t.addRow(i.Ms).addRow("Start",i.axisX.formatValue(s.getDimensions().startX),",",i.axisY.formatValue(s.getDimensions().startY)).addRow("End",i.axisX.formatValue(s.getDimensions().endX),",",i.axisY.formatValue(s.getDimensions().endY)),this.F_=ki(),this.v_=t=>{const i=t.getDimensions(),s=l((i.startX+i.endX)/2,(i.startY+i.endY)/2);return ct(s,this.scale,this.Ts.cs.ft)},this.Ki.cs.Gn(fo.Sf),this.w_=c,this.y_=new zu(this.Ts,this.scale,Ct,Ct,Ct,Ct,Ct,(t=>!1),this.ts,this.w_).dispose(),this.M_=new Za((()=>{const t=this.F_.wt(this.Ts.Rg(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ee(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Vr();return s.zg(i.start,i.end),this.F_.Nt(s,i.figure),s})))),(()=>{this.F_.Gt()}),((t,i)=>{this.ps(i)}))}UM(t){}g_(t){const i=this.M_.gy();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e={x:s.startX,y:s.startY},h={x:s.endX,y:s.endY},r=t.getStrokeStyle();i.add({Go:t.Go,start:e,end:h,figure:t},{strokeStyle:r})})),i.finishPlot()}add(t){const i=new zu(this.Ts,this.scale,this.tM,this.Zb,this.Qb,this.Jb,this.Kb,this.A_,this.ts,this.w_).setDimensions(t);return this.p_(i),this.f_=!0,this.Ki.cs.vs(),i}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}}const Ou=(t,i,s)=>{const e=i.getIcon();return e?t.addRow(e,i.getName()):t.addRow(i.getName()),t.addRow("X:","",i.axisX.formatValue(s.x)).addRow("Y:","",i.axisY.formatValue(s.y)).addRow("Intensity:","",s.intensity.toFixed(1))};class Nu extends xu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.Ms="Heatmap Grid Series",this.Om=Ou,this.Rb=!1,this.gv={},this.Ki.cs.Gn(fo.yf),this.I_=a,this.ts=l;const d=c;this.be=di(l.heatmapGridSeriesFillStyle,d),this.pv=di(this.ts.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows};this.Yn=f,this.P_=this.Ts.D_(this.scale,[],f).ke(this.be).mv(this.pv).ds(this.getHighlight()),this.fs(this.P_),a.start&&this.setStart(a.start),a.end&&this.setEnd(a.end),a.step&&this.setStep(a.step),this.setHighlightOnHover(!1)}Sv(){const t=this.gv.start||{x:0,y:0};let i;i=this.gv.end?{x:(this.gv.end.x-t.x)/this.Yn.columns,y:(this.gv.end.y-t.y)/this.Yn.rows}:this.gv.step?this.gv.step:{x:1,y:1},this.P_.vv(t,i),this.Ki.cs.vs()}setStart(t){return this.gv.start=t,this.Sv(),this}getStart(){return this.P_.xv().start}setStep(t){return this.gv.step=t,this.Sv(),this}getStep(){return this.P_.xv().step}setEnd(t){return this.gv.end=t,this.Sv(),this}getEnd(){return this.P_.xv().end}clear(){return this.P_.Gt(),this.Ts.vs(),this.L.emit("dataClear",this),this}setWireframeStyle(t){return this.pv="function"==typeof t?t(this.pv):t,this.P_.mv(this.pv),this.Ts.vs(),this.L.emit("styleChange",this),this}getWireframeStyle(){return this.pv}setCursorInterpolationEnabled(t){return this.Rb=t,this.Ts.cs.vs(),this}getCursorInterpolationEnabled(){return this.Rb}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.P_.Mv(t),this.Ts.vs(),this.L.emit("styleChange",this),this}getIntensityInterpolation(){return this.P_._v()}qy(){return this.iS&&this.getVisible()}Wd(){return li(this.be)}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{fill:this.be}),this}B_(t){this.P_.B_().forEach((i=>{t.P_.wv(i)}))}u_(t){return this.L.off(t)}l_(t){return this.L.on("dataClear",t)}L_(t){return this.L.on("styleChange",t)}R_(t){return this.L.off(t)}$c(t,i,s=this.Rb){const e=ct(t,this.Ts.cs.ft,this.scale),h=i?this.P_.getIsUnderMouse()?this.P_:void 0:this.P_;if(!h)return;const r=s?h.Vb(e):h.$c(e);if(r){const t={x:r.x,y:r.y,column:r.column,row:r.column,intensity:r.cellValue};return{location:t,scale:this.scale,resultTableContent:this.Om(new Aa,this,t).Qu(),owner:this}}}solveNearestFromScreen(t,i=this.Rb){return this.$c(ao(t,this.Ki.cs),!1,i)}getXMax(){const t=this.P_;return t?t.bt():void 0}getXMin(){const t=this.P_;return t?t.xt():void 0}getYMax(){const t=this.P_;return t?t._t():void 0}getYMin(){const t=this.P_;return t?t.Mt():void 0}Mr(){const t=l(0,0);return t.x=Math.max(t.x,this.P_.xl()),t.y=Math.max(t.y,this.P_.bl()),t}UM(t){if(!(t instanceof Ls))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Ls&&t.wi())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}Pe(t,i){t.ds(i),this.Ts.vs()}Fe(){return super.Fe(),this.P_.Ho(this.getBoundaries()),this}}class Gu extends Nu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.fS=!1,this.Om=Ou}invalidateIntensityValues(t){if(this.fS&&this.Ki.cs.Gn(fo.xf),Array.isArray(t)){if(0===t.length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Yn.dataOrder?t.length:t[0].length,rows:"rows"===this.Yn.dataOrder?t.length:t[0].length},s="columns"===this.Yn.dataOrder?this.Yn.columns:this.Yn.rows,e="columns"===this.Yn.dataOrder?this.Yn.rows:this.Yn.columns;if(i.x>s||i.y>e){if(!0===this.chart.dA.$n){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Yn.columns}x${this.Yn.rows}, input ${i.columns}x${i.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;xt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.P_.wv({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Yn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Yn.dataOrder?t.values.length:t.values[0].length},s="columns"===this.Yn.dataOrder?t.iColumn:t.iRow,e=s+i.primary-1,h="columns"===this.Yn.dataOrder?t.iRow:t.iColumn,r=h+i.secondary-1,n=("columns"===this.Yn.dataOrder?this.Yn.columns:this.Yn.rows)-1,o=("columns"===this.Yn.dataOrder?this.Yn.rows:this.Yn.columns)-1;if(s<0||h<0){if(!0===this.chart.dA.$n){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;xt.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.dA.$n){const s=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Yn.columns}x${this.Yn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;xt.console.warn(s)}const s=Math.max(e-n,0),h=i.primary-s,a=Math.max(r-o,0),l=[];for(let i=0;i<h;i+=1)l[i]=t.values[i].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.P_.wv({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.L.emit("invalidateIntensity",this,t),this.Ts.vs(),this.fS=!0,this}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.P_.ke(this.be),this.L.emit("styleChange",this),this.Ts.vs(),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}E_(t){return this.L.on("invalidateIntensity",t)}z_(t){return this.L.off(t)}}class Wu extends xu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.Ms="Scrolling Heatmap Grid Series",this.Om=Ou,this.Rb=!1,this.gv={},this.Ki.cs.Gn(fo.yf),this.Ki.cs.Gn(fo.xf);const d=c;this.be=di(l.heatmapScrollingGridSeriesFillStyle,d),this.pv=di(this.ts.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.Yn=f,this.V_=this.Ts.O_(this.scale,[],f).ke(this.be).mv(this.pv).ds(this.getHighlight()),this.fs(this.V_),a.start&&this.setStart(a.start),a.step&&this.setStep(a.step),this.setHighlightOnHover(!1)}Sv(){const t=this.gv.start||{x:0,y:0};let i;i=this.gv.step?this.gv.step:{x:1,y:1},this.V_.vv(t,i),this.Ki.cs.vs()}setStart(t){return this.gv.start=t,this.Sv(),this}getStart(){return this.V_.xv().start}setStep(t){return this.gv.step=t,this.Sv(),this}getStep(){return this.V_.xv().step}clear(){return this.V_.Gt(),this.Ts.vs(),this}setWireframeStyle(t){return this.pv="function"==typeof t?t(this.pv):t,this.V_.mv(this.pv),this.Ts.vs(),this}getWireframeStyle(){return this.pv}setPixelInterpolationMode(t){return t=t||"disabled",this.V_.Mv(t),this.Ts.vs(),this}getPixelInterpolationMode(){return this.V_._v()}setCursorInterpolationEnabled(t){return this.Rb=t,this.Ts.cs.vs(),this}getCursorInterpolationEnabled(){return this.Rb}setCursorEnabled(t){return super.setCursorEnabled(t)}setDataCleaning(t){return this.V_.vu(t),this.Ts.vs(),this}qy(){return this.iS&&this.getVisible()}Wd(){return li(this.be)}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{fill:this.be}),this}ke(t){return this.be="function"==typeof t?t(this.be):t,this.V_.ke(this.be),this.Ts.vs(),this}$c(t,i,s=this.Rb){const e=ct(t,this.Ts.cs.ft,this.scale),h=i?this.V_.getIsUnderMouse()?this.V_:void 0:this.V_;if(!h)return;const r=s?h.Vb(e):h.$c(e);return r?Ia(r,this.scale,this.Om(new Aa,this,{x:r.x,y:r.y,column:r.column,row:r.column,intensity:r.cellValue}).Qu(),this):void 0}solveNearestFromScreen(t,i=this.Rb){return this.$c(ao(t,this.Ki.cs),!1,i)}UM(t){if(!(t instanceof Ls))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Ls&&t.wi())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.V_.bt()||0}getXMin(){return this.V_.xt()||0}getYMax(){return this.V_._t()||0}getYMin(){return this.V_.Mt()||0}Mr(){const t=l(0,0);return t.x=Math.max(t.x,this.V_.xl()),t.y=Math.max(t.y,this.V_.bl()),t}Pe(t,i){t.ds(i),this.Ts.vs()}}class Uu extends Wu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.Om=Ou}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.Yn.scrollDimension?t.length:t[0].length,"rows"===this.Yn.scrollDimension?t.length:t[0].length,0+s-1),h=this.Yn.resolution-1;if(e>h){if(!0===this.chart.dA.$n){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.Yn.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;xt.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.V_.Iv(t),this.Ts.vs(),this}invalidateIntensityValues(t){return this.V_.wv(t.iSample,t.values),this.Ts.vs(),this}getSampleCount(){return this.V_.N_()}setFillStyle(t){return this.ke(t),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}}class Yu extends xu{constructor(){super(...arguments),this.JM=[],this.yu=[],this.G_=[],this.W_=[],this.h_=1e3,this.KM=0,this.$i=exports.HighlightModes.onHover,this.wl={type:"disabled",packager:(t,i,s)=>t.slice()},this.Rb=!0,this.U_=[],this.Y_=[],this.H_=!1,this.Wd=()=>li(this.X_)||li(this.j_),this.Z_=t=>{const i=t.length;if(this.JM.length>0){const s=this.JM.length-1,e=this.JM[s];if(i>0){const[i,s]=e.il(),[h,r]=e.tl();if((h?i.length+h.length:i.length)>=this.h_){const n=h&&h.length>0?h[h.length-1]:i[i.length-1],o=r&&r.length>0?r[r.length-1]:s[i.length-1],a=(n.x+t[0].position)/2,u=cs(a,n,l(t[0].position,t[0].high)).y,d=cs(a,o,l(t[0].position,t[0].low)).y,f=c(a,u,d);e.ol(f,A(l(a,d),l(a,u))).Vl(!0),this.Q_([f].concat(t)).El(!0)}else e.ol(t)}}else i>0&&this.Q_(t)},this.J_=t=>{const i=this.U_,s=t.length;if(this.U_.length>0){if(s>0){const s=i[i.length-1],e=s.il(),h=s.tl();if(e.length+h.length>=this.h_){const r=h.length>0?h[h.length-1]:e[e.length-1],n=(r.x+t[0].x)/2,o=cs(n,r,l(t[0].x,t[0].y)).y,a=l(n,o);s.ol(a,A(l(n,o),l(n,o))).Vl(!0),i.push(this.K_([a].concat(t),this.s_).El(!0))}else s.ol(t)}}else s>0&&i.push(this.K_(t))},this.q_=t=>{const i=this.Y_,s=t.length;if(this.Y_.length>0){if(s>0){const s=i[i.length-1],e=s.il(),h=s.tl();if(e.length+h.length>=this.h_){const r=h.length>0?h[h.length-1]:e[e.length-1],n=(r.x+t[0].x)/2,o=cs(n,r,l(t[0].x,t[0].y)).y,a=l(n,o);s.ol(a,A(l(n,o),l(n,o))).Vl(!0),i.push(this.tw([a].concat(t)).El(!0))}else s.ol(t)}}else s>0&&i.push(this.tw(t))},this.iw=(t,i)=>{const s=t.Yb(i);if(s)return[ct(s[0],this.scale,this.Ts.cs.ft),ct(s[1],this.scale,this.Ts.cs.ft)]},this.sw=(t,i)=>{const s=t.ew(i);if(s)return[ct(s[0],this.scale,this.Ts.cs.ft),ct(s[1],this.scale,this.Ts.cs.ft)]}}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.KM=void 0!==i&&i>0?i:0,this.Ts.vs(),this}clear(){for(let t=0;t<this.JM.length;t+=1)this.JM[t].dispose();for(let t=0;t<this.U_.length;t+=1)this.U_[t].dispose();for(let t=0;t<this.Y_.length;t+=1)this.Y_[t].dispose();return this.yu.length=0,this.G_.length=0,this.W_.length=0,this.s_=void 0,this.JM.length=0,this.U_.length=0,this.Y_.length=0,this.Ts.vs(),this.L.emit("dataClear",this),this}getPointAmount(){return this.JM.reduce(((t,i)=>t+i.al()+i.ll()),this.yu.length)}setCursorInterpolationEnabled(t){return this.Rb=t,this.Ts.cs.vs(),this}getCursorInterpolationEnabled(){return this.Rb}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}setCursorEnabled(t){return super.setCursorEnabled(t)}getCursorResultTableFormatter(){return this.Om}getXMax(){return Ot(this.JM,Dt,Math.max,Et,this.s_)||0}getXMin(){return Ot(this.JM,Pt,Math.min,Rt,this.s_)||0}getYMax(){return Ot(this.JM,Lt,Math.max,Vt,this.s_)||0}getYMin(){return Ot(this.JM,Bt,Math.min,zt,this.s_)||0}Mr(){const t=l(0,0);for(const i of this.JM)t.x=Math.max(t.x,i.xl()),t.y=Math.max(t.y,i.bl());return t}qy(){return this.iS&&this.getPointAmount()>0&&this.getVisible()}UM(t){}t_(t,i,s){this.yu=hi(this.yu,t,{canReturnB:!1}),this.G_=hi(this.G_,i,{canReturnB:!1}),this.W_=hi(this.W_,s,{canReturnB:!1}),this.Ts.vs()}hw(t,i,s,e){this.rw(i,s,e),this.t_(Array.isArray(t)?t:[t],i,s)}rw(t,i,s){const e=Qi(ji(t),ji(i));this.s_?this.s_=Qi(this.s_,e):this.s_=e,s&&(this.s_=Qi(this.s_,s))}nw(){const t=this.JM.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.mi(this.JM[e].bt(),this.JM[e].xl())<i&&(s+=1);return s}e_(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}ow(t){const i=this.JM.length>0?this.JM[this.JM.length-1]:void 0,s=i?i.il()[0].length+(i.tl()[0]?i.tl()[0].length:0):void 0;bu(t,s,this.h_,this.Z_)}aw(t){const i=this.U_.length>0?this.U_[this.U_.length-1].il().length+this.U_[this.U_.length-1].tl().length:void 0;bu(t,i,this.h_,this.J_)}lw(t,i){const s=this.U_.length>0?this.U_[this.U_.length-1].il().length+this.U_[this.U_.length-1].tl().length:void 0;bu(t,s,this.h_,this.J_),bu(i,s,this.h_,this.q_)}Q_(t,i){const s=this.Ts.uw(this.scale).ol(t,i).ke(this.X_).Ll(this.j_).Dl(this.wl).ds(this.getHighlight());return this.JM.push(s),this.fs(s),s}cw(t,i,s){const e=this.Ts.sy(this.scale,void 0,[Ua.UserSeries]).ol(t,s).setMouseInteractions(!1).Ee(i).ds(this.getHighlight());return this.fs(e),e}K_(t,i){return this.cw(t,this.dw,i)}tw(t,i){return this.cw(t,this.fw,i)}Aw(t){this.X_="function"==typeof t?t(this.X_):t;const i=this.X_;for(let t=0;t<this.JM.length;t+=1)this.JM[t].ke(i);this.Ts.vs()}gw(t){this.j_="function"==typeof t?t(this.j_):t;const i=this.j_;for(let t=0;t<this.JM.length;t+=1)this.JM[t].Ll(i);this.Ts.vs()}pw(){return this.X_}Rl(){return this.j_}mw(t){this.dw="function"==typeof t?t(this.dw):t;const i=this.dw;for(let t=0;t<this.U_.length;t+=1)this.U_[t].Ee(i);this.Ts.vs()}yw(t){this.fw="function"==typeof t?t(this.fw):t;const i=this.fw;for(let t=0;t<this.Y_.length;t+=1)this.Y_[t].Ee(i);this.Ts.vs()}Sw(){return this.dw}xw(){return this.fw}Pe(t,i){t.ds(i),this.bw(i),this.Ts.vs()}bw(t){for(let i=0;i<this.U_.length;i+=1)this.U_[i].ds(t);for(let i=0;i<this.Y_.length;i+=1)this.Y_[i].ds(t)}aS(){if(super.aS(),this.H_=!1,this.KM>0){const t=this.JM.length,i=this.nw();this.e_(this.JM,this.h_,this.KM,i);const s=this.JM.length;this.U_.length>0&&this.e_(this.U_,this.h_,this.KM,i),this.Y_.length>0&&this.e_(this.Y_,this.h_,this.KM,i),t!==s&&this.QM(),this.H_=!0}}Fe(){if(super.Fe(),this.yu.length>0&&(this.ow(this.yu),this.Mw(this.G_,this.W_),this.H_=!0),this.H_){const t=this.getBoundaries();for(const i of this.JM)i.Ho(t);for(const i of this.U_)i.Ho(t);for(const i of this.Y_)i.Ho(t)}}Ay(){this.s_=void 0,this.yu.length=0,this.G_.length=0,this.W_.length=0}$c(t,i,s=this.Rb){const e=((t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=Yi(t,a[0]),s=Yi(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0})(t,i?this.JM.filter((t=>t.getIsUnderMouse())):this.JM,s?this.sw:this.iw);if(void 0!==e&&void 0!==e[0]){const t=ct(e[0][0],this.Ts.cs.ft,this.scale),i=ct(e[0][1],this.Ts.cs.ft,this.scale);return Ia(t,this.scale,this.Om(new Aa,this,t.x,t.y,i.y).Qu(),this,e[1].zh())}}solveNearestFromScreen(t,i=this.Rb){return this.$c(ao(t,this.Ki.cs),!1,i)}}const Hu=(t,i,s,e,h)=>{const r=i.getIcon();return r?t.addRow(r,i.getName()):t.addRow(i.getName()),t.addRow("Position","",i.axisX.formatValue(s)).addRow("Value","",i.axisY.formatValue(e)).addRow("Base","",i.axisY.formatValue(h))};class $u extends Yu{constructor(t,i,s,e,h,r,n,o,a=0,l,u){super(t,i,s,e,h,r,n,o,l,u),this.Ms="Area Series",this.Om=Hu,this.Ki.cs.Gn(fo.mf),this._w=a}add(t){0!==this.JM.length&&this.Ki.cs.Gn(fo.xf);const i=Array.isArray(t)?t:[t];if(i.length>0){const t=this.ww(i),[s,e]=this.Cw(t);this.hw(t,s,e,A(l(Di,this._w),l(Bi,this._w)));const h=this.yu[this.yu.length-1];this.i_=h?{position:h.position,high:h.high,low:h.low}:void 0,this.L.emit("dataAdd",this,i,this.s_)}return this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.i_?this.i_.position+i:0),this.add(_u(t,i,e)),this}o_(t){return this.L.on("dataAdd",t)}a_(t){return this.L.off(t)}l_(t){return this.L.on("dataClear",t)}u_(t){return this.L.off(t)}}class Xu extends $u{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.X_=di(this.ts.areaSeriesBipolarHighFillStyle,c),this.dw=di(this.ts.areaSeriesBipolarHighStrokeStyle,c),this.j_=di(this.ts.areaSeriesBipolarLowFillStyle,c),this.fw=di(this.ts.areaSeriesBipolarLowStrokeStyle,c)}ww(t){return this.kw(t)}Mw(t,i){return this.lw(t,i)}kw(t){let i=0;const s=[],e=t.length,h=this._w;return e>0&&(this.Tw&&(this.Tw.y<=h&&h<=t[0].y||this.Tw.y>=h&&h>=t[0].y)&&(s[i]=c(.5*(this.Tw.x+t[0].x),h,h),i+=1),this.Tw=t[e-1],1===e?this.Fw(t[0],s,i):this.Iw(t,s)),s}Fw(t,i,s=0){return i[s]=c(t.x,t.y,this._w),s+1}Iw(t,i){let s=0,e=0;const h=t.length-1,r=this._w;for(;e<h;){const h=t[e],n=t[e+=1],o=c(h.x,h.y,r);if(0!==s&&Nt(i[s-1],o)||(i[s]=o,s+=1),h.y<=r&&r<=n.y||h.y>=r&&r>=n.y){const t=h.y,e=n.y,o=r,a=t===e?n.x:Vr(h.x,n.x,(o-t)/(e-t));i[s]=c(a,r,r),s+=1}i[s]=c(n.x,n.y,r),s+=1}return s}Cw(t){const i=t.length,s=Array(i),e=Array(i),h=this._w;for(let r=0;r<i;r+=1){const i=t[r];i.high>h?(s[r]=l(i.position,i.high),e[r]=l(i.position,h)):i.high<h?(s[r]=l(i.position,h),e[r]=l(i.position,i.high)):(s[r]=l(i.position,i.high),e[r]=l(i.position,i.high))}return[s,e]}n_(){return Mu(this.JM,(t=>t[0]))}setPositiveFillStyle(t){return this.Aw(t),this}setNegativeFillStyle(t){return this.gw(t),this}setPositiveStrokeStyle(t){return this.mw(t),this}setNegativeStrokeStyle(t){return this.yw(t),this}getPositiveFillStyle(){return this.pw()}getNegativeFillStyle(){return this.Rl()}getPositiveStrokeStyle(){return this.Sw()}getNegativeStrokeStyle(){return this.xw()}attach(t,i=!0,s=!1){return ai(t,this.ts,s,{fill:this.X_,fill2:this.j_,behavior:{colorStep:!0}}),super.attach(t,i,s)}}class ju extends $u{constructor(){super(...arguments),this.fw=rt}Mw(t){return this.aw(t)}Cw(t){const i=t.length,s=Array(i);for(let e=0;e<i;e+=1){const i=t[e];s[e]=l(i.position,i.high)}return[s,[]]}setStrokeStyle(t){return this.mw(t),this}getStrokeStyle(){return this.Sw()}}class Zu extends ju{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.X_=z,this.j_=di(this.ts.areaSeriesNegativeFillStyle,c),this.dw=di(this.ts.areaSeriesNegativeStrokeStyle,c)}ww(t){return this.Pw(t)}Pw(t){const i=[];return 1===t.length?this.Fw(t[0],i):this.Iw(t,i),i}Fw(t,i,s=0){const e=this._w;return i[s]=t.y>e?c(t.x,e,e):c(t.x,t.y,e),s+1}Iw(t,i,s=0){let e=0;const h=t.length-1,r=this._w;for(;e<h;){const h=t[e],n=t[e+=1];if(h.y<=r){const t=c(h.x,h.y,r);if(0!==s&&Nt(i[s-1],t)||(i[s]=t,s+=1),n.y>r){const t=ys(l(Bi,r),l(Di,r),h,n);t&&(i[s]=c(t.x,t.y,r),s+=1),i[s]=c(n.x,r,r),s+=1}else i[s]=c(n.x,n.y,r),s+=1}else{const t=c(h.x,r,r);if(0!==s&&Nt(i[s-1],t)||(i[s]=t,s+=1),n.y<=r){const t=ys(l(Bi,r),l(Di,r),h,n);t&&(i[s]=c(t.x,t.y,r),s+=1),i[s]=c(n.x,n.y,r),s+=1}else i[s]=c(n.x,r,r),s+=1}}return s}n_(){return Mu(this.JM,(t=>t[1]))}setFillStyle(t){return this.gw(t),this}getFillStyle(){return this.Rl()}attach(t,i=!0,s=!1){return ai(t,this.ts,s,{fill:this.j_,stroke:this.dw}),super.attach(t,i,s)}}class Qu extends ju{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u);const d=c;this.X_=di(this.ts.areaSeriesPositiveFillStyle,d),this.j_=z,this.dw=di(this.ts.areaSeriesPositiveStrokeStyle,d)}ww(t){return this.Dw(t)}Dw(t){const i=[];return 1===t.length?this.Fw(t[0],i):this.Iw(t,i),i}Fw(t,i,s=0){const e=this._w;return i[s]=t.y<e?c(t.x,e,e):c(t.x,t.y,e),s+1}Iw(t,i,s=0){let e=0;const h=t.length-1,r=this._w;for(;e<h;){const h=t[e],n=t[e+=1];if(h.y>=r){const t=c(h.x,h.y,r);if(0!==s&&Nt(i[s-1],t)||(i[s]=t,s+=1),n.y<r){const t=ys(l(Bi,r),l(Di,r),h,n);t&&(i[s]=c(t.x,t.y,r),s+=1),i[s]=c(n.x,r,r),s+=1}else i[s]=c(n.x,n.y,r),s+=1}else{const t=c(h.x,r,r);if(0!==s&&Nt(i[s-1],t)||(i[s]=t,s+=1),n.y>=r){const t=ys(l(Bi,r),l(Di,r),h,n);t&&(i[s]=c(t.x,t.y,r),s+=1),i[s]=c(n.x,n.y,r),s+=1}else i[s]=c(n.x,r,r),s+=1}}return s}n_(){return Mu(this.JM,(t=>t[0]||[]))}setFillStyle(t){return this.Aw(t),this}getFillStyle(){return this.pw()}attach(t,i=!0,s=!1){return ai(t,this.ts,s,{fill:this.X_,stroke:this.dw}),super.attach(t,i,s)}}const Ju={Positive:Qu,Negative:Zu,Bipolar:Xu},Ku=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Position","",i.axisX.formatValue(s)).addRow("High","",i.axisY.formatValue(e)).addRow("Low","",i.axisY.formatValue(h));class qu extends Yu{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.Ms="Area Range Series",this.Om=Ku,this.Ki.cs.Gn(fo.mf);const c=u;this.X_=di(this.ts.areaRangeSeriesFillStyle,c),this.dw=di(this.ts.areaRangeSeriesStrokeStyle,c),this.j_=di(this.ts.areaRangeSeriesFillStyleInverted,c),this.fw=di(this.ts.areaRangeSeriesStrokeStyleInverted,c)}add(t){const i=Array.isArray(t)?t:[t],[s,e]=f(i);this.hw(t,s,e);const h=this.yu[this.yu.length-1];return this.i_=h?{position:h.position,high:h.high,low:h.low}:void 0,this.L.emit("dataAdd",this,i,this.s_),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.i_?this.i_.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}Mw(t,i){this.lw(t,i)}setHighFillStyle(t){return this.Aw(t),this}setLowFillStyle(t){return this.gw(t),this}setHighStrokeStyle(t){return this.mw(t),this}setLowStrokeStyle(t){return this.yw(t),this}getHighFillStyle(){return this.pw()}getLowFillStyle(){return this.Rl()}getHighStrokeStyle(){return this.Sw()}getLowStrokeStyle(){return this.xw()}n_(){return Mu(this.JM,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}o_(t){return this.L.on("dataAdd",t)}a_(t){return this.L.off(t)}l_(t){return this.L.on("dataClear",t)}u_(t){return this.L.off(t)}attach(t,i=!0,s=!1){return ai(t,this.ts,s,{fill:this.X_,fill2:this.j_,behavior:{colorStep:!0}}),super.attach(t,i,s)}}var tc;exports.StepOptions=void 0,(tc=exports.StepOptions||(exports.StepOptions={}))[tc.before=0]="before",tc[tc.middle=.5]="middle",tc[tc.after=1]="after";const ic=(t,i)=>{const s=[],e=t.length,h=i;if(e>0){let i=0,r=t[0];s[i]=r,i+=1;for(let n=1;n<e;n+=1){const e=t[n];if(h<=0)s[i]=l(r.x,e.y),i+=1;else{const t=r.x*(1-h)+e.x*h;s[i]=l(t,r.y),i+=1,s[i]=l(t,e.y),i+=1}s[i]=e,i+=1,r=e}}return s},sc=(t,i)=>{const s=t*t,e=s*t,h=1-t,r=h*h,n=r*h;return l(n*i[0].x+3*t*r*i[1].x+3*s*h*i[2].x+e*i[3].x,n*i[0].y+3*t*r*i[1].y+3*s*h*i[2].y+e*i[3].y)},ec=(t,i=32)=>{if(2===t.length)return[t[0],t[1]];const s=(t=>{const i=1e-5,s=t.length-1,e=Array(s);if(s>1){let h=l(0,0),r=l(0,0),n=l(0,0),o=is(ns(t[1],t[0]));const a=3;let u=0,c=0;for(let d=0;d<s;d+=1){const f=Array(4);if(f[0]=t[d],f[1]=t[d],f[3]=t[d+1],f[2]=t[d+1],n=o,h=r,d+1<s?(o=t[d+2]===t[d+1]?l(0,0):is(ns(t[d+2],t[d+1])),r=is(rs(n,o))):r=l(0,0),t[d+1].y===t[d].y)u=0,c=0;else{const s=t[d+1].x-t[d].x;u=Math.abs(h.x)>i?Math.abs(s/(a*h.x)):1,c=Math.abs(r.x)>i?Math.abs(s/(a*r.x)):1}f[1]=rs(hs(h,u),f[1]),f[2]=ns(f[2],hs(r,c)),e[d]=f}}return e.length>0?e:[]})(t),e=s.length,h=Array(e*i);let r=0;for(let t=0;t<e;t+=1)for(let e=0;e<=i;e+=1)h[r]=sc(e/i,s[t]),r+=1;return h};class hc extends Cu{constructor(t,i,s,e,h,r,n,o,a,u,c,d,f,g,p){super(t,i,s,e,h,r,n,o,a,c,d),this.JM=[],this.Ms="Point Line series",this.h_=1e5,this.$b=5,this.ga=0,this.Wa=!1,this.Ua=!1,this.Ya=!1,this.Rb=!0,this.Bw="nearest-x",this.Lw=1,this.Rw=[],this.Ew=t=>{if(this.JM.length>0){const i=this.JM[this.JM.length-1];if(t.length>0){const s=i.il(),e=i.tl(),h=s.length+e.length-+i.zl();if(h>=this.h_){const r=e.length>0?e[e.length-1]:s[i.zl()?h:h-1],n=l((r.x+t[0].x)/2,(r.y+t[0].y)/2);i.ol(n,A(l(n.x,n.y),l(n.x,n.y))).Vl(!0),this.zw([n].concat(t)).El(!0)}else i.ol(t,this.s_)}}else t.length>0&&this.zw(t)},this.Vw=t=>{if(this.Rw.length>0){const i=this.Rw[this.Rw.length-1];t.length>0&&((i.il().length+i.tl().length)*this.Lw>=this.h_?this.Ow(t):i.ol(t))}else t.length>0&&this.Ow(t)},this.Nw=(t,i)=>{const s=t.$c(i);if(s)return ct(s,this.scale,this.Ts.cs.ft)},this.Gw=(t,i)=>{const s=t.ew(i);if(s)return ct(s,this.scale,this.Ts.cs.ft)},this.Yn=p,this.Xb=u,this.Ww=f,this.Uw=di(c.pointLineSeriesFillStyle,g),this.uu=di(this.ts.pointLineSeriesStrokeStyle,g)}add(t){return super.add(t),this}n_(){return Mu(this.Rw)}setStrokeStyle(t){this.uu="function"==typeof t?t(this.uu):t;const i=this.uu;for(let t=0;t<this.JM.length;t+=1)this.JM[t].Ee(i);return this.Ts.vs(),this}getStrokeStyle(){return this.uu}setPointFillStyle(t){this.Uw="function"==typeof t?t(this.Uw):t;const i=this.Uw;for(let t=0;t<this.Rw.length;t+=1)this.Rw[t].ke(i);return this.Ts.vs(),this}getPointFillStyle(){return this.Uw}setPointSize(t){this.$b=t;for(let i=0;i<this.Rw.length;i+=1)this.Rw[i].tt(t);return this.Ts.vs(),this}getPointSize(){return this.$b}getPointShape(){return this.Xb}setPointRotation(t){this.ga=t;for(let i=0;i<this.Rw.length;i+=1)this.Rw[i].Gh(t);return this.Ts.vs(),this}getPointRotation(){return this.ga}setIndividualPointSizeEnabled(t){this.Wa=t,t&&this.Ki.cs.Gn(fo.bf);for(let i=0;i<this.Rw.length;i+=1)this.Rw[i].hl(t);return this.Ts.vs(),this}getIndividualPointSizeEnabled(){return this.Wa}setIndividualPointRotationEnabled(t){this.Ua=t;for(let i=0;i<this.Rw.length;i+=1)this.Rw[i].rl(t);return this.Ts.vs(),this}getIndividualPointRotationEnabled(){return this.Ua}setIndividualPointValueEnabled(t){this.Ya=t;for(let i=0;i<this.Rw.length;i+=1)this.Rw[i].nl(t);return this.Ts.vs(),this}getIndividualPointValueEnabled(){return this.Ya}setVisible(t){return super.setVisible(t),this.Rw.forEach((i=>i.setVisible(t))),this}setCursorInterpolationEnabled(t){return this.Rb=t,this.Ts.cs.vs(),this}getCursorInterpolationEnabled(){return this.Rb}setCursorSolveBasis(t){return this.Bw=t,this.JM.forEach((i=>i.qa(Bh(t)))),this.Rw.forEach((i=>i.qa(Bh(t)))),this.Ts.vs(),this}getCursorSolveBasis(){return this.Bw}Wd(){return li(this.Uw)||li(this.uu.getFillStyle())}ks(){return this.bs||this.Xb}UM(t){}Pe(t,i){t.ds(i),this.Ts.vs()}r_(t){const i=this.JM.length>0?this.JM[this.JM.length-1].il().length+this.JM[this.JM.length-1].tl().length-+this.JM[this.JM.length-1].zl():void 0;bu(t,i,this.h_,this.Ew),bu(t,i,this.h_,this.Vw)}Ow(t,i){const s=this.Ts.bS(this.scale).ol(t,i).setMouseInteractions(this.Hi).ke(this.Uw).sl(this.Xb).tt(this.$b).Gh(this.ga).hl(this.Wa).rl(this.Ua).nl(this.Ya).qa(Bh(this.Bw)).ds(this.getHighlight());return this.fs(s),this.Rw.push(s),s}zw(t,i){const s=this.Ts.sy(this.scale,void 0,[Ua.UserSeries,...this.Ww]).ol(t,i).setMouseInteractions(this.Hi).Ee(this.uu).qa(Bh(this.Bw)).ds(this.getHighlight());return this.fs(s),this.JM.push(s),s}attach(t,i=!0,s=!1){return ai(t,this.ts,s,{stroke:this.uu,fill:this.Uw}),super.attach(t,i,s)}getPointAmount(){return this.Rw.reduce(((t,i)=>t+i.al()+i.ll()),this.yu.length)}clear(){super.clear();for(let t=0;t<this.JM.length;t+=1)this.JM[t].dispose();this.JM.length=0;for(let t=0;t<this.Rw.length;t+=1)this.Rw[t].dispose();return this.Rw.length=0,this}e_(t,i,s,e){super.e_(t,i,s,e),this.qM.e_(this.Rw,i,s,e,this.scale,(t=>{}))}$c(t,i,s=this.Rb){const e=s?ku(t,i?this.JM.filter((t=>t.getIsUnderMouse())):this.JM,this.Gw,"nearest-x"===this.Bw?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.Bw?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2):ku(t,i?this.Rw.filter((t=>t.getIsUnderMouse())):this.Rw,this.Nw,"nearest-x"===this.Bw?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.Bw?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==e){const t=ct(e[0],this.Ts.cs.ft,this.scale),i=e[1]instanceof gr?e[1].cu():e[1].zh(),s=e[1]instanceof tr?e[1].zh():void 0,h=e[1]instanceof gr?e[1].cu().getFillStyle():void 0,r=Y(i)?e[0].color?new G({color:e[0].color}):new G({color:i.getFallbackColor()}):void 0;return Ia(t,this.scale,this.Om(new Aa,this,t.x,t.y,t).Qu(),this,h||r||s)}}solveNearestFromScreen(t,i=this.Rb){return this.$c(ao(t,this.Ki.cs),!1,i)}}const rc=(t,i)=>t.tl().length>=i?t.tl().slice(-i):Array.prototype.concat(t.il(),t.tl()).slice(-i),nc=(t,i,s)=>{const e=Array.prototype.concat(t.il(),t.tl()).slice(0,-s-1).concat(i.slice(s+1,2*s+2));t.Gt().ol(e).Ds()};class oc extends hc{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A){super(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A),this.Ms="Spline Series",this.Lw=32,this.h_=8e3,this.Yw=t=>{if(0===t.length)return;const i=this.Rw.length;if(i>0){const s=i>1,e=this.Rw[i-1];if(s){const s=Array.prototype.concat(e.il(),e.tl()),h=s.length;if(32*h>=this.h_){const s=rc(e,3),h=Array.prototype.concat(s,t),r=ec(h,32);nc(this.JM[i-1],r,32),this.zw(r.slice(66))}else if(h<5){const e=this.Rw[i-2],h=rc(e,3),r=Array.prototype.concat(h,s,t),n=ec(r,32),o=this.JM[i-1],a=n.slice(66);o.Gt().ol(a).Ds()}else{const s=this.JM[i-1],h=Array.prototype.concat(s.il(),s.tl()),r=rc(e,4),n=Array.prototype.concat(r,t),o=ec(n,32),a=h.slice(0,-66).concat(o.slice(33));s.Gt().ol(a).Ds()}}else{const s=Array.prototype.concat(e.il(),e.tl()),h=s.length,r=this.JM[i-1];if(32*h>=this.h_){const i=rc(e,3),s=Array.prototype.concat(i,t),h=ec(s,32);nc(this.JM[0],h,32),this.zw(h.slice(66))}else if(h+t.length>1){const i=Array.prototype.concat(s,t),e=ec(i,32);r.Gt().ol(e).Ds()}else r.ol(t)}}else{const i=t.length>0?ec(t,32):t,s=ji(i);this.zw(i,s)}this.Vw(t)}}setCursorInterpolationEnabled(t){return super.setCursorInterpolationEnabled(t)}r_(t){const i=this.Rw.length,s=this.Rw.length>0?this.Rw[i-1].il().length+this.Rw[i-1].tl().length:void 0;bu(t,s,Math.ceil(this.h_/this.Lw),this.Yw)}solveNearestFromScreen(t,i=this.Rb){if(i)return super.solveNearestFromScreen(ao(t,this.Ki.cs),i);const s=ku(ao(t,this.Ki.cs),this.Rw,this.Nw,"nearest-x"===this.Bw?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.Bw?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==s){const t=ct(s[0],this.Ts.cs.ft,this.scale);return Ia(t,this.scale,this.Om(new Aa,this,t.x,t.y,t).Qu(),this,s[1].zh())}}}class ac{constructor(){this.Wi="FreeformPattern",this.wl={type:"disabled",packager:(t,i,s)=>t.slice()}}e_(t,i,s,e,h,r){if(e>0){const h=Math.trunc((i-e)/s);if(h>0&&t.length>1){const i=t.splice(0,h);for(let t=0;t<i.length;t+=1)r(i[t]),i[t].dispose()}}}Hw(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}getXMax(t=[],i){return Ot(t,Dt,Math.max,Et,i)}getXMin(t=[],i){return Ot(t,Pt,Math.min,Rt,i)}getYMax(t=[],i){return Ot(t,Lt,Math.max,Vt,i)}getYMin(t=[],i){return Ot(t,Bt,Math.min,zt,i)}}const lc=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},uc=t.Record({wl:{type:"disabled",packager:(t,i,s)=>t.slice()}});class cc extends uc{e_(t,i,s,e,h,r){if(e>0){const i=Math.ceil(e/s),n=t.length-i;if(n>0){const i=this.nw(t,h);if(i>0){const s=n-i>0?i:n;if(s>0){for(let i=0;i<s;i+=1)r(t[i]),t[i].dispose();t.splice(0,s)}}}}}}const dc=(t,i)=>{const s=i.Mt();return t?Math.min(s,t):s},fc=(t,i)=>{const s=i._t();return t?Math.max(s,t):s};class Ac extends cc{Hw(t,i){return Math.abs(t.x-i.x)}getYMax(t=[],i){return t.reduce(fc,i?i.max.y:void 0)}getYMin(t=[],i){return t.reduce(dc,i?i.min.y:void 0)}}const gc=(t,i)=>{const s=i.xt();return t?Math.min(s,t):s},pc=(t,i)=>{const s=i.bt();return t?Math.max(s,t):s};class mc extends cc{Hw(t,i){return Math.abs(t.y-i.y)}getXMax(t=[],i){return t.reduce(pc,i?i.max.x:void 0)}getXMin(t=[],i){return t.reduce(gc,i?i.min.x:void 0)}}const yc={horizontalProgressive:new class extends Ac{constructor(){super({wl:Ch()}),this.Wi="HorizontalProgressivePattern"}nw(t,i){const s=t.length,e=Math.min(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.x.mi(t[r].bt(),t[r].xl())<e&&(h+=1);return h}getXMax(t=[],i){return void 0!==i?i?i.max.x:void 0:t.length>0?t[t.length-1].bt():void 0}getXMin(t=[],i){return t.length>0&&t[0].al()>0?t[0].xt():i?i.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",Ch(lc(t)))}},horizontalRegressive:new class extends Ac{constructor(){super({wl:kh()}),this.Wi="HorizontalRegressivePattern"}nw(t,i){const s=t.length,e=Math.max(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.x.mi(t[r].xt(),-t[r].xl())&&(h+=1);return h}getXMax(t=[],i){return t.length>0&&t[0].al()>0?t[0].bt():i?i.max.x:void 0}getXMin(t=[],i){return void 0!==i?i?i.min.x:void 0:t.length>0?t[t.length-1].xt():void 0}setPrecision(t){return this.set("_columnPackaging",kh(lc(t)))}},verticalProgressive:new class extends mc{constructor(){super({wl:Th()}),this.Wi="VerticalProgressivePattern"}nw(t,i){const s=t.length,e=Math.min(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.y.mi(t[r]._t(),t[r].bl())<e&&(h+=1);return h}getYMax(t=[],i){return void 0!==i?i?i.max.y:void 0:t.length>0?t[t.length-1]._t():void 0}getYMin(t=[],i){return t.length>0&&t[0].al()>0?t[0].Mt():i?i.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",Th(lc(t)))}},verticalRegressive:new class extends mc{constructor(){super({wl:Fh()}),this.Wi="VerticalRegressivePattern"}nw(t,i){const s=t.length,e=Math.max(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.y.mi(t[r].Mt(),-t[r].bl())&&(h+=1);return h}getYMax(t=[],i){return t.length>0&&t[0].al()>0?t[0]._t():i?i.max.y:void 0}getYMin(t=[],i){return void 0!==i?i?i.min.y:void 0:t.length>0?t[t.length-1].Mt():void 0}setPrecision(t){return this.set("_columnPackaging",Fh(lc(t)))}},freeform:new ac};class Sc extends hc{constructor(t,i,s,e,h,r,n,o,a,u,c,d,f,g,p){super(t,i,s,e,h,r,n,o,yc.horizontalProgressive,a,c,d,f,g,p),this.Ms="Step Series",this.Ew=t=>{const i=this.JM.length>0?this.JM[this.JM.length-1].il().length+this.JM[this.JM.length-1].tl().length:void 0;bu(t,i,this.h_,this.$w)},this.$w=t=>{const i=t.length;if(this.JM.length>0){const s=this.JM[this.JM.length-1];if(i>0){const i=s.il(),e=s.tl(),h=e.length>0?e[e.length-1]:i[i.length-1],r=ic([h].concat(t),this.Xw);r.shift();const n=l((h.x+r[0].x)/2,(h.y+r[0].y)/2),o=Array.prototype.concat(n,r);(e.length>0?i.length+e.length:i.length)>=this.h_?(s.ol(n,A(l(n.x,n.y),l(n.x,n.y))).Vl(!0),this.zw(o).El(!0),this.Ow(t)):s.ol(o)}}else i>0&&this.zw(ic(t,this.Xw));this.Vw(t)},this.Xw=u,void 0===this.Ww.find((t=>"DataPattern"===t.type))&&this.Ww.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class vc extends xu{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Ms="OHLC Series",this.jw=t=>t[4]>=t[1],this.d_=A(u(Di,Di),u(Bi,Bi)),this.Zw=[],this.Qw=!1,this.Jw=-1,this.Kw=[],this.qw=!0,this.tC=!1,this.iC=4,this.Om=(t,i,s)=>(t.addRow(i.getName()).addRow("Time","",i.axisX.formatValue(s.position)).addRow("Open","",s.open.toFixed(3)).addRow("High","",s.high.toFixed(3)).addRow("Low","",s.low.toFixed(3)).addRow("Close","",s.close.toFixed(3)),t),this.sC=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.Ki.cs.Gn(fo.nf)}n_(){return this.Kw}o_(t){return this.L.on("dataAdd",t)}a_(t){return this.L.off(t)}l_(t){return this.L.on("dataClear",t)}u_(t){return this.L.off(t)}qy(){return this.iS&&this.Kw.length>0&&this.getVisible()}eC(t){if(!(this.Kw.length<1))return[this.Kw[t][0],this.Kw[t][1],this.Kw[t][2],this.Kw[t][3],this.Kw[t][4]]}$c(t){if(0===this.Kw.length)return;const i=ct(t,this.Ts.cs.ft,this.scale).x,s=void 0!==this.getPackDataState();let e,h,r,n,o;if(s){const t=this.hC;if(!t)return;const s=Ci(i,t.length-1,(i=>t[i][0])),a=void 0!==s&&t[s];if(!a)return;n=a[3],r=a[2],h=a[1],o=a[4],e=a[0]}else{const t=Ci(i,this.Kw.length-1,(t=>this.Kw[t][0])),s=void 0!==t&&this.Kw[t];if(!s)return;e=s[0],h=s[1],r=s[2],n=s[3],o=s[4]}const a={position:e,open:h,high:r,low:n,close:o,isPacked:s};return{location:l(a.position,a.close),scale:this.scale,resultTableContent:this.Om(new Aa,this,a).Qu(),owner:this,isPacked:s,position:e,open:h,high:r,low:n,close:o}}UM(t){if(!(t.x instanceof Ps))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.rC=t.x}Mr(){return l(5,5)}H_(t){const i=t.length-1;if(i<0)return this;for(let s=0;s<=i;s+=1)t[s][3]<this.d_.min.y&&(this.d_.min.y=t[s][3]),this.d_.max.y<t[s][2]&&(this.d_.max.y=t[s][2]);return this.d_.min.x=Math.min(this.d_.min.x,t[0][0]),this.d_.max.x=Math.max(this.d_.max.x,t[i][0]),this}getXMax(){return this.d_.max.x}getXMin(){return this.d_.min.x}getYMax(){return this.d_.max.y}getYMin(){return this.d_.min.y}add(t){this.Kw.length>0&&this.Ki.cs.Gn(fo.xf);const i=Array.isArray(t[0])?t:[t[0]];if(i.length>0){this.Qw=!0;const t=this.Kw.length,s=this.Zw.length,e=i.length;this.Kw.length=t+e,this.Zw.length=s+e;for(let h=0;h<e;h+=1)this.Kw[t+h]=i[h],this.Zw[s+h]=this.Kw[t+h];this.H_(i),this.L.emit("dataAdd",this,i,void 0),this.Ts.vs()}return this}setPackData(t){return t!==this.qw&&(this.tC=!0,this.qw=t,this.Ki.cs.vs()),this}getPackData(){return this.qw}getPackDataState(){const t=this.Jw;if(!(t<0||void 0===this.hC||this.hC.length===this.Kw.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.nC=t,this.Ki.cs.vs(),this}getFigureWidth(){return this.nC}setFigureMinimumGap(t){return this.iC=t,this.Ki.cs.vs(),this}getFigureMinimumGap(){return this.iC}solveNearestFromScreen(t){return this.$c(ao(t,this.Ki.cs))}clear(){return this.Kw=[],this.Zw=[],this.hC=void 0,this.oC(),this.d_.min.x=Di,this.d_.min.y=Di,this.d_.max.x=Bi,this.d_.max.y=Bi,this.L.emit("dataClear",this),this}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}aC(t){return this.rC.getPixelSize()*t/1e3}lC(){const t=this.sC.length-1,i=this.aC(this.nC+this.iC);let s=Ci(i,t,(t=>this.sC[t]));return void 0===s?s=i<this.sC[0]?0:this.sC[t]<i?t:this.sC.length/2:this.sC[s]<i&&(s+=1),this.sC.length<=s&&(s=t),1e3*this.sC[s]}Fe(){if(super.Fe(),!this.qw){this.hC=void 0;let t=null;if(this.tC?(this.tC=!1,t=this.Kw,this.oC()):t=this.Zw,t.length>=1){for(let i=0;i<t.length;i+=1){const s=t[i],e=s[0];this.jw(s)?this.uC(e,s):this.cC(e,s)}this.Zw.length=0,this.Qw=!1,this.Jw=-1}}}Ay(){super.Ay();const t=this.lC();if(this.qw&&this.Kw.length>=1&&(t!==this.Jw||this.Qw||this.tC)){this.tC=!1,this.Jw=t,this.Qw=!1,this.oC(),this.hC=[];const i=this.Kw.length;let s=this.Kw[0][0]-this.Kw[0][0]%(t/2)+t,e=0;for(;e<i;){let h=this.eC(e);if(void 0===h)break;let r=h[3],n=h[2];const o=e;for(e+=1;e<i&&this.Kw[e][0]<s;)h=this.Kw[e],this.Kw[e][3]<r&&(r=this.Kw[e][3]),n<this.Kw[e][2]&&(n=this.Kw[e][2]),e+=1;const a=e-1;let l=h[0];o<a&&(l=this.Kw[a][0],h=[l,this.Kw[o][1],n,r,this.Kw[a][4]]),h[1]<h[4]?this.uC(l,h):this.cC(l,h),this.hC.push(h),s+=t}}}}class xc extends vc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.dC=1175494351e-14,this.nC=this.ts.ohlcCandleThicknessPixels||5,this.fC=this.ts.ohlcCandleTailStrokeStylePositive,this.AC=this.ts.ohlcCandleTailStrokeStyleNegative,this.gC=this.ts.ohlcCandleBodyFillStylePositive,this.pC=this.ts.ohlcCandleBodyFillStyleNegative,this.mC=s.Rg(this.scale).Ee(new Qs({thickness:this.nC,fillStyle:this.gC})),this.mC.mu=!0,this.mC.pu={x:0,y:1},this.yC=s.Rg(this.scale).Ee(new Qs({thickness:this.nC,fillStyle:this.pC})),this.yC.mu=!0,this.yC.pu={x:0,y:-1},this.SC=s.Rg(this.scale).Ee(this.fC),this.SC.mu=!0,this.vC=s.Rg(this.scale).Ee(this.AC),this.vC.mu=!0,this.fs(this.mC),this.fs(this.yC),this.fs(this.SC),this.fs(this.vC)}setBodyThickness(t){return this.nC=t,this.mC.Ee(new Qs({thickness:this.nC,fillStyle:this.gC})),this.yC.Ee(new Qs({thickness:this.nC,fillStyle:this.pC})),this.Ki.cs.vs(),this}getBodyThickness(){return this.nC}setBodyFillStylePositive(t){return this.gC="function"==typeof t?t(this.gC):t,this.mC.Ee(new Qs({thickness:this.nC,fillStyle:this.gC})),this.Ki.cs.vs(),this}getBodyFillStylePositive(){return this.gC}setBodyFillStyleNegative(t){return this.pC="function"==typeof t?t(this.pC):t,this.yC.Ee(new Qs({thickness:this.nC,fillStyle:this.pC})),this.Ki.cs.vs(),this}getBodyFillStyleNegative(){return this.pC}setTailStrokeStylePositive(t){return this.fC="function"==typeof t?t(this.fC):t,this.SC.Ee(this.fC),this.Ki.cs.vs(),this}getTailStrokeStylePositive(){return this.fC}setTailStrokeStyleNegative(t){return this.AC="function"==typeof t?t(this.AC):t,this.vC.Ee(this.AC),this.Ki.cs.vs(),this}getTailStrokeStyleNegative(){return this.AC}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{fill:this.gC,fill2:this.pC,behavior:{colorStep:!0}}),this}oC(){return this.SC.Gt(),this.vC.Gt(),this.mC.Gt(),this.yC.Gt(),this}uC(t,i){return Math.abs(i[1]-i[4])<this.dC?this.mC.Vr().zg({x:t,y:i[1]-this.dC},{x:t,y:i[1]+this.dC}):this.mC.Vr().zg({x:t,y:i[1]},{x:t,y:i[4]}),i[4]<i[2]&&this.SC.Vr().zg({x:t,y:i[4]},{x:t,y:i[2]}),i[3]<i[1]&&this.SC.Vr().zg({x:t,y:i[3]},{x:t,y:i[1]}),this}cC(t,i){return Math.abs(i[1]-i[4])<this.dC?this.yC.Vr().zg({x:t,y:i[1]-this.dC},{x:t,y:i[1]+this.dC}):this.yC.Vr().zg({x:t,y:i[1]},{x:t,y:i[4]}),i[3]<i[4]&&this.vC.Vr().zg({x:t,y:i[3]},{x:t,y:i[4]}),i[1]<i[2]&&this.vC.Vr().zg({x:t,y:i[1]},{x:t,y:i[2]}),this}}class bc extends vc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.nC=this.ts.ohlcBarThicknessPixels||10,this.xC=this.ts.ohlcBarStrokeStylePositive,this.bC=this.ts.ohlcBarStrokeStyleNegative,this.MC=s.Rg(this.scale).Ee(this.xC),this.MC.mu=!0,this.fs(this.MC),this._C=s.Rg(this.scale).Ee(this.xC),this._C.mu=!0,this._C.pu={x:-this.nC/2,y:0},this.fs(this._C),this.wC=s.Rg(this.scale).Ee(this.xC),this.wC.mu=!0,this.wC.pu={x:this.nC/2,y:0},this.fs(this.wC),this.CC=s.Rg(this.scale).Ee(this.bC),this.CC.mu=!0,this.fs(this.CC),this.kC=s.Rg(this.scale).Ee(this.bC),this.kC.mu=!0,this.kC.pu={x:-this.nC/2,y:0},this.fs(this.kC),this.TC=s.Rg(this.scale).Ee(this.bC),this.TC.mu=!0,this.TC.pu={x:this.nC/2,y:0},this.fs(this.TC)}setStrokeStylePositive(t){return this.xC="function"==typeof t?t(this.xC):t,this.MC.Ee(this.xC),this._C.Ee(this.xC),this.wC.Ee(this.xC),this.Ki.cs.vs(),this}getStrokeStylePositive(){return this.xC}setStrokeStyleNegative(t){return this.bC="function"==typeof t?t(this.bC):t,this.CC.Ee(this.bC),this.kC.Ee(this.bC),this.TC.Ee(this.bC),this.Ki.cs.vs(),this}getStrokeStyleNegative(){return this.bC}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{fill:this.xC.getFillStyle(),fill2:this.bC.getFillStyle(),behavior:{colorStep:!0}}),this}setFigureWidth(t){return super.setFigureWidth(t),this._C.pu={x:-t/2,y:0},this.kC.pu={x:-t/2,y:0},this.wC.pu={x:t/2,y:0},this.TC.pu={x:t/2,y:0},this}oC(){return this.CC.Gt(),this.MC.Gt(),this.kC.Gt(),this._C.Gt(),this.TC.Gt(),this.wC.Gt(),this}uC(t,i){return this.MC.Vr().zg({x:t,y:i[3]},{x:t,y:i[2]}),this._C.Vr().zg({x:t,y:i[1]},{x:t,y:i[1]}),this.wC.Vr().zg({x:t,y:i[4]},{x:t,y:i[4]}),this}cC(t,i){return this.CC.Vr().zg({x:t,y:i[3]},{x:t,y:i[2]}),this.kC.Vr().zg({x:t,y:i[1]},{x:t,y:i[1]}),this.TC.Vr().zg({x:t,y:i[4]},{x:t,y:i[4]}),this}}const Mc={Candlesticks:xc,Bars:bc},_c=t=>({defaultDragMouseStyle:exports.MouseStyles.Horizontal,getTitleTextRotation:()=>0,...il(t,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Mr().x))}),wc=t=>({defaultDragMouseStyle:exports.MouseStyles.Vertical,getTitleTextRotation:t=>90*t,...il(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Mr().y))});class Cc extends Cu{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f){super(t,i,s,e,h,r,n,o,a,l,u),this.JM=[],this.Ms="Line Series",this.Rb=!0,this.h_=void 0,this.Bw="nearest-x",this.Su=void 0,this.Wd=()=>li(this.uu.getFillStyle()),this.FC=(t,i)=>{const s=t.Yb(i);if(s)return ct(s,this.scale,this.Ts.cs.ft)},this.Gw=(t,i)=>{const s=t.ew(i);if(s)return ct(s,this.scale,this.Ts.cs.ft)},this.Ww=c,this.Yn=f,this.uu=di(this.ts.lineSeriesStrokeStyle,d),this.IC={individualLookupValuesEnabled:void 0!==(null==f?void 0:f.individualLookupValuesEnabled)&&f.individualLookupValuesEnabled}}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.uu="function"==typeof t?t(this.uu):t;const i=this.uu;for(let t=0;t<this.JM.length;t+=1)this.JM[t].Ee(i);return this.Ts.vs(),this}getStrokeStyle(){return this.uu}setDataCleaning(t){return this.Su=t,this.JM.forEach((t=>t.vu(this.Su))),this.Ts.vs(),this}setCursorInterpolationEnabled(t){return this.Rb=t,this.Ts.cs.vs(),this}getCursorInterpolationEnabled(){return this.Rb}setCursorSolveBasis(t){return this.Bw=t,this.JM.forEach((i=>i.qa(Bh(t)))),this.Ts.vs(),this}getCursorSolveBasis(){return this.Bw}UM(t){}r_(t){let i=this.JM[0];i||(i=this.zw(),this.JM.push(i),this.fs(i)),i.ol(t,this.s_)}zw(){return this.Ts.sy(this.scale,this.IC,[Ua.UserSeries,...this.Ww]).Ee(this.uu).vu(this.Su).qa(Bh(this.Bw)).ds(this.getHighlight())}attach(t,i=!0,s=!1){return ai(t,this.ts,s,{stroke:this.uu}),super.attach(t,i,s)}Pe(t,i){t.ds(i),this.Ts.vs()}e_(t,i,s,e){}$c(t,i,s=this.Rb){const e=ku(t,i?this.JM.filter((t=>t.getIsUnderMouse())):this.JM,s?this.Gw:this.FC,"nearest-x"===this.Bw?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.Bw?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==e){const t=ct(e[0],this.Ts.cs.ft,this.scale),i=e[1].cu();return Ia(t,this.scale,this.Om(new Aa,this,t.x,t.y,t).Qu(),this,i.getFillStyle())}}solveNearestFromScreen(t,i=this.Rb){return this.$c(ao(t,this.Ki.cs),!1,i)}}class kc extends Cu{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,new ac,l,u),this.JM=[],this.Ms="Point series",this.$b=5,this.ga=0,this.Wa=!1,this.Ua=!1,this.Ya=!1,this.h_=void 0,this.Nw=(t,i)=>{const s=t.$c(i);if(s)return ct(s,this.scale,this.Ts.cs.ft)},this.Yn=d,this.Xb=a,this.be=di(l.pointSeriesFillStyle,c)}add(t){return super.add(t),this}Wd(){return li(this.be)}ks(){return this.bs||this.Xb}UM(t){}attach(t,i=!0,s=!1){return ai(t,this.ts,s,{fill:this.be}),super.attach(t,i)}Pe(t,i){t.ds(i),this.Ts.vs()}setPointFillStyle(t){this.be="function"==typeof t?t(this.be):t;const i=this.be;for(let t=0;t<this.JM.length;t+=1)this.JM[t].ke(i);return this.Ts.vs(),this}getPointFillStyle(){return this.be}setPointSize(t){this.$b=t;for(let i=0;i<this.JM.length;i+=1)this.JM[i].tt(t);return this.Ts.vs(),this}getPointSize(){return this.$b}getPointShape(){return this.Xb}setPointRotation(t){this.ga=t;for(let i=0;i<this.JM.length;i+=1)this.JM[i].Gh(t);return this.Ts.vs(),this}getPointRotation(){return this.ga}setIndividualPointSizeEnabled(t){this.Wa=t,t&&this.Ki.cs.Gn(fo.bf);for(let i=0;i<this.JM.length;i+=1)this.JM[i].hl(t);return this.Ts.vs(),this}getIndividualPointSizeEnabled(){return this.Wa}setIndividualPointRotationEnabled(t){this.Ua=t;for(let i=0;i<this.JM.length;i+=1)this.JM[i].rl(t);return this.Ts.vs(),this}getIndividualPointRotationEnabled(){return this.Ua}setIndividualPointValueEnabled(t){this.Ya=t;for(let i=0;i<this.JM.length;i+=1)this.JM[i].nl(t);return this.Ts.vs(),this}getIndividualPointValueEnabled(){return this.Ya}r_(t){let i=this.JM[0];i||(i=this.zw()),i.ol(t,this.s_)}zw(){const t=this.Ts.bS(this.scale).sl(this.Xb).tt(this.$b).Gh(this.ga).hl(this.Wa).rl(this.Ua).nl(this.Ya).ke(this.be).ds(this.getHighlight());return this.JM.push(t),this.fs(t),t}$c(t,i){const s=ku(t,i?this.JM.filter((t=>t.getIsUnderMouse())):this.JM,this.Nw,Yi);if(void 0!==s){const t=ct(s[0],this.Ts.cs.ft,this.scale),i=s[1].zh(),e=Y(i)?s[0].color?new G({color:s[0].color}):new G({color:i.getFallbackColor()}):i;return Ia(t,this.scale,this.Om(new Aa,this,t.x,t.y,t).Qu(),this,e)}}solveNearestFromScreen(t){return this.$c(ao(t,this.Ki.cs),!1)}setCursorResultTableFormatter(t){return super.setCursorResultTableFormatter(t)}}class Tc{constructor(t,s,e,h){this.PC=!1,this.L=new i.Eventer,this.chart=e,this.DC=h,this.Xs=t.Xs,this.te=h||De,this.BC=xt.document.createElement("div"),this.BC.style.position="absolute",this.BC.style.pointerEvents="none",xt.document.body.append(this.BC);const r=()=>{const t=e.engine.container.getBoundingClientRect();this.BC.style.left=`${t.left}px`,this.BC.style.top=`${t.top}px`,this.BC.style.width=`${t.width}px`,this.BC.style.height=`${t.height}px`};r(),e.onResize(r),this.LC(this.BC),this.RC(),this.EC(),this.zC(),this.VC(s),this.chart.OC().push(this)}LC(t){this.NC=xt.document.createElement("div"),this.NC.style.pointerEvents="all",t.append(this.NC),this.GC=xt.document.createElement("div"),this.WC=new Me(this.Xs,this.te,this.chart,this.GC),this.UC=xt.document.createElement("table"),this.UC.style.borderSpacing="0",this.NC.appendChild(this.WC.ae()),this.NC.appendChild(this.GC),this.GC.appendChild(this.UC)}EC(){let t=0,i=0,s=0,e=0,h=!1;this.PC=!1,this.NC.onmousedown=r=>{r=r||xt.event,s=r.clientX,e=r.clientY,h=!0,xt.document.onmouseup=t=>{this.PC?this.NC.addEventListener("click",jt,!0):this.NC.removeEventListener("click",jt,!0),h=!1,this.PC=!1,xt.document.onmouseup=null,xt.document.onmousemove=null},xt.document.onmousemove=r=>{r=r||xt.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.PC=!0,this.NC.style.top=this.NC.offsetTop-i+"px",this.NC.style.left=this.NC.offsetLeft-t+"px",this.NC.style.removeProperty("right"),this.NC.style.removeProperty("bottom"))}}}zC(){let t=0,i=0,s=0,e=0,h=!1;this.NC.ontouchstart=r=>{r=r||xt.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.NC.ontouchend=()=>{h=!1,xt.document.ontouchend=null,xt.document.ontouchmove=null},this.NC.ontouchmove=r=>{h&&(jt(r),r=r||xt.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.NC.style.top=this.NC.offsetTop-i+"px",this.NC.style.left=this.NC.offsetLeft-t+"px",this.NC.style.removeProperty("right"),this.NC.style.removeProperty("bottom"))}}}RC(){this.NC.style.setProperty("top","10px"),this.NC.style.setProperty("left","10px"),this.NC.style.position="absolute",this.NC.style.display="flex",this.NC.style.alignItems="flex-start",this.GC.style.setProperty("display","none")}removePositionProperty(){this.NC.style.removeProperty("top"),this.NC.style.removeProperty("left"),this.NC.style.removeProperty("bottom"),this.NC.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case exports.OSMPosition.BottomLeft:this.NC.style.setProperty("bottom","10px"),this.NC.style.setProperty("left","10px");break;case exports.OSMPosition.TopLeft:this.NC.style.setProperty("top","10px"),this.NC.style.setProperty("left","10px");break;case exports.OSMPosition.BottomRight:this.NC.style.setProperty("bottom","10px"),this.NC.style.setProperty("right","10px");break;case exports.OSMPosition.TopRight:default:this.NC.style.setProperty("top","10px"),this.NC.style.setProperty("right","10px")}}VC(t){for(let i=0;i<t.length;i+=1){const s=this.UC.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.YC(r,h):this.addCustomButton(r,h)}}}YC(t,i){switch(t){case exports.OnScreenMenuButtonType.ZoomIn:this.HC(new Ae(this.Xs,this.chart,this.te),i);break;case exports.OnScreenMenuButtonType.ZoomInX:this.HC(new ge(this.Xs,this.chart,this.te),i);break;case exports.OnScreenMenuButtonType.ZoomInY:this.HC(new pe(this.Xs,this.chart,this.te),i);break;case exports.OnScreenMenuButtonType.ZoomOut:this.HC(new me(this.Xs,this.chart,this.te),i);break;case exports.OnScreenMenuButtonType.ZoomOutX:this.HC(new ye(this.Xs,this.chart,this.te),i);break;case exports.OnScreenMenuButtonType.ZoomOutY:this.HC(new Se(this.Xs,this.chart,this.te),i);break;case exports.OnScreenMenuButtonType.ZoomToFit:this.HC(new xe(this.Xs,this.chart,this.te),i);break;case exports.OnScreenMenuButtonType.ToggleAnimations:this.HC(new ve(this.Xs,this.chart,this.te),i);break;default:console.error(`No predefined button like "${exports.OnScreenMenuButtonType[t]}" exists.`)}}HC(t,i){i.rowSpan=t.js.rows,i.colSpan=t.js.columns,t.oe(i)}addCustomButton(t,i){const s=new be(this.Xs,t,this.chart);return this.HC(s,i),this}dispose(){this.BC.remove(),this.L.emit("dispose",this)}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}}class Fc extends xu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){var d;super(t,i,s,e,h,r,n,o,a,l),this.Ms="Point Line Area Series",this.Om=Ic,this.Rb=!1,this.$C=0,this.Yn=c,this.Ga=this.Ts.fd(this.scale).Ee(di(this.ts.lineSeriesStrokeStyle,u)).ud(di(this.ts.pointSeriesFillStyle,u)).dd(di(this.ts.areaSeriesPositiveFillStyle,u)).XC(void 0).Sd(7),this.Ga.jC=!1!==(null===(d=this.Yn)||void 0===d?void 0:d.allowDataGrouping),this.fs(this.Ga)}setDataSet(t){var i;return t===(null===(i=this.ad)||void 0===i?void 0:i.Ut)||(t.Sc&&this.Ki.cs.Gn(fo.Mf),t.xc&&this.Ki.cs.Gn(fo.bf),this.ad=Ii(t,this.ad,(()=>[t.Xc((()=>{this.$C+=1,this.$C>1&&this.Ki.cs.Gn(fo.xf),this.Ki.cs.vs()})),t.jc((()=>this.Ki.cs.vs()))])),this.Ga.ld(t),this.chart.cs.vs()),this}getDataSet(){return this.ZC()}setStrokeStyle(t){return this.Ga.Ee(t),this.Ts.vs(),this}getStrokeStyle(){return this.Ga.cu()}setAreaFillStyle(t){return this.Ga.dd(t),this.Ts.vs(),this}getAreaFillStyle(){return this.Ga.QC()}setPointFillStyle(t){return this.Ga.ud(t),this.Ts.vs(),this}getPointFillStyle(){return this.Ga.yd()}setPointSize(t){return this.Ga.Sd(t),this.Ts.vs(),this}getPointSize(){return this.Ga.JC()}setPointShape(t){return this.Ga.Ad(t),this.Ts.vs(),this}getPointShape(){return this.Ga.gd()}setPointRotation(t){return this.Ga.pd(t),this.Ts.vs(),this}getPointRotation(){return this.Ga.md()}setPointAlignment(t){return this.Ga.KC(t),this.Ki.cs.vs(),this}getPointAlignment(){return this.Ga.qC()}setCurvePreprocessing(t){return this.Ga.XC(t),this.Ts.vs(),this}getCurvePreprocessing(){return this.Ga.tk()}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}setCursorInterpolationEnabled(t){return this.Rb=t,this.Ts.cs.vs(),this}getCursorInterpolationEnabled(){return this.Rb}add(t){return this.ZC().add(t),this.Ts.vs(),this}addArraysXY(t,i){return this.ZC().addArraysXY(t,i),this.Ts.vs(),this}appendJSON(t,i){return this.ZC().appendJSON(t,i),this.Ts.vs(),this}appendSample(t){return this.ZC().appendSample(t),this.Ts.vs(),this}appendSamples(t){return this.ZC().appendSamples(t),this.Ts.vs(),this}fill(t){return this.ZC().fill(t),this.Ts.vs(),this}setSamples(t){return this.ZC().setSamples(t),this.Ts.vs(),this}alterSamples(t,i){return this.ZC().alterSamples(t,i),this.Ts.vs(),this}alterSamplesByID(t,i){return this.ZC().alterSamplesByID(t,i),this.Ts.vs(),this}getSampleCount(){return this.ZC().getSampleCount()}getNextSampleIndex(){return this.ZC().getNextSampleIndex()}clear(){return this.ZC().clear(),this.Ts.vs(),this}setMaxSampleCount(t){return this.ZC().setMaxSampleCount(t),this.Ts.vs(),this}getMaxSampleCount(){return this.ZC().getMaxSampleCount()}readBack(t){return this.ZC().readBack(t)}onMaxSampleCountExceeded(t){return this.ZC().onMaxSampleCountExceeded(t)}offMaxSampleCountExceeded(t){return this.ZC().offMaxSampleCountExceeded(t)}ik(){return this.ZC()}Wd(){return li(this.getPointFillStyle())||li(this.getStrokeStyle().getFillStyle())||li(this.getAreaFillStyle())}qy(){var t;const i=null===(t=this.ad)||void 0===t?void 0:t.Ut;return this.getAutoScrollingEnabled()&&void 0!==i&&i.cc>0}UM(t){}getXMax(){return this.Ga.bt()}getXMin(){return this.Ga.xt()}getYMax(){return this.Ga._t()}getYMin(){return this.Ga.Mt()}Mr(){return{x:this.Ga.xl(),y:this.Ga.bl()}}ZC(){if(!this.ad){const t=new un(this.Yn);t.Sc&&this.Ki.cs.Gn(fo.Mf),t.xc&&this.Ki.cs.Gn(fo.bf),this.ad=Ii(t,this.ad,(()=>[t.Xc((()=>{this.$C+=1,this.$C>1&&this.Ki.cs.Gn(fo.xf),this.Ki.cs.vs()})),t.jc((()=>{this.Ki.cs.vs()}))])),this.Ga.ld(t)}return this.ad.Ut}attach(t,i=!0,s=!1){super.attach(t,i,s);const e=this.getPointFillStyle(),h=this.getAreaFillStyle();return ai(t,this.ts,s,{stroke:this.getStrokeStyle(),fill:e!==z?e:h}),super.attach(t,i)}ks(){return this.bs||this.getPointShape()}Pe(t,i){t.ds(i),this.Ts.vs()}$c(t,i,s=this.Rb){void 0!==this.getCurvePreprocessing()&&(s=!1);const e=this.ik(),h=ct(t,this.Ki.cs.ft,this.scale),r=!i||this.Ga.getIsUnderMouse()?e.$c(h,s,this.scale,this.Ki.pixelScale):void 0;if(void 0!==r){const t=[this.getStrokeStyle().getFillStyle(),this.getPointFillStyle(),this.getAreaFillStyle()];return Ia(r,this.scale,this.Om(new Aa,this,r).Qu(),this,t.filter((t=>!V(t)))[0])}}solveNearestFromScreen(t,i=!1){return this.$c(ao(t,this.Ki.cs),!1,i)}}const Ic=(t,i,s)=>{const e=i.getIcon();return e?t.addRow(e,i.getName()):t.addRow(i.getName()),t.addRow("X","",i.axisX.formatValue(s.x)).addRow("Y","",i.axisY.formatValue(s.y)),void 0!==s.lookupValue&&t.addRow("Value","",s.lookupValue.toFixed(1)),t},Pc=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.axis.ft.tt(i),t.axis.ng.tt(s)})))),Dc=l(10,10);var Bc;exports.AxisPosition=void 0,(Bc=exports.AxisPosition||(exports.AxisPosition={}))[Bc.Top=0]="Top",Bc[Bc.Bottom=1]="Bottom",Bc[Bc.Left=2]="Left",Bc[Bc.Right=3]="Right";const Lc=new Set([exports.AxisPosition.Top,exports.AxisPosition.Bottom,exports.AxisPosition.Left,exports.AxisPosition.Right]),Rc=t=>t.setStopped(!0),Ec=t=>t.getChartInteractionFitByDrag()?t.fit(!0):void 0,zc=(t,i)=>{const s="linear-highPrecision"===t.Th.type||"linear-highPrecision"===i.Th.type,e="logarithmic"===t.Th.type||"logarithmic"===i.Th.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.Th.type}, y: ${i.Th.type})`;throw new Error(s)}};var Vc,Oc,Nc;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(Vc||(Vc={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(Oc||(Oc={}));class Gc extends fl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.yp("chartXY bg",0),e,i.cs.ts.chartXYBackgroundFillStyle,i.cs.ts.chartXYBackgroundStrokeStyle,i.cs.ts.chartXYTitleFont,i.cs.ts.chartXYTitleFillStyle,n),this.sk=this.ep.d2({scaleXYConstructor:Ls}),this.Og=[],this.Ng=[],this.Wg=[],this.Gg=[],this.ek=new Map,this.hk=!0,this.rk=!0,this.nk=!0,this.Ef=2,this.ak=!0,this.lk=!0,this.uk=[],this.ck=this.vp.Te(this.sk).ke(z).Ce(rt).setMouseInteractions(!1),this.dk=this.vp.ze(this.sk).Ee(rt).setMouseInteractions(!1),this.fk=this.vp.ze(this.sk).Ee(rt).setMouseInteractions(!1),this.Ak=this.ts.chartXYZoomingRectangleFillStyle,this.gk=this.ts.chartXYZoomingRectangleStrokeStyle,this.pk=this.ts.chartXYFittingRectangleFillStyle,this.mk=this.ts.chartXYFittingRectangleStrokeStyle,this.yk=exports.MouseStyles.Default,this.Sk=exports.MouseStyles.Move,this.vk=exports.MouseStyles.ZoomIn,this.xk=exports.MouseStyles.Default,this.bk=void 0,this.Mk=Wc,this.WM=0,this.Vm=exports.AutoCursorModes.snapToClosest,this._k=Pc(this.Ng,this.Og),this.wk=Pc(this.Wg,this.Gg),this.Ck=(t,i,s,e,h)=>{this._k(e,h),this.wk(h,e),this.sk.tt(e,h),this.cs.vs()},this.kk=(t,i)=>{this.ek.set(t,i)},this.tg=t=>{const i=this.Ng.findIndex((i=>i.axis===t)),s=this.Og.findIndex((i=>i.axis===t)),e=this.Wg.findIndex((i=>i.axis===t)),h=this.Gg.findIndex((i=>i.axis===t));i>=0&&this.Ng.splice(i,1),s>=0&&this.Og.splice(s,1),e>=0&&this.Wg.splice(e,1),h>=0&&this.Gg.splice(h,1),this.ek.delete(t),this.cs.vs()},this.addAreaSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);const e=t&&t.baseline?t.baseline:0,h=new(t&&t.type?t.type:Ju.Positive)(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,e,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length);return this.DS(h),h},this.addAreaRangeSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);const e=new qu(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length);return this.DS(e),e},this.Fk=!1,this.Ik=!1,this.YM=()=>{(this.hk||this.rk)&&(this.bk=this.engine.setMouseStyle(this.yk))},this.HM=()=>{this.Fk=!1,this.engine.restoreMouseStyle(this.bk)},this.$M=(t,i,s)=>{var e,h;const r=It(null===(e=this.dA.Hn)||void 0===e?void 0:e.chartXYRectangleZoomFitMouseButton,0),n=It(null===(h=this.dA.Hn)||void 0===h?void 0:h.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.bk);const o=this.vp.cs.De(i.clientX,i.clientY);s===r&&(this.hk||this.rk)?(this.Pk(t,o),jt(i)):s===n&&this.ak&&(this.bk=this.engine.setMouseStyle(this.Sk),this.Ik=!0,jt(i))},this.hS=(t,i,s,e,h)=>{var r,n;const o=l(i.clientX,i.clientY),a=It(null===(r=this.dA.Hn)||void 0===r?void 0:r.chartXYRectangleZoomFitMouseButton,0),u=It(null===(n=this.dA.Hn)||void 0===n?void 0:n.chartXYPanMouseButton,2);s===a&&(this.hk||this.rk)?(this.Dk(t,e,o),jt(i)):s===u&&this.ak&&(this.Bk(hs(h,-1)),jt(i)),this.cs.vs()},this.XM=(t,i,s,e)=>{var h,r;const n=It(null===(h=this.dA.Hn)||void 0===h?void 0:h.chartXYRectangleZoomFitMouseButton,0),o=It(null===(r=this.dA.Hn)||void 0===r?void 0:r.chartXYPanMouseButton,2);if(s===n&&(this.hk||this.rk)){const s=l(i.clientX,i.clientY);this.Lk(t,e,s),jt(i)}else s===o&&this.ak&&jt(i);this.engine.restoreMouseStyle(this.bk),this.IS.getIsUnderMouse()&&(this.bk=this.engine.setMouseStyle(this.yk)),this.Fk=!1,this.Ik=!1},this.eS=(t,i)=>{if(this.nk){const t=this.vp.cs.De(i.clientX,i.clientY);this.Rk(t,l(fi(i),fi(i))),jt(i)}},this.Ek=(t,i,s,e)=>{},this.zk=(t,i,s,e,h,r)=>{if(this.ak){const t=l(-(e.x+h.x)/2,-(e.y+h.y)/2);this.Bk(t),jt(r),this.Ik=!0}if(this.nk){const t=this.engine.clientLocation2Engine(i.x,i.y),n=this.engine.clientLocation2Engine(s.x,s.y),o=ns(l(Math.abs(t.x-e.x-(n.x-h.x)),Math.abs(t.y-e.y-(n.y-h.y))),l(Math.abs(t.x-n.x),Math.abs(t.y-n.y)));this.forEachAxisX((t=>{t.getChartInteractionZoomByWheel()&&t.vt(t.ft.mi(t.getInterval().start,-o.x),t.ft.mi(t.getInterval().end,o.x),!1,!0,"interactionZoom")})),this.forEachAxisY((t=>{t.getChartInteractionZoomByWheel()&&t.vt(t.ft.mi(t.getInterval().start,-o.y),t.ft.mi(t.getInterval().end,o.y),!1,!0,"interactionZoom")})),jt(r),this.Fk=!0}},this.Vk=(t,i,s,e)=>{this.Ik=!1,this.Fk=!1},this.Ok=(t,i,s)=>{(this.rk||this.hk)&&(this.Pk(t,i),jt(s))},this.Nk=(t,i,s,e,h)=>{(this.rk||this.hk)&&(this.Dk(t,i,s),jt(h))},this.Gk=(t,i,s,e)=>{(this.rk||this.hk)&&(this.Lk(t,i,s),jt(e))},this.cs.Gn(fo.pf),this.setPadding({right:24}),this.Wk=i.Ax("chartXY series bg",Vc.seriesBackground),this.Uk=[Vc.gridLine0,Vc.gridLine1,Vc.gridLine2].map((t=>i.Yk(`chartXY gridline #${t}`,t))),this.KA=i.Yk("chartXY highlighters below",Vc.highlightersBelow),this.Wx=i.Um("chartXY plotting",Oc.plotting),this.qA=i.Um("chartXY highlighters above",Oc.highlightersAbove),this.bA=i.Um("chartXY fg",Oc.fg),this.sk.x.K(0,this.uiScale.x.getCellSize()-(this.jt.left+this.jt.right+this.ya.left+this.ya.right)),this.sk.y.K(0,this.uiScale.y.getCellSize()-(this.jt.bottom+this.jt.top+this.ya.bottom+this.ya.top)),this.sk.tt(this.uiScale.ai().x,this.uiScale.ai().y),this.IS=this.Wk.Te(this.sk).ke(this.ts.chartXYSeriesBackgroundFillStyle).Ce(rt),this.PS=this.bA.Te(this.sk).ke(z).Ce(this.ts.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.FS(this.IS,this.PS),this.setSeriesBackgroundEffect(!1),this.Hm=i.$m();const o=It(r?r.autoCursorBuilder:void 0,du);this.Fp=o.am(this.Hm,this.sk,this.sk,this.ts),oa.Ip(this),this.RS(((t,i)=>{oa.Pp(this,i)})),this.addAxisX(r&&r.defaultAxisX),this.addAxisY(r&&r.defaultAxisY),this.onResize(this.Ck),this.bp.Eh("ChartXY"),this.rS=Hs(new Xs(this.Ok,this.Nk,this.Gk,1),new js(this.Ek,this.zk,this.Vk)),this.onSeriesBackgroundMouseEnter(this.YM),this.onSeriesBackgroundMouseLeave(this.HM),this.onSeriesBackgroundMouseWheel(this.eS),this.onSeriesBackgroundMouseDragStart(this.$M),this.onSeriesBackgroundMouseDrag(this.hS),this.onSeriesBackgroundMouseDragStop(this.XM),this.onSeriesBackgroundTouchStart(this.rS.onTouchStart),this.onSeriesBackgroundTouchMove(this.rS.onTouchMove),this.onSeriesBackgroundTouchEnd(this.rS.onTouchEnd),this.setAnimationsEnabled(!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled)),this.mp(h,this.sk)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.MS}setAutoCursor(t){return this.Fp&&t(this.Fp),this.cs.vs(),this}getAutoCursor(){return this.Fp}setAutoCursorMode(t){return this.Vm=t,this.cs.vs(),this}getAutoCursorMode(){return this.Vm}solveNearest(t){const i=t||this.cs.Nn();if(i)return oa.$c(this,ao(i,this.cs),this.MS)}getMinimumSize(){const t={x:0,y:0};t.x+=this.jt.left+this.jt.right+this.ya.left+this.ya.right,t.y+=this.jt.top+this.jt.bottom+this.ya.top+this.ya.bottom;const i=this.bp.Ds().Zc(),s=S(Uc(this.Mk||Wc),this.Sp);return t.x+=i.x+s.left+s.right,t.y+=i.y+s.top+s.bottom,this.Hk&&(t.x+=this.Hk.left,t.x+=this.Hk.right,t.y+=this.Hk.top,t.y+=this.Hk.bottom),t.x+=Dc.x,t.y+=Dc.y,t}addChartMarkerXY(t=fu,i,s){const e=this.np(),h=new Su(e,this.uiScale,i||this.getDefaultAxisX(),s||this.getDefaultAxisY(),t,this.ip(e),this.ts);return this.Ap(h),h}addAxisX(t){var i,s;const{opposite:e,type:h}=lo(t);let r;r="linear"===h.type?this.ep.d1({dimension:"x",scale1DConstructor:Ps}):"linear-highPrecision"===h.type?this.ep.d1({dimension:"x",scale1DConstructor:Ps})._i():this.ep.d1({dimension:"x",scale1DConstructor:bs}).gi(h.base),r.tt(this.sk.x.ai());const n=e?this.Og:this.Ng,o=new go(this.Uk,this.bA,this.vp,this.KA,this.qA,this.cs.hs,r,this.sk.y,(a=()=>o.wg(),{...po,..._c(a)}),this,e?100:0,this.tg,this.kk,this.ts,this.ih,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iStack:u,iParallel:l}),this.cs.vs(),o}addAxisY(t){var i,s;const{opposite:e,type:h}=lo(t);let r;r="linear"===h.type?this.ep.d1({dimension:"y",scale1DConstructor:Ps}):"linear-highPrecision"===h.type?this.ep.d1({dimension:"y",scale1DConstructor:Ps})._i():this.ep.d1({dimension:"y",scale1DConstructor:bs}).gi(h.base),r.tt(this.sk.y.ai());const n=e?this.Gg:this.Wg,o=new go(this.Uk,this.bA,this.vp,this.KA,this.qA,this.cs.hs,r,this.sk.x,(a=()=>o.wg(),{...mo,...wc(a)}),this,e?100:0,this.tg,this.kk,this.ts,this.ih,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iParallel:l,iStack:u}),this.cs.vs(),o}swapAxes(t,i){const s=[this.Ng,this.Wg,this.Gg,this.Og],e=s.find((i=>void 0!==i.find((i=>i.axis===t)))),h=s.find((t=>void 0!==t.find((t=>t.axis===i))));if(!e||!h)return this;if(e!==h)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const r=e.find((i=>i.axis===t)),n=e.find((t=>t.axis===i));if(!r||!n)return this;const o=r.iParallel,a=r.iStack;return r.iParallel=n.iParallel,r.iStack=n.iStack,n.iParallel=o,n.iStack=a,this.cs.vs(),this}dispose(){return this.Fp.dispose(),this.Wk.U(),this.Wx.U(),this.bA.U(),this.Uk.forEach((t=>t.U())),this.qA.U(),this.KA.U(),this.Hm.U(),this.OC().forEach((t=>t.dispose())),ia(this.sk),this.Ng.slice().forEach((t=>t.axis.dispose())),this.Wg.slice().forEach((t=>t.axis.dispose())),this.Gg.slice().forEach((t=>t.axis.dispose())),this.Og.slice().forEach((t=>t.axis.dispose())),this.MS.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.Ng,...this.Og].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.Wg,...this.Gg].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):Lc;return Ft(Array.from(i).map((t=>{switch(t){default:case exports.AxisPosition.Top:return this.Og.map((t=>t.axis));case exports.AxisPosition.Bottom:return this.Ng.map((t=>t.axis));case exports.AxisPosition.Left:return this.Wg.map((t=>t.axis));case exports.AxisPosition.Right:return this.Gg.map((t=>t.axis))}})))}$k(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.Ng.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.Og.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}forEachAxisY(t){this.Wg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.Gg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}setTitlePosition(t){return this.Mk=t,this.cs.vs(),this}getTitlePosition(){return this.Mk}Xk(t,i,s,e){const h=this.Mk||Wc;let r,n=S(Uc(h),this.Sp);this.getTitleFillStyle()===z||0===this.getTitle().length?(r={x:0,y:0},n={left:0,top:0,right:0,bottom:0}):r=this.bp.Ds().Zc();const o=Math.abs(e)+this.ya.bottom+this.jt.bottom,a=Math.abs(s)+this.ya.top+this.jt.top,l={left:Math.abs(t)+this.ya.left+this.jt.left,right:Math.abs(i)+this.ya.right+this.jt.right,top:a,bottom:o},u=this.uiScale.Ui(),{horizontalAlignment:c,verticalAlignment:d,position:f,marginsWithTitle:A}=Yc(h,u,l,r,n,this.ya);return this.bp.Ie(f).Ba(c).Ra(d),A}Fe(t){super.Fe(t);for(const t of this.MS)t.aS();for(const t of this.MS)t.Fe();const i=this.Wg.map((t=>t.axis._r().Ds())),s=this.Ng.map((t=>t.axis._r().Ds())),e=this.Og.map((t=>t.axis._r().Ds())),h=this.Gg.map((t=>t.axis._r().Ds()));let r=!1;this.forEachAxis((t=>{(t.Tr()||t.Fr())&&(r=!0)}));const n=this.Fk||this.Ik||!this.lk&&r;oa.Tp(this,this.IS.getIsUnderMouse(),n,this.MS,(t=>oa.$c(this,t,this.MS)),((t,i)=>t.$c(i,!0)));const o=Hc(this.Wg,i),a=Hc(this.Ng,s),u=Hc(this.Og,e),c=Hc(this.Gg,h),d=this.Xk(o.thicknessTotal,c.thicknessTotal,u.thicknessTotal,a.thicknessTotal),f=this.sk.x.getCellSize()-(d.left+d.right),A=this.sk.y.getCellSize()-(d.bottom+d.top),p=[d.left,d.right],m=[d.bottom,d.top];this.sk.x.K(0,f),this.sk.y.K(0,A),this.sk.x.ei(p),this.sk.y.ei(m);const y=(t,i,s,e)=>{let h=0;t.groups.forEach((t=>{let r=0;const n=t.stacks.reduce(((t,i)=>Math.max(t,i.Tg)),0),o=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()?i.axis.sA+i.axis.eA:0)),0),a=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"pixels"in i.axis.Vd?i.axis.Vd.pixels:0)),0),l=i-o-a;t.stacks.forEach((e=>{const o=e.axis,a=o.getVisible(),u=Math.max(i-r,0),c=Math.min(a?"pixels"in o.Vd?o.Vd.pixels:o.Vd.relative/t.sumRelativeSize*l:0,u),d=a?s[0]+r+o.sA:0,f=a?s[1]+(i-r)-c-o.sA:0;o.ft.ei([d,f]),o.Fe({Tg:n,Fg:e.Fg,Dg:c,jk:r,Vg:n+e.Fg,Lg:h}),a&&(r+=c+o.sA+o.eA)})),h+=e*t.thicknessMax}))};y(o,A,m,-1),y(c,A,m,1),y(a,f,p,-1),y(u,f,p,1),this.Hk={left:o.thicknessTotal,top:u.thicknessTotal,right:c.thicknessTotal,bottom:a.thicknessTotal},this.IS.Ie(l(0,0)).tt(l(f,A)),this.PS.Ie(l(0,0)).tt(l(f,A));const S=g(this.sk.x.hi(),this.sk.y.hi(),this.sk.x.ni(),this.sk.y.ni());this.Wx.tx(S),this.KA.tx(S),this.qA.tx(S),this.Qg&&this.Qg(),this.Ng.forEach((t=>t.axis.Ug())),this.Og.forEach((t=>t.axis.Ug())),this.Wg.forEach((t=>t.axis.Ug())),this.Gg.forEach((t=>t.axis.Ug())),super.pp();for(const t of this.MS)t.Ay()}Z(){for(let t=0;t<this.Ng.length;t+=1)this.Ng[t].axis.Z();for(let t=0;t<this.Og.length;t+=1)this.Og[t].axis.Z();for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].axis.Z();for(let t=0;t<this.Gg.length;t+=1)this.Gg[t].axis.Z();return super.Z()}Tk(t){if(this.ek.has(t))return this.ek.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);let e=yc.freeform;t&&t.dataPattern&&(e="ProgressiveX"===t.dataPattern.pattern?yc.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?yc.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?yc.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?yc.verticalRegressive:yc.freeform);const h=new Cc(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,e,this.ts,this.cs.hs,Ya(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,t);return this.DS(h),h}addPointLineAreaSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);const e=new Fc(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,t);return this.DS(e),e}addPointSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);const e=t&&t.pointShape&&Object.values(exports.PointShape).includes(t.pointShape)?"string"==typeof t.pointShape?exports.PointShape[t.pointShape]:t.pointShape:exports.PointShape.Square,h=new kc(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,e,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,t);return this.DS(h),h}addPointLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);const e=t&&t.pointShape&&Object.values(exports.PointShape).includes(t.pointShape)?"string"==typeof t.pointShape?exports.PointShape[t.pointShape]:t.pointShape:exports.PointShape.Square;let h=yc.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?yc.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?yc.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?yc.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?yc.verticalRegressive:yc.freeform);const r=new hc(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,h,e,this.ts,this.cs.hs,Ya(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,t);return this.DS(r),r}addStepSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);const e=t&&t.pointShape?t.pointShape:exports.PointShape.Square,h=t&&t.mode?t.mode:exports.StepOptions.before,r=new Sc(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,e,h,this.ts,this.cs.hs,Ya(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,t);return this.DS(r),r}addSplineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);const e=t&&t.pointShape?t.pointShape:exports.PointShape.Square;let h=yc.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?yc.horizontalProgressive:"RegressiveX"===t.dataPattern.pattern?yc.horizontalRegressive:yc.freeform);const r=new oc(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,h,e,this.ts,this.cs.hs,Ya(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,t);return this.DS(r),r}addRectangleSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);const e=new Eu(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length);return this.DS(e),e}addPolygonSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),e=new Lu(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length);return this.DS(e),e}addSegmentSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);const e=new Vu(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length);return this.DS(e),e}addEllipseSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);const e=new Du(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length);return this.DS(e),e}addBoxSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);const e=t&&t.dimensionStrategy?t.dimensionStrategy:po,h=new Iu(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,e,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length);return this.DS(h),h}addHeatmapGridSeries(t){const i=t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t.yAxis?t.yAxis:this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new Gu(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,t,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length),this.DS(e),e}addHeatmapScrollingGridSeries(t){const i=t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t.yAxis?t.yAxis:this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new Uu(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,t,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length),this.DS(e),e}addOHLCSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();zc(i,s);const e=new(t&&t.type?t.type:Mc.Candlesticks)(this,this.wS,this.Wx,i,s,this.Tk(i),this.Tk(s),this.np,this.ts,this.cs.hs);return this.DS(e),e}addOnScreenMenu(t,i){return new Tc(this.dA,t,this,i)}setMouseBackgroundStyle(t=exports.MouseStyles.Default){return this.yk=t,this}setMouseZoomStyle(t=exports.MouseStyles.ZoomIn){return this.vk=t,this}setMouseFitStyle(t=exports.MouseStyles.Default){return this.xk=t,this}setMousePanStyle(t=exports.MouseStyles.Move){return this.Sk=t,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.hk=t,this}getMouseInteractionRectangleZoom(){return this.hk}setMouseInteractionRectangleFit(t){return this.rk=t,this}getMouseInteractionRectangleFit(){return this.rk}setMouseInteractionPan(t){return this.ak=t,this}getMouseInteractionPan(){return this.ak}setMouseInteractionWheelZoom(t){return this.nk=t,this}getMouseInteractionWheelZoom(){return this.nk}setZoomingRectangleFillStyle(t){return this.Ak="function"==typeof t?t(this.Ak):t,this.cs.vs(),this}getZoomingRectangleFillStyle(){return this.Ak}setZoomingRectangleStrokeStyle(t){return this.gk="function"==typeof t?t(this.gk):t,this.cs.vs(),this}getZoomingRectangleStrokeStyle(){return this.gk}setFittingRectangleFillStyle(t){return this.pk="function"==typeof t?t(this.pk):t,this.cs.vs(),this}getFittingRectangleFillStyle(){return this.pk}setFittingRectangleStrokeStyle(t){return this.mk="function"==typeof t?t(this.mk):t,this.cs.vs(),this}getFittingRectangleStrokeStyle(){return this.mk}addLegendBox(t,i){const s=super.addLegendBox(t,i);if(void 0===i||i===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(we.RightCenter).setPosition({x:this.uiScale.x.ct(this.uiScale.x.ri()-this.ya.right),y:ut(this.sk.y.ct(this.sk.y.hi()+this.sk.y.ni()/2),this.sk.y,this.uiScale.y)});else{const t=this.Mk||Wc,i=Yc(t,this.uiScale.Ui(),this.ya,this.getTitleFillStyle()===z||0===this.getTitle().length?{x:0,y:0}:this.bp.Ds().Zc(),S(Uc(t),this.Sp),this.ya).marginsWithTitle.top;s.setOrigin(we.RightTop).setPosition(ct({x:this.pixelScale.x.getInnerEnd()-this.ya.right,y:this.pixelScale.y.getInnerEnd()-i},this.pixelScale,this.uiScale))}return s}Pk(t,i){this.forEachAxis(Rc);const s=ct(this.engine.clientLocation2Engine(i.x,i.y),this.vp.cs.ft,this.sk);this.ck.Ie(s).tt(l(0,0))}Dk(t,i,s){const e=ct(this.engine.clientLocation2Engine(i.x,i.y),this.vp.cs.ft,this.sk),h=ct(this.engine.clientLocation2Engine(s.x,s.y),this.vp.cs.ft,this.sk),r=Ui(h.x,this.sk.x.getInnerStart(),this.sk.x.getInnerEnd())&&Ui(h.y,this.sk.y.getInnerStart(),this.sk.y.getInnerEnd()),n=l(Math.min(e.x,h.x),Math.min(e.y,h.y)),o=l(Math.max(e.x,h.x),Math.max(e.y,h.y));this.ck.Ie(n).tt(ns(o,n));const a=Math.min(o.x-n.x,o.y-n.y)>=10;r&&a&&o.x===e.x&&this.rk?(this.Fk=!0,this.ck.ke(this.pk).Ce(this.mk),this.dk.Ee(this.mk).Oe(e).Ve(h),this.fk.Ee(this.mk).Oe(l(e.x,h.y)).Ve(l(h.x,e.y)),this.bk=this.engine.setMouseStyle(this.xk,this.bk)):r&&a&&(this.hk||this.rk)?(this.Fk=!0,this.ck.ke(this.Ak).Ce(this.gk),this.dk.Ee(rt),this.fk.Ee(rt),this.bk=this.engine.setMouseStyle(this.vk,this.bk)):(this.Fk=!1,this.ck.Ce(rt).ke(z),this.dk.Ee(rt),this.fk.Ee(rt),this.engine.restoreMouseStyle(this.bk)),this.cs.vs()}Lk(t,i,s){if(this.Fk){const t=ct(this.engine.clientLocation2Engine(s.x,s.y),this.vp.cs.ft,this.sk),e=Ui(t.x,this.sk.x.getInnerStart(),this.sk.x.getInnerEnd())&&Ui(t.y,this.sk.y.getInnerStart(),this.sk.y.getInnerEnd()),h=s.x>=i.x||!this.rk?"zoom":"fit",r=this.ck.Ia(),n=rs(r,this.ck.ai()),o=Math.min(this.ck.ai().x,this.ck.ai().y)>=10;e&&o&&"zoom"===h&&this.hk?(this.forEachAxisX((t=>{if(t.getChartInteractionZoomByDrag()){const i=ct(r,this.sk,t.og).x,s=ct(n,this.sk,t.og).x;t.vt(i,s,!0,!0,"interactionSetInterval")}})),this.forEachAxisY((t=>{if(t.getChartInteractionZoomByDrag()){const i=ct(r,this.sk,t.og).y,s=ct(n,this.sk,t.og).y;t.vt(i,s,!0,!0,"interactionSetInterval")}}))):e&&o&&"fit"===h&&this.rk&&this.forEachAxis(Ec)}this.ck.Ce(rt).ke(z),this.dk.Ee(rt),this.fk.Ee(rt),this.cs.vs()}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}Bk(t){this.forEachAxisX((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(Rc),this.forEachAxisX((s=>{s.zoom(s.ft.ct(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.ft.ct(t.y),i.y)}))}Rk(t,i){this.forEachAxisX((s=>{s.getChartInteractionZoomByWheel()&&(Rc(s),s.zoom(s.ft.ct(t.x),i.x))})),this.forEachAxisY((s=>{s.getChartInteractionZoomByWheel()&&(Rc(s),s.zoom(s.ft.ct(t.y),i.y))}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}Qd(){const t=[];return this.forEachAxis((i=>i.xg((i=>t.push(i))))),super.Qd().concat(t)}OC(){return this.uk}me(){return this._p(this.Wx)}setAutoCursorEnabledDuringAxisAnimation(t){return this.lk=t,this}getAutoCursorEnabledDuringAxisAnimation(){return this.lk}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,h=i,r=yo(h)?h:Os(h)?this.pixelScale:void 0;if(r&&zs(s)){const t=ct(e,r,this.engine.scale);return this.cs.Bo({engineX:t.x,engineY:t.y})}if(r&&Os(s))return ct(e,r,this.pixelScale);if(r&&yo(s))return ct(e,r,s)}else{const s=t;if(Os(i)){const t=this.cs.Do(s);return ct({x:t.engineX,y:t.engineY},this.engine.scale,this.pixelScale)}if(yo(i)){const t=i,e=this.cs.Do(s);return ct({x:e.engineX,y:e.engineY},this.engine.scale,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}exports.ChartXYTitlePositionOptions=void 0,(Nc=exports.ChartXYTitlePositionOptions||(exports.ChartXYTitlePositionOptions={})).CenterTop="center-top",Nc.RightTop="right-top",Nc.LeftTop="left-top",Nc.CenterBottom="center-bottom",Nc.RightBottom="right-bottom",Nc.LeftBottom="left-bottom",Nc.SeriesCenterTop="series-center-top",Nc.SeriesRightTop="series-right-top",Nc.SeriesLeftTop="series-left-top",Nc.SeriesCenterBottom="series-center-bottom",Nc.SeriesRightBottom="series-right-bottom",Nc.SeriesLeftBottom="series-left-bottom";const Wc=exports.ChartXYTitlePositionOptions.CenterTop,Uc=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return xi(0,`Unexpected ChartXY title position selection ${t}`)},Yc=(t,i,s,e,h,r)=>{e.x,h.left,h.right;const n=e.y+h.bottom+h.top,o=(h.left-h.right)*i.x,a=(h.bottom-h.top)*i.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(r.top+h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:s.left*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-s.right*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:s.left*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-s.right*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s}}return xi(0,`Unexpected ChartXY title position selection ${t}`)},Hc=(t,i)=>{const s=[];t.forEach(((t,e)=>{const h=i[e],r=s.find((i=>i.iParallel===t.iParallel));r?(r.stacks.push({...t,...h}),r.stacks.sort(((t,i)=>t.iStack-i.iStack))):s.push({iParallel:t.iParallel,stacks:[{...t,...h}]})}));const e=s.map((t=>{const i=t.stacks.reduce(((t,i)=>Math.max(t,i.Tg)),0),s=t.stacks.reduce(((t,i)=>Math.max(t,i.Fg)),0),e=t.stacks.reduce(((t,i)=>Math.max(t,i.Od)),0),h=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"relative"in i.axis.Vd?i.axis.Vd.relative:0)),0);return{...t,ticksSizeMax:i,titleSizeMax:s,sumRelativeSize:h,thicknessMax:e}}));return e.sort(((t,i)=>t.iParallel-i.iParallel)),{groups:e,thicknessTotal:e.reduce(((t,i)=>t+i.thicknessMax),0)}};class $c{constructor(t,s,e,h,r,n,o){this.coordsRelative="relative",this.coordsClient="client",this.L=new i.Eventer,this.Zk=[],this.Qk=new Map,this.MS=new Map,this.Jk=(t,i,s)=>{0!==this.MS.size&&void 0!==[...this.MS.values()].find((({series:t})=>!0===t.getVisible()))||this.Kk.vt(i,s,!1,!1,"zoomBandChart"),this.qk.cs.vs()},s.cs.Gn(fo.Af),this.dA=t,this.tT=(null==n?void 0:n.orientation)||"x",this.iT=void 0!==(null==n?void 0:n.useSharedValueAxis)&&n.useSharedValueAxis,this.sT=h,this.Uu="x"===this.tT?po:mo;const a={...n,defaultAxisX:this.Uu.getWidth({x:null==n?void 0:n.defaultAxis,y:void 0}),defaultAxisY:this.Uu.getHeight({x:null==n?void 0:n.defaultAxis,y:void 0})};this.qk=new Gc(t,s,e,Ct,r,a,o).setTitle("Zoom Band Chart").setMouseInteractions(!1).setAutoCursorMode(exports.AutoCursorModes.disabled),this.engine=this.qk.engine;const l=this.qk.getDefaultAxisX().setMouseInteractions(!1),u=this.qk.getDefaultAxisY().setMouseInteractions(!1);this.Kk=this.Uu.getWidth({x:l,y:u}).setScrollStrategy(ze.fitting).setAnimationScroll(!1).setStrokeStyle(rt).setTickStrategy(Ve.Empty),(null==n?void 0:n.useSharedValueAxis)?this.eT=this.Uu.getHeight({x:l,y:u}):this.Uu.getHeight({x:l,y:u}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new G({color:this.getTheme().isDark?M(0,0,0,180):M(255,255,255,180)});this.hT=[this.qk.bA.Te(this.Kk.og).ke(c).Ce(rt),this.qk.bA.Te(this.Kk.og).ke(c).Ce(rt)];const d=this.qk.bA.Rg(this.Kk.og).Ee(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.rT={collection:d,members:new Array(5).fill(0).map((t=>d.Vr()))};const f=this.getTheme(),A="function"==typeof f.zoomBandChartKnobFillStyle?f.zoomBandChartKnobFillStyle(this.dA.Xs):f.zoomBandChartKnobFillStyle||z;this.nT=[this.qk.bA.Te(this.qk.pixelScale).ke(A).Ce(rt),this.qk.bA.Te(this.qk.pixelScale).ke(A).Ce(rt)],this.oT=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.aT()}add(t){var i,s,e,h,r;const n=this.Zk.map((t=>t.axis)),o="x"===this.tT?t.axisX:t.axisY;if(!n.includes(o)){const t=o.onIntervalChange(this.Jk);this.Zk.push({axis:o,deattach:()=>{o.offIntervalChange(t)}}),this.Kk.Xh(o.$h()),this.lT&&this.lT.remove(),this.lT=ft(...this.Zk.map((t=>t.axis)))}const a=this.Uu.getHeight({x:t.axisX,y:t.axisY});let l;if(this.iT)l=this.eT;else{const t=this.Qk.get(a);t?l=t:(l=this.Uu.getHeight({x:this.qk.addAxisX.bind(this.qk),y:this.qk.addAxisY.bind(this.qk)})(),this.uT(l)),this.Qk.set(a,l)}const u=this.Uu.getWidth({x:this.Kk,y:l}),c=this.Uu.getHeight({x:this.Kk,y:l});let d;const f=[],A=(t,i)=>{const s=t=>{if(0!==t.length)if("x"in t[0]){const s=t;i.add(s)}else{const s=t,e=[];for(let t=0;t<s.length;t+=1){const i=s[t];e.push({x:i[0],y:i[4]})}i.add(e)}},e=t.n_();s(e);const h=t.o_(((t,i)=>s(i)));f.push((()=>t.a_(h)));const r=t.l_((()=>i.clear()));f.push((()=>{t.u_(r)}))};if(t instanceof Fc)d=this.qk.addPointLineAreaSeries({...t.Yn,xAxis:u,yAxis:c}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setCurvePreprocessing(t.getCurvePreprocessing()),d.setDataSet(t.ik());else if(t instanceof Cc||t instanceof vc){const s=this.qk.addLineSeries({xAxis:u,yAxis:c,dataPattern:t instanceof Cc?null===(i=t.Yn)||void 0===i?void 0:i.dataPattern:void 0});if(t instanceof Cc)s.setStrokeStyle(t.getStrokeStyle());else{const i=Xc(t);i&&s.setStrokeStyle(i)}A(t,s),d=s}else if(t instanceof ju){const i=this.qk.addAreaSeries({xAxis:u,yAxis:c,baseline:t._w}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());A(t,i),d=i}else if(t instanceof kc){const i=this.qk.addPointSeries({xAxis:u,yAxis:c,pointShape:null===(s=t.Yn)||void 0===s?void 0:s.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Sc){const i=this.qk.addStepSeries({xAxis:u,yAxis:c,pointShape:null===(e=t.Yn)||void 0===e?void 0:e.pointShape,mode:t.Xw}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof oc){const i=this.qk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(h=t.Yn)||void 0===h?void 0:h.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof hc){const i=this.qk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(r=t.Yn)||void 0===r?void 0:r.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof qu){const i=this.qk.addAreaRangeSeries({xAxis:u,yAxis:c}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.n_()),s=t.o_(((t,s)=>i.add(s)));f.push((()=>t.a_(s))),d=i;const e=t.l_((()=>i.clear()));f.push((()=>{t.u_(e)}))}else{if(!(t instanceof Nu))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const i=this.qk.addHeatmapGridSeries({xAxis:u,yAxis:c,...t.I_}),s=()=>{i.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};s(),d=i,t.B_(d);const e=t.E_(((t,s)=>i.invalidateIntensityValues(s))),h=t.L_(s);f.push((()=>{t.z_(e),t.R_(h)}));const r=t.l_((()=>i.clear()));f.push((()=>{t.u_(r)}))}}d.setMouseInteractions(!1);const g=t.onVisibleStateChanged(((t,i)=>{d.setVisible(i)}));f.push((()=>{t.offVisibleStateChanged(g)}));const p=t.onHighlight(((t,i)=>d.setHighlight(i)));f.push((()=>{t.offHighlight(p)}));const m=t.onDispose((()=>{this.disposeSeries(t)}));return f.push((()=>{t.offDispose(m)})),this.MS.set(t,{series:d,clearReferences:()=>f.forEach((t=>t()))}),d}disposeSeries(t){const i=this.MS.get(t);if(i){const{clearReferences:s}=i;s(),this.MS.delete(t),i.series.dispose();const e=this.Uu.getHeight({x:t.axisX,y:t.axisY}),h=this.Qk.get(e);h&&0===h.wg().length&&(this.Qk.delete(e),h.dispose())}const s="x"===this.tT?t.axisX:t.axisY;if(!Array.from(this.MS.keys()).find((t=>s===("x"===this.tT?t.axisX:t.axisY)))){const t=this.Zk.findIndex((t=>t.axis===s));this.Zk[t].deattach(),this.Zk.splice(t,1)}return this}setDefocusOverlayFillStyle(t){return this.hT.forEach((i=>i.ke(t))),this.qk.cs.vs(),this}getDefocusOverlayFillStyle(){return this.hT[0].zh()}setSplitterStrokeStyle(t){return this.rT.collection.Ee(t),this.qk.cs.vs(),this}getSplitterStrokeStyle(){return this.rT.collection.cu()}setKnobFillStyle(t){return this.nT.forEach((i=>i.ke(t))),this.qk.cs.vs(),this}getKnobFillStyle(){return this.nT[0].zh()}setKnobStrokeStyle(t){return this.nT.forEach((i=>i.Ce(t))),this.qk.cs.vs(),this}getKnobStrokeStyle(){return this.nT[0].lo()}setKnobSize(t){return this.oT=t,this.qk.cs.vs(),this}getKnobSize(){return this.oT}getDefaultAxisX(){return this.qk.getDefaultAxisX()}getDefaultAxisY(){return this.qk.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}uT(t){t.setTickStrategy(Ve.Empty).setMouseInteractions(!1).setNibStyle(rt).setStrokeStyle(rt)}aT(){let t;const i=(t,i,s)=>{var e,h;const r="x"===this.tT?null===(e=Array.from(this.MS.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.MS.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Kk.getInterval();Math.abs(this.Kk.ft.dt(t)-this.Kk.ft.dt(i))<10||Math.sign(i-t)!==Math.sign(n.end-n.start)||Math.min(t,i)<Math.min(o.start,o.end)||Math.max(t,i)>Math.max(o.start,o.end)&&Math.max(n.start,n.end)<Math.max(t,i)||r.vt(t,i,s,!0,"zoomBandChart")};this.nT.forEach(((s,e)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(this.Uu.getWidth({x:exports.MouseStyles.Horizontal,y:exports.MouseStyles.Vertical}),t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const h=t=>{var s,h;const r="x"===this.tT?null===(s=Array.from(this.MS.keys())[0])||void 0===s?void 0:s.axisX:null===(h=Array.from(this.MS.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=this.Uu.getWidth(this.qk.translateCoordinate(t,this.qk.coordsAxis)),o=r.getInterval(),a=0===e?n:o.start,l=1===e?n:o.end;i(a,l,!1),jt(t)};s.setMouseDragEventHandler(((t,i,s,e,r)=>h(i)));const r=Hs(new Xs(void 0,((t,i,s,e,r)=>h(r))));s.setTouchStartEventHandler(r.onTouchStart),s.setTouchMoveEventHandler(r.onTouchMove),s.setTouchEndEventHandler(r.onTouchEnd)})),this.qk.onSeriesBackgroundMouseEnter((()=>{t=this.engine.setMouseStyle(exports.MouseStyles.Move,t)})),this.qk.onSeriesBackgroundMouseLeave((()=>{this.engine.restoreMouseStyle(t)}));const s=(t,s)=>{var e,h;const r="x"===this.tT?null===(e=Array.from(this.MS.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.MS.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Kk.ft.mi(n.start,this.Uu.getWidth(t)),a=this.Kk.ft.mi(n.end,this.Uu.getWidth(t));i(o,a,!1),jt(s)};this.qk.onSeriesBackgroundMouseDrag(((t,i,e,h,r)=>s(r,i)));const e=Hs(new Xs(void 0,((t,i,e,h,r)=>s(h,r))));this.qk.onSeriesBackgroundMouseWheel(((t,s)=>{var e,h;const r="x"===this.tT?null===(e=Array.from(this.MS.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.MS.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Kk.getInterval(),a=this.Uu.getWidth(this.qk.translateCoordinate(s,this.qk.coordsAxis)),l=this.Kk.ft.dt(n.start),u=this.Kk.ft.dt(n.end),c=this.Kk.ft.dt(a),d=Tt((c-l)/(u-l),0,1),f=.2*Math.abs(u-l)*r.Ef,A=d*f*-Math.sign(s.deltaY),g=(1-d)*f*Math.sign(s.deltaY),p=Tt(this.Kk.ft.mi(n.start,A),o.start,o.end),m=Tt(this.Kk.ft.mi(n.end,g),o.start,o.end);i(p,m,!1),jt(s)})),this.qk.onSeriesBackgroundTouchStart(e.onTouchStart),this.qk.onSeriesBackgroundTouchMove(e.onTouchMove),this.qk.onSeriesBackgroundTouchEnd(e.onTouchEnd),this.hT.forEach(((s,e)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(exports.MouseStyles.Point,t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const h=t=>{var s,e;const h="x"===this.tT?null===(s=Array.from(this.MS.keys())[0])||void 0===s?void 0:s.axisX:null===(e=Array.from(this.MS.keys())[0])||void 0===e?void 0:e.axisY;if(!h)return;const r=this.Uu.getWidth(this.qk.translateCoordinate(t,this.qk.coordsAxis)),n=h.getInterval(),o=this.Kk.getInterval(),a=Tt(r-(n.end-n.start)/2,Math.min(o.start,o.end),Math.max(o.start,o.end)-Math.abs(n.end-n.start)),l=a+(n.end-n.start);i(a,l,!0),jt(t)};s.setMouseClickEventHandler(((t,i)=>h(i)));const r=Hs(new class{constructor(t,i=300){this.Bs=!1,this.Ls=[],this.Rs=300,this.Es=t,this.Rs=i}Ps(t,i){const s=xt.performance.now();let e=!1;for(let t=0;t<this.Ls.length;t+=1)s-this.Ls[t].time>=this.Rs?(this.Ls.splice(t,1),t-=1):this.Ls[t].state&&(e=!0);return this.Bs?0===i.interactions.length&&(this.Ls.push({state:!1,time:s}),this.Bs=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Ls.push({state:!0,time:s}),e=!0,this.Bs=!0),e}Ds(t,i,s){if(s&&!this.Bs){const s=this.Ls.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=1&&s.off>=1&&(this.Es(t,i),this.Ls.length=0)}}}(((t,i)=>h(i))));s.setTouchStartEventHandler(r.onTouchStart),s.setTouchMoveEventHandler(r.onTouchMove),s.setTouchEndEventHandler(r.onTouchEnd)}))}getSizePixels(){return this.qk.getSizePixels()}onResize(t){return this.qk.onResize(((i,s,e,h,r)=>t(this,s,e,h,r)))}offResize(t){return this.qk.offResize(t)}Ir(t){this.qk.Ir(t)}getMinimumSize(){return this.qk.getMinimumSize()}Z(){return this.qk.Z()}J(){return this.qk.J()}Fe(t){var i,s,e,h;const r=mi(Array.from(this.MS.keys()).map((t=>t.chart))),n="x"===this.tT?null===(i=Array.from(this.MS.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this.MS.keys())[0])||void 0===s?void 0:s.axisY;if("x"===this.tT){const t=r.reduce(((t,i)=>{let s=0;return i.forEachAxisY((t=>{s+=0===t.eg?t.Yg():0})),Math.max(t,s)}),0),i=r.reduce(((t,i)=>{let s=0;return i.forEachAxisY((t=>{s+=100===t.eg?t.Yg():0})),Math.max(t,s)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=r.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);null===(e=this.getDefaultAxisY())||void 0===e||e.setThickness(t),this.qk.setPadding({left:s+(0===r.length?10:0),right:h+i+(0===r.length?10:0)})}else{const t=r.reduce(((t,i)=>{let s=0;return i.forEachAxisX((t=>{s+=0===t.eg?t.Yg():0})),Math.max(t,s)}),0),i=r.reduce(((t,i)=>{let s=0;return i.forEachAxisX((t=>{s+=100===t.eg?t.Yg():0})),Math.max(t,s)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),e=r.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);null===(h=this.getDefaultAxisX())||void 0===h||h.setThickness(t),this.qk.setPadding({bottom:s+(0===r.length?10:0),top:e+i+(0===r.length?10:0)})}this.qk.Fe(t);const o=this.Kk.getInterval().start,a=this.Kk.getInterval().end,l=Tt(n?n.getInterval().start:o,o,a),u=Tt(n?n.getInterval().end:a,o,a),c=this.Uu.getHeight(this.qk.sk.getInnerIntervalPixels());this.hT[0].Ie(this.Uu.toPoint(o,0)).tt(this.Uu.toPoint(l-o,c)),this.hT[1].Ie(this.Uu.toPoint(u,0)).tt(this.Uu.toPoint(a-u,c)),this.rT.members[0].zg(this.Uu.toPoint(o,c),this.Uu.toPoint(l,c)),this.rT.members[1].zg(this.Uu.toPoint(l,c),this.Uu.toPoint(l,0)),this.rT.members[2].zg(this.Uu.toPoint(l,0),this.Uu.toPoint(u,0)),this.rT.members[3].zg(this.Uu.toPoint(u,0),this.Uu.toPoint(u,c)),this.rT.members[4].zg(this.Uu.toPoint(u,c),this.Uu.toPoint(a,c));const d=ct(this.Uu.toPoint(l,c/2),this.Kk.og,this.qk.pixelScale),f=ct(this.Uu.toPoint(u,c/2),this.Kk.og,this.qk.pixelScale),A=this.oT;this.nT[0].Ie({x:d.x-A.x/2,y:d.y-A.y/2}).tt({x:A.x,y:A.y}).Gh(this.Uu.getWidth({x:0,y:90})),this.nT[1].Ie({x:f.x-A.x/2,y:f.y-A.y/2}).tt({x:A.x,y:A.y}).Gh(this.Uu.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.qk.setSeriesBackgroundFillStyle(t),this.qk.cs.vs(),this}getSeriesBackgroundFillStyle(){return this.qk.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.qk.setSeriesBackgroundStrokeStyle(t),this.qk.cs.vs(),this}getSeriesBackgroundStrokeStyle(){return this.qk.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.qk.setSeriesBackgroundEffect(t),this.qk.cs.vs(),this}getSeriesBackgroundEffect(){return this.qk.getSeriesBackgroundEffect()}getTheme(){return this.qk.getTheme()}setTitle(t){return this.qk.setTitle(t),this}getTitle(){return this.qk.getTitle()}setTitleFillStyle(t){return this.qk.setTitleFillStyle(t),this}getTitleFillStyle(){return this.qk.getTitleFillStyle()}setTitleFont(t){return this.qk.setTitleFont(t),this}getTitleFont(){return this.qk.getTitleFont()}setTitleMargin(t){return this.qk.setTitleMargin(t),this}getTitleMargin(){return this.qk.getTitleMargin()}setPadding(t){return this.qk.setPadding(t),this}getPadding(){return this.qk.getPadding()}setBackgroundFillStyle(t){return this.qk.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.qk.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.qk.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.qk.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return qo(t,i,s,this.qk.pixelScale,this.qk.cs)}addUIElement(t,i){return this.qk.addUIElement(t,i)}addLegendBox(t,i){return this.qk.addLegendBox(t,i)}getLegendBoxes(){return this.qk.getLegendBoxes()}saveToFile(t,i,s){return this.qk.saveToFile(t,i,s),this}dispose(){return this.qk.dispose(),this.Qk.clear(),this.MS.clear(),this.sT(this),this}isDisposed(){return this.qk.isDisposed()}onDispose(t){return this.qk.onDispose((()=>t(this)))}offDispose(t){return this.qk.offDispose(t)}}const Xc=t=>{if("getStrokeStyle"in t)return t.getStrokeStyle();const i=(t=>t instanceof Cc||t instanceof ju?t.getStrokeStyle().getFillStyle():t instanceof kc||t instanceof hc?t.getPointFillStyle():void 0)(t);return i?new Qs({thickness:2,fillStyle:i}):void 0};class jc extends jl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Ms="Point Series",this.Ob=[],this.Nb=!1,this.$b=3,this.ga=0,this.Om=Zl,this.be=di(this.ts.polarPointSeriesFillStyle,r),this.ad=new un({dataPattern:null}),this.Ga=t.fd(e).Ee(rt).dd(z).ud(this.be).Ad(exports.PointShape.Circle).Sd(this.$b).ds(this.getHighlight()).ld(this.ad),this.fs(this.Ga)}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}setData(t){return 0!==this.Ob.length&&this.Ki.cs.Gn(fo.xf),this.Ob=Kl(t),this.Nb=!0,this.Lb=Jl(this.Ob),this.Ts.vs(),this}setPointAlignment(t){return this.Ga.KC(t),this.Ki.cs.vs(),this}getPointAlignment(){return this.Ga.qC()}setPointFillStyle(t){this.be="function"==typeof t?t(this.be):t;const i=this.be;return this.Ga.ud(i),this.Ts.vs(),this}getPointFillStyle(){return this.be}setPointSize(t){return this.$b=t,this.Ga.Sd(t),this.Ts.vs(),this}getPointSize(){return this.$b}setPointShape(t){return this.Ga.Ad(t),this.Ki.cs.vs(),this}getPointShape(){return this.Ga.gd()}setPointRotation(t){return this.ga=t,this.Ga.pd(t),this.Ts.vs(),this}getPointRotation(){return this.ga}qy(){return this.iS&&this.Ob.length>0&&this.getVisible()}Pe(t,i){t.ds(i),this.Ts.vs()}$c(t,i){const s=ct(t,this.Ki.cs.ft,this.scale),e=this.ad.$c(s,!1,this.scale,this.Ki.pixelScale);if(!e)return;const{angle:h,amplitude:r}=ql(e,this.scale);return Ia(e,this.scale,this.Om(new Aa,this,h,r,this.Ki.getAmplitudeAxis().formatValue).Qu(),this,"color"in e&&void 0!==e.color&&Y(this.be)?new G({color:C(e.color)}):this.be)}solveNearestFromScreen(t){return this.$c(ao(t,this.Ki.cs),!1)}Fe(){if(this.Nb||this.scale.Hb()){const t=Ql(this.Ob,this.scale),i=ji(t);this.ad.clear().add(t),this.Ga.Ho(i),this.Nb=!1,this.Ga.Ds()}}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{fill:this.be}),this}ks(){return this.bs||this.getPointShape()}}class Zc{constructor(t,s,e,h){this.L=new i.Eventer,this.cT=!1,this.Ki=t,this.dT=s,this.MS=e,this.Ga=h}setGeometry(t){return this.fT=t,this.cT=!0,this.Ki.cs.vs(),this}getGeometry(){return this.fT}setMouseInteractions(t){return this.Ga.setMouseInteractions(t),this}dispose(){return this.Ga.dispose(),this.dT(this),this.L.emit("dispose",this),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){const i=this.Ga.getVisible()!==t;return this.Ga.setVisible(t),i&&this.L.emit("visibleStateChanged",this,t),this.Ki.cs.vs(),this}getVisible(){return this.Ga.getVisible()}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}class Qc extends jl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Ms="Polygon Series",this.AT=[],this.gT=[],this.Om=Zl,this.pT=t=>{const i=this.gT.indexOf(t);i>=0&&this.gT.splice(i,1);const s=this.AT.findIndex((i=>i===t.Ga));s>=0&&this.AT.splice(s,1),this.Ts.vs()},this.be=di(this.ts.polarPolygonSeriesFillStyle,r),this.Me=di(this.ts.polarPolygonSeriesStrokeStyle,r)}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}addPolygon(){const t=new Zc(this.Ki,this.pT,this,this.mT());return this.gT.push(t),t}setFillStyle(t){this.be="function"==typeof t?t(this.be):t;const i=this.be;for(const t of this.AT)t.ke(i);return this.Ts.vs(),this}getFillStyle(){return this.be}setStrokeStyle(t){this.Me="function"==typeof t?t(this.Me):t;const i=this.Me;for(const t of this.AT)t.Ce(i);return this.Ts.vs(),this}getStrokeStyle(){return this.Me}qy(){return this.iS&&void 0!==this.gT.find((t=>void 0!==t.yT))&&this.getVisible()}Fe(){this.gT.forEach((t=>{(t.cT||this.scale.Hb())&&t.ST&&(t.Ga.Sl(Ql(t.ST,this.scale)),t.cT=!1,t.Ga.Ds())}))}aS(){super.aS();const t=A(Di,Bi);this.gT.forEach((i=>{if(!i.fT)return;const s=!i.cT&&i.ST?i.ST:Kl(i.fT);i.ST=s;const e=!i.cT&&i.yT?i.yT:Jl(s);i.yT=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.Lb=t}Pe(t,i){t.ds(i),this.Ts.vs()}$c(t,i){const s=ku(t,this.AT,((t,i)=>{const s=t.$c(i);if(s)return ct(s,this.scale,t.cs.ft)}),Yi);if(!s)return;const e=ct(s[0],s[1].cs.ft,this.scale),h=this.vT(s[1]);if(!h)return;const{angle:r,amplitude:n}=ql(e,this.scale);return{location:e,scale:this.scale,resultTableContent:this.Om(new Aa,this,r,n,this.Ki.getAmplitudeAxis().formatValue).Qu(),owner:this,fillStyle:this.be,polarPolygon:h}}solveNearestFromScreen(t){return this.$c(ao(t,this.Ki.cs),!1)}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{fill:this.be,stroke:this.Me}),this}mT(){const t=this.Ts.sc(this.scale,nr.Simple).ke(this.be).Ce(this.Me).ds(this.getHighlight());return this.AT.push(t),this.fs(t),t}vT(t){return this.gT.find((i=>i.Ga===t))}}class Jc extends jl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Ms="Area Series",this.Ob=[],this.Nb=!1,this.Gb=!1,this.xT=!1,this.Om=Zl,this.be=di(this.ts.polarAreaSeriesFillStyle,r),this.Me=di(this.ts.polarAreaSeriesStrokeStyle,r)}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}setData(t){0!==this.Ob.length&&this.Ki.cs.Gn(fo.xf);const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(kt(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.xT&&(console.warn(`${this.Ms} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.xT=!0),this.Ob=i.progressivePoints,this.Nb=!0,this.Lb=Jl(this.Ob),this.Ts.vs(),this}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Ts.vs(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.Me="function"==typeof t?t(this.Me):t,this.Ts.vs(),this}getStrokeStyle(){return this.Me}setConnectDataAutomaticallyEnabled(t){return this.Gb=t,this.Ts.vs(),this}getConnectDataAutomaticallyEnabled(){return this.Gb}qy(){return this.iS&&this.Ob.length>0&&this.getVisible()}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{fill:this.be,stroke:this.Me}),this}}class Kc extends Jc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.bT=this.Ts.sc(this.scale,nr.Simple).ds(this.getHighlight()),this.fs(this.bT)}Fe(){if(this.Nb||this.scale.Hb()){const t=this.Ob,i=!0===this.Gb?Ql(t.concat((t=>{if(0===t.length)return t;const i=t[0],s=t[t.length-1];if(kt(i.angle,s.angle))return t;const e=1*Math.sign(s.angle-i.angle);let h=0;const r=[];for(let t=s.angle+e;!kt(t%360,i.angle%360);t+=e)if(r.push({angle:t,amplitude:0}),h+=1,h>360)return[];for(let t=0;t<r.length;t+=1)r[t].amplitude=Vr(s.amplitude,i.amplitude,(t+1)/(r.length+1));return r})(t)),this.scale):[...Ql(t,this.scale),{x:0,y:0}];this.bT.Sl(i).ke(this.be).Ce(this.Me),this.Nb=!1,this.bT.Ds()}}Pe(t,i){t.ds(i),this.Ts.vs()}$c(t,i){const s=this.bT.$c(t);if(!s)return;const{angle:e,amplitude:h}=ql(s,this.scale);return Ia(s,this.scale,this.Om(new Aa,this,e,h,this.Ki.getAmplitudeAxis().formatValue).Qu(),this,this.be)}solveNearestFromScreen(t){return this.$c(ao(t,this.Ki.cs),!1)}}class qc extends Bs{constructor(){super(...arguments),this.Wi="RadialScale",this.MT={start:0,end:1},this._T=!1,this.wT=0,this.j=l(0,0),this.CT=[0,0],this.kT=[0,0],this.o=!0,this.xi=!0,this.TT=!0,this.FT=!0,this.IT={x:0,y:0},this.fi={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}Sb(t,i){return t===this.MT.start&&i===this.MT.end||(this.MT={start:t,end:i},this.TT=!0,this.PT()),this}yb(){return this.MT}mb(){return this.MT.end>=this.MT.start}Cb(t){this._T=t,this.FT=!0}Tb(){return!1===this._T}kb(t){this.wT=t,this.FT=!0}Mb(){return this.wT}yi(){return this.xi}wi(){return!1}ut(t,i,s,e){return this.x=new Ps(t.x,i.x,s.x,e?e.x:void 0),this.y=new Ps(t.y,i.y,s.y,e?e.y:void 0),this}Si(){return this.fi}Hb(){return this.TT}DT(){return this.FT}Ui(){return this.IT}Z(){return this.o=!1,this.xi=!1,this.TT=!1,this.FT=!1,this}J(){return this.o=!0,this.xi=!0,this.TT=!0,this.FT=!0,this}tt(t,i){return"object"==typeof t?(this.j.x=t.x,this.j.y=t.y):(this.j.x=t,this.j.y=i),this.PT(),this}zi(t){return this.CT=t,this.PT(),this}Vi(t){return this.kT=t,this.PT(),this}oi(){return l(this.CT[0]+this.CT[1],this.kT[0]+this.kT[1])}ai(){return this.j}PT(){const t=this.MT,i=l(this.x.li(this.j.x),this.y.li(this.j.y)),s=this.CT[0]+this.CT[1],e=this.kT[0]+this.kT[1],h=Math.max(i.x-s,0),r=Math.max(i.y-e,0),n=.5*(h>r?r:h),o=[this.CT[0]+Math.max((h-2*n)/2,0),this.CT[1]+Math.max((h-2*n)/2,0)],a=[this.kT[0]+Math.max((r-2*n)/2,0),this.kT[1]+Math.max((r-2*n)/2,0)],u=Math.abs(t.end-t.start);this.x.tt(this.j.x).ei(o).K(-u,u),this.y.tt(this.j.y).ei(a).K(-u,u),this.IT={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.fi={x:this.x.Si(),y:this.y.Si()},this.J()}mi(t,i){const s=this.Ui();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Yi(t,i,s,e){const h=this.Ui(),r=ss(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class td extends fl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.yp("polarChart bg",0),e,i.cs.ts.polarChartBackgroundFillStyle,i.cs.ts.polarChartBackgroundStrokeStyle,i.cs.ts.polarChartTitleFont,i.cs.ts.polarChartTitleFillStyle,n),this.coordsClient="client",this.Kf=[],this.Lo=!0,this.Vm=exports.AutoCursorModes.onHover,this.BT=(t,i,s,e,h)=>{this.hb.tt(e,h)},this.iA=Kt(this.Kf),this.LT=t=>{this.Kf.push(t)},this.RT=()=>this.MS,this.cs.Gn(fo.df),this.Wk=i.Ax("polarChart series bg",0),this.ET=i.Um("polarChart axis gridlines",0),this.zT=i.Um("polarChart series",1),this.VT=i.Um("polarChart axis lines",2),this.OT=i.Um("polarChart axis ticks",3),this.hb=s.d2({scaleXYConstructor:qc}),this.onResize(this.BT),this.bp.Eh("Polar Chart"),this.IS=this.Wk.Kc(this.hb).ke(this.ts.polarChartSeriesBackgroundFillStyle).Ce(rt).hu(0).Ve(360).au(0),this.PS=this.Wk.Kc(this.hb).ke(z).Ce(this.ts.polarChartSeriesBackgroundStrokeStyle).hu(0).Ve(360).au(0),super.FS(this.IS,this.PS),this.mp(h,this.pixelScale),this.NT=new Ol(this,this.hb,this.ts,!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled),this.ET,this.VT,this.OT,this.hs,this.RT),this.GT=new Gl(this,this.hb,this.ts,!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled),this.ET,this.VT,this.OT,this.hs),this.coordsAxis={axisAmplitude:this.NT,axisRadial:this.GT},this.Hm=i.$m();const o=It(r?r.autoCursorBuilder:void 0,Ta);this.Fp=o.am(this.Hm,this.uiScale,this.uiScale,this.ts),oa.Ip(this),this.RS(((t,i)=>{oa.Pp(this,i)})),this.setAnimationsEnabled(!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled))}getSeries(){return this.MS}setAutoCursor(t){return this.Fp&&t(this.Fp),this.cs.vs(),this}getAutoCursor(){return this.Fp}setAutoCursorMode(t){return this.Vm=t,this.cs.vs(),this}getAutoCursorMode(){return this.Vm}solveNearest(t){const i=t||this.cs.Nn();if(i)return oa.$c(this,ao(i,this.cs),this.MS)}translateCoordinate(t,i,s){if(s){const i=t,e=this.pixelScale,h=s;if(zs(h)){const t=ct(i,e,this.engine.scale);return this.cs.Bo({engineX:t.x,engineY:t.y})}if(Os(h))return i;if(Yl(h)){const t=ct(i,e,this.hb);return ql(t,this.hb)}}else{const s=t,e=i;if(Vs(s)){if(Yl(e)){const t=this.cs.Do(s),i=ct({x:t.engineX,y:t.engineY},this.engine.scale,this.hb);return ql(i,this.hb)}if(zs(e))return s;if(Os(e)){const t=this.cs.Do(s);return ct({x:t.engineX,y:t.engineY},this.cs.ft,this.pixelScale)}}else if(Hl(s)){if(Yl(e))return s;const t=Ql([s],this.hb)[0];if(zs(e)){const i=ct(t,this.hb,this.engine.scale),s={engineX:i.x,engineY:i.y};return this.cs.Bo(s)}if(Os(e))return ct(t,this.hb,this.pixelScale)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new su(this.zT,this,this.wS,this.hb,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,this.cs.hs);return this.DS(i),i}addPointSeries(t){const i=new jc(this.zT,this,this.wS,this.hb,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,this.cs.hs);return this.DS(i),i}addPointLineSeries(t){const i=new eu(this.zT,this,this.wS,this.hb,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,this.cs.hs);return this.DS(i),i}addAreaSeries(t){const i=new Kc(this.zT,this,this.wS,this.hb,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,this.cs.hs);return this.DS(i),i}addPolygonSeries(t){const i=new Qc(this.zT,this,this.wS,this.hb,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.MS.length,this.cs.hs);return this.DS(i),i}addHeatmapSeries(t){const i=new tu(this.zT,this,this.wS,this.hb,this.ts,this.cs.hs,t);return this.DS(i),i}addSector(){const t=new $l(this.zT,this,this.iA,this.hb,this.ts,this.cs.hs);return this.LT(t),t}getAmplitudeAxis(){return this.NT}get amplitudeAxis(){return this.NT}get axisAmplitude(){return this.NT}getRadialAxis(){return this.GT}get radialAxis(){return this.radialAxis}get axisRadial(){return this.radialAxis}Fe(t){var i,s;super.Fe(t),ra.kp(this.bp,this.Sp);for(const t of this.MS)t.aS();this.NT._r(),this.GT._r();for(const t of this.MS)t.Fe();for(let t=1;t<=2;t+=1){const i=this.NT.Fe(),s=this.GT.Fe(),e=ra.Cp(this.bp,this.Sp),h=[this.ya.left+s,this.ya.right+s],r=[this.ya.bottom+s,this.ya.top+s+e];this.hb.zi(h).Vi(r);const n=4;if(!(!this.WT||Math.abs(this.WT.amplitude-i)>=n||Math.abs(this.WT.radial-s)>=n)||1!==t){this.WT={amplitude:i,radial:s};break}}const e=this.hb.yb().start,h=this.hb.yb().end,r=this.hb.mb()?((null===(i=this.WT)||void 0===i?void 0:i.radial)||0)*this.hb.x.getPixelSize()+h-e:((null===(s=this.WT)||void 0===s?void 0:s.radial)||0)*this.hb.x.getPixelSize()+e-h;this.IS.ru(r).lu(360),this.PS.ru(r).lu(360);for(const t of this.Kf)t.Fe();oa.Tp(this,this.IS.getIsUnderMouse(),!1,this.MS,(t=>oa.$c(this,t,this.MS)),((t,i)=>t.$c(i,!0)));for(const t of this.MS)t.Ay();return super.pp(),this.UT(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.NT.setAnimationsEnabled(t),this.GT.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Lo=t,this}getMouseInteractions(){return this.Lo}getMinimumSize(){return l(id,id)}UT(){}forEachAxis(t){return t(this.NT),t(this.GT),this}dispose(){return this.Kf.slice().forEach((t=>t.dispose())),this.Fp.dispose(),this.Wk.U(),this.ET.U(),this.zT.U(),this.VT.U(),this.OT.U(),this.Hm.U(),super.dispose()}Qd(){return[...this.MS,...this.Kf]}}const id=300;class sd extends Ra{}class ed extends sd{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Ms="Slice",this.S=0,this.um=!1,this.YT=z,this.fm=z,this.Am=this.S,this.ym=Z((()=>this.Ki.cs.vs())),this.vm=()=>{this.xm=void 0},this.index=t,this.Ki=e,this.scale=h,this.qi=r,this.bT=i.sc(h,nr.Simple).ds(this.getHighlight()),this.fs(this.bT),this.Ye=s.Dr(h).ds(this.getHighlight()),this.fs(this.Ye,{isText:!0})}setValue(t){return this.Ki.getAnimationsEnabled()?this.getVisible()&&this.wm(this.Am,t):this.Am=t,this.S=t,this.Ki.cs.vs(),this}getValue(){return this.S}setVisible(t){return!1===t?this.Ki.getAnimationsEnabled()&&this.Am>0?(this.xm&&(this.xm.finish(!1),this.xm=void 0),this.wm(this.Am,0,(()=>super.setVisible(!1)))):(this.Am=0,super.setVisible(!1)):this.Ki.getAnimationsEnabled()?(this.xm&&(this.xm.finish(!1),this.xm=void 0),super.setVisible(!0),this.wm(this.Am,this.S)):(this.Am=this.S,super.setVisible(!0)),this}wm(t,i,s){this.xm=this.ym(300,X.ease)([[t,i]],(([t])=>{this.Am=t,this.Ki.cs.vs()})),this.xm.onEveryAnimationEnd(this.vm),s&&this.xm.onAnimationEnd(s)}setStyle(t,i,s,e){this.YT=t,this.fm=s,this.bT.ke(this.YT).Ce(i),this.Ye.ke(this.fm).Nh(e);for(let t=0;t<this.Ji.length;t+=1)this.styleAttachedEntry(this.Ji[t])}getAnimatedValue(){return this.Am}Pe(t,i){return t.ds(i),this.Ki.cs.vs(),this}attach(t,i=!0,s=!1){return super.attach(t,i,s),this.styleAttachedEntry(t,i,s),this}styleAttachedEntry(t,i=!0,s=!1){ai(t,this.ts,s,{fill:this.YT,stroke:this.bT.lo()})}}var hd;exports.FunnelSliceModes=void 0,(hd=exports.FunnelSliceModes||(exports.FunnelSliceModes={}))[hd.VariableHeight=0]="VariableHeight",hd[hd.VariableWidth=1]="VariableWidth";const rd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},nd=(t,i,s,e,h,r=0,n=exports.FunnelSliceModes.VariableHeight,o)=>{i=rd(i,e.x),s=rd(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,p=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;p+=t[i].getAnimatedValue();const o=n===exports.FunnelSliceModes.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-p/l*e.y;if(n===exports.FunnelSliceModes.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const m=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const p=t[g];u+=p.getAnimatedValue();const y=n===exports.FunnelSliceModes.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let S=0;g>0&&(c={x:f.x+m*r,y:f.y-r},d={x:A.x-m*r,y:A.y-r}),S=(i+u/l*(s-i))/2,f={x:o-S,y:parseInt(`${n===exports.FunnelSliceModes.VariableWidth?c.y-y:y}`,10)},A={x:o+S,y:parseInt(`${n===exports.FunnelSliceModes.VariableWidth?d.y-y:y}`,10)},d.x>=c.x&&A.x>f.x&&p.bT.Sl([f,c,d,A])}};class od extends ha{constructor(t,i,s,e,h,r,n){super(t,i,s,i.yp("funnelChart bg",0),e,i.cs.ts.funnelChartBackgroundFillStyle,i.cs.ts.funnelChartBackgroundStrokeStyle,i.cs.ts.funnelChartTitleFont,i.cs.ts.funnelChartTitleFillStyle,r),this.Cm=[],this.km=Da.None,this.Im=!0,this.Bm=0,this.HT=80,this.$T=20,this.XT=0,this.jT=exports.FunnelSliceModes.VariableHeight,this.Em=!0,this.Vm=exports.AutoCursorModes.onHover,this.Om=La,this.Nm=t=>{const i=this.Cm.indexOf(t);i>=0&&(this.Cm.splice(i,1),this.Gm())},this.cs.Gn(fo.lf),this.zm=this.ts.effectsText,this.Wm=i.Um("funnelChart bottom",0),this.Ym=i.Um("funnelChart top",1),this.bp.Eh("Funnel Chart"),this.Tm=this.ts.funnelChartSliceFillStylePalette,this.Fm=this.ts.funnelChartSliceStrokeStyle,this.Pm=this.ts.funnelChartSliceLabelFont,this.Dm=this.ts.funnelChartSliceLabelFillStyle,this.Hm=i.$m();const o=It(n?n.autoCursorBuilder:void 0,ka);this.Fp=o.am(this.Hm,this.uiScale,this.uiScale,this.ts),this.setAnimationsEnabled(!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled)),this.mp(h,this.pixelScale)}setAutoCursor(t){return this.Fp&&t(this.Fp),this.cs.vs(),this}getAutoCursor(){return this.Fp}setAutoCursorMode(t){return this.Vm=t,this.cs.vs(),this}getAutoCursorMode(){return this.Vm}setCursorResultTableFormatter(t){return this.Om=t,this.cs.vs(),this}addSlice(t,i){const s=new ed(this.Bm,this.Wm,this.Ym,this,this.pixelScale,this.Nm,this.ts,this.cs.hs);return this.Bm+=1,s.setName(t),s.setValue(i),s.hs.ns.Ss(this.zm),s.hs.os.Ss(this.Em),this.Cm.push(s),this.cs.vs(),s.setHighlightOnHover(this.Im),s.onMouseMove((()=>{this.Vm&&this.cs.vs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Cm}setHeadWidth(t){return this.HT=t,this.cs.vs(),this}getHeadWidth(){return this.HT}setNeckWidth(t){return this.$T=t,this.cs.vs(),this}getNeckWidth(){return this.$T}setSliceGap(t){return this.XT=Math.min(Math.max(t,0),20),this.cs.vs(),this}setSliceMode(t){return this.jT=t,this.cs.vs(),this}getFunnelSliceMode(){return this.jT}setLUT(t){return this.Gd=t,this.cs.vs(),this}setSliceFillStyle(t){return this.Tm=t,this.cs.vs(),this}getSliceFillStyle(){return this.Tm}setSliceStrokeStyle(t){return this.Fm="function"==typeof t?t(this.Fm):t,this.cs.vs(),this}getSliceStrokeStyle(){return this.Fm}setSliceEffect(t){return this.Em=t,this.Cm.forEach((i=>i.hs.os.Ss(t))),this.cs.vs(),this}getSliceEffect(){return this.Em}setSliceSorter(t){return this.km=t,this.Cm=this.Cm.sort(this.km),this.cs.vs(),this}getSliceSorter(){return this.km}setLabelFillStyle(t){return this.Dm="function"==typeof t?t(this.Dm):t,this.cs.vs(),this}getLabelFillStyle(){return this.Dm}setLabelFont(t){return this.Pm="function"==typeof t?t(this.Pm):t,this.cs.vs(),this}getLabelFont(){return this.Pm}setLabelEffect(t){return this.zm=t,this.Cm.forEach((i=>i.hs.ns.Ss(t))),this.cs.vs(),this}getLabelEffect(){return this.zm}setLabelFormatter(t){return this.jm=t,this.cs.vs(),this}getLabelFormatter(){return this.jm}setSliceHighlightOnHover(t){return this.Im=t,this.Cm.forEach((i=>i.setHighlightOnHover(t))),this}Fe(t){super.Fe(t),ra.kp(this.bp,this.Sp),super.pp();const i=ra.Cp(this.bp,this.Sp),s=l(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+i)),e=l(this.ya.left+s.x/2,this.ya.bottom+s.y/2);this.Cm=this.Cm.sort(this.km);for(let t=0,{length:i}=this.Cm;t<i;t+=1)this.Xm(this.Cm[t],t);const h=this.Cm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const n=[];for(let t=0;t<h.length;t+=1)n.push((o=h[t].getAnimatedValue())>0?o/r:0);var o;for(let t=0;t<h.length;t+=1){const i=h[t];i.Ye.Eh(this.jm(i,n[t])).Ds()}n.push(r),oa.Tp(this,!1,!1,this.Cm,void 0,((t,i)=>Ia(i,this.engine.scale,this.Om(new Aa,this,t,n[h.indexOf(t)]||0).Qu(),t,void 0))),this.Zm(h,n,e,s)}Xm(t,i){t.setStyle(this.Gd?new G({color:this.Gd.getColors(t.getAnimatedValue())}):this.Tm(i,t),this.Fm,this.Dm,this.Pm)}Gm(){this.Cm=this.Cm.sort(this.km),this.cs.vs()}Qd(){return this.Cm}dispose(){return this.Cm.slice().forEach((t=>t.dispose())),this.Fp.dispose(),this.Wm.U(),this.Ym.U(),this.Hm.U(),super.dispose()}}const ad=(t,i,s)=>{const e=t.vl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===exports.FunnelLabelSide.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},ld=t=>{const i=t.vl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class ud extends od{constructor(){super(...arguments),this.jm=Ba.NamePlusValue,this.ZT=10,this.QT=exports.FunnelLabelSide.Left,this.JT=exports.SliceLabelIndices.LabelsOnSides,this.Qm=[],this.ty=this.ts.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.ty=t;for(let t=0;t<this.Qm.length;t+=1)this.Qm[t].Ee(this.ty);return this.cs.vs(),this}getLabelConnectorStyle(){return this.ty}setLabelConnectorGap(t){return this.ZT=t,this.cs.vs(),this}getLabelConnectorGap(){return this.ZT}setLabelSide(t){return this.QT=t,this.cs.vs(),this}getLabelSide(){return this.QT}Zm(t,i,s,e){const h=this.ZT;let r=0;for(let i=0;i<t.length;i+=1)r=Math.max(r,t[i].Ye.ai().x);const n=e.x+this.ya.left+this.ya.right,o=this.QT===exports.FunnelLabelSide.Right?(this.ya.left+(n-(this.ya.right+r)))/2:(this.ya.left+r+(n-this.ya.right))/2,a=e.x-r,u=l(a,e.y);nd(t,this.HT,this.$T,u,this.ya,this.XT,this.jT,o),this.KT(t,this.QT===exports.FunnelLabelSide.Left?-1:1,-1,s,e);for(let t=0;t<this.Qm.length;t+=1)this.Qm[t].setVisible(!1);for(let i=0;i<t.length;i+=1)t[i].getVisible()&&this.iy(this.qT(t[i],-1,s,h))}getMinimumSize(){return l(500,300)}KT(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,n=1===s?Math.max:Math.min;let o;for(let e=0;e<t.length;e+=1){const h=t[e];if(0===h.bT.vl().length)h.Ye.setVisible(!1);else{let t;h.Ye.setVisible(!0),o&&(t=o.Ye.Ia().y+s*(o.Ye.ai().y+10));const e=(ad(h.bT,this.QT,0)||l(0,0)).y,a=void 0===t?e:n(e,t);h.Ye.Ie(l(r,a)).Ba(i).Ra(0),o=h}}}qT(t,i,s,e){const h=t.bT,r=t.Ye,n=ad(h,this.QT,e);if(n){const t={x:cs(this.QT===exports.FunnelLabelSide.Left?r.Ia().x-i*(e+r.ai().x):r.Ia().x+i*(e+r.ai().x),n,s).x,y:ds(r.Ia().y,n,s).y};return[n,t,l(this.QT===exports.FunnelLabelSide.Left?r.Ia().x-i*(e+r.ai().x):r.Ia().x+i*(e+r.ai().x),t.y)]}}iy(t){if(t){let i;for(let t=0;t<this.Qm.length;t+=1)if(!this.Qm[t].getVisible()){i=this.Qm[t].setVisible(!0);break}void 0===i&&(i=this.Ym.sy(this.pixelScale,void 0,[Ua.InternalUI]).Ee(this.ty),this.Qm.push(i)),i.Gt().ol(t)}}}class cd extends od{constructor(){super(...arguments),this.jm=Ba.Name,this.JT=exports.SliceLabelIndices.LabelsInsideSlices}Zm(t,i,s,e){const h=this.ya.left+e.x/2;nd(t,this.HT,this.$T,e,this.ya,this.XT,this.jT,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.bT,h=s.Ye,r=ld(e);r&&h.Ie(r).Ba(0).Ra(0)}}getMinimumSize(){return l(200,200)}}const dd={LabelsOnSides:ud,LabelsInsideSlices:cd};var fd,Ad;exports.FunnelLabelSide=void 0,(fd=exports.FunnelLabelSide||(exports.FunnelLabelSide={}))[fd.Right=0]="Right",fd[fd.Left=1]="Left";class gd extends ha{constructor(t,i,s,e,h,r,n){super(t,i,s,i.yp("gaugeChart bg",0),e,i.cs.ts.gaugeChartBackgroundFillStyle,i.cs.ts.gaugeChartBackgroundStrokeStyle,i.cs.ts.gaugeChartTitleFont,i.cs.ts.gaugeChartTitleFillStyle,r),this.Cm=[],this.Nm=t=>{const i=this.Cm.indexOf(t);i>=0&&this.Cm.splice(i,1)},this.cs.Gn(fo.uf),this.Ts=i.Um("gaugeChart layer",0),this.Ym=i.Um("gaugeChart top layer",1),this.bp.Eh("Gauge Chart"),this.mp(h,this.pixelScale);const o=Hs();this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd),this.setAnimationsEnabled(void 0===n||n)}dispose(){return this.Ts.U(),this.Ym.U(),this.Cm.slice().forEach((t=>t.dispose())),super.dispose()}}class pd extends gd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.jl=90,this.Zl=-270,this.tF={min:this.jl,max:this.Zl},this.iF=Z((()=>this.Ts.vs())),this.sF=()=>{this.eF=void 0},this.hF=i.Um("radialGaugeChart bg arc",2),this.rF=this.Ts.Kc(this.pixelScale).ke(this.ts.gaugeChartEmptyGaugeFillStyle).Ce(this.ts.gaugeChartEmptyGaugeStrokeStyle)}setAngleInterval(t,i){t===i?i-=360:Math.abs(i-t)>360&&(i-=(i-t)%360);const s=this.jl,e=this.Zl,h=this.tF;return this.getAnimationsEnabled()?this.nF(h,{min:t,max:i}):(h.min=t,h.max=i,this.jl=t,this.Zl=i),this.L.emit("angleIntervalChange",this,{min:s,max:e},{min:t,max:i}),this.cs.vs(),this}getAngleInterval(){return{min:this.jl,max:this.Zl}}setGaugeFillStyle(t){return this.rF.ke(t),this.cs.vs(),this}setGaugeStrokeStyle(t){return this.rF.Ce(t),this.cs.vs(),this}nF(t,i,s){this.eF=this.iF(1e3,X.ease)([[t.min,i.min],[t.max,i.max]],(([t,i])=>{this.tF={min:t,max:i},this.jl=t,this.Zl=i,this.Ts.vs()})),this.eF.onEveryAnimationEnd(this.sF),s&&this.eF.onAnimationEnd(s)}onAngleIntervalChange(t){return this.L.on("angleIntervalChange",t)}offAngleIntervalChange(t){return this.L.off(t,"angleIntervalChange")}dispose(){return super.dispose(),this.hF.U(),this}}class md extends Ra{oF(t){return this.L.on("valueChange",t)}aF(t){return this.L.on("valueIntervalChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}offIntervalChange(t){return this.L.off(t,"valueIntervalChange")}attach(t,i=!0,s=!1){return super.attach(t,i,s),this.styleAttachedEntry(t,i,s),this}styleAttachedEntry(t,i=!0,s=!1){ai(t,this.ts,s,{fill:this.lF})}}class yd extends md{onValueChange(t){return this.oF(t)}onIntervalChange(t){return this.aF(t)}}class Sd extends yd{constructor(t,i,s,e,h,r,n){super(s,h,r,n),this.jl=0,this.Zl=0,this.uF=0,this.cF=0,this.dF=0,this.fF=100,this.AF=!0,this.Am=this.S,this.pm=this.getVisible(),this.ym=bi(),this.gF=t=>{this.Am=t,this.Ki.cs.vs()},this.pF=t,this.Br=i,this.Ki=s,this.scale=e,this.lF=this.ts.gaugeChartGaugeFillStyle,this._m=t.Kc(e).ke(this.lF).Ce(rt).ds(this.getHighlight()),this.fs(this._m),this.mF=i.Dr(e).ds(this.getHighlight()),this.fs(this.mF,{isText:!0}),this.yF=i.Dr(e).ds(this.getHighlight()),this.fs(this.yF,{isText:!0}),this.Ye=i.Dr(e).ds(this.getHighlight()),this.fs(this.Ye,{isText:!0}),this.mF.ke(r.gaugeChartIntervalLabelsFillStyle).Nh(r.gaugeChartIntervalLabelsFont),this.yF.ke(r.gaugeChartIntervalLabelsFillStyle).Nh(r.gaugeChartIntervalLabelsFont),this.Ye.ke(r.gaugeChartValueLabelFillStyle).Nh(r.gaugeChartValueLabelFont),this.setName("Gauge Slice")}Fe(){const t=this.Ki.getDataLabelFormatter(),i=this.jl/90<this.Zl/90?1:-1;let s=this.Ki.getAnimationsEnabled()?this.Am:this.S;const[e,h]=this.dF<this.fF?[this.dF,this.fF]:[this.fF,this.dF];s<e?s=e:s>h&&(s=h);const r=this.Zl-i*this.cF,n=this.jl+i*this.uF,o=this.fF-this.dF,a=(0!==o?(r-n)/o:1/0)*(s-this.dF);this._m.hu(n).Ve(n+a);const l="function"==typeof t?t(s,{getInnerStart:()=>e,getInnerEnd:()=>h}):t.format(s);this.Ye.Eh(l)}SF(){const t=this.Ki.getIntervalLabelFormatter(),i="function"==typeof t?t(this.dF,{getInnerStart:()=>this.dF,getInnerEnd:()=>this.fF}):t.format(this.dF);return this.mF.Eh(i).Ds(),this.mF.ai()}vF(){const t=this.Ki.getIntervalLabelFormatter(),i="function"==typeof t?t(this.fF,{getInnerStart:()=>this.dF,getInnerEnd:()=>this.fF}):t.format(this.fF);return this.yF.Eh(i).Ds(),this.yF.ai()}setName(t){return super.setName(t),this.Ki.cs.vs(),this}setValue(t){const i=this.S;return this.Ki.getAnimationsEnabled()?this.pm&&this.ym(i,t,this.gF):this.Am=t,this.S=t,this.L.emit("valueChange",this,i,t),this.Ki.cs.vs(),this}getValue(){return this.S}setVisible(t){return this.pm=t,!1===t?this.Ki.getAnimationsEnabled()&&this.Am>0?this.ym(this.Am,0,this.gF,{onCompleted:()=>super.setVisible(!1)}):(this.Am=0,super.setVisible(!1)):this.Ki.getAnimationsEnabled()?(super.setVisible(!0),this.ym(this.Am,this.S,this.gF)):(this.Am=this.S,super.setVisible(!0)),this}setInterval(t,i){const s=this.dF,e=this.fF;return this.L.emit("valueIntervalChange",this,{min:s,max:e},{min:t,max:i}),this.dF=t,this.fF=i,this.Ki.cs.vs(),this}setIntervalLabelsFont(t){return this.mF.Nh(t),this.yF.Nh(t),this.Ki.cs.vs(),this}getIntervalLabelsFont(){return this.mF.Oh()}setIntervalLabelsFillStyle(t){return this.mF.ke(t),this.yF.ke(t),this.Ki.cs.vs(),this}getIntervalLabelsFillStyle(){return this.mF.zh()}setIntervalLabelsVisible(t){return t?(this.mF.setVisible(!0),this.yF.setVisible(!0)):(this.mF.setVisible(!1),this.yF.setVisible(!1)),this.AF=t,this}getIntervalLabelsVisible(){return this.AF}setAngleInterval(t,i){return this.jl=t,this.Zl=i,this.Ki.cs.vs(),this}setMinAngle(t){return this.jl=t,this.Ki.cs.vs(),this}setMaxAngle(t){return this.Zl=t,this.Ki.cs.vs(),this}setMarginInDegrees(t=this.uF,i=this.cF){return t!==this.uF&&(this.uF=t),i!==this.cF&&(this.cF=i),this.Ki.cs.vs(),this}setFillStyle(t){this.lF="function"==typeof t?t(this.lF):t;const i=this.lF;this._m.ke(i);for(let t=0;t<this.Ji.length;t+=1)this.styleAttachedEntry(this.Ji[t]);return this.Ki.cs.vs(),this}xF(t){return this.Ye.ke(t),this.Br.vs(),this}bF(){return this.Ye.zh()}getAnimatedValue(){return this.Am}}function vd(t,i,s,e,h,r=Math.floor(Math.sqrt(e>h?25*e:25*h))){const n=Array(r+2),o=Math.PI;let a=0,u=0;const c=i*o/180,d=(s*o/180-c)/r;for(n[a]=l(t.x,t.y),a+=1;a<=r+1;)n[a]=l(t.x+e*Math.cos(c+u*d),t.y+h*Math.sin(c+u*d)),a+=1,u+=1;return[n,r]}class xd extends pd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.Od=20,this.MF=new Intl.NumberFormat,this._F=new Intl.NumberFormat,this.wF=!1,this.CF=5;const o=new Sd(this.Ts,this.Ym,this,this.pixelScale,this.Nm,this.ts,this.cs.hs);this.kF=o,this.Cm.push(o),this.setPadding(10)}Fe(t){super.Fe(t),ra.kp(this.bp,this.Sp),super.pp();const i=ra.Cp(this.bp,this.Sp),s=ji([this.kF.SF(),this.kF.vF()]),e=l(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right+2*s.max.x),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+1*s.max.y+i)),h=Math.max(.5*Math.min(e.x,e.y),0),r=l(this.ya.left+s.max.x+.5*e.x,this.ya.bottom+s.max.y+.5*e.y),n=this.wF?this.TF(r,h):r,o=this.rF.Me.getThickness(),a=h-.5*o,u=h-this.Od;let c=u/h*100;c=c>100||c<0?99:c;const d=100*(1-(this.Od-o)/h);this.FF(n,u)&&(this.rF.ru(h).au(c),this.kF._m.ru(a).au(d));const f=.5*(A=h,(g=this.Zl-this.jl)/(2*Math.PI*A*(g/360))*o);var A,g;this.rF.hu(this.jl).Ve(this.Zl).Ie(n),this.kF._m.Ie(n),this.kF.Ye.Ie(n),this.Gd&&this.kF.setFillStyle(new G({color:this.Gd.getColors(this.kF.getAnimatedValue())})),this.kF.setMinAngle(this.jl).setMaxAngle(this.Zl).setMarginInDegrees(f,f).Fe();const p=this.rF.Ql();if(this.kF.getIntervalLabelsVisible()){this.IF(this.jl,this.Zl,n,p+this.CF);const t=this.kF.mF.Ds().Ue(),i=this.kF.yF.Ds().Ue();Vi(t,i)&&this.PF(t,i,n,p+this.CF)}}FF(t,i){const s=hs(this.kF.Ye.Ds().ai(),.5),e=t.x+i,h=t.x-i,r=t.y+i,n=t.y-i;return!(t.x+s.x>e||t.x-s.x<h||t.y+s.y>r||t.y-s.y<n)}PF(t,i,s,e){const h=Oi(t,i),[r,n]=[ms(fs(this.jl)),ms(fs(this.Zl))],[o,a]=r!==n||1!==r&&3!==r?[ns(h.min,s),ns(h.max,s)]:[ns(l(h.min.x,h.max.y),s),ns(l(h.max.x,h.min.y),s)],u=o.x*a.x+o.y*a.y,c=es(o)*es(a),d=.7*As(Math.acos(u/c)),[f,A]=this.DF();this.IF(this.jl-f*d,this.Zl-A*d,s,e)}DF(){const t=this.Zl-this.jl,i=Math.sign(t);let s=Math.sign(this.jl),e=Math.sign(this.Zl);return s===e&&(i>=0?s=-e:e=-s),[s,e]}TF(t,i){const[s]=vd(t,this.jl,this.Zl,i,i),e=ji(s),h=.5*(e.max.x-e.min.x),r=.5*(e.max.y-e.min.y);return rs(ns(t,l(e.min.x+h,e.min.y+r)),t)}IF(t,i,s,e){const h=fs(t),r=fs(i);this.kF.mF.Ie(qi(l(s.x+e,s.y),s,-h)),this.kF.yF.Ie(qi(l(s.x+e,s.y),s,-r)),this.kF.mF.za(l(-Math.cos(h),-Math.sin(h))),this.kF.yF.za(l(-Math.cos(r),-Math.sin(r)))}getDefaultSlice(){return this.kF}setAutoScaling(t){return this.wF=t,this.cs.vs(),this}getAutoScaling(){return this.wF}setDataLabelFormatter(t){return this._F=t,this.cs.vs(),this}getDataLabelFormatter(){return this._F}setIntervalLabelFormatter(t){return this.MF=t,this.cs.vs(),this}getIntervalLabelFormatter(){return this.MF}setIntervalLabelPadding(t){return this.CF=t,this.cs.vs(),this}getIntervalLabelPadding(){return this.CF}setThickness(t){return this.Od=t,this}setLUT(t){return this.Gd=t,this.cs.vs(),this}setDataLabelFont(t){return this.kF.Ye.Nh(t),this.cs.vs(),this}getDataLabelFont(){return this.kF.Ye.Oh()}getMinimumSize(){return l(500,300)}setDataLabelFillStyle(t){return this.kF.xF(t),this.cs.vs(),this}getDataLabelFillStyle(){return this.kF.bF()}Qd(){return this.Cm}dispose(){return this.kF.dispose(),super.dispose()}}class bd extends Ra{}class Md extends bd{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Ms="Slice",this.S=0,this.um=!1,this.YT=z,this.fm=z,this.Am=this.S,this.ym=Z((()=>this.Ki.cs.vs())),this.vm=()=>{this.xm=void 0},this.index=t,this.Ki=e,this.scale=h,this.qi=r,this.bT=i.sc(h,nr.Simple).ds(this.getHighlight()),this.fs(this.bT),this.Ye=s.Dr(h).ds(this.getHighlight()),this.fs(this.Ye,{isText:!0})}setValue(t){return this.Ki.getAnimationsEnabled()?this.getVisible()&&this.wm(this.Am,t):this.Am=t,this.S=t,this.Ki.cs.vs(),this}getValue(){return this.S}setVisible(t){return!1===t?this.Ki.getAnimationsEnabled()&&this.Am>0?(this.xm&&(this.xm.finish(!1),this.xm=void 0),this.wm(this.Am,0,(()=>super.setVisible(!1)))):(this.Am=0,super.setVisible(!1)):this.Ki.getAnimationsEnabled()?(this.xm&&(this.xm.finish(!1),this.xm=void 0),super.setVisible(!0),this.wm(this.Am,this.S)):(this.Am=this.S,super.setVisible(!0)),this}wm(t,i,s){this.xm=this.ym(300,X.ease)([[t,i]],(([t])=>{this.Am=t,this.Ki.cs.vs()})),this.xm.onEveryAnimationEnd(this.vm),s&&this.xm.onAnimationEnd(s)}setStyle(t,i,s,e){this.YT=t,this.fm=s,this.bT.ke(this.YT).Ce(i),this.Ye.ke(this.fm).Nh(e);for(let t=0;t<this.Ji.length;t+=1)this.styleAttachedEntry(this.Ji[t])}getAnimatedValue(){return this.Am}attach(t,i=!0,s=!1){return super.attach(t,i,s),this.styleAttachedEntry(t,i,s),this}styleAttachedEntry(t,i=!0,s=!1){ai(t,this.ts,s,{fill:this.YT,stroke:this.bT.lo()})}}exports.PyramidSliceModes=void 0,(Ad=exports.PyramidSliceModes||(exports.PyramidSliceModes={}))[Ad.VariableHeight=0]="VariableHeight",Ad[Ad.VariableWidth=1]="VariableWidth";const _d=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},wd=(t,i,s,e,h,r=0,n=exports.PyramidSliceModes.VariableHeight,o)=>{i=_d(i,e.x),s=_d(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,p=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;p+=t[i].getAnimatedValue();const o=n===exports.PyramidSliceModes.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-p/l*e.y;if(n===exports.PyramidSliceModes.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const m=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const p=t[g];u+=p.getAnimatedValue();const y=n===exports.PyramidSliceModes.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let S=0;g>0&&(c={x:f.x+m*r,y:f.y-r},d={x:A.x-m*r,y:A.y-r}),S=(i+u/l*(s-i))/2,f={x:o-S,y:parseInt(`${n===exports.PyramidSliceModes.VariableWidth?c.y-y:y}`,10)},A={x:o+S,y:parseInt(`${n===exports.PyramidSliceModes.VariableWidth?d.y-y:y}`,10)},d.x>=c.x&&A.x>=f.x&&p.bT.Sl([f,c,d,A])}};class Cd extends ha{constructor(t,i,s,e,h,r,n){super(t,i,s,i.yp("pyramidChart bg",0),e,i.cs.ts.pyramidChartBackgroundFillStyle,i.cs.ts.pyramidChartBackgroundStrokeStyle,i.cs.ts.pyramidChartTitleFont,i.cs.ts.pyramidChartTitleFillStyle,r),this.Cm=[],this.km=Da.None,this.Tm=this.ts.pyramidChartSliceFillStylePalette,this.Fm=this.ts.pyramidChartSliceStrokeStyle,this.Im=!0,this.Pm=this.ts.pyramidChartSliceLabelFont,this.Dm=this.ts.pyramidChartSliceLabelFillStyle,this.Bm=0,this.HT=0,this.$T=80,this.XT=0,this.jT=exports.PyramidSliceModes.VariableHeight,this.Em=!0,this.Vm=exports.AutoCursorModes.onHover,this.Om=La,this.Nm=t=>{const i=this.Cm.indexOf(t);i>=0&&(this.Cm.splice(i,1),this.Gm())},this.cs.Gn(fo.lf),this.zm=this.ts.effectsText,this.Wm=i.Um("pyramidChart bottom",0),this.Ym=i.Um("pyramidChart top",1),this.bp.Eh("Pyramid Chart"),this.Hm=i.$m();const o=It(n?n.autoCursorBuilder:void 0,ka);this.Fp=o.am(this.Hm,this.uiScale,this.uiScale,this.ts),this.mp(h,this.pixelScale),this.setAnimationsEnabled(!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled))}setAutoCursor(t){return this.Fp&&t(this.Fp),this.cs.vs(),this}getAutoCursor(){return this.Fp}setAutoCursorMode(t){return this.Vm=t,this.cs.vs(),this}getAutoCursorMode(){return this.Vm}setCursorResultTableFormatter(t){return this.Om=t,this.cs.vs(),this}addSlice(t,i){const s=new Md(this.Bm,this.Wm,this.Ym,this,this.pixelScale,this.Nm,this.ts,this.cs.hs);return this.Bm+=1,s.setName(t),s.setValue(i),s.hs.ns.Ss(this.zm),s.hs.os.Ss(this.Em),this.Cm.push(s),this.cs.vs(),s.onMouseMove((()=>{this.Vm&&this.cs.vs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Cm}setNeckWidth(t){return this.$T=t,this.cs.vs(),this}getNeckWidth(){return this.$T}setSliceGap(t){return this.XT=Math.min(Math.max(t,0),20),this.cs.vs(),this}setSliceMode(t){return this.jT=t,this.cs.vs(),this}getPyramidSliceMode(){return this.jT}setLUT(t){return this.Gd=t,this.cs.vs(),this}setSliceFillStyle(t){return this.Tm=t,this.cs.vs(),this}getSliceFillStyle(){return this.Tm}setSliceStrokeStyle(t){return this.Fm="function"==typeof t?t(this.Fm):t,this.cs.vs(),this}getSliceStrokeStyle(){return this.Fm}setSliceEffect(t){return this.Em=t,this.Cm.forEach((i=>i.hs.os.Ss(t))),this.cs.vs(),this}getSliceEffect(){return this.Em}setSliceSorter(t){return this.km=t,this.Cm=this.Cm.sort(this.km),this.cs.vs(),this}getSliceSorter(){return this.km}setLabelFillStyle(t){return this.Dm="function"==typeof t?t(this.Dm):t,this.cs.vs(),this}getLabelFillStyle(){return this.Dm}setLabelFont(t){return this.Pm="function"==typeof t?t(this.Pm):t,this.cs.vs(),this}getLabelFont(){return this.Pm}setLabelEffect(t){return this.zm=t,this.Cm.forEach((i=>i.hs.ns.Ss(t))),this.cs.vs(),this}getLabelEffect(){return this.zm}setLabelFormatter(t){return this.jm=t,this.cs.vs(),this}getLabelFormatter(){return this.jm}setSliceHighlightOnHover(t){return this.Im=t,this.Cm.forEach((i=>i.setHighlightOnHover(t))),this}Fe(t){super.Fe(t),ra.kp(this.bp,this.Sp),super.pp();const i=ra.Cp(this.bp,this.Sp),s=l(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+i)),e=l(this.ya.left+s.x/2,this.ya.bottom+s.y/2);this.Cm=this.Cm.sort(this.km);for(let t=0,{length:i}=this.Cm;t<i;t+=1)this.Xm(this.Cm[t],t);const h=this.Cm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const n=[];for(let t=0;t<h.length;t+=1)n.push((o=h[t].getAnimatedValue())>0?o/r:0);var o;for(let t=0;t<h.length;t+=1){const i=h[t];i.Ye.Eh(this.jm(i,n[t])).Ds()}n.push(r),oa.Tp(this,!1,!1,this.Cm,void 0,((t,i)=>Ia(i,this.engine.scale,this.Om(new Aa,this,t,n[h.indexOf(t)]||0).Qu(),t,void 0))),this.Zm(h,n,e,s)}Xm(t,i){t.setStyle(this.Gd?new G({color:this.Gd.getColors(t.getAnimatedValue())}):this.Tm(i,t),this.Fm,this.Dm,this.Pm)}Gm(){this.Cm=this.Cm.sort(this.km),this.cs.vs()}Qd(){return this.Cm}dispose(){return this.Cm.slice().forEach((t=>t.dispose())),this.Fp.dispose(),this.Wm.U(),this.Ym.U(),this.Hm.U(),super.dispose()}}const kd=(t,i,s)=>{const e=t.vl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===exports.PyramidLabelSide.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},Td=t=>{const i=t.vl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Fd extends Cd{constructor(){super(...arguments),this.jm=Ba.NamePlusValue,this.ZT=10,this.QT=exports.PyramidLabelSide.Left,this.JT=exports.SliceLabelIndices.LabelsOnSides,this.Qm=[],this.ty=this.ts.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.ty=t;for(let t=0;t<this.Qm.length;t+=1)this.Qm[t].Ee(this.ty);return this.cs.vs(),this}getLabelConnectorStyle(){return this.ty}setLabelConnectorGap(t){return this.ZT=t,this.cs.vs(),this}getLabelConnectorGap(){return this.ZT}setLabelSide(t){return this.QT=t,this.cs.vs(),this}getLabelSide(){return this.QT}Zm(t,i,s,e){const h=this.ZT;let r=0;for(let i=0;i<t.length;i+=1)r=Math.max(r,t[i].Ye.ai().x);const n=e.x+this.ya.left+this.ya.right,o=this.QT===exports.PyramidLabelSide.Right?(this.ya.left+(n-(this.ya.right+r)))/2:(this.ya.left+r+(n-this.ya.right))/2,a=e.x-r,u=l(a,e.y);wd(t,this.HT,this.$T,u,this.ya,this.XT,this.jT,o),this.KT(t,this.QT===exports.PyramidLabelSide.Left?-1:1,-1,s,e);for(let t=0;t<this.Qm.length;t+=1)this.Qm[t].setVisible(!1);for(let i=0;i<t.length;i+=1)if(t[i].getVisible()){const e=this.qT(t[i],-1,s,h);e&&this.iy(e)}}getMinimumSize(){return l(500,300)}KT(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,n=1===s?Math.max:Math.min;let o;for(let e=0;e<t.length;e+=1){const h=t[e];let a;0===h.bT.vl().length?h.Ye.setVisible(!1):h.Ye.setVisible(!0),o&&(a=o.Ye.Ia().y+s*(o.Ye.ai().y+10));const u=kd(h.bT,this.QT,0);if(u){const t=u.y,s=void 0===a?t:n(t,a);h.Ye.Ie(l(r,s)).Ba(i).Ra(0)}o=h}}qT(t,i,s,e){const h=t.bT,r=t.Ye,n=kd(h,this.QT,e);if(n){const t={x:cs(this.QT===exports.PyramidLabelSide.Left?r.Ia().x-i*(e+r.ai().x):r.Ia().x+i*(e+r.ai().x),n,s).x,y:ds(r.Ia().y,n,s).y};return[n,t,l(this.QT===exports.PyramidLabelSide.Left?r.Ia().x-i*(e+r.ai().x):r.Ia().x+i*(e+r.ai().x),t.y)]}}iy(t){let i;for(let t=0;t<this.Qm.length;t+=1)if(!this.Qm[t].getVisible()){i=this.Qm[t].setVisible(!0);break}void 0===i&&(i=this.Ym.sy(this.pixelScale,void 0,[Ua.InternalUI]).Ee(this.ty),this.Qm.push(i)),i.Gt().ol(t)}}class Id extends Cd{constructor(){super(...arguments),this.jm=Ba.Name,this.JT=exports.SliceLabelIndices.LabelsInsideSlices}Zm(t,i,s,e){const h=this.ya.left+e.x/2;wd(t,this.HT,this.$T,e,this.ya,this.XT,this.jT,h);for(let i=0;i<t.length;i+=1){const s=t[i].bT,e=t[i].Ye,h=Td(s);h&&e.Ie(h).Ba(0).Ra(0)}}getMinimumSize(){return l(200,200)}}const Pd={LabelsOnSides:Fd,LabelsInsideSlices:Id};var Dd;exports.PyramidLabelSide=void 0,(Dd=exports.PyramidLabelSide||(exports.PyramidLabelSide={}))[Dd.Right=0]="Right",Dd[Dd.Left=1]="Left";const Bd=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),Ld=(t,i,s,e,h,r,n,o)=>{if(0===i)return t.paddingX=o,t.alignmentX=-1,t};var Rd;exports.SpiderWebMode=void 0,(Rd=exports.SpiderWebMode||(exports.SpiderWebMode={}))[Rd.Normal=0]="Normal",Rd[Rd.Circle=1]="Circle";class Ed{constructor(t,s,e,h,r,n,o,a){this.L=new i.Eventer,this.BF=t,this.Br=s,this.scale=e,this.chart=h,this.tag=r,this.axisScale=n,this.LF=o,this.RF=a,this.EF=this.BF.ze(this.scale).setMouseInteractions(!1),this.zF=this.Br.Dr(this.scale).Eh(this.tag).setMouseInteractions(!1),this.VF=this.LF(this,this.BF.sy(this.scale,void 0,[Ua.InternalUI])).Ee(this.chart.getNibStyle()),this.RF.As([this.zF])}Zm(t,i,s,e,h,r,n){const o=i.length,a=i[s>0?s-1:o-1],u=i[s],c=i[s<o-1?s+1:0],d=this.chart.getNibLength();this.EF.Oe(t).Ve(u).Ee(this.chart.getAxisStyle()),this.VF.Gt().ol(r===exports.SpiderWebMode.Normal?[$i(u,a,Tt(.5*d/es(ns(a,u)),0,1)),u,$i(u,c,Tt(.5*d/es(ns(c,u)),0,1))]:((t,i,s,e,h=2)=>{const r=e/s,n=[];for(let o=-e/2;o<=e/2;o+=h){const h=r*(o/e)+i,a=l(t.x+Math.cos(h)*s,t.y+Math.sin(h)*s);n.push(a)}return n})(t,e,h,d)),n?this.zF.setVisible(!0).Ie(rs(u,l(n.paddingX,n.paddingY))).Ba(n.alignmentX).Ra(n.alignmentY):this.zF.setVisible(!1)}getLabelSize(){return this.zF.Nh(this.chart.getAxisLabelFont()).ke(this.chart.getAxisLabelStyle()).Ds().ai()}dispose(){this.EF&&this.EF.dispose(),this.zF&&this.zF.dispose(),this.VF&&this.VF.dispose()}}const zd=(t,i,s,e,h)=>{const r=i.getIcon();return r?t.addRow(r,i.getName()):t.addRow(i.getName()),t.addRow("Axis:","",e).addRow("Value:","",h(s))};class Vd extends Xl{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,a,l,c),this.Ms="Spider Series",this.yu=new Map,this.$i=exports.HighlightModes.onHover,this.Om=zd,this.$b=8,this.ga=0,this.OF=bi(),this.NF={},this.GF={},this.pm=this.getVisible(),this.WF=1,this.UF=((t,i)=>{const s=Z((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const l=(null==a?void 0:a.easing)||X.ease,u=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r?(e=s(u,l)([[r,0]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0,i(!1)}))):(r=0,i(!1)):o?(i(!0),e=s(u,l)([[r,1]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.WF=t,this.Ts.cs.vs()}),(t=>{super.setVisible(t)})),this.Ki=t,this.Ts=i,this.Xb=e,this.YF=h,this.gx=r,this.HF=n,this.$F=o,this.scale=s,this.XF=di(l.spiderSeriesFillStyle,u),this.jF=di(l.spiderSeriesStrokeStyle,u),this.ZF=di(l.spiderSeriesPointFillStyle,u)}qy(){return this.iS&&this.yu.size>0&&this.getVisible()}addPoints(...t){this.yu.size>0&&this.Ki.cs.Gn(fo.xf),t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1)this.YF(t[i].axis);if(this.Ki.getAnimationsEnabled()&&void 0!==this.NF){const i=new Map;let s;t.forEach((t=>i.set(t.axis,t.value))),this.OF(0,1,(t=>{i.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.yu.set(e,h+t*(i-h)),this.Ts.cs.vs()}))}),{easing:this.NF.easing,durationMs:this.NF.durationMs,onStart:()=>{s=new Map(this.yu)}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.yu.set(s,t[i].value)}return this.Ts.vs(),this}getValue(t,i=!1){const s=this.yu.get(t),e=this.Ki.getOriginValue();if(void 0!==s)return i?e+this.WF*(s-e):s}setAnimationAddPoints(t,i){return this.NF=t?{easing:t,durationMs:i}:void 0,this.Ts.vs(),this}setVisibleStateChangedAnimation(t,i){return this.GF=t?{easing:t,durationMs:i}:void 0,this.Ts.vs(),this}setCursorResultTableFormatter(t){return this.Om=t,this.Ki.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}setCursorEnabled(t){return super.setCursorEnabled(t)}setFillStyle(t){return this.XF="function"==typeof t?t(this.XF):t,this.bT&&(this.bT.ke(this.XF),this.Ts.vs()),this}getFillStyle(){return this.XF}setStrokeStyle(t){return this.jF="function"==typeof t?t(this.jF):t,this.bT&&(this.bT.Ce(this.jF),this.Ts.vs()),this}getStrokeStyle(){return this.jF}setPointFillStyle(t){return this.ZF="function"==typeof t?t(this.ZF):t,this.jb&&(this.jb.ke(this.ZF),this.Ts.vs()),this}getPointFillStyle(){return this.ZF}setPointSize(t){return this.$b=t,this.jb&&this.jb.tt(t),this}getPointSize(){return this.$b}getPointShape(){return this.Xb}setPointRotation(t){return this.ga=t,this.jb&&this.jb.Gh(t),this.Ts.vs(),this}getPointRotation(){return this.ga}Fe(){if(super.Fe(),!this.Xi){const t=new Array(this.gx.length),i=this.Ki.getOriginValue();for(let s=0;s<this.gx.length;s+=1){const e=this.yu.get(this.gx[s].tag);t[s]=void 0!==e?this.HF(this.gx[s].tag,i+this.WF*(e-i)):this.HF(this.gx[s].tag,i)}qt(t),t.length>=3&&(this.bT||(this.bT=this.Ts.sc(this.scale,nr.Simple).Ce(this.jF).ke(this.XF).ds(this.getHighlight()),this.fs(this.bT)),this.bT.Sl(t),this.jb||(this.jb=this.Ts.bS(this.scale).tt(this.$b).sl(this.Xb).Gh(this.ga).ke(this.ZF).ds(this.getHighlight()),this.fs(this.jb)),this.jb.Gt().ol(t))}}attach(t,i=!0,s=!1){return super.attach(t,i,s),ai(t,this.ts,s,{fill:this.XF,stroke:this.jF}),this}ks(){return this.bs||this.Xb}QF(){for(let t=0;t<this.Ji.length;t+=1)ai(this.Ji[t],this.ts,!1,{fill:this.XF,stroke:this.jF})}$c(t,i){if(this.bT){const i=this.$F(t);if(void 0!==i&&this.yu.has(i.tag)){const t=this.yu.get(i.tag),s=this.HF(i.tag,t);return Ia(s,this.scale,this.Om(new Aa,this,t,i.tag,this.Ki.formatValue).Qu(),this,this.XF)}}}solveNearestFromScreen(t){return this.$c(ao(t,this.Ki.cs),!1)}Pe(t,i){return t.ds(i),this.Ts.vs(),this}setVisible(t){var i,s;return this.pm=t,this.UF(t,this.Ki.getAnimationsEnabled()&&void 0!==this.GF,{easing:null===(i=this.GF)||void 0===i?void 0:i.easing,durationMs:null===(s=this.GF)||void 0===s?void 0:s.durationMs}),this}}const Od=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},Nd=t=>ji(t.zF.Ue()),Gd=t=>ji(t.Ue()),Wd=(t,i,s,e)=>t.au(0).Ie(s).hu(90).Ve(-270).lu(i===exports.SpiderWebMode.Circle?void 0:e.length),Ud={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Yd={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Hd=()=>{Yd.alignmentX=0,Yd.alignmentY=0,Yd.paddingX=0,Yd.paddingY=0};class $d extends fl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.yp("spiderChart bg",0),e,i.cs.ts.spiderChartBackgroundFillStyle,i.cs.ts.spiderChartBackgroundStrokeStyle,i.cs.ts.spiderChartTitleFont,i.cs.ts.spiderChartTitleFillStyle,n),this.ya=m(20,20,20,20),this.axisScale=lt.d1({scale1DConstructor:Ps,dimension:"x"}).K(0,1),this.gx=[],this.JF=[],this.KF=[],this.qF=ze.expansion,this.tI=!0,this.iI=Ld,this.sI=Bd,this.Lo=!0,this.eI=exports.SpiderWebMode.Normal,this.hI=4,this.rI=this.ts.spiderChartWebStyle,this.nI=this.ts.spiderChartScaleLabelFillStyle,this.oI=this.ts.spiderChartScaleLabelFont,this.aI=5,this.lI=this.ts.spiderChartAxisLabelFillStyle,this.uI=this.ts.spiderChartAxisLabelFont,this.cI=5,this.dI=this.ts.spiderChartAxisStrokeStyle,this.fI=this.ts.spiderChartAxisNibStrokeStyle,this.Df=10,this.AI=m(),this.Vm=exports.AutoCursorModes.onHover,this.hasAxis=t=>this.gx.reduce(((i,s)=>i||s.tag===t),!1),this.formatValue=t=>this.axisScale.Bi(t,Fs.Numeric),this.gI=()=>{const t=this.gx.map(Nd).concat(this.KF.map(Gd));return Ni(t)},this.pI=()=>this.mI.Kc(this.pixelScale).setMouseInteractions(!1),this.yI=t=>t.dispose(),this.SI=()=>this.bA.Dr(this.pixelScale).setMouseInteractions(!1),this.vI=t=>t.dispose(),this.xI=t=>this.formatValue(this.axisScale.getInnerStart()+t*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.bI=(t,i)=>{let s,e;const h=()=>{void 0!==this.MI&&this.MI.finish(),s=A(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),e=this.qF,this.qF=void 0},r=(i,e,h,r,n)=>{const o=l(h.x-e.x,e.y-h.y),a=this.gx.findIndex((i=>i===t));if(a>=0&&void 0!==s){const i=Od(a,this.gx.length),e=l(Math.cos(i),Math.sin(i)),h=o.x*e.x+o.y*e.y,r=es(ns(t.EF.Pi(),t.EF.Fi())),u=s.min+(s.max-s.min)*Math.max(1+h/r,.01);this.axisScale.K(s.min,u),jt(n),this.cs.vs()}},n=()=>{if(s=void 0,void 0!==e)if(this.ih){const t=A(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),i=this._I(),s=e;if(void 0!==i){const e=s.start(t.min,t.max,i.min,i.max),h=s.end(t.min,t.max,i.min,i.max);this.MI=this.tp.cs.en(300,X.ease)([[0,1]],(([i])=>{this.axisScale.K(t.min+i*(e-t.min),t.max+i*(h-t.max))})),this.MI.onAnimationEnd((()=>{this.MI=void 0,this.qF=s}))}else this.qF=e}else this.qF=e;e=void 0};i.setMouseEnterEventHandler(this.wI).setMouseLeaveEventHandler(this.CI).setMouseDragStartEventHandler(h).setMouseDragEventHandler(((t,i,s,e,h)=>r(0,l(i.clientX,i.clientY),e,0,i))).setMouseDragStopEventHandler(n);const o=Hs(new Xs(((t,i,s)=>{this.wI(t),h(),jt(s)}),r,((t,i,s,e)=>{this.CI(t),n(),jt(e)})));return i.setTouchStartEventHandler(o.onTouchStart).setTouchMoveEventHandler(o.onTouchMove).setTouchEndEventHandler(o.onTouchEnd)},this.kI=t=>{this.tI&&!this.hasAxis(t)&&this.addAxis(t)},this.HF=(t,i)=>{for(const s of this.gx)if(s.tag===t){const t=Math.max(Math.min((i-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return $i(s.EF.Pi(),s.EF.Fi(),t)}},this.$F=t=>{if(0===this.gx.length)return;const i=ns(ct(t,this.engine.scale,this.pixelScale),this.gx[0].EF.Pi()),s=Math.atan2(i.y,i.x);let e,h=Di;for(const t of this.gx){const i=ns(t.EF.Fi(),t.EF.Pi()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this.wI=t=>{this.Lo&&(t.Ee(this.fI),this.cs.vs())},this.CI=t=>{t.Ee(this.fI),this.cs.vs()},this.cs.Gn(fo.cf),this.Wk=i.Ax("spiderChart series bg",0),this.mI=i.Um("spiderChart web shapes",0),this.TI=i.Um("spiderChart axis bg",1),this.Wx=i.Um("spiderChart plotting",2),this.bA=i.Um("spiderChart fg",3),this.RF=this.hs.yg().Ss(this.ts.effectsText),this.bp.Eh("Spider Chart"),this.IS=this.Wk.Kc(this.pixelScale).ke(this.ts.spiderChartSeriesBackgroundFillStyle).Ce(rt).hu(90).Ve(-270).au(0),this.PS=this.Wk.Kc(this.pixelScale).ke(z).Ce(this.ts.spiderChartSeriesBackgroundStrokeStyle).hu(90).Ve(-270).au(0),super.FS(this.IS,this.PS),this.Hm=i.$m();const o=It(r?r.autoCursorBuilder:void 0,wa);this.Fp=o.am(this.Hm,this.uiScale,this.uiScale,this.ts),oa.Ip(this),this.RS(((t,i)=>{oa.Pp(this,i)})),this.setAnimationsEnabled(!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled)),this.mp(h,this.pixelScale)}getSeries(){return this.MS}setAutoCursor(t){return this.Fp&&t(this.Fp),this.cs.vs(),this}getAutoCursor(){return this.Fp}setAutoCursorMode(t){return this.Vm=t,this.cs.vs(),this}getAutoCursorMode(){return this.Vm}solveNearest(t){const i=t||this.cs.Nn();if(i)return oa.$c(this,ao(i,this.cs),this.MS)}addAxis(t){if("string"==typeof t){if(!this.hasAxis(t)){const i=new Ed(this.TI,this.bA,this.pixelScale,this,t,this.axisScale,this.bI,this.RF);this.gx.push(i)}}else t&&this.gx.push(t);return this.RF.As(this.gx.map((t=>t.zF))),this.cs.vs(),this}addSeries(t){const i="object"==typeof t?t.pointShape?t.pointShape:exports.PointShape.Circle:t||exports.PointShape.Circle,s="object"==typeof t&&t.automaticColorIndex?t.automaticColorIndex:this.MS.length,e=new Vd(this,this.Wx,this.pixelScale,i,this.kI,this.gx,this.HF,this.$F,this.wS,this.ts,s,this.cs.hs);return this.DS(e),e}getSeriesCount(){return this.MS.length}setWebMode(t){return this.eI=t,this.cs.vs(),this}getWebMode(){return this.eI}setWebCount(t){return this.hI=t,this.cs.vs(),this}getWebCount(){return this.hI}setWebStyle(t){return this.rI="function"==typeof t?t(this.rI):t,this.cs.vs(),this}getWebStyle(){return this.rI}setScaleLabelStyle(t){return this.nI="function"==typeof t?t(this.nI):t,this.cs.vs(),this}getScaleLabelStyle(){return this.nI}setScaleLabelFont(t){return this.oI="function"==typeof t?t(this.oI):t,this.cs.vs(),this}getScaleLabelFont(){return this.oI}setScaleLabelPadding(t){return this.aI=t,this.cs.vs(),this}getScaleLabelPadding(){return this.aI}setScaleLabelStrategy(t){return this.iI=t,this.cs.vs(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.cs.vs(),this}setAxisLabelStyle(t){return this.lI="function"==typeof t?t(this.lI):t,this.cs.vs(),this}getAxisLabelStyle(){return this.lI}setAxisLabelFont(t){return this.uI="function"==typeof t?t(this.uI):t,this.cs.vs(),this}getAxisLabelFont(){return this.uI}setAxisLabelEffect(t){return this.RF.Ss(t),this.cs.vs(),this}getAxisLabelEffect(){return this.RF.xs()}setAxisLabelPadding(t){return this.cI=t,this.cs.vs(),this}getAxisLabelPadding(){return this.cI}setAxisLabelStrategy(t){return this.sI=t,this.cs.vs(),this}setAxisStyle(t){return this.dI="function"==typeof t?t(this.dI):t,this.cs.vs(),this}getAxisStyle(){return this.dI}setNibStyle(t){return this.fI="function"==typeof t?t(this.fI):t,this.cs.vs(),this}getNibStyle(){return this.fI}setNibLength(t){return this.Df=t,this.cs.vs(),this}getNibLength(){return this.Df}setAutoAxis(t){return this.tI=t,this}getAutoAxis(){return this.tI}setMouseInteractions(t){return this.Lo=t,this}getMouseInteractions(){return this.Lo}setAxisScrollStrategy(t){return this.qF=t,this.cs.vs(),this}getAxisScrollStrategy(){return this.qF}setAxisInterval(t,i=0){return this.axisScale.K(i,t),this.cs.vs(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}Fe(t){super.Fe(t),ra.kp(this.bp,this.Sp);const i=this.gx.length,s=ra.Cp(this.bp,this.Sp),e=l(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+s)),h=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.sI){const t=Math.min(e.x,e.y)/2;for(let s=0;s<i;s+=1){const e=Od(s,i),r=Math.cos(e),n=Math.sin(e),o=this.gx[s].getLabelSize();Hd();const a=this.sI(Yd,s,i,this.gx[s].tag,e,this.cI),u=l(r*t+a.paddingX,n*t+a.paddingY);r>0?h.right=Math.max(h.right,u.x+.5*(1-a.alignmentX)*o.x-t):h.left=Math.max(h.left,-u.x+.5*(a.alignmentX+1)*o.x-t),n>0?h.top=Math.max(h.top,u.y+.5*(1-a.alignmentY)*o.y-t):h.bottom=Math.max(h.bottom,-u.y+.5*(a.alignmentY+1)*o.y-t)}}if(this.qF){const t=this._I();if(void 0!==t){const i=this.qF.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),s=this.qF.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.K(i,s)}}const r=l(this.pixelScale.x.getInnerStart()+(h.left+this.pixelScale.x.getInnerInterval()-h.right)/2,this.pixelScale.y.getInnerStart()+(h.bottom+this.pixelScale.y.getInnerInterval()-h.top)/2),n=Math.min(e.x/2-(h.left+h.right)/2,e.y/2-(h.bottom+h.top)/2);this.AI=m(this.jt.left+this.ya.left+h.left,this.jt.top+this.ya.top+s+h.top,this.jt.right+this.ya.right+h.right,this.jt.bottom+this.ya.bottom+h.bottom),this.Zm(r,n);for(const t of this.MS)t.aS();for(const t of this.MS)t.Fe();super.pp(),oa.Tp(this,this.IS.getIsUnderMouse(),!1,this.MS,(t=>oa.$c(this,t,this.MS)),((t,i)=>t.$c(i,!0)));for(const t of this.MS)t.Ay()}dispose(){return this.Wk.U(),this.mI.U(),this.TI.U(),this.Wx.U(),this.bA.U(),this.Fp.dispose(),this.Hm.U(),super.dispose()}getMinimumSize(){return l(this.AI.left+this.AI.right+100,this.AI.bottom+this.AI.top+100)}Zm(t,i){const s=this.gx.length,e=[];for(let h=0;h<s;h+=1){const r=Od(h,s),n=l(t.x+Math.cos(r)*i,t.y+Math.sin(r)*i);e.push(n)}Wd(this.IS,this.eI,t,e),Wd(this.PS,this.eI,t,e),this.IS.ru(i),this.PS.ru(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,l=r.length,u=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(u&&l<i){l>=a&&t.push(n());const o=t[l];Wd(o,s,e,r);const u=h*((l+1)/i);o.ru(u)}else l<t.length&&o(t[l]);t.length=u?i:0})(this.JF,this.hI,this.eI,t,i,e,this.pI,this.yI);for(const t of this.JF)t.ke(z).Ce(this.rI);for(let h=0;h<s;h+=1){const r=this.gx[h],n=Od(h,s);Hd();const o=void 0!==this.sI?this.sI(Yd,h,s,this.gx[h].tag,n,this.cI):void 0;r.Zm(t,e,h,n,i,this.eI,o)}((t,i,s,e,h,r,n,o,a,u)=>{const c=h.length,d=t.length;let f=0;if(void 0!==i)for(let a=0;a<c;a+=1){const A=h[a].tag,g=Od(a,c);for(let h=0;h<s+ +(0===a);h+=1){Ud.alignmentX=0,Ud.alignmentY=0,Ud.paddingX=0,Ud.paddingY=0;const p=i(Ud,a,c,A,g,h,s,e);if(void 0!==p){f>=d&&t.push(o());const i=t[f];f+=1;const e=(s-h)/s,c=$i(r,n[a],e);i.Ie(rs(c,l(p.paddingX,p.paddingY))).Ba(p.alignmentX).Ra(p.alignmentY).Eh(u(e))}}}for(let i=f;i<d;i+=1)a(t[i]);t.length=f})(this.KF,this.iI,this.hI,this.aI,this.gx,t,e,this.SI,this.vI,this.xI);for(const t of this.KF)t.ke(this.nI).Nh(this.oI)}_I(){let t,i;const s=this.getSeriesCount()>1;for(const e of this.gx)for(const h of this.MS){const r=h.getValue(e.tag,s);void 0!==r&&(t=void 0===t?r:Math.min(t,r),i=void 0===i?r:Math.max(i,r))}if(void 0!==t&&void 0!==i)return A(t,i)}}const Xd=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99998/i),n=Math.floor(99999/(i+1)),o=Math.floor(89999/(i+1)),a=510001+i*o;let l=0;return{FI:()=>{const i=t.II("dashboard ui",a+l);return l+=1,i},DI:()=>t.II("dashboard legend",51e4),BI:i=>{const a=1+i*s,l=100001+i*e,u=200002+i*h,c=300002+i*r,d=400001+i*n,f=510001+i*o;let A=0;return{cs:t,yp:(i,s)=>{const e=a+s;return t.II(i,e)},Ax:(i,s)=>{const e=l+s;return t.II(i,e)},Yk:(i,s)=>{const e=u+s;return t.II(i,e)},Um:(i,s)=>{const e=c+s;return t.II(i,e)},ux:(i,s,e)=>{const h=c+s;return t.LI(i,h,e)},xp:(i,s)=>{const e=d+s;return t.II(i,e)},op:i=>{const s=f+A,e=t.II(i,s);return A+=1,e},lp:()=>t.II("panel legend",500002+i),$m:()=>t.II("panel cursor",600001+i)}}}};class jd{constructor(t){this.L=new i.Eventer,this.S=t}M(t){return this.S=t,this.L.emit("set",t),this}_(){return this.S}N(t){return this.L.on("set",t)}W(t){return this.L.off(t,"set")}}const Zd={dh:()=>{},sh:!1,eh:0,hh:!1,oh:0,rh:!1,ah:0,lh:0,Ke:ze.fitting},Qd=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},Jd=(t,i,s,e,h,r,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const u=[e,h];"spark-line"===a&&of(t,i,u,r,n,o),"spark-bar"===a&&af({...t,winLoss:!1},i,u,r,n,o),"spark-win-loss"===a&&af({...t,winLoss:!0},i,u,r,n,o),"spark-area"===a&&lf(t,i,u,r,n,o),"spark-pie"===a&&uf(t,i,u,r,n,o)},Kd=(t,i,s,e)=>({x:tf(t.x,i.x,s.x,e),y:sf(t.y,i.y,s.y,e)}),qd=(t,i,s,e)=>({position:tf(t.position,i.x,s.x,e),high:sf(t.high,i.y,s.y,e),low:sf(t.low,i.y,s.y,e)}),tf=(t,i,s,e)=>{const h=Tt(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},sf=(t,i,s,e)=>{const h=Tt(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},ef=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&hf(a,i,s,h,r,n,o),"axis-band"===a.type&&rf(a,s,h,r,n,o),"constant-line"===a.type&&nf(a,s,e,h,r,n,o)},hf=(t,i,s,e,h,r,n)=>{const{value:o,fillStyle:a,shape:l,size:u,rotation:c}=t;let d={x:NaN,y:NaN};if("start"===o&&(d=i[0]),"end"===o&&(d=i[i.length-1]),"min"===o){d=i[0];for(const t of i)d=d.y<t.y?d:t}if("max"===o){d=i[0];for(const t of i)d=d.y>t.y?d:t}("object"!=typeof o||(d=Kd(o,s,e,h),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(d,h)))&&r.pointSet.add().Gt().sl(void 0!==l?l:exports.PointShape.Circle).Gh(c||0).tt(u||5).ke(a||n.sparkPointChartFillStyle).ol(d)},rf=(t,i,s,e,h,r)=>{const{axis:n,start:o,end:a,fillStyle:u,strokeStyle:c}=t;let d=l(Bi,Di),f=l(Bi,Di);"x"===n&&(d=Kd({x:o,y:Bi},i,s,e),f=Kd({x:a,y:Di},i,s,e)),"y"===n&&(d=Kd({x:Bi,y:o},i,s,e),f=Kd({x:Di,y:a},i,s,e));const A=e[0],g=e[1],p=Tt(d.x,A.x,A.x+g.x),m=Tt(d.y,A.y,A.y+g.y),y=Tt(f.x,A.x,A.x+g.x),S=Tt(f.y,A.y,A.y+g.y);h.rect.add().dl(p).fl(m).tt(l(y-p,S-m)).ke(u||r.sparkChartBandFillStyle).Ce(c||r.sparkChartBandStrokeStyle).Ce(rt)},nf=(t,i,s,e,h,r,n)=>{const{axis:o,value:a,strokeStyle:u}=t,c=a||0,d=i.y,f=s.y,A=i.x,g=s.x,p=[];if("y"===o&&d<=c&&c<=f){const t=Kd(l(A,c),{x:A,y:d},e,h),i=Kd(l(g,c),{x:A,y:d},e,h);p.push([t,i])}if("x"===o&&A<=c&&c<=g){const t=Kd(l(c,d),{x:A,y:d},e,h),i=Kd(l(c,f),{x:A,y:d},e,h);p.push([t,i])}p.length>0&&r.line.add().Ee(u||n.sparkChartConstantLineStrokeStyle).Oe(p[0][0]).Ve(p[0][1])},of=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&h.$n&&xt.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=Di,c=Bi,d=Di,f=Bi;for(let t=0;t<l;t+=1){const i=o[t];u=Math.min(u,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const A={x:c-u,y:f-d},g=o.map((t=>Kd(t,{x:u,y:d},A,s)));i.lineSet.add().ds(r).Ee(n||e.sparkLineChartStrokeStyle).Gt().ol(g),a&&ef(a,g,{x:u,y:d},{x:c,y:f},A,s,i,e)},af=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=t,d=t.barSize||1,f=t.gap||1,A=t.winLoss,g=l||0,p=f/d*1;let m=Di,y=Bi;if(A)m=-1,y=1;else for(const t of n)m=Math.min(m,t),y=Math.max(y,t);const S={x:0,y:A?-1:Math.min(0,m)},v={x:1*n.length+(n.length-1)*p,y:A?2:Math.max(y,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*p,y:A?t>=g?1:0:t},h=Kd({x:1*i+i*p,y:A?t>=g?0:-1:0},S,v,s),r=Kd(e,S,v,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.add().ds(r).Ie(t.position).pl(t.height).Al(t.width).ke((s=t.value,A?(s>=g?u:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).Ce(a||e.sparkBarChartStrokeStyle)}))},lf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,markers:l}=t,u=n.length;u>1e4&&h.$n&&xt.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=Di,f=Bi,A=Di,g=Bi;for(let t=0;t<u;t+=1){const i=n[t];d=Math.min(d,i.x),f=Math.max(f,i.x),A=Math.min(A,i.y),g=Math.max(g,i.y)}const p={x:f-d,y:g-A},m=[],y=[];for(const t of n){const i=c(t.x,t.y,A);m.push(qd(i,{x:d,y:A},p,s)),y.push(Kd(t,{x:d,y:A},p,s))}i.junction.add().ds(r).Gt().ol(m).ke(o||e.sparkAreaChartFillStyle),i.lineSet.add().ds(r).Gt().ol(y).Ee(a||e.sparkAreaChartStrokeStyle),l&&ef(l,y,{x:d,y:A},{x:f,y:g},p,s,i,e)},uf=(t,i,s,e,h,r)=>{const{data:n,strokeStyle:o}=t,a=n.map((t=>"number"==typeof t?t:t.value)),u=n.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=a.reduce(((t,i)=>t+i),0),d=Kd(l(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],A=f.x<=f.y?f.x/2:f.y/2;let g=90;a.forEach(((t,s)=>{const h=t/c*360;i.arc.add().ds(r).Ie(d).ru(A).au(0).hu(g).Ve(g+h).ke(u[s]||di(e.sparkPieChartFillStyle,s)).Ce(o||e.sparkPieChartStrokeStyle),g+=h}))};var cf,df,ff;!function(t){t[t.UpToDown=0]="UpToDown",t[t.LeftToRight=1]="LeftToRight"}(cf||(cf={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal",t[t.Both=2]="Both"}(df||(df={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(ff||(ff={}));class Af extends mr{constructor(t,i,s,e,h){super(),this.Bs=!1,this.k_={x:0,y:0,height:20,width:20},this.RI={x:10,y:10},this.Ts=t,this.EI=h,this.zI=new Sn(t,i,s,Ct,e).setMouseInteractions(!0),this.VI=t.sc(i,nr.Simple).ke(e.dataGridScrollBarButtonArrowFillStyle).Ce(e.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.Mu(this),this.zI.onMouseEnter((t=>t.setHighlight(1))),this.zI.onMouseLeave((t=>t.setHighlight(0)))}OI(){switch(this.EI){case ff.Up:this.VI.Sl([{x:this.k_.x,y:this.k_.y+this.RI.y/2},{x:this.k_.x+this.RI.x/2,y:this.k_.y-this.RI.y/2},{x:this.k_.x-this.RI.x/2,y:this.k_.y-this.RI.y/2}]);break;case ff.Down:this.VI.Sl([{x:this.k_.x-this.RI.x/2,y:this.k_.y+this.RI.y/2},{x:this.k_.x+this.RI.x/2,y:this.k_.y+this.RI.y/2},{x:this.k_.x,y:this.k_.y-this.RI.y/2}]);break;case ff.Left:this.VI.Sl([{x:this.k_.x-this.RI.x/2,y:this.k_.y},{x:this.k_.x+this.RI.x/2,y:this.k_.y+this.RI.y/2},{x:this.k_.x+this.RI.x/2,y:this.k_.y-this.RI.y/2}]);break;case ff.Right:this.VI.Sl([{x:this.k_.x-this.RI.x/2,y:this.k_.y+this.RI.y/2},{x:this.k_.x+this.RI.x/2,y:this.k_.y},{x:this.k_.x-this.RI.x/2,y:this.k_.y-this.RI.y/2}])}}Ie(t){return this.k_.x=t.x,this.k_.y=t.y,this}Ia(){return l(this.k_.x,this.k_.y)}tt(t){return this.k_.height=t.x,this.k_.width=t.y,this}ai(){return{x:this.k_.height,y:this.k_.width}}onMouseDown(t){return this.zI.onMouseDown(t)}onMouseUp(t){return this.zI.onMouseUp(t)}setFillStyle(t){return this.zI.setFillStyle(t),this}getFillStyle(){return this.zI.getFillStyle()}setStrokeStyle(t){return this.zI.setStrokeStyle(t),this}getStrokeStyle(){return this.zI.getStrokeStyle()}Fe(){return this.zI.Fe(),this.OI(),this}Ds(){return this.zI.setSize(l(this.k_.height,this.k_.width)).setPosition(l(this.k_.x,this.k_.y)),this}setVisible(t){return this.zI.setVisible(t),this.VI.setVisible(t),this}dispose(){return this.zI.dispose(),this.VI.dispose(),this}setMouseInteractions(t){return this.zI.setMouseInteractions(t),this}getMouseInteractions(){return this.zI.getMouseInteractions()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}getHighlight(){return this.zI.getHighlight()}setHighlight(t){return this.zI.setHighlight(Si(t)),this.L.emit("highlight",this,Boolean(t)),this.Ts.vs(),this}}const gf=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class pf{constructor(t,s,e,h,r,n,o){this.qc={x:0,y:0},this.k_={x:0,y:0,height:0,width:0},this.L=new i.Eventer,this.NI={min:l(0,0),max:l(0,0)},this.CM=!1,this.kM=!1,this.GI={x:0,y:0},this.wu=void 0,this.WI=l(0,0),this.UI={x:0,y:0},this.YI=0,this.HI=15,this.TM=(t,i)=>{this.CM=!0,this.bA.vs();const s=this.$I.getDraggingMode();this.wu=this.bA.cs.Ur(s===exports.UIDraggingModes.notDraggable?exports.MouseStyles.Restricted:s===exports.UIDraggingModes.draggable?exports.MouseStyles.Move:s===exports.UIDraggingModes.onlyHorizontal?exports.MouseStyles.Horizontal:exports.MouseStyles.Vertical),this.XI&&clearInterval(this.XI)},this.FM=()=>{this.CM=!1,this.bA.vs(),this.bA.cs.Yr(this.wu)},this.IM=t=>(this.kM=!0,this.GI=ct(this.bA.cs.De(t.x,t.y),this.bA.cs.ft,this.scale),!0),this.jI=(t,i)=>(this.ZI(i),this.XI=setInterval((()=>this.ZI(i)),300),!0),this.QI=()=>(clearInterval(this.XI),!0),this.PM=(t,i)=>{const s=this.$I.getDraggingMode();if(s!==exports.UIDraggingModes.notDraggable){const e=i||s,h=ct(this.bA.cs.De(t.x,t.y),this.bA.cs.ft,this.scale),r=l(e!==exports.UIDraggingModes.onlyVertical?gf(h.x,this.scale.x):this.k_.x,e!==exports.UIDraggingModes.onlyHorizontal?gf(h.y,this.scale.y):this.k_.y),n=l(r.x-this.GI.x,r.y-this.GI.y),o=l(this.$I.getPosition().x+n.x,this.$I.getPosition().y+n.y),a=this.JI(o),u={x:Math.abs(this.WI.x-a.x),y:Math.abs(this.WI.y-a.y)};return this.KI(u),this.UI.y>n.y&&(this.GI=h),this.Fe(),!0}return!1},this.DM=(t,i)=>{this.kM=!1,jt(i),this.bA.vs()},this.bA=t,this.tp=s,this.scale=h,this.contentScale=r,this.qI=o,this.tP=new Af(t,e,h,n,o===cf.UpToDown?ff.Up:ff.Left).setStrokeStyle(n.dataGridScrollBarButtonStrokeStyle).setFillStyle(n.dataGridScrollBarButtonFillStyle),this.iP=new Af(t,e,h,n,o===cf.UpToDown?ff.Down:ff.Right).setStrokeStyle(n.dataGridScrollBarButtonStrokeStyle).setFillStyle(n.dataGridScrollBarButtonFillStyle),this.$I=new Sn(t,e,h,Ct,n).setFillStyle(n.dataGridScrollBarFillStyle).setStrokeStyle(n.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(o===cf.UpToDown?exports.UIDraggingModes.onlyVertical:o===cf.LeftToRight?exports.UIDraggingModes.onlyHorizontal:exports.UIDraggingModes.notDraggable),this.sP=new Sn(s,e,h,Ct,n).setFillStyle(n.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(n.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.$I.onMouseEnter(this.TM),this.$I.onMouseLeave(this.FM),this.$I.onMouseDragStart(((t,i)=>this.IM(l(i.clientX,i.clientY))&&jt(i))),this.$I.onMouseDrag(((t,i)=>this.PM(l(i.clientX,i.clientY))&&jt(i))),this.$I.onMouseDragStop(this.DM),this.$I.onTouchStart(((t,i)=>this.IM(l(i.clientX,i.clientY))&&jt(i))),this.$I.onTouchMove(((t,i)=>this.PM(l(i.clientX,i.clientY))&&jt(i))),this.$I.onTouchEnd(this.DM),this.tP.onMouseDown(((t,i)=>this.jI(t,i)&&jt(i))),this.iP.onMouseDown(((t,i)=>this.jI(t,i)&&jt(i))),this.tP.onMouseUp(((t,i)=>this.QI()&&jt(i))),this.iP.onMouseUp(((t,i)=>this.QI()&&jt(i))),this.sP.onMouseWheel(((t,i)=>this.eP(i))),this.$I.onMouseWheel(((t,i)=>this.eP(i))),this.sP.onMouseDown(((t,i)=>this.jI(t,i)&&jt(i))),this.sP.onMouseUp(((t,i)=>this.QI()&&jt(i)))}hP(t){return this.k_=t,this}Al(t){return this.k_.width=t,this}rP(){return this.k_.width}nP(t){return this.WI=t,this}oP(t){return this.qc=t,this}aP(){return this.qc}lP(t){return this.HI=t,this}uP(){return this.qI}cP(t){let i;switch(this.qI){case cf.UpToDown:return i=t>0?Math.min(this.WI.y-this.NI.max.y,this.UI.y+t):Math.max(0,this.UI.y+t),i!==this.UI.y&&(this.KI({x:0,y:i}),this.Fe(),!0);case cf.LeftToRight:return i=Math.min(this.NI.max.x-this.WI.x,this.UI.x+t),i!==this.UI.x&&(this.KI({y:0,x:i}),this.Fe(),!0);default:return!1}}dP(t){let i;switch(this.qI){case cf.UpToDown:return i=Math.max(0,this.UI.y-t),i!==this.UI.y&&(this.KI({x:0,y:i}),this.Fe(),!0);case cf.LeftToRight:return i=t>0?Math.max(0,this.UI.x-t):Math.min(this.NI.max.x-this.WI.x,this.UI.x-t),i!==this.UI.x&&(this.KI({x:i,y:0}),this.Fe(),!0);default:return!0}}fP(t){switch(this.qI){case cf.UpToDown:return this.L.on("scrollY",t);case cf.LeftToRight:return this.L.on("scrollX",t)}return this.L.on("scrollY",t)}JI(t){switch(this.qI){case cf.UpToDown:if(t.y>this.NI.min.y)return l(t.x,this.NI.min.y);if(t.y<this.NI.max.y)return l(t.x,this.NI.max.y);break;case cf.LeftToRight:if(t.x<this.NI.min.x)return l(this.NI.min.x,t.y);if(t.x>this.NI.max.x)return l(this.NI.max.x,t.y)}return t}eP(t){t.deltaY>0&&this.AP()&&jt(t),t.deltaY<0&&this.gP()&&jt(t)}ZI(t){const i=ct(this.bA.cs.De(t.clientX,t.clientY),this.bA.cs.ft,this.scale);let s;const e=this.$I.getPosition(),h=this.$I.getSize();this.pP(i,e,h)?clearInterval(this.XI):(s=this.qI===cf.UpToDown?l(0,i.y-e.y>0?this.HI:-this.HI):l(e.x-i.x>0?this.HI:-this.HI,0),(s.x>0||s.y>0)&&this.mP(0!==s.x?Math.abs(s.x):Math.abs(s.y)),(s.x<0||s.y<0)&&this.yP(0!==s.x?Math.abs(s.x):Math.abs(s.y)))}pP(t,i,s){return this.qI===cf.UpToDown?t.y<i.y+s.y/2&&t.y>i.y-s.y/2:t.x>i.x-s.x/2&&t.x<i.x+s.x/2}SP(t){this.NI=t}mP(t){switch(this.qI){case cf.UpToDown:{const i=Math.max(0,this.UI.y-t);return i!==this.UI.y&&(this.KI({x:0,y:i}),this.Fe(),!0)}case cf.LeftToRight:{const i=Math.max(0,this.UI.x-t);return i!==this.UI.x&&(this.KI({x:i,y:0}),this.Fe(),!0)}default:return!1}}yP(t){switch(this.qI){case cf.UpToDown:{let i;return i=this.qc.x>this.k_.height?Math.min(this.WI.y-this.NI.max.y,this.UI.y+t):0,i!==this.UI.y&&(this.KI({x:0,y:i}),this.Fe(),!0)}case cf.LeftToRight:{const i=Math.min(this.NI.max.x-this.WI.x,this.UI.x+t);return i!==this.UI.x&&(this.KI({y:0,x:i}),this.Fe(),!0)}default:return!1}}gP(){return this.mP(this.HI)}AP(){return this.yP(this.HI)}KI(t){if(t.x===this.UI.x&&t.y===this.UI.y)return;let i;switch(this.UI=t,this.qI){case cf.UpToDown:i=this.UI.y*this.YI*this.contentScale.Ui().y,this.L.emit("scrollY",df.Vertical,i),this.bA.cs.vs();break;case cf.LeftToRight:i=this.UI.x*this.YI*this.contentScale.Ui().x,this.L.emit("scrollX",df.Horizontal,i)}}setVisible(t){return this.tP.setVisible(t),this.iP.setVisible(t),this.sP.setVisible(t),this.$I.setVisible(t),this}dispose(){return this.tP.dispose(),this.iP.dispose(),this.sP.dispose(),this.$I.dispose(),this.XI&&clearInterval(this.XI),this}Ds(){switch(this.vP(),this.xP(),this.qI){case cf.UpToDown:this.tP.Ie({x:this.k_.x,y:this.k_.y+this.k_.height-this.tP.ai().x/2}).tt(l(this.k_.width,this.k_.width)).Ds(),this.iP.Ie({x:this.k_.x,y:this.k_.y+10}).tt(l(this.k_.width,this.k_.width)).Ds(),this.sP.setSize({x:this.k_.width,y:this.k_.height-2*this.tP.ai().x}).setPosition({x:this.k_.x,y:this.k_.y+this.iP.ai().y+this.sP.getSize().y/2}),this.$I.setSize(l(this.k_.width,this.bP())),this.WI={x:this.k_.x,y:this.tP.Ia().y-this.tP.ai().y/2-this.$I.getSize().y/2},this.SP({min:{x:this.k_.x,y:this.tP.Ia().y-this.tP.ai().y/2-this.$I.getSize().y/2},max:{x:this.k_.x,y:this.iP.Ia().y+this.iP.ai().x/2+this.$I.getSize().y/2}});break;case cf.LeftToRight:this.tP.Ie({x:this.k_.x,y:this.k_.y}).tt(l(this.k_.height,this.k_.height)).Ds(),this.iP.Ie({x:this.k_.x+this.k_.width-this.iP.ai().x,y:this.k_.y}).tt(l(this.k_.height,this.k_.height)).Ds(),this.sP.setSize({y:this.k_.height,x:this.k_.width-2*this.tP.ai().y}).setPosition({x:this.k_.x+this.tP.ai().x/2+this.sP.getSize().x/2,y:this.k_.y}),this.$I.setSize(l(this.bP(),this.k_.height)),this.WI={x:this.tP.Ia().x+this.tP.ai().x/2+this.$I.getSize().x/2,y:this.k_.y},this.SP({min:{x:this.tP.Ia().x+this.tP.ai().x/2+this.$I.getSize().x/2,y:this.k_.y},max:{x:this.iP.Ia().x-this.iP.ai().x/2-this.$I.getSize().x/2,y:this.k_.y}})}return this.MP(),this}vP(){switch(this.qI){case cf.UpToDown:this._P()||this.setVisible(!1),this._P()&&this.setVisible(!0);break;case cf.LeftToRight:this.wP()||this.setVisible(!1),this.wP()&&this.setVisible(!0)}}xP(){switch(this.qI){case cf.UpToDown:this._P()||this.KI({x:0,y:0});break;case cf.LeftToRight:this.wP()||this.KI({x:0,y:0})}}_P(){return this.qc.x>this.k_.height}wP(){return this.qc.y>this.k_.width}bP(){switch(this.qI){case cf.UpToDown:return this.k_.height*(this.k_.height-2*this.tP.ai().x)/this.qc.x;case cf.LeftToRight:return this.k_.width*(this.k_.width-2*this.tP.ai().y)/this.qc.y;default:return 0}}MP(){switch(this.qI){case cf.UpToDown:this.YI=(this.qc.x-this.k_.height)/(this.NI.min.y-this.NI.max.y);break;case cf.LeftToRight:this.YI=(this.qc.y-this.k_.width)/(this.NI.max.x-this.NI.min.x)}}Fe(){switch(this.tP.Fe(),this.iP.Fe(),this.sP.Fe(),this.qI){case cf.UpToDown:this.$I.setPosition({x:this.k_.x,y:this.tP.Ia().y-this.tP.ai().y/2-this.$I.getSize().y/2-this.UI.y}).Fe();break;case cf.LeftToRight:this.$I.setPosition({y:this.k_.y,x:this.tP.Ia().x+this.tP.ai().x/2+this.$I.getSize().x/2+this.UI.x}).Fe()}return this}}class mf{constructor(t,i,s,e,h,r,n){switch(this.bA=t,this.tp=i,this.scale=e,this.contentScale=h,n){case df.Vertical:this.CP=this.kP(s,r,cf.UpToDown);break;case df.Horizontal:this.TP=this.kP(s,r,cf.LeftToRight);break;case df.Both:this.CP=this.kP(s,r,cf.UpToDown),this.TP=this.kP(s,r,cf.LeftToRight)}this.FP=Hs(new Xs(void 0,((t,i,s,e,h)=>{var r,n;0!==e.x&&(null===(r=this.TP)||void 0===r?void 0:r.dP(e.x))&&jt(h),0!==e.y&&(null===(n=this.CP)||void 0===n?void 0:n.cP(e.y))&&jt(h)})))}kP(t,i,s){return new pf(this.bA,this.tp,t,this.scale,this.contentScale,i,s)}rP(){return 20}oP(t){var i,s;return null===(i=this.CP)||void 0===i||i.oP(t),null===(s=this.TP)||void 0===s||s.oP(t),this}IP(t){var i;return null===(i=this.TP)||void 0===i||i.lP(t),this}PP(t){var i;return null===(i=this.CP)||void 0===i||i.lP(t),this}DP(t){const i=this.CP;return i&&i.eP(t),this}BP(t){return this.FP.onTouchStart(this,t),this}LP(t){return this.FP.onTouchMove(this,t),this}RP(t){return this.FP.onTouchEnd(this,t),this}onScroll(t){var i,s;return null===(i=this.TP)||void 0===i||i.fP(t),null===(s=this.CP)||void 0===s||s.fP(t),this}dispose(){var t,i;return null===(t=this.CP)||void 0===t||t.dispose(),null===(i=this.TP)||void 0===i||i.dispose(),this}Fe(){var t,i;return null===(t=this.CP)||void 0===t||t.Fe(),null===(i=this.TP)||void 0===i||i.Fe(),this}Ds(){var t,i,s,e;const h=this.scale.x,r=this.scale.y;return null===(t=this.CP)||void 0===t||t.hP({x:h.getInnerEnd()-10,y:r.getInnerStart()+20,height:r.getInnerEnd()-20,width:20}),null===(i=this.TP)||void 0===i||i.hP({x:h.getInnerStart()+10,y:r.getInnerStart()+10,height:20,width:h.getInnerEnd()-20}),null===(s=this.CP)||void 0===s||s.Ds(),null===(e=this.TP)||void 0===e||e.Ds(),this}}class yf extends ha{constructor(t,i,s,e,h,r){super(t,i,s,i.yp("dataGrid bg",0),e,i.cs.ts.dataGridBackgroundFillStyle,i.cs.ts.dataGridBackgroundStrokeStyle,i.cs.ts.dataGridTitleFont,i.cs.ts.dataGridTitleFillStyle,r),this.EP=[],this.zP=[],this.VP=[],this.OP=new Map,this.NP=!0,this.GP=!0,this.WP=!0,this.UP=!0,this.YP=!0,this.HP=!0,this.$P=!0,this.XP=!0,this.jP=!0,this.ZP=!0,this.QP=!0,this.JP=!0,this.KP=!0,this.qP=!0,this.tD=!0,this.iD=!0,this.sD=new Set,this.eD=new Set,this.hD=!0,this.rD=!0,this.nD=(t,i)=>{t.borders=void 0===i?Mf:{...t.borders,...i},this.oD(t),this.JP=!0,this.cs.vs()},this.oD=t=>{t.borders&&(!1===t.borders.top&&this.aD(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.lD,bottom:!1}})),!1===t.borders.bottom&&this.aD(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.lD,top:!1}})),!1===t.borders.left&&this.aD(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.lD,right:!1}})),!1===t.borders.right&&this.aD(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.lD,left:!1}})),!0===t.borders.top&&this.aD(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.lD,bottom:!0}})),!0===t.borders.bottom&&this.aD(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.lD,top:!0}})),!0===t.borders.left&&this.aD(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.lD,right:!0}})),!0===t.borders.right&&this.aD(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.lD,left:!0}})))},this.uD=(t,i)=>{const s=this.OP.get(t);s&&this.L.emit(Sf.cellMouseEnter,s,i)},this.cD=(t,i)=>{const s=this.OP.get(t);s&&this.L.emit(Sf.cellMouseLeave,s,i)},this.dD=(t,i)=>{const s=this.OP.get(t);s&&this.L.emit(Sf.cellMouseClick,s,i)},this.fD=(t,i)=>{const s=this.OP.get(t);s&&this.L.emit(Sf.cellMouseDoubleClick,s,i)},this.AD=(t,i)=>{const s=this.OP.get(t);s&&this.L.emit(Sf.cellMouseDown,s,i)},this.gD=(t,i)=>{const s=this.OP.get(t);s&&this.L.emit(Sf.cellMouseUp,s,i)},this.pD=(t,i)=>{const s=this.OP.get(t);s&&this.L.emit(Sf.cellMouseMove,s,i)},this.mD=(t,i)=>{const s=this.OP.get(t);s&&this.L.emit(Sf.cellMouseDrag,s,i)},this.yD=(t,i)=>{const s=this.OP.get(t);s&&this.L.emit(Sf.cellMouseDragStart,s,i)},this.SD=(t,i)=>{const s=this.OP.get(t);s&&this.L.emit(Sf.cellMouseDragStop,s,i)},this.vD=(t,i)=>{const s=this.OP.get(t);s&&(this.L.emit(Sf.cellMouseWheel,s,i),!i.defaultPrevented&&this.hD&&this.xD.DP(i))},this.bD=(t,i)=>{const s=this.OP.get(t);s&&(this.L.emit(Sf.cellTouchStart,s,i),!i.defaultPrevented&&this.rD&&this.xD.BP(i))},this.MD=(t,i)=>{const s=this.OP.get(t);s&&(this.L.emit(Sf.cellTouchMove,s,i),!i.defaultPrevented&&this.rD&&this.xD.LP(i))},this._D=(t,i)=>{const s=this.OP.get(t);s&&(this.L.emit(Sf.cellTouchEnd,s,i),!i.defaultPrevented&&this.rD&&this.xD.RP(i))},this.cs.Gn(fo.sf),this.bp.Eh("Data Grid"),this.wD=s.d2({scaleXYConstructor:Ls}),this.wD.x.sg=Zd,this.CD=s.d2({scaleXYConstructor:Ls}),this.kD={x:0,y:0},this.TD=this.ts.dataGridTextFont,this.FD=this.ts.dataGridTextFillStyle,this.lD={top:!0,bottom:!0,left:!0,right:!0},this.ID=this.ts.dataGridCellBackgroundFillStyle,this.PD=this.ts.dataGridBorderStrokeStyle,this.DD="left-center",this.BD={left:5,right:5,bottom:5,top:5},this.LD=i.Ax("dataGrid grid bg",0),this.RD=i.Ax("dataGrid cell bg",1),this.ED=i.Um("dataGrid cell content",0),this.zD=i.Um("dataGrid scrollbar bg",1),this.VD=i.Um("dataGrid scrollbar fg",2),this.xD=this.OD(),this.onBackgroundMouseWheel(((t,i)=>{this.hD&&this.xD.DP(i)})),this.onBackgroundTouchStart(((t,i)=>{this.rD&&this.xD.BP(i)})),this.onBackgroundTouchMove(((t,i)=>{this.rD&&this.xD.LP(i)})),this.onBackgroundTouchEnd(((t,i)=>{this.rD&&this.xD.RP(i)})),this.ND=this.LD.Te(this.wD).ke(this.ts.dataGridBackgroundFillStyle).Ce(rt).setMouseInteractions(!1),this.GD=this.ED.Rg(this.wD).setMouseInteractions(!1),this.WD=new Qa((()=>this.RD.Te(this.wD).setMouseInteractions(!0).setMouseEnterEventHandler(this.uD).setMouseLeaveEventHandler(this.cD).setMouseClickEventHandler(this.dD).setMouseDoubleClickEventHandler(this.fD).setMouseDownEventHandler(this.AD).setMouseUpEventHandler(this.gD).setMouseMoveEventHandler(this.pD).setMouseDragEventHandler(this.mD).setMouseDragStartEventHandler(this.yD).setMouseDragStopEventHandler(this.SD).setMouseWheelEventHandler(this.vD).setTouchStartEventHandler(this.bD).setTouchMoveEventHandler(this.MD).setTouchEndEventHandler(this._D))),this.UD=new Qa((()=>this.ED.Te(this.wD).setMouseInteractions(!1))),this.YD=new Qa((()=>this.ED.Dr(this.wD).setMouseInteractions(!1))),this.HD=new Qa((()=>this.ED.sy(this.wD,{},[Ua.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1))),this.$D=new Qa((()=>this.ED.ze(this.wD).setMouseInteractions(!1))),this.XD=new Qa((()=>this.ED.bS(this.wD).setMouseInteractions(!1))),this.jD=new Qa((()=>this.ED.Te(this.wD).setMouseInteractions(!1))),this.ZD=new Qa((()=>this.ED.uw(this.wD).setMouseInteractions(!1))),this.QD=new Qa((()=>this.ED.Kc(this.wD).setMouseInteractions(!1))),this.mp(h,this.uiScale),this.onResize((()=>{this.NP=!0,this.cs.vs(),this.wD.tt(this.pixelScale.ai()),this.CD.tt(this.pixelScale.ai())})),this.JD=this.hs.yg([this.ND])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}Qd(){return[]}dispose(){return super.dispose(),this.LD.U(),this.RD.U(),this.ED.U(),this.zD.U(),this.VD.U(),ia(this.wD),ia(this.CD),this.xD.dispose(),this.YD.my(),this.WD.my(),this.UD.my(),this.HD.my(),this.$D.my(),this.XD.my(),this.jD.my(),this.ZD.my(),this.QD.my(),this}Z(){return super.Z(),this.wD.Z(),this.CD.Z(),this}J(){return super.J(),this.wD.J(),this.CD.J(),this}setBackgroundEffect(t){return this.JD.Ss(t),this.cs.vs(),this}getBackgroundEffect(){return this.JD.xs()}setInteractionScrollOnWheel(t){return this.hD=t,this}getInteractionScrollOnWheel(){return this.hD}setInteractionPanOnTouch(t){return this.rD=t,this}getInteractionPanOnTouch(){return this.rD}onCellMouseEnter(t){return this.L.on(Sf.cellMouseEnter,t)}offCellMouseEnter(t){return this.L.off(t)}onCellMouseLeave(t){return this.L.on(Sf.cellMouseLeave,t)}offCellMouseLeave(t){return this.L.off(t)}onCellMouseClick(t){return this.L.on(Sf.cellMouseClick,t)}offCellMouseClick(t){return this.L.off(t)}onCellMouseDoubleClick(t){return this.L.on(Sf.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.L.off(t)}onCellMouseDown(t){return this.L.on(Sf.cellMouseDown,t)}offCellMouseDown(t){return this.L.off(t)}onCellMouseUp(t){return this.L.on(Sf.cellMouseUp,t)}offCellMouseUp(t){return this.L.off(t)}onCellMouseMove(t){return this.L.on(Sf.cellMouseMove,t)}offCellMouseMove(t){return this.L.off(t)}onCellMouseDrag(t){return this.L.on(Sf.cellMouseDrag,t)}offCellMouseDrag(t){return this.L.off(t)}onCellMouseDragStart(t){return this.L.on(Sf.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.L.off(t)}onCellMouseDragStop(t){return this.L.on(Sf.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.L.off(t)}onCellMouseWheel(t){return this.L.on(Sf.cellMouseWheel,t)}offCellMouseWheel(t){return this.L.off(t)}onCellTouchStart(t){return this.L.on(Sf.cellTouchStart,t)}offCellTouchStart(t){return this.L.off(t)}onCellTouchMove(t){return this.L.on(Sf.cellTouchMove,t)}offCellTouchMove(t){return this.L.off(t)}onCellTouchEnd(t){return this.L.on(Sf.cellTouchEnd,t)}offCellTouchEnd(t){return this.L.off(t)}setGridBackgroundFillStyle(t){return this.ND.ke(t),this.cs.vs(),this}getGridBackgroundFillStyle(){return this.ND.zh()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const r=s,n=e,o=h;let a=[];for(let s=t;s<t+r;s+=1)for(let t=i;t<i+n;t+=1){const i=this.aD(s,t);i&&a.push(i)}a=mi(a);let l={highlight:0};for(const t of a){const i=this.EP.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.EP.splice(i,1))}const u={...l,column:t,row:i,columnSpan:r,rowSpan:n,content:o};this.EP.push(u),this.UP=!0,"string"==typeof u.content||"number"==typeof u.content?this.GP=!0:this.WP=!0,this.cs.vs()}else this.KD(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.KD(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.KD(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.KD(e,s,i)}return this}setColumnWidth(t,i){let s=this.zP.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.zP.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.zP.splice(this.zP.indexOf(s),1):(s.min=i,s.max=i),this.HP=!0,this.cs.vs(),this}setRowHeight(t,i){let s=this.VP.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.VP.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.VP.splice(this.VP.indexOf(s),1):(s.min=i,s.max=i),this.HP=!0,this.cs.vs(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=y(i,i,i,i)),this.qD(t,(t=>this.tB(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=y(i,i,i,i)),this.iB(t,(t=>this.tB(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=y(s,s,s,s)),this.aD(t,i,(t=>this.tB(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=y(t,t,t,t)),this.BD={...this.BD,...t},this.sB((t=>this.tB(t,this.BD))),this}setCellBorders(t,i,s){return this.aD(t,i,(t=>this.nD(t,s))),this}setRowBorders(t,i){return this.iB(t,(t=>this.nD(t,i))),this}setColumnBorders(t,i){return this.qD(t,(t=>this.nD(t,i))),this}setCellsBorders(t){return this.lD=void 0===t?Mf:t,this.sB((t=>this.nD(t,this.lD))),this}setCellsBorderStrokeStyle(t){return this.PD="function"==typeof t?t(this.PD):t,this.qP=!0,this.cs.vs(),this}setColumnTextFillStyle(t,i){return this.qD(t,(t=>this.eB(t,i))),this}setRowTextFillStyle(t,i){return this.iB(t,(t=>this.eB(t,i))),this}setCellTextFillStyle(t,i,s){return this.aD(t,i,(t=>this.eB(t,s))),this}setCellsTextFillStyle(t){return this.FD="function"==typeof t?t(this.FD):t,this.sB((t=>this.eB(t,this.FD))),this}setColumnTextFont(t,i){return this.qD(t,(t=>this.hB(t,i))),this}setRowTextFont(t,i){return this.iB(t,(t=>this.hB(t,i))),this}setCellTextFont(t,i,s){return this.aD(t,i,(t=>this.hB(t,s))),this}setCellsTextFont(t){return this.TD="function"==typeof t?t(this.TD):t,this.sB((t=>this.hB(t,this.TD))),this}setColumnContentAlignment(t,i){return this.qD(t,(t=>this.rB(t,i))),this}setRowContentAlignment(t,i){return this.iB(t,(t=>this.rB(t,i))),this}setCellContentAlignment(t,i,s){return this.aD(t,i,(t=>this.rB(t,s))),this}setCellsContentAlignment(t){return this.DD=t,this.sB((t=>this.rB(t,this.DD))),this}setCellBackgroundFillStyle(t,i,s){return this.aD(t,i,(t=>this.nB(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.qD(t,(t=>this.nB(t,i))),this}setRowBackgroundFillStyle(t,i){return this.iB(t,(t=>this.nB(t,i))),this}setCellsBackgroundFillStyle(t){return this.ID="function"==typeof t?t(this.ID):t,this.sB((t=>this.nB(t,this.ID))),this}setCellHighlight(t,i,s){return this.aD(t,i,(t=>{t.highlight=Si(s)})),this.KP=!0,this.cs.vs(),this}setColumnHighlight(t,i){const s=Si(i);return this.qD(t,(t=>{t.highlight=s})),this.KP=!0,this.cs.vs(),this}setRowHighlight(t,i){const s=Si(i);return this.iB(t,(t=>{t.highlight=s})),this.KP=!0,this.cs.vs(),this}removeCell(t,i){return this.aD(t,i,(t=>this.EP.splice(this.EP.indexOf(t),1))),this.YP=!0,this.cs.vs(),this}removeRow(t){return this.iB(t,(t=>this.EP.splice(this.EP.indexOf(t),1))),this.EP.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.YP=!0,this.cs.vs(),this}removeColumn(t){return this.qD(t,(t=>this.EP.splice(this.EP.indexOf(t),1))),this.EP.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.YP=!0,this.cs.vs(),this}removeCells(){return this.EP.splice(0),this.YP=!0,this.cs.vs(),this}getColumnMax(){return 0===this.EP.length?0:this.EP.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.EP.length?0:this.EP.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}Fe(t){super.Fe(t),ra.kp(this.bp,this.Sp),super.pp();const i=Math.round(this.PD.O()),s=i/2;let e=this.GP||this.WP||this.UP||this.YP||this.HP||this.$P||this.QP||this.JP||this.qP||this.iD;if(e){this.EP.forEach((t=>{this.eD.add(t.column)})),this.EP.forEach((t=>{this.sD.add(t.row)}));const t=this.YD.gy(),h=this.oB(s,t);t.finishPlot();const r=this.aB(this.eD.size,h),n=this.lB(this.sD.size,h),o=r.reduce(Gi,0)+i,a=n.reduce(Gi,0)+i,l=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.uB){const t=this.uB.columnWidths.every(((t,i)=>t===r[i])),i=this.uB.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(e=!1)}this.uB={columnWidths:r,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:h}}const h=e||this.WP||this.UP||this.YP||this.XP||this.jP||this.ZP||this.JP||this.KP||this.qP||this.NP||this.iD;if((h||this.tD)&&this.uB){const t=this.pixelScale.getInnerIntervalPixels(),e=ra.Cp(this.bp,this.Sp),r=[this.ya.left+s,this.ya.right+s],n=[this.ya.bottom+s,this.ya.top+e+s],o={x:t.x-r[0]-r[1],y:t.y-n[0]-n[1]},a=[this.ya.left,this.ya.right],l=[this.ya.bottom,this.ya.top+e],u={x:Math.round(t.x-a[0]-a[1]),y:Math.round(t.y-l[0]-l[1])},c={x:Math.ceil(s),y:Math.floor(u.y-s)};this.CD.zi(r).Vi(n).Oi(0,o.x).Ni(0,o.y),this.xD.oP({x:this.uB.dataGridHeight,y:this.uB.dataGridWidth}).Ds().Fe();const d={x:Math.round(this.kD.x),y:Math.round(Math.min(0,this.kD.y))};this.wD.zi(a).Vi(l).Oi(d.x,u.x+d.x).Ni(d.y,u.y+d.y),this.ND.Ie({x:c.x,y:c.y});const f={x:this.wD.x.hi(),y:this.wD.y.hi()+this.xD.rP(),width:this.wD.x.ni()+i-this.xD.rP(),height:this.wD.y.ni()+i};this.ED.tx(f),this.RD.tx(f),this.LD.tx(f);const A=this.uB,g=[{x:this.wD.x.getInnerStart(),y:this.wD.y.getInnerStart()},{x:this.wD.x.getInnerEnd(),y:this.wD.y.getInnerStart()},{x:this.wD.x.getInnerEnd(),y:this.wD.y.getInnerEnd()},{x:this.wD.x.getInnerStart(),y:this.wD.y.getInnerEnd()}];A.cellsContentSizes.forEach((t=>{var i;const s={x:c.x+A.columnWidthsCumulative[t.cell.column],y:c.y-A.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},e={x:s.x+A.columnWidths[t.cell.column],y:s.y+A.rowHeights[t.cell.row]},h=Vi([s,{x:e.x,y:s.y},e,{x:s.x,y:e.y}],g);null===(i=t.text)||void 0===i||i.setVisible(h)})),h&&this.cB(c,this.uB,i)}this.NP=!1,this.GP=!1,this.WP=!1,this.UP=!1,this.YP=!1,this.HP=!1,this.$P=!1,this.XP=!1,this.jP=!1,this.ZP=!1,this.QP=!1,this.JP=!1,this.KP=!1,this.qP=!1,this.tD=!1,this.iD=!1}oB(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.EP){const{content:h}=t,r={...this.BD,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof h||"number"==typeof h){const s=String(h);n=i.add(),l=n.Eh(s).Nh(t.textFont||this.TD).Ds().Zc()}if(Qd(h)&&(o=h,l={x:200,y:50}),on(h)){const t=this.cs.dB(h);t.fB()?(a=h,l=a.ai()):t.AB((()=>{this.iD=!0,this.cs.vs()}))}if(n||o||a){r.top=Math.round(r.top),r.left=Math.round(r.left),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom);const i={x:Math.round(l.x+r.left+r.right+e.left+e.right),y:Math.round(l.y+r.top+r.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:r,cellMargin:e})}}return s}cB(t,i,s){const{dataGridWidth:e,dataGridHeight:h,cellsContentSizes:r,columnWidths:n,columnWidthsCumulative:o,rowHeights:a,rowHeightsCumulative:l}=i,u={x:e-s,y:-h+s};this.ND.tt(u),this.GD.Ee(this.PD),this.OP.clear();const c={cellBackground:this.WD.gy(),cellIconRect:this.UD.gy(),lineSet:this.HD.gy(),line:this.$D.gy(),pointSet:this.XD.gy(),rect:this.jD.gy(),junction:this.ZD.gy(),arc:this.QD.gy()},d=[];for(const i of r){const{cell:e,text:h,sparkChart:r,icon:u,cellPadding:f,cellMargin:A}=i,g={column:e.column,row:e.row},p={x:t.x+o[e.column],y:t.y-l[e.row+e.rowSpan]},m={x:p.x+A.left,y:p.y+A.bottom},y={x:m.x+f.left,y:m.y+f.bottom},S={x:new Array(e.columnSpan).fill(0).reduce(((t,i,s)=>t+n[e.column+s]),0),y:new Array(e.rowSpan).fill(0).reduce(((t,i,s)=>t+a[e.row+s]),0)},v={x:S.x-A.left-A.right,y:S.y-A.top-A.bottom},x={x:v.x-f.left-f.right,y:v.y-f.top-f.bottom};if(h){const t=bf(y,x,e.contentAlignment||this.DD);h.Ie(t[0]).za({x:t[1],y:t[2]}).ke(this.gB(e.textFillStyle||this.FD,e.content,this.FD)).ds(e.highlight)}const b=this.gB(e.backgroundFillStyle||this.ID,e.content);if(b!==z){const t=c.cellBackground.add();t.Ie(p).tt(S).ke(b).Ce(rt).ds(e.highlight),this.OP.set(t,g)}const M=e.borders||this.lD;if(M&&xf(p,S,M,s,d),r){const t=y,i=x;Jd(r,c,this.wD,t,i,this.ts,this.dA,e.highlight)}if(u){const t=u.ai(),i=bf(y,x,e.contentAlignment||this.DD);c.cellIconRect.add().Ie({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).tt(t).ke(new Kr({source:u.nc,fitMode:exports.ImageFitMode.Stretch})).Ce(rt).ds(e.highlight)}}this.GD.Gt();for(const t of d)this.GD.Vr().zg(t[0],t[1]);c.cellBackground.finishPlot(),c.cellIconRect.finishPlot(),c.lineSet.finishPlot(),c.line.finishPlot(),c.pointSet.finishPlot(),c.rect.finishPlot(),c.junction.finishPlot(),c.arc.finishPlot()}aB(t,i){const s=new Array(t).fill(0);for(const t of this.eD.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.zP.find((i=>i.column===t)),r=h?Tt(e,void 0!==h.min?h.min:Bi,void 0!==h.max?h.max:Di):e;s[t]=r}return s}lB(t,i){const s=new Array(t).fill(0);for(const t of this.sD.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.VP.find((i=>i.row===t)),r=h?Tt(e,void 0!==h.min?h.min:Bi,void 0!==h.max?h.max:Di):e;s[t]=r}return s}gB(t,i,s){if($(t)){try{const s=Number(i);return new G({color:t.getPalette().getColors(s)})}catch(t){}return s||z}return t}eB(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.FD):i,this.ZP=!0,this.cs.vs()}hB(t,i){t.textFont="function"==typeof i?i(t.textFont||this.TD):i,this.QP=!0,this.cs.vs()}nB(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.ID):i,this.jP=!0,this.cs.vs()}rB(t,i){t.contentAlignment=i,this.XP=!0,this.cs.vs()}tB(t,i){t.padding={...t.padding,...i},this.$P=!0,this.cs.vs()}KD(t,i,s){let e=this.aD(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.EP.push(e),this.UP=!0),"string"==typeof e.content||"number"==typeof e.content?this.GP=!0:this.WP=!0,this.cs.vs()}sB(t){this.EP.forEach((i=>t(i)))}aD(t,i,s){const e=this.EP.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}qD(t,i){const s=this.EP.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}iB(t,i){const s=this.EP.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}OD(){return new mf(this.VD,this.zD,this.CD,this.CD,this.wD,this.ts,df.Both).onScroll(((t,i)=>{this.uB&&(t===df.Vertical&&(this.kD.y=-i),t===df.Horizontal&&(this.kD.x=i),this.tD=!0,this.cs.vs())})).IP(50).PP(12)}}const Sf={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var vf;exports.DataGridCellContentAlignmentOptions=void 0,(vf=exports.DataGridCellContentAlignmentOptions||(exports.DataGridCellContentAlignmentOptions={})).Center="center",vf.RightCenter="right-center",vf.LeftCenter="left-center",vf.RightTop="right-top",vf.LeftTop="left-top",vf.RightBottom="right-bottom",vf.LeftBottom="left-bottom",vf.CenterTop="center-top",vf.CenterBottom="center-bottom";const xf=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},bf=(t,i,s)=>{const e=t.x,h=t.x+i.x,r=t.x+i.x/2,n=t.y+i.y,o=t.y,a=t.y+i.y/2;switch(s){case"left-center":return[l(e,a),-1,0];case"right-center":return[l(h,a),1,0];case"center":return[l(r,a),0,0];case"left-bottom":return[l(e,o),-1,-1];case"right-bottom":return[l(h,o),1,-1];case"center-bottom":return[l(r,o),0,-1];case"left-top":return[l(e,n),-1,1];case"right-top":return[l(h,n),1,1];case"center-top":return[l(r,n),0,1]}return xi(0,`Unidentified DataGrid cell content alignment option: ${s}`)},Mf={top:!1,bottom:!1,left:!1,right:!1};class _f extends Qe{constructor(t,i,s,e,h,r){super(t,{vr(){},Sr(){},Mr(){}},e,i,s,{numeric:i.xAxisNumericTicks,datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.hs=r,this.Ts=h,this.Rh=h.Dr(t.pB).Nh(this.ts.barChartCategoryAxisTitleFont||this.ts.xAxisTitleFont).ke(this.ts.barChartCategoryAxisTitleFillStyle||this.ts.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Fs.getWidth({x:0,y:-90})),this.Uh=this.hs.yg([this.Rh]).Ss(i.effectsText),this.mB=h.ze(t.pB).Ee(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Mg=t,this._g=t):"object"==typeof t&&(this.Mg=t.min,this._g=t.max),this.chart.cs.vs(),this}getThickness(){return{min:this.Mg,max:this._g}}setStrokeStyle(t){return this.mB.Ee(t),this.chart.cs.vs(),this}getStrokeStyle(){return this.mB.cu()}Ds(){if(!this.ji)return{Tg:0,Fg:0,Od:Tt(0,void 0!==this.Mg?this.Mg:0,void 0!==this._g?this._g:Di)};const t=this.mB.cu().O()/2,i=this.chart.Fs.getHeight(this.Rh.Ds().Zc());return{Tg:t,Fg:i,Od:t+i}}Fe(t,i,s,e){const h=this.getInterval(),r=this.chart.valueAxis.getInterval();this.mB.Oe(this.chart.Fs.toPoint(h.start,r.start)).Ve(this.chart.Fs.toPoint(h.end,r.start)).setVisible(this.ji),this.Rh.Ie(this.chart.Fs.toPoint(.5*(h.start+h.end),this.chart.valueAxis.ft.mi(r.start,-(t.Tg+e.labelMarginBeforeCategoryAxisPixels)))).za(this.chart.Fs.toPoint(0,1)).setVisible(this.ji)}setMouseInteractions(t){return this}cr(t,i){return new Je(i,t,this.Ts,this.chart.pB)}dr(t,i){return{}}wr(t,i){return i}kr(t,i,s){return{min:t,max:i}}}class wf extends Qe{constructor(t,i,s,e,h,r,n){super(t,{vr:()=>{var i;if(t.yB){if("positive"===t.SB||"bipolar"===t.SB){if("after-bar"===(null===(i=t.vB)||void 0===i?void 0:i.position)){const i=this.ft.ni();return this.ft.mi(t.yB.max,Math.min(this.chart.Fs.getHeight(this.chart.xB())+t.vB.labelMargin,.3*i))}return t.yB.max}return t.bB?Tt(-1,-1e-6,t.yB.max):0}},Sr:()=>{var i;if(t.yB){if("negative"===t.SB||"bipolar"===t.SB){if("after-bar"===(null===(i=t.vB)||void 0===i?void 0:i.position)){const i=this.ft.ni();return this.ft.mi(t.yB.min,-Math.min(this.chart.Fs.getHeight(this.chart.xB())+t.vB.labelMargin,.3*i))}return t.yB.min}return t.bB?Tt(1,1e-6,t.yB.min):0}},Mr:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.chart=t,this.hs=r,this.Ts=h,this.Rh=h.Dr(t.pB).Nh(this.ts.barChartValueAxisTitleFont||this.ts.yAxisTitleFont).ke(this.ts.barChartValueAxisTitleFillStyle||this.ts.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Fs.getHeight({x:0,y:-90})),this.Uh=this.hs.yg([this.Rh]).Ss(i.effectsText),this.mB=h.ze(t.pB).Ee(i.barChartValueAxisStrokeStyle||this.ts.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Mg=t,this._g=t):"object"==typeof t&&(this.Mg=t.min,this._g=t.max),this.chart.cs.vs(),this}getThickness(){return{min:this.Mg,max:this._g}}setStrokeStyle(t){return this.mB.Ee(t),this.chart.cs.vs(),this}getStrokeStyle(){return this.mB.cu()}setTickStrategy(t,i){return super.Ih(t,i)}Ds(t){if(!this.ji)return this.Yh(),{Tg:0,Fg:0,Od:Tt(0,void 0!==this.Mg?this.Mg:0,void 0!==this._g?this._g:Di)};const i=this.chart.Fs.getWidth(this.chart.pB).ni(),s=this.ft.ni();this.tr({physicalAxisSize:s,oppositeAxisSize:i,plotLines:t});let e=0;for(const t of this.Qe.values())for(const i of t.values()){const t=i.xh.ur,s=this.chart.Fs.getWidth(i.Ye.Zc()),h=t.getTickLength()+t.getTickPadding()+s+t.getLabelPadding();e=Math.max(e,h)}const h=e+this.mB.cu().O()/2,r=this.chart.Fs.getWidth(this.Rh.Ds().Zc());return{Tg:h,Fg:r,Od:Tt(h+r,void 0!==this.Mg?this.Mg:0,void 0!==this._g?this._g:Di)}}Fe(t){const i=this.getInterval();this.mB.Oe(this.chart.Fs.toPoint(-.5,this.Ph)).Ve(this.chart.Fs.toPoint(-.5,this.Dh)).setVisible(this.ji);const s="logarithmic"===this.Th.type?Math.sqrt(i.start+i.end):.5*(i.start+i.end),e=this.chart.Fs.toPoint(this.chart.categoryAxis.ft.mi(-.5,t.Tg*this.chart.Fs.MB),s),h=this.chart.Fs.toPoint(this.chart.Fs._B,0);this.Rh.Ie(e).za(h).setVisible(this.ji)}setMouseInteractions(t){return this}cr(t,i){return new Je(i,t,this.Ts,this.chart.pB)}dr(t,i){const s=t.xh.ur,e=this.chart.Fs.toPoint(-.5,t.S),h=this.chart.pB.mi(e,this.chart.Fs.toPoint(s.getTickLength()*this.chart.Fs.MB,0)),r=this.chart.pB.mi(e,this.chart.Fs.toPoint(s.gridStrokeLength*i.oppositeAxisSize*-this.chart.Fs.MB,0)),n=this.chart.pB.mi(h,this.chart.Fs.toPoint(s.getTickPadding()*this.chart.Fs.MB,0));t.Ye.Ie(n).za(this.chart.Fs.toPoint(this.chart.Fs._B,s.getLabelAlignment())).Gh(s.getLabelRotation()),s.tickStyle!==rt&&0!==s.tickLength&&i.plotLines.add({positions:[e,h]},{lineStyle:s.tickStyle}),s.gridStrokeStyle!==rt&&s.gridStrokeLength>0&&i.plotLines.add({positions:[e,r]},{lineStyle:s.gridStrokeStyle})}wr(t,i){return"linear"===this.Th.type?uo(t,i,this.ft):co(t,i,this.ft)}kr(t,i,s){return{min:t,max:i}}}class Cf extends Xl{constructor(t,i,s,e,h,r,n){super(t,i,s,e),this.Go=Fi(),this.S=0,this.wB=!1,this.chart=t,this.Ki=t,this.category=h,this.subCategory=r,this.Ms=h,this.be=di(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,n),this.Me=di(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,n),this.onVisibleStateChanged((()=>{this.Ki.CB()})),this.onDispose((()=>{this.Ki.CB(),this.Ki.kB.delete(this)}))}setValue(t){return this.wB=!0,this.S=t,this.Ki.CB(),this.Ki.cs.vs(),this.Ki.kB.delete(this),this}getValue(){return this.S}get value(){return this.S}setFillStyle(t){return this.be="function"==typeof t?t(this.be):t,this.Ki.CB(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.Me="function"==typeof t?t(this.Me):t,this.Ki.CB(),this}getStrokeStyle(){return this.Me}qy(){return this.iS}$c(t,i){return Ia(t,this.Ki.engine.scale,this.Ki.Om(new Aa,this.category,this.S,this).Qu(),this,void 0)}solveNearestFromScreen(t){}setEffect(t){return this.Ki.setBarsEffect(t),this}}const kf=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value),Tf=(t,i,s)=>{const e=t.Td.filter((t=>void 0!==t)),h=e.map((t=>s(t.sizePixels))).reduce(((t,i)=>Math.max(t,i)),1),r=Math.ceil(h/(i/e.length));return r<=1?e:e.filter(((t,i)=>i%r==0))};class Ff extends fl{constructor(t,i,s,e,h,r,n){var o;let a;super(t,i,s,i.yp("barChart bg",0),e,i.cs.ts.barChartBackgroundFillStyle||i.cs.ts.chartXYBackgroundFillStyle,i.cs.ts.barChartBackgroundStrokeStyle||i.cs.ts.chartXYBackgroundStrokeStyle,i.cs.ts.barChartTitleFont||i.cs.ts.chartXYTitleFont,i.cs.ts.barChartTitleFillStyle||i.cs.ts.chartXYTitleFillStyle,r),this.coordsBars="barChart",this.TB=If.Descending,this.FB=this.ts.barChartCategoryLabels,this.vB=this.ts.barChartValueLabelsAfterBars,this.IB=!1,this.b_=ki(),this.PB=new Map,this.kB=new Map,this.SB="positive",this.DB="columns",this.BB=!0,this.LB=new Map,this.RB={speed:1},this.xm={speed:1},this.EB=.08,this.Vm=exports.AutoCursorModes.snapToClosest,this.Om=(t,i,s,e)=>{this.categoryAxis.getTitle().length>0&&t.addRow(this.categoryAxis.getTitle()),t.addRow({text:i,font:{weight:"bold"}}),this.valueAxis.getTitle().length>0&&t.addRow(this.valueAxis.getTitle());const h=[];return e.subCategory&&e.subCategory.length>0&&h.push(e.subCategory),h.push(this.valueAxis.formatValue(s)),t.addRow(...h),t},this.An=(t,i,s,e,h)=>{this.pB.tt(e,h)},this.cs.Gn(fo.af),this.Fs="horizontal"===(null==n?void 0:n.type)?Df:Pf,this.bp.Eh("Bar Chart"),this.zB=i.Um("barChart plotting 1",0),this.VB=i.Um("barChart plotting 2",1),this.bB="logarithmic"===(null===(o=null==n?void 0:n.valueAxis)||void 0===o?void 0:o.type),this.bB?"horizontal"===this.Fs.OB?(a=s.d1({scale1DConstructor:Ps,dimension:"y"}),this.pB=(new Rs).Ei(s.d1({scale1DConstructor:bs,dimension:"x"}),a)):(a=s.d1({scale1DConstructor:Ps,dimension:"x"}),this.pB=(new Rs).Ei(a,s.d1({scale1DConstructor:bs,dimension:"y"}))):(this.pB=s.d2({scaleXYConstructor:Ls}),a=this.Fs.getWidth(this.pB)),this.NB=this.hs.yg(),this.__=new Za((()=>this.b_.wt(this.zB.$x(this.pB).Ko(0))),((t,i,s)=>(t.ke(s.fillStyle).Ce(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Vr();return s.Sl(i.vertices),this.b_.Nt(s,i.bar),i.bar.ps([s]),s})))),(()=>{this.b_.Gt()}),(t=>{this.NB.As(t)})),this.IS=this.tp.Te(this.pB).ke(this.ts.barChartSeriesBackgroundFillStyle||z).Ce(rt),this.PS=this.tp.Te(this.pB).ke(z).Ce(this.ts.barChartSeriesBackgroundStrokeStyle||rt).setMouseInteractions(!1),super.FS(this.IS,this.PS),this.categoryAxis=new _f(this,this.ts,!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled),a,this.VB,this.hs);const l=lo(null==n?void 0:n.valueAxis);this.valueAxis=new wf(this,this.ts,!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled),this.Fs.getHeight(this.pB),this.VB,this.hs,l.type),this.GB=new Qa((()=>this.VB.Dr(this.pB).Pr(Ti).Ir(Ti).Ko(1))),this.WB=new Za((()=>this.tp.Rg(this.pB).setMouseInteractions(!1)),((t,i,s)=>(t.Ee(s.lineStyle),i.map((({positions:i,existingMember:s})=>(s||t.Vr()).zg(i[0],i[1])))))),this.Hm=i.$m();const u=It(n?n.autoCursorBuilder:void 0,Ca);this.Fp=u.am(this.Hm,this.uiScale,this.uiScale,this.ts),this.onResize(this.An),this.mp(h,this.pB),this.setAutoCursorMode(exports.AutoCursorModes.onHover),this.setAnimationsEnabled(!0!==(null==n?void 0:n.disableAnimations)&&!1!==(null==n?void 0:n.animationsEnabled)),this.RS(((t,i)=>{oa.Pp(this,i)}))}getSeries(){return this.MS}setAutoCursor(t){return this.Fp&&t(this.Fp),this.cs.vs(),this}getAutoCursor(){return this.Fp}setAutoCursorMode(t){return this.Vm=t,this.cs.vs(),this}getAutoCursorMode(){return this.Vm}setCursorResultTableFormatter(t){return this.Om=t,this.cs.vs(),this}setBarsMargin(t){return this.EB=Tt(t,0,.49),this.IB=!0,this.cs.vs(),this}getBarsMargin(){return this.EB}setBarsEffect(t){return this.NB.Ss(t),this.cs.vs(),this}getBarsEffect(){return this.NB.xs()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}return this.UB("columns",i),this}setDataStacked(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.UB("stacks",s),this}setDataGrouped(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.UB("groups",s),this}UB(t,i){this.MS.length>0&&this.cs.Gn(fo.xf),this.DB=t,this.YB(i);const s=mi(i.map((t=>t.category))),e=s.length,h=mi(i.map((t=>t.subCategory))).filter((t=>void 0!==t));if(i.forEach((t=>{let i=this.MS.find((i=>i.category===t.category&&i.subCategory===t.subCategory));if(!i){const e=s.indexOf(t.category),r=h.includes(t.subCategory)?h.indexOf(t.subCategory):void 0;i=new Cf(this,this.wS,this.ts,this.cs.hs,t.category,t.subCategory,It(r,e)),this.DS(i),this.LB.set(i,{category:e,valueStart:this.bB?1e-6:0,valueEnd:void 0!==t.value?t.value:0})}void 0!==t.value&&i.setValue(t.value)})),this.MS.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category&&i.subCategory===t.subCategory))&&(t.dispose(),this.LB.delete(t))})),this.categoryAxis.setInterval(this.Fs.getWidth({x:{start:-.5,end:e-.5},y:{start:e-.5,end:-.5}})),this.yB=0===this.MS.length?void 0:"stacks"!==t?this.MS.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:Di,max:Bi}):{min:0,max:s.reduce(((t,s)=>Math.max(t,i.reduce(((t,i)=>i.category!==s?t:void 0!==i.value?t+i.value:t),0))),0)},this.yB&&(this.SB=this.yB.min>=0?"positive":this.yB.max<=0?"negative":"bipolar",("bipolar"===this.SB||"negative"===this.SB)&&this.bB))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");this.YB(this.MS),this.PB.clear(),this.kB.clear(),this.IB=!0,this.cs.vs()}setCategoryLabels(t){const i="function"==typeof t?this.FB?t(this.FB):this.FB:t;return this.FB=i?{...this.ts.barChartCategoryLabels,...i}:void 0,this.PB.clear(),this.cs.vs(),this}getCategoryLabels(){return this.FB}setValueLabels(t){var i;const s="function"==typeof t?this.vB?t(this.vB):this.vB:t,e=(null==s?void 0:s.position)||(null===(i=this.vB)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.vB={...this.ts.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.vB={...this.ts.barChartValueLabelsInsideBars,...s}):this.vB=void 0,this.kB.clear(),this.cs.vs(),this}getValueLabels(){return this.vB}setLabelFittingEnabled(t){return this.BB=t,this.cs.vs(),this}getLabelFittingEnabled(){return this.BB}getBar(t,i){if(("groups"===this.DB||"stacks"===this.DB)&&void 0===i)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const s=this.MS.find((s=>s.category===t&&(void 0===i||i===s.subCategory)));if(!s)throw new Error(`BarChart.getBar() no such bar: "${t}" ${i?`"${i}"`:""}`);return s}getBars(){return this.MS}setSorting(t){return this.TB=t,this.YB(this.MS),this.cs.vs(),this}getSorting(){return this.TB}setAnimationCategoryPosition(t,i=1){return this.RB=t?{speed:i}:void 0,this.cs.vs(),this}setAnimationValues(t,i=1){return this.xm=t?{speed:i}:void 0,this.cs.vs(),this}translateCoordinate(t,i,s){if(s&&Ns(t)&&Os(i))return super.translateCoordinate(t,i,s);const e=i;let h;if(Vs(t))h=this.cs.Do(t);else if(Ns(t)){const i=ct(t,this.pixelScale,this.cs.ft);h={engineX:i.x,engineY:i.y}}else{if(!kf(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=ct(this.Fs.toPoint(t.iCategory,t.value),this.pB,this.cs.ft);h={engineX:i.x,engineY:i.y}}}if(zs(e))return this.cs.Bo(h);if("barChart"===e){const t=ct({x:h.engineX,y:h.engineY},this.cs.ft,this.pB);return{iCategory:this.Fs.getWidth(t),value:this.Fs.getHeight(t)}}if(Os(e))return ct({x:h.engineX,y:h.engineY},this.cs.ft,this.pixelScale);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}Qd(){if("columns"===this.DB)return this.MS;const t=mi(yi(this.MS.map((t=>t.subCategory))));return yi(t.map((t=>{const i=this.MS.filter((i=>i.subCategory===t)),s=i[0];if(s)return(t=>{let i=!1;t.forEach((s=>s.onHighlight(((e,h)=>{i||(i=!0,t.forEach((t=>s!==t?t.setHighlight(h):void 0)),i=!1)})))),t.forEach((i=>i.onDispose((()=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)}))))})(i),{attach(e,h){return vi(e,i,{toggleVisibilityOnClick:!0,label:t,style:s.getFillStyle()}),this}}})))}Fe(t){var i,s;super.Fe(t);const e=this.GB.gy(),h=this.WB.gy(),r=this.MS.filter((t=>t.getVisible()&&t.wB)),n=mi(r.map((t=>t.category))),o=mi(yi(r.map((t=>t.subCategory)))),a=5e-4*t*((null===(i=this.RB)||void 0===i?void 0:i.speed)||0),l=.003*t*((null===(s=this.RB)||void 0===s?void 0:s.speed)||0),u=this.valueAxis.ft,c=u instanceof Ps?(t,i)=>{var s;return uo(t,i,u,(null===(s=this.xm)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return co(t,i,u,(null===(s=this.xm)||void 0===s?void 0:s.speed)||0)};let d;"columns"===this.DB?d=r.map((t=>({bar:t,position:{category:n.indexOf(t.category),valueStart:this.bB?1e-6:0,valueEnd:t.value}}))):"groups"===this.DB?d=r.map((t=>{const i=n.indexOf(t.category),s=o.indexOf(t.subCategory),e=1/(o.length+2*(o.length+1)*this.EB),h=this.EB*e;return{bar:t,position:{category:i+(s-(o.length-1)/2)*(e+h),valueStart:this.bB?1e-6:0,valueEnd:t.value}}})):(d=[],n.forEach(((t,i)=>{const s=r.filter((i=>i.category===t));let e=this.bB?1e-6:0;s.forEach(((i,s)=>{d.push({bar:i,position:{category:n.indexOf(t),valueStart:e,valueEnd:e+i.value}}),e+=i.value}))}))),d.forEach((t=>{const{bar:i,position:s}=t;let e,h,r=this.LB.get(i);void 0===r&&(r=s);const n=s.valueStart;if(this.RB&&r.category!==s.category){const t=Math.sign(s.category-r.category);e=r.category+a*t+l*(s.category-r.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.xm&&r.valueEnd!==s.valueEnd){const t=Math.sign(s.valueEnd-r.valueEnd);h=c(r.valueEnd,s.valueEnd),t!==Math.sign(s.valueEnd-h)&&(h=s.valueEnd)}else h=s.valueEnd;this.LB.set(i,{category:e,valueStart:n,valueEnd:h}),e===s.category&&h===s.valueEnd||this.cs.vs(!0),e===r.category&&h===r.valueEnd||(this.IB=!0)})),ra.kp(this.bp,this.Sp);const f=r.length>0;this.categoryAxis._r(),this.valueAxis._r();const A=this.categoryAxis.setVisible(f).Ds(),g=this.valueAxis.setVisible(f).Ds(h),{labelMarginBeforeCategoryAxisPixels:p}=f?this.HB(n,r,e,h):{labelMarginBeforeCategoryAxisPixels:0};this.categoryAxis.Fe(A,e,h,{labelMarginBeforeCategoryAxisPixels:p}),this.valueAxis.Fe(g);const m=this.categoryAxis.getThickness(),y=Tt(A.Od+p,void 0!==m.min?m.min:0,void 0!==m.max?m.max:Di),S={x:Math.min(this.pB.x.getInnerStart(),this.pB.x.getInnerEnd()),y:Math.min(this.pB.y.getInnerStart(),this.pB.y.getInnerEnd())},v=Math.max(this.pB.x.getInnerStart(),this.pB.x.getInnerEnd()),x=Math.max(this.pB.y.getInnerStart(),this.pB.y.getInnerEnd()),b={x:v-S.x,y:x-S.y};this.IS.Ie(S),this.IS.tt(b),this.PS.Ie(S),this.PS.tt(b),super.pp(),oa.Tp(this,this.IS.getIsUnderMouse(),!1,this.MS,void 0,((t,i)=>t.$c(i,!0)));const M=ra.Cp(this.bp,this.Sp);if(this.pB.Vi([this.jt.bottom+this.ya.bottom+("vertical"===this.Fs.OB?y:0),this.jt.top+this.ya.top+M+("horizontal"===this.Fs.OB?g.Od:0)]),this.pB.zi([this.jt.left+this.ya.left+this.Fs.getHeight({x:y,y:g.Od}),this.jt.right+this.ya.right]),this.zB.tx({x:this.pB.x.hi(),y:this.pB.y.hi(),width:this.pB.x.ni(),height:this.pB.y.ni()}),this.Qg&&this.Qg(),this.IB){const t=this.__.gy(),i="groups"===this.DB?1/(o.length+2*(o.length+1)*this.EB):1-2*this.EB;r.forEach((s=>{const e=this.LB.get(s);if(void 0===e)return;const h=e.category-.5*i,r=e.category+.5*i,n=[this.Fs.toPoint(h,e.valueStart),this.Fs.toPoint(h,e.valueEnd),this.Fs.toPoint(r,e.valueEnd),this.Fs.toPoint(r,e.valueStart)];t.add({Go:s.Go,vertices:n,bar:s},{fillStyle:s.be,strokeStyle:s.Me})})),t.finishPlot()}e.finishPlot(),h.finishPlot(),this.IB=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}solveNearest(t){}dispose(){return this.VB.U(),this.zB.U(),this.Fp.dispose(),this.Hm.U(),super.dispose()}YB(t){const i=this.TB;i&&t.sort(((s,e)=>i({category:s.category,value:t.reduce(((t,i)=>t+(i.category===s.category&&i.value||0)),0)},{category:e.category,value:t.reduce(((t,i)=>t+(i.category===e.category&&i.value||0)),0)})))}HB(t,i,s,e){let h=0;const r=this.FB,n=this.vB,o=this.valueAxis.getInterval(),a=this.Fs.getWidth({x:this.pB.x.ni(),y:this.pB.y.ni()});if(r&&r.labelFillStyle!==z){const n=r.tickLength+r.labelMargin,l=this.Fs.toPoint(0,1),u={Td:t.map(((t,s)=>{const e=i.reduce(((i,s)=>s.category!==t?i:i+s.value),0),h=r.formatter(t,e);if(!h)return;const a=s;return void 0!==a?{text:h,position:this.Fs.toPoint(a,this.valueAxis.ft.mi(o.start,-n)),alignment:l,rotation:r.labelRotation,sizePixels:this.$B(t,e)}:void 0})),Gu:r.labelFont,ft:this.pB},c=u?this.BB?Tf(u,a,this.Fs.getWidth):u.Td:[];c.forEach((t=>{t&&s.add().Eh(t.text).Ie(t.position).za(t.alignment).Gh(t.rotation).ke(r.labelFillStyle).Nh(r.labelFont)})),r.tickStyle!==rt&&0!==r.tickLength&&c.forEach((t=>{if(!t)return;const i=this.Fs.getWidth(t.position);e.add({positions:[this.Fs.toPoint(i,this.valueAxis.ft.getInnerStart()),this.Fs.toPoint(i,this.valueAxis.ft.mi(o.start,-r.tickLength))]},{lineStyle:r.tickStyle})})),h=c.reduce(((t,i)=>i?Math.max(t,this.Fs.getHeight(i.sizePixels)):t),0)+r.tickLength+r.labelMargin}if(n&&n.labelFillStyle!==z){let t;"after-bar"===n.position?t={Td:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.LB.get(t);return void 0!==e?{text:s,position:this.Fs.toPoint(e.category,this.valueAxis.ft.mi(e.valueEnd,n.labelMargin*Math.sign(e.valueEnd))),alignment:this.Fs.toPoint(0,-1*Math.sign(e.valueEnd)),rotation:n.labelRotation,sizePixels:this.XB(t)}:void 0})),Gu:n.labelFont,ft:this.pB}:"inside-bar"!==n.position&&"inside-bar-start"!==n.position&&"inside-bar-centered"!==n.position&&"inside-bar-end"!==n.position||(t={Td:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.LB.get(t);if(void 0===e)return;const h="bipolar"===this.SB?Math.sign(e.valueEnd):"negative"===this.SB?-1:1,r=this.Fs.toPoint(0,"inside-bar"===n.position||"inside-bar-end"===n.position?1*h:"inside-bar-centered"===n.position?0:-1*h);return{text:s,position:this.Fs.toPoint(e.category,"inside-bar"===n.position||"inside-bar-end"===n.position?this.valueAxis.ft.mi(e.valueEnd,-n.labelMargin*h):"inside-bar-centered"===n.position?(e.valueStart+e.valueEnd)/2:this.valueAxis.ft.mi(e.valueStart,n.labelMargin*h)),alignment:r,rotation:n.labelRotation,sizePixels:this.XB(t)}})),Gu:n.labelFont,ft:this.pB}),t&&(t?this.BB?Tf(t,a,this.Fs.getWidth):t.Td:[]).forEach((t=>{t&&s.add().Eh(t.text).Ie(t.position).za(t.alignment).Gh(t.rotation).ke(n.labelFillStyle).Nh(n.labelFont).setMouseInteractions(!1)}))}return{labelMarginBeforeCategoryAxisPixels:h}}$B(t,i){if(!this.FB||this.FB.labelFillStyle===z)return{x:0,y:0};const s=this.PB.get(t);if(s)return s;const e=this.FB.formatter(t,i),h=this.cs.Pg.Ig(e,this.FB.labelFont,this.FB.labelRotation);return h.isEstimate?this.cs.vs(!0):this.PB.set(t,h),h}XB(t){if(!this.vB||this.vB.labelFillStyle===z)return{x:0,y:0};const i=this.kB.get(t);if(i)return i;const s=this.cs.Pg.Ig(this.vB.formatter(t,t.category,t.value),this.vB.labelFont,this.vB.labelRotation);return s.isEstimate?this.cs.vs(!0):this.kB.set(t,s),s}xB(){return this.MS.reduce(((t,i)=>{const s=this.XB(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}CB(){this.IB=!0,this.cs.vs()}getMinimumSize(){return{x:200,y:200}}}const If={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},Pf={...po,OB:"vertical",MB:-1,_B:1},Df={...mo,OB:"horizontal",MB:1,_B:-1},Bf=(t,i)=>i?t.x:t.y,Lf=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),Rf=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(Bf(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const u=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>Lf(t,o,r,i))).reduce(((t,i)=>Math.max(t,Bf(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&c>Bf(h,r)-e||-1===o&&c<0+e){u.fill(0);break}if(i!==s&&(1===o?n>c:n<c))break;u[i-1]=c-n,c+=e*o}const d=u.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/Bf(h,r)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class Ef{constructor(t,s,e,h,r){this.coordsRelative="relative",this.coordsClient="client",this.Xi=!1,this.EP=new Array,this.L=new i.Eventer,this.jB=[],this.Xg=[],this.ZB=void 0,this.QB=!0,this.JB=!0,this.KB=!0,this.Jg=!1,this.qB=!0,this.tL=()=>{this.qB=!0,this.cs.vs()},this.iL=[],this.onInViewChange=t=>this.L.on("inViewChange",t),this.offInViewChange=t=>this.L.off(t,"inViewChange"),this.sL=t=>{for(let i=0;i<this.EP.length;i+=1)if(this.EP[i].panel===t){this.EP.splice(i,1),this.QB=!0,this.cs.vs();break}},this.eL=t=>{const i=this.jB.indexOf(t);i>=0&&this.jB.splice(i,1)},this.sp=t=>{const i=this.Xg.indexOf(t);i>=0&&this.Xg.splice(i,1)},this.hL=(t,i,s,e,h)=>{if(this.rL(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.EP.push(r),this.nL(r),this.QB=!0,t}throw new At("Out of dashboard range.")},this.oL=s.numberOfRows,this.aL=s.numberOfColumns,this.dA=t,this.lL=s,this.uL=h;const n=this.aL*this.oL;this.cL={x:new jd(new Array(this.aL).fill(1)),y:new jd(new Array(this.oL).fill(1))},this.ts=e.ts,this.dL=this.ts.dashboardSplitterStyle,this.ih=!0!==(null==s?void 0:s.disableAnimations)&&!1!==(null==s?void 0:s.animationsEnabled),this.fL=Xd(e,n),this.AL=e.II("dashboard splitters",500001),this.NM=()=>this.fL.FI(),this.ap=this.fL.DI(),this.hs=e.hs.rs(this,{gL:{}}),this.hs.gL.Ss(this.ts.effectsDashboardSplitters);const o=e.ai();this.uiScale=lt.d2({scaleXYConstructor:Ls}).Oi(0,100).Ni(0,100).tt(o),this.pixelScale=lt.d2({scaleXYConstructor:Ls}).Oi(0,this.uiScale.x.getCellSize()).Ni(0,this.uiScale.y.getCellSize()).tt(o),this.pL=e.mL.bind(e),this.yL=e.SL.bind(e),this.vL=e.xL.bind(e),this.bL=e.ML.bind(e),this.ho=e.ho.bind(e),this.no=e.no.bind(e),this.engine=e.hp,this.cs=e.rp,e.ko((()=>this.tL())),e.vs();const a=e.Io((t=>{this.Jg=t,this.L.emit("inViewChange",this,t)}));this.fp=e.Po.bind(e,a),this._L(),this.setAnimationsEnabled(this.ih);const l=((t,i)=>({on:t.on.bind(t,"resize"),off:t.off.bind(t)}))(this.L);this.createChartXY=t=>{const i=zf(t,this.lL,this.ih);return this.hL(new Gc(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=zf(t,this.lL,this.ih);return this.hL(new $d(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=zf(t,this.lL,this.ih);return this.hL(new td(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=zf(t,this.lL,this.ih),s=i&&i.type?i.type:Ha;return this.hL(new s(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=zf(t,this.lL,this.ih),s=i&&i.type?i.type:xd;return this.hL(new s(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,l,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=zf(t,this.lL,this.ih),s=i&&i.type?i.type:ud;return this.hL(new s(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=zf(t,this.lL,this.ih),s=t&&t.type?t.type:Fd;return this.hL(new s(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=zf(t,this.lL,this.ih);return this.hL(new sa(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendBoxPanel=t=>{const i=zf(t,this.lL,this.ih);return this.hL(new Cl(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=zf(t,this.lL,this.ih);return this.hL(new $c(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=zf(t,this.lL,this.ih);return this.hL(new Ll(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=zf(t,this.lL,this.ih),s=new _l(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,l,i);return this.hL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=zf(t,this.lL,this.ih),s=new yf(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,l);return this.hL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=zf(t,this.lL,this.ih),s=new Ff(this.dA,this.fL.BI(this.wL(t.columnIndex,t.rowIndex)),this.CL(i,this.cL),this.sL,r,l,i);return this.hL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}wL(t,i){return t+i*this.aL}CL(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.aL:this.oL,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).ut({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.aL,y:this.oL},i),d3:()=>new ot({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.aL,y:this.oL},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.pL(t[0]),this.yL(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.vL(t[0]),this.bL(t[1]),this}getWidth(){return this.ho()}getHeight(){return this.no()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.AL.vs(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.AL.vs(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.ts}setSplitterStyle(t){const i=this.dL;return this.dL="function"==typeof t?t(this.dL):t,this.kL(i),this}getSplitterStyle(){return this.dL}setSplitterEffect(t){return this.hs.gL.Ss(t),this.cs.vs(),this}getSplitterEffect(){return this.hs.gL.xs()}setAnimationHighlight(t){return this.KB=t,this.iL.forEach((i=>this.cs.us.ws(i.line,t))),this}getAnimationHighlight(){return this.KB}kL(t){for(const t of this.iL)t.line.Ee(this.dL);this._L()}setColumnWidth(t,i){const s=this.cL.x._();return t>=0&&t<s.length&&(s[t]=i,this.cL.x.M(s)),this.tL(),this}getColumnWidth(t){const i=this.cL.x._();if(t>=i.length)throw new At("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.cL.y._();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.cL.y.M(s)),this.tL(),this}getRowHeight(t){const i=this.cL.y._();if(t>=i.length)throw new At("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}onResize(t){return this.L.on("resize",t)}offResize(t){return this.L.off(t,"resize")}TL(t,i,s){if(s&&Math.abs(t.x)>0)this.FL(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.IL(i,t.y)}for(const t of this.EP)t.panel.J();this.tL()}IL(t,i){const s=Rf(this.EP,this.cL.y._(),t,i,this.pixelScale.ai(),!1);this.cL.y.M(s),this.tL()}FL(t,i){const s=Rf(this.EP,this.cL.x._(),t,i,this.pixelScale.ai(),!0);this.cL.x.M(s),this.tL()}PL(){this.iL.forEach((t=>t.line.dispose())),this.iL.length=0;for(let t=1;t<=this.aL-1;t+=1)for(let i=0;i<=this.oL-1;i+=1)if(void 0!==this.EP.find((s=>Ui(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=Hs(new Xs((()=>{this.DL(t)}),((i,s,e,h,r)=>{this.TL(h,t,!0),jt(r)}),(()=>{this.BL(t)}))),e=this.AL.ze(this.pixelScale).Ee(this.dL).setMouseEnterEventHandler((()=>{this.DL(t)})).setMouseLeaveEventHandler((()=>{this.BL(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.TL(r,t,!0),jt(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.cs.us.ls(e,(t=>e.ds(t)),{animationEnabled:this.KB}),this.iL.push({row:i,column:t,line:e,alignment:"vertical"})}for(let t=1;t<=this.oL-1;t+=1)for(let i=0;i<=this.aL-1;i+=1)if(void 0!==this.EP.find((s=>Ui(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=Hs(new Xs((()=>{this.LL(t)}),((i,s,e,h,r)=>{this.TL(h,t,!1),jt(r)}),(()=>{this.RL(t)}))),e=this.AL.ze(this.pixelScale).Ee(this.dL).setMouseEnterEventHandler((()=>{this.LL(t)})).setMouseLeaveEventHandler((()=>{this.RL(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.TL(r,t,!1),jt(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.cs.us.ls(e,(t=>e.ds(t)),{animationEnabled:this.KB}),this.iL.push({row:t,column:i,line:e,alignment:"horizontal"})}this.hs.gL.As(this.iL.map((t=>t.line)))}EL(){const t=this.pixelScale.ai(),i=this.cL.x._(),s=i.reduce(((t,i)=>t+i)),e=this.cL.y._(),h=e.reduce(((t,i)=>t+i));this.iL.forEach((r=>{if("vertical"===r.alignment){const n=l(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),o=l(n.x,t.y*e.slice(0,r.row+1).reduce(((t,i)=>t+i),0)/h);r.line.Oe(n).Ve(o)}else{const n=l(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),o=l(t.x*i.slice(0,r.column+1).reduce(((t,i)=>t+i),0)/s,n.y);r.line.Oe(n).Ve(o)}}))}DL(t){this.iL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.cs.us._s(i.line,1),this.AL.zL(i.line))})),this.ZB=this.engine.setMouseStyle(exports.MouseStyles.ResizeColumn),this.cs.vs()}LL(t){this.iL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.cs.us._s(i.line,1),this.AL.zL(i.line))})),this.ZB=this.engine.setMouseStyle(exports.MouseStyles.ResizeRow),this.cs.vs()}BL(t){this.iL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.cs.us._s(i.line,0)})),this.engine.restoreMouseStyle(this.ZB),this.cs.vs()}RL(t){this.iL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.cs.us._s(i.line,0)})),this.engine.restoreMouseStyle(this.ZB),this.cs.vs()}setAnimationsEnabled(t){return this.ih=t,this.getCells().filter((t=>t.panel instanceof ha)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.ih),this}getAnimationsEnabled(){return this.ih}getCells(){return this.EP.slice()}dispose(){return this.Xi||(this.fp&&this.fp(),this.EP.slice().forEach((t=>t.panel.dispose())),this.jB.slice().forEach((t=>t.dispose())),this.Xg.slice().forEach((t=>t.dispose())),this.Xi=!0,this.uL(),this.L.emit("dispose",this)),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}getIsInView(){return this.Jg}saveToFile(t,i,s){return Qo(this.engine,t,i,s),this}VL(t){if(this.qB){const t=this.cs.ft.ai(),i=t.x,s=t.y;this.uiScale.tt(i,s),this.pixelScale.tt(i,s);const e=this.uiScale.getInnerIntervalPixels();this.pixelScale.Oi(0,e.x).Ni(0,e.y),this.L.emit("resize",this,e.x,e.y,i,s),this.JB=!0}this.QB&&(this.PL(),this.QB=!1,this.JB=!0),this.JB&&(this.EL(),this.JB=!1);for(const i of this.EP)i.panel.Fe(t);return this.jB.forEach((t=>t.Ds())),this.jB.forEach((t=>t.Fe())),this.Xg.forEach((t=>t.Ds())),this.Xg.forEach((t=>t.Fe())),this.qB=!1,this}Z(){for(const t of this.EP)t.panel.Z();return this.pixelScale.x.Z(),this.pixelScale.y.Z(),this.uiScale.x.Z(),this.uiScale.y.Z(),this}J(){for(const t of this.EP)t.panel.J();return this.pixelScale.x.J(),this.pixelScale.y.J(),this.uiScale.x.J(),this.uiScale.y.J(),this}translateCoordinate(t,i,s){return qo(t,i,s,this.pixelScale,this.cs)}addUIElement(t=Nn,i=this.uiScale){i=Ko(i,this.pixelScale);const s=Jo(t,this.NM(),this.uiScale,i,this.eL,this.ts);return this.jB.push(s),s}addLegendBox(t=Kn,i=this.uiScale){i=Ko(i,this.pixelScale);const s=Jo(t,this.ap,this.uiScale,i,this.sp,this.ts);return s.setDraggingMode(exports.UIDraggingModes.notDraggable),this.Xg.push(s),s}getLegendBoxes(){return this.Xg}rL(t,i,s,e){return i>=0&&t>=0&&i+e<=this.oL&&t+s<=this.aL}nL(t){const i=this.dL,s=i===rt?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.oL-1?s:0,right:t.columnIndex<this.aL-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.Ir(e)}_L(){this.uiScale.x.ei([0,0]),this.uiScale.y.ei([0,0]),this.pixelScale.x.ei([0,0]),this.pixelScale.y.ei([0,0]);for(const t of this.EP)this.nL(t);this.cs.vs()}}const zf=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.disableAnimations?!t.disableAnimations:void 0!==t.animationsEnabled?t.animationsEnabled:s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},Vf={None:Lr,Rectangle:Sn,Circle:vn,Diamond:xn,Pointer:bn},Of={ChartMarkerXY:fu,SeriesMarkerXY:Au},Nf={XY:du,Spider:wa,BarChart:Ca,Map:Fa,Polar:wa},Gf={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},Wf={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},Uf={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},Yf={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},Hf={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},$f={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},Xf={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},jf={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},Zf={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},Qf={World:$f,USA:Xf,NorthAmerica:jf,SouthAmerica:Zf,Canada:Yf,Europe:Hf,Asia:Wf,Africa:Gf,Australia:Uf},Jf={Solid:xd},Kf=(t,i)=>Math.abs(t)+Math.abs(i);function qf(t,i){const s=t.reduce(Kf,0),e=(h=t,Math.max(...h.map((t=>t))));var h;const r=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(i**2*e/s**2,s**2/(i**2*r))}const tA=({height:t,width:i})=>t>i?{value:i,vertical:!1}:{value:t,vertical:!0},iA=({data:t,dimensions:i})=>{const{x:s,y:e,width:h,height:r}=i,n=t.map((t=>t.value)).reduce(Kf,0),o=t.map((t=>t.animatedValue)).reduce(Kf,0),a=t.map((t=>t.animatedValue*r*h/o)),l=a.reduce(((t,i)=>t+i),0),u=a.map((t=>t/l*100)),c=a.filter(((t,i)=>u[i])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:n,animatedValue:o,x:s,y:e,width:h,height:r,nodeIndex:-1,userNode:{name:"Main Rectangle"}};if(1===t.length){const s={...t[0],x:i.x,y:i.y,width:i.width,height:i.height};d.children.push(s)}else eA(c,tA(d).value,t,d);return d.children},sA=(t,i,s,e,h)=>{const r=t.reduce(Kf,0)/i;t.forEach(((t,i)=>{const n=Math.abs(t)/r,{x:o,y:a,children:l}=h,u={...e[l.length],x:o,y:a,width:s?r:n,height:s?n:r};s?h.y+=n:h.x+=n,l.push(u)})),s?(h.x+=r,h.y-=i,h.width-=r):(h.x-=i,h.y+=r,h.height-=r)},eA=(t,i,s,e)=>{const h=[{children:t,width:i,row:[]}];for(;h.length>0;){const t=h.pop();if(!t)continue;const{children:i,width:r,row:n}=t;let o=0;const a=[...n];for(;o<i.length;){const t=[...a,i[o]],n=qf(a,r),l=qf(t,r);if(!(0===a.length||n>l)){sA(a,r,tA(e).vertical,s,e),h.push({children:i.slice(o),width:tA(e).value,row:[]});break}a.push(i[o]),o+=1}o===i.length&&sA(a,r,tA(e).vertical,s,e)}};class hA extends ha{constructor(t,i,s,e,h,r,n){if(super(t,i,s,i.yp("treeMapChart bg",0),e,i.cs.ts.treeMapChartBackgroundFillStyle||i.cs.ts.chartXYSeriesBackgroundFillStyle,i.cs.ts.treeMapChartBackgroundStrokeStyle||i.cs.ts.chartXYBackgroundStrokeStyle,i.cs.ts.treeMapChartTitleFont||i.cs.ts.chartXYTitleFont,i.cs.ts.treeMapChartTitleFillStyle||i.cs.ts.chartXYTitleFillStyle,n),this.OL=new Map,this.NL=[],this.GL={},this.WL=p([]),this.xm={speed:1},this.UL=Di,this.YL=!0,this.HL="Go Back",this.$L=[],this.XL=this.ts.treeMapChartPathLabelFillStyle||this.ts.uiTextFillStyle,this.jL=this.ts.treeMapChartPathLabelFont||this.ts.uiTextFont,this.ZL=this.ts.treeMapChartLabelHeaderFillStyle||this.ts.uiTextFillStyle,this.QL=this.ts.treeMapChartLabelHeaderFont||this.ts.uiTextFont,this.JL=this.ts.treeMapChartLabelFillStyle||this.ts.uiTextFillStyle,this.KL=this.ts.treeMapChartLabelFont||this.ts.uiTextFont,this.Hi=!0,this.Tx=exports.AutoCursorModes.onHover,this.Om=rA,this.Ix=!0,this.qL=!1,this.tR=this.ts.treeMapChartParentColor||F,this.iR=this.ts.treeMapChartNodeStrokeStyle||this.ts.uiBackgroundStrokeStyle,this.onNodeMouseEnter=t=>this.L.on("mouseEnter",t),this.onNodeMouseLeave=t=>this.L.on("mouseLeave",t),this.onNodeMouseClick=t=>this.L.on("mouseClick",t),this.onNodeMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onNodeMouseDown=t=>this.L.on("mouseDown",t),this.onNodeMouseUp=t=>this.L.on("mouseUp",t),this.onNodeMouseMove=t=>this.L.on("mouseMove",t),this.offNodeMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offNodeMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offNodeMouseClick=t=>this.L.off(t,"mouseClick"),this.offNodeMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offNodeMouseDown=t=>this.L.off(t,"mouseDown"),this.offNodeMouseUp=t=>this.L.off(t,"mouseUp"),this.offNodeMouseMove=t=>this.L.off(t,"mouseMove"),this.offNodeMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offNodeMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offNodeMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offNodeMouseWheel=t=>this.L.off(t,"mouseWheel"),this.Bx=(t,i,s,e,h)=>{this.cs.vs(),this.qL=!0},this.Ct=(t,i)=>{const s=this.sR(i);s&&(this.Tx!==exports.AutoCursorModes.disabled&&(this.Kx=s,jt(t)),this.Ix&&this.cs.us._s(i,!0),this.YL&&this.engine.setMouseStyle(exports.MouseStyles.Point),this.L.emit("mouseEnter",this,t,s.userNode),this.cs.vs())},this.kt=(t,i)=>{const s=this.sR(i);s&&(this.Tx!==exports.AutoCursorModes.disabled&&(this.Kx=void 0,t&&jt(t)),this.Ix&&this.cs.us._s(i,!1),this.engine.setMouseStyle(exports.MouseStyles.Default),this.L.emit("mouseLeave",this,t,s.userNode),this.cs.vs())},this.Dt=(t,i)=>{const s=this.sR(i);s&&(this.Tx!==exports.AutoCursorModes.disabled&&(this.Kx=s,jt(t)),this.Ix&&this.cs.us._s(i,!0),this.YL&&this.engine.setMouseStyle(exports.MouseStyles.Point),this.L.emit("mouseEnter",this,t,s.userNode),this.cs.vs())},this.Tt=(t,i)=>{const s=this.sR(i);if(s){if(this.YL){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.GL[s.parentID]:void 0;i&&(this.WL.M([i]),this.Kx=void 0,this.L.emit("viewChange",this.WL._()),this.qL=!0),t&&jt(t)}this.L.emit("mouseClick",this,t,s.userNode),this.cs.vs()}},this.Ft=(t,i)=>{var s;const e=null===(s=this.OL.get(i))||void 0===s?void 0:s.userNode;this.L.emit("mouseDoubleClick",this,t,e)},this.It=(t,i)=>{var s;const e=null===(s=this.OL.get(i))||void 0===s?void 0:s.userNode;this.L.emit("mouseDown",this,t,e)},this.Pt=(t,i)=>{var s;const e=null===(s=this.OL.get(i))||void 0===s?void 0:s.userNode;this.L.emit("mouseUp",this,t,e)},this.Lt=(t,i,s)=>{var e;const h=null===(e=this.OL.get(s))||void 0===e?void 0:e.userNode;this.L.emit("mouseDragStart",this,t,i,h)},this.Bt=(t,i,s,e,h)=>{var r;const n=null===(r=this.OL.get(h))||void 0===r?void 0:r.userNode;this.L.emit("mouseDrag",this,t,i,s,e,n)},this.Rt=(t,i,s,e)=>{var h;const r=null===(h=this.OL.get(e))||void 0===h?void 0:h.userNode;this.L.emit("mouseDragStop",this,t,i,s,r)},this.Et=(t,i)=>{var s;const e=null===(s=this.OL.get(i))||void 0===s?void 0:s.userNode;this.L.emit("mouseWheel",this,t,e)},this.zt=(t,i)=>{const s=this.sR(i);s&&(this.Tx!==exports.AutoCursorModes.disabled&&(this.Kx=s),this.Ix&&this.cs.us._s(i,!0),this.L.emit("touchStart",this,t,s.userNode),this.cs.vs(),jt(t))},this.Vt=(t,i)=>{const s=this.sR(i);s&&(this.Tx!==exports.AutoCursorModes.disabled&&(this.Kx=s),this.Ix&&this.cs.us._s(i,!0),this.L.emit("touchMove",this,t,s.userNode),this.cs.vs(),jt(t))},this.Ot=(t,i)=>{const s=this.sR(i);if(s){if(this.Tx!==exports.AutoCursorModes.disabled&&(this.Kx=void 0),this.YL){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.GL[s.parentID]:void 0;i&&(this.WL.M([i]),this.L.emit("viewChange",this.WL._()),this.qL=!0),t&&jt(t)}this.Ix&&this.cs.us._s(i,!1),this.L.emit("touchEnd",this,t,s.userNode),this.cs.vs(),jt(t)}},this.eR=t=>{const i=this.GL[this.$L[t].id]?[this.GL[this.$L[t].id]]:this.NL;this.WL.M(i),this.L.emit("viewChange",i),this.qL=!0,this.cs.vs()},this.ts.treeMapChartNodeColors)this.hR=this.ts.treeMapChartNodeColors;else{const t=this.ts.pointSeriesFillStyle,i=t=>W(t)?t.getColor():F;this.hR="function"==typeof t?new Array(5).fill(0).map(((s,e)=>i(t(e)))):[i(t)]}this.cs.Gn(fo._f),this.Wm=i.Ax("TreeMapChart plotting",0),this.Ym=i.Ax("TreeMap UI plotting",1),this.onResize(this.Bx),this.bp.Eh("TreeMap Chart");const o=It(void 0,Fa);this.Ux=o.lm(i.$m(),this.pixelScale,this.pixelScale,this.ts).setVisible(!1),this.rR=this.hs.yg(),this.mp(h,this.uiScale),this.Hx=this.Wm.$x(this.pixelScale).ke(new U).Ce(this.iR),this.nR=this.cs.us.zr(this,{animationEnabled:!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled)}),this.oR=new Qa((()=>this.Ym.Dr(this.pixelScale).setMouseInteractions(!1))),this.aR=new Qa((()=>this.Ym.Dr(this.uiScale))),this.Hx.setMouseInteractions(this.Hi).setMouseEnterEventHandler(((t,i,s)=>this.Ct(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this.kt(i,s))).setMouseClickEventHandler(((t,i,s)=>this.Tt(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Ft(i,s))).setMouseDownEventHandler(((t,i,s)=>this.It(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Pt(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Dt(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Lt(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.Bt(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Rt(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Et(i,s))).setTouchStartEventHandler(((t,i,s)=>this.zt(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.Vt(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Ot(i,s))),this.setAnimationsEnabled(!0!==(null==r?void 0:r.disableAnimations)&&!1!==(null==r?void 0:r.animationsEnabled))}setData(t){t=Array.isArray(t)?t.slice():[t];const{lR:i}=(()=>{let t=0;return{lR:i=>{var s;const e=i.map(((t,i)=>({node:t,parent:null}))),h=[];for(;e.length>0;){const i=e.pop();if(!i)continue;const{node:r,parent:n}=i;t+=1;const o={id:t,parentID:null==n?void 0:n.id,name:r.name,value:r.value||0,animatedValue:r.value||0,children:[],nodeIndex:n?n.nodeIndex:-1,userNode:r};n?n.children.push(o):h.push(o),null===(s=r.children)||void 0===s||s.forEach((t=>{e.push({node:t,parent:o})}))}const r=t=>{t.children.forEach(r),t.children.length>0&&(t.value+=t.children.reduce(((t,i)=>t+i.value),0),t.animatedValue+=t.children.reduce(((t,i)=>t+i.animatedValue),0),t.children.sort(((t,i)=>i.animatedValue-t.animatedValue)))};h.forEach(r);const n=1===i.length?h[0].children:h;return n.sort(((t,i)=>i.animatedValue-t.animatedValue)),n.forEach(((t,i)=>{t.nodeIndex=i;const s=i=>{i.children.forEach((i=>{i.nodeIndex=t.nodeIndex,s(i)}))};s(t)})),h}}})(),s=i(t);return s.forEach((t=>{const i=this.GL[t.id];i&&this.uR(t,i)})),this.Kx=void 0,this.WL.M(s),this.NL=s,this.GL=this.cR(s),this.qL=!0,this.cs.vs(),this}setAnimationValues(t,i=1){return this.xm=t?{speed:i}:void 0,this.cs.vs(),this}setInitPathButtonText(t){return this.HL=t,this.qL=!0,this.cs.vs(),this}setDisplayedLevelsCount(t){return this.UL=t,this.qL=!0,this.cs.vs(),this}setDrillDownEnabled(t){return this.YL=t,this.qL=!0,this.cs.vs(),this}setDrillDownNode(t){var i,s;if(this.Kx=void 0,void 0===t)this.WL.M(this.NL);else{const e=[...this.NL];for(;e.length>0;){const h=e.pop();if(h){if(void 0!==h.value&&h.userNode===t||h.parentID&&Array.isArray(t)&&(null===(s=null===(i=this.GL[h.parentID])||void 0===i?void 0:i.userNode)||void 0===s?void 0:s.children)===t){const t=h.children.length?h:h.parentID?this.GL[h.parentID]:this.NL[0];this.WL.M([t]);break}if(h.children)for(let t=h.children.length-1;t>=0;t-=1)e.push(h.children[t])}}}return this.L.emit("viewChange",this.WL._()),this.qL=!0,this.cs.vs(),this}setNodeColoring(t){return t instanceof Array?(this.Hx.ke(new U),this.hR=t):this.Hx.ke(t),this.qL=!0,this.cs.vs(),this}setParentNodeColor(t){return this.tR=t,this.qL=!0,this.cs.vs(),this}setPathLabelFillStyle(t){return this.XL="function"==typeof t?t(this.XL):t,this.qL=!0,this.cs.vs(),this}getPathLabelFillStyle(){return this.XL}setPathLabelFont(t){return hh(t)?this.jL=t:this.jL=t(this.jL),this.qL=!0,this.cs.vs(),this}getPathLabelFont(){return this.jL}setHeaderFont(t){return hh(t)?this.QL=t:this.QL=t(this.QL),this.qL=!0,this.cs.vs(),this}getHeaderFont(){return this.QL}setHeaderFillStyle(t){return this.ZL="function"==typeof t?t(this.ZL):t,this.qL=!0,this.cs.vs(),this}getHeaderFillStyle(){return this.ZL}setLabelFont(t){return hh(t)?this.KL=t:this.KL=t(this.KL),this.qL=!0,this.cs.vs(),this}getLabelFont(){return this.KL}setLabelFillStyle(t){return this.JL="function"==typeof t?t(this.JL):t,this.qL=!0,this.cs.vs(),this}getLabelFillStyle(){return this.JL}setNodeBorderStyle(t){return this.Hx.Ce(t),this.qL=!0,this.cs.vs(),this}getNodeBorderStyle(){return this.Hx.lo()}setNodeEffect(t){return this.rR.Ss(t),this.cs.vs(),this}getNodeEffect(){return this.rR.xs()}setAutoCursor(t){return this.Ux&&t(this.Ux),this.cs.vs(),this}getAutoCursor(){return this.Ux}setAutoCursorMode(t){return this.Tx=t,this.cs.vs(),this}getAutoCursorMode(){return this.Tx}setCursorResultTableFormatter(t){return this.Om=t,this.cs.vs(),this}getCursorResultTableFormatter(){return this.Om}onNodeMouseDragStart(t){return this.L.on("mouseDragStart",t)}onNodeMouseDrag(t){return this.L.on("mouseDrag",t)}onNodeMouseDragStop(t){return this.L.on("mouseDragStop",t)}onNodeMouseWheel(t){return this.L.on("mouseWheel",t)}onNodeTouchStart(t){return this.L.on("touchStart",t)}onNodeTouchMove(t){return this.L.on("touchMove",t)}onNodeTouchEnd(t){return this.L.on("touchEnd",t)}onViewChange(t){return this.L.on("viewChange",t)}offNodeTouchStart(t){return this.L.off(t,"touchStart")}offNodeTouchMove(t){return this.L.off(t,"touchMove")}offNodeTouchEnd(t){return this.L.off(t,"touchEnd")}offViewChange(t){return this.L.off(t,"viewChange")}setMouseInteractions(t){return this.Hi=t,this.Hx.setMouseInteractions(t),this}getMouseInteractions(){return this.Hi}setAnimationHighlight(t){return this.nR.Nr(t),this}getAnimationHighlight(){return this.nR.Gr()}setHighlightOnHover(t){return this.Ix=t,this}getHighlightOnHover(){return this.Ix}getMinimumSize(){}Qd(){return[this]}Fe(t){super.Fe(t),super.pp(),ra.kp(this.bp,this.Sp);const i=ra.Cp(this.bp,this.Sp);if(this.qL&&this.WL._().length){this.Hx.Gt(),this.OL.clear(),this.nR.Or(),this.ih&&this.dR(t);const s=iA({data:this.WL._(),dimensions:{x:0+this.ya.left,y:0+this.ya.bottom,width:this.pixelScale.x.getInnerEnd()-this.ya.right-this.ya.left,height:this.pixelScale.y.getInnerEnd()-i-this.ya.top-this.ya.bottom}}),e=this.oR.gy();this.fR(s,e),e.finishPlot(),this.AR(),this.NL!==this.WL._()&&this.NL.length>1&&this.$L.unshift({name:this.HL,id:0});let h=0;const r=this.aR.gy(),n=this.jL;this.$L.forEach(((t,i)=>{const s=r.add(),e=this.cs.Pg.Ig(t.name,n,0);s.Eh(`← ${t.name}`).Nh(n).Ie({x:0,y:100}).za({x:-1,y:1}).Ir({left:this.ya.left+h,top:this.ya.top,right:0,bottom:0}).ke(this.XL).setMouseClickEventHandler((t=>this.eR(i))).setMouseEnterEventHandler((()=>this.engine.setMouseStyle(exports.MouseStyles.Point))).setMouseLeaveEventHandler((()=>this.engine.setMouseStyle(exports.MouseStyles.Default))),h+=e.x+25})),r.finishPlot(),this.WL._().every((t=>t.value===t.animatedValue))?this.qL=!1:this.cs.vs(!0)}const s=this.cs.Nn();if(this.Kx&&s){const t=s;this.Ux.setPosition(t).setVisible(!0).getResultTable().setContent(this.Om(new Aa,this.Kx).Qu())}else this.Ux.setVisible(!1);return this.Ux.Ds().Fe(),this}dispose(){return this.Ym.U(),this.Wm.U(),this.Ux.dispose(),this.Hx.dispose(),this.OL.clear(),this.oR.my(),this.aR.my(),super.dispose()}Z(){return super.Z(),this}J(){return super.J(),this}Wd(){return li(this.Hx.zh())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),ai(t,this.ts,s,{}),this}fR(t,i,s=!1,e=0){const h=t.map(((t,i)=>({node:t,isChild:s,depth:e})));for(;h.length>0;){const t=h.pop();if(!t)continue;const{node:s,depth:e,opacity:r}=t,{x:n,y:o,height:a,width:l,children:u,animatedValue:c,name:d,nodeIndex:f}=s,A=this.hR,g=0===e&&1===this.WL._().length?this.tR:A[f%A.length],p=[{x:n,y:o},{x:n,y:a+o},{x:l+n,y:a+o},{x:l+n,y:o}],m=this.Hx.Vr().Sl(p).gR(g.setA(r||250)).Jx(c);this.OL.set(m,s),this.nR.Vr(m,(t=>m.ds(t)));const y=n+5,S=o+5,v=Math.max(a-25-5,0),x=Math.max(l-5-5,0);if(u&&u.length&&e<this.UL&&x>15&&v>15){const t=iA({data:u,dimensions:{x:x>0?y:n,y:v>0?S:o,width:x,height:v}});for(let i=0;i<t.length;i+=1){const n=(250-(u.length>7?50:150))/(u.length-1),o=1===s.id&&1===this.NL.length||this.NL===this.WL._()?250:r?r/(e+1):250-i*n;h.push({node:t[i],isChild:!0,depth:e+1,opacity:o})}}const b=0===e&&1===this.WL._().length?this.ZL:this.JL,M=0===e?this.QL:this.KL,_=this.pR(d,l-25,M),w=this.cs.Pg.Ig(_,M,0),C=i.add();l-25>w.x&&a>25?C.Eh(_).Ie({x:n+5,y:a+o-2.5}).za({x:-1,y:1}).ke(b).Nh(M):C.Eh("")}}cR(t){const i={},s=[...t];for(;s.length>0;){const t=s.pop();t&&(i[t.id]=t,t.children&&s.push(...t.children))}return i}sR(t){if(!this.qL&&t)return this.OL.get(t)}AR(){this.$L=[];const t=this.WL._()[0].id;let i=this.GL[t].parentID;for(;i;)this.$L.push({name:this.GL[i].name,id:i}),i=this.GL[i].parentID;return this.$L.reverse()}pR(t,i,s){let e=this.cs.Pg.Ig(t,s,0).x;if(e<=i)return t;const h=t.split(" ");let r=t;for(;h.length>1&&e>i;)h.pop(),r=`${h.join(" ")}...`,e=this.cs.Pg.Ig(r,s,0).x;if(e>i)for(r=`${h[0]}...`,e=this.cs.Pg.Ig(r,s,0).x;r.length>3&&e>i;)r=`${r.substring(0,r.length-4)}...`,e=this.cs.Pg.Ig(r,s,0).x;return r.length<=3&&e>i?"":r}dR(t){var i;const s=[...this.NL];for(;s.length>0;){const e=s.pop();if(!e)continue;const h=e.value-e.animatedValue;if(Math.abs(h)<.0015*e.value||void 0===this.xm)e.animatedValue=e.value;else{const s=h/250*((null===(i=this.xm)||void 0===i?void 0:i.speed)||1)*t;e.animatedValue+=s,(h>0&&e.animatedValue>e.value||h<0&&e.animatedValue<e.value)&&(e.animatedValue=e.value)}e.children&&e.children.length>0&&s.push(...e.children)}}uR(t,i){const s=[{current:t,previous:i}];for(;s.length>0;){const t=s.pop();if(!t)continue;const{current:i,previous:e}=t;i.animatedValue=this.ih?e.animatedValue:i.value,e.nodeIndex<0?i.nodeIndex=0:i.nodeIndex=e.nodeIndex;const h=new Map(e.children.map((t=>[t.id,t])));i.children.forEach(((t,i)=>{const r=h.get(t.id);s.push({current:t,previous:r||e})}))}}}const rA=(t,i)=>{const{name:s,value:e}=i;return t.addRow(`${s}`).addRow(`${e}`),t},nA=(t,i)=>{const s=(t=>{const i=new G({color:t.uiStrokeColorContrastHigh}),s=new G({color:t.uiStrokeColorContrastMedium}),e=new G({color:t.uiStrokeColorContrastLow}),h=new eh({family:t.fontFamily,weight:"normal",style:"normal"}),r=h.setSize(18*t.fontScaler),n=h.setSize(16*t.fontScaler),o=h.setSize(14*t.fontScaler),a=h.setSize(10*t.fontScaler),l=h.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),u=h.setSize(13*t.fontScaler),c=new Qs({thickness:2,fillStyle:e}),d=new G({color:t.dataHighlightOverlayColor}),f=new Qs({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),A=t.dataColorPalette.map((t=>new G({color:t.stroke}))),g=t=>A[t%A.length],p=A.map((t=>new Qs({thickness:2,fillStyle:t}))),m=t=>p[t%p.length],y=t.dataColorPalette.map((t=>new G({color:t.border}))).map((t=>new Qs({thickness:2,fillStyle:t}))),S=t=>y[t%y.length],v=t.dataColorPalette.map((t=>{const i=t.area;return new st({angle:180,stops:[{color:ri(i,M(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:ri(i,M(0,0,0,i.getA()),.3),offset:1}]})})),x=t=>v[t%v.length],b=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new st({angle:180,stops:[{color:ri(i,M(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:ri(i,M(0,0,0,i.getA()),.3),offset:1}]})})),w=t=>b[t%b.length],C=t.dataColorPaletteInverted.map((t=>new G({color:t.border}))).map((t=>new Qs({thickness:2,fillStyle:t}))),k=t=>C[t%C.length],T=new G({color:t.dataColorPositive}),F=new G({color:t.dataColorNegative}),I=new Qs({thickness:1,fillStyle:new G({color:t.dataStrokeColorContrastHigh.setA(50)})}),P=new Qs({thickness:2,fillStyle:t.axisLineFillStyle}),D=rt,B=new G({color:M(0,0,0,1)}),L=new Qs({thickness:1,fillStyle:t.axisGridMajorFillStyle}),R=new Qs({thickness:1,fillStyle:t.axisTickMajorFillStyle}),E=o,V=t.axisLabelMajorFillStyle,O=new Qs({thickness:1,fillStyle:t.axisGridMajorFillStyle}),N=new Qs({thickness:1,fillStyle:t.axisTickMajorFillStyle}),W=o,U=t.axisLabelMajorFillStyle,Y=new Qs({thickness:1,fillStyle:t.axisGridMinorFillStyle}),H=new Qs({thickness:1,fillStyle:t.axisTickMinorFillStyle}),$=a,X=t.axisLabelMinorFillStyle,j=bo,Z=new vo({gridStrokeStyle:L,tickStyle:R,tickLength:50,tickPadding:-14,labelFont:E,labelPadding:0,labelFillStyle:V}),Q=new vo({gridStrokeStyle:O,tickStyle:N,tickLength:7,tickPadding:5,labelFont:W,labelPadding:0,labelFillStyle:U}),J=new vo({gridStrokeStyle:Y,tickStyle:H,tickLength:4,tickPadding:10,labelFont:$,labelPadding:0,labelFillStyle:X}),K=new Yo({extremeTickStyle:j,majorTickStyle:Q,minorTickStyle:J}),q=new Eo({greatTickStyle:Z,majorTickStyle:Q,minorTickStyle:J}),tt=new Zo({majorTickStyle:Q,minorTickStyle:J}),it=new G({color:t.dataHighlightOverlayColor}),et=new Qs({thickness:1,fillStyle:s}),ht=new Qs({thickness:2,fillStyle:s}),nt=t=>new fh.Triangulated({shape:"sphere",size:10,fillStyle:A[t%A.length]}),ot=A[0],at=t.uiTextFillStyle,lt=t.legendBackgroundFillStyle,ut=new Qs({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),ct=oi(t.legendButtonDefaultColor),dt=oi(t.isDark?M(70,70,70,255):M(170,170,170,255)),ft=new G({color:t.isDark?M(70,70,70,255):M(170,170,170,255)}),At=new Qs({thickness:1,fillStyle:i}),gt=new en({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:tn.DashedEqual,patternScale:3}),pt=t.zoomBandChartDefocusOverlayFillStyle,mt=new Qs({thickness:2,fillStyle:new G({color:t.zoomBandChartSplitterColor})});let yt={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:rt,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new Qs({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:rt,chartXYTitleFont:r,chartXYTitleFillStyle:t.titleFillStyle,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:c,chartXYZoomingRectangleFillStyle:d,chartXYZoomingRectangleStrokeStyle:f,chartXYFittingRectangleFillStyle:d,chartXYFittingRectangleStrokeStyle:f,lineSeriesStrokeStyle:m,pointLineSeriesStrokeStyle:m,pointLineSeriesFillStyle:g,pointSeriesFillStyle:g,ellipseSeriesFillStyle:g,ellipseSeriesStrokeStyle:m,polygonSeriesFillStyle:g,polygonSeriesStrokeStyle:m,rectangleSeriesFillStyle:g,rectangleSeriesStrokeStyle:rt,segmentSeriesStrokeStyle:m,boxSeriesBodyFillStyle:g(0),boxSeriesBodyStrokeStyle:rt,boxSeriesStrokeStyle:new Qs({thickness:1,fillStyle:A[0]}),boxSeriesMedianStrokeStyle:new Qs({thickness:1,fillStyle:new G({color:M(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:T,ohlcCandleBodyFillStyleNegative:F,ohlcCandleTailStrokeStylePositive:new Qs({thickness:1,fillStyle:new G({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new Qs({thickness:1,fillStyle:new G({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new Qs({thickness:2,fillStyle:T}),ohlcBarStrokeStyleNegative:new Qs({thickness:2,fillStyle:F}),heatmapGridSeriesFillStyle:g,heatmapGridSeriesWireframeStyle:I,heatmapScrollingGridSeriesFillStyle:g,heatmapScrollingGridSeriesWireframeStyle:I,areaRangeSeriesFillStyle:x,areaRangeSeriesStrokeStyle:S,areaRangeSeriesFillStyleInverted:w,areaRangeSeriesStrokeStyleInverted:k,areaSeriesBipolarHighFillStyle:x,areaSeriesBipolarHighStrokeStyle:S,areaSeriesBipolarLowFillStyle:w,areaSeriesBipolarLowStrokeStyle:k,areaSeriesPositiveFillStyle:x,areaSeriesPositiveStrokeStyle:S,areaSeriesNegativeFillStyle:w,areaSeriesNegativeStrokeStyle:k,xAxisTitleFont:n,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:P,xAxisNibStyle:D,xAxisOverlayStyle:B,xAxisZoomingBandFillStyle:d,xAxisZoomingBandStrokeStyle:rt,xAxisNumericTicks:K,xAxisDateTimeTicks:q,xAxisTimeTicks:tt,yAxisTitleFont:n,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:P,yAxisNibStyle:D,yAxisOverlayStyle:B,yAxisZoomingBandFillStyle:d,yAxisZoomingBandStrokeStyle:rt,yAxisNumericTicks:K,yAxisDateTimeTicks:q,yAxisTimeTicks:tt,bandFillStyle:it,bandStrokeStyle:et,constantLineStrokeStyle:ht,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:rt,barChartTitleFont:r,barChartTitleFillStyle:t.titleFillStyle,barChartSeriesBackgroundFillStyle:z,barChartSeriesBackgroundStrokeStyle:rt,barChartBarFillStyle:g,barChartBarStrokeStyle:new Qs({thickness:1,fillStyle:e}),barChartValueAxisTitleFont:n,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:P,barChartValueAxisTicks:K.setMajorTickStyle((t=>t.setGridStrokeStyle(rt))).setMinorTickStyle((t=>t.setGridStrokeStyle(rt))),barChartCategoryAxisTitleFont:n,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:P,barChartCategoryLabels:{formatter:(t,i)=>t,labelFillStyle:K.majorTickStyle.labelFillStyle,labelFont:K.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:K.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:K.majorTickStyle.labelFillStyle,labelFont:K.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:K.majorTickStyle.labelFillStyle,labelFont:K.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:rt,chart3DTitleFont:r,chart3DTitleFillStyle:t.titleFillStyle,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:c,chart3DBoundingBoxStrokeStyle:rt,xAxis3DTitleFont:n,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:P,xAxis3DNumericTicks:K,xAxis3DDateTimeTicks:q,xAxis3DTimeTicks:tt,yAxis3DTitleFont:n,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:P,yAxis3DNumericTicks:K,yAxis3DDateTimeTicks:q,yAxis3DTimeTicks:tt,zAxis3DTitleFont:n,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:P,zAxis3DNumericTicks:K,zAxis3DDateTimeTicks:q,zAxis3DTimeTicks:tt,lineSeries3DStrokeStyle:m,pointLineSeries3DStrokeStyle:m,pointLineSeries3DPointStyle:nt,pointSeries3DPointStyle:nt,pointCloudSeries3DPointStyle:t=>new fh.Pixelated({size:5,fillStyle:A[t%A.length]}),surfaceGridSeries3DFillStyle:g,surfaceGridSeries3DWireframeStyle:I,surfaceScrollingGridSeries3DFillStyle:g,surfaceScrollingGridSeries3DWireframeStyle:I,boxSeries3DFillStyle:g,meshModel3DFillStyle:g(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:rt,polarChartTitleFont:r,polarChartTitleFillStyle:t.titleFillStyle,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:c,polarSectorFillStyle:it,polarSectorStrokeStyle:et,polarAmplitudeAxisTitleFont:n,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:P,polarAmplitudeAxisNumericTicks:K,polarAmplitudeAxisDateTimeTicks:q,polarAmplitudeAxisTimeTicks:tt,polarRadialAxisTitleFont:n,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:P,polarRadialAxisTickStyle:Q,polarLineSeriesStrokeStyle:m,polarPointLineSeriesFillStyle:g,polarPointLineSeriesStrokeStyle:m,polarPointSeriesFillStyle:g,polarPolygonSeriesFillStyle:x,polarPolygonSeriesStrokeStyle:S,polarAreaSeriesFillStyle:x,polarAreaSeriesStrokeStyle:S,polarHeatmapSeriesFillStyle:g,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:rt,mapChartTitleFont:r,mapChartTitleFillStyle:t.titleFillStyle,mapChartFillStyle:ot,mapChartStrokeStyle:new Qs({thickness:1,fillStyle:new G({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:z,mapChartOutlierRegionStrokeStyle:new Qs({thickness:1,fillStyle:e}),mapChartSeparateRegionFillStyle:lt,mapChartSeparateRegionStrokeStyle:ut,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:rt,dataGridTitleFont:r,dataGridTitleFillStyle:t.titleFillStyle,dataGridTextFont:o,dataGridTextFillStyle:ot,dataGridCellBackgroundFillStyle:new G({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new Qs({thickness:.4,fillStyle:new G({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:rt,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:ut,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:ut,dataGridScrollBarButtonArrowFillStyle:ct,dataGridScrollBarButtonArrowStrokeStyle:ut,sparkLineChartStrokeStyle:m(0),sparkPointChartFillStyle:g(0),sparkBarChartFillStyle:g(0),sparkBarChartStrokeStyle:S(0),sparkAreaChartFillStyle:x(0),sparkAreaChartStrokeStyle:S(0),sparkPieChartFillStyle:g,sparkPieChartStrokeStyle:ut,sparkChartBandFillStyle:it,sparkChartBandStrokeStyle:et,sparkChartConstantLineStrokeStyle:ht,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:rt,spiderChartTitleFont:r,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:c,spiderChartWebStyle:new Qs({thickness:2,fillStyle:e}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:o,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:n,spiderChartAxisStrokeStyle:new Qs({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new Qs({thickness:2,fillStyle:i}),spiderSeriesFillStyle:x,spiderSeriesStrokeStyle:S,spiderSeriesPointFillStyle:g,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:rt,pieChartTitleFont:r,pieChartTitleFillStyle:t.titleFillStyle,pieChartSliceFillStylePalette:g,pieChartSliceStrokeStyle:ut,pieChartSliceLabelFont:u,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:At,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:rt,funnelChartTitleFont:r,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartSliceFillStylePalette:g,funnelChartSliceStrokeStyle:ut,funnelChartSliceLabelFont:u,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:At,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:rt,pyramidChartTitleFont:r,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartSliceFillStylePalette:g,pyramidChartSliceStrokeStyle:ut,pyramidChartSliceLabelFont:u,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:At,gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:rt,gaugeChartTitleFont:r,gaugeChartTitleFillStyle:t.titleFillStyle,gaugeChartEmptyGaugeFillStyle:new G({color:t.uiBackgroundColor}),gaugeChartEmptyGaugeStrokeStyle:ut,gaugeChartGaugeFillStyle:ot,gaugeChartIntervalLabelsFillStyle:at,gaugeChartIntervalLabelsFont:u,gaugeChartValueLabelFillStyle:at,gaugeChartValueLabelFont:u,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:rt,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new Qs({thickness:1,fillStyle:new G({color:_("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleFont:r,treeMapChartPathLabelFillStyle:at,treeMapChartPathLabelFont:u,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:r,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:u,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:rt,zoomBandChartDefocusOverlayFillStyle:pt,zoomBandChartSplitterStrokeStyle:mt,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:M(254,204,0,.7),uiButtonFillStyle:ct,uiButtonFillStyleHidden:dt,uiButtonStrokeStyle:ut,uiButtonSize:10,uiBackgroundFillStyle:lt,uiBackgroundStrokeStyle:ut,uiTextFillStyle:at,uiTextFillStyleHidden:ft,uiTextFont:u,legendTitleFillStyle:at,legendTitleFont:l,cursorTickMarkerXBackgroundFillStyle:lt,cursorTickMarkerXBackgroundStrokeStyle:ut,cursorTickMarkerXTextFillStyle:at,cursorTickMarkerXTextFont:u,cursorTickMarkerYBackgroundFillStyle:lt,cursorTickMarkerYBackgroundStrokeStyle:ut,cursorTickMarkerYTextFillStyle:at,cursorTickMarkerYTextFont:u,cursorPointMarkerFillStyle:gt.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:exports.PointShape.Cross,cursorResultTableFillStyle:lt,cursorResultTableStrokeStyle:ut,cursorResultTableTextFillStyle:at,cursorResultTableTextFont:u,cursorGridStrokeStyleX:gt,cursorGridStrokeStyleY:gt,chartMarkerPointMarkerFillStyle:gt.getFillStyle(),chartMarkerPointMarkerSize:{x:20,y:20},chartMarkerPointMarkerShape:exports.PointShape.Star,seriesMarkerPointMarkerFillStyle:gt.getFillStyle(),seriesMarkerPointMarkerSize:{x:9,y:9},seriesMarkerPointMarkerShape:exports.PointShape.Cross};return t.overrideThemeProperties&&(yt={...yt,...t.overrideThemeProperties}),yt})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},oA=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/${i}`;return s.addEventListener("error",(i=>{wi(t,e,"Theme resource",{shouldCrash:!1})})),s.src=e,s},aA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:ri(i[e%i.length].stroke,M(255,255,255),.5);return new q({stops:[{color:ri(h,M(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:ri(h,M(30,30,30),.5*s).setA(100),offset:1}]})},lA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:ri(i[e%i.length].stroke,M(255,255,255),.2);return new q({stops:[{color:ri(h,M(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:ri(h,M(0,0,0),.2*s),offset:1}]})},uA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:ri(i[e%i.length].stroke,M(255,255,255),.2);return new st({angle:90,stops:[{color:ri(h,M(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:ri(h,M(30,30,30),.5*s),offset:1}]})},cA=(t,i,s)=>(s=>{const e=new Map;return s=>{const h=e.get(s);if(h)return h;const r=(s=>{const e=!0===t?i[s%i.length].stroke:ri(i[s%i.length].stroke,M(255,255,255),.3);return new st({angle:90,stops:[{color:ri(e,M(255,255,255),.5),offset:0},{color:e,offset:.35},{color:ri(e,M(30,30,30),.5),offset:1}]})})(s);return e.set(s,r),r}})(),dA=(t,i,s)=>{const e=i[0].stroke;return new q({shape:exports.GradientShape.ellipse,extent:exports.GradientExtent.farthestCorner,position:{x:.5,y:.5},stops:[{color:!0===t?e:ri(e,M(255,255,255),.5*s),offset:0},{color:e,offset:.5},{color:!0===t?e:ri(e,M(0,0,0),.5*s),offset:1}]})},fA=Mi((()=>{const t=M(255,255,255),i=new G({color:t}),s=!0,e=new ln({spread:1,blur:9,offset:{x:0,y:0},color:M(0,0,0,150)}),h=new q({position:{x:.8,y:.8},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.ellipse,stops:[{offset:0,color:M(50,51,52)},{offset:.5,color:M(14,15,16)},{offset:1,color:M(0,0,0)}]}),r=new G({color:M(45,45,45)}),n=new q({position:{x:.5,y:.5},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.circle,stops:[{offset:0,color:M(120,120,120,100)},{offset:1,color:M(0,0,0,50)}]}),o=new q({position:{x:.5,y:.5},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.circle,stops:[{offset:0,color:M(30,30,30,200)},{offset:1,color:M(0,0,0,255)}]}),a=new G({color:M(255,255,220)}),l=new G({color:M(255,255,166)}),u=new G({color:M(255,255,220)}),c=new G({color:M(255,255,220,130)}),d=new G({color:M(255,255,200)}),f=d,A=f,g=new st({angle:45,stops:[{offset:0,color:M(230,230,230)},{offset:1,color:M(150,150,150)}]}),p=new G({color:M(220,220,220)}),m=new G({color:M(200,200,200,50)}),y=new G({color:M(200,200,200,150)}),S=new G({color:M(200,200,200,20)}),v=new G({color:M(150,150,150)}),x=new st({angle:0,stops:[{offset:0,color:M(10,10,10,220)},{offset:1,color:M(30,30,30,220)}]}),b=i,w=M(255,255,200),C=x,k=b,T=M(20,20,20),F=M(0,0,0),I=t,P=M(150,150,150),D=M(50,50,50),B=M(50,50,50),L=M(100,100,100),R=M(200,200,200),E=[M(255,255,91,255),M(255,205,91,255),M(255,155,91,255),M(255,196,188,255),M(255,148,184,255),M(219,148,198,255),M(235,196,224,255),M(169,148,198,255),M(148,226,198,255),M(148,255,176,255),M(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),z=t.setA(20),V=M(176,255,157,255),O=M(255,112,76,255),N={mapChartFillStyle:new st({angle:135,stops:[{color:M(255,255,91,255),offset:0},{color:M(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:aA(s,E,.5),pieChartSliceFillStylePalette:lA(s,E,1),funnelChartSliceFillStylePalette:uA(s,E,1),pyramidChartSliceFillStylePalette:uA(s,E,1),rectangleSeriesFillStyle:cA(s,E),gaugeChartGaugeFillStyle:dA(s,E,1)},W=new G({color:M(176,255,157,255)}),U=new G({color:M(255,146,146,255)}),Y=new G({color:M(176,255,157,255)}),H=new G({color:M(230,63,63,255)}),$=new G({color:M(176,255,157,120)}),X=new G({color:M(229,63,63,180)}),j=new G({color:M(27,37,36,255)}),Z=new G({color:M(62,27,27,255)}),Q=[M(255,0,0),M(255,255,0),M(0,255,0)],J=[M(10,10,255),M(10,190,255),M(251,255,0),M(255,38,0)],K=[M(255,255,0),M(255,204,0),M(255,128,0),M(255,0,0)],tt=[M(0,0,0),M(167,4,69,255),M(255,0,0),M(252,252,168,255)],it=new q({stops:[{color:M(61,61,80,100),offset:0},{color:M(44,44,55,30),offset:1}]}),et=new G({color:M(148,148,198,255)}),ht=$.getColor().setA(255),rt=M(100,100,100),nt=[M(255,241,149,200),M(255,230,65,200),M(238,211,32,200),M(238,176,32,200),M(255,159,13,200),M(254,120,37,200),M(253,91,56,200),M(253,75,84,200),M(254,95,124,200),M(227,56,160,200),M(226,53,134,200),M(216,90,166,200),M(254,151,206,200),M(237,151,254,200),M(243,177,255,200),M(233,133,252,200),M(210,101,230,200),M(178,61,200,200),M(193,81,156,200),M(217,95,145,200)];return nA({isDark:s,highlightColorOffset:M(60,60,60,60),highlightColorOffsetAxisOverlay:M(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:h,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:p,axisGridMajorFillStyle:m,axisTickMinorFillStyle:y,axisGridMinorFillStyle:S,cursorGridFillStyle:v,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:w,resultTableBackgroundFillStyle:C,resultTableBackgroundBorderFillStyle:k,uiBackgroundColor:T,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:P,uiStrokeColorContrastLow:D,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:R,dataColorPalette:E,dataColorPaletteInverted:[{area:M(190,50,50,100),border:M(210,80,80)}],dataHighlightOverlayColor:z,dataColorPositive:V,dataColorNegative:O,zoomBandChartDefocusOverlayFillStyle:new G({color:M(0,0,0,180)}),zoomBandChartSplitterColor:_("#FBFB5A"),zoomBandChartKnobFillStyle:t=>new Kr({source:oA(t,"zoomBandChart/darkgold-selector.png"),fitMode:exports.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:N,treeMapChartParentColor:_("#181E21"),treeMapChartNodeColors:nt,treeMapChartLabelFillStyle:new G({color:M(33,33,33)}),treeMapChartLabelHeaderFillStyle:new G({color:M(250,250,250)})},{positiveTextFillStyle:W,negativeTextFillStyle:U,positiveFillStyle:Y,negativeFillStyle:H,positiveAreaFillStyle:$,negativeAreaFillStyle:X,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:Z,badGoodColorPalette:Q,coldHotColorPalette:J,intensityColorPalette:K,spectrogramColorPalette:tt,bollingerFillStyle:it,bollingerBorderFillStyle:et,highlightPointColor:t,highlightDataGridColor:ht,unfocusedDataColor:rt})})),AA=Mi((()=>{const t=M(255,255,255),i=new G({color:t}),s=!0,e=new ln({spread:0,blur:9,offset:{x:0,y:0},color:M(105,255,236,40)}),h=new G({color:M(2,21,30)}),r=new q({stops:[{color:M(19,40,66,150),offset:0},{color:M(0,0,0,150),offset:1}]}),n=new G({color:M(0,5,8,150)}),o=i,a=i,l=i,u=new G({color:M(255,255,220,130)}),c=i,d=i,f=d,A=new G({color:M(20,224,250,255)}),g=i,p=new G({color:M(61,94,110,100)}),m=new G({color:M(61,94,110,255)}),y=new G({color:M(61,94,110,40)}),S=i,v=new G({color:M(0,18,23,255)}),x=i,b=t,w=new G({color:M(0,17,22,240)}),C=i,k=M(0,38,48,220),T=M(0,0,0),F=t,I=M(150,150,150),P=M(19,78,93),D=M(50,50,50),B=M(0,36,48),L=M(200,200,200),R=[M(45,253,253,255),M(44,172,247,255),M(46,100,248,255),M(96,84,199,255),M(184,104,245,255),M(98,160,218,255),M(43,238,245,255),M(38,140,206,255),M(112,96,224,255),M(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),E=t.setA(50),z=M(3,217,194,255),V=M(230,63,63,255),O={mapChartFillStyle:new st({angle:135,stops:[{color:M(118,248,231,255),offset:0},{color:M(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:aA(s,R,1),pieChartSliceFillStylePalette:lA(s,R,1),funnelChartSliceFillStylePalette:uA(s,R,1),pyramidChartSliceFillStylePalette:uA(s,R,1),rectangleSeriesFillStyle:cA(s,R),gaugeChartGaugeFillStyle:dA(s,R,1)},N=new G({color:M(45,253,253,255)}),W=new G({color:M(255,146,146,255)}),U=new G({color:M(45,253,253,255)}),Y=new G({color:M(230,63,63,255)}),H=new G({color:M(1,190,164,120)}),$=new G({color:M(229,63,63,180)}),X=new G({color:M(1,53,57,255)}),j=new G({color:M(62,27,27,255)}),Z=[M(1,104,119,255),M(0,165,144,255),M(0,246,214,255)],Q=[M(0,87,95,255),M(0,125,124,255),M(1,209,182,255),M(0,255,221,255),M(218,112,112,255),M(172,47,47,255)],J=[M(126,255,253,255),M(50,233,230,255),M(0,196,193,255),M(62,138,178,255),M(139,88,191,255),M(162,55,143,255)],K=[M(13,31,52,255),M(101,50,118,255),M(1,142,172,255),M(2,196,170,255),M(0,255,221,255)],tt=new q({stops:[{color:M(122,103,254,70),offset:0},{color:M(178,168,255,10),offset:1}]}),it=new G({color:M(122,103,254,255)}),et=H.getColor().setA(255),ht=M(15,83,83),rt=[M(139,252,252,150),M(60,239,239,150),M(2,201,201,150),M(26,159,159,150),M(15,146,187,150),M(65,168,200,150),M(67,146,207,150),M(64,108,209,150),M(189,64,233,150),M(219,84,238,150),M(192,55,212,150),M(212,98,229,150),M(248,110,211,150),M(251,154,225,150),M(251,154,184,150),M(233,105,144,150),M(255,133,170,150),M(249,110,135,150),M(245,72,101,150),M(210,57,84,150)];return nA({isDark:s,highlightColorOffset:M(60,60,60,60),highlightColorOffsetAxisOverlay:M(255,255,255,40),effect:e,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Kr({source:oA(t,"themes/turquoiseHexagon.jpg"),fitMode:exports.ImageFitMode.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:p,axisTickMinorFillStyle:m,axisGridMinorFillStyle:y,cursorGridFillStyle:S,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:b,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:M(170,60,210,100),border:M(210,100,250)}],dataHighlightOverlayColor:E,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new G({color:M(0,0,0,180)}),zoomBandChartSplitterColor:_("#2BF4F4"),zoomBandChartKnobFillStyle:t=>new Kr({source:oA(t,"zoomBandChart/turquoise-selector.png"),fitMode:exports.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:_("#002329"),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new G({color:M(33,33,33)}),treeMapChartLabelHeaderFillStyle:new G({color:M(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:W,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:$,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:tt,bollingerBorderFillStyle:it,highlightPointColor:t,highlightDataGridColor:et,unfocusedDataColor:ht})})),gA=Mi((()=>{const t=!1,i=new ln({spread:0,blur:6,offset:{x:2,y:-2},color:M(0,0,0,30)}),s=new q({position:{x:.8,y:.8},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.ellipse,stops:[{offset:0,color:M(255,255,255)},{offset:1,color:M(255,255,255)}]}),e=new G({color:M(219,227,233,255)}),h=new q({position:{x:.5,y:.5},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.circle,stops:[{offset:0,color:M(255,255,255,200)},{offset:1,color:M(240,244,246,200)}]}),r=new q({position:{x:.5,y:.5},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.circle,stops:[{offset:0,color:M(255,255,255,255)},{offset:1,color:M(255,255,255,255)}]}),n=new G({color:M(33,43,49)}),o=new G({color:M(33,43,49)}),a=new G({color:M(33,43,49)}),l=new G({color:M(33,43,49,150)}),u=new G({color:M(33,43,49)}),c=u,d=c,f=new st({angle:45,stops:[{offset:0,color:M(225,225,225)},{offset:1,color:M(225,225,225)}]}),A=new G({color:M(150,150,150,255)}),g=new G({color:M(150,150,150,170)}),p=new G({color:M(150,150,150,150)}),m=new G({color:M(150,150,150,100)}),y=new G({color:M(128,146,159)}),S=new st({angle:0,stops:[{offset:0,color:M(255,255,255,240)},{offset:1,color:M(255,255,255,240)}]}),v=new G({color:M(168,186,199)}),x=M(255,255,200),b=new G({color:M(255,255,255,240)}),w=new G({color:M(128,146,159,255)}),C=M(255,255,255,255),k=M(168,168,199,255),T=M(168,186,199,255),F=M(168,186,199,255),I=M(168,186,199,255),P=M(168,186,199,255),D=M(100,100,100),B=M(200,200,200),L=[M(28,181,140,255),M(255,132,0,255),M(240,39,39,255),M(86,121,251,255),M(2,181,213,255),M(13,212,158,255),M(22,167,3,255),M(234,103,232,255),M(62,183,179,255),M(140,93,3,255),M(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),R=M(150,150,150,80),E=M(46,182,120,255),z=M(255,66,66,255),V=new Qs({thickness:2,fillStyle:new G({color:M(168,186,199,255)})}),O={mapChartFillStyle:new st({angle:-45,stops:[{color:M(2,181,213,255),offset:0},{color:M(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:aA(t,L,.8),pieChartSliceFillStylePalette:lA(t,L,.8),funnelChartSliceFillStylePalette:uA(t,L,.5),pyramidChartSliceFillStylePalette:uA(t,L,.5),rectangleSeriesFillStyle:cA(t,L),gaugeChartGaugeFillStyle:dA(t,L,.8),chartXYSeriesBackgroundStrokeStyle:V,chart3DSeriesBackgroundStrokeStyle:V,polarChartSeriesBackgroundStrokeStyle:V,spiderChartSeriesBackgroundStrokeStyle:V,dataGridTextFillStyle:new G({color:M(0,88,64,255)})},N=new G({color:M(4,146,108,255)}),W=new G({color:M(240,39,39,255)}),U=new G({color:M(28,181,140,255)}),Y=new G({color:M(230,88,88,255)}),H=new G({color:M(28,181,140,180)}),$=new G({color:M(230,88,88,180)}),X=new G({color:M(229,243,228)}),j=new G({color:M(232,225,216)}),Z=[M(193,48,48,255),M(240,234,60,255),M(45,191,55,255)],Q=[M(10,19,255,255),M(15,191,250,255),M(249,255,2,255),M(253,133,0,255),M(255,24,0,255)],J=[M(50,99,213),M(8,179,77),M(255,246,0),M(255,126,0),M(189,36,30)],K=[M(16,64,176),M(8,179,77),M(255,246,0),M(255,126,0),M(168,6,0)],tt=new G({color:M(185,198,207,255)}),it=new q({stops:[{color:M(151,190,220,10),offset:0},{color:M(151,190,220,50),offset:1}]}),et=H.getColor().setA(255),ht=M(150,150,150),rt=[M(255,243,136,125),M(254,237,99,125),M(255,216,109,125),M(255,172,100,125),M(255,133,101,125),M(255,113,142,125),M(230,103,129,125),M(242,126,219,125),M(255,155,235,125),M(255,181,240,125),M(203,143,255,125),M(208,154,255,125),M(171,188,255,125),M(197,209,255,125),M(171,187,255,125),M(84,167,239,125),M(38,196,214,125),M(38,214,196,125),M(69,225,141,125),M(36,191,88,125)];return nA({isDark:t,highlightColorOffset:M(-60,-60,-60,60),highlightColorOffsetAxisOverlay:M(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,axisLabelMinorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:A,axisGridMajorFillStyle:g,axisTickMinorFillStyle:p,axisGridMinorFillStyle:m,cursorGridFillStyle:y,legendBackgroundFillStyle:S,legendBackgroundBorderFillStyle:v,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:b,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:C,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:L,dataColorPaletteInverted:[{area:M(190,50,50,100),border:M(210,80,80)}],dataHighlightOverlayColor:R,dataColorPositive:E,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new G({color:M(255,255,255,180)}),zoomBandChartSplitterColor:_("#505D65"),zoomBandChartKnobFillStyle:t=>new Kr({source:oA(t,"zoomBandChart/light-selector.png"),fitMode:exports.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:_("#D9D9D9"),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new G({color:M(0,0,0)}),treeMapChartLabelHeaderFillStyle:new G({color:M(33,33,33)})},{positiveTextFillStyle:N,negativeTextFillStyle:W,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:$,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:it,bollingerBorderFillStyle:tt,highlightPointColor:M(0,0,0),highlightDataGridColor:et,unfocusedDataColor:ht})})),pA=Mi((()=>{const t=!1,i=new q({position:{x:.8,y:.8},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.ellipse,stops:[{offset:0,color:M(255,255,255)},{offset:1,color:M(255,255,255)}]}),s=new G({color:M(214,236,216,255)}),e=new q({position:{x:.5,y:.5},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.circle,stops:[{offset:0,color:M(233,244,231,70)},{offset:1,color:M(233,244,231,200)}]}),h=new q({position:{x:.5,y:.5},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.circle,stops:[{offset:0,color:M(255,255,255,255)},{offset:1,color:M(255,255,255,255)}]}),r=new G({color:M(1,61,53)}),n=new G({color:M(1,61,53)}),o=new G({color:M(1,61,53)}),a=new G({color:M(1,61,53,150)}),l=new G({color:M(1,61,53)}),u=l,c=u,d=new st({angle:45,stops:[{offset:0,color:M(225,225,225)},{offset:1,color:M(225,225,225)}]}),f=new G({color:M(188,211,186,255)}),A=new G({color:M(188,211,186,150)}),g=new G({color:M(188,211,186,50)}),p=new G({color:M(188,211,186,50)}),m=new G({color:M(104,148,111,255)}),y=new st({angle:0,stops:[{offset:0,color:M(255,255,255,240)},{offset:1,color:M(255,255,255,240)}]}),S=new G({color:M(104,148,111)}),v=M(255,255,200),x=new G({color:M(255,255,255,240)}),b=new G({color:M(104,148,111,255)}),w=M(255,255,255,255),C=M(179,201,183,255),k=M(188,211,186,255),T=M(188,211,186,255),F=M(188,211,186,255),I=M(188,211,186,255),P=M(100,100,100),D=M(200,200,200),B=[M(138,195,142,255),M(193,161,114,255),M(178,99,99,255),M(142,156,210,255),M(154,209,219,255),M(164,212,199,255),M(104,156,97,255),M(196,147,195,255),M(92,190,187,255),M(126,100,51,255),M(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),L=M(150,150,150,80),R=M(46,182,84,255),E=M(232,96,96,255),z=new Qs({thickness:2,fillStyle:new G({color:M(188,211,186,255)})}),V={mapChartFillStyle:new st({angle:-45,stops:[{color:M(118,160,121,255),offset:0},{color:M(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:aA(t,B,.8),pieChartSliceFillStylePalette:lA(t,B,.8),pyramidChartSliceFillStylePalette:uA(t,B,.5),funnelChartSliceFillStylePalette:uA(t,B,.5),rectangleSeriesFillStyle:cA(t,B),gaugeChartGaugeFillStyle:dA(t,B,.8),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new G({color:M(77,66,21,255)})},O=new G({color:M(93,151,97,255)}),N=new G({color:M(178,99,99,255)}),W=new G({color:M(138,195,142,255)}),U=new G({color:M(178,99,99,255)}),Y=new G({color:M(138,195,142,180)}),H=new G({color:M(178,99,99,180)}),$=new G({color:M(224,240,237)}),X=new G({color:M(251,227,227)}),j=[M(178,99,99,255),M(215,224,111,255),M(80,186,88,255)],Z=[M(62,64,142,255),M(66,131,77,255),M(250,250,135,255),M(202,161,78,255),M(179,53,53,255)],Q=[M(64,86,138),M(123,192,205),M(255,252,149),M(220,155,92),M(184,78,74)],J=[M(64,86,138),M(123,192,205),M(255,252,149),M(220,155,92),M(132,60,57)],K=new G({color:M(185,198,207,255)}),tt=new q({stops:[{color:M(151,190,220,10),offset:0},{color:M(151,190,220,50),offset:1}]}),it=Y.getColor().setA(255),et=M(150,150,150),ht=[M(242,239,210,150),M(243,238,183,150),M(210,222,136,150),M(204,217,148,150),M(157,190,124,150),M(143,178,72,150),M(198,147,88,150),M(216,148,71,150),M(229,142,103,150),M(225,174,152,150),M(219,149,203,150),M(216,188,209,150),M(109,198,189,150),M(172,206,202,150),M(164,223,217,150),M(174,215,233,150),M(203,225,235,150),M(220,227,243,150),M(207,213,227,150),M(171,182,209,150)];return nA({isDark:t,highlightColorOffset:M(-60,-60,-60,60),highlightColorOffsetAxisOverlay:M(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:e,seriesBackgroundFillStyle:h,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:r,axisTitleFillStyle:n,axisLabelMajorFillStyle:o,axisLabelMinorFillStyle:a,uiTitleFillStyle:l,uiTextFillStyle:u,cursorTextFillStyle:c,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:A,axisTickMinorFillStyle:g,axisGridMinorFillStyle:p,cursorGridFillStyle:m,legendBackgroundFillStyle:y,legendBackgroundBorderFillStyle:S,legendButtonDefaultColor:v,resultTableBackgroundFillStyle:x,resultTableBackgroundBorderFillStyle:b,uiBackgroundColor:w,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:D,dataColorPalette:B,dataColorPaletteInverted:[{area:M(210,70,70,100),border:M(200,110,110)}],dataHighlightOverlayColor:L,dataColorPositive:R,dataColorNegative:E,zoomBandChartDefocusOverlayFillStyle:new G({color:M(255,255,255,180)}),zoomBandChartSplitterColor:_("#446A40"),zoomBandChartKnobFillStyle:t=>new Kr({source:oA(t,"zoomBandChart/lightnature-selector.png"),fitMode:exports.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:V,treeMapChartParentColor:_("#EFF7EE"),treeMapChartNodeColors:ht,treeMapChartLabelFillStyle:new G({color:M(0,0,0)}),treeMapChartLabelHeaderFillStyle:new G({color:M(33,33,33)})},{positiveTextFillStyle:O,negativeTextFillStyle:N,positiveFillStyle:W,negativeFillStyle:U,positiveAreaFillStyle:Y,negativeAreaFillStyle:H,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:X,badGoodColorPalette:j,coldHotColorPalette:Z,intensityColorPalette:Q,spectrogramColorPalette:J,bollingerFillStyle:tt,bollingerBorderFillStyle:K,highlightPointColor:M(0,0,0),highlightDataGridColor:it,unfocusedDataColor:et})})),mA=Mi((()=>{const t=M(255,255,255),i=new G({color:t}),s=!0,e=new ln({spread:1,blur:9,offset:{x:0,y:0},color:M(255,255,255,30)}),h=new G({color:M(6,15,36)}),r=new q({stops:[{color:M(46,13,87,50),offset:0},{color:M(0,0,0,150),offset:1}]}),n=new G({color:M(0,5,8,150)}),o=i,a=i,l=i,u=new G({color:M(255,255,220,130)}),c=i,d=i,f=d,A=new st({angle:45,stops:[{offset:0,color:M(241,133,255,255)},{offset:1,color:M(115,207,238,255)}]}),g=i,p=new G({color:M(61,94,110,100)}),m=new G({color:M(61,94,110,255)}),y=new G({color:M(61,94,110,40)}),S=i,v=new G({color:M(0,18,23,255)}),x=i,b=M(115,207,238,255),w=new G({color:M(0,17,22,240)}),C=i,k=M(0,38,48,255),T=M(0,0,0),F=t,I=M(150,150,150),P=M(19,57,93),D=M(50,50,50),B=M(0,17,48),L=M(200,200,200),R=[M(20,211,237,255),M(98,147,252,255),M(164,73,250,255),M(129,117,253,255),M(95,134,252,255),M(22,133,212,255),M(35,200,242,255),M(104,121,233,255),M(137,69,232,255),M(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),E=t.setA(50),z=M(3,217,194,255),V=M(243,21,110,255),O={mapChartFillStyle:new st({angle:135,stops:[{color:M(118,248,231,255),offset:0},{color:M(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:aA(s,R,.5),pieChartSliceFillStylePalette:lA(s,R,2),funnelChartSliceFillStylePalette:uA(s,R,1),pyramidChartSliceFillStylePalette:uA(s,R,1),rectangleSeriesFillStyle:cA(s,R),gaugeChartGaugeFillStyle:dA(s,R,1)},N=new G({color:M(20,211,237,255)}),W=new G({color:M(253,145,178,255)}),U=new G({color:M(20,211,237,255)}),Y=new G({color:M(239,68,121,255)}),H=new G({color:M(20,211,237,120)}),$=new G({color:M(239,68,121,180)}),X=new G({color:M(1,53,57,255)}),j=new G({color:M(94,19,42,255)}),Z=[M(174,51,132,255),M(204,107,218,255),M(189,215,253,255)],Q=[M(0,63,95,255),M(0,149,255,255),M(0,225,255,255),M(255,154,254,255),M(204,98,170,255),M(139,39,84,255)],J=[M(197,241,255,255),M(70,210,255,255),M(0,164,217,255),M(90,99,222,255),M(138,75,192,255),M(151,27,162,255)],K=[M(13,31,52,255),M(129,54,130,255),M(131,108,176,255),M(7,162,213,255),M(26,247,255,255)],tt=new q({stops:[{color:M(219,42,235,60),offset:0},{color:M(237,73,252,10),offset:1}]}),it=new G({color:M(237,73,252,255)}),et=H.getColor().setA(255),ht=M(8,70,100),rt=[M(149,230,255,150),M(93,213,243,150),M(20,189,223,150),M(5,151,181,150),M(2,138,198,150),M(2,113,198,150),M(97,148,236,150),M(93,111,230,150),M(151,120,223,150),M(128,87,227,150),M(153,52,230,150),M(179,92,245,150),M(248,110,211,150),M(255,155,228,150),M(251,88,207,150),M(255,0,162,150),M(214,73,177,150),M(209,71,159,150),M(238,101,169,150),M(210,57,134,150)];return nA({isDark:s,highlightColorOffset:M(60,60,60,60),highlightColorOffsetAxisOverlay:M(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Kr({source:oA(t,"themes/cyberSpace.jpg"),fitMode:exports.ImageFitMode.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:p,axisTickMinorFillStyle:m,axisGridMinorFillStyle:y,cursorGridFillStyle:S,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:b,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:M(41,130,255,100),border:M(45,110,240)}],dataHighlightOverlayColor:E,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new G({color:M(0,0,0,180)}),zoomBandChartSplitterColor:_("#DB77FF"),zoomBandChartKnobFillStyle:t=>new Kr({source:oA(t,"zoomBandChart/cyberspace-selector.png"),fitMode:exports.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:_("#1E1E3B"),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new G({color:M(33,33,33)}),treeMapChartLabelHeaderFillStyle:new G({color:M(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:W,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:$,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:tt,bollingerBorderFillStyle:it,highlightPointColor:t,highlightDataGridColor:et,unfocusedDataColor:ht})})),yA={};Object.defineProperty(yA,"darkGold",{get:fA,enumerable:!0}),Object.defineProperty(yA,"turquoiseHexagon",{get:AA,enumerable:!0}),Object.defineProperty(yA,"light",{get:gA,enumerable:!0}),Object.defineProperty(yA,"lightNature",{get:pA,enumerable:!0}),Object.defineProperty(yA,"cyberSpace",{get:mA,enumerable:!0});const SA=yA,vA=SA.darkGold,xA=(t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC")=>{let s,e=0,h=0;const r=[],n=t=>{const i=new xt.Image;i.src=t,i.onload=()=>{r.forEach((t=>{var s;const r=new Kr({source:i,fitMode:exports.ImageFitMode.Stretch});null===(s=t.Ed)||void 0===s||s.ke(r),e=i.width,h=i.height,l(t)}))}};n(i);const o=t.Wn((t=>n(t)));let a;if(new xt.Image instanceof xt.HTMLImageElement){const t=new xt.Image;t.src=i,a=new Kr({source:t,fitMode:exports.ImageFitMode.Stretch})}else if(xt.lcjs_setup){const t=new xt.Image;t.src=i;const s=xt.lcjs_setup(t.naturalWidth,t.naturalHeight);s.getContext("2d").drawImage(t,0,0),a=new Kr({source:s,fitMode:exports.ImageFitMode.Stretch})}else a=new G({color:_("#f00")});const l=t=>{if(t.Ed){const i=t.ft.mi({x:t.ft.x.getInnerEnd(),y:t.ft.y.getInnerStart()},{x:-(3+e),y:3}),s=t.ft.mi({x:t.ft.x.getInnerEnd(),y:t.ft.y.getInnerStart()},{x:-3,y:3+h}),r={x:s.x-i.x,y:s.y-i.y};t.Ed.Ie(i).tt(r)}s&&s.vs()};return s=t.II("logo",Number.MAX_SAFE_INTEGER),i=>{const e={ft:i};return(i=>{i.Ed&&i.Ed.dispose(),s&&(i.Ed=s.Te(i.ft).ke(a).setMouseInteractions(!0).Ce(rt).setMouseEnterEventHandler((()=>{t.Ur(exports.MouseStyles.Point)})).setMouseLeaveEventHandler((()=>{t.Ur(exports.MouseStyles.None)})).setMouseClickEventHandler(bA).setTouchEndEventHandler(bA),l(i))})(e),r.push(e),{Ds:()=>l(e),U:()=>(i=>{i.Ed&&(i.Ed.dispose(),i.Ed=void 0);const s=r.indexOf(i);s>=0&&r.splice(s,1),r.length<=0&&t.Un(o)})(e)}}},bA=()=>xt.open("https://lightningchart.com/lightningchart-js/");class MA{constructor(){this.mR=this.fP.bind(this),xt.addEventListener("scroll",this.mR,{passive:!0})}U(){this.mR&&xt.removeEventListener("scroll",this.mR),this.mR=void 0}}class _A{constructor(t,i){this.ma=t,this.j=i,this.yR=!0,this.SR=null,this.vR=null}}class wA{constructor(t){this.xR=!1,this.bR=1,this.MR=t,this._R={ma:l(0,0),j:l(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),yR:!0,SR:null,vR:null},this.wR=l(64,64),this.CR=new Uint8ClampedArray(this.wR.x*this.wR.y*this.bR)}kR(t,i){if(!t.yR)return null;if(t.SR&&t.vR){const s=this.kR(t.SR,i);return null!==s?s:this.kR(t.vR,i)}const s=u(t.j.x,t.j.y);if(t.ma.x+t.j.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.wR.x-t.ma.x-1),t.ma.y+t.j.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.wR.y-t.ma.y-1),t.j.x===i.x&&t.j.y===i.y)return t.yR=!1,t;if(s.x<i.x||s.y<i.y)return null;let e,h;const r=s.x-i.x,n=s.y-i.y;let o=r<n;return 0===r&&0===n&&(o=!(t.j.x>t.j.y)),o?(e=new _A(rs(t.ma,{x:0,y:1}),l(t.j.x,i.y)),h=new _A(rs(t.ma,{x:0,y:i.y+1}),l(t.j.x,t.j.y-1-i.y))):(e=new _A(rs(t.ma,{x:1,y:0}),l(i.x,t.j.y)),h=new _A(rs(t.ma,{x:i.x+1,y:0}),l(t.j.x-1-i.x,t.j.y))),t.SR=e,t.vR=h,this.kR(t.SR,i)}TR(t,i){const s={FR:!1,ma:null};let e=this.kR(this._R,i);if(null===e)for(;null===e&&this.wR.x<this.MR&&this.wR.y<this.MR;){if(!this.IR(l(2*this.wR.x,2*this.wR.y)))return this.xR=!0,null;s.FR=!0,e=this.kR(this._R,i)}if(null===e)return this.xR=!0,null;for(let s=0;s<i.y;s+=1)for(let h=0;h<i.x;h+=1){const r=e.ma.y+s,n=e.ma.x+h;this.CR[r*this.bR*this.wR.x+n*this.bR+0]=t[s*this.bR*i.x+h*this.bR+0]}return s.ma=e.ma,s}IR(t){if(t.x>this.MR||t.y>this.MR)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.bR);for(let s=0;s<this.wR.y;s+=1)for(let e=0;e<this.wR.x;e+=1)i[s*t.x*this.bR+e*this.bR+0]=this.CR[s*this.wR.x*this.bR+e*this.bR+0];return this.wR=t,this.CR=i,!0}}class CA{constructor(t){this.PR=new Map,this.MR=t,this.PR.set(this.PR.size,new wA(this.MR))}DR(t){return this.PR.get(t)}TR(t,i){let s=-1;const e=Array.from(this.PR.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.xR){s=t;break}}-1===s&&(s=this.PR.size,this.PR.set(this.PR.size,new wA(this.MR)));const h=this.PR.get(s);if(!h)return null;let r=h.TR(t,i);if(!r&&h.xR){const e=this.PR.size,h=new wA(this.MR);this.PR.set(e,h),s=e,r=h.TR(t,i)}return r?{BR:s,...r}:null}}var kA;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(kA||(kA={}));const TA=ui("font-texture");class FA{constructor(t){this.LR=new Map,this.RR=new Map,this.Go=TA(),this.ER=t,this.zR=new CA(this.ER.VR||4096)}OR(){return this.RR.forEach((t=>{this.ER.NR(t)})),this.RR.clear(),this}GR(t,i){const s=this.LR.get(i);if(s)return s.get(t)}WR(t,i,s){let e=this.LR.get(i);if(e||(e=new Map,this.LR.set(i,e)),e.has(t.glyph))return kA.Success;const h=this.zR.TR(s,t.size);if(!h||!h.ma)return kA.Fail;h.FR&&this.UR();const r=this.zR.DR(h.BR);if(!r)return kA.Fail;let n=this.RR.get(h.BR);if(!n){const t=this.ER.gl.createTexture();if(!t)throw new gt("Failed to create texture for font!");n=t,this.RR.set(h.BR,t)}const o=h.ma,a=r.wR.x,l=r.wR.y,u=-t.offsetX,c=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,A=o.x/a,g=(o.y+t.size.y)/l,p=(o.x+t.size.x)/a,m=o.y/l,y=[A,g,p,g,A,m,A,m,p,g,p,m],S=[u,c,d,c,u,f,u,f,d,c,d,f],v={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:S,texCoords:y,packerId:h.BR,texture:n};e.set(t.glyph,v);const x=this.ER.gl;return x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),x.bindTexture(x.TEXTURE_2D,n),x.texImage2D(x.TEXTURE_2D,0,x.LUMINANCE,r.wR.x,r.wR.y,0,x.LUMINANCE,x.UNSIGNED_BYTE,this.ER.YR?r.CR:new Uint8Array(r.CR)),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.bindTexture(x.TEXTURE_2D,null),h.FR?kA.Resize:kA.Success}UR(){this.LR.forEach((t=>{t.forEach(((i,s)=>{const e=this.zR.DR(i.packerId);if(!e)return;const h=i.origin,r=e.wR.x,n=e.wR.y,o=h.x/r,a=(h.y+i.size.y)/n,l=(h.x+i.size.x)/r,u=h.y/n,c=[o,a,l,a,o,u,o,u,l,a,l,u];i.texCoords=c,t.set(s,i)}))}))}}const IA=t=>{if(t instanceof Ls||t instanceof qc)return t.wi()?"linear-highPrecision":"linear";if(t instanceof Rs){const i={};return t.x instanceof bs&&(i.x={base:t.x.pi()}),t.y instanceof bs&&(i.y={base:t.y.pi()}),["logarithmic",i]}return"linear"},PA=t=>{const i=Object.keys(t),s={};return i.forEach((i=>{const e=t[i];let h=!1;s[i]=t=>{if(!t)return h;const i=e();return h=i,i}})),s},DA=(t,i,s)=>"value"===t.getLookUpProperty()?s:"x"===t.getLookUpProperty()?{min:i.xt(),max:i.bt()}:"y"===t.getLookUpProperty()?{min:i.Mt(),max:i._t()}:"z"===t.getLookUpProperty()?{min:i.uS(),max:i.lS()}:void 0,BA=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),LA=t=>(i,s)=>s%2?i:i+t;class RA{constructor(t){this.HR=new Map,this.$R=ui("font"),this.XR=new Map,this.jR=new Set,this.ER=t}OR(t=!1){return(t||0===this.jR.size)&&(this.HR.forEach(((t,i)=>{t.OR(),this.HR.delete(i)})),this.jR.clear()),this}ZR(t){this.jR.add(t)}QR(t){this.jR.delete(t)}JR(t,i,s,e){const h=xt.devicePixelRatio,r=`${e?"dark":"light"} - ${ph(i,h).id}`,n=this.XR.get(r),o=this.HR.get(n);let a=0,l=0,u=0;const c=t.split(""),d=i.size,f=.45*i.size*h,A=Math.round(1*i.size);let g=!1;for(let t=0;t<c.length;t+=1){const i=c[t],s=o&&o.GR(i,d);if(s)""!==i.trim()&&(l=Math.max(l,s.baseline),a=Math.min(a,s.baseline-(s.size.y-1))),u+=s.advanceX;else{if(""!==i.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(A-1))}u+=f,g=!0}}const p=((t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,h=Math.cos(e),r=Math.sin(e);return{x:Math.abs(t*h)+Math.abs(i*r),y:Math.abs(t*r)+Math.abs(i*h)}})(u/h,(l-a+1)/h,s);return{x:p.x,y:p.y,isEstimate:g}}KR(t,i,s){const e=`${s?"dark":"light"} - ${i.id}`;let h=this.XR.get(e);h||(h=this.$R(),this.HR.set(h,new FA(this.ER)),this.XR.set(e,h));const r=this.HR.get(h);if(!r)throw new gt("Failed to get font texture!");let n=0,o=0,a=0;const u=t.split(""),c=new Map;let d=0;const f=i.properties.size;for(let t=0;t<u.length;t+=1){const e=u[t],h=Math.ceil(d);let a=r.GR(e,f);if(!a){const h=this.ER.qR(e,i.properties,i.dpr,s);if(!h)continue;const l=r.WR(h[1],f,h[0]);if(l===kA.Resize){this.jR.forEach((t=>{t.ua.o=!0})),t=-1,d=0,o=0,n=0,c.clear();continue}if(l===kA.Fail)throw new gt("Failed to create glyph");if(a=r.GR(e,f),!a)throw new gt("Failed to get glyph after creation")}if(""!==e.trim()){let t=c.get(a.texture);t||(t={vertices:[],texCoords:[]},c.set(a.texture,t)),t.vertices.push(...a.vertices.map(LA(h))),t.texCoords.push(...a.texCoords),o=Math.max(o,a.baseline),n=Math.min(n,a.baseline-(a.size.y-1))}d+=a.advanceX}a=d;const g=A(l(0,n),l(a,o)),p=[];return c.forEach(((t,i)=>{p.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[p,g]}}class EA{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>zA(t)));for(const s of i)t=s(t);return`${mi(this.modifiers.filter((t=>VA(t)))).map((t=>t.tE)).join("\n")}\n${t}`}}const zA=t=>"function"==typeof t,VA=t=>t&&"object"==typeof t&&"iE"in t,OA=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},NA=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),GA=(...t)=>i=>{const s=t.filter((t=>!1!==t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},WA=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r},UA=(t,...i)=>s=>{const e=i.filter((t=>"string"==typeof t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const h=e.join("\n"),r=s.lastIndexOf(t),n=s.substring(r),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,r+o)}\n${h}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},YA=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},HA=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=OA(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=OA(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return YA(`\t${h} = ${e};`)(s)},$A=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i},XA={roundUnsigned:{iE:"roundUnsigned",tE:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{iE:"linearStep",tE:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},decodeUbyteRGBAEncodedFloat:{iE:"decodeUbyteRGBAEncodedFloat",tE:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{iE:"texelFetchWithFallback",tE:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{iE:"texelFetchWithFallback",tE:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{iE:"texelFetchUnsignedWithFallback",tE:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{iE:"texelFetchUnsignedWithFallback",tE:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{iE:"modulus",tE:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{iE:"computeScreenSpaceWireframe",tE:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},jA=(t,i)=>{const s=i.steps,e=s.length-1,h=[OA("uniform vec4 uFallbackColor")],r=[],n=[];for(let t=0;t<i.steps.length;t+=1)r.push(`uniform float uLUTValue${t}`),n.push(`uniform vec4 uLUTColor${t}`);return h.push(OA(...r,...n),i.percentageValues&&OA("uniform float uMinValue","uniform float uMaxValue")),i.interpolate?h.push(WA("colorFragment","vec4 colorLookup = vec4(0.0)",`if (${t} <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                }`,"float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),"if (value <= uLUTValue0) {\n                    colorLookup = uLUTColor0;\n                }",`if (value >= uLUTValue${e}) {\n                    colorLookup = uLUTColor${e};\n                }`,...s.slice(0,-1).map(((t,i)=>`if (value >= uLUTValue${i} && value <= uLUTValue${i+1}) { colorLookup = uLUTColor${i} + vec4(\n                        uLUTColor${i+1}[0] -  uLUTColor${i}[0],\n                        uLUTColor${i+1}[1] -  uLUTColor${i}[1],\n                        uLUTColor${i+1}[2] -  uLUTColor${i}[2],\n                        uLUTColor${i+1}[3] -  uLUTColor${i}[3]\n                    ) * (value - uLUTValue${i})/(uLUTValue${i+1} - uLUTValue${i});}`)),"vec4 colorFragment = colorLookup")):h.push(WA("colorFragment","vec4 colorLookup = vec4(uLUTValue0)",`if (${t} <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                }`,"float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} >= uLUTValue${e}) { colorLookup = uLUTColor${e};}`,...s.slice(1).reverse().map((t=>{const i=s[s.indexOf(t)-1];return`if (value < uLUTValue${s.indexOf(t)}) { colorLookup = uLUTColor${s.indexOf(i)};}`})),"vec4 colorFragment = colorLookup")),h},ZA=[OA("uniform sampler2D uMaskTexture"),OA("varying vec2 vMaskTextureCoord"),UA("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],QA=[OA("uniform sampler2D uMaskTexture"),OA("varying vec2 vMaskTextureCoord"),UA("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.a")],JA=[OA("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),UA("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")];class KA extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const qA=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},tg=t=>void 0!==t.find((t=>{var i;return null===(i=t.sE)||void 0===i?void 0:i.eE})),ig=t=>void 0!==t.find((t=>{var i;return null===(i=t.sE)||void 0===i?void 0:i.hE})),sg=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,offset:a,flipXY:l,flipXZ:u,splitPosAttribute:c,normalSource:d}=t,f=[];if("attribute"===d&&e.push(OA("attribute vec3 aNormal"),GA("vec3 normal = aNormal")),"linear-highPrecision"!==r?s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==c?e.push(GA(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`)):e.push(GA(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`)))})):s.forEach((i=>{!0!==t.splitPosAttribute?e.push(GA(`${h} ${i.variableNameAxisCoord}_highpart = ${i.attributeNameAxisCoord}_highpart`),GA(`${h} ${i.variableNameAxisCoord}_lowpart = ${i.attributeNameAxisCoord}_lowpart`)):e.push(GA(`${h} ${i.variableNameAxisCoord}_highpart = vec2(${i.attributeNameAxisCoord}_highpartX, ${i.attributeNameAxisCoord}_highpartY)`),GA(`${h} ${i.variableNameAxisCoord}_lowpart = vec2(${i.attributeNameAxisCoord}_lowpartX, ${i.attributeNameAxisCoord}_lowpartY)`))})),a&&a.rotation){const t=a.rotation.dataType,i="uniform"===t?"u":"a";if("attribute-deg"===t){e.push(OA("attribute float aRotDeg"),OA("uniform float uBaseRotDeg"));const t="cRot",i="aInstanceGeo";e.push(GA(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 rotatedGeo = vec2(${i}.x * ${t}.y + ${i}.y * ${t}.x, ${i}.y * ${t}.y - ${i}.x * ${t}.x)`))}else{const s=`${i}Rot`;e.push(OA(`${t} vec2 ${s}`));const h="aInstanceGeo";e.push(GA(`vec2 rotatedGeo = vec2(${h}.x * ${s}.y + ${h}.y * ${s}.x, ${h}.y * ${s}.y - ${h}.x * ${s}.x)`))}}if(a&&e.push(OA(`attribute ${h} aInstanceGeo`)),!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===u){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(OA(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(OA(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",n=!0===a.symmetric?"float":h;e.push(OA(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",l=a.rotation?"rotatedGeo":"aInstanceGeo",u="offsetGeometry";f.push(`${h} ${u} = ${t} * ${l}${o} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${h} normal = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}if(void 0===r||"linear"===r)e.push(OA(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{f.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(OA(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(OA("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===r)e.push(OA("uniform mat4 uMatrix")),s.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===r[0]){e.push(OA(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${_s(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(OA(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),f.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){e.push(OA("uniform vec2 uRatioPxClip"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(OA("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const i=("attribute"===a.dataType?"a":"u")+"OffsetPixels",r=!0===a.symmetric?"float":h;e.push(OA(`${a.dataType} ${r} ${i}`));const n=a.halved?" * 0.5":"",o=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${i}${n} * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${o}`)}))}if(a&&"scale"===a.sizeUnit){e.push(OA("uniform vec2 uRatioPxClip")),e.push(OA("uniform vec2 uSizePixels"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(OA("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const i=("uniform"===a.dataType?"u":"a")+"OffsetScale";e.push(OA(`${a.dataType} float ${i}`));const h=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${i} * uSizePixels * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${h}`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",r=!0===a.symmetric?"float":h;e.push(OA(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(a&&"nwu"===a.sizeUnit){e.push(OA("uniform float uRatioNwuWu"));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",r=!0===a.symmetric?"float":h;e.push(OA(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * uRatioNwuWu`)}))}return t.snapToNearestPixel&&(e.push(OA("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(WA("gl_Position =",...f)),e},eg=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(UA(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(UA(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(UA(s,...t))}}return h},hg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.sE)||void 0===i?void 0:i.rE})))(t)?[NA("attribute vec4 aColor"),NA("vColor = aColor"),OA("attribute vec4 aColorA"),OA("attribute vec4 aColorB"),YA("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],rg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.sE)||void 0===i?void 0:i.nE})))(t)?[NA("attribute float aLookupValue"),NA("vLookupValue = aLookupValue"),OA("attribute float aLookupValueA"),OA("attribute float aLookupValueB"),YA("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],ng={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",sE:{eE:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${qA(t)}`,idFragment:void 0,vertexShaderModifiers:[OA(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),YA(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTextureText,e=t&&t.maskTexture,h=t&&t.overrideOpacity;return{idFeature:"Color",sE:{hE:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,nE:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,rE:"attribute"===t.dataType||void 0},apply:(r,n)=>{let o,a=`Color:${qA(t)}`;const l=[];let u="FragmentShader";const c=[];if("uniform"===i)c.push(OA("uniform vec4 uColor"),GA("vec4 colorFragment = uColor"),...s?ZA:[],...e?QA:[]);else if("attribute"===i)o="colorAttribute",l.push(HA("attribute vec4 aColor","varying vec4 vColor")),c.push(OA("varying vec4 vColor"),GA("vec4 colorFragment = vColor"),...s?ZA:[],...e?QA:[]);else if("texture"===i)o="colorTexCoord",l.push(HA("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),c.push(OA("varying vec2 vTextureCoord"),OA("uniform sampler2D uColorTexture"),OA("uniform vec4 uColor"),GA("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        colorFragment = uColor;\n                    }"),...s?ZA:[],...e?QA:[]);else if("texture-coord-calc-gpu"===i)o="colorTexCoord",u="Empty",l.push(OA("attribute vec2 aTextureCoord"),OA("varying vec2 vTextureCoord"),YA("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),c.push(OA("varying vec2 vTextureCoord"),OA("uniform sampler2D uColorTexture"),GA("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","gl_FragColor = colorFragment;"));else if(Array.isArray(i)&&"image"===i[0])o="colorTexCoord",l.push(HA("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1].fitMode===exports.ImageFitMode.Tile?c.push(OA("uniform sampler2D uColorTexture"),OA("varying vec2 vTextureCoord"),GA("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);")):c.push(OA("uniform sampler2D uColorTexture"),OA("varying vec2 vTextureCoord"),OA("uniform vec4 uColor"),GA("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                colorFragment = uColor;\n                            }"));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)o="lookup:value",l.push(HA("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;o=`lookup:${t}`,l.push(HA(i,"varying float vLookupValue"))}c.push(OA("varying float vLookupValue"),...jA("vLookupValue",i[2]),...s?ZA:[],...e?QA:[])}else if(Array.isArray(i)&&"gradient"===i[0]){const t=i[1],h=t.getColorStops();tt(t)?(a=`rgradient${h.length},${e},${s}`,c.push(OA("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),OA(...Ft(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),XA.linearStep,GA("vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),"vec4 colorFragment = color"),...s?ZA:[],...e?QA:[])):et(t)&&(a=`lgradient${h.length},${e},${s}`,c.push(OA("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),OA(...Ft(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),XA.linearStep,GA("vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),"vec4 colorFragment = color"),...s?ZA:[],...e?QA:[]))}if(s||e){const t="maskTexture";o=o?`${o} ${t}`:`Color:${t}`,l.push(HA("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return h&&c.push(OA("uniform float uOpacity"),UA("colorFragment =","colorFragment.a *= uOpacity")),{vertexShaderModifiers:l,fragmentShader:u,fragmentShaderModifiers:c,idVertex:o,idFragment:a}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h;const r=`ColorShaded3D:${qA(t)}`;return{idFeature:"ColorShaded3D",sE:{hE:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,nE:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&HA("normal","varying vec3 vNormal"),HA("posWorld","varying vec3 vPosWorld")),"uniform"===i)a.push(OA("uniform vec4 uColorDiffuse"),GA("vec4 colorFragment = uColorDiffuse"));else if("attribute"===i)h="per-vertex-color",o.push(HA("attribute vec4 aColor","varying vec4 vColor")),a.push(OA("varying vec4 vColor"),GA("vec4 colorFragment = vColor"));else if(Array.isArray(i)){const t=i[1];if("value"===t)h="lookup:value",o.push(HA("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;h=`lookup:${t}`,o.push(HA(i,"varying float vLookupValue"))}a.push(OA("varying float vLookupValue"),...jA("vLookupValue",i[2]))}if(e){const t="wireframe";h=h?`${h},${t}`:t,o.push(HA("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(OA("varying vec3 vTriangleBary"),OA("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),XA.computeScreenSpaceWireframe,UA("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return"phong"===s&&a.push(...JA),{idVertex:h,idFragment:r,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=[],e=tg(i),h=t.coordType?t.coordType:e?"vec3":"vec2";return"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?s.push(OA(`attribute ${h} aPos`)):s.push(OA("attribute float aPosX"),OA("attribute float aPosY"),e&&OA("attribute float aPosZ")):!0===t.splitPosAttribute?s.push(OA("attribute float aPos_highpartX"),OA("attribute float aPos_lowpartX"),OA("attribute float aPos_highpartY"),OA("attribute float aPos_lowpartY")):s.push(OA(`attribute ${h} aPos_highpart`),OA(`attribute ${h} aPos_lowpart`)),s.push(...sg(t,e,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:"posAxis",variableNameWorldCoord:"posWorld"})),{idVertex:`VertexLocation:${qA(t)}`,idFragment:void 0,vertexShaderModifiers:s}}}),Model3D:t=>({idFeature:"Model3D",apply:i=>{const s=[];return s.push(OA("attribute vec3 aGeoPos"),OA("uniform mat4 uModelRotation"),OA("uniform mat4 uModelRotationNormals"),OA("uniform vec3 uLocationAxis"),OA("uniform vec3 uModelAlignment"),OA("uniform vec3 uModelScale"),OA("uniform vec3 uModelSize"),...sg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),WA("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&UA("vec3 normal ="," normal = (uModelRotationNormals * vec4(normal, 1.0)).xyz;"),...ig(i)?eg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,"posWorld","posAxis"):[]),{vertexShaderModifiers:s,idVertex:`Model3D:${qA(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>({idFeature:"LineInstanced2D",apply:i=>({idVertex:`LineInstanced2D:${qA(t)}`,idFragment:void 0,vertexShaderModifiers:[OA("uniform float uThicknessPixels"),OA("uniform vec2 uRatioPxClip"),..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[OA("attribute vec2 aLocationA"),OA("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[OA("attribute vec2 aLocationA_highpart"),OA("attribute vec2 aLocationB_highpart"),OA("attribute vec2 aLocationA_lowpart"),OA("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[OA("attribute float aLocationAX"),OA("attribute float aLocationAY"),OA("attribute float aLocationBX"),OA("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[OA("attribute float aLocationA_highpartX"),OA("attribute float aLocationA_highpartY"),OA("attribute float aLocationB_highpartX"),OA("attribute float aLocationB_highpartY"),OA("attribute float aLocationA_lowpartX"),OA("attribute float aLocationA_lowpartY"),OA("attribute float aLocationB_lowpartX"),OA("attribute float aLocationB_lowpartY")]:[],OA("attribute vec2 aSegmentPosition"),OA("attribute float aSegmentSide"),...sg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),t.ensureMinimumSegmentLength&&OA("uniform vec2 uMinSegmentPixelVector"),UA("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                        worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                    }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...rg(i),...hg(i),...ig(i)?eg(t,!1,"posWorld","posAxis"):[]]})}),Area2D:t=>({idFeature:"Area2D",apply:i=>({idVertex:`Area2D:${qA(t)}`,idFragment:void 0,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[OA("attribute vec2 aLocationA"),OA("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[OA("attribute vec2 aLocationA_highpart"),OA("attribute vec2 aLocationB_highpart"),OA("attribute vec2 aLocationA_lowpart"),OA("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[OA("attribute float aLocationAX"),OA("attribute float aLocationAY"),OA("attribute float aLocationBX"),OA("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[OA("attribute float aLocationA_highpartX"),OA("attribute float aLocationA_highpartY"),OA("attribute float aLocationB_highpartX"),OA("attribute float aLocationB_highpartY"),OA("attribute float aLocationA_lowpartX"),OA("attribute float aLocationA_lowpartY"),OA("attribute float aLocationB_lowpartX"),OA("attribute float aLocationB_lowpartY")]:[],OA("attribute float aCurveOrBaseline"),OA("attribute float aSegmentSide"),...sg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),UA("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","float baseline = min(posCoord.y, -1.0)","vec2 posWorld = vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))"),...rg(i),...hg(i),...ig(i)?eg(t,!1,"posWorld","posAxis"):[]]})}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${qA(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[OA("uniform float uOffsetWU"),OA("attribute vec3 aLocationA"),OA("attribute vec3 aLocationB"),OA("attribute float aSegmentPosition"),OA("attribute float aPerpendHorizontal"),OA("attribute float aPerpendVertical"),...sg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},tg(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),UA("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...ig(i)?eg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,"posWorld","posAxis"):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[OA("attribute vec3 aEdge"),OA("uniform float uEdgeRoundness"),UA("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(h,r)=>({idVertex:void 0,idFragment:`ColorGrid2D:${qA(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[OA("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===s&&XA.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?GA("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):GA("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)),...jA("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(OA("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&XA.roundUnsigned,XA.modulus,XA.texelFetchWithFallback[o],"ubyte"===h&&XA.decodeUbyteRGBAEncodedFloat,GA(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(OA("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),GA("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${qA(t)}`,idFragment:`DrawToNormalTexture:${qA(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.instanceIdSource,o=t.normalTextureType,a=t.heightmapTextureType,l=t.intensityTextureType,u=t.littleEndian;return{idFeature:"SurfaceGrid",apply:(c,d)=>{const f=[],A=[];return f.push(OA("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===n&&"attribute float aInstanceID"),void 0!==n&&XA.roundUnsigned,XA.modulus,XA.texelFetchWithFallback[d],"ubyte"===a&&XA.decodeUbyteRGBAEncodedFloat,GA(void 0===n?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===a?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${u})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),f.push(...sg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"})),"phong"===h&&f.push(HA("posWorld","varying vec3 vPosWorld"),..."uint"===o?[XA.texelFetchUnsignedWithFallback[d],YA("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[YA("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],YA("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),OA("varying vec3 vNormal",..."uint"===o?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),A.push(OA("varying vec3 vTriangleBary")),"uniform"===i?A.push(OA("uniform vec4 uColorDiffuse"),GA("vec4 colorFragment = uColorDiffuse")):Array.isArray(i)&&"lookup"===i[0]?"value"===i[1]?(f.push(HA("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),A.push(OA("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===l&&XA.decodeUbyteRGBAEncodedFloat,"bilinear"===s?GA("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===l?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${u})`),"float intensity01 = "+("float"===l?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${u})`),"float intensity10 = "+("float"===l?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${u})`),"float intensity11 = "+("float"===l?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${u})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):GA("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...jA("intensityP",i[2]))):(f.push(HA(`posAxis.${i[1]}`,"varying float vLookupValue")),A.push(OA("varying float vLookupValue"),...jA("vLookupValue",i[2]))):void 0===i&&A.push(GA("vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0)")),"phong"===h&&A.push(...JA),r&&(f.push(OA("attribute vec3 aTriangleBary"),HA("aTriangleBary","varying vec3 vTriangleBary")),A.push(OA("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),XA.computeScreenSpaceWireframe,UA("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?"if (edge > 0.0) {\n                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));\n                                }":"if (edge > 0.0) {\n                                    colorFragment = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }"))),{idVertex:`SurfaceGrid:${qA(t)}`,idFragment:`SurfaceGrid:${qA(t)}`,vertexShaderModifiers:f,fragmentShader:"FragmentShader",fragmentShaderModifiers:A}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${qA(t)}`,idFragment:`DebugSurfaceGridNormals:${qA(t)}`,vertexShaderModifiers:[OA("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),XA.roundUnsigned,XA.modulus,XA.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&XA.decodeUbyteRGBAEncodedFloat,GA(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[XA.texelFetchUnsignedWithFallback[s]]:[],...sg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"}),UA("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[YA("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[OA("uniform vec3 uCameraLoc"),UA("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[OA("attribute float aSegmentInside"),OA("varying float vSegmentInside"),OA("varying float vSegmentSide"),UA("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[$A("#extension GL_OES_standard_derivatives : enable"),OA("uniform float uAALimit"),OA("varying float vSegmentInside"),OA("varying float vSegmentSide"),UA("antiAliasFactor = ","\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                antiAliasFactor = aa;\n                ")]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${qA(t)}`,idFragment:`Glow1D:${qA(t)}`,vertexShaderModifiers:[HA("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[OA("uniform sampler2D uTexture"),OA("varying vec2 vTextureCoord"),OA("uniform vec2 uTextureSize"),h&&OA("uniform vec2 uOffsetPx"),!h&&OA("uniform sampler2D uTextureFirstGlowPass"),!h&&OA("uniform vec4 uGlowColor"),UA("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...h?[]:["float inverseIntensity =\n                        0.25 * texture2D(uTexture, vTextureCoord).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a","antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),"vec4 colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                            horizontal_dist = sample_horizontal.r * 255.0;\n                                          }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,"vec4 colorFragment = pixelGlowColor"])]}}}),MousePicking:{idFeature:"MousePicking",apply:t=>({idVertex:void 0,idFragment:"MousePicking",fragmentShaderModifiers:[OA("uniform vec4 uColor"),GA("vec4 colorFragment = uColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd")]})},MousePickingAttribute:{idFeature:"MousePickingAttribute",apply:t=>({idVertex:"MousePickingAttribute",idFragment:"MousePickingAttribute",vertexShaderModifiers:[HA("attribute vec4 aColor","varying vec4 vColor")],fragmentShaderModifiers:[OA("varying vec4 vColor"),GA("vec4 colorFragment = vColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd")]})},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[HA("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[OA("attribute vec2 aLengthSoFar"),OA("varying float vLengthSoFar"),OA("uniform vec2 uStippleCount"),YA("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[OA("uniform sampler2D uStippleTexture"),OA("uniform float uStippleScale"),OA("varying float vLengthSoFar"),"webgl1"===i&&OA("uniform float uStippleTextureWidthLimiter"),UA("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[OA("attribute vec2 aLengthSoFarA"),OA("attribute vec2 aLengthSoFarB"),OA("varying float vLengthSoFar"),OA("uniform vec2 uStippleCount"),YA("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[OA("uniform sampler2D uStippleTexture"),OA("uniform float uStippleScale"),OA("varying float vLengthSoFar"),"webgl1"===i&&OA("uniform float uStippleTextureWidthLimiter"),UA("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,h="interpolation"in t?t:void 0,r="bilinear"===(null==h?void 0:h.interpolation),n=null==h?void 0:h.intensityTextureType,o=null==h?void 0:h.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${qA(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[OA("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",h&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),XA.texelFetchWithFallback[s],"ubyte"===n&&XA.decodeUbyteRGBAEncodedFloat,GA("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep","if (iAnnulus < 0.0 || iAnnulus > uAnnuli) { discard; }"),e&&GA("vec4 colorFragment = uColor"),h&&UA("if (iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",h.flipXY&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",h.flipXY&&"cellStart = ivec2(cellStart.y, cellStart.x)",h.flipXY&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)","vec2 tileDimensions = "+(h.flipXY?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),r&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",r&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",r&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",r&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",r&&"float intensity00 = "+("float"===n?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${o})`),r&&"float intensity01 = "+("float"===n?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${o})`),r&&"float intensity10 = "+("float"===n?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${o})`),r&&"float intensity11 = "+("float"===n?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${o})`),r&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",r&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",r&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",r&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!r&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!r&&"float intensityP = "+("float"===n?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${o})`)),...h?jA("intensityP",h.lut):[]]}}})},og={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},ag={FragmentShader:"\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    float antiAliasFactor = 1.0;\n    vec4 fragColorEnd = colorFragment;\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);\n}\n",Empty:"\nvoid main(void) {\n}\n"};class lg{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new pt(`Could not find ${this.oE()} ${this.aE()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}oE(){return this.id.toString()}aE(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class ug extends lg{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class cg extends lg{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class dg{constructor(t,i,s,e){this.lE=new Map,this.uE=new Map,this.cE=s,this.dE=s.createProgram(),this.fE=`${t.oE()} vertex`,this.AE=`${i.oE()} fragment`,s.attachShader(this.dE,t.shader),s.attachShader(this.dE,i.shader),s.bindAttribLocation(this.dE,0,"aPos"),s.linkProgram(this.dE),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}gE(t){return Ai(0,(()=>gi()))}pE(t){const i=this.mE(t);if(void 0===i)throw this.gE(`Could not get ${t} uniform from ${this.fE} and ${this.AE} shaders.`);return i}mE(t){const i=this.lE.get(t);if(i)return i;const s=this.cE.getUniformLocation(this.dE,t);return s?(this.lE.set(t,s),s):void 0}yE(t){const i=this.SE(t);if(void 0===i)throw this.gE(`Could not get ${t} attribute from ${this.fE} and ${this.AE} shaders.`);return i}SE(t){const i=this.uE.get(t);if(i||0===i)return i;const s=this.cE.getAttribLocation(this.dE,t);return s>=0?(this.uE.set(t,s),s):void 0}U(){this.cE.deleteProgram(this.dE)}}const fg=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,Ag=t=>{let i;try{i=xt.getComputedStyle(t)}catch(t){return null}return i};
/**
 * stacking-order by Rich Harris
 * https://github.com/Rich-Harris/stacking-order
 *
 * @license MIT
 *
 * Converted to TypeScript and edited to match LCJS requirements.
 */function gg(t){const i=Ag(t);return!!i&&("fixed"===i.position||!!("auto"!==i.zIndex&&"static"!==i.position||function(t){const i=Ag(Sg(t)),s=i?i.display:"auto";return"flex"===s||"inline-flex"===s}(t))||+i.opacity<1||"transform"in i&&"none"!==i.transform||"webkitTransform"in i&&"none"!==i.webkitTransform||"mixBlendMode"in i&&"normal"!==i.mixBlendMode||"filter"in i&&"none"!==i.filter||"webkitFilter"in i&&"none"!==i.webkitFilter||"isolation"in i&&"isolate"===i.isolation||!!fg.test(i.willChange)||"touch"===i.webkitOverflowScrolling)}function pg(t){let i=t.length;for(;i--;)if(gg(t[i]))return t[i];return null}function mg(t){var i;return t&&Number((null===(i=Ag(t))||void 0===i?void 0:i.zIndex)||0)||0}function yg(t){const i=[];for(;t;)i.push(t),t=Sg(t);return i}function Sg(t){var i;return(null===(i=t.parentNode)||void 0===i?void 0:i.host)||t.parentNode}class vg extends MA{constructor(t){if(super(),this.vE=new Map,this.xE=new Map,this.bE=new Map,this.ME=!0,this._E=null,this.wE=null,this.CE=null,this.kE=null,this.TE=0,this.FE=0,this.IE=0,this.PE=!1,this.DE=!0,this.Xi=!1,this.BE=ui(`chart-engine-${(new Date).getTime()}${Math.trunc(1e6*Math.random()).toString()}`),this.j={x:100,y:100},this.LE=()=>{this.RE&&clearTimeout(this.RE),this.RE=setTimeout((()=>this.Qr()),12)},this.EE=t=>{const i=t.intersectionRatio>0,s=t.target.getAttribute("data-lcjs-engine-id");if(s){const t=this.vE.get(s);if(t){const e=t.zE();t.VE(i),i?this.xE.set(s,t):this.xE.delete(s),e!==i&&t.vs()}}},this.OE=(t,i,s,e,h)=>{const r=h[0],n=this.gl;if(n.bindFramebuffer(null==n?void 0:n.FRAMEBUFFER,null),n.useProgram(this.wE.dE),n.clear(n.COLOR_BUFFER_BIT),r.Wr.getBoundingClientRect()){const t=r.NE();n.viewport(0,0,t.x,t.y),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r.GE),n.uniform1i(this.TE,0),n.uniformMatrix4fv(this.FE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n.bindBuffer(n.ARRAY_BUFFER,this.CE),n.enableVertexAttribArray(0),n.vertexAttribPointer(this.IE,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),r.WE&&(r.WE.clearRect(0,0,r.WE.canvas.width,r.WE.canvas.height),r.WE.drawImage(this.UE,0,this.UE.height-t.y,t.x,t.y,0,0,r.WE.canvas.width,r.WE.canvas.height))}},this.YE=(t,i,s,e,h)=>{const r=this.gl;r.bindFramebuffer(null==r?void 0:r.FRAMEBUFFER,null),r.useProgram(this.wE.dE),r.clear(r.COLOR_BUFFER_BIT),h.forEach((s=>{const h=s.Wr.getBoundingClientRect();if(h){const s=h.right-h.left,n=h.bottom-h.top,o=h.left,a=e-h.bottom;r.viewport(o*this.HE-t*this.HE,a*this.HE+i*this.HE,s*this.HE,n*this.HE)}r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,s.GE),r.uniform1i(this.TE,0),r.uniformMatrix4fv(this.FE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),r.bindBuffer(r.ARRAY_BUFFER,this.CE),r.enableVertexAttribArray(0),r.vertexAttribPointer(this.IE,2,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLES,0,6)})),r.bindFramebuffer(r.FRAMEBUFFER,null)},this.$E=(t,i,s,e,h)=>{const r=h[0],n=this.gl2.ctx;n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.clear(n.COLOR_BUFFER_BIT);const o=r.NE();n.bindFramebuffer(n.READ_FRAMEBUFFER,r.XE[1]),n.blitFramebuffer(0,0,o.x,o.y,0,this.UE.height-o.y,o.x,this.UE.height,n.COLOR_BUFFER_BIT,n.LINEAR),r.WE&&(r.WE.clearRect(0,0,r.WE.canvas.width,r.WE.canvas.height),r.WE.drawImage(this.UE,0,0)),n.bindFramebuffer(n.FRAMEBUFFER,null)},this.jE=(t,i,s,e,h)=>{const r=this.gl2.ctx;r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.clear(r.COLOR_BUFFER_BIT),h.forEach((s=>{const h=s.Wr.getBoundingClientRect();if(h){const n=h.right-h.left,o=h.bottom-h.top,a=h.left,l=e-h.bottom,u=s.NE();r.bindFramebuffer(r.READ_FRAMEBUFFER,s.XE[1]),r.blitFramebuffer(0,0,u.x,u.y,a*this.HE-t*this.HE,l*this.HE+i*this.HE,(a-t+n)*this.HE,(l+i+o)*this.HE,r.COLOR_BUFFER_BIT,r.LINEAR)}})),r.bindFramebuffer(r.FRAMEBUFFER,null)},this.RE=void 0,this.Yn=t,!xt.requestAnimationFrame||!xt.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");let i=1;if(t&&t.ZE)i=!0===t.ZE?xt.devicePixelRatio||1:t.ZE||1;else{const t=xt.document.head.querySelector('meta[name="viewport"]');t&&t.content.includes("width=device-width")&&(i=xt.devicePixelRatio||1)}this.HE=i,t.$n=!0===t.$n,this.DE=!1!==t.QE,this.JE=!1!==t.KE,this.qE=t.qE||!1;let s=!1;if(t.UE)if("string"==typeof t.UE){const i=xt.document.getElementById(t.UE);if(!i)throw new Error(`Canvas "${t.UE}" doesn't exist.`);this.UE=i,s=!0}else this.UE=t.UE,s=!0;else this.UE=xt.document.createElement("canvas");const e={preserveDrawingBuffer:!0,alpha:!0,antialias:!1};if(2!==t.tz&&t.tz){const i=this.UE.getContext("webgl",{...e,antialias:!!t.QE})||this.UE.getContext("experimental-webgl",{...e,antialias:!!t.QE});this.gl=i,this.iz=!1}else{const t=this.UE.getContext("webgl2",e);this.gl2={ctx:t},this.gl=t,this.iz=!0}if(!this.gl)throw new gt("No WebGL context available."+((null==t?void 0:t.tz)?`\nSelected explicit target: WebGL ${t.tz}`:""));const h=[];if(this.sz={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.sz).forEach((t=>{null===this.sz[t]&&h.push(t)})),this.iz)this.ez=!0;else{const t={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};t.OES_standard_derivatives||(this.ME=!1),Object.keys(t).forEach((i=>{null===t[i]&&h.push(i)}));const i={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.ez=!!i.OES_texture_float,this.gl1={ctx:this.gl,sz:t,optional:i}}const r=h;if(r.length>0&&!1!==t.$n){const t=xt.document.createElement("div");t.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",t.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const i=xt.document.createElement("button");i.innerText="X",i.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),xt.document.body.appendChild(t),t.appendChild(i),xt.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",r.join(", "))}if(this.hz=this.qE?this.rz(this.iz?this.$E.bind(this):this.OE.bind(this)).bind(this):this.nz(this.iz?this.jE.bind(this):this.YE.bind(this)).bind(this),xt.ResizeObserver){const t=t=>{for(const i of t)i.target===this.UE&&this.oz()};this.Qn=new xt.ResizeObserver(t.bind(this)),this.Qn.observe(this.UE)}if(this.az=((t,i)=>{const s=t,e=new Map,h=new Map,r=new Map,n={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},o=(t,s,e=[])=>{const h=[],r=[],n={allAttributeNames:Array.from(t.matchAll(/attribute\s[^\s]*\s(.*);/g)).map((t=>t[1])),allUniformNames:Array.from(t.matchAll(/uniform\s[^\s]*\s(.*);/g)).map((t=>t[1])),allVaryingNames:Array.from(t.matchAll(/varying\s[^\s]*\s(.*);/g)).map((t=>t[1])),removedVariableNames:[]};if(i){const i=t.match(/#extension.*/g);i&&r.push(...i),t=t.replace(/#extension.*/g,"")}else if(h.push("#version 300 es"),(t=(t=(t=t.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&h.push("precision highp usampler2D;"),"vertex"===s)t=t.replace(/varying/g,"out");else{t=t.replace(/varying/g,"in");const i=e.find((t=>"fragOutput"===t.type));t=(t=i?`out ${i.fragOutput} fragOutput;\n${t}`:`out vec4 fragOutput;\n${t}`).replace(/gl_FragColor/g,"fragOutput")}return r&&h.push(...r),h.push("precision highp float;"),h.push("precision highp int;"),{source:t=`${h.join("\n")}\n${t}`,info:n}};return(...t)=>{const a=i?"webgl1":"webgl2";let l,u,c,d,f,A,g,p,m;try{const i=xt.performance.now();l=t.filter((t=>!1!==t&&void 0!==t)),u=((t,i)=>{const s=t.map((s=>s.apply(t,i))),e=s.map((t=>t.idVertex)).filter((t=>void 0!==t)).sort().join(" "),h=s.map((t=>t.idFragment)).filter((t=>void 0!==t)).sort().join(" "),r=`vert: ${e} frag: ${h}`;let n,o=!1,a=!1;const l=[];let u;const c=[],d=[];if(s.forEach((t=>{if(t.defaultVertexShader&&(o||(n=t.defaultVertexShader)),t.vertexShader){if(n&&o&&n!==t.vertexShader)throw new KA(`Conflicting vertex shader templates ${n} vs ${t.vertexShader}`,r,t);n=t.vertexShader,o=!0}if(t.vertexShaderModifiers)for(const i of t.vertexShaderModifiers)void 0!==i&&!1!==i&&l.push(i);if(t.defaultFragmentShader&&(a||(u=t.defaultFragmentShader)),t.fragmentShader){if(u&&a&&u!==t.fragmentShader)throw new KA(`Conflicting fragment shader templates ${u} vs ${t.fragmentShader}`,r,t);u=t.fragmentShader,a=!0}if(t.fragmentShaderModifiers)for(const i of t.fragmentShaderModifiers)void 0!==i&&!1!==i&&c.push(i);t.hints&&t.hints.forEach((t=>{t&&d.push(t)}))})),!n)throw new KA("No vertex shader template defined",r);if(!u)throw new KA("Fragment shader not defined",r);return{id:r,vertexShader:{id:e,template:n,modifiers:l},fragmentShader:{id:h,template:u,modifiers:c},hints:d}})(l,a);const y=r.get(u.id);if(c="new",y)return c="existing",A=y.vertexShaderSrc,g=y.fragmentShaderSrc,y;const S=u.vertexShader.id;let v=e.get(S);if(v)A=v.src,d="existing";else{d="new";const t=new EA(u.vertexShader.modifiers).build(og[u.vertexShader.template]),{source:i,info:h}=o(t,"vertex");A=i,p=h,v=new ug(S,i,s,h),e.set(S,v),n.vertexShaders+=1}const x=u.fragmentShader;let b;const M=x.id;if(b=h.get(M),b)g=b.src,f="existing";else{f="new";const t=ag[x.template],i=new EA([...x.modifiers]).build(t),{source:e,info:r}=o(i,"fragment",u.hints);g=e,m=r,b=new cg(M,e,s,r),h.set(M,b),n.fragmentShaders+=1}const _=new dg(v,b,s,u);return r.set(u.id,_),n.programs+=1,n.totalMs+=xt.performance.now()-i,_}catch(t){throw Ai(0,(()=>{const t="Unexpected LightningChart JS rendering error.\nThis can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).";return xt.alert(t),new Error(t)}))}}})(this.gl,!this.iz),this.qR=(()=>{const t=xt.document.createElement("canvas"),i=t.getContext("2d",{willReadFrequently:!0});if(!i)throw new gt("Failed to get Text canvas rendering context");return i.fillStyle="#fff",(s,e,h,r)=>{const n=`${e.style} ${e.weight} ${e.size*h}px ${e.family}`;i.font=n,i.textBaseline="alphabetic",i.textAlign="left";const o=i.measureText(s);if(0===o.width)return;const a=void 0!==o.actualBoundingBoxLeft&&void 0!==o.actualBoundingBoxRight?Math.ceil(o.actualBoundingBoxLeft+o.actualBoundingBoxRight):Math.ceil(o.width),u=o.width,c=Math.round(e.size*h),d=void 0!==o.actualBoundingBoxLeft?o.actualBoundingBoxLeft:0;t.width=a>0?a:u,t.height=2*c,i.font=n,i.textBaseline="alphabetic",i.textAlign="left",r?(i.clearRect(0,0,t.width,t.height),i.fillStyle="#fff"):(i.fillStyle="rgba(255,255,255,0)",i.fillRect(0,0,t.width,t.height),i.fillStyle="#000"),i.fillText(s,d,c);const f=i.getImageData(0,0,t.width,t.height);let A=0,g=0;const p=f.width;for(let t=0;t<f.height;t+=1){for(let i=0;i<p;i+=1)if(0!==f.data[t*p*4+4*i+3]){A=t;break}if(0!==A)break}for(let t=f.height-1;t>=0;t-=1){for(let i=0;i<p;i+=1)if(0!==f.data[t*p*4+4*i+3]){g=t;break}if(0!==g)break}const m=i.canvas.height/2-A,y=g-A+1,S=p,v=new Uint8ClampedArray(S*y*1);for(let t=0;t<y;t+=1)for(let i=0;i<S;i+=1)v[1*t*S+1*i+0]=f.data[(t+A)*S*4+4*i+3];return[v,{advance:u,offsetX:d,baseline:m,glyph:s,size:l(S,y)}]}})(),t.lz||(this.qE?this.UE.style.display="none":(this.UE.style.position="absolute",this.UE.style.top="0",this.UE.style.left="0",this.UE.style.right="0",this.UE.style.bottom="0",this.UE.style.width="100%",this.UE.style.height="100%",this.UE.style.boxSizing="content-box",this.UE.style.display="block",this.UE.style.pointerEvents="none")),this.UE.classList.add("lcjs-canvas"),t.uz&&this.UE.setAttribute("data-lcjs-id",t.uz),s||xt.document.body.appendChild(this.UE),xt.IntersectionObserver&&(this.cz=new xt.IntersectionObserver((t=>{for(let i=0;i<t.length;i+=1){const s=t[i];this.EE(s)}}),{threshold:Array.from(Array(100)).map(((t,i)=>i/100))})),xt.addEventListener("resize",this.LE,{passive:!0}),!this.iz){if(this.wE=this.az(ng["2DCompose"],ng.Color({dataType:"texture-coord-calc-gpu"}),ng.VertexLocation({axisWorldTranslation:"matrix4",normalSource:void 0,coordType:"vec4"})),!this.wE.dE)throw new gt("Unable to setup composition shader!");const t=this.gl,i=t.getUniformLocation(this.wE.dE,"uColorTexture");if(!i)throw new gt("Unable to setup composition shader! Failed to find uColorTexture");const s=t.getUniformLocation(this.wE.dE,"uMatrix");if(!s)throw new gt("Unable to setup composition shader! Failed to find uMatrix");this.TE=i,this.FE=s,this.IE=t.getAttribLocation(this.wE.dE,"aPos"),this.CE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.CE),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.kE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.kE),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null)}}rz(t){return i=>{this._E=null;const s=this.gl.canvas,e=Array.from(this.xE.values());this.PE=!1,e.forEach((e=>{const h=e.NE();(this.j.x<h.x||this.j.y<h.y)&&(this.j.x=Math.max(this.j.x,h.x),this.j.y=Math.max(this.j.y,h.y),s instanceof HTMLCanvasElement&&(s.width=this.j.x,s.height=this.j.y)),e.rn&&e.dz(i),t(0,0,0,0,[e])})),this.PE&&this.oz()}}nz(t){return i=>{this._E=null,"style"in this.gl.canvas&&!this.Yn.fz&&(this.gl.canvas.style.transform=`translateX(${window.scrollX}px) translateY(${window.scrollY}px)`);const s=this.gl.canvas,e=this.UE.clientHeight,h=this.UE.clientWidth;let r=0,n=0;if(s instanceof HTMLCanvasElement){s.width===h*this.HE&&s.height===e*this.HE||(s.width=h*this.HE,s.height=e*this.HE);const t=s.getBoundingClientRect();r=t.x,n=t.y}const o=Array.from(this.xE.values());this.PE=!1,o.sort(((t,i)=>t.Az()-i.Az())).forEach((t=>{t.rn&&t.dz(i)})),t(r,n,h,e,o),this.PE&&this.oz()}}oz(t){return!this.PE&&t&&(this.PE=!0),this._E||this.Xi||(this._E=xt.requestAnimationFrame(this.hz)),this}gz(t){const i=this.BE();return t.Wr.setAttribute("data-lcjs-engine-id",i),this.vE.set(i,t),t.pz(this.vE.size-1),t.VE(!0),this.xE.set(i,t),this.cz&&this.cz.observe(t.Wr),this.RE&&clearTimeout(this.RE),this.RE=setTimeout((()=>this.Qr()),0),this}mz(t){const i=t.Wr.getAttribute("data-lcjs-engine-id");return i?(this.vE.delete(i),this.xE.delete(i),this.cz&&this.cz.unobserve(t.Wr),t.Wr.removeAttribute("data-lcjs-engine-id"),this):this}Qr(){if(this.cz){const t=this.cz.takeRecords();for(let i=0;i<t.length;i+=1){const s=t[i];this.EE(s)}}return!this.qE&&this.JE&&Array.from(this.vE.values()).sort(((t,i)=>function(t,i){if(t===i)throw new Error("Cannot compare node with itself");const s={a:yg(t),b:yg(i)};let e;for(;s.a[s.a.length-1]===s.b[s.b.length-1];)t=s.a.pop(),i=s.b.pop(),e=t;const h=mg(pg(s.a)),r=mg(pg(s.b));if(h===r&&e){const t=e.childNodes,i={a:s.a[s.a.length-1],b:s.b[s.b.length-1]};let h=t.length;for(;h--;){const s=t[h];if(s===i.a)return 1;if(s===i.b)return-1}}return Math.sign(h-r)}(t.Wr,i.Wr))).forEach(((t,i)=>t.pz(i))),this.oz(!0),this}fP(){return this.oz(),this}yz(){this.Xi||this.vE.forEach((t=>t.hp.layout()))}U(){var t;if(this.Xi)return;this.Xi=!0,super.U(),this._E&&(xt.cancelAnimationFrame(this._E),this._E=null),this.PE=!1,this.Qn&&(this.Qn.disconnect(),this.Qn=void 0),this.cz&&(this.cz.disconnect(),this.cz=void 0),xt.removeEventListener("resize",this.LE),this.LE=void 0,this.vE.forEach((t=>{t.U()})),this.vE.clear(),Array.from(this.bE.values()).forEach((t=>{t.OR(!0)})),this.bE.clear();const i=this.gl;i.deleteBuffer(this.CE),i.deleteBuffer(this.kE),this.UE&&!this.Yn.UE?(this.UE.width=1,this.UE.height=1,null===(t=this.UE.parentElement)||void 0===t||t.removeChild(this.UE),this.UE=void 0):this.UE=void 0,this.az=void 0,this.qR=void 0,this.hz=()=>{},this.sz.WEBGL_lose_context&&this.sz.WEBGL_lose_context.loseContext()}}const xg=(t,i,s,e)=>h=>{const r={theme:vA,...s,...h},n=t(r),o=i||e?xA(n,e):void 0,a=new Ef(n.Yn,h,n,n.U.bind(n),o);return n.co((t=>a.VL(t))).uo((()=>a.Z())).vs(),a},bg=(t,i)=>{t.co((t=>{i.Fe(t)})).uo((()=>i.Z())).vs()},Mg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new sa(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o);return bg(n,a),a},_g=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new Gc(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,h);return bg(n,a),a},wg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new $d(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,h);return bg(n,a),a},Cg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new td(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,h);return bg(n,a),a},kg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new(h&&h.type?h.type:Ha)(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,void 0,h);return bg(n,a),a},Tg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new(h&&h.type?h.type:xd)(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,void 0,!0!==(null==h?void 0:h.disableAnimations)&&!1!==(null==h?void 0:h.animationsEnabled));return bg(n,a),a},Fg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new(h&&h.type?h.type:ud)(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,void 0,h);return bg(n,a),a},Ig=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new(h&&h.type?h.type:Fd)(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,void 0,h);return bg(n,a),a},Pg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new Ll(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,h,void 0);return bg(n,a),a},Dg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new _l(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,void 0,h);return bg(n,a),a},Bg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new yf(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,void 0);return bg(n,a),a},Lg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new Ff(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,void 0,h);return bg(n,a),a},Rg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new $c(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,h);return bg(n,a),a},Eg=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||vA},n=t(r),o=i||e?xA(n,e):void 0,a=new hA(n.Yn,Xd(n,1).BI(0),lt,n.U.bind(n),o,h);return bg(n,a),a};function zg(t,i,s,e,h,r){let n=i.x.dt(t.max.x),o=i.x.dt(t.min.x),a=i.y.dt(t.max.y),l=i.y.dt(t.min.y),u=n-o,c=a-l;if(u<1){const t=(o+n)/2;o=t-.5,n=t+.5,u=1}if(c<1){const t=(l+a)/2;l=t-.5,a=t+.5,c=1}const d=u/c,f=u*s.x,A=c*s.y,g=u-f,p=c-A,m=f>g?[g,f]:[f,g],y=A>p?[p,A]:[A,p];let S,v,x=1,b=1;switch(e){default:case exports.GradientExtent.closestSide:if(S=m[0]/u,v=y[0]/c,h===exports.GradientShape.circle){const t=Math.min(S*d,v);x=t,b=t}else x=S*d,b=v;break;case exports.GradientExtent.farthestSide:if(S=m[1]/u,v=y[1]/c,h===exports.GradientShape.circle){const t=Math.max(S*d,v);x=t,b=t}else x=S*d,b=v;break;case exports.GradientExtent.closestCorner:if(v=y[0]/c,h===exports.GradientShape.circle){S=m[0]/u*d;const t=Math.sqrt(S*S+v*v);x=t,b=t}else{S=m[0]/u;const t=Math.sqrt(S*S+v*v);x=t*d,b=t}break;case exports.GradientExtent.farthestCorner:if(v=y[1]/c,h===exports.GradientShape.circle){S=m[1]/u*d;const t=Math.sqrt(S*S+v*v);x=t,b=t}else{S=m[1]/u;const t=Math.sqrt(S*S+v*v);x=t*d,b=t}}return{bounds:[o*r,l*r,u*r,c*r],center:[s.x*d,s.y],distance:[Math.max(x,1e-4),Math.max(b,1e-4)],aspectRatio:d}}function Vg(t,i,s,e){const h=i.x.dt(t.max.x),r=i.x.dt(t.min.x),n=i.y.dt(t.max.y),o=i.y.dt(t.min.y),a=h-r,u=n-o,c=Math.abs(a*Math.sin(s))+Math.abs(u*Math.cos(s)),d=l(a/2-Math.sin(s)*(c/2),u/2-Math.cos(s)*(c/2)),f=l(a/2+Math.sin(s)*(c/2),u/2+Math.cos(s)*(c/2));return{bounds:[r*e,o*e,a*e,u*e],startPoint:[d.x*e,d.y*e],endPoint:[f.x*e,f.y*e]}}class Og{constructor(t){this.ER=t}}class Ng{constructor(){this.Sz=new Array,this.vz=t=>(this.Sz.push(t),t),this.xz=this.vz(new Map),this.bz=this.vz(new Map),this.Mz=this.vz(new Map),this._z=this.vz(new Map),this.wz=this.vz(new Map),this.Cz=this.vz(new Map),this.kz=this.vz(new Map)}Tz(){this.Sz.forEach((t=>{t.forEach((t=>t.Tz())),t.clear()}))}}const Gg=(t,i,s)=>()=>{t.Fz=i,s&&s()},Wg=(t,i,s,e,h)=>{const r=Math.min(s/t,e/i),n=t*r,o=i*r,a=s/n,l=e/o,u=n/s,c=o/e;let d=0,f=1,A=0,g=1;switch(h){case exports.ImageFitMode.Fill:l<a?(d=0,f=1,A=.5+-u/2,g=.5+u/2):(A=0,g=1,d=.5+-c/2,f=.5+c/2);break;case exports.ImageFitMode.Fit:l<a?(A=0,g=1,d=.5+-a/2,f=.5+a/2):(d=0,f=1,A=.5+-l/2,g=.5+l/2);break;case exports.ImageFitMode.Center:{const h=s/t,r=e/i;d=.5+-h/2,f=.5+h/2,A=.5+-r/2,g=.5+r/2}break;case exports.ImageFitMode.Tile:d=0,f=s/t,A=0,g=e/i;break;case exports.ImageFitMode.Stretch:default:d=0,f=1,A=0,g=1}return new Float32Array([d,g,f,g,f,A,d,A])};class Ug{constructor(t,i){if(this.Iz=0,this.Pz=0,this.Dz=!1,this.Fz=!1,this.Bz=!1,this.Lz=!1,this.Rz=!1,this.Ez=new Set,this.zz=new Set,this.nc=i,this.cE=t,this.Vz=null,this.Dz=i instanceof xt.HTMLVideoElement,this.nc instanceof xt.HTMLImageElement)this.nc.addEventListener("load",(()=>{this.Lz=!0,this.Oz()})),this.nc.addEventListener("error",(()=>{this.Rz=!0})),this.nc.complete&&(this.Lz=!0,this.Oz());else if(this.nc instanceof xt.HTMLVideoElement){const t=this;this.nc.addEventListener("canplay",(function(){t.Pz=this.videoHeight,t.Iz=this.videoWidth,t.Lz=!0,t.Oz()}),!0),this.nc.addEventListener("play",Gg(this,!0,(()=>this.Oz()))),this.nc.addEventListener("playing",Gg(this,!0,(()=>this.Oz()))),this.nc.addEventListener("pause",Gg(this,!1)),this.nc.addEventListener("ended",Gg(this,!1)),this.nc.readyState>=1&&(this.Iz=this.nc.videoWidth,this.Pz=this.nc.videoHeight,this.Fz=!this.nc.paused,this.Lz=!0,this.Oz())}else this.Lz=!0,this.Oz()}ZR(t){0===this.zz.size&&this.Lz&&this.Oz(),this.zz.add(t)}QR(t){this.zz.delete(t),0===this.zz.size&&this.unbindResources()}Nz(t){this.Ez.add(t),this.Bz&&(t(),this.Gz(t))}Gz(t){this.Ez.delete(t)}Oz(){if(this.Rz||this.Bz||!this.Lz)return;const t=this.cE.gl;if(!this.Vz&&this.nc&&t){this.Vz=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.Vz),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.nc,n=this.Iz>0?this.Iz:r.width,o=this.Pz>0?this.Pz:r.height;t.texImage2D(t.TEXTURE_2D,i,s,e,h,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.Iz=n,this.Pz=o,t.bindTexture(t.TEXTURE_2D,null)}this.Bz=!0,this.Ez&&this.Ez.forEach((t=>{t(),this.Gz(t)}))}Ds(){const t=this.cE.gl;if(!this.Rz&&this.Bz&&this.Vz){const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.nc;r&&(t.bindTexture(t.TEXTURE_2D,this.Vz),t.texImage2D(t.TEXTURE_2D,i,s,e,h,r))}}Wz(){return this.Vz}unbindResources(){return this.Bz&&(this.Vz&&(this.cE.NR(this.Vz),this.Vz=null),this.Bz=!1),this}}class Yg extends Gh{constructor(t,i,s){super(t.cs,i,s),this.sS=!0,this.Zy={},this.tS=p($r),this.Ts=t,this.ft=t.ft}Uz(){var t;return this.tS.o&&this.tS._().type!==(null===(t=this.Yz)||void 0===t?void 0:t.type)}oS(t){return this.sS=t,this}$z(t){return this.Zy=t,this}}const Hg=(t,i,s,e)=>{const h=t.Xz(),r=Math.round(Math.min(s.spread,10)*h),n=Math.round(Math.min(s.blur,10)*h),o={x:Math.round(s.offset.x*h),y:Math.round(s.offset.y*h)},a=t.jz(),l=t.Zz(),u=t.Qz(),c=t.Jz(),d=t.Kz();t.qz("disabled"),t.oS(!1),t.tV(!1);const f=i.iV(),A=r+n/2;((t,i,s,e)=>{const h=t.gl,r=t.Xz(),n=t.sV();t.eV(h.FRAMEBUFFER,e.frameBuffer),h.bindRenderbuffer(h.RENDERBUFFER,e.depthBuffer),h.bindTexture(h.TEXTURE_2D,e.texture),h.clearDepth(1),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);const o=e.sizeDpr;t.hV(0,0,o.x,o.y),i.forEach((i=>{let e;if(i instanceof Uh?e=i.Ts.wp():i instanceof Yg&&(e=i.Ts.qv()),e){const i=e.x+s.left,h=e.y+s.bottom,n=Math.max(e.width-(s.left+s.right),0),o=Math.max(e.height-(s.bottom+s.top),0);t.rV(i*r,h*r,n*r,o*r)}else t.tV(!1);i.VL(2)})),t.eV(h.FRAMEBUFFER,n),h.bindRenderbuffer(h.RENDERBUFFER,null),h.bindTexture(h.TEXTURE_2D,null),t.tV(!1)})(t,e,{left:A+(o.x<0?-o.x:0),top:A+(o.y>0?o.y:0),right:A+(o.x>0?o.x:0),bottom:A+(o.y<0?-o.y:0)},f);let g=f;const p=r+n+5,m=((t,i,s,e)=>{const h=(t=>{const i=[];for(let s=0;s<t.length;s+=1){let e,h=t[s];do{const t=i.findIndex((t=>zi(h,t)));e=t>=0?i[t]:void 0,e&&(i.splice(t,1),h=Qi(h,e))}while(e);i.push(h)}return i})(i.map((t=>{const i=t instanceof Uh||t instanceof Yg?t.Ts.nV(t):Li;if(pi(i))return Li;const h={min:{x:Math.max(i.min.x-s.left,0),y:Math.max(i.min.y-s.bottom,0)},max:{x:Math.min(i.max.x+s.right,e.x),y:Math.min(i.max.y+s.top,e.y)}};return h.max.x<=h.min.x||h.max.y<=h.min.y?Li:h})).filter((t=>!pi(t)))),r=6*h.length,n=new Float32Array(4*r);let o=0;return h.forEach((t=>{const i=as(t.min,e),s=as(t.max,e),h=i,r=s;n[o+0]=i.x,n[o+1]=i.y,n[o+2]=h.x,n[o+3]=h.y,n[o+4]=s.x,n[o+5]=i.y,n[o+6]=r.x,n[o+7]=h.y,n[o+8]=s.x,n[o+9]=s.y,n[o+10]=r.x,n[o+11]=r.y,n[o+12]=s.x,n[o+13]=s.y,n[o+14]=r.x,n[o+15]=r.y,n[o+16]=i.x,n[o+17]=s.y,n[o+18]=h.x,n[o+19]=r.y,n[o+20]=i.x,n[o+21]=i.y,n[o+22]=h.x,n[o+23]=h.y,o+=24})),{vertexBuffer:t.oV(n),vertexCount:r}})(t,e,{left:p+(o.x<0?-o.x:0),top:p+(o.y>0?o.y:0),right:p+(o.x>0?o.x:0),bottom:p+(o.y<0?-o.y:0)},i.aV()),y=i.iV(f,g),S=t.az(ng["2D"],ng.Glow1D({spreadPx:r,blurPx:n,firstPass:!0}),ng.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h,r)=>{const n=t.gl,o=t.sV();t.eV(n.FRAMEBUFFER,s.frameBuffer),n.bindRenderbuffer(n.RENDERBUFFER,s.depthBuffer),n.bindTexture(n.TEXTURE_2D,s.texture),n.clearDepth(1),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t.hV(0,0,s.sizeDpr.x,s.sizeDpr.y),t.lV(e,((o,a,l,u)=>(t.ZR(e),r&&r(o),t.fV(o("uIsHighlighted"),0).gR(o("uHighlightColorOffset"),T).fV(o("uRenderEffectMask"),0).dV(o("uTexture"),i.texture,0).cV(u("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).cV(o("uScale"),s.uniforms.AV()).cV(o("uDisp"),s.uniforms.gV()).cV(o("uScaling"),[s.size.x,s.size.y]).cV(o("uTranslationAxis"),[0,0]).uV(h.vertexBuffer,void 0,{location:a("aPos"),size:2},{location:a("aTextureCoord"),size:2}).Zm(n.TRIANGLES,h.vertexCount,0),!0))),t.eV(n.FRAMEBUFFER,o),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)})(t,g,y,S,m,((i,s,e,h)=>(t.cV(i("uOffsetPx"),[o.x,o.y]),!0))),g=y,t.tV(l),t.pV(d);const v=t.az(ng["2D"],ng.Glow1D({spreadPx:r,blurPx:n,firstPass:!1}),ng.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h)=>{const r=t.gl,n={x:t.cs.ai().x,y:t.cs.ai().y};t.hV(0,0,n.x*t.Xz(),n.y*t.Xz());const o=lt.d2({scaleXYConstructor:Ls}).tt(n).Oi(0,n.x).Ni(0,n.y),a=new Zg;a.mV(o),t.lV(s,((o,l,u,c)=>(t.ZR(s),h&&h(o),t.fV(o("uIsHighlighted"),0).gR(o("uHighlightColorOffset"),T).fV(o("uRenderEffectMask"),0).dV(o("uTexture"),i.texture,0).cV(c("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).cV(o("uScale"),a.AV()).cV(o("uDisp"),a.gV()).cV(o("uScaling"),[n.x,n.y]).cV(o("uTranslationAxis"),[0,0]).uV(e.vertexBuffer,void 0,{location:l("aPos"),size:2},{location:l("aTextureCoord"),size:2}).Zm(r.TRIANGLES,e.vertexCount,0),!0)))})(t,f,v,m,((i,e,h,r)=>(t.dV(i("uTextureFirstGlowPass"),y.texture,1).gR(i("uGlowColor"),s.color),!0))),t.hV(a.x,a.y,a.width,a.height),t.qz(u),t.oS(c),t.yV(m.vertexBuffer)};class $g{constructor(t){this.SV=[],this.ER=t}vV(t,i){Hg(this.ER,this,i,t)}aV(){const t=this.ER.cs.ai();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}iV(...t){const i=this.SV,s=this.aV(),e={x:Math.ceil(s.x*this.ER.Xz()),y:Math.ceil(s.y*this.ER.Xz())},h=this.ER.gl,r=i.find((i=>!t.includes(i)));if(r)return r.sizeDpr.x===e.x&&r.sizeDpr.y===e.y||(r.size=s,r.sizeDpr=e,h.bindTexture(h.TEXTURE_2D,r.texture),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.bindRenderbuffer(h.RENDERBUFFER,r.depthBuffer),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,e.x,e.y),h.bindTexture(h.TEXTURE_2D,null),h.bindRenderbuffer(h.RENDERBUFFER,null),r.scale.tt(s).Oi(0,s.x).Ni(0,s.y),r.uniforms.mV(r.scale)),r;const n=h.createTexture(),o=this.ER.xV(),a=this.ER.bV();h.bindTexture(h.TEXTURE_2D,n),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const l=this.ER.sV();this.ER.eV(h.FRAMEBUFFER,o),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),h.bindRenderbuffer(h.RENDERBUFFER,a),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,e.x,e.y),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,a),h.bindTexture(h.TEXTURE_2D,null),this.ER.eV(h.FRAMEBUFFER,l),h.bindRenderbuffer(h.RENDERBUFFER,null);const u=lt.d2({scaleXYConstructor:Ls}).tt(s).Oi(0,s.x).Ni(0,s.y),c=new Zg;c.mV(u);const d={size:s,sizeDpr:e,texture:n,frameBuffer:o,depthBuffer:a,scale:u,uniforms:c};return i.push(d),d}U(){[this.SV].forEach((t=>{t.forEach((t=>{this.ER.MV(t.depthBuffer),this.ER._V(t.frameBuffer),this.ER.NR(t.texture)})),t.length=0}))}}class Xg{constructor(t,i,s,e,h=!0){this.wV=new Ng,this.CV=new Map,this.kV=new Map,this.TV=[],this.ZE=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const t=new Uint32Array([287454020]),i=new Uint8Array(t.buffer);return 68===i[0]||17!==i[0]&&(xt.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.sS=!1,this.cV=(t,[i,s])=>(void 0===t||this.gl.uniform2f(t,i,s),this),this.FV=(t,[i,s])=>(void 0===t||this.gl.uniform2i(t,i,s),this),this.IV=(t,[i,s,e,h])=>(void 0===t||this.gl.uniform4f(t,i,s,e,h),this),this.PV=(t,[i,s,e])=>(void 0===t||this.gl.uniform3f(t,i,s,e),this),this.DV=(t,i)=>(void 0===t||this.gl.uniformMatrix3fv(t,!1,i),this),this.BV=(t,i)=>(void 0===t||this.gl.uniformMatrix4fv(t,!1,i),this),this.gR=(t,i)=>(void 0===t||this.gl.uniform4f(t,i.r,i.g,i.b,i.a),this),this.fV=(t,i)=>(void 0===t||this.gl.uniform1f(t,i),this),this.LV=(t,i)=>(this.gl.uniform1i(t,i),this),this.dV=(t,i,s)=>{if(void 0===t)return this;if(i){const e=this.gl.TEXTURE0+s;return this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(t,s),this}throw new gt("Could not bind a texture.")},this.RV=t=>(((t,i)=>{i===exports.ImageFitMode.Tile?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE))})(this.gl,t),this),this.oV=(t,i=!1,s,e=Float32Array)=>{const h=t.length,r=this.EV(h,s);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof e?t:new e(t),i?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),r)return r;throw new gt("Could not create vertex buffer")},this.zV=(t,i,s,e=Float32Array)=>{const h=s||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),i&&i.length===t?this.gl.bufferData(this.gl.ARRAY_BUFFER,i instanceof e?i:new e(i),this.gl.STATIC_DRAW):(this.gl.bufferData(this.gl.ARRAY_BUFFER,new e(t),this.gl.STATIC_DRAW),i&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,i instanceof e?i:new e(i))),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),h)return h;throw new gt("Could not create vertex buffer")},this.VV=(t,i,s,e=Float32Array)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,i*e.BYTES_PER_ELEMENT,s instanceof e?s:new e(s)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.OV=(t,i,s=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,s?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.NV=(t,i)=>{const s=t.length,e=this.EV(s,i);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new gt("Could not create index buffer")},this.GV=t=>{const i=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),i)return i;throw new gt("Could not create float buffer")},this.WV=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)),this),this.UV=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.uV=(t,i,...s)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t);const e=s.length;let h=0;for(let t=0;t<e;t+=1)h+=s[t].size;for(let t=0;t<e;t+=1){const i=s[t].location;void 0!==i&&i>-1&&this.gl.enableVertexAttribArray(i)}let r=0;for(let t=0;t<e;t+=1){const i=s[t];void 0!==i.location&&i.location>-1&&this.gl.vertexAttribPointer(i.location,i.size,this.gl.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),r+=i.size}if(void 0!==i)for(let t=0;t<e;t+=1){const e=s[t].location;void 0!==e&&e>-1&&this.YV(e,i)}return this},this.HV=(...t)=>{const i=t.length;for(let s=0;s<i;s+=1){const i=t[s];0!==i&&i>-1&&this.gl.disableVertexAttribArray(i)}return this},this.$V=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,0,0)),this),this.XV=(t,i,s)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t),void 0!==s&&this.YV(t,s)),this),this.jV=t=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this),this.ZV=null,this.Zm=(t,i,s=0)=>(i>0&&this.gl.drawArrays(t,s,i),this),this.QV=(t,i=this.gl.TRIANGLES,s=0,e=this.gl.UNSIGNED_SHORT)=>(t>0&&this.gl.drawElements(i,t,e,s),this),this.JV=(t,i,s,e)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(t,i,s,e),this.gl1)){if(!this.gl1.sz.ANGLE_instanced_arrays)return xt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.sz.ANGLE_instanced_arrays.drawArraysInstancedANGLE(t,i,s,e)}return this},this.KV=(t,i,s,e,h=this.gl.UNSIGNED_SHORT)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(t,i,h,s,e),this.gl1)){if(!this.gl1.sz.ANGLE_instanced_arrays)return xt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.sz.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,i,h,s,e)}return this},this.YV=(t,i)=>{if(t>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(t,i),this.gl1)){if(!this.gl1.sz.ANGLE_instanced_arrays)return xt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.sz.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,i)}return this},this.qV=(t,i,s,e=0)=>{const h=this.gl.TEXTURE0+e;this.gl.activeTexture(h);const r=this.sV();this.eV(this.gl.FRAMEBUFFER,i),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,s,0);const n=this.Zz();n&&this.tV(!1),t(),n&&this.tV(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.eV(this.gl.FRAMEBUFFER,r)},this.Gt=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this),this.tO=t=>(this.gl.clearColor(t.r,t.g,t.b,t.a),this),this.ZR=t=>(this.gl.useProgram(t.dE),this),this.iO=!1,this.sO=[],this.cs=t,this.dA=i,this.cs=t,this.gl=s.ctx,this.eO=s.antialias,this.hO=!!this.cs.Jr.ME&&s.lineAntialias,this.ez=this.cs.Jr.ez,this.rO=new Map,this.gl1=this.cs.Jr.gl1,this.gl2=this.cs.Jr.gl2,h&&(this.pV(!0),this.nO()),this.sz=this.cs.Jr.sz,this.VR=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.YR=this.oO(),this.az=this.cs.Jr.az,this.aO=new Jg(this),this.qR=this.cs.Jr.qR,this.lO=new $g(this),this.bE=this.cs.Jr.bE,this.uO=this.oV([0,0,1,0,1,1,0,1]),this.cO=this.oV([0,0,1,0,0,1,0,1,1,0,1,1])}qz(t){return t!==this.dO&&(this.dO=t,"disabled"===t?this.gl.disable(this.gl.CULL_FACE):"cull-back"===t?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):"cull-front"===t&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}Qz(){return this.dO||"disabled"}oS(t){return t!==this.sS&&(this.sS=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}Jz(){return this.sS}fO(t){return this.ZE=t,this}Xz(){return this.ZE}EV(t,i){let s;if(i){const e=this.rO.get(i);e&&e.size>=t&&e.size-t<1e6?s=i:this.yV(i)}return s||(s=this.gl.createBuffer(),this.rO.set(s,{size:t})),s}AO(t,i=this.gl.RGBA,s=!1,e,h,r=!1,n=this.gl.UNSIGNED_BYTE,o=i){const a=this.gl.createTexture();if(!a)throw new gt("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),t&&null===h?this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,i,n,t):h&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,h.x,h.y,0,i,n,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),s?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),a}NR(t){this.gl.deleteTexture(t)}xV(){const t=this.gl.createFramebuffer();if(!t)throw new gt("Couldn't reserve Framebuffer.");return t}eV(t,i){this.ZV=i,this.gl.bindFramebuffer(t,i)}sV(){return this.ZV}_V(t){this.gl.deleteFramebuffer(t)}bV(){const t=this.gl.createRenderbuffer();if(!t)throw new gt("Couldn't reserve Render buffer.");return t}MV(t){this.gl.deleteRenderbuffer(t)}hV(t,i,s,e){return this.gl.viewport(t,i,s,e),this.gO&&t===this.gO.x&&i===this.gO.y&&s===this.gO.width&&e===this.gO.height||(this.gO={x:t,y:i,width:s,height:e}),this}jz(){return this.gO||{x:0,y:0,width:0,height:0}}rV(t,i,s,e){return this.tV(!0),this.gl.scissor(Math.max(t,0),Math.max(i,0),Math.max(s,0),Math.max(e,0)),this}tV(t){return t===this.pO||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.pO=t),this}pV(t){return t!==this.iO&&(this.iO=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}Kz(){return this.iO}nO(t,i,s,e){return t?(void 0!==t&&void 0!==i&&(void 0!==s&&void 0!==e?this.gl.blendFuncSeparate(t,i,s,e):this.gl.blendFunc(t,i)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}Zz(){return void 0!==this.pO&&this.pO}lV(t,i){const s=new Kg(this,t),e=i(s.uniform,s.attribute,s,s.uniformOptional);s.finish(e)}yV(t){t&&(this.gl.deleteBuffer(t),this.rO.delete(t))}mO(t,i,s){this.cV(t.uniform("uCenter"),i.center).cV(t.uniform("uDistance"),i.distance).IV(t.uniform("uBounds"),i.bounds).fV(t.uniform("uAspect"),i.aspectRatio);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.gR(t.uniform(`color_${i}`),e[i].color).fV(t.uniform(`stop_${i}`),e[i].offset);return this}yO(t,i,s){this.cV(t.uniform("uStartPoint"),i.startPoint).cV(t.uniform("uEndPoint"),i.endPoint).IV(t.uniform("uBounds"),i.bounds);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.gR(t.uniform(`color_${i}`),e[i].color).fV(t.uniform(`stop_${i}`),e[i].offset);return this}Oh(t){const i=this.bE.get(t);if(!i){const i=new RA(this);return this.bE.set(t,i),i}return i}SO(t){const i=this.CV.get(t);if(!i){const i=new Ug(this,t);return this.vO(t,i),i}return i}vO(t,i){this.CV.set(t,i)}oO(){const t=this.gl,i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const s=0===t.getError();return s||!1!==this.dA.$n&&xt.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(i),s}xO(t,i,s,e){if(s)this.uV(i,e,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const s=t.attribute("aPos");this.WV(s,i),void 0!==e&&this.YV(s,e)}return this}bO(){this.sz.WEBGL_lose_context&&this.sz.WEBGL_lose_context.loseContext()}MO(t){if(this._O&&this._O.bufferIdsCount>=t)return this._O.buffer;this._O&&(this.yV(this._O.buffer),this._O=void 0);const i=t,s=new Float32Array(i);for(let t=0;t<i;t+=1)s[t]=t;const e=this.oV(s);return this._O={buffer:e,bufferIdsCount:i},e}wO(){return this.gl2?void 0:"attribute"}CO(t,i){if("attribute"===this.wO()){const s=this.MO(i);this.uV(s,void 0,{location:t.attribute("aVertexID"),size:1})}return this}kO(){return this.gl2?void 0:"attribute"}TO(t,i){if("attribute"===this.kO()){const s=this.MO(i);this.uV(s,1,{location:t.attribute("aInstanceID"),size:1})}return this}FO(t,i,s,e,h,r,n,o,a){const l=t.createBuffer();return this.sO.push(l),t.bindFramebuffer(t.FRAMEBUFFER,i),t.bindBuffer(t.PIXEL_PACK_BUFFER,l),t.bufferData(t.PIXEL_PACK_BUFFER,a.byteLength,t.STREAM_READ),t.readPixels(s,e,h,r,n,o,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),jg(t,t.PIXEL_PACK_BUFFER,l,0,a).then((()=>a)).catch((t=>{throw t})).finally((()=>{t.deleteBuffer(l),this.sO.splice(this.sO.indexOf(l),1)}))}IO(t,i,s,e,h,r,n,o){const a=this.gl,l=this.sV();this.eV(a.FRAMEBUFFER,t),a.readPixels(i,s,e,h,r,n,o),this.eV(this.gl.FRAMEBUFFER,l)}PO(t){const i=this.kV.get(t);if(!i){const i=this.gl.createTexture();if(!i)throw new gt("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,i);const e=[];let h=255;for(let i=0;i<t.length;i+=1){for(let s=0;s<t[i];s+=1)e.push(h);h=255===h?0:255}const r=e.length;if(!this.gl2&&0!=((s=e.length)&s-1)){const t=(t=>{t-=1;for(let i=1;i<32;i<<=1)t|=t>>1;return t+1})(e.length);for(let i=e.length;i<t;i+=1)e[i]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(e)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const n={DO:i,BO:r,LO:e.length};return this.kV.set(t,n),n}var s;return i}RO(t,i,s){const{uniform:e}=t;this.gR(e("uFallbackColor"),i.getFallbackColor());for(let t=0;t<i.steps.length;t+=1)this.fV(e(`uLUTValue${t}`),i.steps[t].value),this.gR(e(`uLUTColor${t}`),i.steps[t].color);if(i.percentageValues){if(!s)return Ai(0,(()=>{})),this;this.fV(e("uMinValue"),s.min),this.fV(e("uMaxValue"),s.max)}return this}EO(t,i,s,e,h,r){const n=s&&s.getSource()||e&&e.nc,o=s?s.getFitMode():exports.ImageFitMode.Stretch,a=t=>{t.texCoordsBuffer=this.oV(r(t.texture.Iz,t.texture.Pz,o),!1,t.texCoordsBuffer)};if(n){let e=i;if((!i||n!==i.source)&&n){i&&(i.texture.QR(t),this.yV(i.texCoordsBuffer));const h=this.SO(n);h.ZR(t);const r=s?s.getSourceMissingColor():Ce.color;e={texture:h,source:n,texCoordsBuffer:this.oV([]),sourceMissingTexture:this.AO(new Uint8Array([r.getR(),r.getG(),r.getB(),r.getA()]),this.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{e&&n&&(a(e),this.cs.vs())}},h.Nz(e.textureReadyCallback),a(e)}return e&&e.texture.Bz&&e.texture.Dz&&e.texture.Fz&&(e.texture.Ds(),this.cs.vs()),h&&e&&e.texture.Bz&&a(e),e}i&&this.zO(t,i)}zO(t,i){i&&(i.texture.QR(t),i.texture.Gz(i.textureReadyCallback),this.NR(i.sourceMissingTexture),this.yV(i.texCoordsBuffer))}VO(t,i,s,e){const{uniform:h,uniformOptional:r,attribute:n}=t,o=s.ft,a=this.Xz();this.fV(h("uIsHighlighted"),1===i||2===i?0:s.Vo).gR(h("uHighlightColorOffset"),1===i||2===i?F:s.Wo).fV(h("uRenderEffectMask"),2===i?1:0).cV(r("uRatioPxClip"),[2/this.cs.ai().x,2/this.cs.ai().y]).fV(r("uDevicePixelRatio"),a),o instanceof Ls||o instanceof qc?this.cV(h("uScale"),e.uniforms.AV()).cV(h("uDisp"),e.uniforms.gV()).cV(r("uScaleStart_highpart"),e.uniforms.OO()).cV(r("uScaleStart_lowpart"),e.uniforms.NO()):o instanceof Rs&&this.cV(r("uScaleStart"),e.uniforms.MixedScaleXY.uScaleStart).cV(r("uScaleStartLog"),e.uniforms.MixedScaleXY.uScaleStartLog).cV(r("uScaleInterval"),e.uniforms.MixedScaleXY.uScaleInterval).cV(r("uScaleIntervalLog"),e.uniforms.MixedScaleXY.uScaleIntervalLog).cV(h("uViewportStart"),e.uniforms.MixedScaleXY.uViewportStart).cV(h("uViewportSize"),e.uniforms.MixedScaleXY.uViewportSize);const l=!0===e.coordsHighPrecision;if(e.coordsX)if(l){const t=n("aPos_highpartX"),i=n("aPos_lowpartX");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.coordsX),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(i,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(i)}else this.XV(n("aPosX"),e.coordsX);if(e.coordsY)if(l){const t=n("aPos_highpartY"),i=n("aPos_lowpartY");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.coordsY),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(i,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(i)}else this.XV(n("aPosY"),e.coordsY);if(1===i)this.gR(h("uColor"),e.mousePickingColor);else{if(e.fillStyleSolid&&this.gR(h("uColor"),e.fillStyleSolid.getColor()),e.fillStylePaletted){if("value"===e.fillStylePaletted.getLookUpProperty()&&null!==e.lookupValueBuffer){if(!e.lookupValueBuffer)return!1;const t=n("aLookupValue");this.XV(t,e.lookupValueBuffer),void 0!==e.lookupValueAttribDivisor&&this.YV(t,e.lookupValueAttribDivisor)}this.RO(t,e.fillStylePaletted.lut,e.lookupValueRange)}if(e.fillStyleLinearGradient){if(!e.linearGradientInfo)return!1;this.yO(t,e.linearGradientInfo,e.fillStyleLinearGradient)}if(e.fillStyleRadialGradient){if(!e.radialGradientInfo)return!1;this.mO(t,e.radialGradientInfo,e.fillStyleRadialGradient)}if(e.fillStyleIndividual&&null!==e.colorBuffer){if(!e.colorBuffer)return!1;const t=n("aColor");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.colorBuffer),this.gl.vertexAttribPointer(t,4,this.gl.UNSIGNED_BYTE,!0,0,0),this.gl.enableVertexAttribArray(t),void 0!==e.colorAttribDivisor&&this.YV(t,e.colorAttribDivisor)}if(e.fillStyleImage){if(!e.texturedFillGLInfo)return!1;const t=e.texturedFillGLInfo&&e.texturedFillGLInfo.texture.Wz();this.gR(r("uColor"),e.fillStyleImage.getSurroundingColor()).dV(h("uColorTexture"),t||e.texturedFillGLInfo.sourceMissingTexture,0).uV(e.texturedFillGLInfo.texCoordsBuffer,e.texCoordAttribDivisor,{location:n("aTextureCoord"),size:2}).RV(e.fillStyleImage.fitMode)}if(e.maskTexture){const t=e.maskTexture&&e.maskTexture.texture.Wz();this.dV(h("uMaskTexture"),t||e.maskTexture.sourceMissingTexture,0).uV(e.maskTexture.texCoordsBuffer,e.maskTextureCoordsAttribDivisor,{location:n("aMaskTextureCoord"),size:2})}}return!0}GO(t,i,s){if(t)return Vg(s||i.$o(),i.ft,t.getAngle(!0),this.Xz())}WO(t,i,s){if(t)return zg(s||i.$o(),i.ft,t.getPosition(),t.getExtent(),t.getShape(),this.Xz())}}const jg=async(t,i,s,e,h,r,n)=>{const o=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),((t,i,s)=>{const e=void 0!==s.flags?s.flags:0,h=void 0!==s.retryTimeout?s.retryTimeout:10;return new Promise(((s,r)=>{const n=()=>{const o=t.clientWaitSync(i,e,0);return o===t.WAIT_FAILED?r(new Error(`WebGL Sync WAIT_FAILED ${t.getError()}`)):o!==t.TIMEOUT_EXPIRED?s(void 0):void xt.setTimeout(n,h)};xt.setTimeout(n,0)}))})(t,o,{retryTimeout:10}).then((()=>(t.deleteSync(o),t.bindBuffer(i,s),t.getBufferSubData(i,e,h,r,n),t.bindBuffer(i,null),h))).catch((t=>{throw t}))};class Zg{mV(t){if(t instanceof Ls||t instanceof qc){const i=t.Si();this.UO=i.x.scaling,this.YO=-i.x.displacement,this.HO=i.y.scaling,this.$O=-i.y.displacement,this.XO=i.x.highPrecisionOffset,this.jO=i.x.highPrecisionOffset-Math.fround(i.x.highPrecisionOffset),this.ZO=i.y.highPrecisionOffset,this.QO=i.y.highPrecisionOffset-Math.fround(i.y.highPrecisionOffset)}else t instanceof Rs&&(this.MixedScaleXY=t.Si());return this}gV(){return[this.YO,this.$O]}AV(){return[this.UO,this.HO]}OO(){return[this.XO,this.ZO]}NO(){return[this.jO,this.QO]}}class Qg{constructor(){this.UO=0,this.HO=0,this.JO=0,this.YO=0,this.$O=0,this.KO=0}qO(t){return this.UO=t.ht(),this.YO=t.getInnerStart()+.5*this.UO*t.rt(),this}tN(t){return this.HO=t.ht(),this.$O=t.getInnerStart()+.5*this.HO*t.rt(),this}iN(t){return this.JO=t.ht(),this.KO=t.getInnerStart()+.5*this.JO*t.rt(),this}AV(){return[this.UO,this.HO,this.JO]}gV(){return[this.YO,this.$O,this.KO]}sN(t,i,s,e,h){const r=l(2*(t-s.x)/(s.width-s.x)-1,2*(i-s.y)/(s.height-s.y)-1),n=bl.multiply(e,[r.x,r.y,h,1]);return d(n[0],n[1],n[2])}}class Jg{constructor(t){this.ER=t}VL(t,i,s,e,h,r=0){const n=this.ER,o=void 0===e;if(!(e=e||n.xV()))throw new gt("Could not bind a framebuffer.");const a=n.jz(),l=n.Kz();n.pV(!1),n.qV((()=>{n.hV(0,0,s.x,s.y),t()}),e,i,r),o&&n._V(e),this.ER.tO(h),this.ER.hV(a.x,a.y,a.width,a.height),n.pV(l)}}class Kg{constructor(t,i){this.eN=[],this.hN=[],this.uniform=t=>{const i=this.shader.pE(t);return this.hN.push({name:t,optional:!1}),i},this.uniformOptional=t=>{const i=this.shader.mE(t);return this.hN.push({name:t,optional:!0}),i},this.attribute=t=>{const i=this.shader.yE(t);return this.eN.push({name:t,location:i}),i},this.glUtils=t,this.shader=i}finish(t){for(const t of this.eN)this.glUtils.HV(t.location),this.glUtils.YV(t.location,0)}}class qg extends Uh{constructor(t,i,s,e,h){super(t,i,s,e),this.rN=new Map,this.nN=t,this.oN=i,this.ER=t.aN(),this.lN=h,this.oN=i}uN(t){return!1}OR(){return this}VL(t){if(!this.lN||0!==t||0===this.rN.size)return this;const i=Array.from(this.rN.values()).map((t=>t.cN.filter((t=>t.dN)).map((t=>t.ss)).flat().filter((t=>void 0!==t)).filter((t=>t.getVisible())))).flat();if(0===i.length)return this;const s=this.lN;return this.ER.lO.vV(i,s),this}Ds(){return this}bt(){return 0}xt(){return 0}_t(){return 0}Mt(){return 0}xl(){return 0}bl(){return 0}rs(t,i){const s={cN:[]},e=(t,i)=>{const e={ss:t||[],dN:void 0===i||i};s.cN.push(e);const h={As:t=>(e.ss=t,h),Ss:t=>(e.dN=t,h),xs:()=>e.dN};return h},h={};Object.keys(i).forEach((t=>{const s=i[t],r=s.shapes||[],n=void 0===s.themeEffectEnabled||s.themeEffectEnabled,o=e(r,n);h[t]=o}));const r={yg:e,...h};this.rN.set(t,s);const n=t.onDispose((()=>{this.rN.delete(t),t.offDispose(n)}));return r}}const tp=(t,i,s)=>((t,i,s,e)=>{const h=[];let r=0;const n=hs(i,s/2);let o,a,u,c,d=t[t.length-1],f=0;for(let s=0;s<t.length;s+=1){o=t[s],a=s===t.length-1?t[0]:t[s+1],s>0&&(d=t[s-1]),bt(o,d)&&(d=rs(o,is(hs(ns(a,o),-1)))),bt(o,a)&&(a=rs(o,is(hs(ns(d,o),-1))));const e=as(d,i),A=as(o,i),g=as(a,i),p=is(ns(A,e)),m=is(ns(g,A)),y=rs(p,m),S=l(-y.y,y.x),v=l(-p.y,p.x),x=1/us(S,v),b=es(S),M=is(ns(p,m)),_=Math.sign(us(S,M))||1,w=os(S,hs(n,x)),C=os(S,hs(n,-x));if(b<1||x===1/0){let t={x:0,y:0},i={x:0,y:0},s={x:0,y:0},e={x:0,y:0};const u=l(-m.y,m.x),c=Math.sign(us(p,S))||_,A=os(v,hs(n,c)),g=os(u,hs(n,c));1===_?(t=A,i=C,s=g,e=C):(t=w,i=A,s=w,e=g);const y=4*Yi(d,o),b=4*Yi(o,a);(x>y||x>b)&&(1===_?(t=A,i=g,s=g,e=A):(t=g,i=A,s=A,e=g));const M=rs(o,t),k=rs(o,i),T=rs(o,s),F=rs(o,e);h[r]=M,r+=1,h[r]=k,r+=1,h[r]=T,r+=1,h[r]=F,r+=1,f=4}else{const t=rs(o,w),i=rs(o,C);h[r]=t,r+=1,h[r]=i,r+=1,f=2}c=u,u=t[s]}return h[r]=h[0],r+=1,h[r]=h[1],r+=1,[h,f,[c,u]]})(t,i,s)[0];class ip extends rr{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.lE=new Zg,this.fN=Li,this.AN=Li,this.gN=PA({arcStyleSolid:()=>W(this.be)&&this.be,arcStyleRadialGradient:()=>tt(this.be)&&this.be,arcStyleLinearGradient:()=>et(this.be)&&this.be}),this.nN=t,this.oN=i,this.pN=r,this.mN=n,this.ER=t.aN()}yN(t,i){let s=0,e=Array(0),h=0;if(void 0!==i){const h=t.length,r=Array(h+i.length);let n=0,o=0;for(;n<h;)r[o]=t[n],r[o+1]=i[n],o+=2,n+=1;e=r,s=this.ER.gl.TRIANGLE_STRIP}else e=t,s=this.ER.gl.TRIANGLE_FAN;const r=Qt(e,this.ft.wi());return h=e.length,[e,this.ER.oV(r),h,s]}SN(t,i,s,e){let h=Array(0);if(void 0===i)h=t;else{let s=0,e=0;const r=t.length;for(s=0,e=r,h=Array(r+i.length-2),i.reverse();s<r;)h[s]=t[s],h[e]=i[s],e+=1,s+=1}if(1===s||-1===s)return[Qt(h,this.ft.wi()),h.length];const r=tp(h,e,s);return[Qt(r,this.ft.wi()),r.length]}Ds(){const t=this.ea(),i=this.Lo._();if(this.ha()){const s=Math.abs(this.Ii._()-this.Wl._());this.lE.mV(this.ft);const e=this.ft.Gi()||t,h=this.ft.Ui(),r=this.Ul._(),n=this.Yl._(),[o,a]=vd(this.ca._(),this.Wl._(),this.Ii._(),this.Ul._(),this.Yl._(),this.$l._()),u=this.Hl._(),c=u>0?vd(this.ca._(),this.Wl._(),this.Ii._(),this.Ul._()*u/100,this.Yl._()*u/100,a)[0]:[this.ca._()],d=o.length-1;if(2===d){const t=(o[d-1].x+o[1].x)/2,i=(o[d-1].y+o[1].y)/2;this.Xl=l(t,i)}else{const t=Math.floor(d/2);this.Xl=l(o[t].x,o[t].y)}this.jl=o[1];const f=o.length-1;this.Zl=o[f],this.Hl._()&&(o.shift(),c.shift());let g=!1;(this.ca.o||this.Wl.o||this.Ii.o||this.Ul.o||this.Yl.o||this.Hl.o||this.$l.o||e)&&(this.AN=A(l(this.Ia().x-r,this.Ia().y-n),l(this.Ia().x+r,this.Ia().y+n)),g=!0,this.ca.o=!1,this.Wl.o=!1,this.Ii.o=!1,this.Ul.o=!1,this.Yl.o=!1,this.Hl.o=!1,this.$l.o=!1);const p=this.ia();(g||p)&&this.be!==z&&(this.Hl._()?(this.vN&&this.ER.yV(this.vN),[this.xN,this.vN,this.bN,this.MN]=this.yN(o,c)):(this.vN&&this.ER.yV(this.vN),[this.xN,this.vN,this.bN,this.MN]=this.yN(o,void 0)),tt(this.be)?this._N=zg(this.AN,this.ft,this.be.getPosition(),this.be.getExtent(),this.be.getShape(),this.ER.Xz()):et(this.be)?this.wN=Vg(this.AN,this.ft,this.be.getAngle(!0),this.ER.Xz()):(this._N=void 0,this.wN=void 0));const m=this.gN.arcStyleSolid(p),y=this.gN.arcStyleLinearGradient(p),S=this.gN.arcStyleRadialGradient(p),v=m||y||S;p&&(this.CN=v?this.ER.az(ng["2D"],ng.Color({dataType:tt(this.be)||et(this.be)?["gradient",this.be]:"uniform"}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0,this.ra(this.be));const x=this.Me;if(Js(x)&&(g||this.aa(x.getThickness())||e)){this.Hl._()?360===s?(o.pop(),c.pop(),[this.kN,this.TN]=this.SN(o,void 0,x.getThickness(),h),this.FN&&this.kN?this.ER.OV(this.FN,this.kN,!0):!this.FN&&this.kN?this.FN=this.ER.oV(this.kN,!0):this.FN&&!this.kN&&(this.ER.yV(this.FN),this.FN=void 0),[this.IN,this.PN]=this.SN(c,void 0,x.getThickness(),h),this.DN&&this.IN?this.ER.OV(this.DN,this.IN,!0):!this.DN&&this.IN?this.DN=this.ER.oV(this.IN,!0):this.DN&&!this.IN&&(this.ER.yV(this.DN),this.DN=void 0)):([this.kN,this.TN]=this.SN(o,c,x.getThickness(),h),this.FN&&this.kN?this.ER.OV(this.FN,this.kN,!0):!this.FN&&this.kN?this.FN=this.ER.oV(this.kN,!0):this.FN&&!this.kN&&(this.ER.yV(this.FN),this.FN=void 0),this.IN&&(this.DN&&this.ER.yV(this.DN),this.DN=void 0,this.PN=0)):(360===s&&(o.shift(),o.pop()),[this.kN,this.TN]=this.SN(o,void 0,x.getThickness(),h),this.FN&&this.kN?this.ER.OV(this.FN,this.kN,!0):!this.FN&&this.kN?this.FN=this.ER.oV(this.kN,!0):this.FN&&!this.kN&&(this.ER.yV(this.FN),this.FN=void 0));const t=x.getFillStyle();tt(t)?this.LN=zg(this.AN,this.ft,t.getPosition(),t.getExtent(),t.getShape(),this.ER.Xz()):et(t)?this.RN=Vg(this.AN,this.ft,t.getAngle(!0),this.ER.Xz()):(this.LN=void 0,this.RN=void 0),this.EN=t===z?void 0:this.ER.az(ng["2D"],ng.Color({dataType:tt(t)||et(t)?["gradient",t]:"uniform"}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})),this.la(x)}if(g){let t=1,i=1;Js(x)&&(t=x.getThickness()*h.x,i=x.getThickness()*h.y),this.fN=A(l(this.AN.min.x-t,this.AN.min.y-i),l(this.AN.max.x+t,this.AN.max.y+i))}this.zN=i&&v?this.zN||this.ER.az(ng["2D"],ng.MousePicking,ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0,this.VN=i&&this.Me!==rt?this.VN||this.ER.az(ng["2D"],ng.MousePicking,ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0}return this}VL(t){if(this.ha()){const i=1===t?this.zN:this.CN,s=this.be,e=this.vN;i&&e&&this.ER.ZR(i).lV(i,((i,h,r,n)=>{if(this.ER.cV(i("uScale"),this.lE.AV()).cV(i("uDisp"),this.lE.gV()).cV(n("uScaleStart_highpart"),this.lE.OO()).cV(n("uScaleStart_lowpart"),this.lE.NO()).xO(r,e,this.ft.wi(),void 0).fV(i("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0),1===t)this.ER.gR(i("uColor"),this.mN);else if(W(s))this.ER.gR(i("uColor"),s.getColor());else if(tt(s)){if(!this._N)return!1;this.ER.mO(r,this._N,s)}else if(et(s)){if(!this.wN)return!1;this.ER.yO(r,this.wN,s)}return this.ER.Zm(this.MN,this.bN),!0}));const h=this.Me;Js(h)&&(void 0!==this.FN&&this.ON(t,this.FN,this.TN,h),void 0!==this.DN&&this.ON(t,this.DN,this.PN,h))}return this}ON(t,i,s,e){const h=1===t?this.VN:this.EN,r=e.getFillStyle();h&&this.ER.ZR(h).lV(h,((h,n,o,a)=>{if(this.ER.cV(h("uScale"),this.lE.AV()).cV(h("uDisp"),this.lE.gV()).xO(o,i,this.ft.wi(),void 0).fV(h("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(h("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(h("uRenderEffectMask"),2===t?1:0),1===t)this.ER.gR(h("uColor"),this.mN);else if(W(r))this.ER.gR(h("uColor"),r.getColor());else if(tt(r)){if(!this.LN)return!1;this.ER.mO(o,this.LN,r)}else if(et(r)){if(!this.RN)return!1;this.ER.yO(o,this.RN,r)}const l=e.getThickness(),u=-1===l||1===l;return this.ER.Zm(u?this.ER.gl.LINE_LOOP:this.ER.gl.TRIANGLE_STRIP,s),!0}))}uN(t){return this.pN===t&&{}}OR(){return this.NN&&(this.ER.yV(this.NN),this.NN=void 0),this.GN&&(this.ER.yV(this.GN),this.GN=void 0),this.vN&&(this.ER.yV(this.vN),this.vN=void 0),this.FN&&(this.ER.yV(this.FN),this.FN=void 0),this.DN&&(this.ER.yV(this.DN),this.DN=void 0),this.CN=void 0,this.EN=void 0,this.zN=void 0,this.VN=void 0,this}bt(){return this.AN.max.x}xt(){return this.AN.min.x}_t(){return this.AN.max.y}Mt(){return this.AN.min.y}xl(){return _i(this.Me)}bl(){return _i(this.Me)}}class sp{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}WN(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}UN(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}YN(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}HN(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.second,i[s+2]=this.third,s+=3,t.position=s,t.next&&this.UN(),this}$N(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.third,i[s+2]=this.second,i[s+3]=this.third,i[s+4]=this.fourth,i[s+5]=this.second,s+=6,t.position=s,t.next&&this.YN(),this}XN(t,i){i.next=!0,6*t>=i.buffer.length&&(i.buffer=Array(6*t));for(let s=0;s<t;s+=1)this.$N(i);return this}jN(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const ep=((t=0)=>(new sp).WN(t))(),hp=(t,i,s,e,h,r,n,o,a,l)=>(void 0===o&&void 0===n||ep.UN(),r.push(t,i),h.push(ep.first,ep.second,ep.third),o=void 0,n=void 0,h.push(ep.third,ep.fourth,ep.second),a=ep.third,ep.YN(),l&&r.push(s,e),[n,o,a]),rp=(t,i,s,e,h,r,n,o,a,l,u)=>{void 0===a&&void 0===o||ep.UN(),n.push(t,i),h.push(ep.first,ep.second,ep.third);const c=ys(t,s,i,e);return a=void 0,void 0!==c&&(void 0===a&&(a=c),n.push(a),r.push(ep.third,ep.fourth,ep.fifth),l=ep.fourth),ep.YN(),u&&n.push(s,e),[o,a,l]},np=(t,i,s,e,h,r,n,o,a,l)=>(void 0===n&&void 0===r||ep.UN(),h.push(t,i),e.push(ep.first,ep.second,ep.third),r=s,n=void 0,o=ep.third,l?h.push(s):a=!0,[r,n,o,a]),op=(t,i,s,e,h,r,n,o,a,l,u)=>(0!==r.length?(void 0===o&&void 0===n||ep.UN(),ep.UN()):a>0&&(ep.UN(),u>0&&(u-=1)),r.push(t),h.push(ep.first,ep.second,ep.third),a=ep.second,n=t,o=void 0,l&&r.push(s,e),[n,o,a,u]),ap=(t,i=0)=>{ep.WN(i);const[s,e]=t,h=s.length,r=[],n=[],o=[];let a,l,u=i,c=0,d=s[c],f=e[c],A=s[c],g=e[c],p=!1,m=u>0?A.y!==g.y?2:1:0;if(h>1)for(;c<h-1;){A=d,g=f,c+=1,d=s[c],f=e[c];const t=c===h-1;A.y>g.y?d.y>f.y?[a,l,u]=hp(A,g,d,f,r,o,a,l,u,t):d.y<f.y?[a,l,u]=rp(A,g,d,f,r,n,o,a,l,u,t):[a,l,u,p]=np(A,g,d,r,o,a,l,u,p,t):A.y<g.y?d.y<f.y?[a,l,u]=hp(A,g,d,f,n,o,a,l,u,t):d.y>f.y?[a,l,u]=rp(A,g,d,f,n,r,o,a,l,u,t):[a,l,u,p]=np(A,g,d,n,o,a,l,u,p,t):d.y===f.y?(a=A,p&&(o.push(A),p=!1,ep.UN()),0===o.length&&u>0&&m>0&&(m-=1)):d.y>f.y?[a,l,u,m]=op(A,0,d,f,r,o,a,l,u,t,m):[a,l,u,m]=op(A,0,d,f,n,o,a,l,u,t,m)}return[o,new Uint16Array(r),new Uint16Array(n),u,m]};class lp extends hr{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.lE=new Zg,this.ZN=0,this.Na=Array(),this.QN=0,this.JN=new Uint16Array(0),this.KN=new Uint16Array(0),this.gN=PA({hightFillSolid:()=>W(this.be)&&this.be,hightFillRadialGradient:()=>tt(this.be)&&this.be,hightFillLinearGradient:()=>et(this.be)&&this.be,hightFillPaletted:()=>$(this.be)&&this.be,lowFillSolid:()=>W(this.Fl)&&this.Fl,lowFillRadialGradient:()=>tt(this.Fl)&&this.Fl,lowFillLinearGradient:()=>et(this.Fl)&&this.Fl,lowFillPaletted:()=>$(this.Fl)&&this.Fl}),this.nN=t,this.oN=i,this.pN=r,this.mN=n,this.ER=t.aN()}Ds(){const t=this.ea(),i=this.Lo._(),s=this.Ja;if(this.ha()){this.lE.mV(this.ft);const e=this.ft instanceof Rs==0,h=e?this.ft.Ui():void 0,r=this.Bl(),n=this.ft.Gi()||t,o=s||this.wl.o||n&&"disabled"!==r.type;if(o){if(this.ZN=0,this.JN=new Uint16Array(0),this.KN=new Uint16Array(0),this.Na.length=0,this.QN=0,this.Cl>1){const[t,i,s,n]=ap([e?r.packager(this.Ml,h,.5):this.Ml,e?r.packager(this._l,h,.5):this._l]);this.ZN=n,this.JN=i,this.KN=s,this.Na=t,this.QN=t.length}this.wl.o=!1}if(this.Tl&&this.Xa[0].length>1){const[t,i]=this.Xa,s=t.length,[n,o,a,l,u]=ap([e?r.packager(t,h,.5):t,e?r.packager(i,h,.5):i],this.ZN);this.ZN=l;const c=n.length;for(let t=u;t<c;t+=1)this.Na[this.QN]=n[t],this.QN+=1;this.JN=Ss(this.JN,o),this.KN=Ss(this.KN,a);for(let e=u>0||this.Cl>0?1:u;e<s;e+=1)this.Ml[this.Cl]=t[e],this._l[this.Cl]=i[e],this.Cl+=1;this.kl=!0,this.Tl=!1,this.Xa=[]}const a=this.be,l=this.sa!==a,u=this.gN.hightFillSolid(l),c=this.gN.hightFillRadialGradient(l),d=this.gN.hightFillLinearGradient(l),f=this.gN.hightFillPaletted(l),A=u||c||d||f&&["x","y"].includes(f.getLookUpProperty())&&f,g=this.Fl,p=this.Nl!==g,m=this.gN.lowFillSolid(p),y=this.gN.lowFillRadialGradient(p),S=this.gN.lowFillLinearGradient(p),v=this.gN.lowFillPaletted(p),x=m||y||S||v&&["x","y"].includes(v.getLookUpProperty())&&v;if((l||t)&&(this.qN=A?this.ER.az(ng["2D"],ng.Color({dataType:d?["gradient",d]:c?["gradient",c]:f?["lookup",f.getLookUpProperty(),f.lut]:"uniform"}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0),c?this._N=zg(this.zo||this.Ha,this.ft,c.getPosition(),c.getExtent(),c.getShape(),this.ER.Xz()):d?this.wN=Vg(this.zo||this.Ha,this.ft,d.getAngle(!0),this.ER.Xz()):(this._N=void 0,this.wN=void 0),(p||t)&&(this.tG=x?this.ER.az(ng["2D"],ng.Color({dataType:S?["gradient",S]:y?["gradient",y]:v?["lookup",v.getLookUpProperty(),v.lut]:"uniform"}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0),y?this.iG=zg(this.zo||this.Ha,this.ft,y.getPosition(),y.getExtent(),y.getShape(),this.ER.Xz()):S?this.sG=Vg(this.zo||this.Ha,this.ft,S.getAngle(!0),this.ER.Xz()):(this.iG=void 0,this.sG=void 0),(t||this.kl||o)&&this.kl||o){const t=this.Na,i=Qt(t,this.ft.wi());this.eG=this.ER.oV(i,!1,this.eG),A&&(this.hG=this.ER.NV(this.JN,this.hG),this.rG=this.JN.length),x&&(this.nG=this.ER.NV(this.KN,this.nG),this.oG=this.KN.length),this.kl=!1}this.zN=i&&(x||A)?this.zN||this.ER.az(ng["2D"],ng.MousePicking,ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0,this.ra(this.be),this.Gl(this.Fl),this.Ja=!1}return this}VL(t){const i=this.be,s=this.Fl,e=1===t?this.zN:this.tG;if(e&&this.eG&&this.nG){const i=this.eG,h=this.nG;this.ER.ZR(e).lV(e,((e,r,n,o)=>{if(this.ER.xO(n,i,this.ft.wi(),void 0).jV(h).fV(e("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(e("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(e("uRenderEffectMask"),2===t?1:0),this.ft instanceof Ls||this.ft instanceof qc?this.ER.cV(e("uScale"),this.lE.AV()).cV(e("uDisp"),this.lE.gV()).cV(o("uScaleStart_highpart"),this.lE.OO()).cV(o("uScaleStart_lowpart"),this.lE.NO()):this.ft instanceof Rs&&this.ER.cV(o("uScaleStart"),this.lE.MixedScaleXY.uScaleStart).cV(o("uScaleStartLog"),this.lE.MixedScaleXY.uScaleStartLog).cV(o("uScaleInterval"),this.lE.MixedScaleXY.uScaleInterval).cV(o("uScaleIntervalLog"),this.lE.MixedScaleXY.uScaleIntervalLog).cV(e("uViewportStart"),this.lE.MixedScaleXY.uViewportStart).cV(e("uViewportSize"),this.lE.MixedScaleXY.uViewportSize),1===t)this.ER.gR(e("uColor"),this.mN);else if(W(s))this.ER.gR(e("uColor"),s.getColor());else if(tt(s)){if(!this.iG)return!1;this.ER.mO(n,this.iG,s)}else if(et(s)){if(!this.sG)return!1;this.ER.yO(n,this.sG,s)}else if($(s)){const t=DA(s,this,void 0);if(!t&&s.lut.percentageValues)return!1;this.ER.RO(n,s.lut,t)}return this.ER.QV(this.oG),!0}))}const h=1===t?this.zN:this.qN;if(h&&this.eG&&this.hG){const s=this.eG,e=this.hG;this.ER.ZR(h).lV(h,((h,r,n,o)=>{if(this.ER.xO(n,s,this.ft.wi(),void 0).jV(e).fV(h("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(h("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(h("uRenderEffectMask"),2===t?1:0),this.ft instanceof Ls||this.ft instanceof qc?this.ER.cV(h("uScale"),this.lE.AV()).cV(h("uDisp"),this.lE.gV()).cV(o("uScaleStart_highpart"),this.lE.OO()).cV(o("uScaleStart_lowpart"),this.lE.NO()):this.ft instanceof Rs&&this.ER.cV(o("uScaleStart"),this.lE.MixedScaleXY.uScaleStart).cV(o("uScaleStartLog"),this.lE.MixedScaleXY.uScaleStartLog).cV(o("uScaleInterval"),this.lE.MixedScaleXY.uScaleInterval).cV(o("uScaleIntervalLog"),this.lE.MixedScaleXY.uScaleIntervalLog).cV(h("uViewportStart"),this.lE.MixedScaleXY.uViewportStart).cV(h("uViewportSize"),this.lE.MixedScaleXY.uViewportSize),1===t)this.ER.gR(h("uColor"),this.mN);else if(W(i))this.ER.gR(h("uColor"),i.getColor());else if(tt(i)){if(!this._N)return!1;this.ER.mO(n,this._N,i)}else if(et(i)){if(!this.wN)return!1;this.ER.yO(n,this.wN,i)}else if($(i)){const t=DA(i,this,void 0);if(!t&&i.lut.percentageValues)return!1;this.ER.RO(n,i.lut,t)}return this.ER.QV(this.rG),!0}))}return this}uN(t){return this.pN===t&&{}}bt(){return this.Ha.max.x}xt(){return this.Ha.min.x}_t(){return this.Ha.max.y}Mt(){return this.Ha.min.y}xl(){return 0}bl(){return 0}Yb(t){this.ll()>0&&this.Ds();const[i,s]=this.il(),e=i.length>2&&i[1].x<i[0].x,h=Lh(i,t,Dh.NearestX,this.Il,this.Pl,this.ft,this.cs.ft,this.Ha,"x",e);if(void 0===h)return;const r=[i[h],s[h]];return Number.isNaN(r[0].y)||Number.isNaN(r[1].y)?void 0:r}ew(t){this.ll()>0&&this.Ds();const[i,s]=this.il(),e=i.length;if(0===e)return;const h=this.Il?1:0,r=e-(this.Pl?2:1),n=i.length>2&&i[1].x<i[0].x,o=Oh(i,ct(t,this.cs.ft,this.ft),"x",n,h,r);if(!o)return;const a=[$i(i[o.a],i[o.b],o.lerpAmount),$i(s[o.a],s[o.b],o.lerpAmount)];return Number.isNaN(a[0].y)||Number.isNaN(a[1].y)?void 0:a}dispose(){return super.dispose(),this.nG&&(this.ER.yV(this.nG),this.nG=void 0),this.hG&&(this.ER.yV(this.hG),this.hG=void 0),this.eG&&(this.ER.yV(this.eG),this.eG=void 0),this}OR(){return this.dispose(),this}}class up extends Og{constructor(t,i){super(t),this.aG=i;const{vertices:s,indices:e,indicesCount:h,drawMode:r}=this.lG();this.uG=t.oV(s),this.cG=t.NV(e),this.dG=h,this.fG=r}ZR(t,i){return this.ER.uV(this.uG,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:i?t.attribute("aSegmentInside"):void 0,size:1}),this.ER.jV(this.cG),this}Zm(t,i,s){return this.ER.KV(void 0!==i?i:this.fG,this.dG,s||0,t,this.ER.gl.UNSIGNED_BYTE),this}lG(){const t=[];[1,0].forEach((i=>{const s=1===i?.5*Math.PI:1.5*Math.PI;for(let e=0;e<=this.aG;e+=1){const h=s-e*Math.PI/this.aG;t.push(.5*Math.cos(h),.5*Math.sin(h),i,0)}})),t.push(0,0,1,1),t.push(0,0,0,1);const i=t.length/4,s=[];for(let t=0;t<this.aG;t+=1)s.push(t,t+1,i-2),s.push(t+i/2-1,t+i/2,i-1);return s.push(0,i-2,i-1),s.push(i-1,i-2,i/2-1),s.push(0,i-3,i-1),s.push(i/2-2,i-2,i/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(s),indicesCount:s.length,verticesCount:i,drawMode:this.ER.gl.TRIANGLES}}Tz(){this.ER.yV(this.uG),this.ER.yV(this.cG)}}const cp=(t,i,s=!0)=>((t,i)=>{let s=t.wV.Mz.get(i);return s||(s=new up(t,i),t.wV.Mz.set(i,s),s)})(t,s?i>=50?8:i>=20?6:i>=7?4:i>=4?3:1===i?1:2:1),dp={AG:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.YV(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.YV(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.YV(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.YV(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.YV(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.YV(s,1),o.enableVertexAttribArray(s)}},gG:(t,i,s,e,h,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,s),o.vertexAttribPointer(e,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.YV(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(h,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),t.YV(h,1),o.enableVertexAttribArray(h)},pG:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.YV(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.YV(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.YV(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.YV(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.YV(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.YV(s,1),o.enableVertexAttribArray(s)}},mG:(t,i,s,e,h,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,s),o.vertexAttribPointer(e,r,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.YV(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(h,r,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),t.YV(h,1),o.enableVertexAttribArray(h)},VL:(t,i,s,e,h,r,n)=>{const o=t.aN(),{uniform:a,uniformOptional:l}=s,u=1/t.Yn.Xn,c=(h?Math.max(r,u):Math.max(r,0))+1;o.fV(a("uThicknessPixels"),c).fV(l("uAALimit"),1-(c-1)/c).cV(a("uRatioPxClip"),[2/t.ai().x,2/t.ai().y]),i.ZR(s,e).Zm(n)}},fp={AG:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aPos_highpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t);const i=n("aPos_lowpart");o.vertexAttribPointer(i,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(i)}else{const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},gG:(t,i,s,e,h,r)=>{const n=t.gl;n.bindBuffer(n.ARRAY_BUFFER,s),n.vertexAttribPointer(e,h,n.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),n.enableVertexAttribArray(e)},pG:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),!t){const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},yG:(t,i)=>{const s=t.aN();s.Zm(s.gl.LINE_STRIP,i,0)},SG:(t,i)=>{const s=t.aN();s.Zm(s.gl.LINES,2*i,0)}};class Ap extends fr{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.lE=new Zg,this.Ha=Li,this.gN=PA({lineStyleSolid:()=>Js(this.uu)&&this.uu,lineStyleDashed:()=>hn(this.uu)&&this.uu,strokeFillSolid:()=>{const t=this.uu.getFillStyle();return W(t)&&t},strokeFillLinearGradient:()=>{const t=this.uu.getFillStyle();return et(t)&&t},strokeFillRadialGradient:()=>{const t=this.uu.getFillStyle();return tt(t)&&t},strokeFillPaletted:()=>{const t=this.uu.getFillStyle();return $(t)&&t}}),this.nN=t,this.oN=i,this.pN=r,this.mN=n,this.ER=t.aN(),this.vG=this.ER.hO}Ds(){const t=this.na(),i=this.uu,s=this.gN.lineStyleSolid(t),e=this.gN.lineStyleDashed(t),h=s||e,r=this.gN.strokeFillSolid(t),n=this.gN.strokeFillLinearGradient(t),o=this.gN.strokeFillRadialGradient(t),a=this.gN.strokeFillPaletted(t),u=r||n||o||a&&["x","y"].includes(a.getLookUpProperty())&&a,c=this.Pi(),d=this.Fi(),f=this.Lo._(),g=this.Lo.o,p=i.O();if(e&&this.ft instanceof Rs)return xt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.lE.mV(this.ft),this.gu&&(this.xG=this.ER.oV(Qt([c,d],this.ft.wi()),!1,this.xG),this.Ha=A(l(c.x,c.y),l(d.x,d.y))),t||g){const t=this.ha()&&h&&u&&p>0,i=n?["gradient",n]:o?["gradient",o]:a?["lookup",a.getLookUpProperty(),a.lut]:"uniform";this.bG=t?{type:"triangulated",shader:this.ER.az(ng["2D"],ng.Color({dataType:i}),ng.LineInstanced2D({axisWorldTranslation:IA(this.ft),normalSource:void 0}),this.vG?ng.AliasedEdge:void 0,e&&ng.StippleTextureInstanced),mousePickingShader:f?this.ER.az(ng["2D"],ng.MousePicking,ng.LineInstanced2D({axisWorldTranslation:IA(this.ft),normalSource:void 0}),e&&ng.StippleTextureInstanced):void 0,geometry:cp(this.ER,p),thickness:p,lineStyleSolid:s,lineStyleDashed:e,fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a}:void 0}if(o?this.LN=zg(Hh(this.Ha,{x:this.xl(),y:this.bl()},this.ft),this.ft,o.getPosition(),o.getExtent(),o.getShape(),this.ER.Xz()):n?this.RN=Vg(Hh(this.Ha,{x:this.xl(),y:this.bl()},this.ft),this.ft,n.getAngle(!0),this.ER.Xz()):(this.LN=void 0,this.RN=void 0),e){if(t||this.gu){const t=[0,0,Math.abs(d.x-c.x),Math.abs(d.y-c.y)];this.MG=this.ER.oV(t,!1,this.MG)}this._G=this.ER.PO(e.getPattern())}else this.MG&&(this.ER.yV(this.MG),this.MG=void 0),this._G=void 0;return this.Au(i),this.gu=!1,this.Lo.o=!1,this}VL(t){var i,s;const e=this.xG;if(!e)return this;const h=this.bG;if(!h)return this;const{fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a,lineStyleDashed:l,thickness:u}=h,c=1===t?null===(i=this.bG)||void 0===i?void 0:i.mousePickingShader:null===(s=this.bG)||void 0===s?void 0:s.shader;return c?(this.ER.ZR(c).lV(c,((i,s,c,d)=>{if(this.ER.fV(i("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0),this.ft instanceof Ls||this.ft instanceof qc?this.ER.cV(i("uScale"),this.lE.AV()).cV(i("uDisp"),this.lE.gV()).cV(d("uScaleStart_highpart"),this.lE.OO()).cV(d("uScaleStart_lowpart"),this.lE.NO()):this.ft instanceof Rs&&this.ER.cV(d("uScaleStart"),this.lE.MixedScaleXY.uScaleStart).cV(d("uScaleStartLog"),this.lE.MixedScaleXY.uScaleStartLog).cV(d("uScaleInterval"),this.lE.MixedScaleXY.uScaleInterval).cV(d("uScaleIntervalLog"),this.lE.MixedScaleXY.uScaleIntervalLog).cV(i("uViewportStart"),this.lE.MixedScaleXY.uViewportStart).cV(i("uViewportSize"),this.lE.MixedScaleXY.uViewportSize),1===t)this.ER.gR(i("uColor"),this.mN);else if(r)this.ER.gR(i("uColor"),r.getColor());else if(o){if(!this.LN)return!1;this.ER.mO(c,this.LN,o)}else if(n){if(!this.RN)return!1;this.ER.yO(c,this.RN,n)}else if(a){const t=DA(a,this,void 0);if(!t&&a.lut.percentageValues)return!1;this.ER.RO(c,a.lut,t)}if(l){if(!this.MG||!this._G)return!1;dp.gG(this.ER,c,this.MG,s("aLengthSoFarA"),s("aLengthSoFarB"),2,0),this.ER.cV(i("uStippleCount"),[this.cs.ai().x/this._G.LO,this.cs.ai().y/this._G.LO]).fV(d("uStippleTextureWidthLimiter"),this._G.BO/this._G.LO).fV(i("uStippleScale"),l.getPatternScale()).dV(i("uStippleTexture"),this._G.DO,1)}return dp.AG(this.ft.wi(),this.ER,e,c,this.ft.wi()?4:2,0),dp.VL(this.nN,h.geometry,c,this.vG&&1!==t,1===t,u,1),!0})),this):this}uN(t){return this.pN===t&&{}}dispose(){return super.dispose(),this.bG=void 0,this.xG&&(this.ER.yV(this.xG),this.xG=void 0),this.MG&&(this.ER.yV(this.MG),this.MG=void 0),this._G=void 0,this}OR(){return this}bt(){return this.Ha.max.x}xt(){return this.Ha.min.x}_t(){return this.Ha.max.y}Mt(){return this.Ha.min.y}xl(){return _i(this.uu)}bl(){return _i(this.uu)}}class gp extends Ar{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.wG=[],this.CG=!1,this.kG=!1,this.TG=!1,this.FG=!1,this.lE=new Zg,this.Ha=Li,this.gN=PA({lineStyleSolid:()=>Js(this.uu)&&this.uu,lineStyleDashed:()=>hn(this.uu)&&this.uu,lineFillSolid:()=>{const t=this.uu.getFillStyle();return W(t)&&t},lineFillRadialGradient:()=>{const t=this.uu.getFillStyle();return tt(t)&&t},lineFillLinearGradient:()=>{const t=this.uu.getFillStyle();return et(t)&&t},lineIndividualPointFill:()=>{const t=this.uu.getFillStyle();return Y(t)&&t}}),this.nN=t,this.oN=i,this.IG=r,this.ER=t.aN(),this.vG=this.ER.hO,this.PG=t.Yn.Zn;const{color:n,id:o}=this.IG();this.mN=n,this.pN=o}Vr(){const t=this.mu?void 0:this.IG(),i={ys:t=>this.DG(i,t),ds:t=>this.BG(i,t),zg:(t,s)=>this.LG(i,t,s),gR:t=>this.EG(i,t),Di:{x:0,y:0},Ii:{x:0,y:0},Vo:0,zG:void 0,pN:null==t?void 0:t.id,mN:null==t?void 0:t.color};return this.wG.push(i),i}Gt(){var t;return this.wG.length=0,this.CG=!0,this.Zi&&this.Fn&&(null===(t=this.cs.kn)||void 0===t?void 0:t.entity)===this&&this.Fn(this,void 0,this.cs.kn.collectionMember),this}VG(){return this.wG.length}_(t){const i=this.wG[t];return[i.Di,i.Ii]}py(){return this.wG}bd(t){var i;const s=this.wG.indexOf(t);s>=0&&(this.wG.splice(s,1),this.CG=!0,this.Zi&&this.Fn&&(null===(i=this.cs.kn)||void 0===i?void 0:i.entity)===this&&this.Fn(this,void 0,this.cs.kn.collectionMember))}DG(t,i){if(i&&!this.wG.includes(t))this.wG.push(t);else if(!i){const i=this.wG.indexOf(t);this.wG.splice(i,1)}return this.TG=!0,t}BG(t,i){return t.Vo=i,this.kG=!0,t}LG(t,i,s){return t.Di=i,t.Ii=s,this.CG=!0,t}EG(t,i){return t.zG=i,this.FG=!0,t}Ds(){const t=this.Lo._(),i=this.Lo.o,s=this.na(),e=this.uu,h=this.wG,r=this.kG,n=this.CG,o=this.TG,a=this.FG,l=this.gN.lineStyleSolid(s),u=this.gN.lineStyleDashed(s),c=l||u,d=this.gN.lineFillSolid(s),f=this.gN.lineIndividualPointFill(s),A=this.gN.lineFillRadialGradient(s),g=this.gN.lineFillLinearGradient(s),p=d||f||g||A,m=e.O(),y=u?"triangulated":e.getThickness()<0?"primitive":"triangulated";if(u&&this.ft instanceof Rs)return xt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.lE.mV(this.ft);const S=n||o;if(S){const t=[];for(let i=0;i<h.length;i+=1){const s=h[i];t.push(s.Di),t.push(s.Ii)}this.xG=this.ER.oV(Qt(t,this.ft.wi()),!1,this.xG),this.Ha=ji(t)}if(s||i){const i=d?"uniform":f?"attribute":g?["gradient",g]:A?["gradient",A]:void 0,s=c&&p&&m>0&&i;this.bG=s?"triangulated"===y?{type:"triangulated",shader:this.ER.az(ng["2D"],ng.Color({dataType:i}),ng.LineInstanced2D({axisWorldTranslation:IA(this.ft),normalSource:void 0,snapToNearestPixel:this.PG,ensureMinimumSegmentLength:void 0!==this.pu}),this.vG?ng.AliasedEdge:void 0,u&&ng.StippleTextureInstanced,ng.AttributeHighlight),mousePicking:t?{shader:this.ER.az(ng["2D"],this.mu?ng.MousePicking:ng.MousePickingAttribute,ng.LineInstanced2D({axisWorldTranslation:IA(this.ft),normalSource:void 0,snapToNearestPixel:this.PG,ensureMinimumSegmentLength:void 0!==this.pu}),u&&ng.StippleTextureInstanced,ng.AttributeHighlight)}:void 0,geometry:cp(this.ER,m,!1),thickness:m,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:d,fillStyleIndividual:f,fillStyleLinearGradient:g,fillStyleRadialGradient:A}:{type:"primitive",shader:this.ER.az(ng["2D"],ng.Color({dataType:i}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0,snapToNearestPixel:this.PG}),ng.AttributeHighlight),mousePicking:t?{shader:this.ER.az(ng["2D"],this.mu?ng.MousePicking:ng.MousePickingAttribute,ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0,snapToNearestPixel:this.PG}),ng.AttributeHighlight)}:void 0,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:d,fillStyleIndividual:f,fillStyleLinearGradient:g,fillStyleRadialGradient:A}:void 0}if(u){if(s||S){const t=new Float32Array(4*h.length);let i=0;for(let s=0;s<h.length;s+=1){const e=h[s].Di,r=h[s].Ii;t[i]=0,t[i+1]=0,t[i+2]=Math.abs(r.x-e.x),t[i+3]=Math.abs(r.y-e.y),i+=4}this.MG=this.ER.oV(t,!1,this.MG)}this._G=this.ER.PO(u.getPattern())}else this.MG&&(this.ER.yV(this.MG),this.MG=void 0),this._G=void 0;if(S||r)if("triangulated"===y){const t=new Float32Array(h.length);let i=0;h.forEach((s=>{t[i]=s.Vo,i+=1})),this.OG=this.ER.oV(t,!0,this.OG)}else{const t=new Float32Array(2*h.length);let i=0;h.forEach((s=>{for(let e=i;e<i+2;e+=2)t[e]=s.Vo,t[e+1]=s.Vo;i+=2})),this.OG=this.ER.oV(t,!1,this.OG)}if(f)if(a||S||s)if("triangulated"===y){const t=new Float32Array(4*h.length);let i=0;h.forEach((s=>{const e=s.zG||f.color;t[i]=e.r,t[i+1]=e.g,t[i+2]=e.b,t[i+3]=e.a,i+=4})),this.NG=this.ER.oV(t,!1,this.NG)}else{const t=new Float32Array(8*h.length);let i=0;h.forEach((s=>{const e=s.zG||f.color;for(let s=i;s<i+8;s+=4)t[s]=e.r,t[s+1]=e.g,t[s+2]=e.b,t[s+3]=e.a;i+=8})),this.NG=this.ER.oV(t,!1,this.NG)}else this.NG&&(this.ER.yV(this.NG),this.NG=void 0);if(t&&!this.mu){if(S)if("triangulated"===y){const t=new Float32Array(4*h.length);let i=0;h.forEach((s=>{var e,h,r,n;t[i+0]=(null===(e=s.mN)||void 0===e?void 0:e.r)||0,t[i+1]=(null===(h=s.mN)||void 0===h?void 0:h.g)||0,t[i+2]=(null===(r=s.mN)||void 0===r?void 0:r.b)||0,t[i+3]=(null===(n=s.mN)||void 0===n?void 0:n.a)||0,i+=4})),this.GG=this.ER.oV(t,!0,this.GG)}else{const t=new Float32Array(8*h.length);let i=0;h.forEach((s=>{var e,h,r,n;for(let o=i;o<i+4;o+=4)t[i+0]=(null===(e=s.mN)||void 0===e?void 0:e.r)||0,t[i+1]=(null===(h=s.mN)||void 0===h?void 0:h.g)||0,t[i+2]=(null===(r=s.mN)||void 0===r?void 0:r.b)||0,t[i+3]=(null===(n=s.mN)||void 0===n?void 0:n.a)||0;i+=8})),this.GG=this.ER.oV(t,!1,this.GG)}}else this.GG&&(this.ER.yV(this.GG),this.GG=void 0);return A?this._N=zg(this.zo||this.Ha,this.ft,A.getPosition(),A.getExtent(),A.getShape(),this.ER.Xz()):g?this.wN=Vg(this.zo||this.Ha,this.ft,g.getAngle(!0),this.ER.Xz()):(this._N=void 0,this.wN=void 0),this.Au(e),this.kG=!1,this.TG=!1,this.CG=!1,this.FG=!1,this.Lo.o=!1,this}VL(t){var i;const s=this.xG,e=this.OG,h=this.GG;if(!s||!e)return this;const r=this.bG;if(!r)return this;const{type:n,fillStyleSolid:o,fillStyleIndividual:a,fillStyleLinearGradient:l,fillStyleRadialGradient:u,lineStyleDashed:c}=r,d=1===t?null===(i=r.mousePicking)||void 0===i?void 0:i.shader:r.shader;return d?(this.ER.ZR(d).lV(d,((i,d,f,A)=>{if(this.ft instanceof Ls||this.ft instanceof qc?this.ER.cV(i("uScale"),this.lE.AV()).cV(i("uDisp"),this.lE.gV()).cV(A("uScaleStart_highpart"),this.lE.OO()).cV(A("uScaleStart_lowpart"),this.lE.NO()):this.ft instanceof Rs&&this.ER.cV(A("uScaleStart"),this.lE.MixedScaleXY.uScaleStart).cV(A("uScaleStartLog"),this.lE.MixedScaleXY.uScaleStartLog).cV(A("uScaleInterval"),this.lE.MixedScaleXY.uScaleInterval).cV(A("uScaleIntervalLog"),this.lE.MixedScaleXY.uScaleIntervalLog).cV(i("uViewportStart"),this.lE.MixedScaleXY.uViewportStart).cV(i("uViewportSize"),this.lE.MixedScaleXY.uViewportSize),this.PG&&this.ER.cV(A("uViewportSizePx"),[this.cs.ai().x*this.ER.Xz(),this.cs.ai().y*this.ER.Xz()]),void 0!==this.pu&&this.ER.cV(i("uMinSegmentPixelVector"),[this.pu.x,this.pu.y]),this.ER.gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0),1===t)if(this.mu)this.ER.gR(i("uColor"),this.mN);else{if(!h)return!1;"triangulated"===n?this.ER.uV(h,1,{location:d("aColor"),size:4}):this.ER.$V(d("aColor"),h)}else if(o)this.ER.gR(i("uColor"),o.getColor());else if(a){if(!this.NG)return!1;this.ER.uV(this.NG,"triangulated"===n?1:void 0,{location:d("aColor"),size:4})}else if(u){if(!this._N)return!1;this.ER.mO(f,this._N,u)}else if(l){if(!this.wN)return!1;this.ER.yO(f,this.wN,l)}if(c){if(!this.MG||!this._G)return!1;dp.mG(this.ER,f,this.MG,d("aLengthSoFarA"),d("aLengthSoFarB"),2,0),this.ER.cV(i("uStippleCount"),[this.cs.ai().x/this._G.LO,this.cs.ai().y/this._G.LO]).fV(A("uStippleTextureWidthLimiter"),this._G.BO/this._G.LO).fV(i("uStippleScale"),c.getPatternScale()).dV(i("uStippleTexture"),this._G.DO,0)}if("triangulated"===n){const{geometry:i,thickness:h}=r;dp.pG(this.ft.wi(),this.ER,s,f,this.ft.wi()?4:2,0),this.ER.uV(e,1,{location:d("aIsHighlighted"),size:1}),dp.VL(this.nN,i,f,this.vG&&1!==t,1===t,h,this.wG.length)}else fp.pG(this.ft.wi(),this.ER,s,f,this.ft.wi()?4:2,0),this.ER.XV(d("aIsHighlighted"),e),fp.SG(this.nN,this.wG.length);return!0})),this):this}uN(t){if(t===this.pN)return{};const i=this.wG.find((i=>i.pN===t));return!!i&&{collectionMember:i}}dispose(){return super.dispose(),this.bG=void 0,this.xG&&(this.ER.yV(this.xG),this.xG=void 0),this.MG&&(this.ER.yV(this.MG),this.MG=void 0),this.OG&&(this.ER.yV(this.OG),this.OG=void 0),this.GG&&(this.ER.yV(this.GG),this.GG=void 0),this.NG&&(this.ER.yV(this.NG),this.NG=void 0),this._G=void 0,this}OR(){return this}ds(t){super.ds(t);for(const i of this.wG)i.ds(t);return this}bt(){return this.Ha.max.x}xt(){return this.Ha.min.x}_t(){return this.Ha.max.y}Mt(){return this.Ha.min.y}xl(){return _i(this.uu)}bl(){return _i(this.uu)}}class pp{constructor(t,i){this.WG=!1,this.UG=!1,this.YG=!1,this.ft=t,this.HG=i,this.HG.Yo("DataPattern",(t=>{"ProgressiveX"!==t.pattern&&"RegressiveX"!==t.pattern||(this.WG="x"),"ProgressiveY"!==t.pattern&&"RegressiveY"!==t.pattern||(this.WG="y"),"RegressiveX"!==t.pattern&&"RegressiveY"!==t.pattern||(this.UG=!0),!0===t.regularProgressiveStep&&(this.YG=!0)}))}calculateUserDataPointsProgressiveRange(t){if(0===t.length)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:"x"===this.WG?t[0].x:t[0].y,end:"x"===this.WG?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.WG?"x"===this.WG?function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].x,t[0].x),e=Math.min(t[i-1].x,t[0].x);let h=t[0].y,r=t[0].y;for(let s=0;s<i;s+=1){const i=t[s];i.y>h&&(h=i.y),i.y<r&&(r=i.y)}return A(l(e,r),l(s,h))}return Li}(t):function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].y,t[0].y),e=Math.min(t[i-1].y,t[0].y);let h=t[0].x,r=t[0].x;for(let s=0;s<i;s+=1){const i=t[s];i.x>h&&(h=i.x),i.x<r&&(r=i.x)}return A(l(r,e),l(h,s))}return Li}(t):ji(t)}calculateAvgStepBetweenDataPoints(t,i,s){return Math.abs(t-i)/(s-1)}}const mp=Math.min(1,1.5);class yp extends pp{constructor(t,i,s){super(t,i),this.$G=!1,this.XG={enabled:!1,totalDataPointsAtTime:0},this.jG=[],this.vs=s,this.ZG=t instanceof Ls?{type:"linear",scale:t}:t instanceof Rs?{type:"mixed",scale:t}:{type:"unknown"},this.HG.Yo("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.$G=!0)}))}QG(t,i=!1){if(this.$G||!this.WG||"linear"!==this.ZG.type)return!1;!1===i&&this.JG&&(clearTimeout(this.JG),this.JG=void 0);const s="x"===this.WG?this.ZG.scale.x.sg:this.ZG.scale.y.sg;if(!s)throw new Error("CP helper has no information about Axis state.");const e=t.length;if(e<2)return!1;const h=t[0],r=t[e-1],n=this.calculateAvgStepBetweenDataPoints("x"===this.WG?h.x:h.y,"x"===this.WG?r.x:r.y,e),o=this.ZG.scale,a=Math.abs("x"===this.WG?o.Ui().x:o.Ui().y),l=a/n,u=Math.floor(l*mp),c=u*n,d=xt.performance.now(),f=!(d-s.lh<500)&&(s.sh?d-s.ah<1e3:d-s.eh<2e3||s.rh),A=e>2*this.XG.totalDataPointsAtTime;if(f&&!A)return this.JG=setTimeout((()=>this.KG(t)),1e3),!1;const g=u>=10,p=this.XG.enabled?this.XG.columnWidthAxis/a<1.5:void 0,m=this.XG.enabled&&u>this.XG.dataPointsPerColumn?u/this.XG.dataPointsPerColumn>=2:void 0;let y;!0===this.XG.enabled?p?m&&(y={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}):y=g?{enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}:{enabled:!1,totalDataPointsAtTime:e}:g&&(y={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e});const S=!1===i;return y?(S&&(this.XG=y),!0):(S&&(this.XG={...this.XG,totalDataPointsAtTime:e}),!1)}Zp(){this.qG=void 0,this.jG.length=0,this.JG&&(clearTimeout(this.JG),this.JG=void 0)}tW(t){if(0===t.length)return t;if(this.$G||!this.WG||"linear"!==this.ZG.type||!this.XG.enabled)return t;let i;i=this.jG.length>0?hi(this.jG,t,{canReturnB:!0}):t;const s=i.length,e=[];let h,r,n=void 0===this.qG,o=-1,a=-1,l=0,u=0;if("x"!==this.WG||this.UG)if("x"===this.WG&&this.UG){const t=this.XG.columnWidthAxis;let c=this.qG?this.qG.x:i[0].x,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.x>=d?((!h||s.y>h.y)&&(h=s,o=f),(!r||s.y<r.y)&&(r=s,a=f),u=f):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,d=c-t,h=s,o=f,r=s,a=f,l=f,u=f)}}else if("y"!==this.WG||this.UG){if("y"===this.WG&&this.UG){const t=this.XG.columnWidthAxis;let c=this.qG?this.qG.y:i[0].y,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.y>=d?((!h||s.x>h.x)&&(h=s,o=f),(!r||s.x<r.x)&&(r=s,a=f),u=f):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,d=c-t,h=s,o=f,r=s,a=f,l=f,u=f)}}}else{const t=this.XG.columnWidthAxis;let c=this.qG?this.qG.y:i[0].y,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.y<=d?((!h||s.x>h.x)&&(h=s,o=f),(!r||s.x<r.x)&&(r=s,a=f),u=f):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,d=c+t,h=s,o=f,r=s,a=f,l=f,u=f)}}else{const t=this.XG.columnWidthAxis;let c=this.qG?this.qG.x:i[0].x,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.x<=d?((!h||s.y>h.y)&&(h=s,o=f),(!r||s.y<r.y)&&(r=s,a=f),u=f):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,d=c+t,h=s,o=f,r=s,a=f,l=f,u=f)}}if(h||r){const t=i.slice(l,u+1);this.jG=t}else this.jG.length=0;const c=e.length;return c>0&&(this.qG=e[c-1]),e}iW(t){if(this.WG&&"linear"===this.ZG.type){const i="x"===this.WG?this.ZG.scale.x.sg:this.ZG.scale.y.sg;if(!i)throw new Error("CP helper has no information about Axis state.");if(i.Ke===ze.progressive||i.Ke===ze.regressive){const i=Math.abs("x"===this.WG?this.ZG.scale.x.getInnerInterval():this.ZG.scale.y.getInnerInterval());if(this.XG.enabled)return 2*i/this.XG.columnWidthAxis;const s=t.length,e=t[0],h=t[s-1];return i/this.calculateAvgStepBetweenDataPoints("x"===this.WG?e.x:e.y,"x"===this.WG?h.x:h.y,s)}}}sW(t,i,s){if(!this.WG)return i;const e=s.length;let h=Vh(s,t.min,this.WG,this.UG,0,e-1);void 0===h&&(h=this.UG?e-1:0);let r=Vh(s,t.max,this.WG,this.UG,0,e-1);return void 0===r&&(r=this.UG?0:e-1),1+Math.abs(r-h)}eW(){this.JG&&(clearTimeout(this.JG),this.JG=void 0)}KG(t){this.QG(t,!0)&&this.vs()}}class Sp extends pp{renderVisibleOnly(t,i){const s=this.ft.x.getInnerStart(),e=this.ft.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.ft.y.getInnerStart(),o=this.ft.y.getInnerEnd(),a=Math.min(n,o),l=Math.max(n,o);t.forEach(((t,s)=>{t.existingCoordinatesCount<=1||t.boundaries.max.x<h||t.boundaries.min.x>r||t.boundaries.max.y<a||t.boundaries.min.y>l||i(t)}))}}class vp{constructor(t,i,s){this.hW=i,this.rW=s,this.nW=t,this.oW=[]}aW(t,i,s,e){const h=t.length;if(0===h)return;let r=t,n=h,o=this.nW[this.nW.length-1];do{const t=this.nW.length;let h;o||(o=this.lW(i,n)),o&&0==o.allocatedCoordinatesCount-o.existingCoordinatesCount&&(o=void 0);let a=0;if(this.rW&&t>0&&(void 0===o||0===o.existingCoordinatesCount)){const i=this.nW[t-1].lastDataPoint;i?(r.splice(0,0,i),a=1,n+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(o)h=Math.min(n,o.allocatedCoordinatesCount-o.existingCoordinatesCount),e(o,r.slice(0,h),h,a);else{const t=Math.ceil(i)+a;h=Math.min(t,n);const e={...s(t,r.slice(0,h),h,a),isDropped:!1};this.nW.push(e)}h>0&&(n>h?(r=r.slice(h),n=r.length):(r=[],n=0))}while(n>0);this.uW()}cW(t){const i=t,s=this.nW.indexOf(i);s>=0&&this.nW.splice(s,1),i.droppedTimestamp=xt.performance.now(),this.oW.push(i)}dW(){this.nW.slice().forEach((t=>this.cW(t)))}fW(){this.nW.forEach((t=>this.hW(t))),this.oW.forEach((t=>this.hW(t))),this.nW.length=0,this.oW.length=0}lW(t,i){const s=2*t/3,e=4*t/3,h=this.oW.findIndex((t=>t.allocatedCoordinatesCount>=s&&t.allocatedCoordinatesCount<=e));if(h>=0){const t=this.oW[h];return this.oW.splice(h,1),this.nW.push(t),t}}uW(){if(this.oW.length>5){const t=xt.performance.now();for(let i=0;i<this.oW.length-5;i+=1){const s=this.oW[i];(void 0===s.droppedTimestamp||t-s.droppedTimestamp>=1e4)&&(this.hW(s),this.oW.splice(i,1),i-=1)}}}}class xp extends pp{AW(t,i){if(!i||"object"!=typeof i)return 0;const s=this.ft.x.getInnerStart(),e=this.ft.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.ft.y.getInnerStart(),o=this.ft.y.getInnerEnd(),a=Math.min(n,o),l=Math.max(n,o);if("maxDataPointCount"in i)return this.gW(t,i.maxDataPointCount,h,r,a,l);if("minDataPointCount"in i)return this.pW(t,i.minDataPointCount,h,r,a,l);if("progressiveDataCleaningThreshold"in i)return this.mW(t,i.progressiveDataCleaningThreshold,h,r,a,l);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(i)}`)}gW(t,i,s,e,h,r){if(void 0===i||i<=0)return 0;const n=t.reduce(((t,i)=>t+i.existingDataPointsCount),0);if(n<=i)return 0;let o=0,a=n;for(let s=0;s<t.length;s+=1){const e=t[s];a>i&&(o+=1,a-=e.existingDataPointsCount)}return o}mW(t,i,s,e,h,r){if(void 0===i||!this.WG)return 0;let n=0;for(let o=0;o<t.length;o+=1){const a=t[o],l=this.UG?"x"===this.WG?a.boundaries.min.x>e:a.boundaries.min.y>r:"x"===this.WG?a.boundaries.max.x<s:a.boundaries.max.y<h;if(!((this.UG?"x"===this.WG?a.boundaries.min.x>i:a.boundaries.min.y>i:"x"===this.WG?a.boundaries.max.x<i:a.boundaries.max.y<i)&&l&&a.existingCoordinatesCount>2))break;n+=1}return n}pW(t,i,s,e,h,r){if(void 0===i||0===i)return 0;let n=0,o=0;for(let a=t.length-1;a>=0;a-=1){const l=t[a];if(o>i)if(this.WG){if(this.UG?"x"===this.WG?l.boundaries.min.x>e:l.boundaries.min.y>r:"x"===this.WG?l.boundaries.max.x<s:l.boundaries.max.y<h){n=1+a;break}}else l.boundaries.max.x<s||l.boundaries.min.x>e||l.boundaries.max.y<h||l.boundaries.min.y>r?n+=1:n=0;o+=l.existingDataPointsCount}return n}yW(t,i){const s=t.reduce(((t,i)=>Qi(t,i.boundaries)),Li);if(i&&"progressiveDataCleaningThreshold"in i&&i.progressiveDataCleaningThreshold){const t=i.progressiveDataCleaningThreshold;"x"!==this.WG||this.UG?"x"===this.WG&&this.UG?s.max.x=Math.min(s.max.x,t):"y"!==this.WG||this.UG?"y"===this.WG&&this.UG&&(s.max.y=Math.min(s.max.y,t)):s.min.y=Math.max(s.min.y,t):s.min.x=Math.max(s.min.x,t)}return s}}class bp extends gr{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h),this.lE=new Zg,this.JM=[],this.SW=new Sp(this.ft,this),this.vW=new yp(this.ft,this,(()=>this.cs.vs())),this.xW=new vp(this.JM,(t=>{t.coordsBuffer&&this.ER.yV(t.coordsBuffer),t.MG&&this.ER.yV(t.MG)}),!0),this.bW=new xp(this.ft,this),this.MW=0,this._W=0,this.wW=!1,this.gN=PA({lineStyleSolid:()=>Js(this.uu)&&this.uu,lineStyleDashed:()=>hn(this.uu)&&this.uu,strokeFillSolid:()=>{const t=this.uu.getFillStyle();return W(t)&&t},strokeFillLinearGradient:()=>{const t=this.uu.getFillStyle();return et(t)&&t},strokeFillRadialGradient:()=>{const t=this.uu.getFillStyle();return tt(t)&&t},strokeFillPaletted:()=>{const t=this.uu.getFillStyle();return $(t)&&t}}),this.oN=i,this.pN=r,this.mN=n,this.Yn=o,this.bG={type:"none"},this.ER=t.aN(),this.nN=t,this.vG=this.ER.hO;const a=this.ft.wi(),l=!0===(null==o?void 0:o.individualLookupValuesEnabled);let u,c,d,f=0;a||(u=f,f+=2),a&&(c=f,f+=4),l&&(d=f,f+=1);const A=((t,i)=>i?(i,s)=>((t,i)=>{if(!i){const i=t.length,s=new Float32Array(3*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=void 0!==i.value?i.value:0,h+=3}return s}const s=t.length,e=new Float32Array(5*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,e[h+4]=void 0!==s.value?s.value:0,h+=5}return e})(i,t):(i,s)=>Qt(i,t))(a,l);this.kW={individualLookupValuesEnabled:l,attributesPerVertex:f,attributeOffsetCoordinateLowPrecision:u,attributeOffsetCoordinateHighPrecision:c,attributeOffsetLookUpValue:d,prepareRenderData:(t,i)=>A(t,this.uu.getFillStyle())}}TW(t,i,s){const e=new Float32Array(2*i);let h=0,r=s||t[0];for(let s=0;s<i;s+=1){const i=t[s];this.MW+=Math.abs(r.x-i.x),this._W+=Math.abs(r.y-i.y),e[h]=this.MW,e[h+1]=this._W,h+=2,r=i}return e}Ds(){const t=this.Ja,i=this.uu,s=this.na(),e=this.Xa,h=e.length,r=h>0,n=this.Lo._(),o=this.Lo.o,a=this.gN.lineStyleSolid(s),l=this.gN.lineStyleDashed(s),u=a||l,c=u&&u.getThickness(),d=this.gN.strokeFillSolid(s),f=this.gN.strokeFillLinearGradient(s),A=this.gN.strokeFillRadialGradient(s),g=this.gN.strokeFillPaletted(s),p=d||f||A||g,m=this.kW.individualLookupValuesEnabled;if(l&&this.ft instanceof Rs)return xt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;r&&(this.yu=hi(this.yu,e,{canReturnB:!0}),this.$a+=h);let y=this.Su.o;const S=this.bW.AW(this.JM,this.Su._());if(S>0){let t=0;for(let i=0;i<S;i+=1){const i=this.JM[0];t+=i.existingDataPointsCount,i.existingDataPointsCount=0,i.existingCoordinatesCount=0,i.jointPointsCount=0,i.boundaries=Li,i.lastDataPoint=void 0,this.xW.cW(i)}this.yu=this.yu.slice(t),this.$a=this.yu.length,y=!0}let v=e,x=!1;(this.vW.QG(this.yu)||t)&&(x=!0),l&&!this.wW?(x=!0,this.wW=!0,this.xW.fW()):!l&&this.wW&&(this.JM.forEach((t=>{t.MG&&(this.ER.yV(t.MG),t.MG=void 0)})),this.wW=!1),x&&(this.vW.Zp(),this.JM.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.jointPointsCount=0,t.boundaries=Li,t.lastDataPoint=void 0})),this.xW.dW(),v=this.yu,this.MW=0,this._W=0);const b=this.vW.tW(v),M=b.length;if(M>0){let t=this.vW.iW(this.yu)||(this.Yo("ApplicationType",(t=>"InternalUI"===t.type))?this.$a:1e5);M/t>10&&(t=M/10),this.xW.aW(b,t,((t,i,s,e)=>{const h=this.SW.calculateUserDataPointsBoundaries(i),r=this.vW.sW(h,s,this.yu)-e;return this.FW=i[s-1],{allocatedCoordinatesCount:t,existingDataPointsCount:r,existingCoordinatesCount:s,jointPointsCount:e,boundaries:h,coordsBuffer:this.ER.zV(t*this.kW.attributesPerVertex,this.kW.prepareRenderData(i,s)),lastDataPoint:i[s-1],MG:this.wW?this.ER.zV(2*t,this.TW(i,s,this.FW)):void 0}}),((t,i,s,e)=>{const h=Qi(t.boundaries,this.SW.calculateUserDataPointsBoundaries(i)),r=this.vW.sW(h,t.existingCoordinatesCount+s,this.yu)-(t.jointPointsCount+e);this.ER.VV(t.coordsBuffer,t.existingCoordinatesCount*this.kW.attributesPerVertex,this.kW.prepareRenderData(i,s)),this.wW&&t.MG&&this.ER.VV(t.MG,2*t.existingCoordinatesCount,this.TW(i,s,this.FW)),this.FW=i[s-1],t.jointPointsCount+=e,t.lastDataPoint=i[s-1],t.existingDataPointsCount=r,t.existingCoordinatesCount+=s,t.boundaries=h}))}if(y&&(this.Ha=this.bW.yW(this.JM,this.Su._())),this.lE.mV(this.ft),A?this.LN=zg(this.zo||this.Ha,this.ft,A.getPosition(),A.getExtent(),A.getShape(),this.ER.Xz()):f?this.RN=Vg(this.zo||this.Ha,this.ft,f.getAngle(!0),this.ER.Xz()):(this.LN=void 0,this.RN=void 0),s||o){if(g&&"value"===g.getLookUpProperty()&&!m){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw xt.alert(t),new Error(t)}if(p&&u&&!1!==c){const t=-1===c?"primitive":"triangulated",i=f?["gradient",f]:A?["gradient",A]:g?["lookup",g.getLookUpProperty(),g.lut]:"uniform";this.bG="primitive"===t?{type:t,shader:this.ER.az(ng["2D"],ng.Color({dataType:i}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0}),l&&ng.StippleTexture),mousePickingShader:n?this.ER.az(ng["2D"],ng.MousePicking,ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0}),l&&ng.StippleTexture):void 0,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:A,fillStylePaletted:g}:"triangulated"===t?{type:t,shader:this.ER.az(ng["2D"],ng.Color({dataType:i}),ng.LineInstanced2D({axisWorldTranslation:IA(this.ft),normalSource:void 0}),this.vG?ng.AliasedEdge:void 0,l&&ng.StippleTextureInstanced),mousePickingShader:n?this.ER.az(ng["2D"],ng.MousePicking,ng.LineInstanced2D({axisWorldTranslation:IA(this.ft),normalSource:void 0}),l&&ng.StippleTextureInstanced):void 0,geometry:cp(this.ER,c),thickness:c,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:A,fillStylePaletted:g}:{type:"none"}}else this.bG={type:"none"}}return this._G=l?this.ER.PO(l.getPattern()):void 0,this.Au(i),this.Ja=!1,this.Xa=[],this.Lo.o=!1,this.Su.o=!1,this}VL(t){const i=this.ER.gl,s=this.bG;if(!s||"none"===s.type)return this;const e=1===t?s.mousePickingShader:s.shader;if(!e)return this;const{lineStyleDashed:h,fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a}=s;return this.ER.ZR(e).lV(e,((e,l,u,c)=>{let d=!1;if(this.ER.fV(e("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(e("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(e("uRenderEffectMask"),2===t?1:0),this.ft instanceof Ls||this.ft instanceof qc?this.ER.cV(e("uScale"),this.lE.AV()).cV(e("uDisp"),this.lE.gV()).cV(c("uScaleStart_highpart"),this.lE.OO()).cV(c("uScaleStart_lowpart"),this.lE.NO()):this.ft instanceof Rs&&this.ER.cV(c("uScaleStart"),this.lE.MixedScaleXY.uScaleStart).cV(c("uScaleStartLog"),this.lE.MixedScaleXY.uScaleStartLog).cV(c("uScaleInterval"),this.lE.MixedScaleXY.uScaleInterval).cV(c("uScaleIntervalLog"),this.lE.MixedScaleXY.uScaleIntervalLog).cV(e("uViewportStart"),this.lE.MixedScaleXY.uViewportStart).cV(e("uViewportSize"),this.lE.MixedScaleXY.uViewportSize),1===t)this.ER.gR(e("uColor"),this.mN);else if(r)this.ER.gR(e("uColor"),r.getColor());else if(o){if(!this.LN)return!1;this.ER.mO(u,this.LN,o)}else if(n){if(!this.RN)return!1;this.ER.yO(u,this.RN,n)}else if(a){const t=DA(a,this,void 0);if(!t&&a.lut.percentageValues)return!1;this.ER.RO(u,a.lut,t)}return this.SW.renderVisibleOnly(this.JM,(r=>{const{coordsBuffer:n}=r;if(!n)return;i.bindBuffer(i.ARRAY_BUFFER,n);const o="triangulated"===s.type?dp.AG:fp.AG;if(this.ft.wi()||void 0===this.kW.attributeOffsetCoordinateLowPrecision?this.ft.wi()&&void 0!==this.kW.attributeOffsetCoordinateHighPrecision&&o(!0,this.ER,n,u,this.kW.attributesPerVertex,this.kW.attributeOffsetCoordinateHighPrecision):o(!1,this.ER,n,u,this.kW.attributesPerVertex,this.kW.attributeOffsetCoordinateLowPrecision),h){if(!r.MG||!this._G)return;"triangulated"===s.type?dp.gG(this.ER,u,r.MG,l("aLengthSoFarA"),l("aLengthSoFarB"),2,0):fp.gG(this.ER,u,r.MG,l("aLengthSoFar"),2,0),this.ER.cV(e("uStippleCount"),[this.cs.ai().x/this._G.LO,this.cs.ai().y/this._G.LO]).fV(c("uStippleTextureWidthLimiter"),this._G.BO/this._G.LO).fV(e("uStippleScale"),h.getPatternScale()).dV(e("uStippleTexture"),this._G.DO,1)}if(a&&"value"===a.lookUpProperty&&void 0!==this.kW.attributeOffsetLookUpValue&&1!==t)if("triangulated"===s.type){const t=l("aLookupValueA");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.kW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.kW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.ER.YV(t,1),i.enableVertexAttribArray(t);const s=l("aLookupValueB");i.vertexAttribPointer(s,1,i.FLOAT,!1,this.kW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.kW.attributeOffsetLookUpValue+this.kW.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.ER.YV(s,1),i.enableVertexAttribArray(s)}else{const t=l("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.kW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.kW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),i.enableVertexAttribArray(t)}if("triangulated"===s.type){const{thickness:i}=s;dp.VL(this.nN,s.geometry,u,this.vG&&1!==t,1===t,i,r.existingCoordinatesCount-1)}else fp.yG(this.nN,r.existingCoordinatesCount);d=!0})),i.bindBuffer(i.ARRAY_BUFFER,null),d})),this}uN(t){return this.pN===t&&{}}ol(t,i){return Array.isArray(t)||(t=[t]),this.Xa=hi(this.Xa,t,{canReturnB:!0}),this.Ha=Qi(this.Ha,i||i||this.SW.calculateUserDataPointsBoundaries(t)),this}Gt(){return super.Gt(),this.MW=0,this._W=0,this.FW=void 0,this}dispose(){return super.dispose(),this.xW.fW(),this.vW.eW(),this.bG={type:"none"},this._G=void 0,this}OR(){return this}Yb(t){this.ll()>0&&this.Ds();const i=this.il(),s=Lh(i,t,this.Qa,this.Il,this.Pl,this.ft,this.engine.ft,this.Ha,this.SW.WG,this.SW.UG);return void 0!==s?i[s]:void 0}ew(t){this.ll()>0&&this.Ds();const i=this.il(),s=i.length;if(0===s)return;const e=this.Il?1:0,h=s-(this.Pl?2:1);if(this.Qa===Dh.Nearest){let e,h,r=Di;for(let n=0;n<s;n+=1){const s=ct(i[n],this.ft,this.cs.ft);if(void 0!==h){const i=Wi(h,s,t),n=(i.x-t.x)**2+(i.y-t.y)**2;n<r&&(r=n,e=i)}h=s}return void 0!==e?ct(e,this.cs.ft,this.ft):void 0}if("x"===this.SW.WG&&this.Qa===Dh.NearestX||"y"===this.SW.WG&&this.Qa===Dh.NearestY){const s=Oh(i,ct(t,this.cs.ft,this.ft),this.SW.WG,this.SW.UG,e,h);return s?$i(i[s.a],i[s.b],s.lerpAmount):void 0}return this.Yb(t)}bt(){return this.Ha.max.x}xt(){return this.Ha.min.x}_t(){return this.Ha.max.y}Mt(){return this.Ha.min.y}xl(){return _i(this.uu)}bl(){return _i(this.uu)}}class Mp extends Og{constructor(t,i,s,e){super(t),this.fG=s,this.IW=i,this.PW=Qt(i,!1),this.DW=i.length,this.CR=t.oV(this.PW);const h=ji(this.IW);this.j=l(h.max.x-h.min.x,h.max.y-h.min.y),this.BW=e}LW(t){return t>1}Zm(t,i,s,e,h){return"object"==typeof e?i?this.ER.XV(t.attribute("aOffsetScale"),i,1).cV(t.uniform("uSizePixels"),[e.width,e.height]):this.ER.fV(t.uniform("uOffsetScale"),e.scale).cV(t.uniform("uSizePixels"),[e.width,e.height]):h?i?this.ER.XV(t.attribute("aOffsetPixels"),i,1):this.ER.fV(t.uniform("uOffsetPixels"),e):this.ER.fV(t.uniform("uPointSize"),e),h?this.ER.uV(this.CR,0,{location:t.attribute("aInstanceGeo"),size:2}).JV(this.fG,0,this.DW,s):this.ER.Zm(this.ER.gl.POINTS,s),this}Tz(){this.ER.yV(this.CR)}}const _p=(t,i=0)=>{const s=[l(-.5,-.5),l(.5,-.5),l(.5,.5),l(-.5,.5)];return new Mp(t,s,t.gl.TRIANGLE_FAN,i)},wp=(t,i=0)=>{const s=.05,e=[l(-.5,-.05),l(.5,-.05),l(.5,s),l(.5,s),l(-.5,s),l(-.5,-.05),l(-.05,-.5),l(s,-.5),l(s,.5),l(s,.5),l(-.05,.5),l(-.05,-.5)];return new Mp(t,e,t.gl.TRIANGLES,i)},Cp=(t,i,s)=>{if(on(t))return Cp(exports.PointShape.Square,i,s);let e=i.wV.xz.get(t);if(t===exports.PointShape.Circle){const t=s<=3?4:s<=5?8:s<=10?16:24;return e=i.wV.bz.get(t)||((t,i,s=0)=>{const e=function(t=25){return vd(l(0,0),0,360,.5,.5,t)[0]}(i);return new Mp(t,e,t.gl.TRIANGLE_FAN,s)})(i,t),i.wV.bz.set(t,e),e}if(!e){switch(t){case exports.PointShape.Triangle:e=((t,i=0)=>{const s=function(){const t=[],i=2/1.73205080757;return t.push(l(-i/2,.3333333333333333)),t.push(l(0,-.6666666666666666)),t.push(l(i/2,.3333333333333333)),t}();return new Mp(t,s,t.gl.TRIANGLES,i)})(i);break;case exports.PointShape.Square:e=_p(i);break;case exports.PointShape.Plus:e=wp(i);break;case exports.PointShape.Cross:e=wp(i,45);break;case exports.PointShape.Diamond:e=_p(i,45);break;case exports.PointShape.Arrow:e=((t,i=0)=>{const s=.05,e=[l(-.05,-.5),l(s,-.5),l(s,.45),l(s,.45),l(-.05,.45),l(-.05,-.5),l(-.5,0),l(-.4,0),l(0,.4),l(0,.4),l(0,.5),l(-.5,0),l(.5,0),l(.4,0),l(0,.4),l(0,.4),l(0,.5),l(.5,0)];return new Mp(t,e,t.gl.TRIANGLES,i)})(i);break;case exports.PointShape.Star:e=((t,i=0)=>new Mp(t,[{x:0,y:0},{x:0,y:.5},{x:.1,y:.1},{x:.5,y:.1},{x:.2,y:-.1},{x:.3,y:-.5},{x:0,y:-.25},{x:-.3,y:-.5},{x:-.2,y:-.1},{x:-.5,y:.1},{x:-.1,y:.1},{x:0,y:.5}],t.gl.TRIANGLE_FAN,i))(i);break;case exports.PointShape.Minus:e=((t,i=0)=>{const s=.05,e=[l(-.5,-.05),l(.5,-.05),l(.5,s),l(.5,s),l(-.5,s),l(-.5,-.05)];return new Mp(t,e,t.gl.TRIANGLES,i)})(i);break;default:return xi(0,"LightningChart JS unidentified point shape")}i.wV.xz.set(t,e)}return e};class kp extends tr{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.lE=new Zg,this.fN=A(u(Bi,Bi),u(Di,Di)),this.gN=PA({pointStyleSolid:()=>W(this.be)&&this.be,pointStyleRadialGradient:()=>tt(this.be)&&this.be,pointStyleLinearGradient:()=>et(this.be)&&this.be,pointStylePaletted:()=>$(this.be)&&this.be,pointStyleIndividual:()=>Y(this.be)&&this.be}),this.nN=t,this.oN=i,this.pN=r,this.mN=n,this.ER=t.aN()}Ds(){var t;const i=this.Lo._(),s=this.Lo.o,e=this.Xa,h=e.length,r=h>0,n=this.Ga._(),o=this.be,a=this.size._(),l=this.Ga.o||this.ga.o,u=this.ft.Gi(),c=this.size.o||this.Ga.o,d=this.Ja||e&&e.length>0,f=u||c,A=this.ia(),g=this.gN.pointStyleSolid(A),p=this.gN.pointStyleRadialGradient(A),m=this.gN.pointStyleLinearGradient(A),y=this.gN.pointStylePaletted(A),S=this.gN.pointStyleIndividual(A),v=g||p||m||y||S;if(r&&(this.Na=hi(this.Na,e,{canReturnB:!0}),this.$a+=h),r||this.Ja){this.Ha=this.Za?Qi(this.Ha,this.Za):Qi(this.Ha,ji(this.Na));const t=Qt(this.Na,this.ft.wi());this.RW=this.$a,this.EW=this.ER.oV(t,!1,this.EW)}this.lE.mV(this.ft),o!==z?f&&(this.zW&&(this.zW=void 0),a>1||this.Wa._()?a<=1&&!this.Wa._()?this.fG=this.ER.gl.POINTS:(this.zW=Cp(n,this.ER,this.Wa._()?25:a),this.fG=this.zW.fG):this.fG=this.ER.gl.POINTS):this.zW&&(this.zW=void 0);const x=(null===(t=this.zW)||void 0===t?void 0:t.BW)||0,b=this.ga._()+x;if(c||A||s||l){const t=this.Wa._()?"attribute":"uniform",s=a<=1&&ng.PointSize(t),e=ng.VertexLocation({offset:a>1?{dataType:t,sizeUnit:"px",symmetric:!0,rotation:(this.Ua._()||b%360!=0)&&{dataType:this.Ua._()?"attribute":"uniform"}}:void 0,axisWorldTranslation:IA(this.ft),normalSource:void 0});this.dE=v?this.ER.az(ng["2D"],s,e,g?ng.Color({dataType:"uniform"}):S?ng.Color({dataType:"attribute"}):y?ng.Color({dataType:["lookup",y.getLookUpProperty(),y.lut]}):p?ng.Color({dataType:["gradient",p]}):m?ng.Color({dataType:["gradient",m]}):void 0):void 0,this.zN=i&&v?this.ER.az(ng["2D"],s,e,ng.MousePicking):void 0}if(d||A){const t=this.Na.length;if(Y(o)&&this.RW&&this.RW>0){const i=o.getFallbackColor(),s=new Float32Array(4*t);for(let e=0;e<t;e+=1){const t=this.Na[e];t.color?(s[4*e+0]=t.color.r,s[4*e+1]=t.color.g,s[4*e+2]=t.color.b,s[4*e+3]=t.color.a):(s[4*e+0]=i.r,s[4*e+1]=i.g,s[4*e+2]=i.b,s[4*e+3]=i.a)}this.VW=this.ER.oV(s,!0,this.VW)}else this.VW&&this.ER.yV(this.VW),this.VW=void 0;if(this.Wa._()&&this.RW&&this.RW>0&&a>1){const i=new Float32Array(t);for(let s=0;s<t;s+=1){const t=this.Na[s];t.size?i[s]=t.size:i[s]=a}this.OW=this.ER.oV(i,!0,this.OW)}else this.OW&&(this.ER.yV(this.OW),this.OW=void 0);if(this.Ua._()&&this.RW&&this.RW>0&&a>1){const i=new Float32Array(2*t),s=fs(b),e=Math.sin(s),h=Math.cos(s);for(let s=0;s<t;s+=1){const t=this.Na[s];if(t.rotation){const e=fs(t.rotation+x);i[2*s+0]=Math.sin(e),i[2*s+1]=Math.cos(e)}else i[2*s+0]=e,i[2*s+1]=h}this.NW=this.ER.oV(i,!0,this.NW)}else this.NW&&(this.ER.yV(this.NW),this.NW=void 0);if(this.Ya._()&&this.RW&&this.RW>0){const i=new Float32Array(t);for(let s=0;s<t;s+=1){const t=this.Na[s];"value"in t&&void 0!==t.value&&null!==t.value?i[s]=t.value:i[s]=-34028234663852886e22}this.GW=this.ER.oV(i,!0,this.GW)}else this.GW&&(this.ER.yV(this.GW),this.GW=void 0);this.ra(this.be)}if(tt(o)?this._N=zg(Hh(this.zo||this.Ha,{x:this.xl(),y:this.bl()},this.ft),this.ft,o.getPosition(),o.getExtent(),o.getShape(),this.ER.Xz()):et(o)?this.wN=Vg(Hh(this.zo||this.Ha,{x:this.xl(),y:this.bl()},this.ft),this.ft,o.getAngle(!0),this.ER.Xz()):(this._N=void 0,this.wN=void 0),d&&(this.Ha&&d&&(this.fN=Hh(this.Ha,{x:a,y:a},this.ft)),this.Xa=[],this.ja=0,this.Za=Li),void 0===this.Ka&&y&&"value"===y.lookUpProperty&&y.lut.percentageValues){let t=Bi,i=Di;for(let s=0;s<this.Na.length;s+=1){const e=this.Na[s];void 0!==e.value&&e.value<i&&(i=e.value),void 0!==e.value&&e.value>t&&(t=e.value)}this.Ka={min:i,max:t}}return this.sa=o,this.Ga.o=!1,this.size.o=!1,this.ga.o=!1,this.Lo.o=!1,this.Ja=!1,this}VL(t){const i=1===t?this.zN:this.dE,s=this.EW,e=this.RW;return i&&s&&e&&(this.ER.ZR(i),this.ER.lV(i,((i,h,r,n)=>{var o;if(this.ft instanceof Ls||this.ft instanceof qc?this.ER.cV(i("uScale"),this.lE.AV()).cV(i("uDisp"),this.lE.gV()).cV(n("uScaleStart_highpart"),this.lE.OO()).cV(n("uScaleStart_lowpart"),this.lE.NO()):this.ft instanceof Rs&&this.ER.cV(n("uScaleStart"),this.lE.MixedScaleXY.uScaleStart).cV(n("uScaleStartLog"),this.lE.MixedScaleXY.uScaleStartLog).cV(n("uScaleInterval"),this.lE.MixedScaleXY.uScaleInterval).cV(n("uScaleIntervalLog"),this.lE.MixedScaleXY.uScaleIntervalLog).cV(i("uViewportStart"),this.lE.MixedScaleXY.uViewportStart).cV(i("uViewportSize"),this.lE.MixedScaleXY.uViewportSize),this.ER.xO(r,s,this.ft.wi(),this.zW?1:void 0).fV(i("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0).fV(n("uDevicePixelRatio"),this.ER.Xz()),this.zW){const t=h("aInstanceGeo");this.ER.WV(t,this.zW.CR).YV(t,0)}if(1===t)this.ER.gR(i("uColor"),this.mN);else if(W(this.be))this.ER.gR(i("uColor"),this.be.getColor());else if(Y(this.be)&&this.VW){const t=h("aColor");this.ER.$V(t,this.VW),this.fG!==this.ER.gl.POINTS&&this.ER.YV(t,1)}else if($(this.be)){if("value"===this.be.getLookUpProperty()&&this.GW){const t=h("aLookupValue");this.ER.XV(t,this.GW),this.fG!==this.ER.gl.POINTS&&this.ER.YV(t,1)}const t=DA(this.be,this,this.Ka);if(!t&&this.be.lut.percentageValues)return!1;this.ER.RO(r,this.be.lut,t)}else if(tt(this.be)){if(!this._N)return!1;this.ER.mO(r,this._N,this.be)}else if(et(this.be)){if(!this.wN)return!1;this.ER.yO(r,this.wN,this.be)}if(this.OW&&this.fG!==this.ER.gl.POINTS){const t=h("aOffsetPixels");this.ER.XV(t,this.OW),this.fG!==this.ER.gl.POINTS&&this.ER.YV(t,1)}else if(this.fG!==this.ER.gl.POINTS){const t=i("uOffsetPixels");this.ER.fV(t,this.size._())}const a=((null===(o=this.zW)||void 0===o?void 0:o.BW)||0)+this.ga._();if(this.NW&&this.fG!==this.ER.gl.POINTS){const t=h("aRot");this.ER.WV(t,this.NW),this.fG!==this.ER.gl.POINTS&&this.ER.YV(t,1)}else if(this.fG!==this.ER.gl.POINTS&&a%360!=0){const t=fs(a),s=Math.sin(t),e=Math.cos(t);this.ER.cV(i("uRot"),[s,e])}if(this.fG===this.ER.gl.POINTS)this.ER.fV(i("uPointSize"),this.size._());else{const t={x:2/this.cs.ai().x,y:2/this.cs.ai().y};this.ER.cV(i("uRatioPxClip"),[t.x,t.y])}let l=!1;return this.fG===this.ER.gl.POINTS?(this.ER.Zm(this.fG,e),l=!0):this.zW&&(this.ER.JV(this.fG,0,this.zW.DW,e),l=!0),l}))),this}uN(t){return this.pN===t&&{}}$c(t){this.ll()>0&&this.Ds();const i=this.il(),s=Lh(i,t,this.Qa,!1,!1,this.ft,this.cs.ft,this.Ha,void 0,void 0);return void 0!==s?i[s]:void 0}ke(t){return super.ke(t)}bt(){return this.Ha.max.x}xt(){return this.Ha.min.x}_t(){return this.Ha.max.y}Mt(){return this.Ha.min.y}xl(){return this.Wa._()?25:this.size._()}bl(){return this.Wa._()?25:this.size._()}OR(){return this.EW&&(this.ER.yV(this.EW),this.EW=void 0),this.zW&&(this.zW=void 0),this.VW&&(this.ER.yV(this.VW),this.VW=void 0),this.NW&&(this.ER.yV(this.NW),this.NW=void 0),this.GW&&(this.ER.yV(this.GW),this.GW=void 0),this}}class Tp extends Jh{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.bG={fill:void 0,border:void 0},this.lE=new Zg,this.Ha=Li,this.WW=!1,this.UW=!1,this.YW=!1,this.HW=!1,this.$W=!1,this.vd=[],this.gN=PA({polygonStyleSolid:()=>W(this.be)&&this.be,polygonStyleImage:()=>qr(this.be)&&this.be,polygonStyleRadialGradient:()=>tt(this.be)&&this.be,polygonStyleLinearGradient:()=>et(this.be)&&this.be,polygonStylePaletted:()=>$(this.be)&&this.be,polygonStyleIndividual:()=>Y(this.be)&&this.be,lineStyleSolid:()=>Js(this.Me)&&this.Me,lineStyleFilled:()=>{const t=this.Me&&this.Me.getFillStyle();return W(t)&&t}}),this.nN=t,this.oN=i,this.IG=r,this.ER=t.aN(),this.vG=this.ER.hO}Vr(){const t=this.IG(),i={ys:t=>this.DG(i,t),ds:t=>this.BG(i,t),Sl:t=>this.XW(i,t),Jx:t=>this.jW(i,t),gR:t=>this.EG(i,t),Na:[],S:void 0,ZW:void 0,Vo:0,QW:!0,pN:t.id,mN:t.color};return this.vd.push(i),i}Gt(){var t;return this.vd.length=0,this.WW=!0,this.Zi&&this.Fn&&(null===(t=this.cs.kn)||void 0===t?void 0:t.entity)===this&&this.Fn(this,void 0,this.cs.kn.collectionMember),this}py(){return this.vd}bd(t){var i;const s=this.vd.indexOf(t);s>=0&&(this.vd.splice(s,1),this.$W=!0,this.Zi&&this.Fn&&(null===(i=this.cs.kn)||void 0===i?void 0:i.entity)===this&&this.cs.kn.collectionMember===t&&this.Fn(this,void 0,this.cs.kn.collectionMember))}DG(t,i){var s;return t.QW=i,this.$W=!0,this.Zi&&this.Fn&&(null===(s=this.cs.kn)||void 0===s?void 0:s.entity)===this&&this.cs.kn.collectionMember===t&&this.Fn(this,void 0,this.cs.kn.collectionMember),t}BG(t,i){return t.Vo=i,this.HW=!0,t}XW(t,i){return t.Na=i,this.WW=!0,t}jW(t,i){return t.S=i,this.UW=!0,t}EG(t,i){return t.ZW=null==i?void 0:i.toUint32(),this.YW=!0,t}Ds(){const t=this.Lo._(),i=this.Lo.o,s=this.ia(),e=this.HW,h=this.WW,r=this.UW,o=this.YW,a=this.$W,l=this.Me,u=this.na(),c=this.vd.filter((t=>t.QW&&t.Na.length>0));if(this.lE.mV(this.ft),(h||a)&&(this.Ha=Qi(...c.map((t=>ji(t.Na))))),h||a){const t=Qt(c.map((t=>[...t.Na,t.Na[0],{x:Number.NaN,y:Number.NaN}])).flat(),this.ft.wi()),i=this.ft.wi()?4:2;this.xG=this.ER.oV(t,!1,this.xG);let s=[];c.reduce(((e,h)=>{const r=e,o=(h.Na.length+1)*i,a=new Float32Array(t.buffer,r,o),l=n.default(a,void 0,i),u=e/(Float32Array.BYTES_PER_ELEMENT*i);for(let t=0;t<l.length;t+=1)l[t]+=u;return s=hi(s,l,{canReturnB:!0}),r+(o+1*i)*Float32Array.BYTES_PER_ELEMENT}),0);const e=new Uint32Array(s);this.JW=this.ER.NV(e,this.JW),this.KW=e.length,this.qW=t.length/i-1}const d=this.gN.polygonStyleSolid(s),f=this.gN.polygonStylePaletted(s),A=this.gN.polygonStyleIndividual(s),g=this.gN.polygonStyleRadialGradient(s),p=this.gN.polygonStyleLinearGradient(s),m=this.gN.polygonStyleImage(s),y=d||f||p||g||m||A,S=this.gN.lineStyleSolid(u),v=this.gN.lineStyleFilled(u),x=v,b=S&&Math.max(S.getThickness(),0);if((s||u||i)&&(this.bG.fill=y?{shader:this.ER.az(ng["2D"],d&&ng.Color({dataType:"uniform"}),p&&ng.Color({dataType:["gradient",p]}),g&&ng.Color({dataType:["gradient",g]}),f&&ng.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),A&&ng.Color({dataType:"attribute"}),m&&ng.Color({dataType:["image",m]}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0}),ng.AttributeHighlight),mousePicking:t?{shader:this.ER.az(ng["2D"],ng.MousePickingAttribute,ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0}),ng.AttributeHighlight)}:void 0,fillStyleSolid:d,fillStyleLinearGradient:p,fillStyleRadialGradient:g,fillStylePaletted:f,fillStyleImage:m,fillStyleIndividual:A}:void 0,this.bG.border=S&&x&&"number"==typeof b&&0!==b?{shader:this.ER.az(ng["2D"],ng.Color({dataType:"uniform"}),ng.LineInstanced2D({axisWorldTranslation:IA(this.ft),normalSource:void 0}),this.vG?ng.AliasedEdge:void 0,ng.AttributeHighlight),geometry:cp(this.ER,b),mousePicking:t?{shader:this.ER.az(ng["2D"],ng.MousePickingAttribute,ng.LineInstanced2D({axisWorldTranslation:IA(this.ft),normalSource:void 0}),ng.AttributeHighlight)}:void 0,fillStyleSolid:v,thickness:b}:void 0),e||h){const t=c.reduce(((t,i)=>t+i.Na.length+2),0),i=new Float32Array(t);let s=0;c.forEach((t=>{const e=t.Na.length+2;for(let h=s;h<s+e;h+=1)i[h]=t.Vo;s+=e})),this.tU=this.ER.oV(i,!0,this.tU)}if(t){if(h){const t=c.reduce(((t,i)=>t+i.Na.length+2),0),i=new Float32Array(4*t);let s=0;c.forEach((t=>{const e=t.Na.length+2;for(let h=s;h<s+4*e;h+=4)i[h]=t.mN.r,i[h+1]=t.mN.g,i[h+2]=t.mN.b,i[h+3]=t.mN.a;s+=4*e})),this.iU=this.ER.oV(i,!1,this.iU)}}else this.iU&&(this.ER.yV(this.iU),this.iU=void 0);if(r||h&&f&&"value"===f.getLookUpProperty()){const t=c.reduce(((t,i)=>t+i.Na.length+2),0),i=new Float32Array(t);let s=0;const e={min:Di,max:Bi};c.forEach((t=>{const h=void 0!==t.S?t.S:-34028234663852886e22,r=t.Na.length+2;for(let t=s;t<s+r;t+=1)i[t]=h;s+=r,e.min=Math.min(e.min,h),e.max=Math.max(e.max,h)})),this.sU=e,this.eU=this.ER.oV(i,!1,this.eU)}if(o||h&&A){const t=c.reduce(((t,i)=>t+i.Na.length+2),0),i=new Uint32Array(t);let s=0;const e=A?A.getFallbackColor().toUint32():T.toUint32();c.forEach((t=>{const h=void 0!==t.ZW?t.ZW:e,r=t.Na.length+2;for(let t=s;t<s+r;t+=1)i[t]=h;s+=r})),this.hU=this.ER.oV(i,!1,this.hU,Uint32Array)}return g?this._N=zg(this.zo||this.Ha,this.ft,g.getPosition(),g.getExtent(),g.getShape(),this.ER.Xz()):p?this.wN=Vg(this.zo||this.Ha,this.ft,p.getAngle(!0),this.ER.Xz()):(this._N=void 0,this.wN=void 0),this.rU=this.ER.EO(this,this.rU,m,void 0,h||a||this.ft.Gi(),((t,i,s)=>this.nU(t,i,s,c))),this.HW=!1,this.$W=!1,this.WW=!1,this.UW=!1,this.YW=!1,this.Lo.o=!1,this.ra(this.be),this.la(l),this}VL(t){var i,s;const{fill:e,border:h}=this.bG,r=this.xG,n=this.tU,o=this.iU;if(!r||!n)return this;if(e){const{fillStyleSolid:s,fillStyleLinearGradient:h,fillStyleRadialGradient:a,fillStylePaletted:l,fillStyleImage:u,fillStyleIndividual:c}=e,d=this.JW,f=this.KW,A=1===t?null===(i=e.mousePicking)||void 0===i?void 0:i.shader:e.shader;if(!A||!r||!d||void 0===f)return this;this.ER.ZR(A).lV(A,((i,e,A,g)=>{if(this.ft instanceof Ls||this.ft instanceof qc?this.ER.cV(i("uScale"),this.lE.AV()).cV(i("uDisp"),this.lE.gV()).cV(g("uScaleStart_highpart"),this.lE.OO()).cV(g("uScaleStart_lowpart"),this.lE.NO()):this.ft instanceof Rs&&this.ER.cV(g("uScaleStart"),this.lE.MixedScaleXY.uScaleStart).cV(g("uScaleStartLog"),this.lE.MixedScaleXY.uScaleStartLog).cV(g("uScaleInterval"),this.lE.MixedScaleXY.uScaleInterval).cV(g("uScaleIntervalLog"),this.lE.MixedScaleXY.uScaleIntervalLog).cV(i("uViewportStart"),this.lE.MixedScaleXY.uViewportStart).cV(i("uViewportSize"),this.lE.MixedScaleXY.uViewportSize),this.ER.xO(A,r,this.ft.wi(),void 0).jV(d).XV(e("aIsHighlighted"),n).gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0),1===t){if(!o)return!1;this.ER.$V(e("aColor"),o)}else if(s)this.ER.gR(i("uColor"),s.getColor());else if(a){if(!this._N)return!1;this.ER.mO(A,this._N,a)}else if(h){if(!this.wN)return!1;this.ER.yO(A,this.wN,h)}else if(l){const t=DA(l,this,this.sU);if(!t&&l.lut.percentageValues)return!1;if(this.ER.RO(A,l.lut,t),"value"===l.getLookUpProperty()){if(!this.eU)return!1;this.ER.XV(e("aLookupValue"),this.eU)}}else if(u){if(!this.rU)return!1;this.ER.gR(g("uColor"),u.getSurroundingColor()).dV(i("uColorTexture"),this.rU.texture.Wz()||this.rU.sourceMissingTexture,0).uV(this.rU.texCoordsBuffer,void 0,{location:e("aTextureCoord"),size:2}).RV(u.fitMode)}else if(c){if(!this.hU)return!1;const t=e("aColor");this.ER.gl.bindBuffer(this.ER.gl.ARRAY_BUFFER,this.hU),this.ER.gl.vertexAttribPointer(t,4,this.ER.gl.UNSIGNED_BYTE,!0,0,0),this.ER.gl.enableVertexAttribArray(t)}return this.ER.QV(f,void 0,void 0,this.ER.gl.UNSIGNED_INT),!0}))}if(h){const{geometry:i,fillStyleSolid:e,thickness:a}=h,l=this.qW,u=1===t?null===(s=h.mousePicking)||void 0===s?void 0:s.shader:h.shader;if(!u||!r||!l)return this;this.ER.ZR(u).lV(u,((s,h,u,c)=>{if(this.ft instanceof Ls||this.ft instanceof qc?this.ER.cV(s("uScale"),this.lE.AV()).cV(s("uDisp"),this.lE.gV()).cV(c("uScaleStart_highpart"),this.lE.OO()).cV(c("uScaleStart_lowpart"),this.lE.NO()):this.ft instanceof Rs&&this.ER.cV(c("uScaleStart"),this.lE.MixedScaleXY.uScaleStart).cV(c("uScaleStartLog"),this.lE.MixedScaleXY.uScaleStartLog).cV(c("uScaleInterval"),this.lE.MixedScaleXY.uScaleInterval).cV(c("uScaleIntervalLog"),this.lE.MixedScaleXY.uScaleIntervalLog).cV(s("uViewportStart"),this.lE.MixedScaleXY.uViewportStart).cV(s("uViewportSize"),this.lE.MixedScaleXY.uViewportSize),this.ER.uV(n,1,{location:h("aIsHighlighted"),size:1}).gR(s("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(s("uRenderEffectMask"),2===t?1:0),1===t){if(!o)return!1;this.ER.uV(o,1,{location:h("aColor"),size:4})}else e&&this.ER.gR(s("uColor"),e.getColor());return dp.AG(this.ft.wi(),this.ER,r,u,this.ft.wi()?4:2,0),dp.VL(this.nN,i,u,this.vG&&1!==t,1===t,a,l),!0}))}return this}nU(t,i,s,e){const h=ct({x:this.Ha.min.x,y:this.Ha.min.y},this.ft,this.cs.ft),r=ct({x:this.Ha.max.x,y:this.Ha.max.y},this.ft,this.cs.ft),n={x:Math.abs(h.x-r.x),y:Math.abs(h.y-r.y)},o=Wg(t,i,n.x,n.y,s),a=o[1],l=o[4],u=o[6],c=o[7],d=e.reduce(((t,i)=>t+i.Na.length+2),0),f=new Float32Array(2*d),A=this.Ha.max.x-this.Ha.min.x,g=this.Ha.max.y-this.Ha.min.y,p=l-u,m=c-a;let y=0;for(const t of e){for(const i of t.Na){const t=u+p*((i.x-this.Ha.min.x)/A),s=a+m*((i.y-this.Ha.min.y)/g);f[y]=t,f[y+1]=s,y+=2}const i=u+p*((t.Na[0].x-this.Ha.min.x)/A),s=a+m*((t.Na[0].y-this.Ha.min.y)/g);f[y]=i,f[y+1]=s,y+=2,f[y]=Number.NaN,f[y+1]=Number.NaN,y+=2}return f}uN(t){const i=this.vd.find((i=>i.pN===t));return!!i&&{collectionMember:i}}OR(){return this.JW&&(this.ER.yV(this.JW),this.JW=void 0),this.xG&&(this.ER.yV(this.xG),this.xG=void 0),this.tU&&(this.ER.yV(this.tU),this.tU=void 0),this.iU&&(this.ER.yV(this.iU),this.iU=void 0),this.eU&&(this.ER.yV(this.eU),this.eU=void 0),this.hU&&(this.ER.yV(this.hU),this.hU=void 0),this.bG={fill:void 0,border:void 0},this.rU=this.ER.zO(this,this.rU),this}bt(){return this.Ha.max.x}xt(){return this.Ha.min.x}_t(){return this.Ha.max.y}Mt(){return this.Ha.min.y}xl(){return _i(this.Me)}bl(){return _i(this.Me)}}class Fp extends ir{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.lE=new Zg,this.oU=Li,this.gN=PA({fillStyleSolid:()=>W(this.be)&&this.be,fillStyleRadialGradient:()=>tt(this.be)&&this.be,fillStyleLinearGradient:()=>et(this.be)&&this.be,fillStyleImage:()=>qr(this.be)&&this.be,strokeStyleSolid:()=>Js(this.Me)&&this.Me,strokeFillSolid:()=>{const t=this.Me.getFillStyle();return W(t)&&t},strokeFillLinearGradient:()=>{const t=this.Me.getFillStyle();return et(t)&&t},strokeFillRadialGradient:()=>{const t=this.Me.getFillStyle();return tt(t)&&t}}),this.nU=(t,i,s)=>{const e=ct(this.Ia(),this.ft,this.cs.ft),h=ns(ct(rs(this.Ia(),this.ai()),this.ft,this.cs.ft),e);return Wg(t,i,h.x,h.y,s)},this.nN=t,this.oN=i,this.pN=r,this.mN=n,this.ER=t.aN(),this.oN=i}Ds(){super.Ds();const t=this.Lo._(),i=this.ia(),s=this.ca.o||this.j.o||this.ga.o||this.ma.o,e=this.Me,h=this.na(),r=e.getThickness(),n=this.ga._();this.lE.mV(this.ft);const o=this.ft.Gi();if(s){const t=this.j._();this.Na=function(t,i,s,e,h){const r=((t,i,s)=>[t,l(t.x+i,t.y),l(t.x+i,t.y+s),l(t.x,t.y+s)])(t,i,s);if(0!==e||e%360!=0){const t=e*Math.PI/180;r[0]=qi(r[0],h,t),r[1]=qi(r[1],h,t),r[2]=qi(r[2],h,t),r[3]=qi(r[3],h,t)}return r}(this.ca._(),t.x,t.y,n,this.ma._());const i=Qt(this.Na,this.ft.wi());this.vN=this.ER.oV(i,!1,this.vN),this.bN=this.Na.length,this.oU=ji(this.Na)}const a=this.gN.fillStyleSolid(i),u=this.gN.fillStyleRadialGradient(i),c=this.gN.fillStyleLinearGradient(i),d=this.gN.fillStyleImage(i),f=a||u||c||d;i&&(this.CN=f?this.ER.az(ng["2D"],a&&ng.Color({dataType:"uniform"}),c&&ng.Color({dataType:["gradient",c]}),u&&ng.Color({dataType:["gradient",u]}),d&&ng.Color({dataType:["image",d]}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0),u?this._N=zg(this.zo||this.oU,this.ft,u.getPosition(),u.getExtent(),u.getShape(),this.ER.Xz()):c?this.wN=Vg(this.zo||this.oU,this.ft,c.getAngle(!0),this.ER.Xz()):(this._N=void 0,this.wN=void 0),this.rU=this.ER.EO(this,this.rU,d,void 0,o||s,this.nU);const A=this.gN.strokeStyleSolid(h),g=this.gN.strokeFillSolid(h),p=this.gN.strokeFillLinearGradient(h),m=this.gN.strokeFillRadialGradient(h),y=A,S=g||p||m;if(y&&(s||h||o&&1!==r)){if(1===r||-1===r)[this.kN,this.aU]=[this.Na,void 0];else{const t=this.ft;[this.kN,this.aU]=t instanceof Rs?((t,i,s)=>{const e=t[0],h=t[1],r=t[2],n=t[3],o=i/2;return[[s.Yi(e,h,o,-o),s.Yi(h,e,-o,-o),s.Yi(n,r,-o,-o),s.Yi(r,n,o,-o),s.Yi(e,h,-o,o),s.Yi(h,e,o,o),s.Yi(n,r,o,o),s.Yi(r,n,-o,o)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Na,r,t):((t,i,s)=>{const e=t[0],h=t[1],r=t[2],n=t[3],o=l(i.x*s*.5,i.y*s*.5),a=is(ts(h,e)),u=is(ts(n,e)),c=ls(a),d=ls(u);return[[rs(e,rs(hs(c,o.x),hs(d,o.y))),rs(h,rs(hs(a,o.x),hs(d,o.y))),rs(n,rs(hs(c,o.x),hs(u,o.y))),rs(r,rs(hs(a,o.x),hs(u,o.y))),rs(e,rs(hs(a,o.x),hs(u,o.y))),rs(h,rs(hs(c,o.x),hs(u,o.y))),rs(n,rs(hs(a,o.x),hs(d,o.y))),rs(r,rs(hs(c,o.x),hs(d,o.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Na,t.Ui(),r)}this.FN=this.ER.oV(Qt(this.kN,this.ft.wi()),!1,this.FN),this.aU?(this.cG=this.ER.NV(new Uint16Array(this.aU),this.cG),this.TN=this.aU.length):(this.cG&&this.ER.yV(this.cG),this.cG=void 0,this.TN=this.kN.length)}return h&&(this.EN=y&&S?this.ER.az(ng["2D"],ng.Color({dataType:m?["gradient",m]:p?["gradient",p]:"uniform"}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0),m?this.LN=zg(this.oU,this.ft,m.getPosition(),m.getExtent(),m.getShape(),this.ER.Xz()):p?this.RN=Vg(this.oU,this.ft,p.getAngle(!0),this.ER.Xz()):(this.LN=void 0,this.RN=void 0),this.zN=t&&f?this.zN||this.ER.az(ng["2D"],ng.Color({dataType:"uniform"}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0,this.VN=t&&this.Me!==rt?this.VN||this.ER.az(ng["2D"],ng.Color({dataType:"uniform"}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0,this.ra(this.be),this.la(e),this.ca.o=!1,this.ga.o=!1,this.j.o=!1,this.ma.o=!1,this}uN(t){return this.pN===t&&{}}VL(t){const i=1===t?this.zN:this.CN,s=this.vN,e=this.bN,h=this.gN.fillStyleSolid(!1),r=this.gN.fillStyleRadialGradient(!1),n=this.gN.fillStyleLinearGradient(!1),o=this.gN.fillStyleImage(!1);i&&s&&e&&this.be!==z&&(this.ER.ZR(i),this.ER.lV(i,((i,a,l,u)=>{if(this.ft instanceof Ls||this.ft instanceof qc?this.ER.cV(i("uScale"),this.lE.AV()).cV(i("uDisp"),this.lE.gV()).cV(u("uScaleStart_highpart"),this.lE.OO()).cV(u("uScaleStart_lowpart"),this.lE.NO()):this.ft instanceof Rs&&this.ER.cV(u("uScaleStart"),this.lE.MixedScaleXY.uScaleStart).cV(u("uScaleStartLog"),this.lE.MixedScaleXY.uScaleStartLog).cV(u("uScaleInterval"),this.lE.MixedScaleXY.uScaleInterval).cV(u("uScaleIntervalLog"),this.lE.MixedScaleXY.uScaleIntervalLog).cV(i("uViewportStart"),this.lE.MixedScaleXY.uViewportStart).cV(i("uViewportSize"),this.lE.MixedScaleXY.uViewportSize),1===t)this.ER.gR(i("uColor"),this.mN);else if(h)this.ER.gR(i("uColor"),h.getColor());else if(r){if(!this._N)return!1;this.ER.mO(l,this._N,r)}else if(n){if(!this.wN)return!1;this.ER.yO(l,this.wN,n)}else if(o){if(!this.rU)return!1;const t=this.rU&&this.rU.texture.Wz();this.ER.gR(u("uColor"),o.getSurroundingColor()).dV(i("uColorTexture"),t||this.rU.sourceMissingTexture,0).uV(this.rU.texCoordsBuffer,void 0,{location:a("aTextureCoord"),size:2}).RV(o.fitMode)}return this.ER.fV(i("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0).xO(l,s,this.ft.wi(),void 0).Zm(this.ER.gl.TRIANGLE_FAN,e),!0})));const a=1===t?this.VN:this.EN,l=this.gN.strokeStyleSolid(!1),u=this.gN.strokeFillSolid(!1),c=this.gN.strokeFillLinearGradient(!1),d=this.gN.strokeFillRadialGradient(!1),f=this.FN;return a&&f&&l&&(this.ER.ZR(a),this.ER.lV(a,((i,s,e,h)=>{if(this.ft instanceof Ls||this.ft instanceof qc?this.ER.cV(i("uScale"),this.lE.AV()).cV(i("uDisp"),this.lE.gV()).cV(h("uScaleStart_highpart"),this.lE.OO()).cV(h("uScaleStart_lowpart"),this.lE.NO()):this.ft instanceof Rs&&this.ER.cV(h("uScaleStart"),this.lE.MixedScaleXY.uScaleStart).cV(h("uScaleStartLog"),this.lE.MixedScaleXY.uScaleStartLog).cV(h("uScaleInterval"),this.lE.MixedScaleXY.uScaleInterval).cV(h("uScaleIntervalLog"),this.lE.MixedScaleXY.uScaleIntervalLog).cV(i("uViewportStart"),this.lE.MixedScaleXY.uViewportStart).cV(i("uViewportSize"),this.lE.MixedScaleXY.uViewportSize),1===t)this.ER.gR(i("uColor"),this.mN);else if(u)this.ER.gR(i("uColor"),u.getColor());else if(d){if(!this.LN)return!1;this.ER.mO(e,this.LN,d)}else if(c){if(!this.RN)return!1;this.ER.yO(e,this.RN,c)}return this.ER.fV(i("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0).xO(e,f,this.ft.wi(),void 0),this.cG?this.ER.jV(this.cG).QV(this.TN):this.ER.Zm(this.ER.gl.LINE_LOOP,this.TN),!0}))),this}OR(){return this.cG&&(this.ER.yV(this.cG),this.cG=void 0),this.vN&&(this.ER.yV(this.vN),this.vN=void 0),this.FN&&(this.ER.yV(this.FN),this.FN=void 0),this.rU=this.ER.zO(this,this.rU),this.CN=void 0,this.EN=void 0,this.zN=void 0,this.VN=void 0,this}bt(){return Math.max(this.ca._().x,this.ca._().x+this.j._().x)}xt(){return Math.min(this.ca._().x,this.ca._().x+this.j._().x)}_t(){return Math.max(this.ca._().y,this.ca._().y+this.j._().y)}Mt(){return Math.min(this.ca._().y,this.ca._().y+this.j._().y)}xl(){return _i(this.Me)}bl(){return _i(this.Me)}}class Ip extends er{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.lE=new Zg,this.gN=PA({fillStyleSolid:()=>W(this.be)&&this.be,fillStylePaletted:()=>$(this.be)&&this.be,fillStyleRadialGradient:()=>tt(this.be)&&this.be,fillStyleLinearGradient:()=>et(this.be)&&this.be,fillStyleImage:()=>qr(this.be)&&this.be,strokeLineStyleSolid:()=>Js(this.Me)&&this.Me,strokeLineSolidFill:()=>{const t=this.Me.getFillStyle();return W(t)&&t},strokeLinearGradientFill:()=>{const t=this.Me.getFillStyle();return et(t)&&t},strokeRadialGradientFill:()=>{const t=this.Me.getFillStyle();return tt(t)&&t}}),this.nU=(t,i,s)=>{const e=ct({x:this.Ha.min.x,y:this.Ha.min.y},this.ft,this.cs.ft),h=ct({x:this.Ha.max.x,y:this.Ha.max.y},this.ft,this.cs.ft),r={x:Math.abs(e.x-h.x),y:Math.abs(e.y-h.y)},n=Wg(t,i,r.x,r.y,s),o=n[1],a=n[4],l=n[6],u=n[7],c=new Float32Array(2*this.Na.length),d=this.Ha.max.x-this.Ha.min.x,f=this.Ha.max.y-this.Ha.min.y,A=a-l,g=u-o;let p=0;for(const t of this.Na){const i=l+A*((t.x-this.Ha.min.x)/d),s=o+g*((t.y-this.Ha.min.y)/f);c[p]=i,c[p+1]=s,p+=2}return c},this.nN=t,this.oN=i,this.pN=r,this.mN=n,this.ER=t.aN(),this.oN=i}$c(t){let i,s=Number.MAX_VALUE;for(const e of this.Na){const h=Yi(ct(e,this.ft,this.cs.ft),t);h<s&&(s=h,i=e)}return i}Ds(){const t=this.Lo._(),i=this.ia(),s=this.yl,e=this.Na.length>=3,h=this.Me,r=this.na(),o=h.getThickness(),a=this.aa(o);this.lE.mV(this.ft),this.IT=this.ft.Ui();const l=this.ft.Gi();if(s&&(this.Ha=ji(this.Na)),s&&e){const t=Qt(this.Na,this.ft.wi());this.vN=this.ER.oV(t,!1,this.vN),this.lU=new Uint16Array(n.default(t)),this.uU=this.ER.NV(this.lU,this.uU),this.bN=this.lU.length}const u=this.gN.fillStyleSolid(i),c=this.gN.fillStylePaletted(i),d=this.gN.fillStyleRadialGradient(i),f=this.gN.fillStyleLinearGradient(i),A=this.gN.fillStyleImage(i),g=u||c&&"value"!==c.getLookUpProperty()&&c||f||d||A;if(i&&(this.CN=g?this.ER.az(ng["2D"],u&&ng.Color({dataType:"uniform"}),f&&ng.Color({dataType:["gradient",f]}),d&&ng.Color({dataType:["gradient",d]}),c&&ng.Color({dataType:["lookup",c.getLookUpProperty(),c.lut]}),A&&ng.Color({dataType:["image",A]}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0),d?this._N=zg(this.zo||this.Ha,this.ft,d.getPosition(),d.getExtent(),d.getShape(),this.ER.Xz()):f?this.wN=Vg(this.zo||this.Ha,this.ft,f.getAngle(!0),this.ER.Xz()):(this._N=void 0,this.wN=void 0),this.rU=this.ER.EO(this,this.rU,A,void 0,l||s,this.nU),(s||a||l&&1!==o)&&e){const t=1===o||-1===o?this.Na:tp(this.Na,this.IT,o);this.kN=Qt(t,this.ft.wi()),this.FN=this.ER.oV(this.kN,!0,this.FN),this.TN=t.length}const p=this.gN.strokeLineStyleSolid(r),m=this.gN.strokeLineSolidFill(r),y=this.gN.strokeLinearGradientFill(r),S=this.gN.strokeRadialGradientFill(r),v=p,x=m||y||S;return r&&(this.EN=v&&x?this.ER.az(ng["2D"],ng.Color({dataType:S?["gradient",S]:y?["gradient",y]:"uniform"}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0),S?this.LN=zg(this.zo||this.Ha,this.ft,S.getPosition(),S.getExtent(),S.getShape(),this.ER.Xz()):y?this.RN=Vg(this.zo||this.Ha,this.ft,y.getAngle(!0),this.ER.Xz()):(this.LN=void 0,this.RN=void 0),this.zN=t&&g?this.zN||this.ER.az(ng["2D"],ng.MousePicking,ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0,this.VN=t&&this.Me!==rt?this.zN||this.ER.az(ng["2D"],ng.MousePicking,ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})):void 0,this.yl=!1,this.ra(this.be),this.la(h),this}VL(t){const i=1===t?this.zN:this.CN,s=this.vN,e=this.bN,h=this.gN.fillStyleSolid(!1),r=this.gN.fillStyleRadialGradient(!1),n=this.gN.fillStyleLinearGradient(!1),o=this.gN.fillStylePaletted(!1),a=this.gN.fillStyleImage(!1);i&&s&&e&&this.ER.ZR(i).lV(i,((i,e,l,u)=>{if(this.ER.cV(i("uScale"),this.lE.AV()).cV(i("uDisp"),this.lE.gV()).cV(u("uScaleStart_highpart"),this.lE.OO()).cV(u("uScaleStart_lowpart"),this.lE.NO()).xO(l,s,this.ft.wi(),void 0).jV(this.uU).fV(i("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0),1===t)this.ER.gR(i("uColor"),this.mN);else if(h)this.ER.gR(i("uColor"),h.getColor());else if(r){if(!this._N)return!1;this.ER.mO(l,this._N,r)}else if(n){if(!this.wN)return!1;this.ER.yO(l,this.wN,n)}else if(o){const t=DA(o,this,void 0);if(!t&&o.lut.percentageValues)return!1;this.ER.RO(l,o.lut,t)}else if(a){if(!this.rU)return!1;this.ER.gR(u("uColor"),a.getSurroundingColor()).dV(i("uColorTexture"),this.rU.texture.Wz()||this.rU.sourceMissingTexture,0).uV(this.rU.texCoordsBuffer,void 0,{location:e("aTextureCoord"),size:2}).RV(a.fitMode)}return this.ER.QV(this.bN),!0}));const l=1===t?this.VN:this.EN,u=this.Me,c=this.FN,d=this.TN;return l&&c&&d&&this.ER.ZR(l).lV(l,((i,s,e,h)=>{this.ER.fV(i("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0).cV(i("uScale"),this.lE.AV()).cV(i("uDisp"),this.lE.gV()).xO(e,c,this.ft.wi(),void 0);const r=u.getFillStyle();if(1===t)this.ER.gR(i("uColor"),this.mN);else if(W(r))this.ER.gR(i("uColor"),r.getColor());else if(tt(r)){if(!this.LN)return!1;this.ER.mO(e,this.LN,r)}else if(et(r)){if(!this.RN)return!1;this.ER.yO(e,this.RN,r)}const n=u.getThickness(),o=-1===n||1===n;return this.ER.Zm(o?this.ER.gl.LINE_LOOP:this.ER.gl.TRIANGLE_STRIP,this.TN),!0})),this}uN(t){return this.pN===t&&{}}OR(){return this.uU&&(this.ER.yV(this.uU),this.uU=void 0),this.vN&&(this.ER.yV(this.vN),this.vN=void 0),this.FN&&(this.ER.yV(this.FN),this.FN=void 0),this.CN=void 0,this.EN=void 0,this.zN=void 0,this.VN=void 0,this.rU=this.ER.zO(this,this.rU),this}}const Pp=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=s+r<t?1:0;const o=Math.min(r,t-h),a=s-(n?1:0),l={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},Dp=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=0;const o=Math.min(r,t-h),a=s-(n?1:0),l={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},Bp=(t,i,s,e)=>{if(s){const t=new Map;return i.gridTiles.forEach((i=>{t.set(i,{type:s,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:i.sizeHeatmapDataVectors}]})})),t}const h=new Map;for(let s=0;s<t.length;s+=1){const r=t[s],n={x:r.startPrimary,y:r.startSecondary},o={x:n.x+r.lengthPrimary-1,y:n.y+r.lengthSecondary-1},a=[n,{x:o.x,y:n.y},o,{x:n.x,y:o.y}];i.gridTiles.forEach((t=>{const i=t.iFirstVector,s=e(t),n={x:i.primary+s.primary-1,y:i.secondary+s.secondary-1},o=[{x:i.primary,y:i.secondary},{x:n.x,y:i.secondary},n,{x:i.primary,y:n.y}];if(!Vi(a,o))return;let l=h.get(t);l||(l={type:r.type,dataInvalidationRanges:[]},h.set(t,l));const u=Oi(a,o),c={primary:u.min.x-i.primary,secondary:u.min.y-i.secondary},d={primary:1+u.max.x-u.min.x,secondary:1+u.max.y-u.min.y};let f=!1;const A=[{x:c.primary,y:c.secondary},{x:c.primary+d.primary,y:c.secondary},{x:c.primary+d.primary,y:c.secondary+d.secondary},{x:c.primary,y:c.secondary+d.secondary}];for(let t=0;t<l.dataInvalidationRanges.length;t+=1)if(!f){const i=l.dataInvalidationRanges[t],s=[{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary},{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary}];if(Vi(A,s)){const t=(g=A,p=s,{min:{x:Math.min(g[0].x,p[0].x),y:Math.min(g[0].y,p[0].y)},max:{x:Math.max(g[2].x,p[2].x),y:Math.max(g[2].y,p[2].y)}});i.tileInvalidationOffset.primary=t.min.x,i.tileInvalidationOffset.secondary=t.min.y,i.tileInvalidationLength.primary=t.max.x-t.min.x,i.tileInvalidationLength.secondary=t.max.y-t.min.y,f=!0}}var g,p;f||l.dataInvalidationRanges.push({tileInvalidationLength:d,tileInvalidationOffset:c})}))}return h},Lp=(t,i,s)=>{if(1!==t.length||0!==i.startPrimary||0!==i.startSecondary||i.lengthPrimary!==t[0].sizeHeatmapDataVectors.primary||i.lengthSecondary!==t[0].sizeHeatmapDataVectors.secondary)t.forEach((t=>{const e=s(t),h=Math.max(i.startPrimary,t.iFirstVector.primary),r=Math.min(i.startPrimary+i.lengthPrimary-1,t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1),n=Math.max(i.startSecondary,t.iFirstVector.secondary),o=Math.min(i.startSecondary+i.lengthSecondary-1,t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1);for(let s=h;s<=r;s+=1){const h=s-i.startPrimary,r=i.values[h],a=(s-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let s=n;s<=o;s+=1){const h=s-i.startSecondary,n=s-t.iFirstVector.secondary,o=r[h];e[a+n]=o}}}));else{const e=t[0],h=s(e);for(let t=0;t<i.lengthPrimary;t+=1){const s=t*e.sizeHeatmapDataVectors.secondary;h.set(i.values[t],s)}}},Rp=(t,i,s)=>{var e,h;const r=null===(e=t.gl2)||void 0===e?void 0:e.ctx;if(r)return t.AO(null,r.RED,!1,!0,{x:i,y:s},!1,r.FLOAT,r.R32F);const n=t.gl;return(null===(h=t.gl1)||void 0===h?void 0:h.optional.OES_texture_float)?t.AO(null,n.LUMINANCE,!1,!0,{x:i,y:s},!1,n.FLOAT):t.AO(null,n.RGBA,!1,!0,{x:i,y:s},!1,n.UNSIGNED_BYTE)},Ep=(t,i,s,e)=>{i.forEach(((i,h)=>{var r,n;const o=s(h),a=e(h),l=t.gl;l.bindTexture(l.TEXTURE_2D,a),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const u=null===(r=t.gl2)||void 0===r?void 0:r.ctx,c=i.dataInvalidationRanges.length,d=i.dataInvalidationRanges.reduce(((t,i)=>t+i.tileInvalidationLength.primary),0)/h.sizeHeatmapDataVectors.primary;1===c&&d<1||d<.5&&c<10?i.dataInvalidationRanges.forEach((i=>{var s;const e=i.tileInvalidationOffset.primary*h.sizeHeatmapDataVectors.secondary,r=e+i.tileInvalidationLength.primary*h.sizeHeatmapDataVectors.secondary;if(u)u.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,u.RED,u.FLOAT,o.subarray(e,r));else if(null===(s=t.gl1)||void 0===s?void 0:s.optional.OES_texture_float)l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.LUMINANCE,l.FLOAT,o.subarray(e,r));else{const t=new Uint8Array(o.buffer).subarray(4*e,4*r);l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.RGBA,l.UNSIGNED_BYTE,t)}})):u?u.texImage2D(l.TEXTURE_2D,0,u.R32F,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,u.RED,u.FLOAT,o):(null===(n=t.gl1)||void 0===n?void 0:n.optional.OES_texture_float)?l.texImage2D(l.TEXTURE_2D,0,l.LUMINANCE,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.LUMINANCE,l.FLOAT,o):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(o.buffer)),l.bindTexture(l.TEXTURE_2D,null)}))};class zp extends Qh{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.cU=p("bilinear"),this.Di={x:0,y:0},this.Xw={x:1,y:1},this.pv=_h.lineStyle,this.engine=t;const n="columns"===r.dataOrder?r.columns:r.rows,o="columns"===r.dataOrder?r.rows:r.columns;this.Yn={...r,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o}}Mv(t){return this.cU.M(t),this}_v(){return this.cU._()}vv(t,i){return this.Di=t,this.Xw=i,this}xv(){return{start:this.Di,step:this.Xw,end:{x:this.Di.x+this.Xw.x*this.Yn.columns,y:this.Di.y+this.Xw.y*this.Yn.rows}}}mv(t){return this.pv="function"==typeof t?t(this.pv):t,this}bv(){return this.pv}}class Vp extends zp{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r),this.lE=new Zg,this.bG={},this.dU=[],this.fU=!1,this.Ja=!1,this.gN=PA({fillStyleSolid:()=>W(this.be)&&this.be,fillStylePaletted:()=>$(this.be)&&this.be,wireframeStyleLine:()=>Js(this.pv)&&this.pv,wireframeStyleFill:()=>{const t=this.pv&&this.pv.getFillStyle();return W(t)&&t}}),this.AU=Pp,this.nN=t,this.oN=i,this.pN=n,this.mN=o,this.ER=t.aN(),this.oN=i;const a=Math.min(this.ER.VR,void 0!==r.gU?r.gU:2048),l={x:Math.min(a,this.Yn.primaryDimensionVectorsCount),y:Math.min(a,this.Yn.secondaryDimensionVectorsCount)},u=((t,i,s,e)=>{const h=[],r=s(t.primaryDimensionVectorsCount,i.x),n=s(t.secondaryDimensionVectorsCount,i.y);let o;return r.forEach((t=>n.forEach((i=>{const s={iFirstVector:{primary:t.start,secondary:i.start},iFirstUniqueVector:{primary:t.startUnique,secondary:i.startUnique},sizeHeatmapDataVectors:{primary:t.sizeData,secondary:i.sizeData},sizeUniqueHeatmapDataVectors:{primary:t.sizeUniqueData,secondary:i.sizeUniqueData}};h.push(s)})))),o=[],h.forEach((t=>{let i=o.find((i=>i.sizeHeatmapData.primary===t.sizeHeatmapDataVectors.primary&&i.sizeHeatmapData.secondary===t.sizeHeatmapDataVectors.secondary));i||(i={sizeHeatmapData:t.sizeHeatmapDataVectors,tiles:[]},o.push(i)),i.tiles.push(t)})),{gridTiles:h,gridTileSizes:o}})(this.Yn,l,this.AU),c=u.gridTiles.map((t=>{const i=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary);return{...t,intensityData:i,hasIntensityData:!1}})),d=u.gridTileSizes.map((t=>({...t,tiles:c.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary))})));this.pU={gridTiles:c,gridTileSizes:d},this.vv(this.Di,this.Xw)}Ds(){const t=this.dU,i=this.be,s=this.ia(),e=this.pv,h=e!==this.mU,r=this.gN.fillStylePaletted(s),n=this.gN.fillStyleSolid(s),o=this.cU.o,a=this.cU._(),l=this.Ja,u=this.Lo._();this.yU=this.yU||this.SU();const c=this.yU,d=Bp(t,c,l?"intensity":void 0,(t=>t.sizeHeatmapDataVectors));d.size>0&&(Ep(this.ER,d,(t=>t.intensityData),(t=>t.intensityDataTexture)),this.fU=!0),this.lE.mV(this.ft);const f=this.bG;if((s||o)&&(f.tile=r?{renderMode:"paletted",fillStylePaletted:r,shader:this.ER.az(ng["2D"],ng.ColorGrid2D({heatmapType:"intensity",interpolation:"bilinear"===a&&"bilinear",flipXY:"rows"===this.Yn.dataOrder,intensityTextureType:this.ER.ez?"float":"ubyte",littleEndian:this.ER.IS_MACHINE_LITTLE_ENDIAN,lut:r.lut}),ng.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:IA(this.ft),flipXY:"rows"===this.Yn.dataOrder,normalSource:void 0}))}:n?{renderMode:"solid",fillStyleSolid:n,shader:this.ER.az(ng["2D"],ng.Color({dataType:"uniform"}),ng.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:IA(this.ft),flipXY:"rows"===this.Yn.dataOrder,normalSource:void 0}))}:void 0),h){const t=this.gN.wireframeStyleLine(h),i=this.gN.wireframeStyleFill(h);f.wireframe=t&&i?-1===t.getThickness()?{renderMode:"primitive",shader:this.ER.az(ng["2D"],ng.Color({dataType:"uniform"}),ng.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Yn.dataOrder,axisWorldTranslation:IA(this.ft),normalSource:void 0})),fillStyleSolid:i}:{renderMode:"triangulated",shader:this.ER.az(ng["2D"],ng.Color({dataType:"uniform"}),ng.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Yn.dataOrder,axisWorldTranslation:IA(this.ft),normalSource:void 0})),geometry:cp(this.ER,1),solidLine:t,fillStyleSolid:i}:void 0,f.wireframe?this.vU=this.vU||this.xU():this.vU&&(this.ER.yV(this.vU.wireframeCoordinatesBuffer),this.vU=void 0)}if(f.mousePicking=u?this.bG.mousePicking||{shader:this.ER.az(ng["2D"],ng.MousePicking,ng.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:IA(this.ft),flipXY:"rows"===this.Yn.dataOrder,normalSource:void 0}))}:void 0,this.bG=f,void 0===this.Ka&&r&&"value"===r.lookUpProperty&&r.lut.percentageValues){let t=Di,i=Bi;this.yU.gridTiles.forEach((s=>{for(let e=0;e<s.intensityData.length;e+=1){const h=s.intensityData[e];h<t&&(t=h),h>i&&(i=h)}})),this.Ka={min:t,max:i}}return this.Ja=!1,this.dU.length=0,this.ra(i),this.mU=e,this.cU.o=!1,this}SU(){const t=this.pU.gridTiles.map((t=>{const i=Rp(this.ER,t.sizeHeatmapDataVectors.secondary,t.sizeHeatmapDataVectors.primary);return{...t,intensityDataTexture:i,tileData:t}})),i=this.pU.gridTileSizes.map((i=>({...i,tiles:t.filter((t=>t.sizeHeatmapDataVectors.primary===i.sizeHeatmapData.primary&&t.sizeHeatmapDataVectors.secondary===i.sizeHeatmapData.secondary))}))),s=this.ER.oV([0,0,1,0,0,1,1,1]),e=this.ER.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawMode:e,rectangleLocationsDrawLength:4}}xU(){const t=this.Yn.primaryDimensionVectorsCount+1+this.Yn.secondaryDimensionVectorsCount+1,i=new Float32Array(4*t);let s=0;for(let t=0;t<this.Yn.primaryDimensionVectorsCount+1;t+=1)i[s+0]=t,i[s+1]=0,i[s+2]=t,i[s+3]=this.Yn.secondaryDimensionVectorsCount,s+=4;for(let t=0;t<this.Yn.secondaryDimensionVectorsCount+1;t+=1)i[s+0]=0,i[s+1]=t,i[s+2]=this.Yn.primaryDimensionVectorsCount,i[s+3]=t,s+=4;return{wireframeCoordinatesBuffer:this.ER.oV(i),wireframeSegmentsLength:t}}vv(t,i){super.vv(t,i);const s=this.Yn,e=A({x:Math.min(this.Di.x,this.Di.x+s.columns*this.Xw.x),y:Math.min(this.Di.y,this.Di.y+s.rows*this.Xw.y)},{x:Math.max(this.Di.x,this.Di.x+s.columns*this.Xw.x),y:Math.max(this.Di.y,this.Di.y+s.rows*this.Xw.y)}),h=new Map;return this.pU.gridTiles.forEach((t=>{const i="columns"===this.Yn.dataOrder?{x:this.Di.x+this.Xw.x*t.iFirstVector.primary,y:this.Di.y+this.Xw.y*t.iFirstVector.secondary}:{x:this.Di.x+this.Xw.x*t.iFirstVector.secondary,y:this.Di.y+this.Xw.y*t.iFirstVector.primary},s="columns"===this.Yn.dataOrder?{x:this.Xw.x*t.sizeHeatmapDataVectors.primary,y:this.Xw.y*t.sizeHeatmapDataVectors.secondary}:{x:this.Xw.x*t.sizeHeatmapDataVectors.secondary,y:this.Xw.y*t.sizeHeatmapDataVectors.primary},e="columns"===this.Yn.dataOrder?{x:this.Di.x+this.Xw.x*t.iFirstUniqueVector.primary,y:this.Di.y+this.Xw.y*t.iFirstUniqueVector.secondary}:{x:this.Di.x+this.Xw.x*t.iFirstUniqueVector.secondary,y:this.Di.y+this.Xw.y*t.iFirstUniqueVector.primary},r="columns"===this.Yn.dataOrder?{x:this.Xw.x*t.sizeUniqueHeatmapDataVectors.primary,y:this.Xw.y*t.sizeUniqueHeatmapDataVectors.secondary}:{x:this.Xw.x*t.sizeUniqueHeatmapDataVectors.secondary,y:this.Xw.y*t.sizeUniqueHeatmapDataVectors.primary};h.set(t,{startLocationAxis:i,sizeAxis:s,startRenderLocationAxis:e,renderSizeAxis:r})})),this.bU={boundaries:e,tilesInfo:h},this}VL(t){var i,s;const e=this.yU,h=this.bU,r=1===t?null===(i=this.bG.mousePicking)||void 0===i?void 0:i.shader:null===(s=this.bG.tile)||void 0===s?void 0:s.shader;if(this.bG.tile&&r&&e&&h){const i=r,s=this.bG.tile,n={x:(h.boundaries.max.x-h.boundaries.min.x)*Math.sign(this.Xw.x),y:(h.boundaries.max.y-h.boundaries.min.y)*Math.sign(this.Xw.y)},o={x:n.x/this.Yn.columns,y:n.y/this.Yn.rows},a=this.ft.Ui(),l={x:o.x/a.x,y:o.y/a.y};if("solid"===s.renderMode||1===t)this.ER.ZR(i).lV(i,((i,h,r)=>{if(1===t)this.ER.gR(i("uColor"),this.mN);else if("solid"===s.renderMode){const{fillStyleSolid:t}=s;this.ER.gR(i("uColor"),t.getColor())}return this.ER.fV(i("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0).cV(i("uScale"),this.lE.AV()).cV(i("uDisp"),this.lE.gV()).uV(e.rectangleLocationsBuffer,void 0,{location:h("aPos"),size:2}).cV(i("uScaling"),[this.Xw.x*this.Yn.columns,this.Xw.y*this.Yn.rows]).cV(i("uTranslationAxis"),[this.Di.x,this.Di.y]).Zm(e.rectangleLocationsDrawMode,e.rectangleLocationsDrawLength),!0}));else if("paletted"===s.renderMode){const{fillStylePaletted:r}=s,n=this.Ka;this.ER.lV(i,((s,o,a)=>{let u=!1;var c,d;return this.ER.ZR(i).cV(s("uScale"),this.lE.AV()).cV(s("uDisp"),this.lE.gV()).RO(a,r.lut,n).uV(e.rectangleLocationsBuffer,void 0,{location:o("aPos"),size:2}).fV(s("uIsHighlighted"),this.Vo).gR(s("uHighlightColorOffset"),2===t?F:this.Wo).fV(s("uRenderEffectMask"),2===t?1:0),c=t=>{this.ER.cV(s("uTileDimensions"),["columns"===this.Yn.dataOrder?t.sizeHeatmapData.primary:t.sizeHeatmapData.secondary,"columns"===this.Yn.dataOrder?t.sizeHeatmapData.secondary:t.sizeHeatmapData.primary])},d=(t,i)=>{const r=h.tilesInfo.get(t.tileData);if(!r)return;let n;const o=this.ER.Xz();if("bilinear"===this.cU._()){const t=(this.ft.x.dt(r.startLocationAxis.x)+l.x/2)*o,i=(this.ft.y.dt(r.startLocationAxis.y)+l.y/2)*o;n=[t,i,(this.ft.x.dt(r.startLocationAxis.x+r.sizeAxis.x)-l.x/2)*o-t,(this.ft.y.dt(r.startLocationAxis.y+r.sizeAxis.y)-l.y/2)*o-i]}else{const t=this.ft.x.dt(r.startLocationAxis.x)*o,i=this.ft.y.dt(r.startLocationAxis.y)*o;n=[t,i,this.ft.x.dt(r.startLocationAxis.x+r.sizeAxis.x)*o-t,this.ft.y.dt(r.startLocationAxis.y+r.sizeAxis.y)*o-i]}this.ER.IV(s("uTileBounds"),n).cV(s("uScaling"),[r.renderSizeAxis.x,r.renderSizeAxis.y]).cV(s("uTranslationAxis"),[r.startRenderLocationAxis.x,r.startRenderLocationAxis.y]).dV(s("uTileIntensityValues"),t.intensityDataTexture,1).Zm(e.rectangleLocationsDrawMode,e.rectangleLocationsDrawLength),u=!0},e.gridTileSizes.forEach((t=>{c(t),t.tiles.forEach((t=>{d(t)}))})),u}))}}const n=this.vU,o=this.bG.wireframe,a=1===t||null==o?void 0:o.shader;if(n&&o&&a&&"primitive"===o.renderMode){const{fillStyleSolid:i}=o;this.ER.ZR(a).lV(a,((s,e,h)=>((this.ft instanceof Ls||this.ft instanceof qc)&&this.ER.cV(s("uScale"),this.lE.AV()).cV(s("uDisp"),this.lE.gV()),this.ER.fV(s("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(s("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(s("uRenderEffectMask"),2===t?1:0).gR(s("uColor"),i.getColor()).uV(n.wireframeCoordinatesBuffer,void 0,{location:e("aPos"),size:2}).cV(s("uScaling"),[this.Xw.x,this.Xw.y]).cV(s("uTranslationAxis"),[this.Di.x,this.Di.y]).Zm(this.ER.gl.LINES,2*n.wireframeSegmentsLength),!0)))}else if(n&&o&&a&&"triangulated"===o.renderMode){const{geometry:i,solidLine:s,fillStyleSolid:e}=o;this.ER.ZR(a).lV(a,((h,r,o)=>((this.ft instanceof Ls||this.ft instanceof qc)&&this.ER.cV(h("uScale"),this.lE.AV()).cV(h("uDisp"),this.lE.gV()),this.ER.fV(h("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(h("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(h("uRenderEffectMask"),2===t?1:0).gR(h("uColor"),e.getColor()).fV(h("uThicknessPixels"),s.getThickness()).cV(h("uRatioPxClip"),[2/this.cs.ai().x,2/this.cs.ai().y]).uV(n.wireframeCoordinatesBuffer,1,{location:r("aLocationA"),size:2},{location:r("aLocationB"),size:2}).cV(h("uScaling"),[this.Xw.x,this.Xw.y]).cV(h("uTranslationAxis"),[this.Di.x,this.Di.y]),i.ZR(o,!1).Zm(n.wireframeSegmentsLength),!0)))}return this}wv(t){return this.dU.push(t),Lp(this.pU.gridTiles,t,(t=>(t.hasIntensityData=!0,t.intensityData))),this.Ka=void 0,this}Gt(){return this.fU&&(this.pU.gridTiles.forEach((t=>{t.intensityData.fill(0),t.hasIntensityData=!1})),this.Ja=!0,this.fU=!1,this.Ka=void 0),this}dispose(){super.dispose();const t=this.yU;t&&(t.gridTiles.forEach((t=>{this.ER.NR(t.intensityDataTexture)})),t.gridTiles.length=0,t.gridTileSizes.forEach((t=>{})),t.gridTileSizes.length=0,this.ER.yV(t.rectangleLocationsBuffer)),this.yU=void 0;const i=this.vU;return i&&this.ER.yV(i.wireframeCoordinatesBuffer),this.vU=void 0,this.bG={},this}OR(){return this.dispose(),this}uN(t){return this.pN===t&&{}}$c(t){const i=t,s="columns"===this.Yn.dataOrder?i.x:i.y,e="columns"===this.Yn.dataOrder?i.y:i.x,h="columns"===this.Yn.dataOrder?this.Di.x:this.Di.y,r="columns"===this.Yn.dataOrder?this.Di.y:this.Di.x;let n=(s-h)/("columns"===this.Yn.dataOrder?this.Xw.x:this.Xw.y),o=(e-r)/("columns"===this.Yn.dataOrder?this.Xw.y:this.Xw.x);n=Math.floor(Tt(n,0,this.Yn.primaryDimensionVectorsCount-1)),o=Math.floor(Tt(o,0,this.Yn.secondaryDimensionVectorsCount-1));const a=this.MU(n,o),l="columns"===this.Yn.dataOrder?{x:this.Di.x+(n+.5)*this.Xw.x,y:this.Di.y+(o+.5)*this.Xw.y}:{x:this.Di.x+(o+.5)*this.Xw.x,y:this.Di.y+(n+.5)*this.Xw.y},u="columns"===this.Yn.dataOrder?n:o,c="columns"===this.Yn.dataOrder?o:n;return{x:l.x,y:l.y,column:u,row:c,cellValue:a}}Vb(t){const i=this.bU;if(!i||t.x<i.boundaries.min.x||t.x>i.boundaries.max.x||t.y<i.boundaries.min.y||t.y>i.boundaries.max.y)return;const s=t,e="columns"===this.Yn.dataOrder?s.x:s.y,h="columns"===this.Yn.dataOrder?s.y:s.x,r="columns"===this.Yn.dataOrder?this.Di.x:this.Di.y,n="columns"===this.Yn.dataOrder?this.Di.y:this.Di.x,o="columns"===this.Yn.dataOrder?this.Xw.x:this.Xw.y,a="columns"===this.Yn.dataOrder?this.Xw.y:this.Xw.x,l=Tt((e-r)/o-.5,0,this.Yn.primaryDimensionVectorsCount-1),u=Tt((h-n)/a-.5,0,this.Yn.secondaryDimensionVectorsCount-1),c=Tt(Math.ceil(l)-1,0,this.Yn.primaryDimensionVectorsCount-1),d=Tt(Math.ceil(u)-1,0,this.Yn.secondaryDimensionVectorsCount-1),f={point:{x:c,y:d},value:this.MU(c,d)},A={point:{x:c,y:d+1},value:this.MU(c,d+1)},g={point:{x:c+1,y:d},value:this.MU(c+1,d)},p={point:{x:c+1,y:d+1},value:this.MU(c+1,d+1)},m=Or({x:l,y:u},f,A,g,p);if(void 0===m)return;const y=Tt(Math.floor(l+.5),0,this.Yn.primaryDimensionVectorsCount-1),S=Tt(Math.floor(u+.5),0,this.Yn.secondaryDimensionVectorsCount-1),v="columns"===this.Yn.dataOrder?y:S,x="columns"===this.Yn.dataOrder?S:y,b=t;return{x:b.x,y:b.y,column:v,row:x,cellValue:m}}MU(t,i){for(let s=0;s<this.pU.gridTiles.length;s+=1){const e=this.pU.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const s=t-e.iFirstVector.primary,h=i-e.iFirstVector.secondary,r=s*e.sizeHeatmapDataVectors.secondary+h;return e.intensityData[r]}}return 0}bt(){var t;return(null===(t=this.bU)||void 0===t?void 0:t.boundaries.max.x)||0}xt(){var t;return(null===(t=this.bU)||void 0===t?void 0:t.boundaries.min.x)||0}_t(){var t;return(null===(t=this.bU)||void 0===t?void 0:t.boundaries.max.y)||0}Mt(){var t;return(null===(t=this.bU)||void 0===t?void 0:t.boundaries.min.y)||0}xl(){return 0}bl(){return 0}B_(){const t=[];return this.pU.gridTiles.forEach((i=>{if(!i.hasIntensityData)return;const s=new Array(i.sizeUniqueHeatmapDataVectors.primary).fill(0).map((t=>new Array(i.sizeUniqueHeatmapDataVectors.secondary).fill(0)));for(let t=0;t<i.sizeUniqueHeatmapDataVectors.primary;t+=1){const e=t*i.sizeHeatmapDataVectors.secondary,h=s[t];for(let t=0;t<i.sizeUniqueHeatmapDataVectors.secondary;t+=1){const s=i.intensityData[e+t];h[t]=s}}t.push({type:"intensity",startPrimary:i.iFirstUniqueVector.primary,startSecondary:i.iFirstUniqueVector.secondary,lengthPrimary:i.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:i.sizeUniqueHeatmapDataVectors.secondary,values:s})})),t}}class Op extends Qh{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Di={x:0,y:0},this.Xw={x:1,y:1},this.pv=_h.lineStyle,this.Su=p(void 0),this.cU=p("bilinear"),this.engine=t,this.Yn=r}vv(t,i){return this.Di=t,this.Xw=i,this}xv(){return{start:this.Di,step:this.Xw}}mv(t){return this.pv="function"==typeof t?t(this.pv):t,this}bv(){return this.pv}vu(t){return this.Su.M(t),this}xu(){return this.Su._()}Mv(t){return this.cU.M(t),this}_v(){return this.cU._()}}class Np extends Op{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this._U=0,this.JM=[],this.nN=t,this.oN=i,this.pN=r,this.mN=n,this.ER=t.aN(),this.oN=i,this.Ha="columns"===o.scrollDimension?A({x:this.Di.x,y:this.Di.y},{x:this.Di.x,y:this.Di.y+o.resolution*this.Xw.y}):A({x:this.Di.x,y:this.Di.y},{x:this.Di.x+o.resolution*this.Xw.x,y:this.Di.y}),this.wU={dataPerSegment:2048}}Ds(){this.bW||(this.No.push({type:"DataPattern",args:{pattern:"columns"===this.Yn.scrollDimension?this.Xw.x>0?"ProgressiveX":"RegressiveX":this.Xw.y>0?"ProgressiveY":"RegressiveY",regularProgressiveStep:!0}}),this.bW=new xp(this.ft,this));const t=this.bW.AW(this.JM,this.Su._());if(t>0){for(let i=0;i<t;i+=1)this.JM[0].shape.dispose().OR(),this.JM.shift();"columns"===this.Yn.scrollDimension?this.Ha.min.x=this.JM.length>0?this.JM[0].boundaries.min.x:Di:this.Ha.min.y=this.JM.length>0?this.JM[0].boundaries.min.y:Di}this.JM.forEach((t=>t.shape.Ds()));const i=this.JM.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,It(null===(s=i.shape.Ka)||void 0===s?void 0:s.min,Di)),t.max=Math.max(t.max,It(null===(e=i.shape.Ka)||void 0===e?void 0:e.max,Bi)),t}),{min:Di,max:Bi});return this.JM.forEach((t=>{t.shape.Ka=i})),this.Su.o=!1,this}VL(t){return this.JM.forEach((i=>i.shape.VL(t))),this}Iv(t){if(0===t.length)return this;let i=0;const s=this.wU.dataPerSegment,e=t.length;do{let h=this.JM[this.JM.length-1],r=h?s-(h.existingDataPointsCount+(h.hasJoint?1:0)):0,n=!1;if(!h||0===r){const t={columns:"columns"===this.Yn.scrollDimension?s:this.Yn.resolution,rows:"rows"===this.Yn.scrollDimension?s:this.Yn.resolution,heatmapDataType:this.Yn.heatmapDataType,dataOrder:this.Yn.scrollDimension};let i="columns"===this.Yn.scrollDimension?{x:this.Di.x+this.Xw.x*this._U,y:this.Di.y}:{x:this.Di.x,y:this.Di.y+this.Xw.y*this._U};this.JM.length>0&&(i="columns"===this.Yn.scrollDimension?{x:i.x-1*this.Xw.x,y:i.y}:{x:i.x,y:i.y-1*this.Xw.y},n=!0);const e=new Vp(this.nN,this.oN,this.ft,Ct,[],t,this.pN,this.mN).Mv(this.cU._()).ke(this.be).mv(this.pv).vv(i,this.Xw);h={shape:e,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:s,dataStartIndex:this._U,hasJoint:!1,boundaries:{min:{x:e.xt(),y:e.Mt()},max:{x:e.bt(),y:e._t()}}},this.JM.push(h),r=s-(n?1:0)}const o=e-i,a=Math.min(r,o),l=t.slice(i,i+a),u={type:"intensity",values:l,startPrimary:h.existingDataPointsCount+(h.hasJoint?1:0),startSecondary:0,lengthPrimary:a,lengthSecondary:this.Yn.resolution};n&&(u.values.unshift(this.CU),u.lengthPrimary+=1,h.hasJoint=!0),h.shape.wv(u),h.existingDataPointsCount+=a,h.existingCoordinatesCount+=a+(n?1:0),this.CU=l[l.length-1],this._U+=a,i+=a}while(i<e);return this.Ha.max="columns"===this.Yn.scrollDimension?{...this.Ha.max,x:this.Di.x+this._U*this.Xw.x}:{...this.Ha.max,y:this.Di.y+this._U*this.Xw.y},this}wv(t,i){const s=t,e=t+i.length-1,h=i[0].length;this.JM.forEach((t=>{const r=t.dataStartIndex,n=t.dataStartIndex+t.existingDataPointsCount-1;if(e<r||s>n)return;const o=s-r,a=Math.min(e,n),l=a-o+1,u=i.slice(o-s,a-s+1),c={type:"intensity",startSecondary:0,lengthSecondary:h,startPrimary:o,lengthPrimary:l,values:u};t.shape.wv(c)}));const r=this._U-1;if(e>r){const t=e-r,s=i.slice(-t);if(s.length<t){const i=this.CU||new Array(h).fill(0);for(let e=s.length;e<t;e+=1)s.unshift(i)}this.Iv(s)}return this}N_(){return this._U}Gt(){return this.JM.forEach((t=>{t.shape.dispose().OR()})),this.JM.length=0,this.Ha="columns"===this.Yn.scrollDimension?A({x:this.Di.x,y:this.Di.y},{x:this.Di.x,y:this.Di.y+this.Yn.resolution*this.Xw.y}):A({x:this.Di.x,y:this.Di.y},{x:this.Di.x+this.Yn.resolution*this.Xw.x,y:this.Di.y}),this._U=0,this.CU=void 0,this}vv(t,i){return super.vv(t,i),this.JM.forEach(((s,e)=>{const h={x:t.x+s.dataStartIndex*i.x,y:t.y+s.dataStartIndex*i.y};s.shape.vv(h,i),s.boundaries={min:{x:s.shape.xt(),y:s.shape.Mt()},max:{x:s.shape.bt(),y:s.shape._t()}}})),this.JM.length>0?this.Ha=Qi(...this.JM.map((t=>t.boundaries))):this.Ha="columns"===this.Yn.scrollDimension?A({x:this.Di.x,y:this.Di.y},{x:this.Di.x,y:this.Di.y+this.Yn.resolution*this.Xw.y}):A({x:this.Di.x,y:this.Di.y},{x:this.Di.x+this.Yn.resolution*this.Xw.x,y:this.Di.y}),this}ke(t){return super.ke(t),this.JM.forEach((t=>t.shape.ke(this.be))),this}mv(t){return super.mv(t),this.JM.forEach((t=>t.shape.mv(this.pv))),this}Mv(t){return super.Mv(t),this.JM.forEach((i=>i.shape.Mv(t))),this}dispose(){return super.dispose(),this.JM.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.JM.forEach((i=>i.shape.setVisible(t))),this}OR(){return this.JM.forEach((t=>t.shape.OR())),this}uN(t){return this.pN===t&&{}}$c(t){const i=ct(t,this.ft,this.engine.ft),s=this.JM.reduce(((s,e)=>{const h=e.shape.$c(t);if(h){const t=Hi(ct(h,this.ft,this.engine.ft),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.Yn.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.Yn.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.Yn.scrollDimension&&t>=this._U||"rows"===this.Yn.scrollDimension&&i>=this._U)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}Vb(t){const i=ct(t,this.ft,this.engine.ft),s=this.JM.reduce(((s,e)=>{const h=e.shape.Vb(t);if(h){const t=Hi(ct(h,this.ft,this.engine.ft),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.Yn.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.Yn.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.Yn.scrollDimension&&t>=this._U||"rows"===this.Yn.scrollDimension&&i>=this._U)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}bt(){return this.Ha.max.x}xt(){return this.Ha.min.x}_t(){return this.Ha.max.y}Mt(){return this.Ha.min.y}xl(){return 0}bl(){return 0}ds(t){return super.ds(t),this.JM.forEach((i=>i.shape.ds(t))),this}}class Gp extends Qh{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.cU=p("bilinear"),this.pv=_h.lineStyle,this.Yn=r}Mv(t){return this.cU.M(t),this}_v(){return this.cU._()}mv(t){return this.pv="function"==typeof t?t(this.pv):t,this}bv(){return this.pv}}class Wp extends Gp{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r),this.lE=new Zg,this.bG={},this.gN=PA({fillStyleSolid:()=>W(this.be)&&this.be,fillStylePaletted:()=>$(this.be)&&this.be}),this.nN=t,this.oN=i,this.pN=n,this.mN=o,this.ER=t.aN(),this.oN=i,this.P_=new Vp(this.nN,t.kU,t.ft,Ct,[],{columns:r.sectors,rows:r.annuli,heatmapDataType:"intensity",dataOrder:"annuli"===r.dataOrder?"rows":"columns",gU:this.ER.VR},-1,T).mv(rt);const a=2*Math.PI/360,l=new Float32Array(724);let u=0;l[u+0]=0,l[u+1]=0,u+=2;for(let t=0;t<=360;t+=1){const i=t*a,s=Math.cos(i),e=Math.sin(i);l[u+0]=s,l[u+1]=e,u+=2}this.TU={vertexBuffer:this.ER.oV(l),drawMode:this.ER.gl.TRIANGLE_FAN,drawLength:362}}Ds(){const t=this.ia(),i=this.be,s=this.gN.fillStyleSolid(t),e=this.gN.fillStylePaletted(t),h=s||e,r=this.cU._(),n=this.cU.o,o=this.Lo._(),a=this.Lo.o;return this.lE.mV(this.ft),this.P_.Ds(),this.P_.yU?((t||n)&&(this.bG.fill=h?{shader:this.ER.az(ng["2D"],ng.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:IA(this.ft),normalSource:void 0}),e&&ng.PolarHeatmap({interpolation:"bilinear"===r&&"bilinear",intensityTextureType:this.ER.ez?"float":"ubyte",littleEndian:this.ER.IS_MACHINE_LITTLE_ENDIAN,flipXY:"sectors"===this.Yn.dataOrder,lut:e.lut}),s&&ng.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:e,fillStyleSolid:s}:void 0),a&&(this.bG.mousePicking=o?{shader:this.ER.az(ng["2D"],ng.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:IA(this.ft),normalSource:void 0}),ng.Color({dataType:"uniform"}))}:void 0),this.ra(i),this.cU.o=!1,this.Lo.o=!1,this):this}VL(t){var i;const{vertexBuffer:s,drawLength:e,drawMode:h}=this.TU,r=this.P_.yU;if(!this.bG.fill||!r)return this;const{fillStylePaletted:n,fillStyleSolid:o}=this.bG.fill,a=1===t?null===(i=this.bG.mousePicking)||void 0===i?void 0:i.shader:this.bG.fill.shader;if(!a)return this;const l=this.ft.yb(),u=Math.min(l.start,l.end),c=Math.max(l.start,l.end),d=Math.min(this.Yn.amplitudeStart,this.Yn.amplitudeStart+(this.Yn.annuli-1)*this.Yn.amplitudeStep),f=Math.max(this.Yn.amplitudeStart,this.Yn.amplitudeStart+(this.Yn.annuli-1)*this.Yn.amplitudeStep);let A;return A=l.end>l.start?Math.min(f,c)-l.start:Math.max(d,u)-l.start,this.ER.ZR(a).lV(a,((i,a,l,u)=>{if(this.ER.cV(i("uScale"),this.lE.AV()).cV(i("uDisp"),this.lE.gV()).fV(i("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0).cV(u("uViewportSize"),[this.nN.ai().x*this.ER.Xz(),this.nN.ai().y*this.ER.Xz()]).cV(i("uScaling"),[A,A]).cV(i("uTranslationAxis"),[0,0]).uV(s,void 0,{location:a("aPos"),size:2}).fV(u("uAngleOffset"),this.ft.Mb()%(2*Math.PI)).fV(u("uAngleDirection"),this.ft.Tb()?1:-1).fV(u("uSectors"),this.Yn.sectors).fV(u("uAnnuli"),this.Yn.annuli),1===t)this.ER.gR(i("uColor"),this.mN);else{if(this.ER.fV(i("uAmplitudeStart"),this.Yn.amplitudeStart).fV(i("uAmplitudeStep"),this.Yn.amplitudeStep).fV(i("uAmplitudeAxisStart"),this.ft.yb().start).fV(i("uAmplitudeAxisEnd"),this.ft.yb().end),n){const t=this.P_.Ka;this.ER.RO(l,n.lut,t).dV(i("uTileIntensityValues"),r.gridTiles[0].intensityDataTexture,0)}o&&this.ER.gR(i("uColor"),o.getColor())}return this.ER.Zm(h,e),!0})),this}wv(t){return this.P_.wv(t),this}Gt(){return this.P_.Gt(),this}dispose(){return super.dispose(),this.P_.dispose(),this.bG={},this.ER.yV(this.TU.vertexBuffer),this}OR(){return this.dispose(),this}ke(t){return super.ke(t),this.P_.ke(this.be),this}uN(t){return this.pN===t&&{}}$c(t){const i=this.Yn.amplitudeStart,s=this.Yn.amplitudeStart+(this.Yn.annuli-1)*this.Yn.amplitudeStep,e=Math.min(i,s),h=Math.max(i,s);if(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>h)return;let r=Math.round((t.angle-0)/360*this.Yn.sectors);r>=this.Yn.sectors&&(r=0);const n=Math.round((t.amplitude-i)/(s-i)*(this.Yn.annuli-1));return{iAnnulus:n,iSector:r,cellValue:this.MU(n,r),angle:r*(360/this.Yn.sectors),amplitude:i+n*(s-i)/(this.Yn.annuli-1)}}Vb(t){const i=this.Yn.amplitudeStart,s=this.Yn.amplitudeStart+(this.Yn.annuli-1)*this.Yn.amplitudeStep,e=Math.min(i,s),h=Math.max(i,s);if(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>h)return;const r=(t.angle-0)/360*this.Yn.sectors,n=(t.amplitude-i)/(s-i)*(this.Yn.annuli-1),o=Math.floor(r),a=Math.floor(n),l={point:{x:a,y:o},value:this.MU(a,o)},u={point:{x:a,y:o+1},value:this.MU(a,o+1)},c={point:{x:a+1,y:o},value:this.MU(a+1,o)},d={point:{x:a+1,y:o+1},value:this.MU(a+1,o+1)},f=Or({x:n,y:r},l,u,c,d);return void 0!==f?{iAnnulus:a,iSector:o,cellValue:f,angle:t.angle,amplitude:t.amplitude}:void 0}MU(t,i){const s="annuli"===this.Yn.dataOrder?t:i,e="annuli"===this.Yn.dataOrder?i:t;for(let t=0;t<this.P_.pU.gridTiles.length;t+=1){const i=this.P_.pU.gridTiles[t];if(s>=i.iFirstVector.primary&&s<=i.iFirstVector.primary+i.sizeHeatmapDataVectors.primary-1&&e>=i.iFirstVector.secondary&&e<=i.iFirstVector.secondary+i.sizeHeatmapDataVectors.secondary-1){const t=s-i.iFirstVector.primary,h=e-i.iFirstVector.secondary,r=t*i.sizeHeatmapDataVectors.secondary+h;return i.intensityData[r]}}return 0}bt(){return 0}xt(){return 0}_t(){return 0}Mt(){return 0}xl(){return 0}bl(){return 0}}class Up extends Og{constructor(t){super(t);const{vertices:i,drawMode:s,drawSize:e}=this.lG();this.uG=t.oV(i),this.dG=e,this.fG=s}ZR(t){return this.ER.uV(this.uG,0,{location:t.attribute("aCurveOrBaseline"),size:1},{location:t.attribute("aSegmentSide"),size:1}),this}Zm(t,i,s){return this.ER.JV(void 0!==i?i:this.fG,s||0,this.dG,t),this}lG(){return{vertices:new Float32Array([1,0,0,0,0,1,0,1,1,1,1,0]),drawMode:this.ER.gl.TRIANGLES,drawSize:6}}Tz(){this.ER.yV(this.uG)}}const Yp=t=>{let i=t.wV._z.get(void 0);return i||(i=new Up(t),t.wV._z.set(void 0,i),i)};class Hp extends dr{constructor(t,i,s,e){super(t,i,s,e,[{type:"DataPattern",args:{pattern:"ProgressiveX"}}]),this.FU=_h.fillStyle,this.IU=_h.fillStyle,this.PU=p(exports.PointShape.Circle),this.DU=p(5),this.BU=p(0),this.LU=p(void 0),this.jC=!0,this.RU={x:0,y:0}}dd(t){return this.FU=$h(this.FU,t),this}QC(){return this.FU}EU(){return Xh(this.zU,this.FU)}VU(){return Xh(this.OU,this.IU)}ud(t){return this.IU=$h(this.IU,t),qr(this.IU)&&(this.Ad(exports.PointShape.Square),this.Sd(1)),this}yd(){return this.IU}Ad(t){return this.PU.M(t),on(this.PU._())&&this.Sd(1),this}gd(){return this.PU._()}Sd(t){return this.DU.M(t),this}JC(){return this.DU._()}pd(t){return this.BU.M(t),this}md(){return this.BU._()}KC(t){return this.RU=t,this}qC(){return this.RU}XC(t){return this.LU.M(t),this}tk(){return this.LU._()}}class $p extends pp{constructor(t,i){super(t,i),this.$G=!1,this.XG={enabled:!1,totalDataPointsAtTime:0},this.ZG=t instanceof Ls?{type:"linear",scale:t}:{type:"unknown"},this.HG.Yo("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.$G=!0)}))}NU(t,i){var s,e;const h=null==t?void 0:t.kc,r=null==t?void 0:t.Tc,n=null==t?void 0:t.uc,o=null==t?void 0:t.lc;if(!t||this.$G||!this.WG||"linear"!==this.ZG.type||!h||!r||void 0===n||void 0===o||!i)return{cpStateChanged:!1,cpActive:!1};const a=null===(s=t.Cc())||void 0===s?void 0:s.x,l=null===(e=t.Hc())||void 0===e?void 0:e.x;if(n<2||void 0===a||void 0===l)return{cpStateChanged:!1,cpActive:!1};const u=this.calculateAvgStepBetweenDataPoints(l,a,n),c=this.ZG.scale,d=Math.abs("x"===this.WG?c.Ui().x:c.Ui().y),f=d/u,A=Math.floor(.8*f),g=A*u,p=A>=4,m=this.XG.enabled?this.XG.columnWidthAxis/d<1.5:void 0,y=this.XG.enabled&&A>this.XG.dataPointsPerColumn?A/this.XG.dataPointsPerColumn>=2:void 0;let S;return!0===this.XG.enabled?m?y&&(S={enabled:!0,columnWidthAxis:g,dataPointsPerColumn:A,totalDataPointsAtTime:n}):S=p?{enabled:!0,columnWidthAxis:g,dataPointsPerColumn:A,totalDataPointsAtTime:n}:{enabled:!1,totalDataPointsAtTime:n}:p&&(S={enabled:!0,columnWidthAxis:g,dataPointsPerColumn:A,totalDataPointsAtTime:n}),this.XG=S||{...this.XG,totalDataPointsAtTime:n},!!S&&this.Zp(),{cpStateChanged:!!S,cpActive:this.XG.enabled}}GU(t,i){var s,e,h;const r=t.kc,n=t.Tc,o=t.cc,a=t.uc,l=t.lc;if(this.$G||!this.XG.enabled||!r||!n||void 0===i)return;const u=r.length,c=this.XG.columnWidthAxis,d=this.ft.x.getInnerStart(),f=this.ft.x.getInnerEnd(),A=dn(d,f,r,o,a,l,i,1);if(!A)return;const g=r[A.iFirstSampleDataArray];if(this.WU){if(this.WU.iFirstPackedSample<A.iFirstSample){const t=Math.min(Math.floor((g-this.WU.origin)/c),this.WU.packedColumnsCount);if(t>0)if(this.WU.packedColumnsCount-=t,this.WU.packedColumnsCount>0){this.WU.packedDataX.splice(0,2*t),this.WU.packedDataY.splice(0,2*t),this.WU.packedDataColors&&this.WU.packedDataColors.splice(0,2*t),this.WU.packedDataLookupValues&&this.WU.packedDataLookupValues.splice(0,2*t),this.WU.origin+=t*c;const i=fn(this.WU.origin,Math.max(o-1-u+1,0),o-1,(t=>r[cn(t,o,u)])),s=cn(i,o,u);this.WU.iFirstPackedSample=r[s]>=this.WU.origin?i:i+1}else this.WU=void 0}if(void 0!==(null===(s=this.WU)||void 0===s?void 0:s.iLastPackedSample)&&this.WU.iLastPackedSample>A.iLastSample){const t=r[A.iLastSampleDataArray],i=Math.min(Math.floor((this.WU.origin+this.WU.packedColumnsCount*c-t)/c),this.WU.packedColumnsCount);if(i>0)if(this.WU.packedColumnsCount-=i,this.WU.packedColumnsCount>0){for(let t=0;t<2*i;t+=1)this.WU.packedDataX.pop(),this.WU.packedDataY.pop(),this.WU.packedDataColors&&this.WU.packedDataColors.pop(),this.WU.packedDataLookupValues&&this.WU.packedDataLookupValues.pop();const t=fn(this.WU.origin+this.WU.packedColumnsCount*c,Math.max(o-1-u+1,0),o-1,(t=>r[cn(t,o,u)])),s=cn(t,o,u);this.WU.iLastPackedSample=r[s]<=this.WU.origin+this.WU.packedColumnsCount*c?t:t-1}else this.WU=void 0}}const p=this.WU||{origin:g,packedColumnsCount:0,packedDataX:[],packedDataY:[],packedDataColors:t.Ec?[]:void 0,packedDataLookupValues:t.Rc?[]:void 0,packedDataSize:t.zc?[]:void 0,packedDataRotation:t.Vc?[]:void 0,iFirstPackedSample:A.iFirstSample,iLastPackedSample:void 0},m=(t,i,s)=>{let e=Math.min(t,t+i*c),h=Math.max(t,t+i*c),a=s;const l=[];let g=Bi,m=Bi,y=-1,S=Di,v=Di,x=-1,b=0;for(;a<=A.iLastSample&&a>=A.iFirstSample;){const s=a%u,A=r[s],M=n[s];if(e<=A&&A<=h)b+=1,Number.isNaN(M)||(M>m&&(g=A,m=M,y=a),M<v&&(S=A,v=M,x=a)),a+=i;else{if(b>0)g=g===Bi?Number.NaN:g,m=m===Bi?Number.NaN:m,S=S===Di?Number.NaN:S,v=v===Di?Number.NaN:v,y<x?(l.push({iFirst:y,iSecond:x}),i>0?(p.packedDataX.push(g),p.packedDataY.push(m),p.packedDataX.push(S),p.packedDataY.push(v)):(p.packedDataX.unshift(S),p.packedDataY.unshift(v),p.packedDataX.unshift(g),p.packedDataY.unshift(m))):(l.push({iFirst:x,iSecond:y}),i>0?(p.packedDataX.push(S),p.packedDataY.push(v),p.packedDataX.push(g),p.packedDataY.push(m)):(p.packedDataX.unshift(g),p.packedDataY.unshift(m),p.packedDataX.unshift(S),p.packedDataY.unshift(v)));else{const t=i>0?p.iLastPackedSample:p.iFirstPackedSample;if(void 0===t)l.push({iFirst:0,iSecond:0}),i>0?(p.packedDataX.push(Number.NaN),p.packedDataY.push(Number.NaN),p.packedDataX.push(Number.NaN),p.packedDataY.push(Number.NaN)):(p.packedDataX.unshift(Number.NaN),p.packedDataY.unshift(Number.NaN),p.packedDataX.unshift(Number.NaN),p.packedDataY.unshift(Number.NaN));else{const s=cn(t,o,u),a=r[s],d=n[s],f=(e+h)/2,g=f-i*c/6,m=d+(g-a)/(A-a)*(M-d),y=f+i*c/6,S=d+(y-a)/(A-a)*(M-d);l.push({iFirst:t,iSecond:t}),i>0?(p.packedDataX.push(g),p.packedDataY.push(m),p.packedDataX.push(y),p.packedDataY.push(S)):(p.packedDataX.unshift(g),p.packedDataY.unshift(m),p.packedDataX.unshift(y),p.packedDataY.unshift(S))}}if(p.packedColumnsCount+=1,i>0?p.iLastPackedSample=a-1:(p.iFirstPackedSample=a+1,p.origin=e),e=Math.min(t+l.length*i*c,t+(l.length+1)*i*c),h=Math.max(t+l.length*i*c,t+(l.length+1)*i*c),b=0,g=Bi,m=Bi,y=-1,S=Di,v=Di,x=-1,e<d||h>f)break}}return l},y=m(p.origin+p.packedColumnsCount*c,1,void 0!==(null===(e=this.WU)||void 0===e?void 0:e.iLastPackedSample)?this.WU.iLastPackedSample+1:A.iFirstSample),S=m(p.origin,-1,void 0!==(null===(h=this.WU)||void 0===h?void 0:h.iFirstPackedSample)?this.WU.iFirstPackedSample-1:A.iFirstSample),v=t.Ec&&p.packedDataColors?[t.Ec,p.packedDataColors]:void 0,x=t.Rc&&p.packedDataLookupValues?[t.Rc,p.packedDataLookupValues]:void 0,b=t.zc&&p.packedDataSize?[t.zc,p.packedDataSize]:void 0,M=t.Vc&&p.packedDataRotation?[t.Vc,p.packedDataRotation]:void 0;if(v||x||b||M){for(const t of y){const i=cn(t.iFirst,o,u),s=cn(t.iSecond,o,u);v&&v[1].push(v[0][i],v[0][s]),x&&x[1].push(x[0][i],x[0][s]),b&&b[1].push(b[0][i],b[0][s]),M&&M[1].push(M[0][i],M[0][s])}for(const t of S){const i=cn(t.iFirst,o,u),s=cn(t.iSecond,o,u);v&&v[1].unshift(v[0][s],v[0][i]),x&&x[1].unshift(x[0][s],x[0][i]),b&&b[1].unshift(b[0][s],b[0][i]),M&&M[1].unshift(M[0][s],M[0][i])}}return this.WU=p.packedColumnsCount>0?p:void 0,{x:p.packedDataX,y:p.packedDataY,color:p.packedDataColors,lookup:p.packedDataLookupValues,size:p.packedDataSize,rotation:p.packedDataRotation}}Zp(){this.WU=void 0}iW(t){if(this.WG&&"linear"===this.ZG.type){const i="x"===this.WG?this.ZG.scale.x.sg:this.ZG.scale.y.sg;if(!i)throw new Error("CP helper has no information about Axis state.");if(i.Ke===ze.progressive||i.Ke===ze.regressive){const i=Math.abs("x"===this.WG?this.ZG.scale.x.getInnerInterval():this.ZG.scale.y.getInnerInterval());if(this.XG.enabled)return 2*i/this.XG.columnWidthAxis;const s=t.length,e=t[0],h=t[s-1];return i/this.calculateAvgStepBetweenDataPoints("x"===this.WG?e.x:e.y,"x"===this.WG?h.x:h.y,s)}}}sW(t,i,s){if(!this.WG)return i;const e=s.length;let h=Vh(s,t.min,this.WG,this.UG,0,e-1);void 0===h&&(h=this.UG?e-1:0);let r=Vh(s,t.max,this.WG,this.UG,0,e-1);return void 0===r&&(r=this.UG?0:e-1),1+Math.abs(r-h)}eW(){}}class Xp extends Hp{constructor(t,i,s,e,h,r){super(t,i,s,e),this.lE=new Zg,this.vW=new $p(this.ft,this),this.gN=PA({lineStyleSolid:()=>Js(this.uu)&&this.uu,lineStyleDashed:()=>hn(this.uu)&&this.uu,strokeFillSolid:()=>{const t=this.uu.getFillStyle();return W(t)&&t},strokeFillLinearGradient:()=>{const t=this.uu.getFillStyle();return et(t)&&t},strokeFillRadialGradient:()=>{const t=this.uu.getFillStyle();return tt(t)&&t},strokeFillIndividual:()=>{const t=this.uu.getFillStyle();return Y(t)&&t},strokeFillPaletted:()=>{const t=this.uu.getFillStyle();return $(t)&&t},areaFillSolid:()=>W(this.FU)&&this.FU,areaFillLinearGradient:()=>et(this.FU)&&this.FU,areaFillRadialGradient:()=>tt(this.FU)&&this.FU,areaFillIndividual:()=>Y(this.FU)&&this.FU,areaFillPaletted:()=>$(this.FU)&&this.FU,markerFillSolid:()=>W(this.IU)&&this.IU,markerFillLinearGradient:()=>et(this.IU)&&this.IU,markerFillRadialGradient:()=>tt(this.IU)&&this.IU,markerFillPaletted:()=>$(this.IU)&&this.IU,markerFillIndividual:()=>Y(this.IU)&&this.IU,markerFillImage:()=>qr(this.IU)&&this.IU,markerShapeIcon:()=>{const t=this.PU._();return on(t)&&t}}),this.ad=p(void 0),this.UU=[],this.Ja=!1,this.YU=[],this.HU=void 0,this.nU=(t,i,s)=>{var e;const h=null===(e=this.$U)||void 0===e?void 0:e.shapeIcon;let r=t,n=i;return h&&(r=h.ai().x,n=h.ai().y),Wg(t,i,r*this.DU._(),n*this.DU._(),s)},this.oN=i,this.bG={type:"none"},this.ER=t.aN(),this.nN=t,this.vG=this.ER.hO,this.pN=h,this.mN=r}ld(t){return this.ad.M(Ii(t,this.ad._(),(()=>[t.Xc(((i,s)=>{this.UU.push({min:i,max:s}),void 0===t.Wc()&&this.XU&&this.YU.push({min:i,max:s})})),t.jc((()=>{this.Ja=!0,this.XU=void 0,this.HU=void 0,this.vW.Zp()}))]))),this.HU=void 0,this}Ds(){var t,i,s,e,h,r,n,o,a,u,c,d,f,A,g;const p=null===(t=this.ad._())||void 0===t?void 0:t.Ut,m=this.ad.o,y=null==p?void 0:p.kc,S=null==p?void 0:p.Tc;if(!p||!y||!S)return this;const v=p.Rc,x=p.Ec,b=p.zc,M=p.Vc,_=p.cc,w=p.uc,C=p.lc,k=this.uu,T=this.FU,F=m||this.na()||this.EU()||this.VU(),I=this.gN.lineStyleSolid(F),P=this.gN.lineStyleDashed(F),D=I||P,B=D&&D.getThickness(),L=this.gN.strokeFillSolid(F),R=this.gN.strokeFillLinearGradient(F),E=this.gN.strokeFillRadialGradient(F),z=this.gN.strokeFillIndividual(F),V=this.gN.strokeFillPaletted(F),O=L||R||E||z||V,N=this.gN.areaFillSolid(F),G=this.gN.areaFillLinearGradient(F),W=this.gN.areaFillRadialGradient(F),U=this.gN.areaFillIndividual(F),Y=this.gN.areaFillPaletted(F),H=N||G||W||U||Y,$=this.gN.markerFillSolid(F),X=this.gN.markerFillLinearGradient(F),j=this.gN.markerFillRadialGradient(F),Z=this.gN.markerFillPaletted(F),Q=this.gN.markerFillIndividual(F),J=this.gN.markerFillImage(F),K=$||X||j||Z||Q||J,q=this.PU._(),tt=this.PU.o,it=this.gN.markerShapeIcon(tt),st=this.DU._(),et=this.DU.o,ht=this.LU.o,rt=this.UU.length>0||ht,nt=this.Ja,ot=nt?[p.Uc()]:(t=>{const i=[];for(const s of t){let t=!1;for(const e of i)if(s.min>=e.min&&s.min<=e.max||s.max>=e.min&&s.max<=e.max){e.min=Math.min(e.min,s.min),e.max=Math.min(e.max,s.max),t=!0;break}t||i.push(s)}return i})(this.UU),at=this.ft.x.Ht,lt=this.ft.x.getInnerStart(),ut=this.ft.x.getInnerEnd(),ct=p.Wc(),dt=!!P,ft=this.Lo._(),At=this.Lo.o,{cpStateChanged:gt,cpActive:pt}=this.vW.NU(p,this.jC);if(ct&&pt&&(gt||nt||rt||at||F)){const t=this.vW.GU(p,ct);if(t){const s=!gt&&!nt&&!F;this.jU=jp(this.ER,[t.x,t.y],t.color,t.lookup,t.size,t.rotation,dt,this.jU,s,ct,1e3,this.ft.wi(),(t=>Zt(t,this.ft.wi()))),this.ZU={min:Di,max:Bi};const e=t.y.length;for(let i=0;i<e;i+=1){const s=t.y[i];Number.isNaN(s)||(this.ZU.min=Math.min(this.ZU.min,s),this.ZU.max=Math.max(this.ZU.max,s))}null===(i=this.ft.y.sg)||void 0===i||i.dh()}}if(ct&&!pt&&(gt||nt||rt||at||ht||F)){const t=dn(lt,ut,y,_,w,C,ct,1);if(!this.QU||(null==t?void 0:t.iFirstSample)!==this.QU.iFirstSample||t.iLastSample!==this.QU.iLastSample||nt){this.ZU={min:Di,max:Bi};for(const i of(null==t?void 0:t.dataRanges)||[])for(let t=i.offset;t<i.offset+i.count;t+=1){const i=S[t];Number.isNaN(i)||(this.ZU.min=Math.min(this.ZU.min,i),this.ZU.max=Math.max(this.ZU.max,i))}null===(s=this.ft.y.sg)||void 0===s||s.dh()}if(this.QU=t,void 0===t)this.ER.yV(null===(e=this.jU)||void 0===e?void 0:e.bufferX),this.ER.yV(null===(h=this.jU)||void 0===h?void 0:h.bufferY),this.jU=void 0,this.ER.yV(null===(r=this.JU)||void 0===r?void 0:r.bufferX),this.ER.yV(null===(n=this.JU)||void 0===n?void 0:n.bufferY),this.JU=void 0,this.KU=t;else if(gt||nt||!this.KU||t.iFirstSample<this.KU.iFirstSample||t.iLastSample>this.KU.iLastSample||F){let i,s,e,h,r,n;if(1===t.dataRanges.length){const o=t.dataRanges[0];i=y.subarray(o.offset,o.offset+o.count),s=S.subarray(o.offset,o.offset+o.count),e=x?x.subarray(o.offset,o.offset+o.count):void 0,h=v?v.subarray(o.offset,o.offset+o.count):void 0,r=b?b.subarray(o.offset,o.offset+o.count):void 0,n=M?M.subarray(o.offset,o.offset+o.count):void 0}else{const o=t.dataRanges[0],a=t.dataRanges[1],l=o.count+a.count;i=new Float32Array(l),i.set(y.subarray(o.offset),0),i.set(y.subarray(a.offset,a.offset+a.count),o.count),s=new Float32Array(l),s.set(S.subarray(o.offset),0),s.set(S.subarray(a.offset,a.offset+a.count),o.count),x&&(e=new Uint32Array(l),e.set(x.subarray(o.offset),0),e.set(x.subarray(a.offset,a.offset+a.count),o.count)),v&&(h=new Float32Array(l),h.set(v.subarray(o.offset),0),h.set(v.subarray(a.offset,a.offset+a.count),o.count)),b&&(r=new Float32Array(l),r.set(b.subarray(o.offset),0),r.set(b.subarray(a.offset,a.offset+a.count),o.count)),M&&(n=new Float32Array(l),n.set(M.subarray(o.offset),0),n.set(M.subarray(a.offset,a.offset+a.count),o.count))}const a=!gt&&!nt&&!F;this.JU=jp(this.ER,[i,s],e,h,r,n,dt,this.JU,a,ct,1e3,this.ft.wi(),(t=>Zt(t,this.ft.wi())));let u=i,c=s,d=e,f=h;const A=this.LU._();if(A){const t="spline"===A.type?((t,i)=>{const{xValues:s,yValues:e,lookupValues:h,colors:r}=t;if(s.length<=2)return{xValues:Array.from(s),yValues:Array.from(e),lookupValues:h?Array.from(h):void 0,colors:r?Array.from(r):void 0};const n=((t,i)=>{const s=1e-5,e=t.length-1,h=Array(e);if(e>1){let r=l(0,0),n=l(0,0),o=l(0,0),a=is(ns({x:t[1],y:i[1]},{x:t[0],y:i[0]}));const u=3;let c=0,d=0;for(let f=0;f<e;f+=1){const A=Array(4);if(A[0]={x:t[f],y:i[f]},A[1]={x:t[f],y:i[f]},A[3]={x:t[f+1],y:i[f+1]},A[2]={x:t[f+1],y:i[f+1]},o=a,r=n,f+1<e?(a=t[f+2]===t[f+1]&&i[f+2]===i[f+1]?l(0,0):is(ns({x:t[f+2],y:i[f+2]},{x:t[f+1],y:i[f+1]})),n=is(rs(o,a))):n=l(0,0),i[f+1]===i[f])c=0,d=0;else{const i=t[f+1]-t[f];c=Math.abs(r.x)>s?Math.abs(i/(u*r.x)):1,d=Math.abs(n.x)>s?Math.abs(i/(u*n.x)):1}A[1]=rs(hs(r,c),A[1]),A[2]=ns(A[2],hs(n,d)),h[f]=A}}return h.length>0?h:[]})(s,e),o=n.length,a=[],u=[],c=[],d=[];for(let t=0;t<o;t+=1){const s=n[t];for(let t=0;t<i;t+=1){const e=t/(i-1),h=e*e,r=h*e,n=1-e,o=n*n,l=o*n;a.push(l*s[0].x+3*e*o*s[1].x+3*h*n*s[2].x+r*s[3].x),u.push(l*s[0].y+3*e*o*s[1].y+3*h*n*s[2].y+r*s[3].y)}}if(h)for(let t=0;t<a.length;t+=1){const s=h[Math.round(t/i)];d[t]=s}if(r)for(let t=0;t<a.length;t+=1){const s=r[Math.round(t/i)];c[t]=s}return{xValues:a,yValues:u,lookupValues:h?d:void 0,colors:r?c:void 0}})({xValues:i,yValues:s,lookupValues:h,colors:e},A.resolution||20):"step"===A.type?((t,i)=>{const{xValues:s,yValues:e,lookupValues:h,colors:r}=t,n=[],o=[],a=[],l=[],u=s.length,c=i;if(u>0){let t=0,i=s[0],h=e[0];n[t]=i,o[t]=h,t+=1;for(let r=1;r<u;r+=1){const a=s[r],l=e[r];if(c<=0)n[t]=i,o[t]=l,t+=1;else{const s=i*(1-c)+a*c;n[t]=s,o[t]=h,t+=1,n[t]=s,o[t]=l,t+=1}n[t]=a,o[t]=l,t+=1,i=a,h=l}}if(h)if(c===exports.StepOptions.before){l[0]=h[0];for(let t=1;t<u;t+=1)l[2*t-1]=h[t],l[2*t]=h[t]}else if(c===exports.StepOptions.middle||c===exports.StepOptions.after){l[0]=h[0],l[1]=h[0];for(let t=1;t<u;t+=1)l[3*t-1]=h[t],l[3*t]=h[t],l[3*t+1]=h[t]}if(r)if(c===exports.StepOptions.before){a[0]=r[0];for(let t=1;t<u;t+=1)a[2*t-1]=r[t],a[2*t]=r[t]}else if(c===exports.StepOptions.middle||c===exports.StepOptions.after){a[0]=r[0],a[1]=r[0];for(let t=1;t<u;t+=1)a[3*t-1]=r[t],a[3*t]=r[t],a[3*t+1]=r[t]}return{xValues:n,yValues:o,lookupValues:h?l:void 0,colors:r?a:void 0}})({xValues:i,yValues:s,lookupValues:h,colors:e},"before"===A.step?0:"after"===A.step?1:.5):void 0;u=t?t.xValues:u,c=t?t.yValues:c,d=(null==t?void 0:t.colors)?t.colors:d,f=(null==t?void 0:t.lookupValues)?t.lookupValues:f}this.jU=u===i&&c===s?this.JU:jp(this.ER,[u,c],d,f,void 0,void 0,dt,(null===(o=this.jU)||void 0===o?void 0:o.bufferX)===this.JU.bufferX?void 0:this.jU,!(!a||ht||A),ct,1e3,this.ft.wi(),(t=>Zt(t,this.ft.wi()))),this.KU=t}}if(!ct&&(nt||rt||F)){if(!this.jU||this.jU.bufferSize<p.uc||dt){const t=void 0!==p.Oc?p.Oc:p.uc;let i,s=0,e=0;if(dt){const h=Zp(y,S,y[0],S[0],0,0);i=this.ER.zV(2*t,h[0],null===(a=this.jU)||void 0===a?void 0:a.bufferLengthSoFar,Float32Array),s=h[1],e=h[2]}this.jU={bufferX:this.ER.zV(t*(this.ft.wi()?2:1),Zt(y,this.ft.wi()),null===(u=this.jU)||void 0===u?void 0:u.bufferX),bufferY:this.ER.zV(t*(this.ft.wi()?2:1),Zt(S,this.ft.wi()),null===(c=this.jU)||void 0===c?void 0:c.bufferY),bufferColors:x?this.ER.zV(t,x,null===(d=this.jU)||void 0===d?void 0:d.bufferColors,Uint32Array):void 0,bufferLookupValues:v?this.ER.zV(t,v,null===(f=this.jU)||void 0===f?void 0:f.bufferLookupValues,Float32Array):void 0,bufferSizes:b?this.ER.zV(t,b,null===(A=this.jU)||void 0===A?void 0:A.bufferSizes,Float32Array):void 0,bufferRotations:M?this.ER.zV(t,M,null===(g=this.jU)||void 0===g?void 0:g.bufferRotations,Float32Array):void 0,bufferLengthSoFar:i,lengthSoFarX:s,lengthSoFarY:e,bufferSize:t,valueCount:p.uc}}else{const t=this.jU.bufferX,i=this.jU.bufferY;ot.forEach((s=>{var e,h,r,n;const o=y.subarray(s.min,s.max+1),a=S.subarray(s.min,s.max+1);if(this.ER.VV(t,s.min*(this.ft.wi()?2:1),Zt(o,this.ft.wi())),this.ER.VV(i,s.min*(this.ft.wi()?2:1),Zt(a,this.ft.wi())),x&&(null===(e=this.jU)||void 0===e?void 0:e.bufferColors)){const t=x.subarray(s.min,s.max+1);this.ER.VV(this.jU.bufferColors,s.min,t,Uint32Array)}if(v&&(null===(h=this.jU)||void 0===h?void 0:h.bufferLookupValues)){const t=v.subarray(s.min,s.max+1);this.ER.VV(this.jU.bufferLookupValues,s.min,t,Float32Array)}if(M&&(null===(r=this.jU)||void 0===r?void 0:r.bufferRotations)){const t=M.subarray(s.min,s.max+1);this.ER.VV(this.jU.bufferRotations,s.min,t,Float32Array)}if(b&&(null===(n=this.jU)||void 0===n?void 0:n.bufferSizes)){const t=b.subarray(s.min,s.max+1);this.ER.VV(this.jU.bufferSizes,s.min,t,Float32Array)}})),this.jU.valueCount=p.uc}this.JU=this.jU}if(this.lE.mV(this.ft),F||et||tt||At){if(O&&D&&!1!==B){const t=-1===B?"primitive":"triangulated",i=V?["lookup",V.lookUpProperty,V.lut]:z?"attribute":R?["gradient",R]:E?["gradient",E]:"uniform";this.bG="primitive"===t?{type:t,shader:this.ER.az(ng["2D"],ng.Color({dataType:i}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0,splitPosAttribute:!0}),P&&ng.StippleTexture),lineStyleSolid:I,lineStyleDashed:P,fillStyleSolid:L,fillStyleLinearGradient:R,fillStyleRadialGradient:E,fillStyleIndividual:z,fillStylePaletted:V,mousePickingShader:ft&&this.ER.az(ng["2D"],ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0,splitPosAttribute:!0}),P&&ng.StippleTexture,ng.MousePicking)}:"triangulated"===t?{type:t,shader:this.ER.az(ng["2D"],ng.Color({dataType:i}),ng.LineInstanced2D({axisWorldTranslation:IA(this.ft),normalSource:void 0,splitPosAttribute:!0}),this.vG?ng.AliasedEdge:void 0,P&&ng.StippleTextureInstanced),geometry:cp(this.ER,B),thickness:B,lineStyleSolid:I,lineStyleDashed:P,fillStyleSolid:L,fillStyleLinearGradient:R,fillStyleRadialGradient:E,fillStyleIndividual:z,fillStylePaletted:V,mousePickingShader:ft&&this.ER.az(ng["2D"],ng.LineInstanced2D({axisWorldTranslation:IA(this.ft),normalSource:void 0,splitPosAttribute:!0}),P&&ng.StippleTextureInstanced,ng.MousePicking)}:{type:"none"}}else this.bG={type:"none"};if(this.qU=H?{shader:this.ER.az(ng["2D"],Y&&ng.Color({dataType:["lookup",Y.lookUpProperty,Y.lut]}),U&&ng.Color({dataType:"attribute"}),N&&ng.Color({dataType:"uniform"}),G&&ng.Color({dataType:["gradient",G]}),W&&ng.Color({dataType:["gradient",W]}),ng.Area2D({axisWorldTranslation:IA(this.ft),normalSource:void 0,splitPosAttribute:!0})),geometry:Yp(this.ER),fillStyleSolid:N,fillStyleLinearGradient:G,fillStyleRadialGradient:W,fillStyleIndividual:U,fillStylePaletted:Y,mousePickingShader:ft&&this.ER.az(ng["2D"],ng.Area2D({axisWorldTranslation:IA(this.ft),normalSource:void 0,splitPosAttribute:!0}),ng.MousePicking)}:void 0,K){const t=!(!J&&!it),i=st>1||t,s=b?"attribute":"uniform",e=!i&&ng.PointSize("uniform"),h=ng.VertexLocation({offset:i&&!t?{dataType:s,sizeUnit:"px",symmetric:!0,rotation:{dataType:M?"attribute-deg":"uniform"},useAlignment:!0}:i&&t?{dataType:s,sizeUnit:"scale",rotation:{dataType:M?"attribute-deg":"uniform"},useAlignment:!0}:void 0,axisWorldTranslation:IA(this.ft),normalSource:void 0,splitPosAttribute:!0});this.$U={shader:this.ER.az(ng["2D"],e,h,$&&ng.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!it}),X&&ng.Color({dataType:["gradient",X],overrideOpacity:!0,maskTexture:!!it}),j&&ng.Color({dataType:["gradient",j],overrideOpacity:!0,maskTexture:!!it}),Z&&ng.Color({dataType:["lookup",Z.getLookUpProperty(),Z.getPalette()],overrideOpacity:!0,maskTexture:!!it}),Q&&ng.Color({dataType:"attribute",overrideOpacity:!0,maskTexture:!!it}),J&&ng.Color({dataType:["image",J],overrideOpacity:!0,maskTexture:!!it})),geometry:Cp(q,this.ER,"uniform"===s?st:25),fillStyleSolid:$,fillStyleLinearGradient:X,fillStyleRadialGradient:j,fillStylePaletted:Z,fillStyleIndividual:Q,fillStyleImage:J,mousePickingShader:ft&&this.ER.az(ng["2D"],e,h,ng.MousePicking),shapeIcon:it,pointSizeAsScale:t,instancedRendering:i}}else this.$U=void 0}const mt=Hh({min:{x:this.xt(),y:this.ft.y.getInnerStart()},max:{x:this.bt(),y:this._t()}},{x:this.xl(),y:this.bl()},this.ft),yt=Hh({min:{x:this.xt(),y:this.Mt()},max:{x:this.bt(),y:this._t()}},{x:this.xl(),y:this.bl()},this.ft);if(this.tY=this.ER.GO(R,this,yt),this.iY=this.ER.WO(E,this,yt),this.sY=this.ER.GO(G,this,mt),this.eY=this.ER.WO(W,this,mt),this.hY=this.ER.GO(X,this,yt),this.rY=this.ER.WO(j,this,yt),(void 0===this.HU||rt)&&v&&(BA(V)||BA(Y)||BA(Z))){const t=this.HU?ot:[p.Uc()];let i=this.HU?this.HU.max:Bi,s=this.HU?this.HU.min:Di;const e=v;t.forEach((t=>{for(let h=t.min;h<=t.max;h+=1){const t=e[h];s=t<s?t:s,i=t>i?t:i}})),this.HU={min:s,max:i}}return this._G=P?this.ER.PO(P.getPattern()):void 0,this.rU=this.ER.EO(this,this.rU,J,it,et,this.nU),this.Au(k),this.zU=T,this.OU=this.IU,this.PU.o=!1,this.DU.o=!1,this.UU.length=0,this.Ja=!1,this.LU.o=!1,this.ad.o=!1,this.Lo.o=!1,this}VL(t){var i,s,e,h,r,n,o,a,l,u,c,d,f,A,g,p,m;const y=this.ER.gl,S=null===(i=this.jU)||void 0===i?void 0:i.bufferX,v=null===(s=this.jU)||void 0===s?void 0:s.bufferY,x=null===(e=this.jU)||void 0===e?void 0:e.bufferColors,b=null===(h=this.jU)||void 0===h?void 0:h.bufferLookupValues,M=null===(r=this.jU)||void 0===r?void 0:r.valueCount,_=null===(n=this.JU)||void 0===n?void 0:n.valueCount,w=null===(o=this.ad._())||void 0===o?void 0:o.Ut,C=null==w?void 0:w.Wc();if(!S||!v||!w)return this;const k=(i,s,e)=>{if(Qp(this.ER,i,this.ft.wi(),S,"aLocation","X",1,!1,y.FLOAT,Float32Array.BYTES_PER_ELEMENT),Qp(this.ER,i,this.ft.wi(),v,"aLocation","Y",1,!1,y.FLOAT,Float32Array.BYTES_PER_ELEMENT),s&&1!==t){if(!x)return!1;Qp(this.ER,i,!1,x,"aColor","",4,!0,y.UNSIGNED_BYTE,1)}if(e&&"value"===e.lookUpProperty&&1!==t){if(!b)return!1;Qp(this.ER,i,!1,b,"aLookupValue","",1,!1,y.FLOAT,Float32Array.BYTES_PER_ELEMENT)}return!0},T=1===t?null===(a=this.qU)||void 0===a?void 0:a.mousePickingShader:null===(l=this.qU)||void 0===l?void 0:l.shader;if(this.qU&&T&&void 0!==M&&M>0&&C){const i=this.qU;this.ER.ZR(T).lV(T,((s,e,h,r)=>!!this.ER.VO(h,t,this,{uniforms:this.lE,mousePickingColor:this.mN,fillStyleSolid:i.fillStyleSolid,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,fillStylePaletted:i.fillStylePaletted,linearGradientInfo:this.sY,radialGradientInfo:this.eY,lookupValueRange:i.fillStylePaletted?DA(i.fillStylePaletted,this,this.HU):void 0,lookupValueBuffer:null})&&!!k(h,i.fillStyleIndividual,i.fillStylePaletted)&&(null==i||i.geometry.ZR(h).Zm(M-1),!0)))}const F="none"===this.bG.type?void 0:1===t?this.bG.mousePickingShader:this.bG.shader;if("none"!==this.bG.type&&F&&void 0!==M&&M>0){const i=this.bG;this.ER.ZR(F).lV(F,((s,e,h,r)=>{var n,o;if(!this.ER.VO(h,t,this,{uniforms:this.lE,mousePickingColor:this.mN,fillStyleSolid:i.fillStyleSolid,fillStylePaletted:i.fillStylePaletted,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,fillStyleIndividual:i.fillStyleIndividual,linearGradientInfo:this.tY,radialGradientInfo:this.iY,lookupValueRange:i.fillStylePaletted?DA(i.fillStylePaletted,this,this.HU):void 0,lookupValueBuffer:"primitive"===i.type?b:null,colorBuffer:"primitive"===i.type?x:null,coordsX:"primitive"===i.type?S:void 0,coordsY:"primitive"===i.type?v:void 0,coordsHighPrecision:this.ft.wi()}))return!1;if(i.lineStyleDashed){if(!this._G)return!1;this.ER.cV(s("uStippleCount"),[this.cs.ai().x/this._G.LO,this.cs.ai().y/this._G.LO]).fV(r("uStippleTextureWidthLimiter"),this._G.BO/this._G.LO).fV(s("uStippleScale"),i.lineStyleDashed.getPatternScale()).dV(s("uStippleTexture"),this._G.DO,1)}if("primitive"===i.type){if(i.lineStyleDashed){if(!(null===(n=this.jU)||void 0===n?void 0:n.bufferLengthSoFar))return!1;this.ER.WV(e("aLengthSoFar"),this.jU.bufferLengthSoFar)}fp.yG(this.nN,M)}else{if(!k(h,i.fillStyleIndividual,i.fillStylePaletted))return!1;if(i.lineStyleDashed){if(!(null===(o=this.jU)||void 0===o?void 0:o.bufferLengthSoFar))return!1;Qp(this.ER,h,!1,this.jU.bufferLengthSoFar,"aLengthSoFar","",2,!1,y.FLOAT,Float32Array.BYTES_PER_ELEMENT)}dp.VL(this.nN,i.geometry,h,this.vG&&1!==t,1===t,i.thickness,M-1)}return!0}))}const I=null===(u=this.JU)||void 0===u?void 0:u.bufferX,P=null===(c=this.JU)||void 0===c?void 0:c.bufferY,D=null===(d=this.JU)||void 0===d?void 0:d.bufferColors,B=null===(f=this.JU)||void 0===f?void 0:f.bufferLookupValues,L=null===(A=this.JU)||void 0===A?void 0:A.bufferSizes,R=null===(g=this.JU)||void 0===g?void 0:g.bufferRotations,E=1===t?null===(p=this.$U)||void 0===p?void 0:p.mousePickingShader:null===(m=this.$U)||void 0===m?void 0:m.shader,z=this.$U;let V=1;if(C){const t=this.ad?Math.abs((this.bt()-this.xt())/w.getSampleCount()):0,i=this.ft.x.getInnerInterval()/t,s=this.DU._(),e=this.ft.x.ni()/s/1,h=2*e;V=i<=e?1:Math.max(1-(i-e)/(h-e),0)}if(E&&z&&I&&P&&V>0&&void 0!==_&&_>0){const i=z,s=i.instancedRendering?1:0;this.ER.ZR(E).lV(E,((e,h,r,n)=>{if(!this.ER.VO(r,t,this,{uniforms:this.lE,mousePickingColor:this.mN,fillStyleSolid:i.fillStyleSolid,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,linearGradientInfo:this.hY,radialGradientInfo:this.rY,fillStylePaletted:i.fillStylePaletted,fillStyleIndividual:i.fillStyleIndividual,lookupValueRange:i.fillStylePaletted?DA(i.fillStylePaletted,this,this.HU):void 0,lookupValueBuffer:B,lookupValueAttribDivisor:s,colorBuffer:D,colorAttribDivisor:s,fillStyleImage:i.fillStyleImage,texturedFillGLInfo:this.rU,texCoordAttribDivisor:0,maskTexture:i.shapeIcon&&this.rU,maskTextureCoordsAttribDivisor:0}))return!1;if(this.ft.wi()?this.ER.uV(I,s,{location:h("aPos_highpartX"),size:1},{location:h("aPos_lowpartX"),size:1}).uV(P,s,{location:h("aPos_highpartY"),size:1},{location:h("aPos_lowpartY"),size:1}):this.ER.XV(h("aPosX"),I,s).XV(h("aPosY"),P,s),1!==t&&this.ER.fV(e("uOpacity"),V),i.instancedRendering)if(R)this.ER.XV(h("aRotDeg"),R,s).fV(e("uBaseRotDeg"),i.geometry.BW);else{const t=fs(this.BU._()+i.geometry.BW),s=Math.sin(t),h=Math.cos(t);this.ER.cV(e("uRot"),[s,h])}return this.ER.cV(n("uOffsetAlignment"),[-this.RU.x/2,-this.RU.y/2]),i.geometry.Zm(r,L,_,i.pointSizeAsScale&&this.rU?{scale:this.DU._(),width:i.shapeIcon?i.shapeIcon.ai().x:this.rU.texture.Iz,height:i.shapeIcon?i.shapeIcon.ai().y:this.rU.texture.Pz}:this.DU._(),i.instancedRendering),!0}))}return this}uN(t){return this.pN===t&&{}}dispose(){var t,i,s,e,h,r,n,o,a;return super.dispose(),this.ER.yV(null===(t=this.jU)||void 0===t?void 0:t.bufferX),this.ER.yV(null===(i=this.jU)||void 0===i?void 0:i.bufferY),this.ER.yV(null===(s=this.jU)||void 0===s?void 0:s.bufferColors),this.ER.yV(null===(e=this.jU)||void 0===e?void 0:e.bufferLookupValues),this.ER.yV(null===(h=this.JU)||void 0===h?void 0:h.bufferX),this.ER.yV(null===(r=this.JU)||void 0===r?void 0:r.bufferY),this.ER.yV(null===(n=this.JU)||void 0===n?void 0:n.bufferColors),this.ER.yV(null===(o=this.JU)||void 0===o?void 0:o.bufferLookupValues),this.bG={type:"none"},this.qU=void 0,this.$U=void 0,this.vW.Zp(),null===(a=this.ad._())||void 0===a||a.Wt(),this.jU=void 0,this.JU=void 0,this.tY=void 0,this.iY=void 0,this.sY=void 0,this.eY=void 0,this.hY=void 0,this.rY=void 0,this.ER.zO(this,this.rU),this}OR(){return this.dispose(),this}nY(t){if(!this.XU){const{xValues:i,yValues:s}=t.readBack();this.XU={min:{x:Di,y:Di},max:{x:Bi,y:Bi}};const e=i.length;for(let t=0;t<e;t+=1){const e=i[t],h=s[t];this.XU.min.x=e<this.XU.min.x?e:this.XU.min.x,this.XU.min.y=h<this.XU.min.y?h:this.XU.min.y,this.XU.max.x=e>this.XU.max.x?e:this.XU.max.x,this.XU.max.y=h>this.XU.max.y?h:this.XU.max.y}return this.YU.length=0,this.XU}const i=t.kc,s=t.Tc;if(this.YU.length>0&&i&&s){for(const t of this.YU){for(let e=t.min;e<=t.max;e+=1){const t=i[e],h=s[e];this.XU.min.x=t<this.XU.min.x?t:this.XU.min.x,this.XU.min.y=h<this.XU.min.y?h:this.XU.min.y,this.XU.max.x=t>this.XU.max.x?t:this.XU.max.x,this.XU.max.y=h>this.XU.max.y?h:this.XU.max.y}this.YU.length=0}return this.XU}return this.XU}bt(){var t,i,s,e,h;const r=null===(t=this.ad._())||void 0===t?void 0:t.Ut;if(!r)return 0;const n=r.Wc();return"ProgressiveX"===n?(null===(i=r.Cc())||void 0===i?void 0:i.x)||0:"RegressiveX"===n?(null===(s=r.Hc())||void 0===s?void 0:s.x)||0:"ProgressiveY"===n?(null===(e=this.ZU)||void 0===e?void 0:e.max)||0:"RegressiveY"===n?(null===(h=this.ZU)||void 0===h?void 0:h.max)||0:this.nY(r).max.x}xt(){var t,i,s,e,h;const r=null===(t=this.ad._())||void 0===t?void 0:t.Ut;if(!r)return 0;const n=r.Wc();return"ProgressiveX"===n?(null===(i=r.Hc())||void 0===i?void 0:i.x)||0:"RegressiveX"===n?(null===(s=r.Cc())||void 0===s?void 0:s.x)||0:"ProgressiveY"===n?(null===(e=this.ZU)||void 0===e?void 0:e.min)||0:"RegressiveY"===n?(null===(h=this.ZU)||void 0===h?void 0:h.min)||0:this.nY(r).min.x}_t(){var t,i,s,e,h;const r=null===(t=this.ad._())||void 0===t?void 0:t.Ut;if(!r)return 0;const n=r.Wc();return"ProgressiveX"===n?It(null===(i=this.ZU)||void 0===i?void 0:i.max,0):"RegressiveX"===n?It(null===(s=this.ZU)||void 0===s?void 0:s.max,0):"ProgressiveY"===n?It(null===(e=r.Cc())||void 0===e?void 0:e.y,0):"RegressiveY"===n?It(null===(h=r.Hc())||void 0===h?void 0:h.y,0):this.nY(r).max.y}Mt(){var t,i,s,e,h;const r=null===(t=this.ad._())||void 0===t?void 0:t.Ut;if(!r)return 0;const n=r.Wc();return"ProgressiveX"===n?It(null===(i=this.ZU)||void 0===i?void 0:i.min,0):"RegressiveX"===n?It(null===(s=this.ZU)||void 0===s?void 0:s.min,0):"ProgressiveY"===n?It(null===(e=r.Hc())||void 0===e?void 0:e.y,0):"RegressiveY"===n?It(null===(h=r.Cc())||void 0===h?void 0:h.y,0):this.nY(r).min.y}xl(){var t,i;let s=this.DU._();this.rU&&(s=Math.max(this.rU.texture.Iz,this.rU.texture.Pz)*this.DU._());const e=Math.max(_i(this.uu),(null===(t=this.ad._())||void 0===t?void 0:t.Ut.xc)?25:s),h=null===(i=this.ad._())||void 0===i?void 0:i.Ut.Wc();return!h||"ProgressiveX"!==h&&"RegressiveX"!==h?e:0}bl(){var t,i;let s=this.DU._();this.rU&&(s=Math.max(this.rU.texture.Iz,this.rU.texture.Pz)*this.DU._());const e=Math.max(_i(this.uu),(null===(t=this.ad._())||void 0===t?void 0:t.Ut.xc)?25:s),h=null===(i=this.ad._())||void 0===i?void 0:i.Ut.Wc();return!h||"ProgressiveY"!==h&&"RegressiveY"!==h?e:0}}const jp=(t,i,s,e,h,r,n,o,a,l,u,c,d)=>{if("ProgressiveX"!==l)throw new Error("Unimplemented data pattern");const f=i[0],A=i[1],g=f.length,p=f[0],m=f[g-1],y=A[0],S=A[g-1],v=c?2:1;if(o&&a&&o.firstX&&o.lastX&&p>=o.firstX){const i=fn(o.lastX,0,g-1,(t=>f[t]));if(f[i]===o.lastX){const a=o.bufferSize-o.valueCount,l=i+1,u=g-l;if(0===u)return o;if(a>=u){const i=pn(f,l,void 0),a=pn(A,l,void 0);if(t.VV(o.bufferX,o.valueCount*v,d(i)),t.VV(o.bufferY,o.valueCount*v,d(a)),s&&o.bufferColors){const i=s.slice(l);t.VV(o.bufferColors,o.valueCount,i,Uint32Array)}if(e&&o.bufferLookupValues){const i=e.slice(l);t.VV(o.bufferLookupValues,o.valueCount,i,Float32Array)}if(h&&o.bufferSizes){const i=h.slice(l);t.VV(o.bufferSizes,o.valueCount,i,Float32Array)}if(r&&o.bufferRotations){const i=r.slice(l);t.VV(o.bufferRotations,o.valueCount,i,Float32Array)}if(n&&o.bufferLengthSoFar){const[s,e,h]=Zp(i,a,o.lastX||0,o.lastY||0,o.lengthSoFarX,o.lengthSoFarY);t.VV(o.bufferLengthSoFar,2*o.valueCount,s,Float32Array),o.lengthSoFarX=e,o.lengthSoFarY=h}return o.valueCount+=u,o.lastX=m,o.lastY=S,o}}}const x=g+u,b=t.zV(x*v,d(f),null==o?void 0:o.bufferX),M=t.zV(x*v,d(A),null==o?void 0:o.bufferY),_=s?t.zV(x,s,null==o?void 0:o.bufferColors,Uint32Array):void 0,w=e?t.zV(x,e,null==o?void 0:o.bufferLookupValues,Float32Array):void 0,C=h?t.zV(x,h,null==o?void 0:o.bufferSizes,Float32Array):void 0,k=r?t.zV(x,r,null==o?void 0:o.bufferRotations,Float32Array):void 0;let T,F=0,I=0;if(n){const i=Zp(f,A,f[0],A[0],0,0);T=t.zV(2*x,i[0],null==o?void 0:o.bufferLengthSoFar,Float32Array),F=i[1],I=i[2]}return{bufferX:b,bufferY:M,bufferColors:_,bufferLookupValues:w,bufferSizes:C,bufferRotations:k,bufferSize:x,bufferLengthSoFar:T,valueCount:g,firstX:p,lastX:m,firstY:y,lastY:S,lengthSoFarX:F,lengthSoFarY:I}},Zp=(t,i,s,e,h,r)=>{const n=t.length,o=new Float32Array(2*n);if(0===n)return[o,0,0];let a=0,l=s,u=e,c=h,d=r;for(let s=0;s<n;s+=1){const e=t[s],h=i[s];c+=Math.abs(l-e),d+=Math.abs(u-h),o[a]=c,o[a+1]=d,a+=2,l=e,u=h}return[o,c,d]},Qp=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.gl;if(s){const s=i.attribute(`${h}A_highpart${r}`),c=i.attribute(`${h}A_lowpart${r}`),d=i.attribute(`${h}B_highpart${r}`),f=i.attribute(`${h}B_lowpart${r}`);u.bindBuffer(u.ARRAY_BUFFER,e),u.vertexAttribPointer(s,n,a,o,2*n*l,0*l),u.vertexAttribPointer(c,n,a,o,2*n*l,n*l),t.YV(s,1),t.YV(c,1),u.enableVertexAttribArray(s),u.enableVertexAttribArray(c),u.vertexAttribPointer(d,n,a,o,2*n*l,2*n*l),u.vertexAttribPointer(f,n,a,o,2*n*l,3*n*l),t.YV(d,1),t.YV(f,1),u.enableVertexAttribArray(d),u.enableVertexAttribArray(f),u.bindBuffer(u.ARRAY_BUFFER,null)}else{const s=i.attribute(`${h}A${r}`),c=i.attribute(`${h}B${r}`);u.bindBuffer(u.ARRAY_BUFFER,e),u.vertexAttribPointer(s,n,a,o,n*l,0*l),u.vertexAttribPointer(c,n,a,o,n*l,n*l),t.YV(s,1),t.YV(c,1),u.enableVertexAttribArray(s),u.enableVertexAttribArray(c),u.bindBuffer(u.ARRAY_BUFFER,null)}},Jp={translation:(t,i)=>[1,0,0,0,1,0,t,i,1],rotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,-s,0,s,i,0,0,0,1]},scaling:(t,i)=>[t,0,0,0,i,0,0,0,1],translate:(t,i,s)=>Jp.multiply(t,Jp.translation(i,s)),rotate:(t,i)=>Jp.multiply(t,Jp.rotation(i)),scale:(t,i,s)=>Jp.multiply(t,Jp.scaling(i,s)),multiply(t,i){const s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=i[0],d=i[1],f=i[2],A=i[3],g=i[4],p=i[5],m=i[6],y=i[7],S=i[8];return[c*s+d*r+f*a,c*e+d*n+f*l,c*h+d*o+f*u,A*s+g*r+p*a,A*e+g*n+p*l,A*h+g*o+p*u,m*s+y*r+S*a,m*e+y*n+S*l,m*h+y*o+S*u]},projection:(t,i,s)=>[2/t,0,0,0,-2*s/i,0,-1,1*s,1]};class Kp extends qh{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.oY=[],this.lE=new Zg,this.aY=[l(0,0),l(0,0),l(0,0),l(0,0)],this.lY=A(l(0,0),l(0,0)),this.uY=A(l(0,0),l(0,0)),this.cY=l(0,0),this.dY=l(0,0),this.IT=l(0,0),this.fY=l(0,0),this.AY=0,this.gY=0,this.gN=PA({fillStyleSolid:()=>W(this.be)&&this.be,fillStyleRadialGradient:()=>tt(this.be)&&this.be,fillStyleLinearGradient:()=>et(this.be)&&this.be}),this.nN=t,this.oN=i,this.pN=r,this.mN=n,this.ER=t.aN(),this.oN=i,this.PG=t.Yn.Zn}Ds(){const t=this.ha(),i=this.ea(),s=this.Lo._();if(t){const t=this.ia(),e=this.gN.fillStyleSolid(t),h=this.gN.fillStyleRadialGradient(t),r=this.gN.fillStyleLinearGradient(t),n=e||h||r,o=this.ER,a=this.ER.Xz(),u=a!==this.gY;if(this.gY=a,this.lE.mV(this.ft),this.pa.o||u){this.pY&&this.pY.QR(this),this.font.M(ph(this.pa._(),a));const t=this.font._();this.pY=this.ER.Oh(t.properties.family),this.pY.ZR(this)}const c=this.font.o,d=c||this.ua.o;if(d&&this.pY){const t=this.font._();[this.mY,this.uY]=this.pY.KR(this.ua._(),t,this.nN.ts.isDark),this.oY.forEach((t=>{t.texCoordBuff&&o.yV(t.texCoordBuff),t.vertexBuff&&o.yV(t.vertexBuff)})),this.oY=this.mY.map((t=>({texCoordBuff:o.oV(t.texCoords,!1),texture:t.texture,info:t}))),this.pa.o=!1,this.font.o=!1,this.ua.o=!1}const f=this.ft.Gi()||i,A=this.ca.o||this.fa.o||this.da.o||this.Aa.o||this.ya.o||this.jt.o||d||f,g=this.ya._(),p=hs(l(this.fa._()+1,this.da._()+1),.5);if(A&&this.mY&&(this.cY=l(-(g.left*a+this.uY.max.x-this.uY.min.x+g.right*a)*p.x-this.uY.min.x+g.right*a,-(g.bottom*a+this.uY.max.y-this.uY.min.y+g.top*a)*p.y-this.uY.min.y+g.top*a)),(A||f||this.ga.o||this.ia())&&this.be!==z){if(this.mY){const t=rs(this.ca._(),this.Aa._()),i=ct(t,this.ft,this.cs.ft),s=hs(i,a);this.fY=s;const e=fs(this.ga._());this.AY=e,d&&this.oY.forEach((t=>{const i=t.info;i&&(t.vertexBuffLen=i.vertices.length/2,t.vertexBuff=o.oV(i.vertices,!0,t.vertexBuff))}));const h=this.jt._(),r=[rs(qi(l((this.uY.min.x+(-h.left-g.left)*a+this.cY.x)/a,(this.uY.max.y+(h.top+g.top)*a+this.cY.y)/a),this.ma,e),i),rs(qi(l((this.uY.max.x+(h.right+g.right)*a+this.cY.x)/a,(this.uY.max.y+(h.top+g.top)*a+this.cY.y)/a),this.ma,e),i),rs(qi(l((this.uY.max.x+(h.right+g.right)*a+this.cY.x)/a,(this.uY.min.y+(-h.bottom-g.bottom)*a+this.cY.y)/a),this.ma,e),i),rs(qi(l((this.uY.min.x+(-h.left-g.left)*a+this.cY.x)/a,(this.uY.min.y+(-h.bottom-g.bottom)*a+this.cY.y)/a),this.ma,e),i)];this.aY=[ct(r[0],this.cs.ft,this.ft),ct(r[1],this.cs.ft,this.ft),ct(r[2],this.cs.ft,this.ft),ct(r[3],this.cs.ft,this.ft)];const n=ji(r);this.dY=l(-(n.max.x-n.min.x)*a*p.x-n.min.x*a+this.fY.x,-(n.max.y-n.min.y)*a*p.y-n.min.y*a+this.fY.y),this.Ig=ns(n.max,n.min);const u=ji(this.aY),c=this.ft.mi(u.min,this.dY),f=this.ft.mi(u.max,this.dY);this.lY=ji([c,f])}h?this._N=zg(this.lY,this.ft,h.getPosition(),h.getExtent(),h.getShape(),this.ER.Xz()):r?this.wN=Vg(this.lY,this.ft,r.getAngle(!0),this.ER.Xz()):(this._N=void 0,this.wN=void 0)}(this.ia()||c)&&(this.dE=n?this.ER.az(ng["2D"],ng.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.PG}),ng.Color({dataType:h?["gradient",h]:r?["gradient",r]:"uniform",maskTextureText:!0})):void 0),this.yY=s&&n?this.yY||this.ER.az(ng["2D"],ng.MousePicking,ng.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.PG})):void 0,this.ca.o=!1,this.fa.o=!1,this.da.o=!1,this.Aa.o=!1,this.ga.o=!1,this.ra(this.be)}return this.Sa=t,this}VL(t){if(this.ha()){const i=1===t?this.yY:this.dE;if(!i||0===this.oY.length)return this;const s=this.gN.fillStyleSolid(!1),e=this.gN.fillStyleRadialGradient(!1),h=this.gN.fillStyleLinearGradient(!1),r=this.cs.NE(),n=r.x,o=r.y;let a=Jp.projection(n,o,-1);const l=Jp.translation(this.cY.x,this.cY.y),u=Jp.translation(this.dY.x,this.dY.y);a=Jp.translate(a,this.fY.x,this.fY.y),a=Jp.multiply(a,u),a=Jp.rotate(a,this.AY),a=Jp.multiply(a,l),1===t&&(a=Jp.scale(a,this.uY.max.x,this.uY.max.y)),this.ER.ZR(i).lV(i,((i,n,o,l)=>{if(this.ER.DV(i("uMatrix"),a).fV(i("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0),this.PG&&this.ER.cV(l("uViewportSizePx"),[r.x*this.ER.Xz(),r.y*this.ER.Xz()]),1===t)this.ER.gR(i("uColor"),this.mN);else if(s)this.ER.gR(i("uColor"),s.getColor());else if(e&&this._N){this.ER.cV(i("uCenter"),this._N.center).cV(i("uDistance"),this._N.distance).IV(i("uBounds"),this._N.bounds).fV(i("uAspect"),this._N.aspectRatio);const t=e.getColorStops();for(let s=0;s<t.length;s+=1)this.ER.gR(i(`color_${s}`),t[s].color).fV(i(`stop_${s}`),t[s].offset)}else if(h&&this.wN){this.ER.cV(i("uStartPoint"),this.wN.startPoint).cV(i("uEndPoint"),this.wN.endPoint).IV(i("uBounds"),this.wN.bounds);const t=h.getColorStops();for(let s=0;s<t.length;s+=1)this.ER.gR(i(`color_${s}`),t[s].color).fV(i(`stop_${s}`),t[s].offset)}return 1===t&&this.ER.WV(n("aPos"),this.ER.cO).Zm(this.ER.gl.TRIANGLES,6),1!==t&&this.oY.forEach((t=>{this.ER.WV(n("aPos"),t.vertexBuff).WV(n("aMaskTextureCoord"),t.texCoordBuff).dV(i("uMaskTexture"),t.texture,0).Zm(this.ER.gl.TRIANGLES,t.vertexBuffLen)})),!0}))}return this}uN(t){return this.pN===t&&{}}Ue(){return this.ha()?this.aY:[]}Zc(){return this.ha()&&this.Ig?this.Ig:l(0,0)}ai(){if(this.ha()&&this.lY){const t=this.lY;return l(t.max.x-t.min.x,t.max.y-t.min.y)}return l(0,0)}OR(){return this.oY.forEach((t=>{t.texCoordBuff&&this.ER.yV(t.texCoordBuff),t.vertexBuff&&this.ER.yV(t.vertexBuff)})),this.oY=[],this.pY&&this.pY.QR(this),this}bt(){return this.lY.max.x}xt(){return this.lY.min.x}_t(){return this.lY.max.y}Mt(){return this.lY.min.y}xl(){return 0}bl(){return 0}}class qp{constructor(t,i,s){this.SY=new Set,this.vY=t=>(this.SY.add(t),t),this.xY=t=>(this.SY.delete(t),t.OR(),this),this.cs=t,this.Qo=i,this.bY=s}zL(t){this.SY.delete(t)&&this.SY.add(t)}U(){for(const t of this.SY)t.OR().dispose();this.cs.Mn(this.Qo)}vs(){return this.cs.vs(),this}bn(){return this.Qo}}class tm extends qp{constructor(){super(...arguments),this.MY=p(void 0),this.Jo=!1}tx(t){return this.MY.M(t),this}wp(){return this.MY._()}}class im extends tm{constructor(t,i,s){super(t,i,s),this.nN=t,this.gl=t.aN(),this._Y=this.SY}nV(t){const i=t instanceof Yh&&t;if(!i)return Li;const s=i.xt(),e=i.bt(),h=i.Mt(),r=i._t();if(s===Di||e===Bi||h===Di||r===Bi)return Li;const n=i.xl(),o=i.bl(),a=Hh({min:{x:s,y:h},max:{x:e,y:r}},{x:n,y:o},i.ft),l={min:ct(a.min,i.ft,t.cs.ft),max:ct(a.max,i.ft,t.cs.ft)},u=this.MY._();let c;if(u){if(c={min:{x:Math.max(l.min.x,u.x),y:Math.max(l.min.y,u.y)},max:{x:Math.min(l.max.x,u.x+u.width),y:Math.min(l.max.y,u.y+u.height)}},c.max.x<c.min.x||c.max.y<c.min.y)return Li}else c=l;return c}wY(t){const i=Array.from(this._Y.values());for(let s=0;s<i.length;s+=1){const e=i[s],h=e.uN(t);if(h)return{entity:e,index:s,collectionMember:h.collectionMember}}}ze(t){const i=this.nN.CY();return this.vY(new Ap(this.nN,this,t,this.xY,[],i,this.nN.kY(i)))}Rg(t){return this.vY(new gp(this.nN,this,t,this.xY,[],(()=>{const t=this.nN.CY();return{id:t,color:this.nN.kY(t)}})))}sy(t,i,s){const e=this.nN.CY();return this.vY(new bp(this.nN,this,t,this.xY,s,e,this.nN.kY(e),i))}fd(t){const i=this.nN.CY();return this.vY(new Xp(this.nN,this,t,this.xY,i,this.nN.kY(i)))}Dr(t){const i=this.nN.CY();return this.vY(new Kp(this.nN,this,t,this.xY,[],i,this.nN.kY(i)))}bS(t){const i=this.nN.CY();return this.vY(new kp(this.nN,this,t,this.xY,[],i,this.nN.kY(i)))}sc(t,i=nr.Simple){const s=this.nN.CY();if(i===nr.Simple)return this.vY(new Ip(this.nN,this,t,this.xY,[],s,this.nN.kY(s)));throw new Error("GlEngine.addPolygon | No such polygon type!")}$x(t){return this.vY(new Tp(this.nN,this,t,this.xY,[],(()=>{const t=this.nN.CY();return{id:t,color:this.nN.kY(t)}})))}Te(t){const i=this.nN.CY();return this.vY(new Fp(this.nN,this,t,this.xY,[],i,this.nN.kY(i)))}uw(t){const i=this.nN.CY();return this.vY(new lp(this.nN,this,t,this.xY,[],i,this.nN.kY(i)))}Kc(t){const i=this.nN.CY();return this.vY(new ip(this.nN,this,t,this.xY,[],i,this.nN.kY(i)))}O_(t,i,s){if("intensity"===s.heatmapDataType){const e=this.nN.CY();return this.vY(new Np(this.nN,this,t,this.xY,i,e,this.nN.kY(e),s))}throw new gt("Unimplemented Heatmap Grid Static type")}D_(t,i,s){const e=this.nN.CY();return this.vY(new Vp(this.nN,this,t,this.xY,i,s,e,this.nN.kY(e)))}zb(t,i,s){const e=this.nN.CY();return this.vY(new Wp(this.nN,this,t,this.xY,i,s,e,this.nN.kY(e)))}TY(t){return this.vY(new qg(this.nN,this,this.xY,[],t))}Ds(){if(this.Jo){this.Jo=!1;const t=Array.from(this.SY).sort(((t,i)=>t.qo()-i.qo()));this.SY.clear();for(const i of t)this.SY.add(i)}for(const t of this.SY)t.Ds();return this}VL(t,i){const s=this.MY._();if(s&&this.gl.rV(s.x*this.gl.Xz()*i,s.y*this.gl.Xz()*i,s.width*this.gl.Xz()*i,s.height*this.gl.Xz()*i),1!==t)for(const i of this.SY)i.getVisible()&&i.VL(t);else for(const i of this.SY)i.getMouseInteractions()&&i.getVisible()&&i.VL(t);return this.gl.tV(!1),this}}class sm extends Og{constructor(t){super(t)}}class em extends sm{constructor(t){super(t),this.FY="attribute";const{vertices:i,drawSize:s,drawMode:e}=hm(t.gl);this.CR=t.oV(i),this.dG=s,this.fG=e}Zm(t,i,s,e){return this.ER.uV(this.CR,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).JV(this.fG,0,this.dG,i),this}Tz(){this.ER.yV(this.CR)}}const hm=t=>{const i=new Float32Array(324);let s=0;return i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,{vertices:i,drawSize:s/9,drawMode:t.TRIANGLES}};class rm extends sm{constructor(t,i){super(t),this.FY="attribute",this.IY=i;const{vertices:s,indices:e}=nm();this.CR=t.oV(s),this.cG=t.NV(e),this.dG=e.length,this.fG=t.gl.TRIANGLES}Zm(t,i,s,e){return this.ER.uV(this.CR,0,{location:t.attribute("aEdge"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).jV(this.cG).fV(t.uniform("uEdgeRoundness"),this.IY/2).KV(this.fG,this.dG,0,i),this}Tz(){this.ER.yV(this.CR),this.ER.yV(this.cG)}PY(t){return this.IY=t,this}DY(){return this.IY}}const nm=()=>{const t=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],i=[];let s=0;const e=[];let h=0;for(const r of t){const{normal:t,perpendA:n,perpendB:o}=r,a=Pi.multiply(n,-1),l=Pi.multiply(o,-1),u=s;i[s]={thicknessDirection:Pi.addVec(t,n,o),edge:Pi.addVec(a,l),normal:t},s+=1;const c=s;i[s]={thicknessDirection:Pi.addVec(t,a,o),edge:Pi.addVec(n,l),normal:t},s+=1;const d=s;i[s]={thicknessDirection:Pi.addVec(t,a,l),edge:Pi.addVec(n,o),normal:t},s+=1;const f=s;i[s]={thicknessDirection:Pi.addVec(t,n,l),edge:Pi.addVec(a,o),normal:t},s+=1,e[h+0]=d,e[h+1]=u,e[h+2]=f,e[h+3]=d,e[h+4]=c,e[h+5]=u,h+=6;const A=[{A:n,B:o},{A:a,B:o},{A:a,B:l},{A:n,B:l}];for(const e of A){e.thicknessDirection=Pi.addVec(t,e.A,e.B),e.stripVerticesA=[],e.stripVerticesB=[];const h=[{direction:e.A,other:e.B,vertices:e.stripVerticesA},{direction:e.B,other:e.A,vertices:e.stripVerticesB}];for(const r of h)for(let h=0;h<8;h+=1){const n=.5*h/7,o=Pi.normalize(Pi.lerp(t,r.direction,n)),a=Math.PI/2-Pi.angle(o,t),l=Pi.addVec(Pi.multiply(Pi.multiply(r.direction,-1),1-Math.cos(a)),Pi.multiply(Pi.multiply(t,-1),1-Math.sin(a)),Pi.multiply(r.other,-1)),u=s;i[s]={thicknessDirection:e.thicknessDirection,normal:o,edge:l};const c=i[s];s+=1,r.vertices.push({index:u,vertex:c})}}for(let t=0;t<A.length;t+=1){const i=A[t],s=A[t<A.length-1?t+1:0],r=t%2==0?i.stripVerticesB:i.stripVerticesA,n=t%2==0?s.stripVerticesB:s.stripVerticesA;for(let t=1;t<r.length;t+=1){const i=r[t-1],s=n[t-1],o=r[t],a=n[t];e[h+0]=i.index,e[h+1]=s.index,e[h+2]=a.index,e[h+3]=o.index,e[h+4]=i.index,e[h+5]=a.index,h+=6}}}const r=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],n=Math.PI/15,o=2*Math.PI/15;let a=s;for(const t of r){let h=0;i[s]={thicknessDirection:t,normal:{x:0,y:t.y,z:0},edge:{x:-t.x,y:0,z:-t.z}},s+=1,h+=1;for(let e=1;e<8.5;e+=1){const r=15===e?Math.PI:e*n,a=1*Math.cos(r)*t.y,l=Math.sin(r);for(let e=0;e<Math.ceil(3.75)+1;e+=1){const r=15===e?0:e*o,n=l*Math.cos(r)*1*t.x,u=l*Math.sin(r)*1*t.z,c={x:n,y:a,z:u},d=Pi.normalize({x:n,y:a,z:u});i[s]={thicknessDirection:t,normal:d,edge:{x:c.x-t.x,y:c.y-t.y,z:c.z-t.z}},s+=1,h+=1}}const r=[];for(let t=1;t<=Math.ceil(3.75);t+=1)r.push(a),15===t?r.push(a+1):r.push(a+t+1),r.push(a+t);const l=a+1,u=Math.ceil(3.75)+1;for(let t=0;t<6.5;t+=1)for(let i=0;i<Math.ceil(3.75);i+=1){let s=0;const e=l+(t+1)*u+i;let h=0;14===i?(s=l+t*u,h=l+(t+1)*u):(s=l+t*u+i+1,h=l+(t+1)*u+i+1),r.push(l+t*u+i),r.push(s),r.push(e),r.push(e),r.push(s),r.push(h)}e.push.apply(e,t.flipVertexOrder?r.reverse():r),a+=h}const l=new Float32Array(9*i.length);let u=0;for(const t of i)l[u+0]=t.edge.x,l[u+1]=t.edge.y,l[u+2]=t.edge.z,l[u+3]=t.normal.x,l[u+4]=t.normal.y,l[u+5]=t.normal.z,l[u+6]=t.thicknessDirection.x,l[u+7]=t.thicknessDirection.y,l[u+8]=t.thicknessDirection.z,u+=9;return{vertices:l,indices:new Uint16Array(e)}},om=(t,i)=>{let s=t.wV.kz.get(i);return s||(s=void 0!==i&&i>0?new rm(t,Tt(i,0,1)):new em(t),t.wV.kz.set(i,s),s)};class am extends Yg{nS(t){return this.Yz=this.tS._(),this.tS.M(t),this}kv(t){return this.BY=t,this}Tv(){return this.BY}}class lm extends am{constructor(t,i,s,e,h){super(t,i,s),this.LY=t,this.pN=e,this.mN=h,this.nN=t.nN,this.ER=this.nN.aN()}uN(t){return t===this.pN&&{}}}class um extends lm{constructor(t,i,s,e,h){super(t,i,s,e,h),this.BY="cull-back",this.Ha=Ri,this.RY={},this.EY=[],this.gN=PA({fillStyleSolid:()=>W(this.be)&&this.be,fillStyleIndividual:()=>Y(this.be)&&this.be,fillStylePaletted:()=>$(this.be)&&this.be}),this.be=_h.fillStyle,this.tS.M(jr)}Ds(t){const i=this.EY,s=this.be,e=s!==z,h=this.zY,r=this.ia()||this.VY!==h,n=this.Uz(),o=this.Lo._(),a=this.Lo.o;if(e){for(const t of i)t.id=void 0!==t.id?String(t.id):void 0,t.xSize=void 0!==t.xSize&&t.xSize<0?-t.xSize:t.xSize,t.ySize=void 0!==t.ySize&&t.ySize<0?-t.ySize:t.ySize,t.zSize=void 0!==t.zSize&&t.zSize<0?-t.zSize:t.zSize;const t=11,e=this.OY||0;let h=e;for(const t of i){const i=t.id;void 0!==i&&void 0!==this.RY[i]||(h+=1)}let l,u=!1,c=!1;if(u=h!==e,c=u,l=!c&&(i.length<100?"chunks":"all"),u){const i=h*t,s=new Float32Array(i);this.PW&&s.set(this.PW),this.PW=s,this.NY=i,this.GY=e*t}const d=Y(s)?s.getFallbackColor():void 0;for(const s of i){const i=s.id,e=void 0!==i&&this.RY[i],h=[s.xCenter,s.yCenter,s.zCenter,s.xSize,s.ySize,s.zSize,s.color?s.color.r:d?d.r:void 0,s.color?s.color.g:d?d.g:void 0,s.color?s.color.b:d?d.b:void 0,s.color?s.color.a:d?d.a:void 0,s.value];if(e){for(let i=0;i<t;i+=1)h[i]=void 0!==h[i]?h[i]:e.buffer[i];e.buffer.set(h)}else{const s=this.GY,e=new Float32Array(this.PW.buffer,s*Float32Array.BYTES_PER_ELEMENT,t);e.set(h),void 0!==i&&(this.RY[i]={location:s,buffer:e}),this.GY+=t}}if(c&&(this.uG=this.ER.oV(this.PW,!0)),"all"===l)this.ER.VV(this.uG,0,this.PW);else if("chunks"===l)for(const t of i){const i=t.id;if(void 0!==i){const t=this.RY[i];this.ER.VV(this.uG,t.location,t.buffer)}}if(r||n||a){const t=this.gN.fillStyleSolid(r),i=this.gN.fillStyleIndividual(r),s=this.gN.fillStylePaletted(r);t||i||s?(this.WY=om(this.ER,this.UY()),this.dE=this.ER.az(ng["3D"],ng.ColorShaded3D({dataType:i?"attribute":s?["lookup",s.getLookUpProperty(),s.lut]:"uniform",shadingStyle:this.tS._().type}),ng.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:IA(this.ft),normalSource:this.WY.FY}),void 0!==this.zY&&ng.RoundedEdges3D),this.yY=o?this.ER.az(ng["3D"],ng.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:IA(this.ft),normalSource:void 0}),ng.MousePicking,void 0!==this.zY&&ng.RoundedEdges3D):void 0):(this.WY=void 0,this.dE=void 0,this.yY=void 0)}if(i.length>0){const i=A({x:Di,y:Di,z:Di},{x:Bi,y:Bi,z:Bi});for(let s=0;s<this.GY;s+=t){const t=this.PW[s+0],e=this.PW[s+3]/2,h=t-e,r=t+e,n=this.PW[s+1],o=this.PW[s+4]/2,a=n-o,l=n+o,u=this.PW[s+2],c=this.PW[s+5]/2,d=u-c,f=u+c;i.min.x=i.min.x<h?i.min.x:h,i.min.y=i.min.y<a?i.min.y:a,i.min.z=i.min.z<d?i.min.z:d,i.max.x=i.max.x>r?i.max.x:r,i.max.y=i.max.y>l?i.max.y:l,i.max.z=i.max.z>f?i.max.z:f}this.Ha=i}this.OY=h,this.EY.length=0}return this.ra(s),this.VY=h,this.tS.o=!1,this.Lo.o=!1,this}VL(t){const i=1===t?this.yY:this.dE,s=this.WY,e=this.uG,h=this.be,r=this.OY,n=this.tS._();return i&&e&&void 0!==r&&this.ER.lV(i,((o,a,l)=>{let u=!1;const c=a("aPos"),d=a("aOffsetAxis");this.ER.ZR(i).PV(o("uScale"),this.LY.lE.AV()).PV(o("uDisp"),this.LY.lE.gV()).BV(o("uViewProjectionMatrix"),this.YY).fV(o("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(o("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(o("uRenderEffectMask"),2===t?1:0);const f={location:c,size:3},A={location:d,size:3},g={location:void 0,size:4};if(1!==t&&"phong"===n.type&&this.ER.PV(o("uCameraLoc"),this.HY).PV(o("uLightLoc"),this.$Y).fV(o("uAmbientReflection"),n.ambientReflection).fV(o("uSpecularReflection"),n.specularReflection).fV(o("uDiffuseReflection"),n.diffuseReflection).fV(o("uShininess"),n.shininess).gR(o("uLightColor"),n.specularColor).gR(o("uAmbientColor"),n.ambientColor),1===t)this.ER.gR(o("uColor"),this.mN);else if(W(h))this.ER.gR(o("uColorDiffuse"),h.getColor());else if(Y(h)){const t=a("aColor");g.location=t}else if($(h)){const t=DA(h,this,void 0);if(!t&&h.lut.percentageValues)return!1;this.ER.RO(l,h.lut,t)}return e&&(this.ER.uV(e,1,f,A,g,{location:void 0,size:1}),s.Zm(l,r,"phong"===n.type&&1!==t,!1),u=!0),u})),this}dispose(){return super.dispose(),this.uG&&(this.ER.yV(this.uG),this.uG=void 0),this.dE=void 0,this}OR(){return this.dispose(),this}pS(t){this.EY=hi(this.EY,t,{canReturnB:!0})}ke(t){return this.be=$h(this.be,t),this}zh(){return this.be}AS(t){return this.zY=void 0!==t&&t>0?Tt(t,0,1):void 0,this}UY(){return this.zY}bt(){return this.Ha.max.x}xt(){return this.Ha.min.x}_t(){return this.Ha.max.y}Mt(){return this.Ha.min.y}lS(){return this.Ha.max.z}uS(){return this.Ha.min.z}xl(){return 0}bl(){return 0}cS(){return 0}ia(){return Xh(this.sa,this.be)}ra(t){this.sa=t}}class cm extends Og{constructor(t,i){super(t),this.FY="custom",this.aG=i;const{vertices:s,drawSize:e}=this.lG();this.uG=t.oV(s),this.dG=e}ZR(t){return this.ER.uV(this.uG,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}Zm(t){return this.ER.JV(this.ER.gl.TRIANGLE_STRIP,0,this.dG,t),this}lG(){const t=this.aG,i=new Float32Array(2*(t+1)*3);let s=0;for(let e=0;e<=t;e+=1){const h=2*Math.PI*e/t,r=Math.cos(h),n=Math.sin(h);for(const t of[0,1])i[s+0]=t,i[s+1]=r,i[s+2]=n,s+=3}return{vertices:i,drawSize:s/3}}Tz(){this.ER.yV(this.uG)}}const dm=(t,i=16)=>{let s=t.wV.wz.get(i);return s||(s=new cm(t,i),t.wV.wz.set(i,s),s)};class fm extends lm{constructor(t,i,s,e,h){super(t,i,s,e,h),this.BY="cull-back",this.jY=Ri,this.ZY=[],this.QY=!1,this.uu=_h.lineStyle,this.tS.M($r)}Ds(t){const i=this.QY,s=this.uu,e=this.du!==s,h=this.Uz(),r=i;if(i){const t=Jt(this.ZY);this.JY=this.ER.oV(t,!1,this.JY)}if(r&&(this.jY=Zi(this.ZY)),e||h){const t=8,i=Js(s)&&s.getFillStyle(),e=1===s.getThickness()?"primitive":"instanced";this.bG=void 0,W(i)&&("primitive"===e?this.bG={type:e,shader:this.ER.az(ng["3D"],ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0}),ng.Color({dataType:"uniform"})),fillStyle:i}:"instanced"===e&&(this.bG={type:e,shader:this.ER.az(ng["3D"],ng.ColorShaded3D({dataType:"uniform",shadingStyle:this.tS._().type}),ng.LineInstanced3D({axisWorldTranslation:IA(this.ft)})),geometry:dm(this.ER,t),fillStyle:i}))}return this.QY=!1,this.du=s,this.tS.o=!1,this}VL(t){if(1===t)return this;const i=this.ER.gl,s=this.bG,e=this.JY,h=this.uu,r=this.tS._();if(s&&e&&Js(h))switch(s.type){case"instanced":{const n=.5*this.Ts.Gy(h.thickness),o=s.fillStyle.getColor(),a=s.shader,l=s.geometry;this.ER.lV(a,((s,h,u)=>{this.ER.ZR(a).PV(s("uScale"),this.LY.lE.AV()).PV(s("uDisp"),this.LY.lE.gV()).BV(s("uViewProjectionMatrix"),this.YY).gR(s("uColorDiffuse"),o).fV(s("uOffsetWU"),n).fV(s("uIsHighlighted"),this.Vo).gR(s("uHighlightColorOffset"),2===t?F:this.Wo).fV(s("uRenderEffectMask"),2===t?1:0),"phong"===r.type&&this.ER.PV(s("uCameraLoc"),this.HY).PV(s("uLightLoc"),this.$Y).fV(s("uAmbientReflection"),r.ambientReflection).fV(s("uSpecularReflection"),r.specularReflection).fV(s("uDiffuseReflection"),r.diffuseReflection).fV(s("uShininess"),r.shininess).gR(s("uLightColor"),r.specularColor).gR(s("uAmbientColor"),r.ambientColor),i.bindBuffer(i.ARRAY_BUFFER,e);const c=h("aLocationA"),d=h("aLocationB");return i.vertexAttribPointer(c,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.ER.YV(c,1),i.enableVertexAttribArray(c),i.vertexAttribPointer(d,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.ER.YV(d,1),i.enableVertexAttribArray(d),l.ZR(u).Zm(this.ZY.length/2),!0}));break}case"primitive":{const r=Js(h)?h.getFillStyle():void 0,n=r&&W(r)?r.getColor():void 0;if(n){const h=s.shader;this.ER.lV(h,((s,r)=>(this.ER.ZR(h).PV(s("uScale"),this.LY.lE.AV()).PV(s("uDisp"),this.LY.lE.gV()).BV(s("uViewProjectionMatrix"),this.YY).gR(s("uColor"),n).fV(s("uIsHighlighted"),this.Vo).gR(s("uHighlightColorOffset"),2===t?F:this.Wo).fV(s("uRenderEffectMask"),2===t?1:0).uV(e,void 0,{location:r("aPos"),size:3}).Zm(i.LINES,this.ZY.length),!0)))}break}}return this}ol(t){for(let i=0;i<t.length-1;i+=1){const s=t[i],e=t[i+1];this.ZY.push(s),this.ZY.push(e)}return this.QY=!0,{ds(){return this},ys(){return this}}}Gt(){return this.ZY.length=0,this.QY=!0,this}py(){return[]}bd(t){}Ee(t){return this.uu="function"==typeof t?t(this.uu):t,this}cu(){return this.uu}OR(){return this.JY&&(this.ER.yV(this.JY),this.JY=void 0),this}bt(){return this.jY.max.x}xt(){return this.jY.min.x}_t(){return this.jY.max.y}Mt(){return this.jY.min.y}lS(){return this.jY.max.z}uS(){return this.jY.min.z}xl(){const t=this.uu;return t===rt?0:t.getThickness()}bl(){const t=this.uu;return t===rt?0:t.getThickness()}cS(){const t=this.uu;return t===rt?0:t.getThickness()}}class Am extends Og{constructor(t,i,s){super(t),this.FY="gpu-calculate",this.KY=i,this.qY=s;const{vertices:e,drawSize:h}=this.lG();this.uG=t.oV(e),this.dG=h}Zm(t,i,s,e){return this.ER.uV(this.uG,0,{location:t.attribute("aInstanceGeo"),size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).JV(this.ER.gl.TRIANGLES,0,this.dG,i),this}lG(){const t=this.qY,i=this.KY,s=new Float32Array(6*(6*i+6*(t-2)*i));let e=0;const h=2*Math.PI/i,r=Math.PI/t,n=(t,i,n,o,a)=>{const l=i*h,u=Math.PI/2-t*r,c=Math.cos(u),d=c*Math.cos(l),f=c*Math.sin(l),A=Math.sin(u);s[e]=d,s[e+1]=A,s[e+2]=f,s[e+3]=n,s[e+4]=o,s[e+5]=a,e+=6};for(let s=0;s<t;s+=1)for(let e=0;e<i;e+=1)s>0&&(n(s,e,1,0,0),n(s,e+1,1,1,0),n(s+1,e,0,0,1)),s<t-1&&(n(s,e+1,1,1,0),n(s+1,e+1,0,1,0),n(s+1,e,0,0,1));return e!==s.length&&Ai(0,(()=>{this.ER.dA.$n&&e>s.length&&xt.console.warn("LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.\nA point series 3D component might have missing points.\n\nThis warning can be omitted with LightningChartOptions.warnings")})),{vertices:s,drawSize:e/6}}Tz(){this.ER.yV(this.uG)}}const gm=(t,i)=>{const s=Math.round(i);s<3&&Ai(0,Ct);const e=s;let h=t.wV.Cz.get(Array.from(t.wV.Cz.keys()).find((t=>t.sectors===s&&t.stacks===e)));return h||(h=new Am(t,s,e),t.wV.Cz.set({sectors:s,stacks:e},h),h)};class pm extends lm{constructor(t,i,s,e,h){super(t,i,s,e,h),this.BY="cull-back",this.JM=[],this.bG={},this.xW=new vp(this.JM,(t=>t.vertexBuffer&&this.ER.yV(t.vertexBuffer)),!0),this.yu=[],this.$a=0,this.Xa=[],this.ja=0,this.Ha=Ri,this.Za=Ri,this.gN=PA({lineStyleSolid:()=>{const t=this.uu;return Js(t)&&t},lineFillSolid:()=>{const t=this.uu.getFillStyle();return W(t)&&t},lineFillPaletted:()=>{const t=this.uu.getFillStyle();return $(t)&&t},jointStyleTriangulatedPoints:()=>lh(this.mS)&&this.mS,jointSizeTriangulated:()=>{const t=this.mS;return lh(t)&&t.getSize()},jointFillSolid:()=>{const t=this.mS.getFillStyle();return W(t)&&t},jointFillPaletted:()=>{const t=this.mS.getFillStyle();return $(t)&&t},wireframeLineStyleSolid:()=>{const t=lh(this.mS)&&this.mS.getWireframeStyle();return Js(t)&&t},wireframeFillSolid:()=>{const t=lh(this.mS)&&this.mS.getWireframeStyle(),i=t&&t.getFillStyle();return W(i)&&i}}),this.Ja=!1,this.uu=_h.lineStyle,this.mS=_h.pointStyle3D,this.tS.M(jr),this.kW={attributesPerVertex:3,prepareRenderData:(t,i)=>Jt(t)}}Ds(t){const i=this.Ja,s=this.Xa,e=this.ja,h=e>0,r=this.uu,n=r!==this.du,o=this.mS,a=o!==this.tH,l=this.Uz(),u=this.Lo.o,c=this.Lo._();this.Za&&(this.Ha=Ji(this.Ha,this.Za),this.Za=void 0),h&&(this.yu=hi(this.yu,s,{canReturnB:!0}),this.$a+=e);let d=s,f=e;if(i&&(this.JM.forEach((t=>{t.existingCoordinatesCount=0,t.existingDataPointsCount=0,t.boundaries=Ri})),this.xW.dW(),d=this.yu,f=this.$a),f>0){const t=1e5,i=Math.floor(this.nN.iH/(this.kW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),s=this.Yo("ApplicationType",(t=>"UserSeries"===t.type))?f:1e3,e=Tt(s,t,i);this.xW.aW(d,e,((t,i,s,e)=>({existingDataPointsCount:s-e,existingCoordinatesCount:s,allocatedCoordinatesCount:t,jointPointsCount:e,lastDataPoint:i[s-1],boundaries:Ri,vertexBuffer:this.ER.zV(t*this.kW.attributesPerVertex,this.kW.prepareRenderData(i,s))})),((t,i,s,e)=>{this.ER.VV(t.vertexBuffer,t.existingCoordinatesCount*this.kW.attributesPerVertex,this.kW.prepareRenderData(i,s)),t.existingDataPointsCount+=s-e,t.existingCoordinatesCount+=s,t.jointPointsCount+=e,t.lastDataPoint=i[s-1]}))}if(n||a||l||u){const t={},i=this.gN.lineStyleSolid(n),s=this.gN.lineFillSolid(n),e=this.gN.lineFillPaletted(n),h=s||e,o=this.gN.jointStyleTriangulatedPoints(a),l=this.gN.jointSizeTriangulated(a),u=this.gN.jointFillSolid(a),d=this.gN.jointFillPaletted(a),f=u||d,A=this.gN.wireframeLineStyleSolid(a),g=this.gN.wireframeFillSolid(a),p=r.getThickness()<0||1===r.getThickness()&&this.Yo("ApplicationType",(t=>"InternalUI"===t.type))?"primitive":"instanced",m=e?["lookup",e.getLookUpProperty(),e.lut]:"uniform";if("primitive"===p&&h?t.lines={type:"primitive",fillStyleSolid:s,fillStylePaletted:e,shader:this.ER.az(ng["3D"],ng.Color({dataType:m}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})),mousePicking:c?{shader:this.ER.az(ng["3D"],ng.MousePicking,ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0}))}:void 0}:"instanced"===p&&i&&h&&(t.lines={type:"instanced",lineStyleSolid:i,fillStyleSolid:s,fillStylePaletted:e,shader:this.ER.az(ng["3D"],ng.ColorShaded3D({dataType:m,shadingStyle:this.tS._().type}),ng.LineInstanced3D({axisWorldTranslation:IA(this.ft)})),geometry:mm(this.ER,i.getThickness()),mousePicking:c?{shader:this.ER.az(ng["3D"],ng.MousePicking,ng.LineInstanced3D({axisWorldTranslation:IA(this.ft)}))}:void 0}),t.markers=void 0,f&&o){const i=si(o.getShape(),{cube:()=>om(this.ER),sphere:()=>ym(this.ER,o)});t.markers={geometry:i,pointStyle:o,pointSizeNWU:"number"==typeof l&&l,pointSizeAxis:"object"==typeof l&&l,fillStyleSolid:u,fillStylePaletted:d,shader:this.ER.az(ng["3D"],ng.ColorShaded3D({dataType:d?["lookup",d.getLookUpProperty(),d.lut]:"uniform",shadingStyle:this.tS._().type,wireframe:!1!==g}),ng.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof l?"nwu":"axis",symmetric:"number"==typeof l,halved:!0},axisWorldTranslation:IA(this.ft),normalSource:i.FY})),mousePicking:c?{shader:this.ER.az(ng["3D"],ng.MousePicking,ng.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof l?"nwu":"axis",symmetric:"number"==typeof l,halved:!0},axisWorldTranslation:IA(this.ft),normalSource:void 0}))}:void 0,wireframe:A&&g&&{thickness:A.getThickness(),fillStyleSolid:g}}}this.bG=t}return this.Ja=!1,this.Xa=[],this.ja=0,this.du=r,this.tH=o,this.tS.o=!1,this.Lo.o=!1,this}VL(t){var i,s;const e=this.ER.gl,{lines:h,markers:r}=this.bG,n=this.tS._(),o=1===t?null===(i=null==h?void 0:h.mousePicking)||void 0===i?void 0:i.shader:null==h?void 0:h.shader;if(h&&o&&"instanced"===h.type){const i=o,{geometry:s,lineStyleSolid:r,fillStyleSolid:a,fillStylePaletted:l}=h;this.ER.lV(i,((h,o,u)=>{let c=!1;if(this.ER.ZR(i).PV(h("uScale"),this.LY.lE.AV()).PV(h("uDisp"),this.LY.lE.gV()).BV(h("uViewProjectionMatrix"),this.YY).fV(h("uOffsetWU"),this.Ts.Gy(r.getThickness())).fV(h("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(h("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(h("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===n.type&&this.ER.PV(h("uCameraLoc"),this.HY).PV(h("uLightLoc"),this.$Y).fV(h("uAmbientReflection"),n.ambientReflection).fV(h("uSpecularReflection"),n.specularReflection).fV(h("uDiffuseReflection"),n.diffuseReflection).fV(h("uShininess"),n.shininess).gR(h("uLightColor"),n.specularColor).gR(h("uAmbientColor"),n.ambientColor),1===t)this.ER.gR(h("uColor"),this.mN);else if(a)this.ER.gR(h("uColorDiffuse"),a.getColor());else if(l){const t=DA(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.ER.RO(u,l.lut,t)}return this.JM.forEach((t=>{e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer);const i=o("aLocationA"),h=o("aLocationB");e.vertexAttribPointer(i,3,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.ER.YV(i,1),e.enableVertexAttribArray(i),e.vertexAttribPointer(h,3,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.ER.YV(h,1),e.enableVertexAttribArray(h),s.ZR(u).Zm(t.existingCoordinatesCount-1),c=!0})),c}))}if(h&&o&&"primitive"===h.type){const i=o,{fillStyleSolid:s,fillStylePaletted:r}=h;this.ER.lV(i,((h,n,o)=>{let a=!1;if(this.ER.ZR(i).PV(h("uScale"),this.LY.lE.AV()).PV(h("uDisp"),this.LY.lE.gV()).BV(h("uViewProjectionMatrix"),this.YY).fV(h("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(h("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(h("uRenderEffectMask"),2===t?1:0),1===t)this.ER.gR(h("uColor"),this.mN);else if(s)this.ER.gR(h("uColor"),s.getColor());else if(r){const t=DA(r,this,void 0);if(!t&&r.lut.percentageValues)return!1;this.ER.RO(o,r.lut,t)}return this.JM.forEach((t=>{this.ER.uV(t.vertexBuffer,void 0,{location:n("aPos"),size:3}).Zm(e.LINE_STRIP,t.existingCoordinatesCount),a=!0})),a}))}const a=1===t?null===(s=null==r?void 0:r.mousePicking)||void 0===s?void 0:s.shader:null==r?void 0:r.shader;if(r&&a){const i=a,{geometry:s,fillStyleSolid:e,fillStylePaletted:h,pointSizeAxis:o,pointSizeNWU:l,wireframe:u}=r;this.ER.lV(i,((r,a,c,d)=>{let f=!1;if(this.ER.ZR(i).PV(r("uScale"),this.LY.lE.AV()).PV(r("uDisp"),this.LY.lE.gV()).BV(r("uViewProjectionMatrix"),this.YY).fV(d("uRatioNwuWu"),this.LY.sH()).fV(r("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(r("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(r("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===n.type&&this.ER.PV(r("uCameraLoc"),this.HY).PV(r("uLightLoc"),this.$Y).fV(r("uAmbientReflection"),n.ambientReflection).fV(r("uSpecularReflection"),n.specularReflection).fV(r("uDiffuseReflection"),n.diffuseReflection).fV(r("uShininess"),n.shininess).gR(r("uLightColor"),n.specularColor).gR(r("uAmbientColor"),n.ambientColor),1===t)this.ER.gR(r("uColor"),this.mN);else if(e)this.ER.gR(r("uColorDiffuse"),e.getColor());else if(h){const t=DA(h,this,void 0);if(!t&&h.lut.percentageValues)return!1;this.ER.RO(c,h.lut,t)}return u&&1!==t&&this.ER.fV(r("uWireframeThickness"),u.thickness).gR(r("uWireframeColor"),u.fillStyleSolid.getColor()),!1!==o&&this.ER.PV(r("uOffsetAxis"),[o.x,o.y,o.z]),!1!==l&&this.ER.fV(r("uOffsetNWU"),l),this.JM.forEach((i=>{this.ER.uV(i.vertexBuffer,1,{location:a("aPos"),size:3}),s.Zm(c,i.existingCoordinatesCount,"phong"===n.type&&1!==t,Boolean(u)&&1!==t),f=!0})),f}))}return this}ol(t,i){Array.isArray(t)||(t=[t]),this.Xa=hi(this.Xa,t,{canReturnB:!0}),this.ja+=t.length;const s=i||Zi(t);return this.Za=this.Za?Ji(this.Za,s):s,this}Ee(t){return this.uu="function"==typeof t?t(this.uu):t,this}cu(){return this.uu}zy(t){return this.mS="function"==typeof t?t(this.mS):t,this}eH(){return this.mS}bt(){return this.Za?Math.max(this.Za.max.x,this.Ha.max.x):this.Ha.max.x}xt(){return this.Za?Math.min(this.Za.min.x,this.Ha.min.x):this.Ha.min.x}_t(){return this.Za?Math.max(this.Za.max.y,this.Ha.max.y):this.Ha.max.y}Mt(){return this.Za?Math.min(this.Za.min.y,this.Ha.min.y):this.Ha.min.y}lS(){return this.Za?Math.max(this.Za.max.z,this.Ha.max.z):this.Ha.max.z}uS(){return this.Za?Math.min(this.Za.min.z,this.Ha.min.z):this.Ha.min.z}xl(){return _i(this.uu)}bl(){return _i(this.uu)}cS(){return _i(this.uu)}il(){return this.yu}tl(){return this.Xa}al(){return this.$a}ll(){return this.ja}Gt(){return this.Ja=!0,this.yu.length=0,this.$a=0,this.Xa=[],this.ja=0,this.Ha=Ri,this.Za=void 0,this}dispose(){return super.dispose(),this.xW.fW(),this.bG={},this}OR(){return this.dispose(),this}}const mm=(t,i)=>dm(t,i>50?20:i>20?16:i>10?12:i>5?8:6),ym=(t,i)=>{const s=i.getSize();return gm(t,"number"==typeof s?s>50?20:s>20?16:s>10?12:s>5?8:6:20)};class Sm extends lm{constructor(t,i,s,e,h){super(t,i,s,e,h),this.BY="disabled",this.hH=!1,this.rH=!1,this.nH={x:1,y:1,z:1},this.Bv={x:0,y:0,z:0},this.Dv={x:0,y:0,z:0},this.Lv={x:0,y:0,z:0},this.Rv={x:1,y:1,z:1},this.oH=bl.projectionOrthographic(-1,1,-1,1,1,-1),this.aH=bl.projectionOrthographic(-1,1,-1,1,1,-1),this.lH=!1,this.gN=PA({fillStyleSolid:()=>W(this.be)&&this.be,fillStyleValuePalette:()=>$(this.be)&&"value"===this.be.lookUpProperty&&this.be}),this.be=_h.fillStyle,this.tS.M(jr)}Ds(t){var i;const s=this.Uz(),e=this.Lo._(),h=this.Lo.o,r=this.ia();this.gN.fillStyleSolid(r);const n=this.gN.fillStyleValuePalette(r),o=this.Lv,a=this.Rv;if(this.hH&&this.uH&&(this.uG=this.ER.oV(this.uH.vertices,void 0,this.uG),this.cG=this.ER.NV(this.uH.indices,this.cG),this.cH=this.uH.indices.length),"phong"===this.tS._().type&&(s||this.hH)&&(null===(i=this.uH)||void 0===i?void 0:i.normals)&&(this.dH=this.ER.oV(this.uH.normals,void 0,this.dH)),!this.fH&&n&&"value"===n.lookUpProperty&&this.uH&&(this.fH=new Float32Array(this.uH.vertices.length/3),this.rH=!0),this.fH&&this.rH&&(this.AH=this.ER.oV(this.fH,void 0,this.AH)),s||r||h){if(n&&"value"!==n.lookUpProperty)throw new Error("LightningChart JS MeshModel3D does not support look up by x/y/z. Must be value");this.dE=this.ER.az(ng["3D"],ng.ColorShaded3D({dataType:n?["lookup","value",n.lut]:"uniform",shadingStyle:this.tS._().type,wireframe:!1}),ng.Model3D({normalSource:"phong"===this.tS._().type?"attribute":void 0})),this.yY=e?this.ER.az(ng["3D"],ng.MousePicking,ng.Model3D({normalSource:void 0})):void 0}if(this.lH){const t=bl.projectionOrthographic(-1,1,-1,1,1,-1);this.aH=bl.rotateXYZ(t,o),this.oH=bl.translate(t,a.x/2,a.y/2,a.z/2),this.oH=bl.rotateXYZ(this.oH,o),this.oH=bl.translate(this.oH,-a.x/2,-a.y/2,-a.z/2),this.lH=!1}return this.tS.o=!1,this.ra(this.be),this.Lo.o=!1,this.hH=!1,this.rH=!1,this}VL(t){const i=1===t?this.yY:this.dE,s=1===t,e=this.cG,h=this.cH,r=this.uG,n=this.dH,o=this.AH,a=this.Bv,l=this.Dv,u=this.nH,c=this.Rv,d=this.oH,f=this.aH,A=this.gN.fillStyleValuePalette(!1),g=this.gN.fillStyleSolid(!1),p=this.tS._(),m={location:void 0,size:1};return i&&r&&e&&h?(this.ER.lV(i,((y,S,v,x)=>{if(this.ER.ZR(i).PV(y("uScale"),this.LY.lE.AV()).PV(y("uDisp"),this.LY.lE.gV()).BV(y("uViewProjectionMatrix"),this.YY).fV(y("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(y("uHighlightColorOffset"),this.Wo).fV(y("uRenderEffectMask"),2===t?1:0),s)this.ER.gR(y("uColor"),this.mN);else{if(this.be===z)return!1;if(g)this.ER.gR(y("uColorDiffuse"),g.getColor());else if(A){if(!o)return!1;const t=A.getPalette();m.location=S("aLookupValue"),this.ER.RO(v,t,void 0).uV(o,void 0,m)}}return"phong"!==p.type||s||(this.ER.PV(y("uCameraLoc"),this.HY).PV(y("uLightLoc"),this.$Y).fV(y("uAmbientReflection"),p.ambientReflection).fV(y("uSpecularReflection"),p.specularReflection).fV(y("uDiffuseReflection"),p.diffuseReflection).fV(y("uShininess"),p.shininess).gR(y("uLightColor"),p.specularColor).gR(y("uAmbientColor"),p.ambientColor).BV(y("uModelRotationNormals"),f),n&&this.ER.uV(n,void 0,{location:v.attribute("aNormal"),size:3})),this.ER.BV(y("uModelRotation"),d).PV(y("uModelScale"),[u.x,u.y,u.z]).PV(y("uLocationAxis"),[a.x,a.y,a.z]).PV(y("uModelAlignment"),[l.x,l.y,l.z]).PV(y("uModelSize"),[c.x,c.y,c.z]),this.ER.uV(r,0,{location:v.attribute("aGeoPos"),size:3}).jV(e).QV(h,this.ER.gl.TRIANGLES),!0})),this):this}dispose(){return super.dispose(),this.uG&&(this.ER.yV(this.uG),this.uG=void 0),this.cG&&(this.ER.yV(this.cG),this.cG=void 0),this.dH&&(this.ER.yV(this.dH),this.dH=void 0),this.AH&&(this.ER.yV(this.AH),this.AH=void 0),this.dE=void 0,this.yY=void 0,this.uH=void 0,this.fH=void 0,this}OR(){return this.dispose(),this}zv(t){return this.uH=t,this.hH=!0,this.Rv=t.modelSize,this}Ov(t){return this.fH=t,this.rH=!0,this}ke(t){return this.be=$h(this.be,t),this}zh(){return this.be}Nv(t){return this.nH=t,this}AV(){return this.nH}Gv(t){return this.Bv=t,this}Wv(t){return this.Dv=t,this}Uv(t){return this.Lv=t,this.lH=!0,this}Yv(t){return this.BY=t,this}Hv(){return this.BY}bt(){return Bi}xt(){return Di}_t(){return Bi}Mt(){return Di}lS(){return Bi}uS(){return Di}xl(){return 0}bl(){return 0}cS(){return 0}ia(){return Xh(this.sa,this.be)}ra(t){this.sa=t}}class vm extends lm{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.BY="cull-back",this.JM=[],this.xW=new vp(this.JM,(t=>t.vertexBuffer&&this.ER.yV(t.vertexBuffer)),!1),this.yu=[],this.$a=0,this.Xa=[],this.ja=0,this.Ha=Ri,this.Za=Ri,this.Ja=!1,this.gN=PA({fillStyleSolid:()=>{const t=this.vS.getFillStyle();return W(t)&&t},fillStyleIndividual:()=>{const t=this.vS.getFillStyle();return Y(t)&&t},fillStylePalette:()=>{const t=this.vS.getFillStyle();return $(t)&&t},triangulatedPointStyle:()=>{const t=this.vS;return lh(t)&&t},wireframeLineStyleSolid:()=>{const t=lh(this.vS)&&this.vS,i=t&&t.getWireframeStyle();return Js(i)&&i},wireframeFillStyleSolid:()=>{const t=lh(this.vS)&&this.vS,i=t&&t.getWireframeStyle(),s=i&&i.getFillStyle();return W(s)&&s}}),this.Ka=void 0,this.Yn=r,this.vS=_h.pointStyle3D,this.tS.M(jr);const n=!0===(null==r?void 0:r.individualPointColorEnabled),o=!0===(null==r?void 0:r.individualPointSizeEnabled),a=!0===(null==r?void 0:r.individualLookupValuesEnabled),l=!0===(null==r?void 0:r.individualPointSizeAxisEnabled);let u,c,d,f,A=0;A+=3,n&&(u=A,A+=4),o&&(c=A,A+=1),a&&(d=A,A+=1),l&&(f=A,A+=3);const g=((t,i,s,e)=>t||i||s||e?!t||i||s||e?t||!i||s||e?t||i||!s||e?t||i||s||!e?(h,r,n)=>{const o=3+(t?4:0)+(i?1:0)+(s?1:0)+(e?3:0),a=h.length,l=new Float32Array(a*o);let u=0,c=u;for(let t=0;t<a;t+=1){const i=h[t];l[c+0]=i.x,l[c+1]=i.y,l[c+2]=i.z,c+=o}if(u+=3,t){const t=n&&Y(n)&&n.getFallbackColor()||T;c=u;for(let i=0;i<a;i+=1){const s=h[i].color||t;l[c+0]=s.r,l[c+1]=s.g,l[c+2]=s.b,l[c+3]=s.a,c+=o}u+=4}if(i){const t=r&&r.getSize();let i=1;"number"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.size?s.size:i;l[c+0]=e,c+=o}u+=1}if(s){c=u;for(let t=0;t<a;t+=1){const i=h[t];l[c+0]=void 0!==i.value?i.value:-34028234663852886e22,c+=o}u+=1}if(e){const t=r&&r.getSize();let i={x:1,y:1,z:1};"object"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.sizeAxisX?s.sizeAxisX:i.x,r=void 0!==s.sizeAxisY?s.sizeAxisY:i.y,n=void 0!==s.sizeAxisZ?s.sizeAxisZ:i.z;l[c+0]=e,l[c+1]=r,l[c+2]=n,c+=o}u+=3}return l}:(t,i,s)=>((t,i)=>{const s=i&&i.getSize();let e={x:1,y:1,z:1};"object"==typeof s&&(e=s);const h=t.length,r=new Float32Array(6*h);let n=0;for(let i=0;i<h;i+=1){const s=t[i];r[n+0]=s.x,r[n+1]=s.y,r[n+2]=s.z;const h=void 0!==s.sizeAxisX?s.sizeAxisX:e.x,o=void 0!==s.sizeAxisY?s.sizeAxisY:e.y,a=void 0!==s.sizeAxisZ?s.sizeAxisZ:e.z;r[n+3]=h,r[n+4]=o,r[n+5]=a,n+=6}return r})(t,i):(t,i,s)=>(t=>{const i=t.length,s=new Float32Array(4*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=i.z,s[h+3]=void 0!==i.value?i.value:-34028234663852886e22,h+=4}return s})(t):(t,i,s)=>((t,i)=>{const s=i&&i.getSize();let e=1;"number"==typeof s&&(e=s);const h=t.length,r=new Float32Array(4*h);for(let i=0,s=0;i<h;i+=1){const h=t[i];r[s+0]=h.x,r[s+1]=h.y,r[s+2]=h.z;const n=void 0!==h.size?h.size:e;r[s+3]=n,s+=4}return r})(t,i):(t,i,s)=>((t,i)=>{const s=i&&Y(i)&&i.getFallbackColor()||T,e=t.length,h=new Float32Array(7*e);for(let i=0,r=0;i<e;i+=1){const e=t[i];h[r+0]=e.x,h[r+1]=e.y,h[r+2]=e.z;const n=e.color||s;h[r+3]=n.r,h[r+4]=n.g,h[r+5]=n.b,h[r+6]=n.a,r+=7}return h})(t,s):(t,i,s)=>Jt(t))(n,o,a,l);this.kW={individualPointColorEnabled:n,individualPointSizeEnabled:o,individualLookupValuesEnabled:a,individualPointSizeAxisEnabled:l,attributesPerVertex:A,attributeOffsetCoordinate:0,attributeOffsetColor:u,attributeOffsetSize:c,attributeOffsetLookUpValue:d,attributeOffsetPointSize3D:f,prepareRenderData:(t,i)=>g(t,this.vS,this.vS.fillStyle)}}Ds(t){const i=this.Ja,s=this.Xa,e=this.ja,h=e>0,r=this.vS,n=this.vS!==this.gH,o=this.Lo._(),a=this.Lo.o,l=this.Uz();this.Za&&(this.Ha=Ji(this.Ha,this.Za),this.Za=void 0),h&&(this.yu=hi(this.yu,s,{canReturnB:!0}),this.$a+=e);let u=s,c=e;if(i&&(this.JM.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.boundaries=Ri})),this.xW.dW(),u=this.yu,c=this.$a),c>0){const t=Math.floor(this.nN.iH/(this.kW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),i=Tt(c,1e5,t);this.xW.aW(u,i,((t,i,s)=>({existingDataPointsCount:s,existingCoordinatesCount:s,allocatedCoordinatesCount:t,boundaries:Ri,vertexBuffer:this.ER.zV(t*this.kW.attributesPerVertex,this.kW.prepareRenderData(i,s))})),((t,i,s)=>{this.ER.VV(t.vertexBuffer,t.existingCoordinatesCount*this.kW.attributesPerVertex,this.kW.prepareRenderData(i,s)),t.existingDataPointsCount+=s,t.existingCoordinatesCount=t.existingDataPointsCount}))}const d=r.getFillStyle(),f=this.gN.fillStyleSolid(n),A=this.gN.fillStyleIndividual(n),g=this.gN.fillStylePalette(n),p=d===z&&z;if(n||l||a){let t;const i=r.getSize(),s=this.kW.individualPointColorEnabled,e=this.kW.individualPointSizeEnabled,h=this.kW.individualPointSizeAxisEnabled,a=this.kW.individualLookupValuesEnabled;if(A&&!s){const t="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw xt.alert(t),new Error(t)}if(g&&"value"===g.getLookUpProperty()&&!a){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw xt.alert(t),new Error(t)}const l=this.gN.wireframeLineStyleSolid(n),u=this.gN.wireframeFillStyleSolid(n);if(f||A||g||u){const s=A?"attribute":g?["lookup",g.getLookUpProperty(),g.lut]:"uniform",n=e&&"number"==typeof i,a=h&&"object"==typeof i,c=n||a?"attribute":"uniform";if(lh(r)){const h=si(r.getShape(),{cube:()=>om(this.ER),sphere:()=>xm(this.ER,r,e)});t={type:"instanced",shader:this.ER.az(ng["3D"],ng.ColorShaded3D({dataType:s,shadingStyle:this.tS._().type,wireframe:!1!==u}),ng.VertexLocation({offset:{dataType:c,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i},axisWorldTranslation:IA(this.ft),normalSource:h.FY})),pointStyle:r,useIndividualPointSize:n,useIndividualPointSize3D:a,pointSizeNWU:"number"==typeof i&&i,pointSizeAxis:"object"==typeof i&&i,fillStyleSolid:f,fillStyleIndividual:A,fillStylePaletted:g,fillStyleEmpty:p,mousePickingShader:o&&this.ER.az(ng["3D"],ng.MousePicking,ng.VertexLocation({offset:{dataType:c,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i},axisWorldTranslation:IA(this.ft),normalSource:void 0})),geometry:h,wireframe:l&&u&&{thickness:l.getThickness()<0?1:l.getThickness(),fillStyleSolid:u}}}else dh(r)&&"number"==typeof i&&(t={type:"primitive",shader:this.ER.az(ng["3D"],ng.PointSize(c),ng.Color({dataType:s}),ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0})),pointStyle:r,pointSizePixels:i,useIndividualPointSize:n,fillStyleSolid:f,fillStyleIndividual:A,fillStylePaletted:g,mousePickingShader:o&&this.ER.az(ng["3D"],ng.PointSize(c),ng.MousePicking,ng.VertexLocation({axisWorldTranslation:IA(this.ft),normalSource:void 0}))})}this.bG=t}if(void 0===this.Ka&&g&&"value"===g.lookUpProperty&&g.lut.percentageValues){let t=Bi,i=Di;for(let s=0;s<this.yu.length;s+=1){const e=this.yu[s];void 0!==e.value&&e.value<i&&(i=e.value),void 0!==e.value&&e.value>t&&(t=e.value)}this.Ka={min:i,max:t}}return this.Ja=!1,this.Xa=[],this.ja=0,this.gH=r,this.tS.o=!1,this}VL(t){const i=this.ER.gl,s=this.bG;if(!s)return this;const e=1===t?s.mousePickingShader:s.shader;if(!e)return this;const h=this.tS._(),{fillStyleSolid:r,fillStylePaletted:n,useIndividualPointSize:o}=s,a="instanced"===s.type&&s.useIndividualPointSize3D,l="instanced"===s.type&&s.wireframe;return this.ER.lV(e,((u,c,d,f)=>{let A=!1;if(this.ER.ZR(e).PV(u("uScale"),this.LY.lE.AV()).PV(u("uDisp"),this.LY.lE.gV()).BV(u("uViewProjectionMatrix"),this.YY).fV(u("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(u("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(u("uRenderEffectMask"),2===t?1:0),"instanced"===s.type){const{pointSizeAxis:t,pointSizeNWU:i}=s;!1!==t&&!1===a&&this.ER.PV(u("uOffsetAxis"),[t.x,t.y,t.z]),!1!==i&&!1===o&&this.ER.fV(u("uOffsetNWU"),i).fV(f("uRatioNwuWu"),this.LY.sH())}else if("primitive"===s.type){const{pointSizePixels:t}=s;o||this.ER.fV(u("uPointSize"),t).fV(u("uDevicePixelRatio"),this.ER.Xz())}if(1===t)this.ER.gR(u("uColor"),this.mN);else if("instanced"===s.type?("phong"===h.type&&this.ER.PV(u("uCameraLoc"),this.HY).PV(u("uLightLoc"),this.$Y).fV(u("uAmbientReflection"),h.ambientReflection).fV(u("uSpecularReflection"),h.specularReflection).fV(u("uDiffuseReflection"),h.diffuseReflection).fV(u("uShininess"),h.shininess).gR(u("uLightColor"),h.specularColor).gR(u("uAmbientColor"),h.ambientColor),l&&this.ER.fV(u("uWireframeThickness"),l.thickness).gR(u("uWireframeColor"),l.fillStyleSolid.getColor()),r&&this.ER.gR(u("uColorDiffuse"),r.getColor()),s.fillStyleEmpty&&this.ER.gR(u("uColorDiffuse"),F)):"primitive"===s.type&&r&&this.ER.gR(u("uColor"),r.getColor()),n){const t=DA(n,this,this.Ka);if(!t&&n.lut.percentageValues)return!1;this.ER.RO(d,n.lut,t)}return this.JM.forEach(((e,r)=>{i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer);const n=c("aPos");if(i.vertexAttribPointer(n,3,i.FLOAT,!1,this.kW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.kW.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.ER.YV(n,1),i.enableVertexAttribArray(n),s.fillStyleIndividual&&void 0!==this.kW.attributeOffsetColor&&1!==t){const t=c("aColor");i.vertexAttribPointer(t,4,i.FLOAT,!1,this.kW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.kW.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.ER.YV(t,1),i.enableVertexAttribArray(t)}if(o&&void 0!==this.kW.attributeOffsetSize){"instanced"===s.type?this.ER.fV(f("uRatioNwuWu"),this.LY.sH()):"primitive"===s.type&&this.ER.fV(u("uDevicePixelRatio"),this.ER.Xz());const t=c("instanced"===s.type?"aOffsetNWU":"aPointSize");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.kW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.kW.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.ER.YV(t,1),i.enableVertexAttribArray(t)}if(a&&void 0!==this.kW.attributeOffsetPointSize3D&&"instanced"===s.type){const t=c("aOffsetAxis");i.vertexAttribPointer(t,3,i.FLOAT,!1,this.kW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.kW.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.ER.YV(t,1),i.enableVertexAttribArray(t)}if(s.fillStylePaletted&&"value"===s.fillStylePaletted.getLookUpProperty()&&void 0!==this.kW.attributeOffsetLookUpValue&&1!==t){const t=c("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.kW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.kW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.ER.YV(t,1),i.enableVertexAttribArray(t)}"instanced"===s.type?(s.geometry.Zm(d,e.existingCoordinatesCount,"phong"===h.type&&1!==t,Boolean(l)&&1!==t),A=!0):"primitive"===s.type&&(this.ER.Zm(i.POINTS,e.existingCoordinatesCount),A=!0)})),A})),this}ol(t,i){Array.isArray(t)||(t=[t]),this.Xa=hi(this.Xa,t,{canReturnB:!0}),this.ja+=t.length;const s=i||Zi(t);return this.Za=this.Za?Ji(this.Za,s):s,this.Ka=void 0,this}xS(t){return this.vS="function"==typeof t?t(this.vS):t,this}pH(){return this.vS}bt(){return this.Za?Math.max(this.Za.max.x,this.Ha.max.x):this.Ha.max.x}xt(){return this.Za?Math.min(this.Za.min.x,this.Ha.min.x):this.Ha.min.x}_t(){return this.Za?Math.max(this.Za.max.y,this.Ha.max.y):this.Ha.max.y}Mt(){return this.Za?Math.min(this.Za.min.y,this.Ha.min.y):this.Ha.min.y}lS(){return this.Za?Math.max(this.Za.max.z,this.Ha.max.z):this.Ha.max.z}uS(){return this.Za?Math.min(this.Za.min.z,this.Ha.min.z):this.Ha.min.z}xl(){const t=this.vS,i=t.getSize();return"number"==typeof i?lh(t)?i/2:dh(t)?5:0:0}bl(){return this.xl()}cS(){return this.xl()}il(){return this.yu}tl(){return this.Xa}al(){return this.$a}ll(){return this.ja}Gt(){return this.Ja=!0,this.yu.length=0,this.$a=0,this.Xa=[],this.ja=0,this.Ha=Ri,this.Za=void 0,this.Ka=void 0,this}dispose(){return super.dispose(),this.xW.fW(),this.bG=void 0,this}OR(){return this.dispose(),this}}const xm=(t,i,s)=>{const e=i.getSize();return gm(t,"number"==typeof e?s||e>=50?20:e>=10?10:e>=3?5:3:32)};class bm extends lm{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.BY="disabled",this.be=_h.fillStyle,this.pv=_h.lineStyle,this.cU=p("bilinear"),this.mH=[],this.yH=void 0,this.bG={},this.SH=!1,this.gN=PA({fillStyleSolid:()=>W(this.be)&&this.be,fillStylePaletted:()=>$(this.be)&&this.be,wireframeStyleLine:()=>Js(this.pv)&&this.pv,wireframeStyleFill:()=>{const t=this.pv&&this.pv.getFillStyle();return W(t)&&t}}),this.Di={x:0,z:0},this.Xw={x:1,z:1},this.tS.M($r);const n="columns"===e.dataOrder?e.columns:e.rows,o="columns"===e.dataOrder?e.rows:e.columns;this.Yn={...e,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o},this.vH=new Array(this.Yn.primaryDimensionVectorsCount).fill(void 0),this.P_=new Vp(this.nN,t.nN.kU,t.cs.ft,Ct,[],this.Yn,-1,T).mv(rt),this.P_.AU=Dp;const a=this.P_.pU.gridTiles.map((t=>{const i=t.sizeHeatmapDataVectors,s=t.sizeUniqueHeatmapDataVectors,e=t.iFirstVector,h=t.iFirstUniqueVector,r=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary),n={primary:t.sizeHeatmapDataVectors.primary-1,secondary:t.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:t.iFirstVector,iFirstUniqueVector:t.iFirstUniqueVector,sizeHeatmapDataVectors:t.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:t.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:e,iFirstGeometryUniqueVector:h,sizeGeometryDataVectors:i,sizeUniqueGeometryDataVectors:s,heightmapData:r,normalmapSize:n}})),l=this.P_.pU.gridTileSizes.map((t=>{const i=a.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary)),s=i[0].sizeGeometryDataVectors;return{...t,tiles:i,sizeGeometryData:s}})),u=a.reduce(((t,i)=>{const s=i.sizeHeatmapDataVectors.primary,e=i.sizeHeatmapDataVectors.secondary,h=s*e;return h>t.cells?{primary:s,secondary:e,cells:h}:t}),{primary:0,secondary:0,cells:0});this.xH={gridTiles:a,gridTileSizes:l,largestGridTileSize:u},this.vv(this.Di,this.Xw)}bH(t){this.MH=t,this.yH=void 0}vv(t,i){this.Di=t,this.Xw=i;const s=this.Yn,e={min:{x:Math.min(this.Di.x,this.Di.x+(s.columns-1)*this.Xw.x),z:Math.min(this.Di.z,this.Di.z+(s.rows-1)*this.Xw.z)},max:{x:Math.max(this.Di.x,this.Di.x+(s.columns-1)*this.Xw.x),z:Math.max(this.Di.z,this.Di.z+(s.rows-1)*this.Xw.z)}},h=new Map;return this.xH.gridTiles.forEach((t=>{const i="columns"===this.Yn.dataOrder?{x:this.Xw.x*(t.sizeHeatmapDataVectors.primary-1),z:this.Xw.z*(t.sizeHeatmapDataVectors.secondary-1)}:{x:this.Xw.x*(t.sizeHeatmapDataVectors.secondary-1),z:this.Xw.z*(t.sizeHeatmapDataVectors.primary-1)},s="columns"===this.Yn.dataOrder?{x:this.Di.x+this.Xw.x*t.iFirstVector.primary,z:this.Di.z+this.Xw.z*t.iFirstVector.secondary}:{x:this.Di.x+this.Xw.x*t.iFirstVector.secondary,z:this.Di.z+this.Xw.z*t.iFirstVector.primary};h.set(t,{sizeAxis:i,startLocationAxis:s})})),this.bU={_H:e,tilesInfo:h},this}xv(){return{start:this.Di,step:this.Xw,end:{x:this.Di.x+this.Xw.x*this.Yn.columns,z:this.Di.z+this.Xw.z*this.Yn.rows}}}Ds(t){const i=this.mH,s=Xh(this.sa,this.be),e=this.gN.fillStyleSolid(s),h=this.gN.fillStylePaletted(s),r=this.pv,n=this.pv!==this.mU,o=this.gN.wireframeStyleLine(n),a=this.gN.wireframeStyleFill(n),l=!1!==a,u=this.cU.o,c=this.cU._(),d=this.tS._(),f=this.Uz(),A=this.Lo._();this.P_.Ds();const g=this.P_.yU;if(!g)return this;this.wH=this.wH||this.CH(g);const p=this.wH;this.kH(p);const m=Bp(i,p,void 0,(t=>t.sizeGeometryDataVectors));if(m.size>0&&(Ep(this.ER,m,(t=>t.heightmapData),(t=>t.heightmapDataTexture)),this.SH=!0),"phong"===d.type&&(m.size>0||f)){const t=this.ER.gl,i=this.ER.az(ng["2D"],ng.DrawToNormalTexture({flipXZ:"rows"===this.Yn.dataOrder,vertexIdSource:this.ER.wO(),normalTextureType:this.ER.gl2?"uint":"ubyte",heightmapTextureType:this.ER.ez?"float":"ubyte",littleEndian:this.ER.IS_MACHINE_LITTLE_ENDIAN}));p.gridTileSizes.forEach((s=>{s.tiles.forEach((e=>{var h;const r=e.normalmapTexture,n=null===(h=this.bU)||void 0===h?void 0:h.tilesInfo.get(e.tileData);if(!r||!n)return;const o={x:e.normalmapSize.secondary,y:e.normalmapSize.primary},a=o.x*o.y;this.ER.aO.VL((()=>{this.ER.lV(i,((h,r,o,l)=>(this.ER.ZR(i).CO(o,a).cV(h("uTileDimensionsXZ"),["columns"===this.Yn.dataOrder?s.sizeHeatmapData.primary:s.sizeHeatmapData.secondary,"columns"===this.Yn.dataOrder?s.sizeHeatmapData.secondary:s.sizeHeatmapData.primary]).FV(h("uTileDimensions"),[s.sizeHeatmapData.primary,s.sizeHeatmapData.secondary]).cV(h("uTileStartLocationAxisXZ"),[n.startLocationAxis.x,n.startLocationAxis.z]).cV(h("uTileSizeAxisXZ"),[n.sizeAxis.x,n.sizeAxis.z]).dV(h("uHeightmapTexture"),e.heightmapDataTexture,1).Zm(t.POINTS,a),!0)))}),r,o,void 0,this.cs.mn(),0)}))}))}const y=this.bG;if(s||n||u){const t=o&&a?{wireframeSolid:o,wireframeFillSolid:a}:void 0;e?y.surface={shader:this.ER.az(ng["3D"],ng.SurfaceGrid({axisWorldTranslation:IA(this.ft),fillColor:"uniform",interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Yn.dataOrder,shadingStyle:d.type,wireframe:l,instanceIdSource:this.ER.kO(),normalTextureType:this.ER.gl2?"uint":"ubyte",intensityTextureType:this.ER.ez?"float":"ubyte",heightmapTextureType:this.ER.ez?"float":"ubyte",littleEndian:this.ER.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:e},wireframe:t}:h&&"value"===h.getLookUpProperty()?y.surface={shader:this.ER.az(ng["3D"],ng.SurfaceGrid({axisWorldTranslation:IA(this.ft),fillColor:["lookup","value",h.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Yn.dataOrder,shadingStyle:d.type,wireframe:l,instanceIdSource:this.ER.kO(),normalTextureType:this.ER.gl2?"uint":"ubyte",intensityTextureType:this.ER.ez?"float":"ubyte",heightmapTextureType:this.ER.ez?"float":"ubyte",littleEndian:this.ER.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:h},wireframe:t}:h?y.surface={shader:this.ER.az(ng["3D"],ng.SurfaceGrid({axisWorldTranslation:IA(this.ft),fillColor:["lookup",h.getLookUpProperty(),h.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Yn.dataOrder,shadingStyle:d.type,wireframe:l,instanceIdSource:this.ER.kO(),normalTextureType:this.ER.gl2?"uint":"ubyte",intensityTextureType:this.ER.ez?"float":"ubyte",heightmapTextureType:this.ER.ez?"float":"ubyte",littleEndian:this.ER.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:h},wireframe:t}:l&&(y.surface={shader:this.ER.az(ng["3D"],ng.SurfaceGrid({axisWorldTranslation:IA(this.ft),fillColor:void 0,interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Yn.dataOrder,shadingStyle:d.type,wireframe:l,instanceIdSource:this.ER.kO(),normalTextureType:this.ER.gl2?"uint":"ubyte",intensityTextureType:this.ER.ez?"float":"ubyte",heightmapTextureType:this.ER.ez?"float":"ubyte",littleEndian:this.ER.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:t})}return y.mousePicking=A?this.bG.mousePicking||{shader:this.ER.az(ng["3D"],ng.SurfaceGrid({axisWorldTranslation:IA(this.ft),fillColor:"uniform",interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Yn.dataOrder,shadingStyle:"simple",wireframe:!1,instanceIdSource:this.ER.kO(),normalTextureType:this.ER.gl2?"uint":"ubyte",intensityTextureType:this.ER.ez?"float":"ubyte",heightmapTextureType:this.ER.ez?"float":"ubyte",littleEndian:this.ER.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.bG=y,this.mH.length=0,this.sa=this.be,this.mU=r,this.tS.o=!1,this}CH(t){const i=this.xH.gridTiles.map((i=>{const s=Rp(this.ER,i.sizeHeatmapDataVectors.secondary,i.sizeHeatmapDataVectors.primary),e=t.gridTiles.find((t=>t.iFirstUniqueVector.primary===i.iFirstUniqueVector.primary&&t.iFirstUniqueVector.secondary===i.iFirstUniqueVector.secondary));if(!e)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...i,intensityDataTexture:e.intensityDataTexture,heightmapDataTexture:s,normalmap:void 0,tileData:i}})),s=this.xH.gridTileSizes.map((t=>{const s=i.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary));return{...t,tiles:s}})),e=this.ER.oV([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),h=this.ER.gl.TRIANGLES;return{gridTiles:i,gridTileSizes:s,rectangleLocationsBuffer:e,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:h}}kH(t){var i;if("phong"===this.tS._().type)for(let s=0;s<t.gridTiles.length;s+=1){const e=t.gridTiles[s];if(e.normalmapTexture)return;let h;const r=null===(i=this.ER.gl2)||void 0===i?void 0:i.ctx;if(r)h=this.ER.AO(null,r.RGBA_INTEGER,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,r.UNSIGNED_INT,r.RGBA32UI);else{const t=this.ER.gl;h=this.ER.AO(null,t.RGBA,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,t.UNSIGNED_BYTE)}e.normalmapTexture=h}else t.gridTiles.forEach((t=>{t.normalmapTexture&&(this.ER.NR(t.normalmapTexture),t.normalmapTexture=void 0)}))}VL(t){var i,s,e,h;const r=this.ER.gl,n=this.wH;if(!n)return this;const o=this.tS._(),a=this.bG,l=1===t?null===(i=a.mousePicking)||void 0===i?void 0:i.shader:null===(s=a.surface)||void 0===s?void 0:s.shader;if(!l)return this;const u=1!==t?null===(e=a.surface)||void 0===e?void 0:e.wireframe:void 0,c=1!==t?null===(h=a.surface)||void 0===h?void 0:h.fill:void 0;return this.ER.lV(l,((i,s,e,h)=>{let a=!1;if(this.ER.ZR(l).TO(e,this.xH.largestGridTileSize.cells).PV(i("uScale"),this.LY.lE.AV()).PV(i("uDisp"),this.LY.lE.gV()).BV(i("uViewProjectionMatrix"),this.YY).fV(i("uIsHighlighted"),1===t||2===t?0:this.Vo).gR(i("uHighlightColorOffset"),1===t||2===t?F:this.Wo).fV(i("uRenderEffectMask"),2===t?1:0),1!==t&&("phong"===o.type&&this.ER.PV(i("uCameraLoc"),this.HY).PV(i("uLightLoc"),this.$Y).fV(i("uAmbientReflection"),o.ambientReflection).fV(i("uSpecularReflection"),o.specularReflection).fV(i("uDiffuseReflection"),o.diffuseReflection).fV(i("uShininess"),o.shininess).gR(i("uLightColor"),o.specularColor).gR(i("uAmbientColor"),o.ambientColor),u)){const{wireframeFillSolid:t,wireframeSolid:s}=u,e=s.getThickness()<0?1:s.getThickness();this.ER.gR(i("uWireframeColor"),t.getColor()).fV(i("uWireframeThickness"),e)}return 1===t?this.ER.gR(i("uColorDiffuse"),this.mN):"solid"===(null==c?void 0:c.fillMode)&&this.ER.gR(i("uColorDiffuse"),c.fillStyleSolid.getColor()),n.gridTileSizes.forEach((h=>{this.ER.cV(i("uTileDimensionsXZ"),["columns"===this.Yn.dataOrder?h.sizeHeatmapData.primary:h.sizeHeatmapData.secondary,"columns"===this.Yn.dataOrder?h.sizeHeatmapData.secondary:h.sizeHeatmapData.primary]).FV(i("uTileDimensions"),[h.sizeHeatmapData.primary,h.sizeHeatmapData.secondary]),h.tiles.forEach((o=>{var l;const d=null===(l=this.bU)||void 0===l?void 0:l.tilesInfo.get(o.tileData);if(!d)return;let f=0,g=(o.sizeHeatmapDataVectors.primary-1)*(o.sizeHeatmapDataVectors.secondary-1);if(this.MH){const t=this.MH.fill.iFirstPrimary,i=this.MH.fill.iFirstPrimary+this.MH.fill.amountPrimary-1,s=o.iFirstVector.primary,e=o.iFirstVector.primary+o.sizeHeatmapDataVectors.primary-1;if(s>i||e<t)return;const r=((t,i,s,e)=>A(Math.max(t,s),Math.min(i,e)))(t,i,s,e);f=(r.min-o.iFirstVector.primary)*(h.sizeGeometryData.secondary-1),g=(r.max-r.min)*(h.sizeGeometryData.secondary-1)}if(!(f<0||g<=0)){if("intensity"===(null==c?void 0:c.fillMode)){const{fillStylePaletted:t}=c,s=this.P_.Ka;this.ER.RO(e,t.lut,s).dV(i("uTileIntensityValues"),o.intensityDataTexture,2).IV(i("uTileBoundsAxisXZ"),[d.startLocationAxis.x,d.startLocationAxis.z,d.sizeAxis.x,d.sizeAxis.z])}if("xyz"===(null==c?void 0:c.fillMode)){const{fillStylePaletted:t}=c,i="x"===t.getLookUpProperty()?{min:this.xt(),max:this.bt()}:"y"===t.getLookUpProperty()?{min:this.Mt(),max:this._t()}:"z"===t.getLookUpProperty()?{min:this.uS(),max:this.lS()}:void 0;if(!i&&t.lut.percentageValues)return;this.ER.RO(e,t.lut,i)}1!==t&&"phong"===this.tS._().type&&o.normalmapTexture&&this.ER.dV(i("uNormalmapTexture"),o.normalmapTexture,3),this.ER.uV(n.rectangleLocationsBuffer,0,{location:s("aGeoCellOffset"),size:2},{location:u?s("aTriangleBary"):void 0,size:3}).LV(i("uBaseInstance"),f).cV(i("uTileStartLocationAxisXZ"),[d.startLocationAxis.x,d.startLocationAxis.z]).cV(i("uTileSizeAxisXZ"),[d.sizeAxis.x,d.sizeAxis.z]).dV(i("uHeightmapTexture"),o.heightmapDataTexture,0).JV(n.rectangleLocationsDrawMode,0,n.rectangleLocationsDrawLength,g),a=!0,r.bindBuffer(r.ARRAY_BUFFER,null)}}))})),a})),this}dispose(){return super.dispose(),this.P_.dispose(),this.wH&&(this.wH.gridTileSizes.forEach((t=>{})),this.wH.gridTiles.forEach((t=>{this.ER.NR(t.heightmapDataTexture),t.normalmapTexture&&this.ER.NR(t.normalmapTexture)})),this.ER.yV(this.wH.rectangleLocationsBuffer),this.wH=void 0),this.bG={},this}OR(){return this.dispose(),this.P_.OR(),this}wv(t){return this.P_.wv(t),this}Cv(t){this.mH.push(t),Lp(this.xH.gridTiles,t,(t=>t.heightmapData));for(let i=t.startPrimary;i<t.startPrimary+t.lengthPrimary;i+=1)this.vH[i]=void 0;return this.yH=void 0,this}Mv(t){return this.cU.M(t),this}_v(){return this.cU._()}ke(t){return this.be=$h(this.be,t),this.P_.ke(this.be),this}zh(){return this.be}mv(t){return this.pv="function"==typeof t?t(this.pv):t,this}bv(){return this.pv}bt(){var t;return(null===(t=this.bU)||void 0===t?void 0:t._H.max.x)||0}xt(){var t;return(null===(t=this.bU)||void 0===t?void 0:t._H.min.x)||0}_t(){const t=this.yH||this.TH();return this.yH=t,t.max}Mt(){const t=this.yH||this.TH();return this.yH=t,t.min}lS(){var t;return(null===(t=this.bU)||void 0===t?void 0:t._H.max.z)||0}uS(){var t;return(null===(t=this.bU)||void 0===t?void 0:t._H.min.z)||0}xl(){return 0}bl(){return 0}cS(){return 0}TH(){if(this.yH)return this.yH;const t=this.MH?this.MH.fill.iFirstPrimary:0,i=this.MH?t+this.MH.fill.amountPrimary-1:this.Yn.primaryDimensionVectorsCount-1;let s=Di,e=Bi;return this.xH.gridTiles.forEach((h=>{for(let r=Math.max(t,h.iFirstUniqueVector.primary);r<=Math.min(i,h.iFirstUniqueVector.primary+h.sizeUniqueHeatmapDataVectors.primary-1);r+=1){const t=(r-h.iFirstUniqueVector.primary)*h.sizeHeatmapDataVectors.secondary;let i=this.vH[r];if(i)s=s<i.min?s:i.min,e=e>i.max?e:i.max;else{i={min:Di,max:Bi},this.vH[r]=i;for(let r=0;r<h.sizeHeatmapDataVectors.secondary;r+=1){const n=h.heightmapData[t+r];s=s<n?s:n,e=e>n?e:n,i.min=Math.min(i.min,n),i.max=Math.max(i.max,n)}}}})),this.yH={min:s,max:e},this.yH}}class Mm extends lm{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.BY="disabled",this._U=0,this.CU={},this.Di={x:0,z:0},this.Xw={x:1,z:1},this.Yn={...e,scrollDimensionSize:"columns"===e.scrollDimension?e.columns:e.rows,staticDimensionSize:"columns"===e.scrollDimension?e.rows:e.columns},this._H={min:{x:this.Di.x,z:this.Di.z},max:{x:"rows"===e.scrollDimension?this.Di.x+(e.columns-1)*this.Xw.x:this.Di.x,z:"columns"===e.scrollDimension?this.Di.z+(e.rows-1)*this.Xw.z:this.Di.z}};const n=()=>({shape:new bm(this.LY,Ct,this.No,{columns:e.columns+("columns"===e.scrollDimension?1:0),rows:e.rows+("rows"===e.scrollDimension?1:0),dataOrder:e.scrollDimension,heatmapDataType:"intensity"},this.pN,this.mN).setVisible(!1),hasData:!1});this.JM=[n(),n()]}Ds(t){this.JM.forEach((i=>{i.shape.Ds(t)}));const i=this.JM.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,It(null===(s=i.shape.P_.Ka)||void 0===s?void 0:s.min,Di)),t.max=Math.max(t.max,It(null===(e=i.shape.P_.Ka)||void 0===e?void 0:e.max,Bi)),t}),{min:Di,max:Bi}),s=this.JM.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,It(null===(s=i.shape.yH)||void 0===s?void 0:s.min,Di)),t.max=Math.max(t.max,It(null===(e=i.shape.yH)||void 0===e?void 0:e.max,Bi)),t}),{min:Di,max:Bi});return this.JM.forEach((t=>{t.shape.P_.Ka=i,t.shape.yH=s})),this}VL(t){return this.JM.forEach((i=>{i.hasData&&(i.shape.YY=this.YY,i.shape.HY=this.HY,i.shape.$Y=this.$Y,i.shape.VL(t))})),this}vv(t,i){return this.Di=t,this.Xw=i,this.JM.forEach((t=>{t.shape.vv("columns"===this.Yn.scrollDimension?{x:t.shape.xv().start.x,z:this.Di.z}:{x:this.Di.x,z:t.shape.xv().start.z},this.Xw)})),"columns"===this.Yn.scrollDimension?(this._H.min.z=t.z,this._H.max.z=this.Di.z+(this.Yn.rows-1)*this.Xw.z):(this._H.min.x=t.x,this._H.max.x=this.Di.x+(this.Yn.columns-1)*this.Xw.x),this}xv(){return{start:this.Di,step:this.Xw}}Gt(){return this._U=0,this.CU={},this._H={min:{x:this.Di.x,z:this.Di.z},max:{x:"rows"===this.Yn.scrollDimension?this.Di.x+(this.Yn.columns-1)*this.Xw.x:this.Di.x,z:"columns"===this.Yn.scrollDimension?this.Di.z+(this.Yn.rows-1)*this.Xw.z:this.Di.z}},this.JM.forEach((t=>{t.shape.setVisible(!1),t.shape.SH=!1,t.hasData=!1})),this}Iv(t){var i;const s=this.JM[0],e=this.JM[1],h=t.heightMapValues?t.heightMapValues.length:null===(i=t.intensityValues)||void 0===i?void 0:i.length;let r=0;if(!h)return this;do{const i=Math.floor(this._U/this.Yn.scrollDimensionSize)%this.JM.length,n=this.JM[i],o=this._U%this.Yn.scrollDimensionSize,a=this.Yn.scrollDimensionSize-o,l=0===o,u=Math.min(a,h),c=o+u,d=o,f=d+1,A=r,g=r+u,p=this._U>=this.Yn.scrollDimensionSize&&c<=this.Yn.scrollDimensionSize-1,m=l;l&&(n.shape.vv("columns"===this.Yn.scrollDimension?{x:this.Di.x+(this._U-1)*this.Xw.x,z:this.Di.z}:{x:this.Di.x,z:this.Di.z+(this._U-1)*this.Xw.z},this.Xw),n.shape.setVisible(!0));const y=p?0:1,S=c+(p?1:0);n.shape.bH({fill:{iFirstPrimary:y,amountPrimary:S},wireframe:{iFirstPrimary:y,amountPrimary:S,connectNext:!1}});const v=n===s?e:s,x=c+1,b=1+this.Yn.scrollDimensionSize-x;v.shape.bH({fill:{iFirstPrimary:x,amountPrimary:b},wireframe:{iFirstPrimary:x,amountPrimary:b-1,connectNext:!0}});const M={};if(t.heightMapValues){const i=t.heightMapValues.slice(A,g);let s=!1;m&&this.CU.yValues&&(s=!0,i.splice(0,0,this.CU.yValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.Yn.staticDimensionSize,values:i,type:"y"};n.shape.Cv(e),n.hasData=!0,M.yValues=i[u-1]}if(t.intensityValues){const i=t.intensityValues.slice(A,g);let s=!1;m&&this.CU.intensityValues&&(s=!0,i.splice(0,0,this.CU.intensityValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.Yn.staticDimensionSize,values:i,type:"intensity"};n.shape.wv(e),n.hasData=!0,M.intensityValues=i[u-1]}this._U+=u,r+=u,this.CU=M}while(r<h);return"columns"===this.Yn.scrollDimension?(this._H.min.x=this.Di.x+Math.max(this._U-this.Yn.scrollDimensionSize,0)*this.Xw.x,this._H.max.x=this.Di.x+(this._U-1)*this.Xw.x):(this._H.min.z=this.Di.z+Math.max(this._U-this.Yn.scrollDimensionSize,0)*this.Xw.z,this._H.max.z=this.Di.z+(this._U-1)*this.Xw.z),this}Mv(t){return this.JM.forEach((i=>i.shape.Mv(t))),this}_v(){return this.JM[0].shape._v()}ke(t){return this.JM.forEach((i=>i.shape.ke(t))),this}zh(){return this.JM[0].shape.zh()}mv(t){return this.JM.forEach((i=>i.shape.mv(t))),this}bv(){return this.JM[0].shape.bv()}OR(){return this.dispose(),this.JM.forEach((t=>t.shape.OR())),this}dispose(){return super.dispose(),this.JM.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.JM.forEach((i=>i.shape.setVisible(t&&i.hasData))),this}nS(t){return super.nS(t),this.JM.forEach((i=>i.shape.nS(t))),this}bt(){return this._H.max.x}xt(){return this._H.min.x}_t(){return Math.max(this.JM[0].shape._t(),this.JM[1].shape._t())}Mt(){return Math.min(this.JM[0].shape.Mt(),this.JM[1].shape.Mt())}lS(){return this._H.max.z}uS(){return this._H.min.z}xl(){return 0}bl(){return 0}cS(){return 0}ds(t){return super.ds(t),this.JM.forEach((i=>i.shape.ds(t))),this}}class _m extends qp{constructor(t,i,s,e){super(t,i,s),this.FH=45,this.IH=.1,this.PH=100,this.HY=d(0,0,1),this.DH=d(0,0,-1),this.BH=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.tS=new Hr,this.ft=e}qv(){const{cellIndex:t,cellSpan:i,cellsAmount:s}=this.ft,e=i.x/s.x,h=i.y/s.y,r=t.x/s.x,n=t.y/s.y,o=this.cs.ai();return{x:r*o.x,y:n*o.y,width:e*o.x,height:h*o.y}}setCameraLocation(t){return this.HY=t,this}getCameraLocation(){return this.HY}setCameraDirection(t){return this.DH=Pi.normalize(t),this}getCameraDirection(){return this.DH}setLightLocation(t){return this.$Y=t,this}getLightLocation(){return this.$Y}LH(){return d(this.BH[0],this.BH[1],this.BH[2])}RH(){return d(this.BH[4],this.BH[5],this.BH[6])}}class wm extends _m{constructor(t,i,s,e){super(t,i,s,e),this.lE=new Qg,this.EH=!0,this.nN=t,this.gl=t.aN(),this._Y=this.SY,this.zH=this.cs.ko((()=>{this.EH=!0})),this.VH=e.Y((()=>{this.EH=!0}))}nV(t){const i=t.xt(),s=t.Mt(),e=t.uS(),h=t.bt(),r=t._t(),n=t.lS();if(i===Di||h===Bi||s===Di||r===Bi||e===Di||n===Bi)return Li;const o=t.xl(),a=t.bl(),l=t.cS(),u=Math.abs(t.Ts.Gy(o)*t.ft.x.ht()),c=Math.abs(t.Ts.Gy(a)*t.ft.y.ht()),d=Math.abs(t.Ts.Gy(l)*t.ft.z.ht()),f=i-u,A=h+u,g=s-c,p=r+c,m=e-d,y=n+d;let S;return[{x:f,y:g,z:m},{x:A,y:g,z:m},{x:f,y:p,z:m},{x:A,y:p,z:m},{x:f,y:g,z:y},{x:A,y:g,z:y},{x:f,y:p,z:y},{x:A,y:p,z:y}].map((i=>t.Ts.Uy(i))).forEach((t=>{if(!t)return;const i={min:t,max:t};S=S?Qi(S,{min:t,max:t}):i})),S||Li}wY(t){const i=Array.from(this._Y.values());for(let s=0;s<i.length;s+=1){const e=i[s],h=e.uN(t);if(h)return{entity:e,index:s,collectionMember:h.collectionMember}}}Uy(t){if(this.OH(),this.NH(),!this.YY)return;const i=this.lE.gV(),s=d(i[0],i[1],i[2]),e=this.lE.AV(),h=d(e[0],e[1],e[2]),r=Pi.divideVec(Pi.subtractVec(t,s),h),n=this.YY,o=bl.multiply(n,[r.x,r.y,r.z,1]),a=l(o[0]/o[3],o[1]/o[3]),u=this.cs.ai();return{x:.5*(1+a.x)*u.x,y:.5*(1+a.y)*u.y}}At(t){const i=this.lE.gV(),s=this.lE.AV(),e=Pi.divideVec(Pi.subtractVec(t,{x:i[0],y:i[1],z:i[2]}),{x:s[0],y:s[1],z:s[2]});return{...t,x:e.x,y:e.y,z:e.z}}St(t){const i=this.lE.gV(),s=this.lE.AV(),e=Pi.addVec(Pi.multiplyVec(t,{x:s[0],y:s[1],z:s[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:e.x,y:e.y,z:e.z}}Gy(t){return t/1e3}sH(){return.001}Ds(){const t=this.HY,i=this.$Y,s=this.ft.x.o||this.ft.y.o||this.ft.z.o;if(!i)throw Ai(0,(()=>gi()));const{viewProjectionMatrix:e}=this.OH();this.NH();const h=[t.x,t.y,t.z],r=[i.x,i.y,i.z];return this.SY.forEach((t=>{t.YY=e,t.HY=h,t.$Y=r,t.Ds(s)})),this}OH(){if(!this.EH&&this.YY)return{viewProjectionMatrix:this.YY};const t=this.qv(),i=t.width/t.height;this.GH=bl.projectionPerspective(this.FH,i,this.IH,this.PH);const s=this.HY;this.BH[12]=s.x,this.BH[13]=s.y,this.BH[14]=s.z;const e=this.DH,h=d(0,1,0),r=Pi.multiply(e,-1),n=Pi.normalize(Pi.cross(h,r)),o=Pi.normalize(Pi.cross(r,n));this.BH[0]=n.x,this.BH[1]=n.y,this.BH[2]=n.z,this.BH[4]=o.x,this.BH[5]=o.y,this.BH[6]=o.z,this.BH[8]=r.x,this.BH[9]=r.y,this.BH[10]=r.z,this.WH=bl.inverse(this.BH);const{cellIndex:a,cellSpan:l,cellsAmount:u}=this.ft,c=l.x/u.x,f=l.y/u.y,A=(a.x+l.x/2)/u.x,g=(a.y+l.y/2)/u.y,p=bl.multiply(bl.translation(Vr(-1,1,A),Vr(-1,1,g),0),bl.scaling(c,f,1));return this.YY=bl.multiply(p,bl.multiply(this.GH,this.WH)),this.UH=bl.inverse(this.YY),this.EH=!1,{viewProjectionMatrix:this.YY}}NH(){this.lE.qO(this.ft.x),this.lE.tN(this.ft.y),this.lE.iN(this.ft.z)}VL(t,i){const s=this.gl.Xz(),e=this.qv(),h={x:e.x*s*i,y:e.y*s*i,width:e.width*s*i,height:e.height*s*i};return this.gl.rV(h.x,h.y,h.width,h.height),this.SY.forEach((i=>{i.getVisible()&&(this.gl.qz(i.BY),1!==t&&this.gl.oS(i.sS),(1!==t||i.getMouseInteractions())&&i.VL(t))})),this.gl.qz("disabled"),this.gl.oS(!1),this.gl.tV(!1),this}setCameraLocation(t){return this.HY.x===t.x&&this.HY.y===t.y&&this.HY.z===t.z||(this.EH=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.DH.x===t.x&&this.DH.y===t.y&&this.DH.z===t.z||(this.EH=!0),super.setCameraDirection(t),this}U(){super.U(),this.cs.To(this.zH),this.ft.H(this.VH)}bS(t){const i=this.nN.CY();return this.vY(new vm(this,this.xY,[],i,this.nN.kY(i),t))}sy(t){const i=this.nN.CY();return this.vY(new pm(this,this.xY,t,i,this.nN.kY(i)))}gS(){const t=this.nN.CY();return this.vY(new um(this,this.xY,[],t,this.nN.kY(t)))}Ev(){const t=this.nN.CY();return this.vY(new Sm(this,this.xY,[],t,this.nN.kY(t)))}Rg(){const t=this.nN.CY();return this.vY(new fm(this,this.xY,[],t,this.nN.kY(t)))}yv(t){const i=this.nN.CY();return this.vY(new bm(this,this.xY,[],t,i,this.nN.kY(i)))}Fv(t){const i=this.nN.CY();return this.vY(new Mm(this,this.xY,[],t,i,this.nN.kY(i)))}}class Cm extends wh{constructor(t,i,s,e=Xg){if(super(t,i,s),this.j=u(1,1),this.YH=!1,this.HH=0,this.$H=!0,this.XH=0,this.iH=8388608,this.XE=[null,null],this.jH=null,this.ZH=null,this.QH=0,this.Jg=!1,this.JH=0,this.vs=(t=!1)=>(this.Xi||this.fn||this.KH()||(t&&(this.YH=!0),this.rn=!0,this.qH||this.Jr.oz(t)),this),this.qH=!1,this.dz=t=>{if(this.Xi||this.fn)return;const i=t-this.HH;if(i>=this.Jn||-1===this.Jn){this.qH=!0,this.HH=t,this.YH=!1;const s=i>50?1e3/60:i;this.nn&&this.nn(s),this.rn=!1,-1!==this.Jn&&this.YH&&(this.Jr.oz(this.YH),this.rn=!0),this.us.Ds(i),this.Sn(),this.vn(),this.an&&this.an(),this.qH=!1,this.L.emit("render"),this.rn&&this.vs(this.YH)}else this.rn=!0,this.Jr.oz()},this.t$=new Map,this.aN=()=>this.ER,this.i$=()=>{var t,i,s;const e=this.Nn(),h=this.$H,r=xt.performance.now(),n=null===(t=this.s$)||void 0===t?void 0:t.e$.reduce(((t,i)=>t?i.h$&&t.h$&&i.h$>t.h$?i:t:i),void 0),o=null==n?void 0:n.h$,a=null===(i=this.Bn)||void 0===i?void 0:i.timeStamp,l=null===(s=this.Mo)||void 0===s?void 0:s.timeStamp;return h?(this.vs(!0),!1):void 0===n||(void 0===n||!n.r$)&&(void 0!==l&&void 0!==o&&l>o||(void 0!==o&&void 0===e?r-o>=1e3:!(void 0!==o&&void 0!==a&&r-a>=2e3)||r-o>=1e3))},this.n$=()=>{var t,i;this.o$=void 0;const s=null===(i=null===(t=this.s$)||void 0===t?void 0:t.a$)||void 0===i?void 0:i.l$;void 0===s||s>=this.XH||this.u$()},this.vn=()=>{if(this.Xi||this.fn)return this;const t=this.ER.gl,i=xt.performance.now();this.ER.eV(t.FRAMEBUFFER,this.Jr.iz?this.XE[0]:null);const s=this.j,e=s.x>0&&s.y>0;if(this.pn.o&&this.ER.tO(this.pn._()),t.resize&&e&&t.resize(s.x*this.ER.Xz(),s.y*this.ER.Xz()),this.ER.hV(0,0,s.x*this.ER.Xz(),s.y*this.ER.Xz()),this.ER.rV(0,0,s.x*this.ER.Xz(),s.y*this.ER.Xz()),this.ER.Gt(),e)for(const t of this.sn.values())t.VL(0,1);if(this.Yn.jn&&e&&(this.o$&&(xt.clearTimeout(this.o$),this.o$=void 0),this.i$()?(this.u$(),this.ER.eV(t.FRAMEBUFFER,this.Jr.iz?this.XE[0]:null)):this.o$=xt.setTimeout(this.n$,500)),this.Z(),this.Zr(),this.wn&&this._n(this.wn),this.Jr.iz){const i=this.ER.gl2.ctx;i.bindFramebuffer(i.READ_FRAMEBUFFER,this.XE[0]),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,this.XE[1]),i.clearBufferfv(i.COLOR,0,[1,1,1,1]),i.blitFramebuffer(0,0,this.j.x*this.ER.Xz(),this.j.y*this.ER.Xz(),0,0,this.j.x*this.ER.Xz(),this.j.y*this.ER.Xz(),t.COLOR_BUFFER_BIT,t.LINEAR)}else t.bindTexture(t.TEXTURE_2D,this.GE),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,this.j.x*this.ER.Xz(),this.j.y*this.ER.Xz(),0),t.bindTexture(t.TEXTURE_2D,null);return this.ER.eV(t.FRAMEBUFFER,null),this.Jr.oz(),this.$H=!1,this.XH=i,this},this.Sn=()=>{if("use-window"===this.c$.mode){const t=xt.devicePixelRatio||1;this.ER.fO(t)}const t=this.j;if(0===t.x||0===t.y)return this;this.ao.tt(t);for(const t of this.sn.values())t.Ds();return this.Z(),this},this.d$=1,this.Jr=t,this.Jr.qE){this.f$=xt.document.createElement("canvas"),this.f$.style.width="100%",this.f$.style.height="100%",this.f$.style.display="block",this.f$.style.boxSizing="content-box",this.f$.style.position="absolute";const t=this.f$.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!1});if(!t)throw new gt("No Canvas context available.");this.WE=t,this.Wr.appendChild(this.f$)}this.Jr.gz(this);const h={preserveDrawingBuffer:!0,antialias:i?i.antialias:void 0,alpha:!0,lineAntialias:!i||(!0===i.lineAntiAlias||!1===i.lineAntiAlias?i.lineAntiAlias:!1!==i.antialias)};let r;if(this.Jr.iz&&t.gl2&&(r=new e(this,this.Yn,{type:"webgl2",ctx:t.gl2.ctx,antialias:h.antialias,lineAntialias:h.lineAntialias},this.ts.isDark)),r||this.Jr.iz||(r=new e(this,this.Yn,{type:"webgl1",ctx:t.gl,antialias:h.antialias,lineAntialias:h.lineAntialias},this.ts.isDark)),!r)throw new gt("No WebGL context available");if(this.ER=r,"number"==typeof(null==i?void 0:i.devicePixelRatio))this.c$={mode:"fixed",value:i.devicePixelRatio},this.ER.fO(i.devicePixelRatio);else{const t=xt.document.head.querySelector('meta[name="viewport"]'),s=!0===i.devicePixelRatio||(null==t?void 0:t.content.includes("width=device-width")),e=xt.devicePixelRatio||1;this.c$=s?{mode:"use-window"}:{mode:"fixed",value:e},this.ER.fO(e)}const n=i?i.width:void 0,o=i?i.height:void 0;this.ro=this.A$(n),this.oo=this.A$(o),this.g$(this.ro,this.oo),this.kU=this.II("engine offscreen",1e6),this.p$=this.II("engine bg",0);const a="function"==typeof this.ts.lcjsBackgroundFillStyle?this.ts.lcjsBackgroundFillStyle(this.Yn.Xs):this.ts.lcjsBackgroundFillStyle;this.ao=this.p$.Te(this.ft).ke(a).Ce(this.ts.lcjsBackgroundStrokeStyle).setMouseInteractions(!1).Ie({x:0,y:0});const l=this.II("engine effects",200001).TY(this.ts.effect);this.hs=l;const c=this.Jr.iz,d=this.ai();c&&(this.XE=[r.xV(),r.xV()]);const f=this.ER.gl;c&&(this.jH=f.createRenderbuffer(),this.ZH=f.createRenderbuffer()),this.GE=f.createTexture();const A=d.x*this.ER.Xz(),g=d.y*this.ER.Xz();if(c){f.bindRenderbuffer(f.RENDERBUFFER,this.jH);const t=this.ER.gl2.ctx;this.QH=this.Jr.DE&&!1!==i.antialias?t.getParameter(t.MAX_SAMPLES):0,t.renderbufferStorageMultisample(t.RENDERBUFFER,this.QH,t.RGBA8,A,g),f.bindRenderbuffer(f.RENDERBUFFER,this.ZH),f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,A,g),t.renderbufferStorageMultisample(t.RENDERBUFFER,this.QH,t.DEPTH_COMPONENT16,A,g)}c&&(this.ER.eV(f.FRAMEBUFFER,this.XE[0]),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,this.jH),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,this.ZH)),f.bindTexture(f.TEXTURE_2D,this.GE),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,A,g,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),c&&(this.ER.eV(f.FRAMEBUFFER,this.XE[1]),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.GE,0)),this.ER.eV(f.FRAMEBUFFER,null),this.An(),this.Zr(),this.hp=Sh(this),this.rp={ts:this.ts,us:this.us,ft:this.ft,vs:t=>this.vs(t),Nn:()=>this.Nn(),dB:t=>this.dB(t),Yn:this.Yn,Gn:t=>this.Gn(t),hs:this.hs,Do:t=>this.Do(t),Bo:t=>this.Bo(t),Pg:{Ig:(t,i,s)=>this.ER.Oh(i.family).JR(t,i,s,this.ts.isDark)}};const p=()=>{this.U()};xt.addEventListener("unload",p),this.ln.push((()=>{xt.removeEventListener("unload",p)}))}get m$(){return this.sn}Kr(t,i){let s=this.t$.get(t);if(!s){const i=this.ER.SO(t),e=new Set,h=t=>{e.add(t)},r=s=>{e.delete(s)&&0===e.size&&(i.unbindResources(),this.t$.delete(t))},n=[];s={imageTexture:i,instances:e,handleNewInstance:h,handleInstanceDisposed:r,sharedEngineReference:{fB:()=>i.Bz,AB:t=>{i.Bz?t():n.push(t)}}},this.t$.set(t,s),i.ZR(this),i.Nz((()=>{n.forEach((t=>{t()})),n.length=0}))}const e=new nn(t,s.handleNewInstance,s.handleInstanceDisposed,i);return s.handleNewInstance(e),e}dB(t){const i=Array.from(this.t$.values()).find((i=>i.instances.has(t)));if(!i)throw Ai(0,(()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!")));return i.sharedEngineReference}Cn(t,i){var s;const e=null===(s=this.s$)||void 0===s?void 0:s.a$;if(!e)return;const h=this.De(i.x,i.y),r=Math.round(h.x*this.ER.Xz()),n=Math.round(h.y*this.ER.Xz());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map((t=>this.y$(e,r+t[0]/e.S$,n+t[1]/e.S$))).reduce(((t,i)=>{if(void 0===i)return t||void 0;const s=1e6*i.layerIndex+i.entityIndex;return!t||s>t.zIndexForComparison?{zIndexForComparison:s,entity:i.entity,collectionMember:i.collectionMember}:t}),void 0)}y$(t,i,s){const e=Math.round(i*t.S$),h=Math.round(s*t.S$);if(e<0||e>=t.j.x||h<0||h>=t.j.y)return;const r=4*(e+h*t.j.x),n=t.v$[r+0],o=t.v$[r+1],a=t.v$[r+2],l=t.v$[r+3];return void 0!==n&&void 0!==o&&void 0!==a&&void 0!==l?this.x$(n,o,a,l):void 0}$r(t,i,s){const e=this.ER.gl;this.Jr.iz?(this.ER.eV(e.FRAMEBUFFER,this.XE[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.GE,0)):this.ER.eV(e.FRAMEBUFFER,null);const h=this.NE(),r=h.x,n=h.y,o=new Uint8Array(r*n*4);this.Jr.iz||this.vn(),e.readPixels(0,0,r,n,e.RGBA,e.UNSIGNED_BYTE,o);const a=new ImageData(new Uint8ClampedArray(o),r,n),l=document.createElement("canvas"),u=l.getContext("2d");if(!u)throw new Error("Failed to create 2D context for saving image.");l.width=r,l.height=n,u.putImageData(a,0,0),u.translate(0,n),u.scale(1,-1),u.drawImage(l,0,0),this.Jr.iz&&(this.ER.eV(e.FRAMEBUFFER,this.XE[0]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,this.jH),this.ER.eV(e.FRAMEBUFFER,this.XE[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.GE,0)),this.ER.eV(e.FRAMEBUFFER,null);const c=l.toDataURL(t,i);return s?c:(t=>{const i=t.split(",")[0].split(":")[1].split(";")[0],s=xt.atob(t.split(",")[1]),e=new Uint8Array(s.length);for(let t=0;t<s.length;t+=1)e[t]=s.charCodeAt(t);return new xt.Blob([e.buffer],{type:i})})(c)}Xr(t,i,s=!1){this.An(l(Math.round(t),Math.round(i))),this.yn();const e=this.ER.gl.drawingBufferWidth,h=this.ER.gl.drawingBufferHeight,r=new Uint8Array(e*h*4);if(this.ER.gl.readPixels(0,0,e,h,this.ER.gl.RGBA,this.ER.gl.UNSIGNED_BYTE,r),!s){const t=h/2|0,i=4*e,s=new Uint8Array(4*e);for(let e=0;e<t;e+=1){const t=e*i,n=(h-e-1)*i;s.set(r.subarray(t,t+i)),r.copyWithin(t,n,n+i),r.set(s,n)}}return this.hn={x:0,y:i},r}mL(t){return void 0!==this.ro?this.ro[0]=t:this.ro=[t,void 0],this.Wr.style.minWidth=`${this.ro[0]}px`,this.An(),this}SL(t){return void 0!==this.ro?this.ro[1]=t:this.ro=[void 0,t],this.Wr.style.maxWidth=`${this.ro[1]}px`,this.An(),this}xL(t){return void 0!==this.oo?this.oo[0]=t:this.oo=[t,void 0],this.Wr.style.minHeight=`${this.oo[0]}px`,this.An(),this}ML(t){return void 0!==this.oo?this.oo[1]=t:this.oo=[void 0,t],this.Wr.style.maxHeight=`${this.oo[1]}px`,this.An(),this}g$(t,i){return this.ro=t,this.oo=i,this.Wr.style.minWidth=`${this.ro[0]}px`,this.Wr.style.maxWidth=`${this.ro[1]}px`,this.Wr.style.minHeight=`${this.oo[0]}px`,this.Wr.style.maxHeight=`${this.oo[1]}px`,this.An(),this}VE(t){return this.Jg!==t&&(this.L.emit("inViewChange",t),this.Jg=t),this}zE(){return this.Jg}pz(t){this.JH=t}Az(){return this.JH}II(t,i=this.fo()){const s=this.do(i);if(s){if(Ai(0,(()=>{})),!(s instanceof im))throw new Error("Unexpected Engine Layer error");return s}return this.xn(new im(this,i,t))}LI(t,i,s){const e=this.do(i);if(e){if(Ai(0,(()=>{})),!(e instanceof wm))throw new Error("Unexpected Engine Layer error");return e}return this.xn(new wm(this,i,t,s))}ai(){return this.j}NE(){const t=this.ER.Xz();return{x:Math.round(this.j.x*t),y:Math.round(this.j.y*t)}}A$(t){return t instanceof Array||(t=[t,t]),t}b$(){return this.Jr.UE}KH(){const t=this.ER.gl;return t&&"resize"in t}u$(){var t;const i=this.ER.gl,s=xt.performance.now(),e=this.Nn(),h=this.Yn.Xn,r={x:Math.ceil(this.j.x*this.ER.Xz()*h),y:Math.ceil(this.j.y*this.ER.Xz()*h)};this.s$||(this.s$={S$:h,M$:r,e$:[],a$:void 0});let n=this.s$.e$.find((t=>!t.r$)),o=!1;n||(o=!0,n={r$:!1,j:r,DO:i.createTexture(),_$:this.ER.xV(),ZH:this.ER.bV(),w$:new Uint8Array,h$:void 0},this.s$.e$.push(n));const a=n;(o||a.j.x!==r.x||a.j.y!==r.y)&&(i.bindTexture(i.TEXTURE_2D,a.DO),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r.x,r.y,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.ER.eV(i.FRAMEBUFFER,a._$),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a.DO,0),i.bindRenderbuffer(i.RENDERBUFFER,a.ZH),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,r.x,r.y),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,a.ZH),a.w$=new Uint8Array(r.x*r.y*4),a.j=r),a.r$=!0,a.h$=s,this.ER.eV(i.FRAMEBUFFER,a._$),i.clearDepth(1),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.disable(i.BLEND),i.resize&&i.resize(r.x,r.y),this.ER.hV(0,0,r.x,r.y);for(const t of this.sn.values())t.VL(1,h);this.ER.eV(i.FRAMEBUFFER,null),i.bindTexture(i.TEXTURE_2D,null),i.bindRenderbuffer(i.RENDERBUFFER,null),i.enable(i.BLEND);const l=null===(t=this.ER.gl2)||void 0===t?void 0:t.ctx,u=()=>{if(this.s$){const t=this.s$.a$;if(t&&t.l$>s)return;this.s$.a$={l$:s,S$:h,j:r,v$:a.w$,C$:e}}};l?this.ER.FO(l,a._$,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,a.w$).then((()=>{this.Xi||(a.r$=!1,u())})).catch((t=>{this.Xi||(a.r$=!1,xt.console.warn("LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"))})):(this.ER.IO(a._$,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,a.w$),a.r$=!1,u())}An(t){if("use-window"===this.c$.mode){const t=xt.devicePixelRatio||1;this.ER.fO(t)}const i=this.j.x,s=this.j.y,e=t||{x:this.Wr.offsetWidth,y:this.Wr.offsetHeight};if(0!==e.x&&0!==e.y&&(e.x!==i||e.y!==s)){this.j=e,this.ft.x.K(0,e.x).tt(e.x),this.ft.y.K(0,e.y).tt(e.y);const t=e.x*this.ER.Xz(),i=e.y*this.ER.Xz(),s=this.ER.gl;this.Jr.qE&&this.WE&&(this.WE.canvas.width=t,this.WE.canvas.height=i);const h=this.Jr.iz;if(this.GE&&(s.bindTexture(s.TEXTURE_2D,this.GE),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,t,i,0,s.RGBA,s.UNSIGNED_BYTE,null)),h){const e=this.ER.gl2.ctx;this.jH&&(s.bindRenderbuffer(s.RENDERBUFFER,this.jH),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.QH,e.RGBA8,t,i)),this.ZH&&(s.bindRenderbuffer(s.RENDERBUFFER,this.ZH),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,t,i),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.QH,e.DEPTH_COMPONENT16,t,i))}s.bindRenderbuffer(s.RENDERBUFFER,null),this.L.emit("resize",[this.j.x,this.j.y])}}U(){var t;this.Xi||(super.U(),this.o$&&(xt.clearTimeout(this.o$),this.o$=void 0),Array.from(this.ER.bE.entries()).forEach((([t,i])=>{i.OR(!1),this.ER.bE.delete(t)})),Array.from(this.ER.CV.values()).forEach((t=>{t.unbindResources()})),this.ER.CV.clear(),this.ER.wV.Tz(),this.ER.lO.U(),this.ER.yV(this.ER.uO),this.ER.yV(this.ER.cO),this.ER.rO.forEach(((t,i)=>{this.ER.gl.deleteBuffer(i)})),this.ER.rO.clear(),this.ER._O&&(this.ER.yV(this.ER._O.buffer),this.ER._O=void 0),this.ER._V(this.XE[0]),this.ER._V(this.XE[1]),this.ER.MV(this.jH),this.ER.NR(this.GE),this.ER.MV(this.ZH),this.s$&&(this.s$.e$.forEach((t=>{this.ER.MV(t.ZH),this.ER._V(t._$),this.ER.NR(t.DO)})),this.s$=void 0),this.ER.sO.forEach((t=>this.ER.yV(t))),this.t$.clear(),this.Jr.mz(this),this.f$&&(null===(t=this.f$.parentElement)||void 0===t||t.removeChild(this.f$),this.f$=void 0),this.WE&&(this.WE=void 0),this.ER.gl=void 0)}CY(){const t=this.d$;return t>4294967295&&(console.warn("LightningChart JS picking ID overflow.\nThis is an unexpected error that could compromise user interactions on the chart.\nPlease report the issue to https://lightningchart.com/js-charts/docs/contact!"),this.d$=1),this.d$+=1,t}kY(t){let i=t;const s=Math.floor(i/16777216);i-=16777216*s;const e=Math.floor(i/65536);i-=65536*e;const h=Math.floor(i/256);return i-=256*h,M(s,e,h,i)}x$(t,i,s,e){if(0===t&&0===i&&0===s&&0===e)return;const h=16777216*t+65536*i+256*s+e;for(const t of this.m$.values()){const i=t.wY(h);if(i)return{entity:i.entity,collectionMember:i.collectionMember,entityIndex:i.index,layerIndex:t.bn()}}}}var km="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Tm={exports:{}};!function(t,i){function s(t,i){if(!t)throw new Error(i||"Assertion failed")}function e(t,i){t.super_=i;var s=function(){};s.prototype=i.prototype,t.prototype=new s,t.prototype.constructor=t}function h(t,i,s){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(s=i,i=10),this.Oz(t||0,i||10,s||"be"))}var r;"object"==typeof Tm?Tm.exports=h:i.BN=h,h.BN=h,h.wordSize=26;try{r=(void 0).Buffer}catch(t){}function n(t,i,e){for(var h=0,r=Math.min(t.length,e),n=0,o=i;o<r;o++){var a,l=t.charCodeAt(o)-48;h<<=4,h|=a=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,n|=a}return s(!(240&n),"Invalid character in "+t),h}function o(t,i,e,h){for(var r=0,n=0,o=Math.min(t.length,e),a=i;a<o;a++){var l=t.charCodeAt(a)-48;r*=h,n=l>=49?l-49+10:l>=17?l-17+10:l,s(l>=0&&n<h,"Invalid character"),r+=n}return r}function a(t,i){t.words=i.words,t.length=i.length,t.negative=i.negative,t.red=i.red}if(h.isBN=function(t){return t instanceof h||null!==t&&"object"==typeof t&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,i){return t.cmp(i)>0?t:i},h.min=function(t,i){return t.cmp(i)<0?t:i},h.prototype.Oz=function(t,i,e){if("number"==typeof t)return this.k$(t,i,e);if("object"==typeof t)return this.T$(t,i,e);"hex"===i&&(i=16),s(i===(0|i)&&i>=2&&i<=36);var h=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&h++,16===i?this.F$(t,h):this.I$(t,i,h),"-"===t[0]&&(this.negative=1),this.P$(),"le"===e&&this.T$(this.toArray(),i,e)},h.prototype.k$=function(t,i,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(s(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this.T$(this.toArray(),i,e)},h.prototype.T$=function(t,i,e){if(s("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var r,n,o=0;if("be"===e)for(h=t.length-1,r=0;h>=0;h-=3)n=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);else if("le"===e)for(h=0,r=0;h<t.length;h+=3)n=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);return this.P$()},h.prototype.F$=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var e,h,r=0;for(s=t.length-6,e=0;s>=i;s-=6)h=n(t,s,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303,(r+=24)>=26&&(r-=26,e++);s+6!==i&&(h=n(t,i,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303),this.P$()},h.prototype.I$=function(t,i,s){this.words=[0],this.length=1;for(var e=0,h=1;h<=67108863;h*=i)e++;e--,h=h/i|0;for(var r=t.length-s,n=r%e,a=Math.min(r,r-n)+s,l=0,u=s;u<a;u+=e)l=o(t,u,u+e,i),this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this.D$(l);if(0!==n){var c=1;for(l=o(t,u,t.length,i),u=0;u<n;u++)c*=i;this.imuln(c),this.words[0]+l<67108864?this.words[0]+=l:this.D$(l)}},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype.B$=function(t){a(t,this)},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype.L$=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype.P$=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this.R$()},h.prototype.R$=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{h.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){h.prototype.inspect=l}else h.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,i,s){s.negative=i.negative^t.negative;var e=t.length+i.length|0;s.length=e,e=e-1|0;var h=0|t.words[0],r=0|i.words[0],n=h*r,o=67108863&n,a=n/67108864|0;s.words[0]=o;for(var l=1;l<e;l++){for(var u=a>>>26,c=67108863&a,d=Math.min(l,i.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var A=l-f|0;u+=(n=(h=0|t.words[A])*(r=0|i.words[f])+c)/67108864|0,c=67108863&n}s.words[l]=0|c,a=0|u}return 0!==a?s.words[l]=0|a:s.length--,s.P$()}h.prototype.toString=function(t,i){var e;if(i=0|i||1,16===(t=t||10)||"hex"===t){e="";for(var h=0,r=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<h|r)).toString(16);e=0!=(r=o>>>24-h&16777215)||n!==this.length-1?u[6-a.length]+a+e:a+e,(h+=2)>=26&&(h-=26,n--)}for(0!==r&&(e=r.toString(16)+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],f=d[t];e="";var A=this.clone();for(A.negative=0;!A.isZero();){var g=A.modrn(f).toString(t);e=(A=A.idivn(f)).isZero()?g+e:u[l-g.length]+g+e}for(this.isZero()&&(e="0"+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}s(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16,2)},r&&(h.prototype.toBuffer=function(t,i){return this.toArrayLike(r,t,i)}),h.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},h.prototype.toArrayLike=function(t,i,e){this.P$();var h=this.byteLength(),r=e||Math.max(1,h);s(h<=r,"byte array longer than desired length"),s(r>0,"Requested array length <= 0");var n=function(t,i){return t.allocUnsafe?t.allocUnsafe(i):new t(i)}(t,r);return this["_toArrayLike"+("le"===i?"LE":"BE")](n,h),n},h.prototype.E$=function(t,i){for(var s=0,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s++]=255&n,s<t.length&&(t[s++]=n>>8&255),s<t.length&&(t[s++]=n>>16&255),6===r?(s<t.length&&(t[s++]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s<t.length)for(t[s++]=e;s<t.length;)t[s++]=0},h.prototype.z$=function(t,i){for(var s=t.length-1,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s--]=255&n,s>=0&&(t[s--]=n>>8&255),s>=0&&(t[s--]=n>>16&255),6===r?(s>=0&&(t[s--]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s>=0)for(t[s--]=e;s>=0;)t[s--]=0},Math.clz32?h.prototype.V$=function(t){return 32-Math.clz32(t)}:h.prototype.V$=function(t){var i=t,s=0;return i>=4096&&(s+=13,i>>>=13),i>=64&&(s+=7,i>>>=7),i>=8&&(s+=4,i>>>=4),i>=2&&(s+=2,i>>>=2),s+i},h.prototype.O$=function(t){if(0===t)return 26;var i=t,s=0;return 0==(8191&i)&&(s+=13,i>>>=13),0==(127&i)&&(s+=7,i>>>=7),0==(15&i)&&(s+=4,i>>>=4),0==(3&i)&&(s+=2,i>>>=2),0==(1&i)&&s++,s},h.prototype.bitLength=function(){var t=this.words[this.length-1],i=this.V$(t);return 26*(this.length-1)+i},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var s=this.O$(this.words[i]);if(t+=s,26!==s)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.P$()},h.prototype.ior=function(t){return s(0==(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var s=0;s<i.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=i.length,this.P$()},h.prototype.iand=function(t){return s(0==(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var i,s;this.length>t.length?(i=this,s=t):(i=t,s=this);for(var e=0;e<s.length;e++)this.words[e]=i.words[e]^s.words[e];if(this!==i)for(;e<i.length;e++)this.words[e]=i.words[e];return this.length=i.length,this.P$()},h.prototype.ixor=function(t){return s(0==(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){s("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),e=t%26;this.L$(i),e>0&&i--;for(var h=0;h<i;h++)this.words[h]=67108863&~this.words[h];return e>0&&(this.words[h]=~this.words[h]&67108863>>26-e),this.P$()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,i){s("number"==typeof t&&t>=0);var e=t/26|0,h=t%26;return this.L$(e+1),this.words[e]=i?this.words[e]|1<<h:this.words[e]&~(1<<h),this.P$()},h.prototype.iadd=function(t){var i,s,e;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this.R$();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i.R$();this.length>t.length?(s=this,e=t):(s=t,e=this);for(var h=0,r=0;r<e.length;r++)i=(0|s.words[r])+(0|e.words[r])+h,this.words[r]=67108863&i,h=i>>>26;for(;0!==h&&r<s.length;r++)i=(0|s.words[r])+h,this.words[r]=67108863&i,h=i>>>26;if(this.length=s.length,0!==h)this.words[this.length]=h,this.length++;else if(s!==this)for(;r<s.length;r++)this.words[r]=s.words[r];return this},h.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i.R$()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this.R$();var s,e,h=this.cmp(t);if(0===h)return this.negative=0,this.length=1,this.words[0]=0,this;h>0?(s=this,e=t):(s=t,e=this);for(var r=0,n=0;n<e.length;n++)r=(i=(0|s.words[n])-(0|e.words[n])+r)>>26,this.words[n]=67108863&i;for(;0!==r&&n<s.length;n++)r=(i=(0|s.words[n])+r)>>26,this.words[n]=67108863&i;if(0===r&&n<s.length&&s!==this)for(;n<s.length;n++)this.words[n]=s.words[n];return this.length=Math.max(this.length,n),s!==this&&(this.negative=1),this.P$()},h.prototype.sub=function(t){return this.clone().isub(t)};var A=function(t,i,s){var e,h,r,n=t.words,o=i.words,a=s.words,l=0,u=0|n[0],c=8191&u,d=u>>>13,f=0|n[1],A=8191&f,g=f>>>13,p=0|n[2],m=8191&p,y=p>>>13,S=0|n[3],v=8191&S,x=S>>>13,b=0|n[4],M=8191&b,_=b>>>13,w=0|n[5],C=8191&w,k=w>>>13,T=0|n[6],F=8191&T,I=T>>>13,P=0|n[7],D=8191&P,B=P>>>13,L=0|n[8],R=8191&L,E=L>>>13,z=0|n[9],V=8191&z,O=z>>>13,N=0|o[0],G=8191&N,W=N>>>13,U=0|o[1],Y=8191&U,H=U>>>13,$=0|o[2],X=8191&$,j=$>>>13,Z=0|o[3],Q=8191&Z,J=Z>>>13,K=0|o[4],q=8191&K,tt=K>>>13,it=0|o[5],st=8191&it,et=it>>>13,ht=0|o[6],rt=8191&ht,nt=ht>>>13,ot=0|o[7],at=8191&ot,lt=ot>>>13,ut=0|o[8],ct=8191&ut,dt=ut>>>13,ft=0|o[9],At=8191&ft,gt=ft>>>13;s.negative=t.negative^i.negative,s.length=19;var pt=(l+(e=Math.imul(c,G))|0)+((8191&(h=(h=Math.imul(c,W))+Math.imul(d,G)|0))<<13)|0;l=((r=Math.imul(d,W))+(h>>>13)|0)+(pt>>>26)|0,pt&=67108863,e=Math.imul(A,G),h=(h=Math.imul(A,W))+Math.imul(g,G)|0,r=Math.imul(g,W);var mt=(l+(e=e+Math.imul(c,Y)|0)|0)+((8191&(h=(h=h+Math.imul(c,H)|0)+Math.imul(d,Y)|0))<<13)|0;l=((r=r+Math.imul(d,H)|0)+(h>>>13)|0)+(mt>>>26)|0,mt&=67108863,e=Math.imul(m,G),h=(h=Math.imul(m,W))+Math.imul(y,G)|0,r=Math.imul(y,W),e=e+Math.imul(A,Y)|0,h=(h=h+Math.imul(A,H)|0)+Math.imul(g,Y)|0,r=r+Math.imul(g,H)|0;var yt=(l+(e=e+Math.imul(c,X)|0)|0)+((8191&(h=(h=h+Math.imul(c,j)|0)+Math.imul(d,X)|0))<<13)|0;l=((r=r+Math.imul(d,j)|0)+(h>>>13)|0)+(yt>>>26)|0,yt&=67108863,e=Math.imul(v,G),h=(h=Math.imul(v,W))+Math.imul(x,G)|0,r=Math.imul(x,W),e=e+Math.imul(m,Y)|0,h=(h=h+Math.imul(m,H)|0)+Math.imul(y,Y)|0,r=r+Math.imul(y,H)|0,e=e+Math.imul(A,X)|0,h=(h=h+Math.imul(A,j)|0)+Math.imul(g,X)|0,r=r+Math.imul(g,j)|0;var St=(l+(e=e+Math.imul(c,Q)|0)|0)+((8191&(h=(h=h+Math.imul(c,J)|0)+Math.imul(d,Q)|0))<<13)|0;l=((r=r+Math.imul(d,J)|0)+(h>>>13)|0)+(St>>>26)|0,St&=67108863,e=Math.imul(M,G),h=(h=Math.imul(M,W))+Math.imul(_,G)|0,r=Math.imul(_,W),e=e+Math.imul(v,Y)|0,h=(h=h+Math.imul(v,H)|0)+Math.imul(x,Y)|0,r=r+Math.imul(x,H)|0,e=e+Math.imul(m,X)|0,h=(h=h+Math.imul(m,j)|0)+Math.imul(y,X)|0,r=r+Math.imul(y,j)|0,e=e+Math.imul(A,Q)|0,h=(h=h+Math.imul(A,J)|0)+Math.imul(g,Q)|0,r=r+Math.imul(g,J)|0;var vt=(l+(e=e+Math.imul(c,q)|0)|0)+((8191&(h=(h=h+Math.imul(c,tt)|0)+Math.imul(d,q)|0))<<13)|0;l=((r=r+Math.imul(d,tt)|0)+(h>>>13)|0)+(vt>>>26)|0,vt&=67108863,e=Math.imul(C,G),h=(h=Math.imul(C,W))+Math.imul(k,G)|0,r=Math.imul(k,W),e=e+Math.imul(M,Y)|0,h=(h=h+Math.imul(M,H)|0)+Math.imul(_,Y)|0,r=r+Math.imul(_,H)|0,e=e+Math.imul(v,X)|0,h=(h=h+Math.imul(v,j)|0)+Math.imul(x,X)|0,r=r+Math.imul(x,j)|0,e=e+Math.imul(m,Q)|0,h=(h=h+Math.imul(m,J)|0)+Math.imul(y,Q)|0,r=r+Math.imul(y,J)|0,e=e+Math.imul(A,q)|0,h=(h=h+Math.imul(A,tt)|0)+Math.imul(g,q)|0,r=r+Math.imul(g,tt)|0;var xt=(l+(e=e+Math.imul(c,st)|0)|0)+((8191&(h=(h=h+Math.imul(c,et)|0)+Math.imul(d,st)|0))<<13)|0;l=((r=r+Math.imul(d,et)|0)+(h>>>13)|0)+(xt>>>26)|0,xt&=67108863,e=Math.imul(F,G),h=(h=Math.imul(F,W))+Math.imul(I,G)|0,r=Math.imul(I,W),e=e+Math.imul(C,Y)|0,h=(h=h+Math.imul(C,H)|0)+Math.imul(k,Y)|0,r=r+Math.imul(k,H)|0,e=e+Math.imul(M,X)|0,h=(h=h+Math.imul(M,j)|0)+Math.imul(_,X)|0,r=r+Math.imul(_,j)|0,e=e+Math.imul(v,Q)|0,h=(h=h+Math.imul(v,J)|0)+Math.imul(x,Q)|0,r=r+Math.imul(x,J)|0,e=e+Math.imul(m,q)|0,h=(h=h+Math.imul(m,tt)|0)+Math.imul(y,q)|0,r=r+Math.imul(y,tt)|0,e=e+Math.imul(A,st)|0,h=(h=h+Math.imul(A,et)|0)+Math.imul(g,st)|0,r=r+Math.imul(g,et)|0;var bt=(l+(e=e+Math.imul(c,rt)|0)|0)+((8191&(h=(h=h+Math.imul(c,nt)|0)+Math.imul(d,rt)|0))<<13)|0;l=((r=r+Math.imul(d,nt)|0)+(h>>>13)|0)+(bt>>>26)|0,bt&=67108863,e=Math.imul(D,G),h=(h=Math.imul(D,W))+Math.imul(B,G)|0,r=Math.imul(B,W),e=e+Math.imul(F,Y)|0,h=(h=h+Math.imul(F,H)|0)+Math.imul(I,Y)|0,r=r+Math.imul(I,H)|0,e=e+Math.imul(C,X)|0,h=(h=h+Math.imul(C,j)|0)+Math.imul(k,X)|0,r=r+Math.imul(k,j)|0,e=e+Math.imul(M,Q)|0,h=(h=h+Math.imul(M,J)|0)+Math.imul(_,Q)|0,r=r+Math.imul(_,J)|0,e=e+Math.imul(v,q)|0,h=(h=h+Math.imul(v,tt)|0)+Math.imul(x,q)|0,r=r+Math.imul(x,tt)|0,e=e+Math.imul(m,st)|0,h=(h=h+Math.imul(m,et)|0)+Math.imul(y,st)|0,r=r+Math.imul(y,et)|0,e=e+Math.imul(A,rt)|0,h=(h=h+Math.imul(A,nt)|0)+Math.imul(g,rt)|0,r=r+Math.imul(g,nt)|0;var Mt=(l+(e=e+Math.imul(c,at)|0)|0)+((8191&(h=(h=h+Math.imul(c,lt)|0)+Math.imul(d,at)|0))<<13)|0;l=((r=r+Math.imul(d,lt)|0)+(h>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,e=Math.imul(R,G),h=(h=Math.imul(R,W))+Math.imul(E,G)|0,r=Math.imul(E,W),e=e+Math.imul(D,Y)|0,h=(h=h+Math.imul(D,H)|0)+Math.imul(B,Y)|0,r=r+Math.imul(B,H)|0,e=e+Math.imul(F,X)|0,h=(h=h+Math.imul(F,j)|0)+Math.imul(I,X)|0,r=r+Math.imul(I,j)|0,e=e+Math.imul(C,Q)|0,h=(h=h+Math.imul(C,J)|0)+Math.imul(k,Q)|0,r=r+Math.imul(k,J)|0,e=e+Math.imul(M,q)|0,h=(h=h+Math.imul(M,tt)|0)+Math.imul(_,q)|0,r=r+Math.imul(_,tt)|0,e=e+Math.imul(v,st)|0,h=(h=h+Math.imul(v,et)|0)+Math.imul(x,st)|0,r=r+Math.imul(x,et)|0,e=e+Math.imul(m,rt)|0,h=(h=h+Math.imul(m,nt)|0)+Math.imul(y,rt)|0,r=r+Math.imul(y,nt)|0,e=e+Math.imul(A,at)|0,h=(h=h+Math.imul(A,lt)|0)+Math.imul(g,at)|0,r=r+Math.imul(g,lt)|0;var _t=(l+(e=e+Math.imul(c,ct)|0)|0)+((8191&(h=(h=h+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((r=r+Math.imul(d,dt)|0)+(h>>>13)|0)+(_t>>>26)|0,_t&=67108863,e=Math.imul(V,G),h=(h=Math.imul(V,W))+Math.imul(O,G)|0,r=Math.imul(O,W),e=e+Math.imul(R,Y)|0,h=(h=h+Math.imul(R,H)|0)+Math.imul(E,Y)|0,r=r+Math.imul(E,H)|0,e=e+Math.imul(D,X)|0,h=(h=h+Math.imul(D,j)|0)+Math.imul(B,X)|0,r=r+Math.imul(B,j)|0,e=e+Math.imul(F,Q)|0,h=(h=h+Math.imul(F,J)|0)+Math.imul(I,Q)|0,r=r+Math.imul(I,J)|0,e=e+Math.imul(C,q)|0,h=(h=h+Math.imul(C,tt)|0)+Math.imul(k,q)|0,r=r+Math.imul(k,tt)|0,e=e+Math.imul(M,st)|0,h=(h=h+Math.imul(M,et)|0)+Math.imul(_,st)|0,r=r+Math.imul(_,et)|0,e=e+Math.imul(v,rt)|0,h=(h=h+Math.imul(v,nt)|0)+Math.imul(x,rt)|0,r=r+Math.imul(x,nt)|0,e=e+Math.imul(m,at)|0,h=(h=h+Math.imul(m,lt)|0)+Math.imul(y,at)|0,r=r+Math.imul(y,lt)|0,e=e+Math.imul(A,ct)|0,h=(h=h+Math.imul(A,dt)|0)+Math.imul(g,ct)|0,r=r+Math.imul(g,dt)|0;var wt=(l+(e=e+Math.imul(c,At)|0)|0)+((8191&(h=(h=h+Math.imul(c,gt)|0)+Math.imul(d,At)|0))<<13)|0;l=((r=r+Math.imul(d,gt)|0)+(h>>>13)|0)+(wt>>>26)|0,wt&=67108863,e=Math.imul(V,Y),h=(h=Math.imul(V,H))+Math.imul(O,Y)|0,r=Math.imul(O,H),e=e+Math.imul(R,X)|0,h=(h=h+Math.imul(R,j)|0)+Math.imul(E,X)|0,r=r+Math.imul(E,j)|0,e=e+Math.imul(D,Q)|0,h=(h=h+Math.imul(D,J)|0)+Math.imul(B,Q)|0,r=r+Math.imul(B,J)|0,e=e+Math.imul(F,q)|0,h=(h=h+Math.imul(F,tt)|0)+Math.imul(I,q)|0,r=r+Math.imul(I,tt)|0,e=e+Math.imul(C,st)|0,h=(h=h+Math.imul(C,et)|0)+Math.imul(k,st)|0,r=r+Math.imul(k,et)|0,e=e+Math.imul(M,rt)|0,h=(h=h+Math.imul(M,nt)|0)+Math.imul(_,rt)|0,r=r+Math.imul(_,nt)|0,e=e+Math.imul(v,at)|0,h=(h=h+Math.imul(v,lt)|0)+Math.imul(x,at)|0,r=r+Math.imul(x,lt)|0,e=e+Math.imul(m,ct)|0,h=(h=h+Math.imul(m,dt)|0)+Math.imul(y,ct)|0,r=r+Math.imul(y,dt)|0;var Ct=(l+(e=e+Math.imul(A,At)|0)|0)+((8191&(h=(h=h+Math.imul(A,gt)|0)+Math.imul(g,At)|0))<<13)|0;l=((r=r+Math.imul(g,gt)|0)+(h>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,e=Math.imul(V,X),h=(h=Math.imul(V,j))+Math.imul(O,X)|0,r=Math.imul(O,j),e=e+Math.imul(R,Q)|0,h=(h=h+Math.imul(R,J)|0)+Math.imul(E,Q)|0,r=r+Math.imul(E,J)|0,e=e+Math.imul(D,q)|0,h=(h=h+Math.imul(D,tt)|0)+Math.imul(B,q)|0,r=r+Math.imul(B,tt)|0,e=e+Math.imul(F,st)|0,h=(h=h+Math.imul(F,et)|0)+Math.imul(I,st)|0,r=r+Math.imul(I,et)|0,e=e+Math.imul(C,rt)|0,h=(h=h+Math.imul(C,nt)|0)+Math.imul(k,rt)|0,r=r+Math.imul(k,nt)|0,e=e+Math.imul(M,at)|0,h=(h=h+Math.imul(M,lt)|0)+Math.imul(_,at)|0,r=r+Math.imul(_,lt)|0,e=e+Math.imul(v,ct)|0,h=(h=h+Math.imul(v,dt)|0)+Math.imul(x,ct)|0,r=r+Math.imul(x,dt)|0;var kt=(l+(e=e+Math.imul(m,At)|0)|0)+((8191&(h=(h=h+Math.imul(m,gt)|0)+Math.imul(y,At)|0))<<13)|0;l=((r=r+Math.imul(y,gt)|0)+(h>>>13)|0)+(kt>>>26)|0,kt&=67108863,e=Math.imul(V,Q),h=(h=Math.imul(V,J))+Math.imul(O,Q)|0,r=Math.imul(O,J),e=e+Math.imul(R,q)|0,h=(h=h+Math.imul(R,tt)|0)+Math.imul(E,q)|0,r=r+Math.imul(E,tt)|0,e=e+Math.imul(D,st)|0,h=(h=h+Math.imul(D,et)|0)+Math.imul(B,st)|0,r=r+Math.imul(B,et)|0,e=e+Math.imul(F,rt)|0,h=(h=h+Math.imul(F,nt)|0)+Math.imul(I,rt)|0,r=r+Math.imul(I,nt)|0,e=e+Math.imul(C,at)|0,h=(h=h+Math.imul(C,lt)|0)+Math.imul(k,at)|0,r=r+Math.imul(k,lt)|0,e=e+Math.imul(M,ct)|0,h=(h=h+Math.imul(M,dt)|0)+Math.imul(_,ct)|0,r=r+Math.imul(_,dt)|0;var Tt=(l+(e=e+Math.imul(v,At)|0)|0)+((8191&(h=(h=h+Math.imul(v,gt)|0)+Math.imul(x,At)|0))<<13)|0;l=((r=r+Math.imul(x,gt)|0)+(h>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,e=Math.imul(V,q),h=(h=Math.imul(V,tt))+Math.imul(O,q)|0,r=Math.imul(O,tt),e=e+Math.imul(R,st)|0,h=(h=h+Math.imul(R,et)|0)+Math.imul(E,st)|0,r=r+Math.imul(E,et)|0,e=e+Math.imul(D,rt)|0,h=(h=h+Math.imul(D,nt)|0)+Math.imul(B,rt)|0,r=r+Math.imul(B,nt)|0,e=e+Math.imul(F,at)|0,h=(h=h+Math.imul(F,lt)|0)+Math.imul(I,at)|0,r=r+Math.imul(I,lt)|0,e=e+Math.imul(C,ct)|0,h=(h=h+Math.imul(C,dt)|0)+Math.imul(k,ct)|0,r=r+Math.imul(k,dt)|0;var Ft=(l+(e=e+Math.imul(M,At)|0)|0)+((8191&(h=(h=h+Math.imul(M,gt)|0)+Math.imul(_,At)|0))<<13)|0;l=((r=r+Math.imul(_,gt)|0)+(h>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,e=Math.imul(V,st),h=(h=Math.imul(V,et))+Math.imul(O,st)|0,r=Math.imul(O,et),e=e+Math.imul(R,rt)|0,h=(h=h+Math.imul(R,nt)|0)+Math.imul(E,rt)|0,r=r+Math.imul(E,nt)|0,e=e+Math.imul(D,at)|0,h=(h=h+Math.imul(D,lt)|0)+Math.imul(B,at)|0,r=r+Math.imul(B,lt)|0,e=e+Math.imul(F,ct)|0,h=(h=h+Math.imul(F,dt)|0)+Math.imul(I,ct)|0,r=r+Math.imul(I,dt)|0;var It=(l+(e=e+Math.imul(C,At)|0)|0)+((8191&(h=(h=h+Math.imul(C,gt)|0)+Math.imul(k,At)|0))<<13)|0;l=((r=r+Math.imul(k,gt)|0)+(h>>>13)|0)+(It>>>26)|0,It&=67108863,e=Math.imul(V,rt),h=(h=Math.imul(V,nt))+Math.imul(O,rt)|0,r=Math.imul(O,nt),e=e+Math.imul(R,at)|0,h=(h=h+Math.imul(R,lt)|0)+Math.imul(E,at)|0,r=r+Math.imul(E,lt)|0,e=e+Math.imul(D,ct)|0,h=(h=h+Math.imul(D,dt)|0)+Math.imul(B,ct)|0,r=r+Math.imul(B,dt)|0;var Pt=(l+(e=e+Math.imul(F,At)|0)|0)+((8191&(h=(h=h+Math.imul(F,gt)|0)+Math.imul(I,At)|0))<<13)|0;l=((r=r+Math.imul(I,gt)|0)+(h>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,e=Math.imul(V,at),h=(h=Math.imul(V,lt))+Math.imul(O,at)|0,r=Math.imul(O,lt),e=e+Math.imul(R,ct)|0,h=(h=h+Math.imul(R,dt)|0)+Math.imul(E,ct)|0,r=r+Math.imul(E,dt)|0;var Dt=(l+(e=e+Math.imul(D,At)|0)|0)+((8191&(h=(h=h+Math.imul(D,gt)|0)+Math.imul(B,At)|0))<<13)|0;l=((r=r+Math.imul(B,gt)|0)+(h>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,e=Math.imul(V,ct),h=(h=Math.imul(V,dt))+Math.imul(O,ct)|0,r=Math.imul(O,dt);var Bt=(l+(e=e+Math.imul(R,At)|0)|0)+((8191&(h=(h=h+Math.imul(R,gt)|0)+Math.imul(E,At)|0))<<13)|0;l=((r=r+Math.imul(E,gt)|0)+(h>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Lt=(l+(e=Math.imul(V,At))|0)+((8191&(h=(h=Math.imul(V,gt))+Math.imul(O,At)|0))<<13)|0;return l=((r=Math.imul(O,gt))+(h>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,a[0]=pt,a[1]=mt,a[2]=yt,a[3]=St,a[4]=vt,a[5]=xt,a[6]=bt,a[7]=Mt,a[8]=_t,a[9]=wt,a[10]=Ct,a[11]=kt,a[12]=Tt,a[13]=Ft,a[14]=It,a[15]=Pt,a[16]=Dt,a[17]=Bt,a[18]=Lt,0!==l&&(a[19]=l,s.length++),s};function g(t,i,s){s.negative=i.negative^t.negative,s.length=t.length+i.length;for(var e=0,h=0,r=0;r<s.length-1;r++){var n=h;h=0;for(var o=67108863&e,a=Math.min(r,i.length-1),l=Math.max(0,r-t.length+1);l<=a;l++){var u=r-l,c=(0|t.words[u])*(0|i.words[l]),d=67108863&c;o=67108863&(d=d+o|0),h+=(n=(n=n+(c/67108864|0)|0)+(d>>>26)|0)>>>26,n&=67108863}s.words[r]=o,e=n,n=h}return 0!==e?s.words[r]=e:s.length--,s.P$()}function p(t,i,s){return g(t,i,s)}Math.imul||(A=f),h.prototype.mulTo=function(t,i){var s=this.length+t.length;return 10===this.length&&10===t.length?A(this,t,i):s<63?f(this,t,i):s<1024?g(this,t,i):p(this,t,i)},h.prototype.mul=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},h.prototype.mulf=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),p(this,t,i)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){var i=t<0;i&&(t=-t),s("number"==typeof t),s(t<67108864);for(var e=0,h=0;h<this.length;h++){var r=(0|this.words[h])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[h]=67108863&n}return 0!==e&&(this.words[h]=e,this.length++),i?this.ineg():this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),s=0;s<i.length;s++){var e=s/26|0,h=s%26;i[s]=t.words[e]>>>h&1}return i}(t);if(0===i.length)return new h(1);for(var s=this,e=0;e<i.length&&0===i[e];e++,s=s.sqr());if(++e<i.length)for(var r=s.sqr();e<i.length;e++,r=r.sqr())0!==i[e]&&(s=s.mul(r));return s},h.prototype.iushln=function(t){s("number"==typeof t&&t>=0);var i,e=t%26,h=(t-e)/26,r=67108863>>>26-e<<26-e;if(0!==e){var n=0;for(i=0;i<this.length;i++){var o=this.words[i]&r,a=(0|this.words[i])-o<<e;this.words[i]=a|n,n=o>>>26-e}n&&(this.words[i]=n,this.length++)}if(0!==h){for(i=this.length-1;i>=0;i--)this.words[i+h]=this.words[i];for(i=0;i<h;i++)this.words[i]=0;this.length+=h}return this.P$()},h.prototype.ishln=function(t){return s(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,i,e){var h;s("number"==typeof t&&t>=0),h=i?(i-i%26)/26:0;var r=t%26,n=Math.min((t-r)/26,this.length),o=67108863^67108863>>>r<<r,a=e;if(h-=n,h=Math.max(0,h),a){for(var l=0;l<n;l++)a.words[l]=this.words[l];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,l=0;l<this.length;l++)this.words[l]=this.words[l+n];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=h);l--){var c=0|this.words[l];this.words[l]=u<<26-r|c>>>r,u=c&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.P$()},h.prototype.ishrn=function(t,i,e){return s(0===this.negative),this.iushrn(t,i,e)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26,h=1<<i;return!(this.length<=e||!(this.words[e]&h))},h.prototype.imaskn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=e)return this;if(0!==i&&e++,this.length=Math.min(e,this.length),0!==i){var h=67108863^67108863>>>i<<i;this.words[this.length-1]&=h}return this.P$()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return s("number"==typeof t),s(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.D$(t)},h.prototype.D$=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(s("number"==typeof t),s(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.P$()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype.N$=function(t,i,e){var h,r,n=t.length+e;this.L$(n);var o=0;for(h=0;h<t.length;h++){r=(0|this.words[h+e])+o;var a=(0|t.words[h])*i;o=((r-=67108863&a)>>26)-(a/67108864|0),this.words[h+e]=67108863&r}for(;h<this.length-e;h++)o=(r=(0|this.words[h+e])+o)>>26,this.words[h+e]=67108863&r;if(0===o)return this.P$();for(s(-1===o),o=0,h=0;h<this.length;h++)o=(r=-(0|this.words[h])+o)>>26,this.words[h]=67108863&r;return this.negative=1,this.P$()},h.prototype.G$=function(t,i){var s=(this.length,t.length),e=this.clone(),r=t,n=0|r.words[r.length-1];0!=(s=26-this.V$(n))&&(r=r.ushln(s),e.iushln(s),n=0|r.words[r.length-1]);var o,a=e.length-r.length;if("mod"!==i){(o=new h(null)).length=a+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var u=e.clone().N$(r,1,a);0===u.negative&&(e=u,o&&(o.words[a]=1));for(var c=a-1;c>=0;c--){var d=67108864*(0|e.words[r.length+c])+(0|e.words[r.length+c-1]);for(d=Math.min(d/n|0,67108863),e.N$(r,d,c);0!==e.negative;)d--,e.negative=0,e.N$(r,1,c),e.isZero()||(e.negative^=1);o&&(o.words[c]=d)}return o&&o.P$(),e.P$(),"div"!==i&&0!==s&&e.iushrn(s),{div:o||null,mod:e}},h.prototype.divmod=function(t,i,e){return s(!t.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,i),"mod"!==i&&(r=o.div.neg()),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),i),"mod"!==i&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),i),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new h(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modrn(t.words[0]))}:this.G$(t,i);var r,n,o},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var s=0!==i.div.negative?i.mod.isub(t):i.mod,e=t.ushrn(1),h=t.andln(1),r=s.cmp(e);return r<0||1===h&&0===r?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},h.prototype.modrn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=(1<<26)%t,h=0,r=this.length-1;r>=0;r--)h=(e*h+(0|this.words[r]))%t;return i?-h:h},h.prototype.modn=function(t){return this.modrn(t)},h.prototype.idivn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=0,h=this.length-1;h>=0;h--){var r=(0|this.words[h])+67108864*e;this.words[h]=r/t|0,e=r%t}return this.P$(),i?this.ineg():this},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r=new h(1),n=new h(0),o=new h(0),a=new h(1),l=0;i.isEven()&&e.isEven();)i.iushrn(1),e.iushrn(1),++l;for(var u=e.clone(),c=i.clone();!i.isZero();){for(var d=0,f=1;0==(i.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(c)),r.iushrn(1),n.iushrn(1);for(var A=0,g=1;0==(e.words[0]&g)&&A<26;++A,g<<=1);if(A>0)for(e.iushrn(A);A-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);i.cmp(e)>=0?(i.isub(e),r.isub(o),n.isub(a)):(e.isub(i),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:e.iushln(l)}},h.prototype.W$=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r,n=new h(1),o=new h(0),a=e.clone();i.cmpn(1)>0&&e.cmpn(1)>0;){for(var l=0,u=1;0==(i.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(i.iushrn(l);l-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var c=0,d=1;0==(e.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);i.cmp(e)>=0?(i.isub(e),n.isub(o)):(e.isub(i),o.isub(n))}return(r=0===i.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),s=t.clone();i.negative=0,s.negative=0;for(var e=0;i.isEven()&&s.isEven();e++)i.iushrn(1),s.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;s.isEven();)s.iushrn(1);var h=i.cmp(s);if(h<0){var r=i;i=s,s=r}else if(0===h||0===s.cmpn(1))break;i.isub(s)}return s.iushln(e)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return 0==(1&this.words[0])},h.prototype.isOdd=function(){return 1==(1&this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){s("number"==typeof t);var i=t%26,e=(t-i)/26,h=1<<i;if(this.length<=e)return this.L$(e+1),this.words[e]|=h,this;for(var r=h,n=e;0!==r&&n<this.length;n++){var o=0|this.words[n];r=(o+=r)>>>26,o&=67108863,this.words[n]=o}return 0!==r&&(this.words[n]=r,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var i,e=t<0;if(0!==this.negative&&!e)return-1;if(0===this.negative&&e)return 1;if(this.P$(),this.length>1)i=1;else{e&&(t=-t),s(t<=67108863,"Number is too big");var h=0|this.words[0];i=h===t?0:h<t?-1:1}return 0!==this.negative?0|-i:i},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,s=this.length-1;s>=0;s--){var e=0|this.words[s],h=0|t.words[s];if(e!==h){e<h?i=-1:e>h&&(i=1);break}}return i},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new M(t)},h.prototype.toRed=function(t){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),t.convertTo(this).U$(t)},h.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype.U$=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return s(!this.red,"Already a number in reduction context"),this.U$(t)},h.prototype.redAdd=function(t){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.Y$(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.Y$(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red.H$(this),this.red.sqr(this)},h.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red.H$(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red.H$(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red.H$(this),this.red.invm(this)},h.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red.H$(this),this.red.neg(this)},h.prototype.redPow=function(t){return s(this.red&&!t.red,"redPow(normalNum)"),this.red.H$(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function y(t,i){this.name=t,this.p=new h(i,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this.$$()}function S(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var i=h.X$(t);this.m=i.p,this.prime=i}else s(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.W$(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype.$$=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var i,s=t;do{this.split(s,this.tmp),i=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(i>this.n);var e=i<this.n?-1:s.ucmp(this.p);return 0===e?(s.words[0]=0,s.length=1):e>0?s.isub(this.p):void 0!==s.strip?s.strip():s.P$(),s},y.prototype.split=function(t,i){t.iushrn(this.n,0,i)},y.prototype.imulK=function(t){return t.imul(this.k)},e(S,y),S.prototype.split=function(t,i){for(var s=4194303,e=Math.min(t.length,9),h=0;h<e;h++)i.words[h]=t.words[h];if(i.length=e,t.length<=9)return t.words[0]=0,void(t.length=1);var r=t.words[9];for(i.words[i.length++]=r&s,h=10;h<t.length;h++){var n=0|t.words[h];t.words[h-10]=(n&s)<<4|r>>>22,r=n}r>>>=22,t.words[h-10]=r,0===r&&t.length>10?t.length-=10:t.length-=9},S.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,s=0;s<t.length;s++){var e=0|t.words[s];i+=977*e,t.words[s]=67108863&i,i=64*e+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},e(v,y),e(x,y),e(b,y),b.prototype.imulK=function(t){for(var i=0,s=0;s<t.length;s++){var e=19*(0|t.words[s])+i,h=67108863&e;e>>>=26,t.words[s]=h,i=e}return 0!==i&&(t.words[t.length++]=i),t},h.X$=function(t){if(m[t])return m[t];var i;if("k256"===t)i=new S;else if("p224"===t)i=new v;else if("p192"===t)i=new x;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new b}return m[t]=i,i},M.prototype.H$=function(t){s(0===t.negative,"red works only with positives"),s(t.red,"red works only with red numbers")},M.prototype.Y$=function(t,i){s(0==(t.negative|i.negative),"red works only with positives"),s(t.red&&t.red===i.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).U$(this):(a(t,t.umod(this.m).U$(this)),t)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).U$(this)},M.prototype.add=function(t,i){this.Y$(t,i);var s=t.add(i);return s.cmp(this.m)>=0&&s.isub(this.m),s.U$(this)},M.prototype.iadd=function(t,i){this.Y$(t,i);var s=t.iadd(i);return s.cmp(this.m)>=0&&s.isub(this.m),s},M.prototype.sub=function(t,i){this.Y$(t,i);var s=t.sub(i);return s.cmpn(0)<0&&s.iadd(this.m),s.U$(this)},M.prototype.isub=function(t,i){this.Y$(t,i);var s=t.isub(i);return s.cmpn(0)<0&&s.iadd(this.m),s},M.prototype.shl=function(t,i){return this.H$(t),this.imod(t.ushln(i))},M.prototype.imul=function(t,i){return this.Y$(t,i),this.imod(t.imul(i))},M.prototype.mul=function(t,i){return this.Y$(t,i),this.imod(t.mul(i))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(s(i%2==1),3===i){var e=this.m.add(new h(1)).iushrn(2);return this.pow(t,e)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new h(1).toRed(this),a=o.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new h(2*u*u).toRed(this);0!==this.pow(u,l).cmp(a);)u.redIAdd(a);for(var c=this.pow(u,r),d=this.pow(t,r.addn(1).iushrn(1)),f=this.pow(t,r),A=n;0!==f.cmp(o);){for(var g=f,p=0;0!==g.cmp(o);p++)g=g.redSqr();s(p<A);var m=this.pow(c,new h(1).iushln(A-p-1));d=d.redMul(m),c=m.redSqr(),f=f.redMul(c),A=p}return d},M.prototype.invm=function(t){var i=t.W$(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},M.prototype.pow=function(t,i){if(i.isZero())return new h(1).toRed(this);if(0===i.cmpn(1))return t.clone();var s=new Array(16);s[0]=new h(1).toRed(this),s[1]=t;for(var e=2;e<s.length;e++)s[e]=this.mul(s[e-1],t);var r=s[0],n=0,o=0,a=i.bitLength()%26;for(0===a&&(a=26),e=i.length-1;e>=0;e--){for(var l=i.words[e],u=a-1;u>=0;u--){var c=l>>u&1;r!==s[0]&&(r=this.sqr(r)),0!==c||0!==n?(n<<=1,n|=c,(4==++o||0===e&&0===u)&&(r=this.mul(r,s[n]),o=0,n=0)):o=0}a=26}return r},M.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},M.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},h.mont=function(t){return new _(t)},e(_,M),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},_.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=s.isub(e).iushrn(this.shift),r=h;return h.cmp(this.m)>=0?r=h.isub(this.m):h.cmpn(0)<0&&(r=h.iadd(this.m)),r.U$(this)},_.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new h(0).U$(this);var s=t.mul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=s.isub(e).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n.U$(this)},_.prototype.invm=function(t){return this.imod(t.W$(this.m).mul(this.r2)).U$(this)}}(0,km);var Fm=Tm.exports;function Im(t,i){if(Array.isArray(t))return t.slice();if(!t)return[];const s=[];if("string"!=typeof t){for(let i=0;i<t.length;i++)s[i]=0|t[i];return s}if("hex"===i){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t=`0${t}`);for(let i=0;i<t.length;i+=2)s.push(parseInt(t[i]+t[i+1],16))}else for(let i=0;i<t.length;i++){const e=t.charCodeAt(i),h=e>>8,r=255&e;h?s.push(h,r):s.push(r)}return s}const Pm=function(t,i,s){const e=new Array(Math.max(t.bitLength(),s)+1);e.fill(0);const h=1<<i+1,r=t.clone();for(let t=0;t<e.length;t++){let i;const s=r.andln(h-1);r.isOdd()?(i=s>(h>>1)-1?(h>>1)-s:s,r.isubn(i)):i=0,e[t]=i,r.iushrn(1)}return e},Dm=function(t,i){const s=[[],[]];t=t.clone(),i=i.clone();let e=0,h=0;for(;t.cmpn(-e)>0||i.cmpn(-h)>0;){let r,n,o=t.andln(3)+e&3,a=i.andln(3)+h&3;if(3===o&&(o=-1),3===a&&(a=-1),0==(1&o))r=0;else{const i=t.andln(7)+e&7;r=3!==i&&5!==i||2!==a?o:-o}if(s[0].push(r),0==(1&a))n=0;else{const t=i.andln(7)+h&7;n=3!==t&&5!==t||2!==o?a:-a}s[1].push(n),2*e===r+1&&(e=1-e),2*h===n+1&&(h=1-h),t.iushrn(1),i.iushrn(1)}return s};class Bm{constructor(t,i){this.type=t,this.p=new Fm(i.p,16),this.red=i.prime?Fm.red(i.prime):Fm.mont(this.p),this.zero=new Fm(0).toRed(this.red),this.one=new Fm(1).toRed(this.red),this.two=new Fm(2).toRed(this.red),this.n=i.n&&new Fm(i.n,16),this.g=i.g&&this.pointFromJSON(i.g,i.gRed),this.j$=new Array(4),this.Z$=new Array(4),this.Q$=new Array(4),this.J$=new Array(4),this.K$=this.n?this.n.bitLength():0;const s=this.n&&this.p.div(this.n);!s||s.cmpn(100)>0?this.redN=null:(this.q$=!0,this.redN=this.n.toRed(this.red))}tX(t,i){const s=t.iX(),e=Pm(i,1,this.K$);let h=(1<<s.step+1)-(s.step%2==0?2:1);h/=3;const r=[];for(let t=0;t<e.length;t+=s.step){let i=0;for(let h=t+s.step-1;h>=t;h--)i=(i<<1)+e[h];r.push(i)}let n=this.jpoint(null,null,null),o=this.jpoint(null,null,null);for(let t=h;t>0;t--){for(let i=0;i<r.length;i++){const e=r[i];e===t?o=o.mixedAdd(s.points[i]):e===-t&&(o=o.mixedAdd(s.points[i].neg()))}n=n.add(o)}return n.toP()}sX(t,i){let s=4;const e=t.eX(s);s=e.wnd;const h=e.points,r=Pm(i,s,this.K$);let n=this.jpoint(null,null,null);for(let s=r.length-1;s>=0;s--){for(let t=0;s>=0&&0===r[s];s--)t++;if(s>=0&&i++,n=n.dblp(i),s<0)break;const e=r[s];n="affine"===t.type?e>0?n.mixedAdd(h[e-1>>1]):n.mixedAdd(h[-e-1>>1].neg()):e>0?n.add(h[e-1>>1]):n.add(h[-e-1>>1].neg())}return"affine"===t.type?n.toP():n}hX(t,i,s,e,h){const r=this.j$,n=this.Z$,o=this.Q$;let a=0;for(let s=0;s<e;s++){const e=i[s].eX(t);r[s]=e.wnd,n[s]=e.points}for(let t=e-1;t>=1;t-=2){const e=t-1,h=t;if(1!==r[e]||1!==r[h]){o[e]=Pm(s[e],r[e],this.K$),o[h]=Pm(s[h],r[h],this.K$),a=Math.max(o[e].length,a),a=Math.max(o[h].length,a);continue}const l=[i[e],null,null,i[h]];0===i[e].y.cmp(i[h].y)?(l[1]=i[e].add(i[h]),l[2]=i[e].toJ().mixedAdd(i[h].neg())):0===i[e].y.cmp(i[h].y.redNeg())?(l[1]=i[e].toJ().mixedAdd(i[h]),l[2]=i[e].add(i[h].neg())):(l[1]=i[e].toJ().mixedAdd(i[h]),l[2]=i[e].toJ().mixedAdd(i[h].neg()));const u=[-3,-1,-5,-7,0,7,5,1,3],c=Dm(s[e],s[h]);a=Math.max(c[0].length,a),o[e]=new Array(a),o[h]=new Array(a);for(let t=0;t<a;t++){const i=0|c[0][t],s=0|c[1][t];o[e][t]=u[3*(i+1)+(s+1)],o[h][t]=0,n[e]=l}}let l=this.jpoint(null,null,null);const u=this.J$;for(let t=a;t>=0;t--){let i=0;for(;t>=0;){let s=!0;for(let i=0;i<e;i++)u[i]=0|o[i][t],0!==u[i]&&(s=!1);if(!s)break;i++,t--}if(t>=0&&i++,l=l.dblp(i),t<0)break;for(let t=0;t<e;t++){const i=u[t];let s;0!==i&&(i>0?s=n[t][i-1>>1]:i<0&&(s=n[t][-i-1>>1].neg()),l="affine"===s.type?l.mixedAdd(s):l.add(s))}}for(let t=0;t<e;t++)n[t]=null;return h?l:l.toP()}decodePoint(t,i){t=Im(t,i);const s=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*s)return this.point(t.slice(1,1+s),t.slice(1+s,1+2*s));if((2===t[0]||3===t[0])&&t.length-1===s)return this.pointFromX(t.slice(1,1+s),3===t[0]);throw new Error("Unknown point format")}}class Lm{constructor(t,i){this.curve=t,this.type=i,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}rX(t){const i=this.curve.p.byteLength(),s=this.getX().toArray("be",i);return t?[this.getY().isEven()?2:3].concat(s):[4].concat(s,this.getY().toArray("be",i))}encode(t,i){return function(t,i){return"hex"===i?function(t){let i="";for(let e=0;e<t.length;e++)i+=1===(s=t[e].toString(16)).length?`0${s}`:s;var s;return i}(t):t}(this.rX(i),t)}precompute(t){if(this.precomputed)return this;const i={doubles:null,naf:null,beta:null};return i.naf=this.eX(8),i.doubles=this.iX(4,t),i.beta=this.nX(),this.precomputed=i,this}oX(t){if(!this.precomputed)return!1;const i=this.precomputed.doubles;return!!i&&i.points.length>=Math.ceil((t.bitLength()+1)/i.step)}iX(t,i){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const s=[this];let e=this;for(let h=0;h<i;h+=t){for(let i=0;i<t;i++)e=e.dbl();s.push(e)}return{step:t,points:s}}eX(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const i=[this],s=(1<<t)-1,e=1===s?null:this.dbl();for(let t=1;t<s;t++)i[t]=i[t-1].add(e);return{wnd:t,points:i}}nX(){return null}dblp(t){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}}class Rm extends Bm{constructor(t){super("short",t),this.a=new Fm(t.a,16).toRed(this.red),this.b=new Fm(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this.aX(t),this.lX=new Array(4),this.uX=new Array(4)}pointFromJSON(t,i){return Em.fromJSON(this,t,i)}aX(t){if(!this.zeroA||!this.g||!this.n||1!==this.p.modn(3))return;let i,s,e;if(t.beta)i=new Fm(t.beta,16).toRed(this.red);else{const t=this.cX(this.p);i=t[0].cmp(t[1])<0?t[0]:t[1],i=i.toRed(this.red)}if(t.lambda)s=new Fm(t.lambda,16);else{const t=this.cX(this.n);s=0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(i))?t[0]:t[1]}return e=t.basis?t.basis.map((t=>({a:new Fm(t.a,16),b:new Fm(t.b,16)}))):this.dX(s),{beta:i,lambda:s,basis:e}}cX(t){const i=t===this.p?this.red:Fm.mont(t),s=new Fm(2).toRed(i).redInvm(),e=s.redNeg(),h=new Fm(3).toRed(i).redNeg().redSqrt().redMul(s);return[e.redAdd(h).fromRed(),e.redSub(h).fromRed()]}dX(t){const i=this.n.ushrn(Math.floor(this.n.bitLength()/2));let s,e,h,r,n,o,a,l,u,c=t,d=this.n.clone(),f=new Fm(1),A=new Fm(0),g=new Fm(0),p=new Fm(1),m=0;for(;0!==c.cmpn(0);){const t=d.div(c);l=d.sub(t.mul(c)),u=g.sub(t.mul(f));const n=p.sub(t.mul(A));if(!h&&l.cmp(i)<0)s=a.neg(),e=f,h=l.neg(),r=u;else if(h&&2==++m)break;a=l,d=c,c=l,g=f,f=u,p=A,A=n}n=l.neg(),o=u;const y=h.sqr().add(r.sqr());return n.sqr().add(o.sqr()).cmp(y)>=0&&(n=s,o=e),h.negative&&(h=h.neg(),r=r.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:h,b:r},{a:n,b:o}]}fX(t){const i=this.endo.basis,s=i[0],e=i[1],h=e.b.mul(t).divRound(this.n),r=s.b.neg().mul(t).divRound(this.n),n=h.mul(s.a),o=r.mul(e.a),a=h.mul(s.b),l=r.mul(e.b);return{k1:t.sub(n).sub(o),k2:a.add(l).neg()}}point(t,i,s){return new Em(this,t,i,s)}pointFromX(t,i){(t=new Fm(t,16)).red||(t=t.toRed(this.red));const s=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let e=s.redSqrt();if(0!==e.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");const h=e.fromRed().isOdd();return(i&&!h||!i&&h)&&(e=e.redNeg()),this.point(t,e)}validate(t){if(t.inf)return!0;const i=t.x,s=t.y,e=this.a.redMul(i),h=i.redSqr().redMul(i).redIAdd(e).redIAdd(this.b);return 0===s.redSqr().redISub(h).cmpn(0)}AX(t,i,s){const e=this.lX,h=this.uX;let r=0;for(r=0;r<t.length;r++){const s=this.fX(i[r]);let n=t[r],o=n.nX();s.k1.negative&&(s.k1.ineg(),n=n.neg(!0)),s.k2.negative&&(s.k2.ineg(),o=o.neg(!0)),e[2*r]=n,e[2*r+1]=o,h[2*r]=s.k1,h[2*r+1]=s.k2}const n=this.hX(1,e,h,2*r,s);for(let t=0;t<2*r;t++)e[t]=null,h[t]=null;return n}jpoint(t,i,s){return new zm(this,t,i,s)}}class Em extends Lm{constructor(t,i,s,e){super(t,"affine"),null===i&&null===s?(this.x=null,this.y=null,this.inf=!0):(this.x=new Fm(i,16),this.y=new Fm(s,16),e&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){return new Em(this,t,i,s)}nX(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const i=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const s=this.curve,e=function(t){return s.point(t.x.redMul(s.endo.beta),t.y)};t.beta=i,i.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(e)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(e)}}}return i}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,i,s){"string"==typeof i&&(i=JSON.parse(i));const e=t.point(i[0],i[1],s);if(!i[2])return e;function h(i){return t.point(i[0],i[1],s)}const r=i[2];return e.precomputed={beta:null,doubles:r.doubles&&{step:r.doubles.step,points:[e].concat(r.doubles.points.map(h))},naf:r.naf&&{wnd:r.naf.wnd,points:[e].concat(r.naf.points.map(h))}},e}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);let i=this.y.redSub(t.y);0!==i.cmpn(0)&&(i=i.redMul(this.x.redSub(t.x).redInvm()));const s=i.redSqr().redISub(this.x).redISub(t.x),e=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,e)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);const i=this.curve.a,s=this.x.redSqr(),e=t.redInvm(),h=s.redAdd(s).redIAdd(s).redIAdd(i).redMul(e),r=h.redSqr().redISub(this.x.redAdd(this.x)),n=h.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new Fm(t,16),this.isInfinity()?this:this.oX(t)?this.curve.tX(this,t):this.curve.endo?this.curve.AX([this],[t]):this.curve.sX(this,t)}mulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve.AX(e,h):this.curve.hX(1,e,h,2)}jmulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve.AX(e,h,!0):this.curve.hX(1,e,h,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))}neg(t){if(this.inf)return this;const i=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const t=this.precomputed,s=function(t){return t.neg()};i.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return i}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class zm extends Lm{constructor(t,i,s,e){super(t,"jacobian"),null===i&&null===s&&null===e?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Fm(0)):(this.x=new Fm(i,16),this.y=new Fm(s,16),this.z=new Fm(e,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){throw new Error("Method not implemented.")}jpoint(t,i,s){return new zm(this,t,i,s)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),i=t.redSqr(),s=this.x.redMul(i),e=this.y.redMul(i).redMul(t);return this.curve.point(s,e)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const i=t.z.redSqr(),s=this.z.redSqr(),e=this.x.redMul(i),h=t.x.redMul(s),r=this.y.redMul(i.redMul(t.z)),n=t.y.redMul(s.redMul(this.z)),o=e.redSub(h),a=r.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const l=o.redSqr(),u=l.redMul(o),c=e.redMul(l),d=a.redSqr().redIAdd(u).redISub(c).redISub(c),f=a.redMul(c.redISub(d)).redISub(r.redMul(u)),A=this.z.redMul(t.z).redMul(o);return this.curve.jpoint(d,f,A)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const i=this.z.redSqr(),s=this.x,e=t.x.redMul(i),h=this.y,r=t.y.redMul(i).redMul(this.z),n=s.redSub(e),o=h.redSub(r);if(0===n.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const a=n.redSqr(),l=a.redMul(n),u=s.redMul(a),c=o.redSqr().redIAdd(l).redISub(u).redISub(u),d=o.redMul(u.redISub(c)).redISub(h.redMul(l)),f=this.z.redMul(n);return this.curve.jpoint(c,d,f)}dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}const i=this.curve.a,s=this.curve.tinv;let e=this.x;const h=this.y;let r=this.z,n=r.redSqr().redSqr(),o=h.redAdd(h);for(let s=0;s<t;s++){const h=e.redSqr(),a=o.redSqr(),l=a.redSqr(),u=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(n)),c=e.redMul(a),d=u.redSqr().redISub(c.redAdd(c)),f=c.redISub(d);let A=u.redMul(f);A=A.redIAdd(A).redISub(l);const g=o.redMul(r);s+1<t&&(n=n.redMul(l)),e=d,r=g,o=A}return this.curve.jpoint(e,o.redMul(s),r)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.gX():this.curve.threeA?this.pX():this.mX()}gX(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr().redISub(n).redISub(n);let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),t=a,i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr();let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),t=a.redISub(n).redISub(n),i=o.redMul(n.redISub(t)).redISub(l),s=this.y.redMul(this.z),s=s.redIAdd(s)}return this.curve.jpoint(t,i,s)}pX(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a),a=o.redSqr().redISub(n).redISub(n);t=a;let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.z.redSqr(),h=this.y.redSqr(),r=this.x.redMul(h);let n=this.x.redSub(e).redMul(this.x.redAdd(e));n=n.redAdd(n).redIAdd(n);let o=r.redIAdd(r);o=o.redIAdd(o);const a=o.redAdd(o);t=n.redSqr().redISub(a),s=this.y.redAdd(this.z).redSqr().redISub(h).redISub(e);let l=h.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l),i=n.redMul(o.redISub(t)).redISub(l)}return this.curve.jpoint(t,i,s)}mX(){const t=this.curve.a,i=this.x,s=this.y,e=this.z,h=e.redSqr().redSqr(),r=i.redSqr(),n=s.redSqr(),o=r.redAdd(r).redIAdd(r).redIAdd(t.redMul(h));let a=i.redAdd(i);a=a.redIAdd(a);const l=a.redMul(n),u=o.redSqr().redISub(l.redAdd(l)),c=l.redISub(u);let d=n.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=o.redMul(c).redISub(d),A=s.redAdd(s).redMul(e);return this.curve.jpoint(u,f,A)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),i=this.y.redSqr(),s=this.z.redSqr(),e=i.redSqr(),h=t.redAdd(t).redIAdd(t),r=h.redSqr();let n=this.x.redAdd(i).redSqr().redISub(t).redISub(e);n=n.redIAdd(n),n=n.redAdd(n).redIAdd(n),n=n.redISub(r);const o=n.redSqr();let a=e.redIAdd(e);a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);const l=h.redIAdd(n).redSqr().redISub(r).redISub(o).redISub(a);let u=i.redMul(l);u=u.redIAdd(u),u=u.redIAdd(u);let c=this.x.redMul(o).redISub(u);c=c.redIAdd(c),c=c.redIAdd(c);let d=this.y.redMul(l.redMul(a.redISub(l)).redISub(n.redMul(o)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=this.z.redAdd(n).redSqr().redISub(s).redISub(o);return this.curve.jpoint(c,d,f)}mul(t,i){return t=new Fm(t,i),this.curve.sX(this,t)}eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;const i=this.z.redSqr(),s=t.z.redSqr();if(0!==this.x.redMul(s).redISub(t.x.redMul(i)).cmpn(0))return!1;const e=i.redMul(this.z),h=s.redMul(t.z);return 0===this.y.redMul(h).redISub(t.y.redMul(e)).cmpn(0)}eqXToP(t){const i=this.z.redSqr(),s=t.toRed(this.curve.red).redMul(i);if(0===this.x.cmp(s))return!0;const e=t.clone(),h=this.curve.redN.redMul(i);for(;;){if(e.iadd(this.curve.n),e.cmp(this.curve.p)>=0)return!1;if(s.redIAdd(h),0===this.x.cmp(s))return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return 0===this.z.cmpn(0)}}class Vm{constructor(t){this.curve=new Rm(t),this.g=this.curve.g,this.n=this.curve.n}}const Om={};var Nm;Om.PresetCurve=Vm,Nm={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(Om,"secp256k1",{configurable:!0,enumerable:!0,get(){const t=new Vm(Nm);return Object.defineProperty(Om,"secp256k1",{configurable:!0,enumerable:!0,value:t}),t}});class Gm{constructor(t,i){this.ec=t,this.priv=null,this.pub=null,i.pub&&this.yX(i.pub,i.pubEnc)}static fromPublic(t,i,s){return i instanceof Gm?i:new Gm(t,{pub:i,pubEnc:s})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,i){return"string"==typeof t&&(i=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,t):this.pub}yX(t,i){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,i)}verify(t,i){return this.ec.verify(t,i,this)}}function Wm(t,i){const s=t[i.place++];if(!(128&s))return s;const e=15&s;if(0===e||e>4)return!1;let h=0,r=i.place;for(let i=0;i<e;i++,r++)h<<=8,h|=t[r],h>>>=0;return!(h<=127)&&(i.place=r,h)}class Um{constructor(){this.place=0}}class Ym{constructor(t,i){if(t instanceof Ym)return t;this.SX(t,i)||(this.r=new Fm(t.r,16),this.s=new Fm(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}SX(t,i){t=Im(t,i);const s=new Um;if(48!==t[s.place++])return!1;const e=Wm(t,s);if(!1===e)return!1;if(e+s.place!==t.length)return!1;if(2!==t[s.place++])return!1;const h=Wm(t,s);if(!1===h)return!1;let r=t.slice(s.place,h+s.place);if(s.place+=h,2!==t[s.place++])return!1;const n=Wm(t,s);if(!1===n)return!1;if(t.length!==n+s.place)return!1;let o=t.slice(s.place,n+s.place);if(0===r[0]){if(!(128&r[1]))return!1;r=r.slice(1)}if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}return this.r=new Fm(r),this.s=new Fm(o),this.recoveryParam=null,!0}}class Hm{constructor(t){if(!(this instanceof Hm))return new Hm(t);"string"==typeof t&&(t=Om[t]),t instanceof Om.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,i){return Gm.fromPublic(this,t,i)}vX(t,i){const s=8*t.byteLength()-this.n.bitLength();return s>0&&(t=t.ushrn(s)),!i&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,i,s,e){t=this.vX(new Fm(t,16)),s=this.keyFromPublic(s,e);const h=(i=new Ym(i,"hex")).r,r=i.s;if(h.cmpn(1)<0||h.cmp(this.n)>=0)return!1;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;const n=r.invm(this.n),o=n.mul(t).umod(this.n),a=n.mul(h).umod(this.n);if(!this.curve.q$){const t=this.g.mulAdd(o,s.getPublic(),a);return!t.isInfinity()&&0===t.getX().umod(this.n).cmp(h)}const l=this.g.jmulAdd(o,s.getPublic(),a);return!l.isInfinity()&&l.eqXToP(h)}}var $m,Xm={exports:{}};Xm.exports=($m=$m||function(t,i){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),"undefined"!=typeof self&&self.crypto&&(s=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(s=globalThis.crypto),!s&&"undefined"!=typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&void 0!==km&&km.crypto&&(s=km.crypto),!s)try{s=i}catch(t){}var e=function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||function(){function t(){}return function(i){var s;return t.prototype=i,s=new t,t.prototype=null,s}}(),r={},n=r.lib={},o=n.Base={extend:function(t){var i=h(this);return t&&i.mixIn(t),i.hasOwnProperty("init")&&this.init!==i.init||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(t,s){t=this.words=t||[],this.sigBytes=s!=i?s:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var i=this.words,s=t.words,e=this.sigBytes,h=t.sigBytes;if(this.clamp(),e%4)for(var r=0;r<h;r++){var n=s[r>>>2]>>>24-r%4*8&255;i[e+r>>>2]|=n<<24-(e+r)%4*8}else for(var o=0;o<h;o+=4)i[e+o>>>2]=s[o>>>2];return this.sigBytes+=h,this},clamp:function(){var i=this.words,s=this.sigBytes;i[s>>>2]&=4294967295<<32-s%4*8,i.length=t.ceil(s/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var i=[],s=0;s<t;s+=4)i.push(e());return new a.init(i,t)}}),l=r.enc={},u=l.Hex={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push((r>>>4).toString(16)),e.push((15&r).toString(16))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e+=2)s[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new a.init(s,i/2)}},c=l.Latin1={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push(String.fromCharCode(r))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e++)s[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new a.init(s,i)}},d=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=n.BufferedBlockAlgorithm=o.extend({reset:function(){this.Kw=new a.init,this.xX=0},bX:function(t){"string"==typeof t&&(t=d.parse(t)),this.Kw.concat(t),this.xX+=t.sigBytes},MX:function(i){var s,e=this.Kw,h=e.words,r=e.sigBytes,n=this.blockSize,o=r/(4*n),l=(o=i?t.ceil(o):t.max((0|o)-this._X,0))*n,u=t.min(4*l,r);if(l){for(var c=0;c<l;c+=n)this.wX(h,c);s=h.splice(0,l),e.sigBytes-=u}return new a.init(s,u)},clone:function(){var t=o.clone.call(this);return t.Kw=this.Kw.clone(),t},_X:0});n.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this.CX()},update:function(t){return this.bX(t),this.MX(),this},finalize:function(t){return t&&this.bX(t),this.kX()},blockSize:16,TX:function(t){return function(i,s){return new t.init(s).finalize(i)}},FX:function(t){return function(i,s){return new A.HMAC.init(t,s).finalize(i)}}});var A=r.algo={};return r}(Math),$m);var jm={exports:{}}.exports=function(t){return function(i){var s=t,e=s.lib,h=e.WordArray,r=e.Hasher,n=s.algo,o=[],a=[];!function(){function t(t){for(var s=i.sqrt(t),e=2;e<=s;e++)if(!(t%e))return!1;return!0}function s(t){return 4294967296*(t-(0|t))|0}for(var e=2,h=0;h<64;)t(e)&&(h<8&&(o[h]=s(i.pow(e,.5))),a[h]=s(i.pow(e,1/3)),h++),e++}();var l=[],u=n.SHA256=r.extend({CX:function(){this.IX=new h.init(o.slice(0))},wX:function(t,i){for(var s=this.IX.words,e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],u=s[5],c=s[6],d=s[7],f=0;f<64;f++){if(f<16)l[f]=0|t[i+f];else{var A=l[f-15],g=(A<<25|A>>>7)^(A<<14|A>>>18)^A>>>3,p=l[f-2],m=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;l[f]=g+l[f-7]+m+l[f-16]}var y=e&h^e&r^h&r,S=(e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22),v=d+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&u^~o&c)+a[f]+l[f];d=c,c=u,u=o,o=n+v|0,n=r,r=h,h=e,e=v+(S+y)|0}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+n|0,s[4]=s[4]+o|0,s[5]=s[5]+u|0,s[6]=s[6]+c|0,s[7]=s[7]+d|0},kX:function(){var t=this.Kw,s=t.words,e=8*this.xX,h=8*t.sigBytes;return s[h>>>5]|=128<<24-h%32,s[14+(h+64>>>9<<4)]=i.floor(e/4294967296),s[15+(h+64>>>9<<4)]=e,t.sigBytes=4*s.length,this.MX(),this.IX},clone:function(){var t=r.clone.call(this);return t.IX=this.IX.clone(),t}});s.SHA256=r.TX(u),s.HmacSHA256=r.FX(u)}(Math),t.SHA256}(Xm.exports),Zm={exports:{}}.exports=function(t){return s=(i=t).lib.WordArray,e=i.algo,h=e.SHA256,r=e.SHA224=h.extend({CX:function(){this.IX=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},kX:function(){var t=h.kX.call(this);return t.sigBytes-=4,t}}),i.SHA224=h.TX(r),i.HmacSHA224=h.FX(r),t.SHA224;var i,s,e,h,r}(Xm.exports),Qm={exports:{}}.exports=Xm.exports.enc.Hex,Jm={exports:{}}.exports=Xm.exports.enc.Utf8;!function(t){return s=(i=t).lib.WordArray,i.enc.Base64={stringify:function(t){var i=t.words,s=t.sigBytes,e=this.PX;t.clamp();for(var h=[],r=0;r<s;r+=3)for(var n=(i[r>>>2]>>>24-r%4*8&255)<<16|(i[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|i[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<s;o++)h.push(e.charAt(n>>>6*(3-o)&63));var a=e.charAt(64);if(a)for(;h.length%4;)h.push(a);return h.join("")},parse:function(t){var i=t.length,e=this.PX,h=this.DX;if(!h){h=this.DX=[];for(var r=0;r<e.length;r++)h[e.charCodeAt(r)]=r}var n=e.charAt(64);if(n){var o=t.indexOf(n);-1!==o&&(i=o)}return function(t,i,e){for(var h=[],r=0,n=0;n<i;n++)if(n%4){var o=e[t.charCodeAt(n-1)]<<n%4*2|e[t.charCodeAt(n)]>>>6-n%4*2;h[r>>>2]|=o<<24-r%4*8,r++}return s.create(h,r)}(t,i,h)},PX:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64;var i,s}(Xm.exports);!function(t){(function(i){var s=t,e=s.lib,h=e.WordArray,r=e.Hasher,n=s.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*i.abs(i.sin(t+1))|0}();var a=n.MD5=r.extend({CX:function(){this.IX=new h.init([1732584193,4023233417,2562383102,271733878])},wX:function(t,i){for(var s=0;s<16;s++){var e=i+s,h=t[e];t[e]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var r=this.IX.words,n=t[i+0],a=t[i+1],f=t[i+2],A=t[i+3],g=t[i+4],p=t[i+5],m=t[i+6],y=t[i+7],S=t[i+8],v=t[i+9],x=t[i+10],b=t[i+11],M=t[i+12],_=t[i+13],w=t[i+14],C=t[i+15],k=r[0],T=r[1],F=r[2],I=r[3];k=l(k,T,F,I,n,7,o[0]),I=l(I,k,T,F,a,12,o[1]),F=l(F,I,k,T,f,17,o[2]),T=l(T,F,I,k,A,22,o[3]),k=l(k,T,F,I,g,7,o[4]),I=l(I,k,T,F,p,12,o[5]),F=l(F,I,k,T,m,17,o[6]),T=l(T,F,I,k,y,22,o[7]),k=l(k,T,F,I,S,7,o[8]),I=l(I,k,T,F,v,12,o[9]),F=l(F,I,k,T,x,17,o[10]),T=l(T,F,I,k,b,22,o[11]),k=l(k,T,F,I,M,7,o[12]),I=l(I,k,T,F,_,12,o[13]),F=l(F,I,k,T,w,17,o[14]),k=u(k,T=l(T,F,I,k,C,22,o[15]),F,I,a,5,o[16]),I=u(I,k,T,F,m,9,o[17]),F=u(F,I,k,T,b,14,o[18]),T=u(T,F,I,k,n,20,o[19]),k=u(k,T,F,I,p,5,o[20]),I=u(I,k,T,F,x,9,o[21]),F=u(F,I,k,T,C,14,o[22]),T=u(T,F,I,k,g,20,o[23]),k=u(k,T,F,I,v,5,o[24]),I=u(I,k,T,F,w,9,o[25]),F=u(F,I,k,T,A,14,o[26]),T=u(T,F,I,k,S,20,o[27]),k=u(k,T,F,I,_,5,o[28]),I=u(I,k,T,F,f,9,o[29]),F=u(F,I,k,T,y,14,o[30]),k=c(k,T=u(T,F,I,k,M,20,o[31]),F,I,p,4,o[32]),I=c(I,k,T,F,S,11,o[33]),F=c(F,I,k,T,b,16,o[34]),T=c(T,F,I,k,w,23,o[35]),k=c(k,T,F,I,a,4,o[36]),I=c(I,k,T,F,g,11,o[37]),F=c(F,I,k,T,y,16,o[38]),T=c(T,F,I,k,x,23,o[39]),k=c(k,T,F,I,_,4,o[40]),I=c(I,k,T,F,n,11,o[41]),F=c(F,I,k,T,A,16,o[42]),T=c(T,F,I,k,m,23,o[43]),k=c(k,T,F,I,v,4,o[44]),I=c(I,k,T,F,M,11,o[45]),F=c(F,I,k,T,C,16,o[46]),k=d(k,T=c(T,F,I,k,f,23,o[47]),F,I,n,6,o[48]),I=d(I,k,T,F,y,10,o[49]),F=d(F,I,k,T,w,15,o[50]),T=d(T,F,I,k,p,21,o[51]),k=d(k,T,F,I,M,6,o[52]),I=d(I,k,T,F,A,10,o[53]),F=d(F,I,k,T,x,15,o[54]),T=d(T,F,I,k,a,21,o[55]),k=d(k,T,F,I,S,6,o[56]),I=d(I,k,T,F,C,10,o[57]),F=d(F,I,k,T,m,15,o[58]),T=d(T,F,I,k,_,21,o[59]),k=d(k,T,F,I,g,6,o[60]),I=d(I,k,T,F,b,10,o[61]),F=d(F,I,k,T,f,15,o[62]),T=d(T,F,I,k,v,21,o[63]),r[0]=r[0]+k|0,r[1]=r[1]+T|0,r[2]=r[2]+F|0,r[3]=r[3]+I|0},kX:function(){var t=this.Kw,s=t.words,e=8*this.xX,h=8*t.sigBytes;s[h>>>5]|=128<<24-h%32;var r=i.floor(e/4294967296),n=e;s[15+(h+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),s[14+(h+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(s.length+1),this.MX();for(var o=this.IX,a=o.words,l=0;l<4;l++){var u=a[l];a[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return o},clone:function(){var t=r.clone.call(this);return t.IX=this.IX.clone(),t}});function l(t,i,s,e,h,r,n){var o=t+(i&s|~i&e)+h+n;return(o<<r|o>>>32-r)+i}function u(t,i,s,e,h,r,n){var o=t+(i&e|s&~e)+h+n;return(o<<r|o>>>32-r)+i}function c(t,i,s,e,h,r,n){var o=t+(i^s^e)+h+n;return(o<<r|o>>>32-r)+i}function d(t,i,s,e,h,r,n){var o=t+(s^(i|~e))+h+n;return(o<<r|o>>>32-r)+i}s.MD5=r.TX(a),s.HmacMD5=r.FX(a)})(Math),t.MD5}(Xm.exports);!function(t){return s=(i=t).lib,e=s.WordArray,h=s.Hasher,r=i.algo,n=[],o=r.SHA1=h.extend({CX:function(){this.IX=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},wX:function(t,i){for(var s=this.IX.words,e=s[0],h=s[1],r=s[2],o=s[3],a=s[4],l=0;l<80;l++){if(l<16)n[l]=0|t[i+l];else{var u=n[l-3]^n[l-8]^n[l-14]^n[l-16];n[l]=u<<1|u>>>31}var c=(e<<5|e>>>27)+a+n[l];c+=l<20?1518500249+(h&r|~h&o):l<40?1859775393+(h^r^o):l<60?(h&r|h&o|r&o)-1894007588:(h^r^o)-899497514,a=o,o=r,r=h<<30|h>>>2,h=e,e=c}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+o|0,s[4]=s[4]+a|0},kX:function(){var t=this.Kw,i=t.words,s=8*this.xX,e=8*t.sigBytes;return i[e>>>5]|=128<<24-e%32,i[14+(e+64>>>9<<4)]=Math.floor(s/4294967296),i[15+(e+64>>>9<<4)]=s,t.sigBytes=4*i.length,this.MX(),this.IX},clone:function(){var t=h.clone.call(this);return t.IX=this.IX.clone(),t}}),i.SHA1=h.TX(o),i.HmacSHA1=h.FX(o),t.SHA1;var i,s,e,h,r,n,o}(Xm.exports);var Km,qm,ty;qm=(Km=Xm.exports).lib.Base,ty=Km.enc.Utf8,Km.algo.HMAC=qm.extend({init:function(t,i){t=this.BX=new t.init,"string"==typeof i&&(i=ty.parse(i));var s=t.blockSize,e=4*s;i.sigBytes>e&&(i=t.finalize(i)),i.clamp();for(var h=this.LX=i.clone(),r=this.RX=i.clone(),n=h.words,o=r.words,a=0;a<s;a++)n[a]^=1549556828,o[a]^=909522486;h.sigBytes=r.sigBytes=e,this.reset()},reset:function(){var t=this.BX;t.reset(),t.update(this.RX)},update:function(t){return this.BX.update(t),this},finalize:function(t){var i=this.BX,s=i.finalize(t);return i.reset(),i.finalize(this.LX.clone().concat(s))}}),function(t){return e=(s=(i=t).lib).Base,h=s.WordArray,n=(r=i.algo).MD5,o=r.EvpKDF=e.extend({cfg:e.extend({keySize:4,hasher:n,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,i){for(var s,e=this.cfg,r=e.hasher.create(),n=h.create(),o=n.words,a=e.keySize,l=e.iterations;o.length<a;){s&&r.update(s),s=r.update(t).finalize(i),r.reset();for(var u=1;u<l;u++)s=r.finalize(s),r.reset();n.concat(s)}return n.sigBytes=4*a,n}}),i.EvpKDF=function(t,i,s){return o.create(s).compute(t,i)},t.EvpKDF;var i,s,e,h,r,n,o}(Xm.exports);!function(t){t.lib.Cipher||function(i){var s=t,e=s.lib,h=e.Base,r=e.WordArray,n=e.BufferedBlockAlgorithm,o=s.enc;o.Utf8;var a=o.Base64,l=s.algo.EvpKDF,u=e.Cipher=n.extend({cfg:h.extend(),createEncryptor:function(t,i){return this.create(this.EX,t,i)},createDecryptor:function(t,i){return this.create(this.zX,t,i)},init:function(t,i,s){this.cfg=this.cfg.extend(s),this.VX=t,this.OX=i,this.reset()},reset:function(){n.reset.call(this),this.CX()},process:function(t){return this.bX(t),this.MX()},finalize:function(t){return t&&this.bX(t),this.kX()},keySize:4,ivSize:4,EX:1,zX:2,TX:function(){function t(t){return"string"==typeof t?S:m}return function(i){return{encrypt:function(s,e,h){return t(e).encrypt(i,s,e,h)},decrypt:function(s,e,h){return t(e).decrypt(i,s,e,h)}}}}()});e.StreamCipher=u.extend({kX:function(){return this.MX(!0)},blockSize:1});var c=s.mode={},d=e.BlockCipherMode=h.extend({createEncryptor:function(t,i){return this.Encryptor.create(t,i)},createDecryptor:function(t,i){return this.Decryptor.create(t,i)},init:function(t,i){this.NX=t,this.GX=i}}),f=c.CBC=function(){var t=d.extend();function i(t,i,s){var e,h=this.GX;h?(e=h,this.GX=undefined):e=this.WX;for(var r=0;r<s;r++)t[i+r]^=e[r]}return t.Encryptor=t.extend({processBlock:function(t,s){var e=this.NX,h=e.blockSize;i.call(this,t,s,h),e.encryptBlock(t,s),this.WX=t.slice(s,s+h)}}),t.Decryptor=t.extend({processBlock:function(t,s){var e=this.NX,h=e.blockSize,r=t.slice(s,s+h);e.decryptBlock(t,s),i.call(this,t,s,h),this.WX=r}}),t}(),A=(s.pad={}).Pkcs7={pad:function(t,i){for(var s=4*i,e=s-t.sigBytes%s,h=e<<24|e<<16|e<<8|e,n=[],o=0;o<e;o+=4)n.push(h);var a=r.create(n,e);t.concat(a)},unpad:function(t){var i=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=i}};e.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:A}),reset:function(){var t;u.reset.call(this);var i=this.cfg,s=i.iv,e=i.mode;this.VX==this.EX?t=e.createEncryptor:(t=e.createDecryptor,this._X=1),this.UX&&this.UX.YX==t?this.UX.init(this,s&&s.words):(this.UX=t.call(e,this,s&&s.words),this.UX.YX=t)},wX:function(t,i){this.UX.processBlock(t,i)},kX:function(){var t,i=this.cfg.padding;return this.VX==this.EX?(i.pad(this.Kw,this.blockSize),t=this.MX(!0)):(t=this.MX(!0),i.unpad(t)),t},blockSize:4});var g=e.CipherParams=h.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),p=(s.format={}).OpenSSL={stringify:function(t){var i=t.ciphertext,s=t.salt;return(s?r.create([1398893684,1701076831]).concat(s).concat(i):i).toString(a)},parse:function(t){var i,s=a.parse(t),e=s.words;return 1398893684==e[0]&&1701076831==e[1]&&(i=r.create(e.slice(2,4)),e.splice(0,4),s.sigBytes-=16),g.create({ciphertext:s,salt:i})}},m=e.SerializableCipher=h.extend({cfg:h.extend({format:p}),encrypt:function(t,i,s,e){e=this.cfg.extend(e);var h=t.createEncryptor(s,e),r=h.finalize(i),n=h.cfg;return g.create({ciphertext:r,key:s,iv:n.iv,algorithm:t,mode:n.mode,padding:n.padding,blockSize:t.blockSize,formatter:e.format})},decrypt:function(t,i,s,e){return e=this.cfg.extend(e),i=this.HX(i,e.format),t.createDecryptor(s,e).finalize(i.ciphertext)},HX:function(t,i){return"string"==typeof t?i.parse(t,this):t}}),y=(s.kdf={}).OpenSSL={execute:function(t,i,s,e){e||(e=r.random(8));var h=l.create({keySize:i+s}).compute(t,e),n=r.create(h.words.slice(i),4*s);return h.sigBytes=4*i,g.create({key:h,iv:n,salt:e})}},S=e.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:y}),encrypt:function(t,i,s,e){var h=(e=this.cfg.extend(e)).kdf.execute(s,t.keySize,t.ivSize);e.iv=h.iv;var r=m.encrypt.call(this,t,i,h.key,e);return r.mixIn(h),r},decrypt:function(t,i,s,e){e=this.cfg.extend(e),i=this.HX(i,e.format);var h=e.kdf.execute(s,t.keySize,t.ivSize,i.salt);return e.iv=h.iv,m.decrypt.call(this,t,i,h.key,e)}})}()}(Xm.exports);var iy={exports:{}}.exports=function(t){return function(){var i=t,s=i.lib.BlockCipher,e=i.algo,h=[],r=[],n=[],o=[],a=[],l=[],u=[],c=[],d=[],f=[];!function(){for(var t=[],i=0;i<256;i++)t[i]=i<128?i<<1:i<<1^283;var s=0,e=0;for(i=0;i<256;i++){var A=e^e<<1^e<<2^e<<3^e<<4;A=A>>>8^255&A^99,h[s]=A,r[A]=s;var g=t[s],p=t[g],m=t[p],y=257*t[A]^16843008*A;n[s]=y<<24|y>>>8,o[s]=y<<16|y>>>16,a[s]=y<<8|y>>>24,l[s]=y,y=16843009*m^65537*p^257*g^16843008*s,u[A]=y<<24|y>>>8,c[A]=y<<16|y>>>16,d[A]=y<<8|y>>>24,f[A]=y,s?(s=g^t[t[t[m^g]]],e^=t[t[e]]):s=e=1}}();var A=[0,1,2,4,8,16,32,64,128,27,54],g=e.AES=s.extend({CX:function(){if(!this.$X||this.XX!==this.OX){for(var t=this.XX=this.OX,i=t.words,s=t.sigBytes/4,e=4*((this.$X=s+6)+1),r=this.jX=[],n=0;n<e;n++)n<s?r[n]=i[n]:(l=r[n-1],n%s?s>6&&n%s==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]):(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=A[n/s|0]<<24),r[n]=r[n-s]^l);for(var o=this.ZX=[],a=0;a<e;a++){if(n=e-a,a%4)var l=r[n];else l=r[n-4];o[a]=a<4||n<=4?l:u[h[l>>>24]]^c[h[l>>>16&255]]^d[h[l>>>8&255]]^f[h[255&l]]}}},encryptBlock:function(t,i){this.QX(t,i,this.jX,n,o,a,l,h)},decryptBlock:function(t,i){var s=t[i+1];t[i+1]=t[i+3],t[i+3]=s,this.QX(t,i,this.ZX,u,c,d,f,r),s=t[i+1],t[i+1]=t[i+3],t[i+3]=s},QX:function(t,i,s,e,h,r,n,o){for(var a=this.$X,l=t[i]^s[0],u=t[i+1]^s[1],c=t[i+2]^s[2],d=t[i+3]^s[3],f=4,A=1;A<a;A++){var g=e[l>>>24]^h[u>>>16&255]^r[c>>>8&255]^n[255&d]^s[f++],p=e[u>>>24]^h[c>>>16&255]^r[d>>>8&255]^n[255&l]^s[f++],m=e[c>>>24]^h[d>>>16&255]^r[l>>>8&255]^n[255&u]^s[f++],y=e[d>>>24]^h[l>>>16&255]^r[u>>>8&255]^n[255&c]^s[f++];l=g,u=p,c=m,d=y}g=(o[l>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^s[f++],p=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&l])^s[f++],m=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[l>>>8&255]<<8|o[255&u])^s[f++],y=(o[d>>>24]<<24|o[l>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^s[f++],t[i]=g,t[i+1]=p,t[i+2]=m,t[i+3]=y},keySize:8});i.AES=s.TX(g)}(),t.AES}(Xm.exports),sy={exports:{}}.exports=function(t){return t.mode.CTR=(s=(i=t.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(t,i){var s=this.NX,e=s.blockSize,h=this.GX,r=this.JX;h&&(r=this.JX=h.slice(0),this.GX=void 0);var n=r.slice(0);s.encryptBlock(n,0),r[e-1]=r[e-1]+1|0;for(var o=0;o<e;o++)t[i+o]^=n[o]}}),i.Decryptor=s,i),t.mode.CTR;var i,s}(Xm.exports),ey={exports:{}}.exports=function(t){return function(){if("function"==typeof ArrayBuffer){var i=t.lib.WordArray,s=i.init,e=i.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var i=t.byteLength,e=[],h=0;h<i;h++)e[h>>>2]|=t[h]<<24-h%4*8;s.call(this,e,i)}else s.apply(this,arguments)};e.prototype=i}}(),t.lib.WordArray}(Xm.exports),hy={exports:{}}.exports=function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding}(Xm.exports);const ry={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAxODAxMjA="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvdHJvdWJsZXNob290aW5nL3Jlc3RyaWN0ZWQtZmVhdHVyZXMv","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzLw=="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI="],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw==","VHJhZGluZw==","ZmVhdHVyZXM=","Y2xpY2s=","aGVyZQ==","bW9yZQ==","c3VwcGxpZWQ=","Z2V0","bGljZW5zZQ==","VHJlZQ=="],1:["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2FuZGJveA=="]},ny=xt,oy=(...t)=>t.slice(1).reduce(((i,s)=>i+ny.atob(ry[t[0]][s].toString())),"");let ay,ly,uy,cy=new Uint8Array([]);class dy{set e(t){ay=t}get e(){ly={tf:!1,if:!1,sf:!1,ef:!1,hf:!1,rf:!1,nf:!1,af:!1,lf:!1,uf:!1,cf:!1,df:!1,ff:!1,Af:!1,gf:!1,pf:!1,mf:!1,yf:!1,Sf:!1,vf:!1,xf:!1,bf:!1,Mf:!1,_f:!1};const t=cy.length,i=t>=1?cy[0]:void 0,s=t>=2?cy[1]:void 0,e=t>=3?cy[2]:void 0;return void 0!==i&&(ly.tf=!!(1&i),ly.if=!!(2&i),ly.sf=!!(4&i),ly.ef=!!(8&i),ly.hf=!!(16&i),ly.rf=!!(32&i),ly.nf=!!(64&i),ly.af=!!(128&i)),void 0!==s&&(ly.lf=!!(1&s),ly.uf=!!(2&s),ly.cf=!!(4&s),ly.df=!!(8&s),ly.ff=!!(16&s),ly.Af=!!(32&s),ly.gf=!!(64&s),ly.pf=!!(128&s)),void 0!==e&&(ly.mf=!!(1&e),ly.yf=!!(2&e),ly.Sf=!!(4&e),ly.vf=!!(8&e),ly.xf=!!(16&e),ly.bf=!!(32&e),ly.Mf=!!(64&e),ly._f=!!(128&e)),ly.rf}set l(t){uy=t}get l(){return uy}}let fy=!1;const Ay=(t,i)=>{const s=new RegExp(`.{${i}}`,"g");return(t.match(s)||[]).map((t=>parseInt(t,16)))},gy=t=>{if(4===t.byteLength)return`${t[0].toString().padStart(2,"0")}${t[1].toString().padStart(2,"0")}${t[2].toString().padStart(2,"0")}${t[3].toString().padStart(2,"0")}`},py=t=>t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),my=t=>{const i={},s=t.split("-");if(3!==s.length)return{KX:oy(0,0,1,7,1,12,5)};let e=0;const h=Uint8Array.from(atob(s[1]),(t=>t.charCodeAt(0)));e+=1;const r=h.subarray(e,e+=20),n=new DataView(h.buffer).getUint16(e,!0);e+=2;const o=Uint8Array.from(Array(n));for(let t=0;t<n;t+=1)o[t]=h[t+e]^r[t%r.byteLength];const a=new DataView(o.buffer);i.qX=o,e=0;const l=Uint8Array.from(Array(a.getUint16(e,!0)));e+=2,l.set(o.subarray(e,e+=l.byteLength)),cy=new Uint8Array(l);const u=gy(o.subarray(e,e+=4)),c=oy(-3,0);if(!u)return{KX:oy(0,0,1,7,1,12,5)};if(u<c)return{KX:oy(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};if(8&l[0]){const t=gy(o.subarray(e,e+=4)),i=py(new Date);if(!t)return{KX:oy(0,0,1,7,1,12,5)};if(t<i)return{KX:oy(0,0,1,2,1,3,1,4,5),tj:oy(-2,2)}}i.ij=e;const d=`${s[0]}-${s[1]}`,f=Array.prototype.reduce.call(atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");return vy(d,f)?i:{KX:oy(0,0,1,7,1,12,5)}},yy=t=>{const i=t.slice(0,4);let s=t.slice(5);switch(i){case"0001":{s=s.replace(/-/g,"");const t=Uint8Array.from(Ay(s,2)),i=t.slice(36,40),e=new Uint8Array(4),h=(t=>{let i;const s=[];for(let t=0;t<256;t+=1){i=t;for(let t=0;t<8;t+=1)i=1&i?3988292384^i>>>1:i>>>1;s[t]=i}let e=-1;for(let i=0;i<t.length;i+=1)e=e>>>8^s[255&(e^t[i])];return(-1^e)>>>0})(t.slice(0,36));new DataView(e.buffer).setUint32(0,h,!0);const r=t.slice(28,34);let n=0;for(let t=r.length-1;t>0;t-=1)n+=r[t]*2**(8*t);const o=new Date(n);if(py(o)<oy(-3,0))return{KX:oy(0,0,1,2,1,3,1,4,5),tj:oy(-2,2)};if(i.every(((t,i)=>e[i]===t)))return{};break}case"0002":return my(t);default:return{KX:oy(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}return{KX:oy(0,0,1,2,1,7,1,12,5)}},Sy=t=>{if(!t)return{KX:oy(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5)};const i=(t[oy(-1,9)]||t[oy(-1,37)]).map((t=>(t||"").trim()));if(i.indexOf(ny[oy(-1,6)][oy(-1,7)])>-1)return{sj:!0};const s=i.filter((t=>t.indexOf("*")>-1));if(wy(ny[oy(-1,6)][oy(-1,7)],s))return{sj:!0};const e=t[oy(-1,8)]||t[oy(-1,38)];if(""!==e&&null!=e){if(wy(ny[oy(-1,6)][oy(-1,7)],[e]))return{sj:!1};if(e===ny[oy(-1,6)][oy(-1,7)])return{sj:!1}}return{KX:oy(0,14,1,20,5)}},vy=(t,i)=>{const s=new Hm("secp256k1").keyFromPublic(oy(-4,0),"hex"),e=Zm(t).toString();return s.verify(e,i)},xy=t=>{switch(t.slice(0,4)){case"0001":return(t=>{let i,s="";try{const i=t.split("-"),e=i[1],h=i[2],r=i[3];if(!vy(h,r))return{KX:oy(0,21,1,2,1,7,1,12,5)};const n=Qm.parse(h);s=iy.decrypt({ciphertext:Qm.parse(e)},n,{mode:sy,padding:hy,iv:Qm.parse("00000000000000000000000000000001")}).toString(Jm)}catch(t){return{KX:oy(0,21,1,2,1,7,1,12,5)}}try{i=JSON.parse(s)}catch(t){return{KX:oy(0,21,1,2,1,7,1,12,5)}}if(void 0===i[oy(-1,5)]||null===i[oy(-1,4)]||!i[oy(-1,9)])return{KX:oy(0,21,1,2,1,7,1,12,5)};const e=parseInt(oy(-3,0),10)||Number(parseInt(oy(-3,0),10));return i[oy(-1,5)]<e?{KX:oy(0,21,1,2,1,3,1,4,5)}:Sy(i)})(t);case"0002":return(t=>{const i=my(t),s=i.qX,e=i.ij;if(i.KX||void 0===s||void 0===e)return i;let h,r="";try{const t=s.slice(i.ij,e+16),h=new DataView(t.buffer),n=new Int32Array(4);for(let t=0;t<n.length;t+=1)n[t]=h.getInt32(4*t,!1);const o=ey.create(Array.from(n)),a=e+16,l=s.slice(a,s.length),u=new DataView(l.buffer),c=new Int32Array(Math.floor(l.byteLength/4));for(let t=0;t<c.length;t+=1)c[t]=u.getInt32(4*t,!1);const d=ey.create(Array.from(c)),f=iy.decrypt({ciphertext:d},o,{mode:sy,padding:hy,iv:Qm.parse("00000000000000000000000000000001")});r=ny.atob(f.toString(Jm))}catch(t){return{KX:oy(0,21,1,2,1,7,1,12,5)}}try{h=JSON.parse(r)}catch(t){return{KX:oy(0,21,1,2,1,7,1,12,5)}}return h[oy(-1,37)]?Sy(h):{KX:oy(0,21,1,2,1,7,1,12,5)}})(t);default:return{KX:oy(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},by=(t,i)=>{switch(t.slice(0,4)){case"0001":return((t,i)=>{if(!i)return{KX:oy(0,39,1,40,1,41,5)};const s=t.split("-"),e=s[1].slice(1),h=s[2],r=s[3];if(!vy(`${e}-${h}`,r))return{KX:oy(0,21,1,2,1,7,1,12,5)};const n=Uint8Array.from(Ay(h,2));let o=0;for(let t=n.length-1;t>0;t-=1)o+=n[t]*2**(8*t);if(o<(parseInt(oy(-3,0),10)||Number(parseInt(oy(-3,0),10))))return{KX:oy(0,21,1,2,1,3,1,4,5)};const a=Int32Array.from(Ay(e,8)),l=jm(i[oy(-1,31)]).toString(Qm),u=Int32Array.from(Ay(l,8)),c=jm(i[oy(-1,32)]).toString(Qm),d=Int32Array.from(Ay(c,8)),f=new Int32Array(u.length);for(let t=0;t<f.length;t+=1)f[t]=u[t]^d[t];return a.every(((t,i)=>f[i]===t))?{}:{KX:oy(0,21,1,2,1,7,1,12,5)}})(t,i);case"0002":return((t,i)=>{if(!i)return{KX:oy(0,39,1,40,1,41,5)};const s=my(t),e=s.qX,h=s.ij;if(s.KX||void 0===e||void 0===h)return s;const r=e.slice(h,e.length),n=new DataView(r.buffer),o=new Int32Array(8);for(let t=0;t<o.length;t+=1)o[t]=n.getInt32(4*t,!1);const a=jm(i[oy(-1,31)]).toString(Qm),l=Int32Array.from(Ay(a,8)),u=jm(i[oy(-1,32)]).toString(Qm),c=Int32Array.from(Ay(u,8)),d=new Int32Array(l.length);for(let t=0;t<d.length;t+=1)d[t]=l[t]^c[t];return o.every(((t,i)=>d[i]===t))?{}:{KX:oy(0,21,1,2,1,7,1,12,5)}})(t,i);default:return{KX:oy(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},My=(t,i,s=!0,e)=>{fy=!1,i.eo();const h=i.Wr,r=!!h&&(h===xt.document.body||xt.document.body.contains(h)),n=h&&r?h:document.body;if(void 0===Array.from(n.children).find((t=>"lcjs-error"===t.id))){const i=xt.document.createElement("div");i.id="lcjs-error",n.append(i),i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.width="100%",i.style.height="100%",i.style.backgroundColor="black",i.style.boxSizing="border-box",i.style.padding="20px",i.style.font="Arial",i.style.fontSize="20px";let h,r=(t||"LICENSE_ERROR").toLowerCase().split("_").join(" ");if(r=(s?oy(0,0,1,2,1,23,1,24,25,1):"")+r.charAt(0).toUpperCase()+r.substr(1),e){const t=xt.document.createElement("a");t.href=e,h=t}else h=xt.document.createElement("p1");i.append(h),h.innerHTML=r,h.style.color="red"}},_y=(t,i,s)=>{i?(t[oy(-1,17)](oy(-1,19),s),t[oy(-1,17)](oy(-1,20),s),t[oy(-1,17)](oy(-1,21),s),t[oy(-1,17)](oy(-1,22),s)):(t[oy(-1,18)](oy(-1,19),s),t[oy(-1,18)](oy(-1,20),s),t[oy(-1,18)](oy(-1,21),s),t[oy(-1,18)](oy(-1,22),s))},wy=(t,i)=>{const s=t.split(".").reverse();return i.some((t=>{const i=t.split(".").reverse();let e=!1;const h=i.findIndex((t=>"*"===t)),r=s.every(((t,s)=>{if(!e){if(!(s<i.length))return!1;if(e="*"===i[s]&&s+1>2,!e&&t!==i[s])return!1}return!0}));return!(h>s.length-1||!r)}))},Cy=new Map;exports.Animation=j,exports.AnimationEasings=X,exports.Animator=Z,exports.AreaRangeSeries=qu,exports.AreaSeries=$u,exports.AreaSeriesBipolar=Xu,exports.AreaSeriesMonopolar=ju,exports.AreaSeriesNegative=Zu,exports.AreaSeriesPositive=Qu,exports.AreaSeriesTypes=Ju,exports.AutoCursor2DBuilder=va,exports.AutoCursorBuilders=Nf,exports.AutoCursorXYBuilder=uu,exports.AutoFitStrategies=da,exports.AutoFitStrategy=la,exports.Axis=go,exports.Axis3D=Ka,exports.AxisScrollStrategies=ze,exports.AxisTickStrategies=Ve,exports.Band=Re,exports.BarChart=Ff,exports.BarChartBar=Cf,exports.BarChartCategoryAxis=_f,exports.BarChartSorting=If,exports.BarChartTypes={Horizontal:"horizontal",Vertical:"vertical"},exports.BarChartValueAxis=wf,exports.BasicSeries=Cu,exports.BorderedPicture=Er,exports.BoxFigure=ru,exports.BoxSeries=Iu,exports.BoxSeries3D=rl,exports.Button=Wn,exports.Chart=ha,exports.Chart3D=_l,exports.ChartComponent=Ws,exports.ChartMarker=mu,exports.ChartMarker2D=class extends mu{constructor(t,i,s,e,h,r){super(t,i,s,e.lm(t,i,s,r),h,r)}},exports.ChartMarkerXY=Su,exports.ChartWithSeries=fl,exports.ChartXY=Gc,exports.Color=x,exports.ColorCSS=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return M(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return M(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=((t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]})(i[0],i[1],i[2]);return M(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?_(t):_((t=>{const i=k[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)})(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),_("#fff")},exports.ColorHEX=_,exports.ColorHSV=w,exports.ColorPalettes=Nr,exports.ColorRGBA=M,exports.ColorShadingStyles=Zr,exports.ColorUint32=C,exports.ConstantLine=Ee,exports.CursorBuilder=Sa,exports.CursorBuilderXY=lu,exports.CustomTick=_r,exports.Dashboard=Ef,exports.DashedLine=en,exports.DataGrid=yf,exports.DataPatternsNew=Ph,exports.DataSetXY=un,exports.DateTimeTickStrategy=Eo,exports.EllipseFigure=Pu,exports.EllipseSeries=Du,exports.EmptyFill=E,exports.EmptyUIElement=Br,exports.Figure=hu,exports.FigureSeries=Tu,exports.FontSettings=eh,exports.FormattingFunctions=Fs,exports.FunnelChart=od,exports.FunnelChartTypes=dd,exports.FunnelChartWithLabelsInsideSlices=cd,exports.FunnelChartWithLabelsOnSides=ud,exports.FunnelSlice=sd,exports.GaugeChart=gd,exports.GaugeChartTypes=Jf,exports.GaugeSlice=md,exports.GenericAxis=Qe,exports.GlowEffect=ln,exports.HeatmapGridSeries=Nu,exports.HeatmapGridSeriesIntensityValues=Gu,exports.HeatmapScrollingGridSeries=Wu,exports.HeatmapScrollingGridSeriesIntensityValues=Uu,exports.Highlighter=Us,exports.Icon=nn,exports.ImageFill=Kr,exports.IndividualPointFill=U,exports.LUT=L,exports.LegendBoxBuilders=oo,exports.LineAndPointSeries3D=nl,exports.LineSeries=Cc,exports.LineSeries3D=ol,exports.LinearGradientFill=st,exports.LinearGradientFillPalette=(t,i,s,e)=>{const h=t(i+1,e);return t=>new st({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},exports.MapChart=Ll,exports.MapRegions=Qf,exports.MapRegionsAfrica=Gf,exports.MapRegionsAsia=Wf,exports.MapRegionsAustralia=Uf,exports.MapRegionsCanada=Yf,exports.MapRegionsEurope=Hf,exports.MapRegionsNorthAmerica=jf,exports.MapRegionsSouthAmerica=Zf,exports.MapRegionsUSA=Xf,exports.MapRegionsWorld=$f,exports.MapTypes=kl,exports.MarkerBuilders=Of,exports.MeshModel3D=Ml,exports.NumericTickStrategy=Yo,exports.OHLCSeries=vc,exports.OHLCSeriesBars=bc,exports.OHLCSeriesCandlesticks=xc,exports.OHLCSeriesTypes=Mc,exports.OnScreenMenu=Tc,exports.OnScreenMenuAnimationsButton=ve,exports.OnScreenMenuButton=de,exports.OnScreenMenuControlBase=Ks,exports.OnScreenMenuCustomButton=be,exports.OnScreenMenuOsmToggleButton=Me,exports.OnScreenMenuToggleButton=fe,exports.OnScreenMenuZoomInButton=Ae,exports.OnScreenMenuZoomInXButton=ge,exports.OnScreenMenuZoomInYButton=pe,exports.OnScreenMenuZoomOutButton=me,exports.OnScreenMenuZoomOutXButton=ye,exports.OnScreenMenuZoomOutYButton=Se,exports.OnScreenMenuZoomToFitButton=xe,exports.PalettedFill=class extends H{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}},exports.Panel=ta,exports.PhongShadingStyle=Xr,exports.Picture=Rr,exports.PieChart=Wa,exports.PieChartTypes=Xa,exports.PieChartWithLabelsInsideSlices=$a,exports.PieChartWithLabelsOnSides=Ha,exports.PieSlice=za,exports.PixelatedPoints3D=ch,exports.PointCloudSeries3D=cl,exports.PointLineAreaSeries=Fc,exports.PointLineSeries=hc,exports.PointLineSeries3D=al,exports.PointSeries=kc,exports.PointSeries3D=ul,exports.PointSeriesTypes3D=dl,exports.PointStyle3D=fh,exports.PolarAreaSeries=Jc,exports.PolarAreaSeriesInterior=Kc,exports.PolarAxis=zl,exports.PolarAxisAmplitude=Ol,exports.PolarAxisTick=Vl,exports.PolarChart=td,exports.PolarHeatmapSeries=tu,exports.PolarLineSeries=su,exports.PolarPointLineSeries=eu,exports.PolarPointSeries=jc,exports.PolarPolygon=Zc,exports.PolarPolygonSeries=Qc,exports.PolarSector=$l,exports.PolarSeries=jl,exports.PolygonFigure=Bu,exports.PolygonSeries=Lu,exports.PyramidChart=Cd,exports.PyramidChartTypes=Pd,exports.PyramidChartWithLabelsInsideSlices=Id,exports.PyramidChartWithLabelsOnSides=Fd,exports.PyramidSlice=bd,exports.RadialGauge=pd,exports.RadialGradientFill=q,exports.RadialGradientFillPalette=(t,i,s)=>{const e=t(i+1,s);return t=>new q({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},exports.RangeSeries=Yu,exports.RectangleFigure=Ru,exports.RectangleSeries=Eu,exports.SegmentFigure=zu,exports.SegmentSeries=Vu,exports.Series2D=Xl,exports.Series3D=hl,exports.SeriesMarkerXY=vu,exports.SeriesXY=xu,exports.SimpleShadingStyle=Hr,exports.Slice=Ra,exports.SliceLabelFormatters=Ba,exports.SliceSorters=Da,exports.SolidFill=G,exports.SolidFillPalette=(t,i,s)=>{const e=t(i,s);return t=>new G({color:e(t)})},exports.SolidGauge=xd,exports.SolidGaugeSlice=yd,exports.SolidLine=Qs,exports.SpiderAxis=Ed,exports.SpiderChart=$d,exports.SpiderSeries=Vd,exports.SplineSeries=oc,exports.StaticCursor2DBuilder=xa,exports.StaticCursorXYBuilder=cu,exports.StepSeries=Sc,exports.StipplePatterns=tn,exports.SurfaceGridSeries3D=yl,exports.SurfaceScrollingGridSeries3D=Sl,exports.TableContentBuilder=fa,exports.Themes=SA,exports.Tick=Ao,exports.TickStyle=vo,exports.TimeFormattingFunctions=Xo,exports.TimeTickStrategy=Zo,exports.TreeMapChart=hA,exports.TriangulatedPoints3D=ah,exports.UIBackgrounds=Vf,exports.UICircle=vn,exports.UIColumnGrid=class extends kn{constructor(){super(...arguments),this.vd=[]}addColumn(){return this.addElement(Dn,void 0)}getColumn(t,i=!1){return i&&this.vd.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.vd[t]}},exports.UIDiamond=xn,exports.UIElementBuilders=no,exports.UIElementColumn=Tn,exports.UIElementLine=Cn,exports.UIElementRow=kn,exports.UIElementWithBackground=br,exports.UIEmptyBackground=Lr,exports.UILabel=mn,exports.UILayoutBuilders=wl,exports.UILayoutGap=wn,exports.UILegendBoxPanel=Cl,exports.UIObject=mr,exports.UIOrigins=we,exports.UIPanel=sa,exports.UIPoint=Mn,exports.UIPointer=bn,exports.UIPolygon=zr,exports.UIRectangle=Sn,exports.UIRowGrid=In,exports.VisibleFill=N,exports.ZoomBandChart=$c,exports.defaultOsmBackgroundColor=Be,exports.disableThemeEffects=t=>({...t,effect:void 0}),exports.emptyFill=z,exports.emptyLine=rt,exports.emptyPoints3D=nh,exports.emptyTick=bo,exports.formatLongitudeLatitude=El,exports.formatNumberAsUnicodeSuperscript=Is,exports.isColor=b,exports.isCoordinate3D=xl,exports.isCoordinateBarChart=kf,exports.isCoordinateClient=Vs,exports.isCoordinatePolar=Hl,exports.isCoordinateXY=Ns,exports.isDashedLine=hn,exports.isDateTimeTickStrategy=t=>!(!t||"object"!=typeof t||!("type"in t)||"date-time-ticks"!==t.type),exports.isEmptyFill=V,exports.isEmptyTick=Mo,exports.isFontSettings=hh,exports.isGlowEffect=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type),exports.isIcon=on,exports.isIndividualPointFill=Y,exports.isLUT=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),exports.isLinearGradientFill=et,exports.isNumericTickStrategy=t=>!(!t||"object"!=typeof t||!("type"in t)||"numeric-ticks"!==t.type),exports.isPalettedFill=$,exports.isPhongShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),exports.isPixelatedPoints3D=dh,exports.isRadialGradientFill=tt,exports.isSeriesSupportedByZoomBandChart=t=>t instanceof Cu||t instanceof $u||t instanceof qu||t instanceof Gu||t instanceof vc||t instanceof Sc||t instanceof Fc,exports.isSimpleShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),exports.isSolidFill=W,exports.isSolidLine=Js,exports.isTickStyle=xo,exports.isTimeTickStrategy=t=>!(!t||"object"!=typeof t||!("type"in t)||"time-ticks"!==t.type),exports.isTriangulatedPoints3D=lh,exports.lightningChart=(t,s)=>{const e="object"==typeof t?t.license:t,h="object"==typeof t?t.licenseInformation:s,r="object"==typeof t?t:void 0,n=new dy;n.e=e;let o=Cy.get(e||"E");return o||(o=((t,s)=>{let e,h,r=!1,n=!1,o=!1,a=!1,l="",u=!1,c=!1;try{if(ay){const i=(t=>{if(!ay)return;const i=ay.split("-");if(i.length>0)switch(i[0]){case"0001":return"0001";case"0002":return"0002";case"T001":return"T001";default:return}})();if("0001"===i){cy=new Uint8Array([2]);const i=(t=>{if(!ay)return;const i=ay.split("-");return 4===i.length?i[1].startsWith("m")?2:1:0})();if(1===i){const t=xy(ay);o=!t.sj,e=t,r=!0}else 2===i?(e=by(ay,t),n=!0):(fy=!0,e=yy(ay),a=!0)}else if("0002"===i){const i=(t=>{if(!ay)return;const i=ay.split("-");return i.length>=2?Uint8Array.from(atob(i[1]),(t=>t.charCodeAt(0)))[0]:void 0})();if(104===i)fy=!0,e=yy(ay),a=!0;else if(189===i){const t=xy(ay);o=!t.sj,e=t,r=!0}else 159===i?(e=by(ay,t),n=!0):e={KX:oy(0,0,1,7,1,12,5)}}else if("T001"===i){const i=((t,i)=>{const s=ay.split("-");if(3!==s.length)return{KX:oy(0,0,1,7,1,12,5)};const e=`${s[1]}`,h=Array.prototype.reduce.call(atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");if(!vy(e,h))return{KX:oy(0,0,1,7,1,12,5)};let r=0;const n=Uint8Array.from(atob(s[1]),(t=>t.charCodeAt(r))),o=n.subarray(r,r+=20),a=new DataView(n.buffer).getUint16(r,!0);r+=2;const l=Uint8Array.from(Array(a));for(let t=0;t<a;t+=1)l[t]=n[t+r]^o[t%o.byteLength];r=0;const u=new DataView(l.buffer),c=gy(l.subarray(r,r+=4)),d=oy(-3,0);if(!c)return{KX:oy(0,0,1,7,1,12,5)};if(c<d)return{KX:oy(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};const f=new Date,A=new Date;f.setDate(f.getDate()+1),A.setDate(A.getDate()-1);const g=py(A),p=py(f);if(c<g||c>p)return{KX:oy(0,0,1,2,1,3,1,4,5)};const m=u.getUint16(r,!0),y=l.subarray(r+=2,r+m);if(cy=new Uint8Array(y),i&&"dHJhZGVy"in i&&"dGVjaG5pY2FsIGFuYWx5c2lz"===i.dHJhZGVy)return{ej:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="};if(i&&"logoGraphic"in i&&i.logoGraphic){const t=i.logoGraphic.split("-");return 3===t.length&&vy(t[0],t[2])?{ej:t[0]}:{KX:oy(0,0,1,7,1,12,5)}}return{KX:oy(0,0,1,7,1,12,5)}})(0,t);e=i;const h=i.ej;h&&s?("string"==typeof h&&(s.l=h),r=!0):e={KX:oy(0,0,1,7,1,12,5)}}else e={KX:oy(0,0,1,7,1,12,5)}}else{const t=/^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])|192\.168)\./;["localhost","127.0.0.1","::1"].includes(window.location.hostname)||t.test(window.location.hostname)?e={KX:oy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68),tj:oy(-2,2)}:window.location.host===ny.atob("c3RhY2tzbmlwcGV0cy5uZXQ=")?(c=!0,u=!1,cy=new Uint8Array([38]),e={}):(c=!0,u=!0,cy=new Uint8Array([38]),e={})}}catch(t){e={KX:oy(0,0,1,7,1,12,5)}}try{a&&(h=ny[oy(-1,34)][oy(-1,35)](oy(-1,39))||void 0)}catch(t){ny.console.error(t)}let d=!1;if(h){const t=h.split("-");if(2===t.length&&vy(t[0],t[1])){const[i,s]=t[0].split(":").map((t=>Number(t)));Date.now()-s<.95*i*1e3&&(d=!0)}}const f=!(c||u||e.KX||r||n||d),A=(()=>{const t=new(ny[oy(-1,0)]);return t.open(oy(0,26),oy(-2,0)),t.setRequestHeader(oy(-1,24),oy(-1,25)),t.withCredentials=!0,t})(),g=new i.Eventer;if(f){let t;try{t=parseInt(ay?ay.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(i){t=Math.floor(1e6*Math.random())}const i=Math.floor(1e6*Math.random());l=(t^i).toString();const s={};let e="",h="",r="";ay=ay||"";const n=oy(-4,0);for(let t=0;t<ay.length;t+=1){const i=ay.charCodeAt(t)^n.charCodeAt(t);e+=String.fromCharCode(i)}const o=oy(-3,0);for(let t=0;t<o.length;t+=1)h+=String.fromCharCode(o.charCodeAt(t)^n.charCodeAt(t));for(let t=0;t<l.length;t+=1)r+=String.fromCharCode(l.charCodeAt(t)^n.charCodeAt(t));s[oy(-1,3)]=ny.btoa(e),s[oy(-1,4)]=ny.btoa(h),s.h=ny.btoa(r),s.v=3,s.s=ny[oy(-1,34)][oy(-1,35)](oy(-1,33))||void 0,A.send(JSON.stringify(s))}return(t,i)=>{const r=[],n={Gn:t=>{r.indexOf(t)>=0||(r.push(t),a())},Wn:t=>g.on("logoChange",t),Un:t=>g.off(t)},a=()=>{r.forEach((t=>{const i=d(t);if(!i)return;const{hj:s,rj:e}=i,h=e?oy(-2,1):void 0,r=`${oy(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${s}${h?oy(0,1,63,1,64,1,59,1,65,1,41):""}`;My(r,p,!1,h)}))},c=t=>t.toLowerCase().split("_").join(" "),d=t=>{var i;const s=null===(i=Object.entries(fo).find((i=>i[1]===t)))||void 0===i?void 0:i[0];if(s){switch(t){case fo.sf:return ly.tf||ly.sf?void 0:{hj:c(s),rj:!0};case fo.nf:return ly.tf||ly.nf?void 0:{hj:c(s),rj:!0};case fo.af:return ly.tf||ly.if||ly.af?void 0:{hj:c(s)};case fo.if:return ly.tf||ly.if?void 0:{hj:c(s)};case fo.ff:return ly.tf||ly.if||ly.ff?void 0:{hj:c(s)};case fo.pf:return ly.tf||ly.if||ly.pf?void 0:{hj:c(s)};case fo.vf:return ly.tf||ly.if||ly.vf?void 0:{hj:c(s)};case fo.bf:return ly.tf||ly.if||ly.bf?void 0:{hj:c(s)};case fo.Mf:return ly.tf||ly.if||ly.Mf?void 0:{hj:c(s)};case fo.xf:return ly.tf||ly.if||ly.xf?void 0:{hj:c(s)};case fo.uf:return ly.tf||ly.if||ly.uf?void 0:{hj:c(s)};case fo.gf:return ly.tf||ly.if||ly.gf?void 0:{hj:c(s)};case fo.df:return ly.tf||ly.if||ly.df?void 0:{hj:c(s)};case fo.mf:return ly.tf||ly.if||ly.mf?void 0:{hj:c(s)};case fo.Sf:return ly.tf||ly.if||ly.Sf?void 0:{hj:c(s)};case fo.yf:return ly.tf||ly.if||ly.yf?void 0:{hj:c(s)};case fo.lf:return ly.tf||ly.if||ly.lf?void 0:{hj:c(s)};case fo.cf:return ly.tf||ly.if||ly.cf?void 0:{hj:c(s)};case fo.Af:return ly.tf||ly.if||ly.Af?void 0:{hj:c(s)};case fo._f:return ly.tf||ly.if||ly._f?void 0:{hj:c(s)};case fo.tf:case fo.ef:case fo.rf:case fo.hf:return}return xi(0,"")}},p=new Cm(i,t,n);(null==e?void 0:e.KX)&&My(e.KX,p,void 0,e.tj);const m=t=>{if("error"===(null==t?void 0:t.type)&&h){const t=h.split("-");if(2===t.length&&vy(t[0],t[1])){const[,i]=t[0].split(":").map((t=>Number(t)));if(i+9e5>Date.now())return fy=!1,void _y(A,!1,y)}}if(A.readyState===ny[oy(-1,0)].DONE)if(200===A.status){const t=JSON.parse(A[oy(-1,23)]);if(!vy(l+oy(-3,0),t.h)){const t=oy(0,0,1,27,1,28,1,29,1,30,1,31,5);My(t,p)}ny[oy(-1,34)][oy(-1,36)](oy(-1,39),t.t),ny[oy(-1,34)][oy(-1,36)](oy(-1,33),t.s),fy=!1}else{let i="";try{i=t&&"loadend"!==t.type?oy(0,0,1,23,1,32,1,24,5):JSON.parse(A[oy(-1,23)]).message,_y(A,!1,y)}catch(t){console.error(t)}My(oy(0,0,1,2,1,7,1,12,5)+i,p)}},y=t=>{m(t)};if(_y(A,!0,y),f?setTimeout((()=>{if(fy){let t=!0;if(h){const i=h.split("-");if(2===i.length&&vy(i[0],i[1])){const[,s]=i[0].split(":").map((t=>Number(t)));s+9e5>Date.now()&&(t=!1)}}t&&My(oy(0,25,1,23,1,32,1,24,5),p)}}),1e4):_y(A,!1,y),u){const t=(()=>{const t=new(ny[oy(-1,0)]);return t.open(oy(0,26),oy(1,0)),t.setRequestHeader("Content-Type","text/plain"),t.withCredentials=!0,t})(),i=Array.from({length:10},(()=>String.fromCharCode(Math.floor(256*Math.random())))).join(""),e=e=>{if("error"===(null==e?void 0:e.type)){const t=oy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);My(t,p,!1,oy(-2,2)),_y(A,!1,h)}if(t.readyState===ny.XMLHttpRequest.DONE){const e=t.getResponseHeader("X-LCJS-SANDBOX-V");if(200!==t.status||e&&"1"!==e){const t=oy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);My(t,p,!1,oy(-2,2)),_y(A,!1,h)}else{const e=JSON.parse(t.responseText);if(!vy(i,e.s)){const t=oy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);My(t,p,!1,oy(-2,2)),_y(A,!1,h)}void 0!==s&&(s.l=e.l),g.emit("logoChange",e.l)}}else{const t=oy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);My(t,p,!1,oy(-2,2)),_y(A,!1,h)}},h=t=>{e(t)};_y(t,!0,h),t.send(i),setTimeout((()=>{if(t.readyState<2){const t=oy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);My(t,p,!1,oy(-2,2)),_y(A,!1,h)}}),1e4)}return o?(t=>{let i;fy=!1;const s=t.ai(),e=()=>{i&&(t.Mn(i.bn()),i=void 0),i=t.II("deployment test"),i.Dr(t.ft).Eh(oy(0,34,1,33)).Ie({x:s.x/2,y:s.y/2}).ba(50).Gh(13).ke(new G({color:M(128,128,128,100)})).va("Arial")._a(500).setMouseInteractions(!1),t.Sn().vn()};t.ko((()=>{e()})),setTimeout(e,0),setInterval((()=>{i&&i.bn()<t.fo()-1?e():i||e()}),1e3)})(p):A.readyState===ny[oy(-1,0)].DONE&&m(),p}})(h,n)),((t,i,s,e)=>{var h,r,n,o,a,l,u,c,d,f;let A;if(s&&s.license){const t=s.license.split("-");A=t[t.length-1]}const g=(null===(h=null==s?void 0:s.webgl)||void 0===h?void 0:h.version)||(null===(n=null===(r=null==s?void 0:s.sharedContextOptions)||void 0===r?void 0:r.webgl)||void 0===n?void 0:n.version),p={UE:null===(o=null==s?void 0:s.sharedContextOptions)||void 0===o?void 0:o.canvas,$n:null==s?void 0:s.warnings,tz:"webgl1"===g?1:"webgl2"===g?2:void 0,QE:!1!==(null===(a=null==s?void 0:s.sharedContextOptions)||void 0===a?void 0:a.antialias),ZE:(null===(l=null==s?void 0:s.sharedContextOptions)||void 0===l?void 0:l.devicePixelRatio)||void 0,lz:(null===(u=null==s?void 0:s.sharedContextOptions)||void 0===u?void 0:u.noCanvasStyles)||void 0,fz:(null===(c=null==s?void 0:s.sharedContextOptions)||void 0===c?void 0:c.noCanvasTransform)||void 0,KE:!1!==(null===(d=null==s?void 0:s.sharedContextOptions)||void 0===d?void 0:d.useStackingOrder),qE:!1!==(null===(f=null==s?void 0:s.sharedContextOptions)||void 0===f?void 0:f.useIndividualCanvas),uz:A||void 0},m=new vg(p),y=i=>t(i,m);return{Dashboard:xg(y,i,s,e),ChartXY:_g(y,i,s,e),Spider:wg(y,i,s,e),Polar:Cg(y,i,s,e),Pie:kg(y,i,s,e),UIPanel:Mg(y,i,s,e),Gauge:Tg(y,i,s,e),Funnel:Fg(y,i,s,e),Pyramid:Ig(y,i,s,e),Chart3D:Dg(y,i,s,e),Map:Pg(y,i,s,e),DataGrid:Bg(y,i,s,e),BarChart:Lg(y,i,s,e),ZoomBandChart:Rg(y,i,s,e),TreeMapChart:Eg(y,i,s,e),dispose:m.U.bind(m),layout:m.yz.bind(m)}})(o,n.e,r,n.l)},exports.onScreenMenuControlBaseHeight=Te,exports.onScreenMenuControlBaseWidth=Fe,exports.onScreenMenuControlOpacity=Ie,exports.onScreenMenuDefaultButtonShape=De,exports.onScreenMenuSpriteURL=Pe,exports.regularColorSteps=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))},exports.saveToFile=Qo,exports.synchronizeAxisIntervals=ft,exports.translatePoint=ct,exports.translatePoint3D=dt,exports.transparentFill=Ce,exports.transparentLine=ke,exports.uint32ColorFromObject=t=>I(255*t.r,255*t.g,255*t.b,255*t.a),exports.uint32ColorFromRGBA=I,exports.vec3Utils=Pi,exports.xDimensionStrategy=po,exports.yDimensionStrategy=mo;
